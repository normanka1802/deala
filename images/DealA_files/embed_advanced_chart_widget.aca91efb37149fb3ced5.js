(window.webpackJsonp=window.webpackJsonp||[]).push([["embed_advanced_chart_widget",10,13,14,17,36,38,49,55,58,63,69,70,84,86,87,88,90,98,100,102,108,131,142,147,154,159,185,200,201,203,209,231,"get-price-alerts-dispatcher","screener-alerts",237,248,290,293,307,309],{"+6II":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=(i("EsMY"),0),o=0,s=0;function a(){clearTimeout(n),clearTimeout(o),clearTimeout(s)}var l,c="tooltip-root-element";function u(){var e=document.getElementById(c);e?l=e:((l=document.createElement("div")).id=c,document.body.appendChild(l))}function h(){l&&(l.innerHTML="")}"interactive"===document.readyState?u():document.addEventListener("DOMContentLoaded",u);var d=i("Eyy1"),p={default:"",white:"theme-white","round-shadow":"theme-round-shadow"},f=Object.keys(p);var _=i("CPmC"),m=i("/DW5"),v=i("gWrr"),g=i("Ialn"),y=(i("HbRj"),i("XAms")),b=i("Wo0S");function S(e){var t=e.getAttribute("title");return t&&(Object(_.b)(e,"text",t),e.removeAttribute("title")),Object(_.a)(e,"text")||""}function w(e){var t,i=L.cloneNode(!0),r=M(i),n=e.content;switch(n.type){case"element":r.innerHTML="",r.appendChild(n.data);break;case"html":r.innerHTML=n.data;break;case"text":if(e.hotkey){var o=A.cloneNode(!0);o.innerText=n.data,r.appendChild(o)}else r.innerText=n.data}if(e.hotkey){var s="none"!==n.type,a=O.cloneNode(!0),l=Object(m.a)(e.hotkey),c=l.keys.map((function(e){return'<span class="'+b["common-tooltip__hotkey-button"]+'">'+e+"</span>"}));a.innerHTML=(t=l.text).format.apply(t,c).replace(/\s\+\s/g,'<span class="'+b["common-tooltip__plus-sign"]+'">+</span>'),r.classList.add(b["common-tooltip__body--with-hotkey"]),s&&a.classList.add(b["common-tooltip__hotkey-block--divider"]),r.appendChild(a)}return i.addEventListener("contextmenu",y.a),i}function P(e,t){var i=t.rect;if(i){!function(e,t){var i,r=f.includes(t)?p[t]:"";(i=e.classList).remove.apply(i,f.map((function(e){return p[e]})).filter((function(e){return!!e}))),r&&!e.classList.contains(r)&&e.classList.add(r)}(e,t.colorTheme||"default"),t.addClass&&e.classList.add(t.addClass);var r=M(e);r.classList.toggle(b["common-tooltip__body--width_wide"],Boolean(t.wide)),r.classList.toggle(b["common-tooltip__body--no-padding"],Boolean(t.noPadding)),r.classList.toggle(b["common-tooltip__body--width_narrow"],Boolean(t.narrow)),r.classList.toggle(b["common-tooltip__body--no-buttons"],!0),e.classList.toggle(b["common-tooltip--no-pointer-events"],!Modernizr.pointerevents),r.style.left=T(0),r.style.width=T(r.clientWidth+(Boolean(t.noPadding)?0:2));var n=document.body.clientWidth,o=window.innerHeight,s=t.vertical,a=t.extendMargin||s&&i.w<20||!s&&i.h<20;e.classList.toggle(b["common-tooltip--farther"],a),e.classList.toggle(b["common-tooltip--vertical"],s),e.classList.toggle(b["common-tooltip--horizontal"],!s);var l=e.querySelector("."+b["common-tooltip__ear-holder"]),c="";if(s){e.style.left=T(i.x+i.w),e.style.top=T(i.y-(e.offsetHeight-i.h)/2);var u=(e.querySelector(":last-child")||r).getBoundingClientRect().right+10>n;e.classList.toggle(b["common-tooltip--direction_reversed"],u),
e.classList.toggle(b["common-tooltip--direction_normal"],!u),c=u?"after":"before",Object(g.isRtl)()?(c=t.otr?"after":c,c=t.otl?"before":c):(c=t.otr?"before":c,c=t.otl?"after":c),l.classList.toggle(b["common-tooltip__ear-holder--before"],"before"===c),l.classList.toggle(b["common-tooltip__ear-holder--after"],"after"===c),"after"===c&&(e.style.left="auto",e.style.right=T(n-i.x))}else{var h=i.x-(r.offsetWidth-i.w)/2,d=n-10-e.offsetWidth,_=Math.max(10,Math.min(h,d));e.style.bottom=T(o-i.y),e.style.left=T(_);u=d<h;e.classList.toggle(b["common-tooltip--direction_reversed"],u),e.classList.toggle(b["common-tooltip--direction_normal"],!u),c=r.getBoundingClientRect().top<10?"below":"above",c=t.above?"above":c,c=t.below?"below":c,l.classList.toggle(b["common-tooltip__ear-holder--above"],"above"===c),l.classList.toggle(b["common-tooltip__ear-holder--below"],"below"===c),"below"===c&&(e.style.bottom="auto",e.style.top=T(i.y+i.h));var m=function(e){return e.querySelector("."+b["common-tooltip__button-container"])}(e),v=r.getBoundingClientRect().left,y=Math.trunc(i.x+i.w/2-(v+r.clientWidth/2));e.style.left=T(_+y),e.style.width=T(r.clientWidth+m.clientWidth),y=u?Math.max(0,y):Math.min(0,y),m.style.left=T(-y),r.style.left=T(-y)}}}function C(e){e.classList.toggle(b["common-tooltip--hidden"],!0)}function T(e){return Math.floor(e)+"px"}var x='\n\t<div id="common-tooltip-wrapper" class="'+b["common-tooltip"]+'">\n\t\t<div class="'+b["common-tooltip__ear-holder"]+'" >\n\t\t\t<div class="'+b["common-tooltip__body"]+' js-tooltip-body"></div>\n\t\t</div>\n\t\t<div class="'+b["common-tooltip__button-container"]+'"></div>\n\t</div>\n',I='\n\t<div class="'+b["common-tooltip__hotkey-block"]+'"></div>\n',E='\n\t<div class="'+b["common-tooltip__hotkey-text"]+'"></div>\n',L=Object(v.parseHtmlElement)(x),O=Object(v.parseHtmlElement)(I),A=Object(v.parseHtmlElement)(E);function M(e){return e.querySelector("."+b["common-tooltip__body"])}var k=i("lxNp");i.d(t,"showOnElement",(function(){return N})),i.d(t,"show",(function(){return F})),i.d(t,"updateTooltipText",(function(){return j})),i.d(t,"hide",(function(){return W}));var D=!1,R=null,V=null;Modernizr.mobiletouch||document.addEventListener("mouseover",(function(e){for(var t=e.target,i=e.currentTarget,r=function(e,t,i){var r=[];for(;e&&e!==t;)e.classList&&e.classList.contains(i)&&r.push(e),e=e.parentElement||(n=e.parentNode)&&(n.nodeType===Node.ELEMENT_NODE?n:null);var n;return r}(t,i,"apply-common-tooltip"),n=function(t){if("buttons"in e){if(1&e.buttons)return"continue"}else if(1===e.which)return"continue";var i=function(){return N(t)};if(i()){var r=function(){t.removeEventListener("common-tooltip-update",i),t.removeEventListener("mouseleave",r),t.removeEventListener("mousedown",r),document.removeEventListener("scroll",r),V&&(V.destroy(),V=null),W()};return t.addEventListener("common-tooltip-update",i),t.addEventListener("mouseleave",r),t.addEventListener("mousedown",r),document.addEventListener("scroll",r),null===V&&(V=Object(k.createGroup)({desc:"Tooltip"})).add({desc:"Hide",hotkey:27,handler:r}),
"break"}},o=0,s=r;o<s.length;o++){var a=s[o];if("break"===n(a))break}}),!0);var B=new MutationObserver((function(){if(R&&R.options.target){("isConnected"in R.options.target?R.options.target.isConnected:document.body.contains(R.options.target))||W()}})),N=function(e,t){void 0===t&&(t={});var i=U(t),n=i.content,o=Object(r.__rest)(i,["content"]),s=function(e){var t=S(e),i=e.getBoundingClientRect(),r={h:i.height,w:i.width,x:i.left,y:i.top},n=e.getAttribute("data-color-theme")||"",o=e.classList.contains("common-tooltip-html"),s=parseInt(e.getAttribute("data-tooltip-delay")||""),a={type:"none"};return t&&(a={type:o?"html":"text",data:t}),{above:e.classList.contains("common-tooltip-above"),below:e.classList.contains("common-tooltip-below"),otl:e.classList.contains("common-tooltip-otl"),otr:e.classList.contains("common-tooltip-otr"),vertical:e.classList.contains("common-tooltip-vertical"),hotkey:e.getAttribute("data-tooltip-hotkey"),narrow:e.classList.contains("common-tooltip-narrow"),colorTheme:n,tooltipDelay:s,rect:r,content:a,target:e}}(e),a=Object.assign(s,o);return"none"!==n.type&&(a.content=n),!("none"===a.content.type&&!a.hotkey)&&(a.target=e,F(a),!0)},F=function(e){var t,i,r,o=U(e),s=w(o);R={options:o,element:s},t=s,h(),l&&l.appendChild(t),a(),D?H(s):(C(s),i=function(){return H(s)},r=function(e){return"number"!=typeof e.tooltipDelay||isNaN(e.tooltipDelay)?500:e.tooltipDelay}(o),n=setTimeout(i,r))},j=function(e){return S(e)};var W=function(){if(a(),B.disconnect(),D&&R){var e,t,i=R.element,r=R.options,n=function(){i.removeEventListener("mouseleave",n),C(i),s=setTimeout((function(){h(),D=!1,R=null}),250)};r.tooltipHideDelay?(e=function(){i.querySelector(":hover")?i.addEventListener("mouseleave",n):n()},t=r.tooltipHideDelay,o=setTimeout(e,t)):n()}};function H(e){var t=Object(d.ensureNotNull)(R).options;if(P(e,t),function(e){e.classList.toggle(b["common-tooltip--hidden"],!1)}(e),B.observe(document,{childList:!0,subtree:!0}),D=!0,t.forceHideOnMove){var i=function(){document.removeEventListener("mousemove",i),W()};document.addEventListener("mousemove",i)}}function U(e){if(function(e){return"content"in e}(e))return e;var t=e.inner,i=e.html,n=e.text,o=Object(r.__rest)(e,["inner","html","text"]),s={type:"none"};return t&&(s={type:"element",data:t}),n&&(s={type:i?"html":"text",data:n}),Object(r.__assign)({content:s},o)}},"+6ja":function(e,t,i){"use strict";i.r(t),i.d(t,"availableTimezones",(function(){return u})),i.d(t,"timezoneIsAvailable",(function(){return h}));i("YFKU");for(var r=i("/+9u"),n=[{id:"Etc/UTC",title:window.t("UTC")},{id:"exchange",title:window.t("Exchange")}],o=[{id:"Africa/Cairo",title:window.t("Cairo"),offset:0},{id:"Africa/Johannesburg",title:window.t("Johannesburg"),offset:0},{id:"Africa/Lagos",title:window.t("Lagos"),offset:0},{id:"America/Argentina/Buenos_Aires",title:window.t("Buenos Aires"),offset:0},{id:"America/Bogota",title:window.t("Bogota"),offset:0},{id:"America/Caracas",title:window.t("Caracas"),offset:0},{id:"America/Chicago",title:window.t("Chicago"),offset:0},{id:"America/El_Salvador",
title:window.t("San Salvador"),offset:0},{id:"America/Juneau",title:window.t("Juneau"),offset:0},{id:"America/Lima",title:window.t("Lima"),offset:0},{id:"America/Los_Angeles",title:window.t("Los Angeles"),offset:0},{id:"America/Mexico_City",title:window.t("Mexico City"),offset:0},{id:"America/New_York",title:window.t("New York"),offset:0},{id:"America/Phoenix",title:window.t("Phoenix"),offset:0},{id:"America/Santiago",title:window.t("Santiago"),offset:0},{id:"America/Sao_Paulo",title:window.t("Sao Paulo"),offset:0},{id:"America/Toronto",title:window.t("Toronto"),offset:0},{id:"America/Vancouver",title:window.t("Vancouver"),offset:0},{id:"US/Mountain",title:window.t("Denver"),offset:0},{id:"Asia/Almaty",title:window.t("Almaty"),offset:0},{id:"Asia/Ashkhabad",title:window.t("Ashkhabad"),offset:0},{id:"Asia/Bahrain",title:window.t("Bahrain"),offset:0},{id:"Asia/Bangkok",title:window.t("Bangkok"),offset:0},{id:"Asia/Chongqing",title:window.t("Chongqing"),offset:0},{id:"Asia/Dubai",title:window.t("Dubai"),offset:0},{id:"Asia/Ho_Chi_Minh",title:window.t("Ho Chi Minh"),offset:0},{id:"Asia/Hong_Kong",title:window.t("Hong Kong"),offset:0},{id:"Asia/Jakarta",title:window.t("Jakarta"),offset:0},{id:"Asia/Jerusalem",title:window.t("Jerusalem"),offset:0},{id:"Asia/Kolkata",title:window.t("Kolkata"),offset:0},{id:"Asia/Kuwait",title:window.t("Kuwait"),offset:0},{id:"Asia/Muscat",title:window.t("Muscat"),offset:0},{id:"Asia/Qatar",title:window.t("Qatar"),offset:0},{id:"Asia/Riyadh",title:window.t("Riyadh"),offset:0},{id:"Asia/Seoul",title:window.t("Seoul"),offset:0},{id:"Asia/Shanghai",title:window.t("Shanghai"),offset:0},{id:"Asia/Singapore",title:window.t("Singapore"),offset:0},{id:"Asia/Taipei",title:window.t("Taipei"),offset:0},{id:"Asia/Tehran",title:window.t("Tehran"),offset:0},{id:"Asia/Tokyo",title:window.t("Tokyo"),offset:0},{id:"Atlantic/Reykjavik",title:window.t("Reykjavik"),offset:0},{id:"Australia/Adelaide",title:window.t("Adelaide"),offset:0},{id:"Australia/Brisbane",title:window.t("Brisbane"),offset:0},{id:"Australia/Perth",title:window.t("Perth"),offset:0},{id:"Australia/Sydney",title:window.t("Sydney"),offset:0},{id:"Europe/Amsterdam",title:window.t("Amsterdam"),offset:0},{id:"Europe/Athens",title:window.t("Athens"),offset:0},{id:"Europe/Belgrade",title:window.t("Belgrade"),offset:0},{id:"Europe/Berlin",title:window.t("Berlin"),offset:0},{id:"Europe/Brussels",title:window.t("Brussels"),offset:0},{id:"Europe/Copenhagen",title:window.t("Copenhagen"),offset:0},{id:"Europe/Dublin",title:window.t("Dublin"),offset:0},{id:"Europe/Helsinki",title:window.t("Helsinki"),offset:0},{id:"Europe/Istanbul",title:window.t("Istanbul"),offset:0},{id:"Europe/Lisbon",title:window.t("Lisbon"),offset:0},{id:"Europe/London",title:window.t("London"),offset:0},{id:"Europe/Luxembourg",title:window.t("Luxembourg"),offset:0},{id:"Europe/Madrid",title:window.t("Madrid"),offset:0},{id:"Europe/Malta",title:window.t("Malta"),offset:0},{id:"Europe/Moscow",title:window.t("Moscow"),offset:0},{id:"Europe/Oslo",title:window.t("Oslo"),offset:0},{
id:"Europe/Paris",title:window.t("Paris"),offset:0},{id:"Europe/Riga",title:window.t("Riga"),offset:0},{id:"Europe/Rome",title:window.t("Rome"),offset:0},{id:"Europe/Stockholm",title:window.t("Stockholm"),offset:0},{id:"Europe/Tallinn",title:window.t("Tallinn"),offset:0},{id:"Europe/Vilnius",title:window.t("Vilnius"),offset:0},{id:"Europe/Warsaw",title:window.t("Warsaw"),offset:0},{id:"Europe/Zurich",title:window.t("Zurich"),offset:0},{id:"Pacific/Auckland",title:window.t("New Zealand"),offset:0},{id:"Pacific/Chatham",title:window.t("Chatham Islands"),offset:0},{id:"Pacific/Fakaofo",title:window.t("Tokelau"),offset:0},{id:"Pacific/Honolulu",title:window.t("Honolulu"),offset:0},{id:"Pacific/Norfolk",title:window.t("Norfolk Island"),offset:0}],s=0,a=o;s<a.length;s++){var l=a[s],c=Object(r.a)(l.id);l.title="("+c.string+") "+l.title,l.offset=c.offset}o.sort((function(e,t){var i=e.offset-t.offset;return 0!==i?i:e.title.localeCompare(t.title)}));var u=n.concat(o);function h(e){for(var t=0;t<u.length;t++)if(e===u[t].id)return!0;return!1}},"+DwS":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("hY0g"),n=i.n(r);function o(e,t){var i=new n.a(e()),r={};t.subscribe(r,(function(){i.setValue(e())}));return i.readonly().spawn((function(){return t.unsubscribeAll(r)}))}},"+GxX":function(e,t,i){"use strict";var r=i("VVxS").TVLocalStorage,n=i("ZX3N");i("qFKp"),TradingView.FeatureToggle={force_prefix:"forcefeaturetoggle.",enableFeature:function(e){r.setItem(this.force_prefix+e,"true")},disableFeature:function(e){r.setItem(this.force_prefix+e,"false")},resetFeature:function(e){r.removeItem(this.force_prefix+e)}},TradingView.isFeatureEnabled=function(e){function t(e){try{var t=n(e+function(){if(window.user&&window.user.id)return window.user.id;var e=r.getItem("featuretoggle_seed");return null!==e||(e=Math.floor(1e6*Math.random()),r.setItem("featuretoggle_seed",e)),e}());return new DataView(t).getUint32(0,!0)/4294967296}catch(i){return.5}}return TradingView.onWidget()||Promise.all([i.e("vendors_embed"),i.e(69),i.e(185),i.e(307)]).then(function(t){i("TxTq").on("featuretoggle",(function(t){e[t.name]=t.state}))}.bind(null,i)).catch(i.oe),function(i){return!("local"!==window.environment||!function(e){
return-1===["black_friday_mainpage","black_friday_popup","black_friday","broker_ALOR_dev","broker_TRADESTATION_coming_soon","broker_TRADESTATION","broker_TRADESTATION_V3","broker_TRADESTATION_V3_dev","datawindow","hide-copy-readonly","chart_sharing","trading-fast-renew-oauth-token","switching_trial_year_to_month_disabled","switching_year_to_month_disabled","default_year_billing_cycle_switcher","marketing-analytics","trial_verify_phone","disable_obs_streaming","broker_FXCM_token_v2","google-ads","visible_address_fields_by_default","slow-support-warning","hide-trading-floating-toolbar","tvcoins_donations","details_disable_bid_ask","vat_disabled","pro_plan_upgrades_disabled","broker_FXCM_dev","new_date_range","video-ideas-new-api","standalone_screener_show_icons","chart_screener_show_icons"].indexOf(e)&&-1===e.indexOf("-maintenance")}(i))||(!e[i]||-1!==e[i])&&(!!("true"===r.getItem(TradingView.FeatureToggle.force_prefix+i)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"true"===user.settings[TradingView.FeatureToggle.force_prefix+i])||!("false"===r.getItem(TradingView.FeatureToggle.force_prefix+i)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"false"===user.settings[TradingView.FeatureToggle.force_prefix+i])&&(!!e[i]&&(1===e[i]||t(i)<=e[i])))}}(window.featureToggleState||{}),t.FeatureToggle=TradingView.FeatureToggle,t.isFeatureEnabled=TradingView.isFeatureEnabled},"+HSM":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M13.5 24a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19zm0 1a10.5 10.5 0 1 0 0-21 10.5 10.5 0 0 0 0 21zM11 10h1v9h-1v-9zm5 0h-1v9h1v-9z"/></svg>'},"+a6K":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));var r=i("Eyy1"),n=i("tqok"),o=i("hsV8");function s(e,t){if(e.start>=t.length||e.stop>=t.length)return null;var i=t[e.start],o=t[e.stop];return o===n.INVALID_TIME_POINT_INDEX?null:(Object(r.assert)(i===n.INVALID_TIME_POINT_INDEX||i<=o,"start should not exceed stop"),{start:i===n.INVALID_TIME_POINT_INDEX?null:i,stop:o})}function a(e,t,i){return{id:t,start:Object(o.ensureTimePointIndexIndex)(i.indexOf(null!==e.start?e.start:n.INVALID_TIME_POINT_INDEX)),stop:Object(o.ensureTimePointIndexIndex)(i.indexOf(e.stop))}}},"+cnz":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 5" width="7" height="5" fill="none"><path stroke="currentColor" stroke-width="1.2" d="M1 1.5l2.5 2 2.5-2"/></svg>'},"+h+m":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=(i("bSeV"),i("d1kB"),i("YFKU")),o=i("qFKp"),s=i("mNbo"),a=i("BHQF");i.d(t,"RC_RESPONSE_PARAM",(function(){return l})),i.d(t,"RC_RESPONSE_PARAM_V2",(function(){return c})),i.d(t,"recaptchaLoaded",(function(){return u})),i.d(t,"protectedFetch",(function(){return p}));var l="g-recaptcha-response",c="g-recaptcha-response-v2",u=new Promise((function(e,t){if(Object(s.isOnMobileAppPage)("any"))e();else{var i=document.createElement("script")
;i.src="https://www.recaptcha.net/recaptcha/api.js?render="+window.RECAPTCHA_SITE_KEY_V3+"&hl="+window.language,i.onload=function(){window.grecaptcha.ready(e)},i.onerror=t;var r=document.querySelector("head");r&&r.appendChild(i)}}));function h(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return o.CheckMobile.iOS()?[2,""]:[4,u];case 1:return t.sent(),[2,window.grecaptcha.execute(window.RECAPTCHA_SITE_KEY_V3,{action:e})]}}))}))}function d(e,t,i){return Object(a.fetch)(e,Object.assign({method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},i))}function p(e,t,o,s){return Object(r.__awaiter)(this,void 0,void 0,(function(){var a,u,p,f,_,m,v;return Object(r.__generator)(this,(function(g){switch(g.label){case 0:return[4,h(o)];case 1:return a=g.sent(),u=Object(r.__assign)(((m={})[l]=a,m),t),[4,d(e,u,s)];case 2:return[4,g.sent().json()];case 3:return(p=g.sent()).rc_v2_required||p.rc_fail?[4,Promise.all([i.e("vendors_embed"),i.e(2),i.e(19),i.e(37),i.e(39),i.e(46),i.e(360),i.e(0),i.e(42),i.e("recaptcha-popup")]).then(i.bind(null,"6jL0")).then((function(e){return e.createRecaptchaPopup()}))]:[2,p];case 4:return f=g.sent(),_=Object(r.__assign)(((v={})[c]=f,v),t),[4,d(e,_,s)];case 5:return[4,g.sent().json()];case 6:if((p=g.sent()).rc_fail)throw new Error(n.t("reCAPTCHA check failed. Please, try again."));return[2,p]}}))}))}},"+hLl":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Brush");function s(e,t){this._constructor="LineToolBrush";var n=t||s.createProperties();r.call(this,e,n),this._finished=!1,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("00XE").BrushPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return-1},s.prototype.finished=function(){return this._finished},s.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Brush"},s.prototype.hasEditableCoordinates=function(){return!1},s.prototype.percentDistance=function(e,t){return Math.abs((t-e)/e)},s.prototype.addPoint=function(e){if(this._finished)return!0;if(this._lastPoint=null,this._points.length>0){var t=this._points[this._points.length-1],i=this.pointToScreenPoint(t)[1];if(this.pointToScreenPoint(e)[1].subtract(i).length()<2)return this._finished}return r.prototype.addPoint.call(this,e),this._finished},s.prototype.restorePoints=function(e,t,i){r.prototype.restorePoints.call(this,e,t,i),this._finished=!0},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("ZSes").BrushDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolbrush",e)
;return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolBrush=s},"+lbv":function(e){
e.exports=JSON.parse('{"free":{"CHART_STORAGE":{"limit":1},"MULTIPLE_CHARTS":{"limit":1},"INDICATORS_ON_CHART":{"limit":3},"STUDY_ON_STUDY":{"limit":270,"child_limit":1},"SERVER_SIDE_ALERTS":{"limit":1},"SCREENER_ALERTS":{"limit":1},"SCREENER_INTERVALS":{"interval":["1D","1W","1M"]},"STUDY_TEMPLATES":{"limit":1},"SIMULTANEOUS_CONNECTIONS":{"limit":1}},"__legacy_pro":{"CHART_STORAGE":{"limit":99999},"MULTIPLE_CHARTS":{"limit":8},"CUSTOM_INTERVALS":{},"MULTIPLE_WATCHLISTS":{},"IMPORT_WATCHLISTS":{},"EXPORT_WATCHLISTS":{},"INDICATORS_ON_CHART":{"limit":99999},"TV_VOLUMEBYPRICE":{"study_packages":["tv-volumebyprice"]},"STUDY_ON_STUDY":{"limit":270,"child_limit":99999},"TICK_BY_TICK_PUSH_DATA":{},"SERVER_SIDE_ALERTS":{"limit":10},"SCREENER_ALERTS":{"limit":99999},"SCREENER_AUTO_REFRESH":{},"SCREENER_EXPORT_DATA":{},"SCREENER_INTERVALS":{"interval":["1m","5m","15m","1h","4h","1D","1W","1M"]},"SCREENER_REALTIME_IDC":{},"NO_SPONSORED_ADS":{},"STUDY_TEMPLATES":{"limit":99999},"SIMULTANEOUS_CONNECTIONS":{"limit":1},"IDC_AVAILABLE_DELAY":{},"STATUS":{"disable_on_trial":true},"MULTIFLAGGED_SYMBOLS_LISTS":{},"BAR_REPLAY_INTRADAY":{},"SHOWS":{"disable_on_trial":true},"ALERTS_WEBHOOK":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"__legacy_pro_realtime":{"extends":"__legacy_pro","TV_PROSTUDIES":{"study_packages":["tv-prostudies"]},"SERVER_SIDE_ALERTS":{"limit":1000},"CAN_EDIT_PUBLIC_CHATS":{"disable_on_trial":true},"EXPORT_CHART_DATA":{}},"__legacy_pro_premium":{"extends":"__legacy_pro_realtime","ALERTS_TRUE_SMS":{"disable_on_trial":true},"IDEA_SIGNATURE":{"disable_on_trial":true},"PROFILE_WEBSITE_FIELD":{"disable_on_trial":true},"ALERTS_NO_EXPIRATION":{},"PUBLISH_INVITE_ONLY_SCRIPTS":{"disable_on_trial":true},"EXPORT_CHART_DATA":{},"ALERTS_ON_SECONDS":{},"PERMANENT_STREAM_RECORDS":{}},"pro":{"CHART_STORAGE":{"limit":5},"MULTIPLE_CHARTS":{"limit":2},"CUSTOM_INTERVALS":{},"MULTIPLE_WATCHLISTS":{},"IMPORT_WATCHLISTS":{},"EXPORT_WATCHLISTS":{},"INDICATORS_ON_CHART":{"limit":5},"TV_VOLUMEBYPRICE":{"study_packages":["tv-volumebyprice"]},"STUDY_ON_STUDY":{"limit":270,"child_limit":1},"TICK_BY_TICK_PUSH_DATA":{},"SERVER_SIDE_ALERTS":{"limit":10},"SCREENER_ALERTS":{"limit":99999},"SCREENER_AUTO_REFRESH":{},"SCREENER_EXPORT_DATA":{},"SCREENER_INTERVALS":{"interval":["1m","5m","15m","1h","4h","1D","1W","1M"]},"SCREENER_REALTIME_IDC":{},"NO_SPONSORED_ADS":{},"STUDY_TEMPLATES":{"limit":99999},"SIMULTANEOUS_CONNECTIONS":{"limit":1},"IDC_AVAILABLE_DELAY":{},"STATUS":{"disable_on_trial":true},"BAR_REPLAY_INTRADAY":{},"MULTIFLAGGED_SYMBOLS_LISTS":{},"SHOWS":{"disable_on_trial":true},"ALERTS_WEBHOOK":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"pro_realtime":{"extends":"pro","CHART_STORAGE":{"limit":10},"MULTIPLE_CHARTS":{"limit":4},"INDICATORS_ON_CHART":{"limit":10},"TV_PROSTUDIES":{"study_packages":["tv-prostudies"]},"STUDY_ON_STUDY":{"limit":270,"child_limit":99999},"SERVER_SIDE_ALERTS":{"limit":30},"CAN_EDIT_PUBLIC_CHATS":{"disable_on_trial":true},"SIMULTANEOUS_CONNECTIONS":{"limit":2},"EXPORT_CHART_DATA":{}},"pro_premium":{"extends":"pro_realtime","CHART_STORAGE":{"limit":99999},"MULTIPLE_CHARTS":{"limit":8},"INDICATORS_ON_CHART":{"limit":25},"SERVER_SIDE_ALERTS":{"limit":400},"SIMULTANEOUS_CONNECTIONS":{"limit":5},"ALERTS_TRUE_SMS":{"disable_on_trial":true},"IDEA_SIGNATURE":{"disable_on_trial":true},"PROFILE_WEBSITE_FIELD":{"disable_on_trial":true},"ALERTS_NO_EXPIRATION":{},"PUBLISH_INVITE_ONLY_SCRIPTS":{"disable_on_trial":true},"EXPORT_CHART_DATA":{},"ALERTS_ON_SECONDS":{},"PERMANENT_STREAM_RECORDS":{}},"pro_mini_alerts":{"extends":"free","SERVER_SIDE_ALERTS":{"limit":30},"SCREENER_ALERTS":{"limit":99999},"SCREENER_REALTIME_IDC":{},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"pro_mini_ads":{"extends":"free","SCREENER_REALTIME_IDC":{},"NO_SPONSORED_ADS":{},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"pro_mini_layouts":{"extends":"free","MULTIPLE_CHARTS":{"limit":8},"SCREENER_REALTIME_IDC":{},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"pro_edu":{"extends":"free","CHART_STORAGE":{"limit":3},"MULTIPLE_CHARTS":{"limit":2},"MULTIPLE_WATCHLISTS":{},"IMPORT_WATCHLISTS":{},"EXPORT_WATCHLISTS":{},"TICK_BY_TICK_PUSH_DATA":{},"SERVER_SIDE_ALERTS":{"limit":5},"SCREENER_ALERTS":{"limit":99999},"SCREENER_REALTIME_IDC":{},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}}}')
},"+q2u":function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererCrossShape",(function(){return s}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShape=function(e,t,i){var r=i.width,n=i.height,o=i.x-r/2,s=i.vertOffset,a=i.y-n/2+s,l=t.pixelRatio,c=this._lineWidth(t),u=c%2?.5:0,h=Math.round(o*l),d=Math.round((o+r)*l);(d-h)%2!=c%2&&(d+=1);var p=Math.floor((h+d)/2)+u,f=Math.round(a*l),_=Math.round((a+n)*l);(_-f)%2!=c%2&&(_+=1);var m=Math.floor((f+_)/2)+u;e.moveTo(p,f),e.lineTo(p,_),e.moveTo(h,m),e.lineTo(d,m)},t.prototype._calcBoundingBox=function(t){var i=t.width,r=t.height,n=t.x-i/2,s=t.vertOffset,a=t.y-r/2+s,l=n,c=n+i,u=a,h=a+r,d=new o.Point(l,u),p=new o.Point(c,h),f=Object(o.box)(d,p),_=e.prototype._calcBoundingBox.call(this,t);return _&&(f=this._unionBox(f,_)),f},t}(n.c)},"+slJ":function(e,t,i){"use strict";function r(e){return o().then((function(t){return t.hasUserAccessToDataSource(e)}))}function n(e){return o().then((function(t){return t.filterAccessibleDataSources(e)}))}i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return n}));var o=function(){return Promise.all([i.e(159),i.e(10),i.e(13),i.e(38),i.e(36),i.e(49),i.e(70),i.e(58),i.e(63),i.e(88),i.e(86),i.e(84),i.e(87),i.e(100),i.e(98),i.e(102),i.e(108),i.e(131),i.e(154),i.e("alert-utils-has-user-access-to-data-source")]).then(i.bind(null,"SlIP"))}},"+wtf":function(e,t,i){"use strict";i.r(t),i.d(t,"getStudyDangerReason",(function(){return n}));var r=i("PjMa");function n(e){var t=e.metaInfo();if(!0===t.historyCalculationMayChange)return r.DataSourceDangerReason.PineRepainting;for(var i=0,o=t.inputs.filter((function(e){return"symbol"===e.type})).map((function(e){return e.id}));i<o.length;i++){var s=o[i],a=e.properties().inputs[s].value(),l=e.resolvedSymbolInfoBySymbol(a);if(l){if("spread"===l.type)return r.DataSourceDangerReason.Spread;if("CRYPTOCAP"===l.exchange)return r.DataSourceDangerReason.CryptoCap}}var c=e.ownerSource();return e.isChildStudy()&&c?n(c):null}},"/+9u":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("jCNj");function n(e,t){void 0===t&&(t=Date.now());var i=Object(r.get_timezone)(e).offset_utc(t),n="",o=i/1e3/60/60;o%1&&(n=":"+o%1*60);return{offset:i,string:"UTC"+(o>0?"+"+(o-o%1)+n:0===o?"":String(o-o%1+n))}}},"//lZ":function(e,t,i){"use strict";i.r(t),i.d(t,"doAnimate",(function(){return s}));var r=i("mrSG");var n={from:0,duration:250,easing:i("9uLv").easingFunc.easeOutCubic},o=function(){function e(e){var t=this;this._doing=!0,this._completed=!1,this._options=Object(r.__assign)(Object(r.__assign)({},n),e);var i=performance.now();window.requestAnimationFrame((function(e){t._animation(i,t._options.from,e)}))}return e.prototype.stop=function(){this._doing=!1},e.prototype.completed=function(){return this._completed},e.prototype._animation=function(e,t,i){var r=this;if(this._doing){
var n,o,s,a=(i=!i||i<1e12?performance.now():i)-e,l=a>=this._options.duration||t===this._options.to,c=(n=this._options.from,o=this._options.to,s=this._options.easing(a/this._options.duration),n*(1-s)+o*s),u=l?this._options.to:c,h=u-t;this._options.onStep(h,u),l?this._finishAnimation():window.requestAnimationFrame((function(t){r._animation(e,u,t)}))}else this._finishAnimation()},e.prototype._finishAnimation=function(){this._options.onComplete&&this._options.onComplete(),this._completed=!0},e}();function s(e){return new o(e)}},"//lt":function(e,t,i){"use strict";var r;i.r(t),i.d(t,"PaneCursorType",(function(){return r})),function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Eraser=2]="Eraser",e[e.Dot=3]="Dot",e[e.Grabbing=4]="Grabbing",e[e.ZoomIn=5]="ZoomIn",e[e.VerticalResize=6]="VerticalResize",e[e.HorizontalResize=7]="HorizontalResize",e[e.DiagonalNeSwResize=8]="DiagonalNeSwResize",e[e.DiagonalNwSeResize=9]="DiagonalNwSeResize"}(r||(r={}))},"/3z9":function(e,t,i){"use strict";i.r(t),i.d(t,"isMacKeyboard",(function(){return o})),i.d(t,"Modifiers",(function(){return r})),i.d(t,"modifiersFromEvent",(function(){return s})),i.d(t,"hashFromEvent",(function(){return a})),i.d(t,"humanReadableModifiers",(function(){return l})),i.d(t,"humanReadableHash",(function(){return h}));var r,n=i("qFKp"),o=Object(n.isMac)()||n.CheckMobile.iOS();function s(e){var t=0;return e.shiftKey&&(t+=1024),e.altKey&&(t+=512),e.ctrlKey&&(t+=256),e.metaKey&&(t+=2048),t}function a(e){return s(e)|e.keyCode}function l(e){var t="";return 256&e&&(t+=o?"^":"Ctrl + "),512&e&&(t+=o?"⌥":"Alt + "),1024&e&&(t+=o?"⇧":"Shift + "),2048&e&&(t+=o?"⌘":"Win + "),t}!function(e){e[e.None=0]="None",e[e.Alt=512]="Alt",e[e.Shift=1024]="Shift",e[e.Mod=o?2048:256]="Mod",e[e.Control=256]="Control",e[e.Meta=2048]="Meta"}(r||(r={}));for(var c={9:"⇥",13:"↵",27:"Esc",8:o?"⌫":"Backspace",32:"Space",35:"End",36:"Home",37:"←",38:"↑",39:"→",40:"↓",45:"Ins",46:"Del",191:"/"},u=1;u<=16;u++)c[u+111]="F"+u;function h(e){var t=l(e),i=255&e;return t+=i in c?c[i]:String.fromCharCode(i)}},"/DW5":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return o}));var r=i("CLNU");function n(e){return Object(r.clean)(JSON.stringify(e))}function o(e){return JSON.parse(Object(r.clean)(e,!0))}},"/DxK":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("p1SQ").LineToolHorzLinePriceAxisView,o=i("tc+8"),s=i("Ocx9").DefaultProperty,a=window.t("Horizontal Line");function l(e,t){this._constructor="LineToolHorzLine";var o=t||l.createProperties();this._priceAxisView=new n(this),r.call(this,e,o),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("ckl+").HorzLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(l,r),l.prototype.state=function(e){var t=r.prototype.state.call(this,e);return t.points&&0!==t.points.length&&(t.points[0].offset=0),t},l.prototype.pointsCount=function(){return 1},l.prototype.translatedType=function(){return a},l.prototype.name=function(){
return"Horizontal Line"},l.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},l.prototype.updateAllViews=function(){r.prototype.updateAllViews.call(this),this._priceAxisView.update()},l.prototype.canHasAlert=function(){return!0},l.prototype._getAlertPlots=function(){return[this.points()[0].price]},l.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("NEbb").HorizontalLineDefinitionsViewModel}.bind(null,i)).catch(i.oe)},l.prototype.template=function(){var e=r.prototype.template.call(this);return e.text=this.properties().childs().text.value(),e},l.prototype._applyTemplateImpl=function(e){r.prototype._applyTemplateImpl.call(this,e),this.properties().childs().text.setValue(e.text)},l.createProperties=function(e){var t=new s("linetoolhorzline",e);return l._configureProperties(t),t},l._configureProperties=function(e){r._configureProperties(e),e.hasChild("text")||e.addChild("text",new o("")),e.addExclusion("text")},t.LineToolHorzLine=l},"/Kki":function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesPrevClosePriceLinePaneView",(function(){return s}));var r=i("mrSG"),n=i("k4w6"),o=i("8Uy/"),s=function(e){function t(t){var i=e.call(this,t)||this;return i._lineRendererData.linestyle=o.LINESTYLE_DOTTED,i}return Object(r.__extends)(t,e),t.prototype._updateImpl=function(){if(this._lineRendererData.visible=!1,this._series.properties().showPrevClosePriceLine.value()&&!this._series.isDWM()){var e=this._series.prevClose();null!==e&&(this._lineRendererData.visible=!0,this._lineRendererData.y=e.coordinate,this._lineRendererData.color=this._series.properties().prevClosePriceLineColor.value(),this._lineRendererData.linewidth=this._series.properties().prevClosePriceLineWidth.value())}},t}(n.a)},"/McG":function(e){
e.exports=JSON.parse('{"content":{"chartProperties":{"scalesProperties":{"textColor":"#131722","lineColor":"#E0E3EB","backgroundColor":"#ffffff"},"paneProperties":{"vertGridProperties":{"color":"#F0F3FA"},"horzGridProperties":{"color":"#F0F3FA"},"background":"#ffffff","backgroundGradientStartColor":"#ffffff","backgroundGradientEndColor":"#ffffff"}},"sessions":{"graphics":{"backgrounds":{"outOfSession":{"color":"#2196F3","transparency":92},"preMarket":{"color":"#FF9800","transparency":92},"postMarket":{"color":"#2196F3","transparency":92}},"vertlines":{"sessBreaks":{"color":"#4985e7","style":2,"width":1}}}},"mainSourceProperties":{"baseLineColor":"#B2B5BE","candleStyle":{"borderColor":"#378658","upColor":"#26a69a","wickColor":"#737375","wickUpColor":"#26a69a","wickDownColor":"#ef5350","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350"},"haStyle":{"borderColor":"#378658","upColor":"#26a69a","wickColor":"#737375","wickUpColor":"#26a69a","wickDownColor":"#ef5350","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350"},"barStyle":{"downColor":"#ef5350","upColor":"#26a69a"},"pnfStyle":{"downColor":"#ef5350","upColor":"#26a69a","upColorProjection":"#a9dcc3","downColorProjection":"#f5a6ae"},"baselineStyle":{"baselineColor":"rgba( 117, 134, 150, 1)","topFillColor1":"rgba( 38, 166, 154, 0.28)","topFillColor2":"rgba( 38, 166, 154, 0.05)","bottomFillColor1":"rgba( 239, 83, 80, 0.05)","bottomFillColor2":"rgba( 239, 83, 80, 0.28)","topLineColor":"rgba( 38, 166, 154, 1)","bottomLineColor":"rgba( 239, 83, 80, 1)"},"areaStyle":{"transparency":100,"color1":"rgba(33, 150, 243, 0.28)","color2":"#2196f3","linecolor":"#2196f3","linewidth":2,"linestyle":0},"renkoStyle":{"upColor":"#26a69a","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350","upColorProjection":"#a9dcc3","downColorProjection":"#f5a6ae","borderUpColorProjection":"#a9dcc3","borderDownColorProjection":"#f5a6ae","wickUpColor":"#26a69a","wickDownColor":"#ef5350"},"lineStyle":{"color":"#2196f3","linewidth":2,"linestyle":0},"kagiStyle":{"downColor":"#ef5350","upColor":"#26a69a","upColorProjection":"#a9dcc3","downColorProjection":"#f5a6ae"},"pbStyle":{"upColor":"#26a69a","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350","upColorProjection":"#a9dcc3","downColorProjection":"#f5a6ae","borderUpColorProjection":"#a9dcc3","borderDownColorProjection":"#f5a6ae"},"rangeStyle":{"upColor":"#26a69a","downColor":"#ef5350","upColorProjection":"#a9dcc3","downColorProjection":"#f5a6ae"}}}}')},"/SnT":function(e,t,i){"use strict";var r=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520];function n(e){if("string"!=typeof e)throw new Error("string cannot be undefined or null");for(var t=[],i=0,r=0;i<e.length;)c(e[i+(r+=o(i+r,e))])&&r++,a(e[i+r])&&r++,l(e[i+r])&&r++,u(e[i+r])?r++:(t.push(e.substring(i,i+r)),i+=r,r=0);return t}function o(e,t){var i=t[e];if(!function(e){return e&&d(e[0].charCodeAt(0),55296,56319)}(i)||e===t.length-1)return 1;var r=i+t[e+1],n=t.substring(e+2,e+5)
;return s(r)&&s(n)||function(e){return d(h(e),127995,127999)}(n)?4:2}function s(e){return d(h(e),127462,127487)}function a(e){return"string"==typeof e&&d(e.charCodeAt(0),65024,65039)}function l(e){return"string"==typeof e&&d(e.charCodeAt(0),8400,8447)}function c(e){return"string"==typeof e&&-1!==r.indexOf(e.charCodeAt(0))}function u(e){return"string"==typeof e&&8205===e.charCodeAt(0)}function h(e){return(e.charCodeAt(0)-55296<<10)+(e.charCodeAt(1)-56320)+65536}function d(e,t,i){return e>=t&&e<=i}e.exports=n,e.exports.substr=function(e,t,i){var r=n(e);if(void 0===t)return e;if(t>=r.length)return"";var o=r.length-t,s=t+(void 0===i?o:i);return s>t+o&&(s=void 0),r.slice(t,s).join("")}},"/Y2c":function(e,t,i){"use strict";(function(t){var r=i("Eyy1").assert,n=i("e3/o").randomHash,o=i("VNzU").layouts,s=i("Zo2/"),a=i("qFKp").supportTouch,l=i("qFKp").isIE,c=i("qFKp").isEdge,u=i("x8jL").createUndoHistory,h=i("mMWL"),d=i("lxNp"),p=i("/3z9"),f=i("FQhm"),_=i("l7mP"),m=i("Kxc7"),v=i("ijBy").SetChartLayoutCommand,g=i("hY0g"),y=i("HySD").ResizerDetacherState,b=i("HV/F").delegateToPromise,S=i("sEk5"),w=i("lJvs"),P=i("txPx").getLogger("Chart.ChartWidgetCollection"),C=i("JWMC").trackEvent,T=i("wamh").ChangeToolBarsThemeUndoCommand,x=i("EsvI").getCurrentTheme,I=i("ULlu").unwrap,E=i("dfhE"),L=i("ufwo").rangesAreEqual,O=i("vPbs").CollectionViewMode,A=i("Nkvk").mediaState,M=i("2jAL").SwapChartsUndoCommand,k=i("b5Gw").makeCancelable,D=i("2vAl"),R=i("NP3r").enabled,V=i("NP3r").getConfig,B=i("bKsZ").ProductFeatures,N=i("oOPW").createGoProDialog,F=i("dBCn").TimingsMeter,j=i("LBej"),W=i("xtHi").detachToPopup,H=i("xtHi").screenBox,U=i("6js9").showMagnetModeNotification,z=i("L7u7").pushChartPage,G=i("+GxX").isFeatureEnabled,q=i("HWna").reconnectChartApi,Y=i("K55a").marketStatusText,X=i("E3Wt"),K=X.applyIndicatorsToAllChartsImpl,J=X.applyIndicatorToAllChartsImpl,Q={saveChartEnabled:!0,takeScreenshotEnabled:!0},Z=G("hide_interval_exchange_legend");e.exports=function(e){var X=this,ee=Object.assign({},Q,e),te=1,ie=2,re=0,ne=0,oe=new g,se=ee.readOnly||!1,ae=[],le=0,ce=new g,ue=new g,he=null,de="s",pe=new g;pe.setValue(O.ForceFullscreen);var fe=[],_e=!1,me=!1,ve=!1,ge=new g(!1),ye=new g(!1),be=new g(!1),Se=new g(TVSettings.getBool("chart.syncCrosshair",!0)),we=d.createGroup({desc:"Layout"}),Pe=null,Ce=null,Te=Se.value();Se.subscribe((function(e){Te=e=!!e,TVSettings.setValue("chart.syncCrosshair",e);for(var t=0;t<ae.length;++t){var i=ae[t].chartWidget.model();i&&i.model().lightUpdate()}}));var xe=new g(de),Ie=ee.resizerBridge.width,Ee=ee.resizerBridge.height,Le=null;"padding"in ee&&(ie=ee.padding),"topOffset"in ee&&(te=ee.topOffset),"edge"in ee&&(re=ee.edge),"border"in ee&&(ne=ee.border);var Oe=ee.widgetOptions||{},Ae=ee.metaInfo||{},Me={id:new g(Ae.id||null),name:new g(Ae.name),description:new g(Ae.description),username:new g(Ae.username),uid:new g(Ae.uid),lastModified:new g(Ae.lastModified)},ke=u();ke.onChange().subscribe(null,(function(e){f.emit("undo_redo_state_changed",e)}))
;var De=$(ee.resizerBridge.container.value()).eq(0),Re=$.Deferred(),Ve=new t,Be=new t;function Ne(){ae.forEach((function(e){e.chartWidget.onZoom().unsubscribeAll(this)}))}var Fe,je=null,We=null,He=null,Ue=null;function ze(){return{undoHistory:ke,chartWidgetsDefs:ae}}function Ge(){var e=re+ne,t=je?je.offsetHeight:0;return{width:Ie.value()-2*e,height:Ee.value()-te-t-e,top:te,left:e}}function qe(){return G("save_all_charts_in_layout")?ae.length+fe.length:Ye()}function Ye(){return o[de].count}function Xe(e,t,i,r){if(e<ae.length){var n=ae[e].chartWidget;return e<Ye()||n.shouldBeSavedEvenIfHidden()?n.state(t,i,r):null}return fe[e-ae.length].content}function Ke(){return null!==Pe?Pe:(Ce=k(Promise.all([Promise.all([i.e("vendors_embed"),i.e(75),i.e(78),i.e(343),i.e(0),i.e(67),i.e("chart-toasts")]).then(i.bind(null,"4eYg")),Promise.all([i.e("vendors_embed"),i.e(78),i.e(93),i.e(0),i.e(67),i.e("global-toasts")]).then(i.bind(null,"NDyO"))]).then((function(e){return[e[0].ChartToasts,e[1].globalToasts]}))),Pe=Ce.promise.then((function(e){Ce=null;var t=e[0],i=e[1];return new t(ee.resizerBridge,De.get(0),i,je?je.offsetHeight:0)})).catch((function(){return Ce=null,null})))}function Je(){var e;e=Le?[Le]:ae.slice(0,he.count).filter((function(e){return!e.hiddenInLayout.value()}));for(var t=0;t<e.length;t++)Qe(e[t],t,e.length)}function Qe(e,t,i){var r=he.sizer(Ge(),t,i,ie+ne);r.width=Math.max(Math.round(r.width),0),r.height=Math.max(Math.round(r.height),0),r.top=Math.round(r.top),r.left=Math.round(r.left),e.metrics=r,$(e.container.value()).css(r),Z&&$(e.container.value()).toggleClass("single-visible",1===i),e.width.setValue(r.width),e.height.setValue(r.height)}ee.seriesControlBarEnabled&&(Fe=re+ne+"px",(je=document.createElement("div")).style.left=Fe,je.style.right=Fe,je.style.bottom=Fe,je.classList.add("chart-toolbar","chart-controls-bar"),De[0].appendChild(je),Promise.all([i.e("vendors_embed"),i.e(1),i.e(6),i.e(8),i.e(21),i.e(19),i.e(23),i.e(27),i.e(45),i.e(51),i.e(96),i.e(210),i.e(216),i.e(253),i.e(0),i.e(7),i.e(16),i.e(41),i.e(192),i.e(176),i.e("chart-bottom-toolbar")]).then(function(e){var r=i("MfqI").BottomToolbarRenderer,n=ee.resizerBridge,o=[n.container.spawn(),n.width.spawn(),n.height.spawn()],s=n.container.value(),a=new t,l=function(){a.fire()};o.forEach((function(e){e.subscribe(l)})),We=new r(je,a,(function(){var e=s.getBoundingClientRect(),t=Ge();return t.top=e.top+t.top,t.left=e.left+t.left,t}),X,ChartApiInstance,Oe,ee.seriesControlBar),He=function(){null!==We&&(We.destroy(),We=null,je.remove(),je=null),o.forEach((function(e){e.destroy()})),a.destroy()}}.bind(null,i)).catch(i.oe)),Ie.subscribe(Je),Ee.subscribe(Je),this.updateLayout=Je;var Ze,$e=!1,et=["phone","phone-vertical"];function tt(e,t){ee.mobileForceChartMaximizeEnabled&&(!et.includes(A.device)||t&&et.includes(t)?et.includes(A.device)||t&&!et.includes(t)||($e=!1,!Ze&&window.is_authenticated&&st(null)):($e=!0,window.is_authenticated&&pe.value()===O.ForceFullscreen&&(Ze=Le,oe.value().requestFullscreen())))}function it(e){return e.rdState.owner.value()!==e}
function rt(e){var t;e=Object.assign({chartWidgetCollection:X,isActive:0===ae.length,barsMarksContainersFactory:nt,undoHistory:ke,readOnly:se,initialLoading:ve,getToasts:Ke},e||{}),void 0!==It&&(e.customLegendWidgetFactories=new Map(It));var r=$(document.createElement("div")).addClass("chart-container").appendTo(De).css({position:"absolute",overflow:"hidden"});(l||c)&&r.css({"touch-action":"none","-ms-touch-action":"none"}),ee.className&&r.addClass(ee.className);var n={alive:new g(!0),container:new g(I(r)),width:new g,height:new g,hiddenInLayout:new g(!1),visible:new g,rdState:new y,requestFullscreen:function(){ce.value()&&(st(n),oe.setValue(n.chartWidget))},exitFullscreen:function(){oe.value()===n.chartWidget&&st(null)},detachable:ce,fullscreenable:ce,fullscreen:new g};function o(){n.visible.setValue(!n.hiddenInLayout.value()&&ee.resizerBridge.visible.value())}n.detach=function(){W(n.rdState,Object.assign({title:window.t("Detached chart")},H(n.rdState.bridge().container.value())))},n.rdState.pushOwner(n),n.rdState.owner.subscribe((function(e){e!==n&&(Promise.all([i.e(324),i.e("detached-chart-message")]).then(function(e){i("9g5h").show(n.rdState.bridge().container.value())}.bind(null,i)).catch(i.oe),C("GUI","Chart detached")),Le===n&&st(null),ct(de)})),ae.push(n),n.hiddenInLayout.subscribe(o),ee.resizerBridge.visible.subscribe(o),o(),function(e){for(var t=0,i=0,r=0;r<he.count;r++){ae[r]&&it(ae[r])||(ae[r]===e&&(i=t),t++)}Qe(e,i,t)}(n),Object.assign(e,n.rdState.bridge());var a=e.content?e.content.chartId:lt(at);return n.chartWidget=t=new s.ChartWidget(e,a,Me.uid.value()),se||(n.timingsMeter=new F(String(ae.length-1)),n.chartWidget.setTimingsMeter(n.timingsMeter)),e.containsData?t.finishInitWithoutConnect():t.connect(),t.withModel(null,(function(){var e=t.model().model();xt.forEach((function(t,i){e.addCustomSource(i,t)}))})),ut(),ht(),Ve.fire(t),t}function nt(e){var t=[];if(m.enabled("charting_library_base")){var i=new S(e);t.push(i);var r=new w(e);t.push(r)}else if(!m.enabled("widget")){var n=new j(e,ot);t.push(n)}return t}function ot(e){e=Object.assign({},e,{chartWidgetCollection:X}),z(e)}function st(e){Le!==e&&(Le=e,ct(de))}function at(e){return ae.some((function(t){return t.chartWidget&&t.chartWidget.id()===e}))}function lt(e){for(var t=n();e(t);)t=n();return t}function ct(e){function t(){ae.every((function(e){return null!==e.chartWidget.model()}))&&(ut(),f.emit("layout_changed"))}function i(){t()}function r(e){var t=e.state();return t.chartId=lt(at),t.shouldBeSavedEvenIfHidden=!1,t}function n(e){rt(Object.assign({},Oe,fe.shift()||(oe.value()?{content:r(oe.value())}:null)||{},0===e||ge.value()?{}:{defSymbol:null})).modelCreated().subscribe(null,i,!0)}function s(e){e.hiddenInLayout.setValue(!0),$(e.container.value()).detach(),e.fullscreen.setValue(!1)}e in o||(e="s"),Ne();var a=de,l=o[e].count;f.emit("layout_about_to_be_changed",e),de=e,he=o[e];for(var c=l;c<ae.length;c++){it(h=ae[c])&&h.rdState.bridge().attach()}if($e&&pe.value()===O.ForceFullscreen)if(Le){var u=ae.indexOf(Le);(u<0||u>=l)&&(Le=ae[0])
}else Le=ae[0];else a!==e&&Le&&(Le=null);Le&&oe.setValue(Le.chartWidget);for(c=0;c<l||c<ae.length;c++){var h=ae[c];if(Le?Le===h:c<l&&(!h||!it(h))){if(h){if(De.append($(h.container.value())),h.hiddenInLayout.setValue(!1),me){var d=fe.shift();d&&(_e=!0,h.chartWidget.loadContent(d.content,ve),_e=!1)}}else n(c),h=ae[c];$(h.container.value()).toggleClass("multiple",l>1),h.fullscreen.setValue(Le===h)}else h?s(h):$e&&pe.value()===O.ForceFullscreen&&(n(c),s(ae[c]))}Je(),ut(),function(){for(var e=he.count,t=e,i=0;i<e;i++)ae[i]&&it(ae[i])&&t--;ue.setValue(t),ce.setValue(t>1)}(),t(),ae.forEach((function(e){e.chartWidget.onZoom().subscribe(this,(function(e){Be.fire(e)}))})),ve||("s"===de||Le?pe.setValue(O.ForceFullscreen):pe.setValue(O.Multichart)),ue.value()<1&&l>0&&ae[l-1].rdState.bridge().attach()}function ut(){var e=Math.min(he.count,ae.length)-1;if(e<0)oe.deleteValue();else{var t=le;t<0&&(t=0),t>e&&(t=e),oe.setValue(ae[t].chartWidget)}}function ht(){for(var e=ae.length;e--;){var t=e===le;$(ae[e].container.value()).toggleClass("active",t).toggleClass("inactive",!t)}}function dt(e,t){var i=ae.slice(0,he.count).filter((function(e){return!it(e)})).map((function(e,t,i){return{def:e,metrics:he.sizer({top:0,left:0,width:256,height:256},t,i.length,0)}})).sort((function(e,t){return e.metrics.top-t.metrics.top||e.metrics.left-t.metrics.left})).map((function(e){return e.def}));if(i.length<2)return null;var r=i.indexOf(e);return-1===r?null:i[r=(r+(t?i.length-1:1))%i.length]}function pt(e){var t=dt(ae[le],e);t&&(oe.setValue(t.chartWidget),Le&&ct(de))}function ft(e,t){var i=ae.findIndex((function(t){return t.chartWidget===e})),r=ae.findIndex((function(e){return e.chartWidget===t}));if(-1===i||-1===r)throw new Error("chart is not in the layout");var n=ae[i],o=ae[r];ae[i]=o,ae[r]=n,le===i?le=r:le===r&&(le=i),Je()}var _t=new t,mt=new g,vt=new g,gt=null;function yt(e){var t=e.mainSeries().properties();t.style.subscribe(null,bt),bt(t.style),e.model().onSelectedSourceChanged().subscribe(null,St),St(e.selection().sources())}function bt(e){mt.setValue(e.value())}function St(){var e=gt.model();vt.setValue(e.selection().sources())}function wt(e){for(var t=!1,i=0;i<ae.length;i++){var r=ae[i].chartWidget,n=r.model();n&&(n.mainSeries().properties().symbol.value()!==e&&(t||(ke.beginUndoMacro("Change Symbol"),t=!0),r.setSymbol(e)))}t&&ke.endUndoMacro()}oe.subscribe((function(e){if(e){for(var t,i=ae.length;i--;)if(ae[i].chartWidget===e){t=i;break}if(!isFinite(t))throw new Error("Cannot make detached ChartWidget active");if(le!==t){Le&&(it(ae[t])||(Le=ae[t])),le=t,ht();for(i=ae.length;i--;)ae[i].chartWidget!==e&&ae[i].chartWidget.setActive(!1);Mt(),e.setActive(!0)}!function(e){if(gt!==e){if(gt){gt.modelCreated().unsubscribe(null,yt);var t=gt.model();if(t)t.mainSeries().properties().style.unsubscribe(null,bt),t.model().onSelectedSourceChanged().unsubscribe(null,St),gt=null}if(e){gt=e;var i=e.model();i?yt(i):e.modelCreated().subscribe(null,yt)}}}(e)}}),{callWithLast:!0});var Pt=!1;function Ct(){var e={snapshotUrl:ee.snapshotUrl}
;(m.enabled("show_dialog_on_snapshot_ready")?_.getImageOfChart:_.getImageOfChartSilently)(X,e,(function(e){f.emit("onScreenshotReady",e)}))}function Tt(e){if(0!==ae.length){for(var t=ae.length;t--;)ae[t].chartWidget.setActive(!1);ae[le].chartWidget.setActive(e)}}se||(we.add({desc:"Switch active chart",hotkey:9,handler:function(){pt(!1)}}),we.add({desc:"Switch active chart",hotkey:p.Modifiers.Shift+9,handler:function(){pt(!0)}})),ee.takeScreenshotEnabled&&we.add({desc:"Screenshot",hotkey:p.Modifiers.Alt+83,handler:Ct}),ee.saveChartEnabled&&we.add({desc:"Save Chart Layout",hotkey:p.Modifiers.Mod+83,handler:function(){_t.fire()}});var xt=new Map,It=new Map;function Et(e){if(m.enabled("charting_library_base"))return e;if("s"===e||Oe.containsData||se||R(B.MULTIPLE_CHARTS)&&V(B.MULTIPLE_CHARTS).limit>=o[e].count)return e;var t="s",i=1,r=V(B.MULTIPLE_CHARTS).limit;for(var n in o)if(o.hasOwnProperty(n)){var s=o[n].count;s<=r&&s>i&&(t=n,i=s)}return D("multipleCharts"),N({feature:"multipleCharts"}),t}function Lt(e,t){if(me=!0,ve=Boolean(t),fe=[],e){e.charts||(e={layout:"s",charts:[e]});var i=new Set;e.charts.forEach((function(e){e.chartId&&i.add(e.chartId)})),e.charts.forEach((function(e){if(!e.chartId){var t=lt((function(e){return i.has(e)}));i.add(t),e.chartId=t}})),de=Et(e.layout||"s");for(var r=0;r<e.charts.length;r++){var n=e.charts[r];fe.push({content:n})}e.symbolLock&&ge.setValue(!0),e.intervalLock&&ye.setValue(!0),e.trackTimeLock&&be.setValue(!0)}xe.setValue(de),ct(de),"s"===de||ee.mobileForceChartMaximizeEnabled||pe.setValue(O.Multichart),h.init(),h.properties().magnet.subscribe(null,At),h.tool.subscribe(kt),h.tool.subscribe(Mt),me=!1,ve=!1}Object.assign(this,{createChartWidget:rt,getAll:function(){return ae.map((function(e){return e.chartWidget}))},destroy:function(){Tt(!1),null!==He&&(He(),He=null),Ne(),ae.forEach((function(e){void 0!==e.timingsMeter&&e.timingsMeter.destroy(),e.chartWidget.destroy()})),ee.resizerBridge.remove(),$(window).off("resize",Je),$(document).off("onUpdate",Je),ee.mobileForceChartMaximizeEnabled&&A.off("changeDevice",tt),h.properties().magnet.unsubscribe(null,At),null!==Ce&&Ce.cancel(),null!==Pe&&Pe.then((function(e){null!==e&&e.destroy()})),h.tool.unsubscribe(Mt),h.tool.unsubscribe(kt),Re.resolve(),De.remove(),xt.clear(),It.clear(),we.destroy()},layout:xe,activeChartWidget:oe,viewMode:pe,activeChartStyle:mt.readonly(),trySetChartStyleToActiveWidget:function(e){var t=oe.value();return!!t&&t.trySetChartStyle(e)},selectedSources:vt.readonly(),metaInfo:Me,state:function(e,t,i){for(var r=[],n=qe(),o=0;o<n;o++){var s=Xe(o,e,t,i);s&&r.push(s)}var a={name:X.metaInfo.name.value(),layout:de,charts:r};return ge.value()&&(a.symbolLock=1),ye.value()&&(a.intervalLock=1),be.value()&&(a.trackTimeLock=1),a},lineToolsAndGroupsDTOs:function(){for(var e=new Map,t=0;t<ae.length;t++){var i=ae[t].chartWidget;if(i){var r=i.id(),n=i.lineToolsAndGroupsDTO();e.set(r,n)}}return e},resetLineToolsInvalidated:function(){for(var e=0;e<ae.length;e++){var t=ae[e].chartWidget;t&&t.resetLineToolsInvalidated()}},
asyncState:function(){for(var e,t=[],i=qe(),r=0;r<i;r++)t.push((e=r)<ae.length?ae[e].chartWidget.asyncState():Promise.resolve({}));return Promise.all(t).then((function(e){for(var t={charts:[]},i=0;i<e.length;i++)t.charts.push(e[i]);return t}))},readOnly:function(){return se},onZoom:function(){return Be},lock:{symbol:ge,setSymbolLockWithUndo:function(e){if(e!==ge.value()){if(ke.beginUndoMacro("Symbol Lock"),e)for(var t=oe.value(),i=t.getSymbol(),r=0;r<ae.length;r++){var n=ae[r].chartWidget;n!==t&&(n.getSymbol()!==i&&n.setSymbol(i))}ke.setWatchedValue(ge,e,"Symbol Lock"),ke.endUndoMacro()}},interval:ye,setIntervalLockWithUndo:function(e){if(e!==ye.value()){if(ke.beginUndoMacro("Interval Lock"),e)for(var t=oe.value(),i=t.getResolution(),r=0;r<ae.length;r++){var n=ae[r].chartWidget;n!==t&&(n.getResolution()!==i&&n.setResolution(i))}ke.setWatchedValue(ye,e,"Resolution Lock"),ke.endUndoMacro()}},crosshair:Se,trackTime:be,setTrackTimeWithUndo:function(e){be.value()!==e&&ke.setWatchedValue(be,e,"Track Time")}},setSymbol:function(e){ge.value()?wt(e):oe.value().setSymbol(e)},setResolution:function(e){if(!_e&&!Pt)if(ye.value()){for(var t=!1,i=0;i<ae.length;i++){var r=ae[i].chartWidget;r.model().mainSeries().properties().interval.value()!==e&&(t||(ke.beginUndoMacro("Change Resolution"),t=!0),r.setResolution(e))}t&&ke.endUndoMacro()}else oe.value().setResolution(e)},setTimeFrame:function(e){if(!_e&&!Pt){if(Pt=!0,ye.value())for(var t=0;t<ae.length;t++){var i,r=ae[t].chartWidget;null!==(i=r.model().appliedTimeFrame().value())&&L(i,e)||r.loadRange(e)}else null!==(i=oe.value().model().appliedTimeFrame().value())&&L(i,e)||oe.value().loadRange(e);Pt=!1}},updateLayout:Je,setChartLayoutWithUndo:function(e){return e=Et(e),xe.value()!==e&&(ke.pushUndoCommand(new v(X,e)),!0)},images:function(e){var t=Math.max(1,window.devicePixelRatio||1);if(e&&e.onlyActiveChart||Le)return{layout:"s",hidpiRatio:t,theme:x().name,charts:[oe.value().images()]};for(var i=[],r=he.count,n=0;n<ae.length&&n<r;n++)i.push(ae[n].chartWidget.images());return{layout:de,hidpiRatio:t,theme:x().name,charts:i}},clientSnapshot:function(e){0},tags:function(){for(var e=[],t=0;t<ae.length&&t<he.count;t++)e=e.concat(ae[t].chartWidget.tags());return e=$.unique(e),e=$.map(e,(function(e){return e.toLowerCase().replace(/\W+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}))},syncCrosshair:function(e,t,i,r){if(i||Te)for(var n=he.count,o=0;o<ae.length&&o<n;o++){var s=ae[o].chartWidget;if(s!==t&&ae[o].rdState.bridge().visible.value()){var a=s.model();a&&a.model().setExternalPosition(e,r)}}},syncScroll:function(e,t){if(be.value()){var i=he.count;ke.beginUndoMacro("Sync Time");for(var r=0;r<ae.length&&r<i;r++){var n=ae[r].chartWidget.model();if(n){var o=n.model();if(o===t)continue;o.syncTimeWithModel(t,e)}}ke.endUndoMacro()}},setSymbolAll:wt,clearChartMetaInfo:function(){Me.id.setValue(null),Me.uid.setValue(void 0),Me.name.setValue(void 0)},takeScreenshot:Ct,loadContent:Lt,purgeUnusedWidgets:function(){for(var e=o[de].count;e<ae.length;e++)ae[e].chartWidget.destroy()
;ae.splice(o[de].count)},applyOverrides:function(e){for(var t=0;t<ae.length;t++)ae[t].chartWidget.applyOverrides(e)},applyStudiesOverrides:function(e){for(var t=0;t<ae.length;t++)ae[t].chartWidget.applyStudiesOverrides(e)},switchChart:pt,startFullscreen:function(){ee.resizerBridge.requestFullscreen()},exitFullscreen:function(){ee.resizerBridge.exitFullscreen()},destroyPromise:function(){return Re.promise()},chartWidgetCreated:function(){return Ve},saveKeysPressed:function(){return _t},getContainer:function(){return De},onWidget:Oe.onWidget,applyTheme:function(e,t,i,r,n,o,s){void 0===o&&(o=!0);var a=x().name,l=t?[{chartWidget:oe.value()}]:ae;s?(n&&new T(a,r,o).redo(),l.forEach((function(t){t.chartWidget._model.model().restoreTheme(e,i,s)}))):(ke.beginUndoMacro("Apply Chart Theme"),n&&ke.pushUndoCommand(new T(a,r,o)),l.forEach((function(t){t.chartWidget._model.model().restoreTheme(e,i)})),ke.endUndoMacro())},applyIndicatorsToAllCharts:function(e){K(ze(),e)},applyIndicatorsToAllChartsAvailable:function(){return!se&&Ye()>1},applyIndicatorToAllCharts:function(e,t,i,r){J(ze(),e,t,i,r)},setActive:Tt,inlineChartsCount:ue.readonly(),revertToInline:function(){if(!$e||pe.value()!==O.ForceFullscreen){st(null);for(var e=0;e<ae.length;e++)ae[e].rdState.bridge().attach()}},chartMarketStatuses:function(){return ae.map((function(e){var t=e.chartWidget.model(),i=t?t.mainSeries().marketStatusModel():null;return null!==i?Y(i.status()):"-"}))},chartSeriesStatuses:function(){return ae.map((function(e){var t=e.chartWidget.model(),i=t?t.mainSeries().status():null;return(null===i?"":E.SERIES_STATUS_TEXT[i])+" ("+i+")"}))},undoHistory:ke,toggleAddCompareDialog:function(){if(null!==Ue)return Ue.isOpened()?(Ue.hide(),Promise.resolve(null)):Promise.resolve(Ue.show());var e=this;return Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(26),i.e(119),i.e(120),i.e(222),i.e(280),i.e(24),i.e(111),i.e("add-compare-dialog")]).then(i.t.bind(null,"tkV1",7)).then((function(t){return null===Ue&&(Ue=new t.AddCompareDialog(e)),Ue.isOpened()?null:Ue.show()}))},applyPreferencesToAllCharts:function(e){var t=e.model().preferences();ae.forEach((function(i){i.chartWidget._model!==e&&i.chartWidget._model.applyPreferences(t)}))},getToasts:Ke,addCustomSource:function(e,t){r(!xt.has(e),"Cannot create the same custom source multiple times"),xt.set(e,t);for(var i=0;i<ae.length;++i){var n=ae[i].chartWidget.model();n&&n.model().addCustomSource(e,t)}},removeCustomSource:function(e){r(xt.has(e),"Cannot remove not created custom source"),xt.delete(e);for(var t=0;t<ae.length;++t){var i=ae[t].chartWidget.model();i&&i.model().removeCustomSource(e)}},addCustomWidgetToLegend:function(e,t){r(!It.has(e),"Cannot create the same custom widget in legend multiple times"),It.set(e,t);for(var i=0;i<ae.length;++i)ae[i].chartWidget.addCustomWidgetToLegend(e,t)},setViewMode:function(e){pe.setValue(e)},moveActiveChartWithUndo:function(e){var t=ae[le],i=dt(t,e);i&&ke.pushUndoCommand(new M(ft,t.chartWidget,i.chartWidget))},activeChartCanBeMoved:function(){
return!(se||ue.value()<2||it(ae[le]))},generalPropertiesDefinitions:function(){return oe.value().generalPropertiesDefinitions()},reconnectChartApi:function(e){q(e)}});var Ot=null;function At(e){e.value()&&null===Ot&&Ke().then((function(e){null!==e&&null===Ot&&(Ot=U(e)).then((function(){Ot=null}))}))}function Mt(){var e=oe.value();ae.forEach((function(t){t.chartWidget!==e&&t.chartWidget.updateCrossHairPositionIfNeeded()})),e&&e.updateCrossHairPositionIfNeeded()}function kt(){ae.forEach((function(e){e.chartWidget.onToolChanged()}))}Lt(ee.content,!0),xe.subscribe((function(e){ht(),ct(e)})),xe.hook=function(e){return e===this.value()?e:Et(e)},se&&(xe.writeLock=!0),$(window).on("resize",Je),$(document).on("onUpdate",Je),ee.mobileForceChartMaximizeEnabled&&(A.on("changeDevice",tt),tt()),m.enabled("datasource_copypaste")&&ee.globalEvents&&(we.add({desc:"Paste sources",hotkey:d.Modifiers.Mod+86,handler:function(){oe.value().onAppClipboardPaste()}}),we.add({desc:"Copy sources",hotkey:d.Modifiers.Mod+67,handler:function(){oe.value().onAppClipboardCopy()}}),we.add({desc:"Cut sources",hotkey:d.Modifiers.Mod+88,handler:function(){oe.value().onAppClipboardCut()}}),p.isMacKeyboard||(we.add({desc:"Paste sources",hotkey:d.Modifiers.Shift+45,handler:function(){oe.value().onAppClipboardPaste()}}),we.add({desc:"Copy sources",hotkey:d.Modifiers.Mod+45,handler:function(){oe.value().onAppClipboardCopy()}}),we.add({desc:"Cut sources",hotkey:d.Modifiers.Shift+46,handler:function(){oe.value().onAppClipboardCut()}})));var Dt=0;function Rt(){0===--Dt&&f.emitOnce("onChartReady")}if(ae.forEach((function(e){if(e){Dt++;var t=e.chartWidget;t.withModel(null,(function(){ee.metaInfo&&t.model().model().setChartSaveTime(1e3*ee.metaInfo.lastModified);var e=t.model().mainSeries();if(e.bars().size()>0||e.status()===E.STATUS_INVALID_SYMBOL||e.status()===E.STATUS_NO_BARS)Rt();else{var i=e.dataEvents(),r=function(){Rt(),i.barReceived().unsubscribe(null,r),i.completed().unsubscribe(null,r),i.error().unsubscribe(null,r)};i.barReceived().subscribe(null,r),i.completed().subscribe(null,r),i.error().subscribe(null,r)}}))}})),a()){var Vt=h.tool.setValue;h.tool.setValue=function(){X.selectedSources.value()&&X.activeChartWidget.value().model().lineBeingCreated()&&X.activeChartWidget.value().model().cancelCreatingLine(),Vt.apply(h.tool,arguments)}}Promise.all(ae.map((function(e){return b(e.chartWidget.modelCreated()).promise}))).then((function(){return Promise.all(ae.map((function(e){return b(e.chartWidget.model().mainSeries().dataEvents().symbolResolved()).promise})))})).then((function(){window.saver&&window.is_authenticated&&ee.widgetOptions.justCloned&&window.saver.saveChartSilently()})).catch(P.logError.bind(P))}}).call(this,i("aIyQ"))},"/YGI":function(e,t,i){"use strict";i.r(t),i.d(t,"StudyInserter",(function(){return c}));var r=i("mrSG"),n=i("0YCj"),o=i.n(n),s=i("XuOW"),a=i("txPx"),l=Object(a.getLogger)("Chart.Studies.StudyInserter"),c=function(){function e(e,t,i){this._parentSource=void 0,this._propsState=void 0,this._preferredPriceScale=void 0,
this._allowChangeCurrency=!1,this._paneSize=void 0,this._forceOverlay=!1,this._studyMetaInfoRepository=t,this._inserterImpl=i,this._studyDescriptor=e}return e.prototype.setParentSource=function(e){this._parentSource=e||void 0},e.prototype.setPaneSize=function(e){this._paneSize=e},e.prototype.setPreferredPriceScale=function(e){this._preferredPriceScale=e},e.prototype.setAllowChangeCurrency=function(e){this._allowChangeCurrency=e},e.prototype.setForceOverlay=function(e){this._forceOverlay=e},e.prototype.setPropertiesState=function(e){this._propsState=e},e.prototype.insert=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,n,o,a,c,u,h;return Object(r.__generator)(this,(function(d){switch(d.label){case 0:p=this._inserterImpl,i=void 0!==p.createStub&&void 0!==p.removeStub?this._inserterImpl.createStub():null,n=!0,d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this._studyMetaInfoRepository.findById(this._studyDescriptor)];case 2:return o=d.sent(),[3,5];case 3:return d.sent(),l.logWarn("Cannot get study "+JSON.stringify(this._studyDescriptor)),[2,Promise.reject(s.InsertionErrorCode.CannotGetMetainfo)];case 4:return null!==i&&(n=this._inserterImpl.removeStub(i)),[7];case 5:return n?void 0!==t&&t.cancelled?[2,Promise.reject(s.InsertionErrorCode.Cancelled)]:this._canApplyStudyToParent(o)?(a=Object(r.__assign)({},o.defaults.inputs),void 0===e?[3,7]:[4,e(a,o.inputs,o)]):[2,Promise.reject(s.InsertionErrorCode.StudyCannotBeChild)]:[2,Promise.reject(s.InsertionErrorCode.StubWasRemoved)];case 6:return u=d.sent(),[3,8];case 7:u={},d.label=8;case 8:return c=u,void 0!==t&&t.cancelled?[2,Promise.reject(s.InsertionErrorCode.Cancelled)]:null===(h=this._insertStudy(o,c))?[2,Promise.reject(s.InsertionErrorCode.Unknown)]:[2,h]}var p}))}))},e.prototype._insertStudy=function(e,t){return this._inserterImpl.createStudy(e,t,null,this._propsState,this._forceOverlay,this._parentSource,this._preferredPriceScale,this._allowChangeCurrency,this._paneSize)},e.prototype._canApplyStudyToParent=function(e){return void 0===this._parentSource||o.a.canBeChild(e)},e}()},"/b+7":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 13" width="22" height="13"><path fill="#37A6EF" fill-rule="nonzero" d="M19.354 4.932c.379.55.611 1.207.642 1.918A3.007 3.007 0 0 1 22 9.686a3.003 3.003 0 0 1-3 3.006H4a3.983 3.983 0 0 1-2.814-1.16l6.363-5.048a1.657 1.657 0 0 0 1.495.037l3.034 2.66a1.672 1.672 0 0 0 1.589 2.175 1.668 1.668 0 0 0 1.552-2.28l4.135-4.144zm-.942-.945L14.276 8.13a1.66 1.66 0 0 0-1.32.044l-3.034-2.66A1.672 1.672 0 0 0 8.333 3.34a1.668 1.668 0 0 0-1.611 2.097l-6.316 5.01A3.999 3.999 0 0 1 0 8.683a4.004 4.004 0 0 1 4.041-4.008A5.338 5.338 0 0 1 9.333 0a5.337 5.337 0 0 1 5.124 3.857 3.644 3.644 0 0 1 1.876-.517c.772 0 1.488.239 2.079.647z"/></svg>'},"/hKg":function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererCandles",(function(){return a}));var r=i("Eyy1"),n=i("VdBB"),o=i("gAom"),s=i("Zp/P"),a=function(){function e(e){this._bars=[],this._barSpacing=1,this._barWidth=1,this._borderVisible=!1,
this._barBorderWidth=1,this._wickVisible=!1,this._bodyVisible=!0,this._borderColor=void 0,this._wickColor=void 0,this._hittest=void 0,e&&this.setData(e)}return e.prototype.setData=function(e){this._bars=e.bars,this._barSpacing=e.barSpacing,this._borderVisible=e.borderVisible,this._bodyVisible=e.bodyVisible,this._wickVisible=e.wickVisible,this._borderColor=e.borderColor,this._wickColor=e.wickColor,this._hittest=e.hittest},e.prototype.hitTest=function(e){var t=this._bars,i=.5*this._barSpacing;if(0===t.length)return null;if(e.x<t[0].time-i)return null;if(e.x>t[t.length-1].time+i)return null;for(var r=null,o=0,a=t;o<a.length;o++){var l=a[o];if(e.x<=l.time+i){r=l;break}}if(null===r)return null;var c=Object(s.selectionTolerance)(this._barBorderWidth),u=Math.min(r.high,r.low),h=Math.max(r.high,r.low);return u-c<=e.y&&e.y<=h+c?this._hittest||new n.HitTestResult(n.HitTestResult.REGULAR):null},e.prototype.draw=function(e,t){if(0!==this._bars.length){var i=t.pixelRatio;if(this._barWidth=Object(s.optimalCandlestickWidth)(this._barSpacing,i),this._barWidth>=2)Math.floor(i)%2!=this._barWidth%2&&this._barWidth--;this._wickVisible&&this._drawWicks(e,i),this._borderVisible&&this._drawBorder(e,i),this._bodyVisible&&this._drawCandles(e,i)}},e.prototype._drawWicks=function(e,t){var i=this._bars,n="",o=Math.min(Math.floor(t),Math.floor(this._barSpacing*t));o=Math.max(Math.floor(t),Math.min(o,this._barWidth));for(var s=Math.floor(.5*o),a=null,l=0,c=i;l<c.length;l++){var u=c[l],h=u.wickColor?u.wickColor:Object(r.ensureDefined)(this._wickColor);h!==n&&(e.fillStyle=h,n=h);var d=Math.round(Math.min(u.open,u.close)*t),p=Math.round(Math.max(u.open,u.close)*t),f=Math.round(u.high*t),_=Math.round(u.low*t),m=Math.round(t*u.time)-s,v=m+o-1;null!==a&&(m=Math.max(a+1,m),m=Math.min(m,v));var g=v-m+1;e.fillRect(m,f,g,d-f),e.fillRect(m,p+1,g,_-p),a=v}},e.prototype._calculateBorderWidth=function(e){var t=Math.floor(1*e);this._barWidth<=2*t&&(t=Math.floor(.5*(this._barWidth-1)));var i=Math.max(Math.floor(e),t);return this._barWidth<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i},e.prototype._drawBorder=function(e,t){for(var i="",n=this._calculateBorderWidth(t),s=null,a=0,l=this._bars;a<l.length;a++){var c=l[a];if(c.borderColor!==i&&(e.fillStyle=c.borderColor?c.borderColor:Object(r.ensureDefined)(this._borderColor),i=c.borderColor),!this._bodyVisible||!c.hollow){var u=Math.round(c.time*t)-Math.floor(.5*this._barWidth),h=u+this._barWidth-1,d=Math.round(Math.min(c.open,c.close)*t),p=Math.round(Math.max(c.open,c.close)*t);if(null!==s&&(u=Math.max(s+1,u),u=Math.min(u,h)),this._barSpacing*t>2*n)Object(o.fillRectInnerBorder)(e,u,d,h-u+1,p-d+1,n);else{var f=h-u+1;e.fillRect(u,d,f,p-d+1)}s=h}}},e.prototype._drawCandles=function(e,t){for(var i="",r=this._calculateBorderWidth(t),n=0,s=this._bars;n<s.length;n++){var a=s[n];if(!(this._borderVisible&&this._barWidth<=2*r)||a.hollow){var l=Math.round(Math.min(a.open,a.close)*t),c=Math.round(Math.max(a.open,a.close)*t),u=Math.round(a.time*t)-Math.floor(.5*this._barWidth),h=u+this._barWidth-1;if(a.color!==i){var d=a.color
;e.fillStyle=d,i=d}if(a.hollow)e.fillStyle=a.color,Object(o.fillRectInnerBorder)(e,u,l,h-u+1,c-l+1,r);else{if(this._borderVisible&&(u+=r,l+=r,h-=r,c-=r),l>c)continue;e.fillRect(u,l,h-u+1,c-l+1)}}}},e}()},"/jjs":function(e,t,i){"use strict";i.r(t),i.d(t,"Magnet",(function(){return s}));var r=i("Eyy1"),n=i("4o++"),o=i("zL3Q"),s=function(){function e(){}return e.prototype.align=function(e,t,i){var s=e;if(!Object(o.a)().value())return s;var a=i.mainDataSource();if(null===a)return s;var l=a.model().mainSeries();if(a!==l)return s;var c=l.priceScale(),u=l.bars();if(c.isEmpty()||!u.contains(t))return s;var h=u.valueAt(t);if(null===h)return s;var d=[h[1],h[2],h[3],h[4]],p=Object(r.ensure)(l.firstValue()),f=d.map((function(e){return{y:c.priceToCoordinate(e,p),price:e}})),_=c.priceToCoordinate(e,p);f.sort((function(e,t){return Math.abs(e.y-_)-Math.abs(t.y-_)}));var m=f[0];return(Object(o.b)().value()===n.MagnetMode.StrongMagnet||Math.abs(m.y-_)<50)&&(s=m.price),s},e}()},"/kal":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" transform="translate(4 5)"><path fill="currentColor" d="M3 1h1v13.5H3z"/><circle stroke="currentColor" cx="3.5" cy="16.5" r="2"/><path fill="currentColor" d="M5.5 16H18v1H5.5z"/><path stroke="currentColor" d="M0 4L3.5.5 7 4m8 9l3.5 3.5L15 20"/></g></svg>'},"/tGj":function(e,t,i){"use strict";function r(e){return e.symbolSource()===e}i.r(t),i.d(t,"isSymbolSource",(function(){return r}))},"08i5":function(e,t,i){"use strict";var r,n;i.r(t),i.d(t,"AlertStatus",(function(){return r})),i.d(t,"Direction",(function(){return n})),function(e){e[e.Waiting=0]="Waiting",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(r||(r={})),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down"}(n||(n={}))},"0F0w":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("aIyQ"),o=i.n(n),s=i("Eyy1"),a=i("hY0g"),l=i.n(a),c=i("e3/o"),u=i("txPx"),h=Object(u.getLogger)("ChartApi.AbstractSession"),d=function(){function e(e,t,i){this._isConnected=new l.a(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId="",this._sessionIdChanged=new o.a,this._chartApi=e,this._sessionPrefix=t,this._shouldReconnectAfterCriticalError=i}return e.prototype.destroy=function(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")},e.prototype.isConnected=function(){return this._isConnected},e.prototype.sessionId=function(){return this._sessionId},e.prototype.onSessionIdChanged=function(){return this._sessionIdChanged},e.prototype.connect=function(){0===this._state&&(Object(s.assert)(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(this._sessionPrefix+"_"+Object(c.randomHash)()),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))},e.prototype.disconnect=function(){var e=this
;0!==this._state&&(Object(s.assert)(""!==this._sessionId,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile((function(){e._chartApi.connected()&&e._sendRemoveSession(),e._processDestroyingOnServer()})))},e.prototype.onMessage=function(e){switch(e.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":var t=String(e.params[0]),i=String(e.params[1]);return void this._onCriticalError(t,i)}this._onMessage(e)},e.prototype._getChartApi=function(){return this._chartApi},e.prototype._generateLogMessage=function(e){return"["+this._sessionId+"] "+e},e.prototype._onCriticalError=function(e,t){var i=this;this._logError("Critical error. Reason="+e+", info="+t+"."),this._forbidConnectWhile((function(){i._processDestroyingOnServer()})),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")},e.prototype._onChartApiConnected=function(){Object(s.assert)(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)},e.prototype._onChartApiDisconnected=function(){var e=this;this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile((function(){e._processDestroyingOnServer()})),this.connect()},e.prototype._setSessionId=function(e){var t=this._sessionId;this._logNormal("Changing sessionId: old="+t+", new="+e),this._sessionId=e,this._sessionIdChanged.fire(e,t)},e.prototype._logNormal=function(e){h.logNormal(this._generateLogMessage(e))},e.prototype._logError=function(e){h.logError(this._generateLogMessage(e))},e.prototype._processDestroyingOnServer=function(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId("")},e.prototype._forbidConnectWhile=function(e){this._isConnectForbidden=!0,e(),this._isConnectForbidden=!1},e}();i.d(t,"ChartSession",(function(){return f}));var p=Object(u.getLogger)("ChartSession"),f=function(e){function t(t,i){void 0===i&&(i=!1);var r=e.call(this,t,"cs",!1)||this;return r._sessionDisabled=!1,r._handler=null,r._criticalError=new o.a,r._disableStatistics=i,r}return Object(r.__extends)(t,e),t.prototype.destroy=function(){this._criticalError.destroy(),this._handler=null,e.prototype.destroy.call(this)},t.prototype.serverTimeOffset=function(){return this._getChartApi().serverTimeOffset()},t.prototype.switchTimezone=function(e){return this._getChartApi().switchTimezone(this.sessionId(),e)},t.prototype.defaultResolutions=function(){return this._getChartApi().defaultResolutions()},t.prototype.availableCurrencies=function(){return this._getChartApi().availableCurrencies()},t.prototype.resolveSymbol=function(e,t,i){return this._getChartApi().resolveSymbol(this.sessionId(),e,t,i)},t.prototype.requestFirstBarTime=function(e,t,i){
return this._getChartApi().requestFirstBarTime(this.sessionId(),e,t,i)},t.prototype.createSeries=function(e,t,i,r,n,o,s){return this._getChartApi().createSeries(this.sessionId(),e,t,i,r,n,o,s)},t.prototype.modifySeries=function(e,t,i,r,n,o){return this._getChartApi().modifySeries(this.sessionId(),e,t,i,r,n,o)},t.prototype.removeSeries=function(e,t){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),e,t)},t.prototype.requestMoreData=function(e,t,i){return this._getChartApi().requestMoreData(this.sessionId(),e,t,i)},t.prototype.requestMoreTickmarks=function(e,t,i){return this._getChartApi().requestMoreTickmarks(this.sessionId(),e,t,i)},t.prototype.requestMetadata=function(e,t){var i=this;window.localForageReady.done((function(){return i._getChartApi().requestMetadata(i.sessionId(),e,t)})).fail((function(e){p.logError("localForage is not initialized, cannot proceed. "+e)}))},t.prototype.isCanCreateStudy=function(e){return this._getChartApi().isCanCreateStudy(e)},t.prototype.createStudy=function(e,t,i,r,n,o,s){return this._getChartApi().createStudy(this.sessionId(),e,t,i,r,n,o,s)},t.prototype.rebindStudy=function(e,t,i,r,n,o,s){return this._getChartApi().rebindStudy(this.sessionId(),e,t,i,r,n,o,s)},t.prototype.modifyStudy=function(e,t,i,r){return this._getChartApi().modifyStudy(this.sessionId(),e,t,i,r)},t.prototype.removeStudy=function(e,t,i){return this._getChartApi().removeStudy(this.sessionId(),e,t,i)},t.prototype.createPointset=function(e,t,i,r,n,o){return this._getChartApi().createPointset(this.sessionId(),e,t,i,r,n,o)},t.prototype.modifyPointset=function(e,t,i,r){return this._getChartApi().modifyPointset(this.sessionId(),e,t,i,r)},t.prototype.removePointset=function(e){return this._getChartApi().removePointset(this.sessionId(),e)},t.prototype.setVisibleTimeRange=function(e,t,i,r,n){0},t.prototype.criticalError=function(){return this._criticalError},t.prototype.connect=function(t){void 0===t&&(t=null),null!==t&&(this._handler=t),e.prototype.connect.call(this)},t.prototype.setHandler=function(e){this._handler=e},t.prototype.connected=function(){return this.isConnected().value()&&!this._sessionDisabled},t.prototype.disable=function(){this._sessionDisabled=!0},t.prototype.chartApi=function(){return this._getChartApi()},t.prototype._sendCreateSession=function(){var e=this;Object.keys(this).forEach((function(t){/^(s|st|symbol_)\d+$/.test(t)&&delete e[t]})),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)},t.prototype._sendRemoveSession=function(){this._getChartApi().chartDeleteSession(this.sessionId())},t.prototype._onMessage=function(e){this._handler&&this._handler(e)},t.prototype._onCriticalError=function(t,i){this._criticalError.fire(t,i),e.prototype._onCriticalError.call(this,t,i)},t}(d)},"0Pxc":function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("GEp6").distanceToLine,o=i("hfHJ"),s=o.rotationMatrix,a=o.scalingMatrix,l=o.translationMatrix,c=o.transformPoint,u=i("Ss5c").LineDataSource,h=i("Ocx9").DefaultProperty,d=window.t("Arc");function p(e,t){
this._constructor="LineToolArc";var r=t||p.createProperties();u.call(this,e,r),this.version=p.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("dKqZ").ArcPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(p,u),p.prototype.startChanging=function(e,t){if(u.prototype.startChanging.call(this,e,t),0===e||1===e){var i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],s=this.pointToScreenPoint(this._points[2])[0];this._dist=n(i,o,s).distance;var a=o.subtract(i),l=new r(-a.y,a.x),c=i.add(o).scaled(.5);s.subtract(c).dotProduct(l)<0&&(this._dist=-this._dist)}},p.prototype.pointsCount=function(){return 3},p.prototype.translatedType=function(){return d},p.prototype.name=function(){return"Arc"},p.prototype.hasEditableCoordinates=function(){return!1},p.prototype.setPoint=function(e,t){var i=Object.assign({},t),o=this.pointToScreenPoint(this._points[0])[0],u=this.pointToScreenPoint(this._points[1])[0],h=this.pointToScreenPoint(this._points[2])[0];switch(e){case 0:o=this.pointToScreenPoint(i)[0];var d=u.subtract(o),p=o.add(u).scaled(.5);_=(_=new r(-d.y,d.x)).normalized(),h=p.add(_.scaled(this._dist)),h=this.screenPointToPoint(h),this._points[0]=i,this._points[2]=h;break;case 1:var f=n(o,u,h).distance;d=(u=this.pointToScreenPoint(i)[0]).subtract(o),p=o.add(u).scaled(.5);_=(_=new r(-d.y,d.x)).normalized(),h=p.add(_.scaled(this._dist)),h=this.screenPointToPoint(h),this._points[1]=i,this._points[2]=h;break;case 2:i=this.pointToScreenPoint(i)[0];var _;f=n(o,u,i).distance,d=u.subtract(o),p=o.add(u).scaled(.5);_=(_=new r(-d.y,d.x)).normalized(),h=p.add(_.scaled(f));var m=p.add(_.scaled(-f)),v=d.length(),g=d.x/v,y=d.y/v,b=Math.acos(g);y<0&&(b=-b);var S=l(-p.x,-p.y);i=c(S,i);var w=c(S,h);S=s(-b),i=c(S,i),w=c(S,w),S=a(1,v/(2*f)),i=c(S,i),w=c(S,w);var P=i.y*w.y>=0?new r(h.x,h.y):new r(m.x,m.y);P=this.screenPointToPoint(P),this._points[2]=P}this.normalizePoints()},p.version=2,p.prototype.migrateVersion=function(e,t,i){if(1===e&&2===this._points.length){var r=(2*this._points[0].price+3*this._points[1].price)/5;this._points.append({price:r,index:this._points[1].index})}if(1===e&&2===this._timePoint.length){var n={price:r=(2*this._timePoint[0].price+3*this._timePoint[1].price)/5,offset:this._timePoint[1].offset,time_t:this._timePoint[1].time_t};this._timePoint.append(n)}},p.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("Zd1D").GeneralFiguresDefinitionsViewModel}.bind(null,i)).catch(i.oe)},p.createProperties=function(e){var t=new h("linetoolarc",e);return p._configureProperties(t),t},p._configureProperties=function(e){u._configureProperties(e)},t.LineToolArc=p},"0UyP":function(e,t,i){"use strict";i.r(t),i.d(t,"getTracker",(function(){return n}));var r=i("mrSG");function n(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(r.__generator)(this,(function(r){switch(r.label){
case 0:return window.user&&!window.user.do_not_track?[3,1]:[2,null];case 1:return[4,i.e("snowplow-tracker").then(i.bind(null,"fZ4Q"))];case 2:return e=r.sent(),(t=e.getTrackerInstance())?[2,t]:[2,null]}}))}))}},"0YCj":function(e,t,i){"use strict";(function(e,t){i("Eyy1").assert;var r=i("txPx").getLogger("Chart.Study.MetaInfo"),n=i("9iCb").applyOverridesToStudyDefaults,o=null;function s(e){TradingView.merge(this,{palettes:{},inputs:[],plots:[],graphics:{},defaults:{}}),TradingView.merge(this,e);var t=e.fullId||e.id;TradingView.merge(this,s.parseIdString(t)),this.name=this.id}s.VERSION_STUDY_ARG_SOURCE=41,s.METAINFO_FORMAT_VERSION_SOS_V2=42,s.VERSION_PINE_PROTECT_TV_4164=43,s.CURRENT_METAINFO_FORMAT_VERSION=51,s.VERSION_NEW_STUDY_PRECISION_FORMAT=46,s.CHILD_STUDY_ALLOWED_PLOT_TYPES=["line"],s.canPlotBeSourceOfChildStudy=function(e){return s.CHILD_STUDY_ALLOWED_PLOT_TYPES.includes(e)},s.CHILD_STUDY_EXCLUDE_IDS=["CorrelationCoefficient@tv-basicstudies","Correlation - Log@tv-basicstudies-1"],s.CHILD_STUDY_PARENT_EXCLUDE_IDS=[],s.FilledArea={},s.FilledArea.TYPE_PLOTS="plot_plot",s.FilledArea.TYPE_HLINES="hline_hline",s.versionOf=function(e){var t="_metainfoVersion"in e&&isNumber(e._metainfoVersion)?e._metainfoVersion:0;return t<0&&r.logError("Metainfo format version cannot be negative: "+t),t},s.parseIdString=function(e){var t={};if(-1===e.indexOf("@"))t.shortId=e,t.packageId="tv-basicstudies",t.id=e+"@"+t.packageId,t.version=1;else{var i=e.split("@");t.shortId=i[0];var r=i[1].split("-");if(3===r.length)t.packageId=r.slice(0,2).join("-"),t.id=t.shortId+"@"+t.packageId,t.version=r[2];else if(1===r.length&&"decisionbar"===r[0])t.packageId="les-"+r[0],t.id=t.shortId+"@"+t.packageId,t.version=1;else{if(1!==r.length)throw new Error("unexpected study id:"+e);t.packageId="tv-"+r[0],t.id=t.shortId+"@"+t.packageId,t.version=1}}if(t.fullId=t.id+"-"+t.version,"tv-scripting"===t.packageId){var n=t.shortId;if(0===n.indexOf("Script$")||0===n.indexOf("StrategyScript$")){var o=n.indexOf("_");t.productId=o>=0?n.substring(0,o):t.packageId}else t.productId=t.packageId}else t.productId=t.packageId;return t},s.getPackageName=function(e){return(/^[^@]+@([^-]+-[^-]+)/.exec(e||"")||[0,"tv-basicstudies"])[1]},s.cutDollarHash=function(e){var t=e.indexOf("$"),i=e.indexOf("@");return-1===t?e:e.substr(0,t)+(i>=0?e.substr(i):"")},s.hasUserIdSuffix=function(e){return/^USER;[\d\w]+;\d+$/.test(e)},s.isStandardPine=function(e){return/^(Strategy)?Script\$STD;.*@tv-scripting$/.test(e)},s.getSourceIdByInputs=function(e,t){if(!Array.isArray(e)||!t)return null;for(var i=0;i<e.length;++i){var r=e[i];if(s.isSourceInput(r)&&"string"==typeof t[r.id]){var n=t[r.id];return~n.indexOf("$")&&(n=n.split("$")[0]),n}}return null},s.getSourceInputIds=function(e){for(var t=[],i=e.inputs,r=0;r<i.length;++r){var n=i[r];s.isSourceInput(n)&&t.push(n.id)}return t},s.setChildStudyMetaInfoPropertiesSourceId=function(t,i,r){for(var n=0;n<t.inputs.length;++n){var o=t.inputs[n];if(s.isSourceInput(o)&&(r instanceof e&&r.inputs&&r.inputs[o.id])){var a=r.inputs[o.id].value()
;if(a.indexOf("$")>0){var l=a.replace(/^[^\$]+/,i);r.inputs[o.id].setValue(l)}}}},s.patchChildStudyMetaInfoState=function(e){e.state&&function e(t){if("object"==typeof t)for(var i in t)"string"==typeof t[i]&&/^[^\$]+\$\d+$/.test(t[i])?t[i]=t[i].replace(/^[^\$]+/,"{pid}"):e(t[i])}(e.state.inputs),e.state.isChildStudy=!0},s.prototype.parseValue=function(e,t){return"bool"===e?TradingView.parseBool(t):t},s.prototype.defaultInputs=function(){for(var e=[],t=0;t<this.inputs.length;t++)e.push(this.inputs[t].defval);return e},s.prototype.state=function(e){var t={};for(var i in this)this.hasOwnProperty(i)&&(t[i]=this[i],!0!==e&&"id"===i&&(t[i]+="-"+this.version));return t},s.prototype.symbolInputId=function(){var e=this.inputs.filter((function(e){return"symbol"===e.type}));return e.length>0?e[0].id:null},s.prototype.createDefaults=function(){if(this.defaults){var e=TradingView.clone(this.defaults);e.precision="default";var t=s.getStudyPropertyRootName(this);defaults.create(t,e)}},s.prototype.removeDefaults=function(){defaults.remove(s.getStudyPropertyRootName(this))},s.findStudyMetaInfoByDescription=function(e,t){if(e){for(var i=0;i<e.length;++i)if(e[i].description.toLowerCase()===t.toLowerCase())return e[i];throw new Error("unexpected study id:"+t)}throw new Error("There is no studies metainfo")},s.isParentSourceId=function(e){return"string"==typeof e&&/^[^\$]+\$\d+$/.test(e)},s.isSourceInput=function(e){return e.id&&(("source"===e.id||"src"===e.id)&&("text"===e.type||"source"===e.type)||"source"===e.type)},s.getChildSourceInputTitles=function(e,t,i){var r={};if(t.plots&&t.plots.length&&e.options&&e.options.length)for(var n,o,a,l=0;l<e.options.length;++l)o=(n=e.options[l])&&+n.split("$")[1],(a=isFinite(o)&&t.plots[o])&&~s.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(a.type)&&(r[n]=t.styles&&t.styles[a.id]&&t.styles[a.id].title||a.id,i&&(r[n]=i+": "+r[n]));return r};var a=new Map([["AnchoredVWAP@tv-basicstudies","linetoolanchoredvwap"],["RegressionTrend@tv-basicstudies","linetoolregressiontrend"]]);s.getStudyPropertyRootName=function(e){var t=a.get(e.id);if(void 0!==t)return t;var i="study_"+e.id;return e.pine&&e.pine.version&&(i+="_"+e.pine.version.replace(".","_")),i},s.getStudyPropertyRootNameById=function(e){var t=a.get(e);return void 0!==t?t:"study_"+e},s.overrideDefaults=function(e){null!==o&&0!==e.length&&n(o,e,(function(e){return TradingView.defaultProperties[s.getStudyPropertyRootName(e)]||null}))},s.setDefaultsOverrides=function(e){o=e},s.isScriptStrategy=function(e){if(e.extra&&e.extra.kind)return e.extra.kind===TVScript.Kinds.STRATEGY;if(!0===e.isTVScriptStrategy)return!0;var t=e.TVScriptSourceCode||e.scriptSource;return!!t&&TVScript.isStrategy(t)},s.getOrderedInputIds=function(e){for(var t=[],i=e.inputs,r=0;r<i.length;++r){var n=i[r];t.push(n.id)}return t},s.canBeChild=function(e){if(e&&"string"==typeof e)return!0;if(!e||e.extra&&!s.isAllowedSourceInputsCount(e.extra.sourceInputsCount)||!0===e.canNotBeChild||!1===e.canBeChild||~s.CHILD_STUDY_EXCLUDE_IDS.indexOf(e.id))return!1
;for(var t=e.inputs,i=0,r=0;r<t.length;++r)s.isSourceInput(t[r])&&++i;return s.isAllowedSourceInputsCount(i)},s.isAllowedSourceInputsCount=function(e){return 1===e},s.canHaveChildren=function(e){if(e){if(e.isTVScriptStrategy||e.TVScriptSourceCode&&TVScript.isStrategy(e.TVScriptSourceCode))return!1;if(e.id&&!~s.CHILD_STUDY_PARENT_EXCLUDE_IDS.indexOf(e.id)&&Array.isArray(e.plots))for(var t=0;t<e.plots.length;++t)if(~s.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(e.plots[t].type))return!0}return!1},TradingView.StudyMetaInfo=s,t&&t.exports&&(t.exports=s)}).call(this,i("tc+8"),i("YuTi")(e))},"0dm4":function(e,t,i){"use strict";i.r(t),i.d(t,"canPlaceAlertOnResolution",(function(){return s}));var r=i("LxhU"),n=i("NP3r"),o=i("bKsZ");function s(e){return!r.Interval.isSeconds(e)||Object(n.enabled)(o.ProductFeatures.ALERTS_ON_SECONDS)}},"0gbU":function(e,t,i){"use strict";(function(e){var r=i("GVHu").Study,n=i("2Fqk").CompareLegendView,o=i("TrvT").CompareDataWindowView,s=i("Kxc7"),a=i("8aff").CompareStudyPriceAxisView,l=i("8xSi").CompareStatusView,c=i("n5al").createSeriesFormatter,u=i("n5al").seriesCurrency,h=!s.enabled("hide_study_compare_legend_item"),d=s.enabled("study_overlay_compare_legend_option"),p=s.enabled("force_exchange_as_title"),f=s.enabled("uppercase_instrument_names");function _(t,i,n,o){i.hasChild("currencyId")||i.addChild("currencyId",new e(null)),r.call(this,t,i,n,o);var s=this;this._properties.minTick.listeners().subscribe(null,(function(){s._recreatePriceFormattingDependencies()})),this.properties().minTick.listeners().subscribe(null,(function(){s._model.fullUpdate()})),this.properties().currencyId.subscribe(this,this._onCurrencyChanged),this._properties.merge({skipHistogramBaseOnAutoScale:!0})}inherit(_,r),_.prototype.createPriceAxisView=function(e){return new a(this,{plotIndex:"compare"})},_.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},_.prototype.createViews=function(){this._legendView||(this._legendView=new n(this,this._model)),this._dataWindowView||(this._dataWindowView=new o(this,this._model)),this._statusView||(this._statusView=new l(this,this._model.properties().scalesProperties.textColor)),r.prototype.createViews.call(this)},_.prototype._tryCreateFormatter=function(){var e=this.symbolInfo();return c(e,this.properties().minTick.value())},_.prototype._onSymbolResolved=function(e){r.prototype._onSymbolResolved.call(this,e),this._recreatePriceFormattingDependencies();var t=this.symbolInfo();t&&this.setCurrency(u(t))},_.prototype.symbol=function(){var e,t=this.properties().inputs.symbol.value(),i=this.symbolInfo(),r=i&&i.exchange&&0!==i.exchange.length;return e=p&&r?i.exchange:i?i.name:t,f?e.toUpperCase():e},_.prototype.symbolResolved=function(){return this.symbolsResolved()},_.prototype.currency=function(){return this._properties.currencyId.value()||null},_.prototype.setCurrency=function(e){this._properties.currencyId.setValue(e)},_.prototype.symbolSource=function(){return this},_.prototype.title=function(e,t,i,r){
var n=this._titleInParts(e,t,i,r).join(", ");return f?n.toUpperCase():n},_.prototype.titleInParts=function(e,t,i,r){var n=this._titleInParts(e,t,i,r).join(", ");return[f?n.toUpperCase():n]},_.prototype._titleInParts=function(e,t,i,r){var n=this.properties().inputs.symbol.value(),o=this.symbolInfo(),s=o&&o.exchange&&0!==o.exchange.length,a=[];if(p&&s)a.push(o.exchange);else if(o){if(d){var l=this._model.mainSeries().properties().statusViewStyle.symbolTextSource.value();a.push("description"===l?o.description:o.name)}else a.push(o.name);s&&!r&&a.push([o.exchange])}else a.push(n);return a},_.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var e=this._properties.inputs.symbol.value();return e&&this._resolvedSymbols[this._resolvedSymbolKey(e)]||null},_.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},_.prototype.tags=function(){var e=this.symbol();return e?[e]:[]},_.prototype.statusView=function(){return h?r.prototype.statusView.call(this):null},_.prototype.guiPlotName=function(e){return this.properties().inputs.symbol.value()},_.prototype.canOverrideMinTick=function(){return!0},_.prototype._onCurrencyChanged=function(){this._currencyChanged.fire()},_.prototype._getSymbolObject=function(e){return r.prototype._getSymbolObject.call(this,e)},_.prototype._resolvedSymbolKey=function(e){var t=this.currency();return e+(null===t?"":"_#_"+t)},t.study_Compare=_}).call(this,i("tc+8"))},"0h28":function(e,t,i){"use strict";(function(t){var r,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i("TxTq"),s=(r=o)&&r.__esModule?r:{default:r},a=i("xlbu");var l=(0,i("txPx").getLogger)("ReutersCalendar"),c=function(){function e(i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))throw new Error("ChartEvents is a constructor");this.changed=new t,this.reset(i),this.pendingDfd=null,this._boundPushstreamHandler=this._pushstreamHandler.bind(this),s.default.on("chartevents-reuters",this._boundPushstreamHandler)}return n(e,[{key:"items",value:function(){return this._items}},{key:"reset",value:function(e){this.pendingDfd&&this.pendingDfd.reject(),this._items=[],this.itemsById={},this.minObtainedTimestamp=1/0,this.noResults=!1,e&&null!=e.from?this.from=Number(e.from):this.from=Date.now()-864e5,this._historyLimit=e&&e.historyLimit,this._maxItems=1/0,e&&e.maxItems>0&&(this._maxItems=+e.maxItems),e&&null!=e.to?this.to=e.to:this.to=this.from+this.defaultSelectionTimeAmount,this.from=this.cacheFriendlyTimestamp(this.from),this.to=this.cacheFriendlyTimestamp(this.to),this.currencyFilter=e&&e.currencyFilter?e.currencyFilter:[],e&&null!=e.minImportance&&isFinite(+e.minImportance)?this.minImportance=Math.max(-1,Math.min(1,Math.floor(e.minImportance))):this.minImportance=-1}},{key:"cacheFriendlyTimestamp",value:function(e){
return e-e%36e5}},{key:"formatTimestampForRequest",value:function(e){return new Date(e).toISOString()}},{key:"requestMore",value:function(e){var t=this;if(this.pendingDfd)return this.pendingDfd.promise();if(isFinite(this.minObtainedTimestamp)&&null!=this._historyLimit&&Number(new Date(this.from))<this._historyLimit&&(this.noResults=!0),this._items.length>=this._maxItems&&(this.noResults=!0),this.noResults)return $.Deferred().resolve({added:[],changed:[],noResults:!0}).promise();var i=$.Deferred();this.pendingDfd=i,i.always((function(){t.pendingDfd=null}));var r={};-1!==this.minImportance&&(r.minImportance=this.minImportance),isFinite(this.minObtainedTimestamp)&&(this.to=this.from,this.from=this.from-this.defaultSelectionTimeAmount),e&&e.from&&e.from<this.minObtainedTimestamp&&(this.from=this.cacheFriendlyTimestamp(e.from)),r.from=this.formatTimestampForRequest(this.from),r.to=this.formatTimestampForRequest(this.to),this.currencyFilter.length&&(r.currencies=this.currencyFilter.toString());var n=Object.keys(r).map((function(e){return e+"="+r[e]})).join("&"),o=this.eventsUrl+(n?"?"+n:""),s=Date.now(),c=$.ajax({method:"GET",url:o,dataType:"json"}).done((function(e,r,n){var o=Date.now()-s;if(a.telemetry.sendReport("calendars","chartevents_http_status",{value:n.status,additional:{source:"ChartEvents"}}),a.telemetry.sendReport("calendars","chartevents_response_time_frame",{value:o,additional:{source:"ChartEvents"}}),i===t.pendingDfd){if(!e||!e.status||"error"===e.status){a.telemetry.sendReport("calendars","chartevents_error");var c=e&&e.errmsg||"invalid response";return l.logError(c),void i.reject(new Error(c))}a.telemetry.sendReport("calendars","chartevents_ok"),t.minObtainedTimestamp=t.from,"no_data"===e.status&&(t.noResults=!0,t.minObtainedTimestamp=-1/0);var u=t._mergeItems(e.result||[]);i.resolve(u),t.changed.fire(u)}})).fail((function(e,r){if(i===t.pendingDfd&&"abort"!==r){l.logWarn("ChartEvents error on request {0}, status: {1}, status text: {2}".format(o,e.status,e.statusText));var n=Date.now()-s;a.telemetry.sendReport("calendars","chartevents_error"),a.telemetry.sendReport("calendars","chartevents_http_status",{value:e.status||400,additional:{source:"ChartEvents"}}),a.telemetry.sendReport("calendars","chartevents_response_time_frame",{value:n,additional:{source:"ChartEvents"}})}i.reject(e)}));return i.fail((function(){c.abort()})),i.promise()}},{key:"destroy",value:function(){s.default.off("chartevents-reuters",this._boundPushstreamHandler),this._items=[],this.reset()}},{key:"_mergeItems",value:function(e){for(var t={added:[],changed:[],noResults:this.noResults},i=[],r=e.length;r--;){var n=e[r];-1!==this.minImportance&&this.minImportance>n.importance||(n.timestamp=Date.parse(n.date),null!=this._historyLimit&&n.timestamp<this._historyLimit||i.push(n))}for(var o=0;o<i.length;o++){var s=i[o];if(this.itemsById[s.id]){var a=!1,l=this.itemsById[s.id];for(var c in s)l[c]!==s[c]&&(l[c]=s[c],a=!0);a&&t.changed.push(l)}else this._items.length===this._maxItems&&(delete this.itemsById[this._items[0].id],this._items.shift(),
t.added.shift()),this.itemsById[s.id]=s,this._items.push(s),t.added.push(s)}return t}},{key:"_pushstreamHandler",value:function(e){var t=this._mergeItems([].concat(e));(t.changed.length||t.added.length)&&this.changed.fire(t)}},{key:"defaultSelectionTimeAmount",get:function(){return 6048e5}},{key:"eventsUrl",get:function(){return window.CHARTEVENTS_URL+"events"||!1}}]),e}();e.exports=c}).call(this,i("aIyQ"))},"0wn8":function(e,t,i){},"1AAW":function(e,t,i){"use strict";i.r(t),i.d(t,"combine",(function(){return o}));var r=i("hY0g"),n=i.n(r);function o(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var r=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.apply(void 0,t.map((function(e){return e.value()})))},o=new n.a(r.apply(void 0,t)),s=function(){return o.setValue(r.apply(void 0,t))},a=t.map((function(e){return e.spawn()})),l=0,c=a;l<c.length;l++){var u=c[l];u.subscribe(s)}var h=function(){return a.forEach((function(e){return e.destroy()}))};return o.readonly().spawn(h)}},"1IXQ":function(e,t,i){"use strict";i("jJ9X");var r=i("aO4+").Point,n=i("/3z9"),o=i("qFKp").CheckMobile,s=i("7KDR"),a=s.Action,l=s.Separator,c=i("5VQP").ContextMenuManager,u=i("H0vP").InvalidationLevel,h=i("ikwP"),d=h.getContext2D,p=h.hardResizeCanvas,f=h.clearRect,_=i("gAom").clearRectWithGradient,m=h.fillRect,v=i("S8xo").MouseEventHandler,g=i("JWMC").trackEvent,y=i("YmeR").ActionBinder,b=i("txPx").getLogger("Chart.PriceAxisWidget"),S=i("T6Of").LimitedPrecisionNumericFormatter,w=i("CW80").isLineTool,P=i("HZKX").createLinesAction,C=i("4vW/").ColorType,T=i("+GxX").isFeatureEnabled,x=i("EsvI").themes,I=i("3/8U").axesHighlightColor,E=i("xzdg").PriceAxisWidgetBase,L=i("Kxc7"),O=window.t("Merge All Scales Into One");function A(e,t,i,r,n,o,s,a){E.call(this,e,t,i,o,r),this._isLeft=A.isLeft(n),this._axisInfo=s,this._backgroundBasedTheme=a,this._offset=0,this.restoreDefaultCursor(),this.update(),this._mouseEventHandler=new v(this._topCanvasBinding.canvas,this,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0}),this.contextMenu=null,this.actions=null,this._highlighted=!1}function M(e){var t=new S(e);return function(e,i){return isNumber(i)&&!e.isLog()?t.format(i):""}}inherit(A,E),A.LHS="left",A.RHS="right",A.isLeft=function(e){return e===A.LHS||(e===A.RHS||b.logDebug("PriceAxisWidget.isLeft: wrong side"),!1)},A.prototype.destroy=function(){null!==this.actions&&this.actions.reset&&this.actions.reset.destroy(),this._mouseEventHandler.destroy(),this._tickmarksCache.destroy(),this._tickmarksCache=null,E.prototype.destroy.call(this)},A.prototype.dataSourceAtPoint=function(e,t){var i=this._grouppedSources(),n=i.sources.concat(Array.from(i.topLevelSources)).concat(this._pane.state().customSources()),o=null,s=null;if(!this._priceScale)return null;function a(e,t){var i=s?s.result():0;e.result()>i&&(s=e,o=t)}for(var l=new r(e,t),c=this._pane.state(),u=n.length-1;u>=0;--u){var h=n[u],d=h.priceAxisViews(c,this._priceScale);if(d&&0!==d.length)for(var p=d.length-1;p>=0;--p){var f=d[p].renderer()
;if(null!==f&&void 0!==f.hitTest){var _=f.hitTest(l,this._size.w,this._isLeft?"left":"right");null!==_&&a(_,h)}}}return o},A.prototype._setCursorClassName=function(e){var t="";e&&(t="price-axis--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this._cell.classList.remove(this._currentCursorClassName),t&&this._cell.classList.add(t),this._currentCursorClassName=t)},A.prototype._mouseClickOrTapEvent=function(e){var t=this.dataSourceAtPoint(e.localX,e.localY);t&&this._pane.chart().model().selectionMacro((function(e){e.selection().isSelected(t)||(e.clearSelection(),e.addSourceToSelection(t))}))},A.prototype.mouseClickEvent=function(e){this._mouseClickOrTapEvent(e)},A.prototype.tapEvent=function(e){this._mouseClickOrTapEvent(e)},A.prototype._mouseOrTouchMoveEvent=function(e){this._priceScale&&(this.dataSourceAtPoint(e.localX,e.localY)?this._setCursorClassName("pointer"):this._setResizeCursor())},A.prototype.mouseMoveEvent=function(e){this._mouseOrTouchMoveEvent(e)},A.prototype._zoomAvailable=function(){return!this.priceScale().isEmpty()&&this._pane.chart().model().model().zoomEnabled()&&this._options.pressedMouseMoveScale},A.prototype._mouseDownOrTouchStartEvent=function(e){if(this._zoomAvailable()){var t=this._pane.chart().model(),i=this._pane.state();this._mousedown=!0,t.startScalePrice(i,this.priceScale(),e.localY)}},A.prototype.mouseDownEvent=function(e){this._mouseDownOrTouchStartEvent(e)},A.prototype.touchStartEvent=function(e){this._mouseOrTouchMoveEvent(e),this._mouseEnterOrTouchStartEvent(e),this._mouseDownOrTouchStartEvent(e)},A.prototype._pressedMouseOrTouchMoveEvent=function(e){if(this._zoomAvailable()){var t=this._pane.chart().model(),i=this._pane.state(),r=this.priceScale();t.scalePriceTo(i,r,e.localY)}},A.prototype.pressedMouseMoveEvent=function(e){this._pressedMouseOrTouchMoveEvent(e)},A.prototype.touchMoveEvent=function(e){this._pressedMouseOrTouchMoveEvent(e)},A.prototype.mouseDownOutsideEvent=function(e){if(this._zoomAvailable()&&this._pane.hasState()){var t=this._pane.chart().model(),i=this._pane.state(),r=this.priceScale();this._mousedown&&(this._mousedown=!1,t.endScalePrice(i,r),this.restoreDefaultCursor())}},A.prototype._mouseUpOrTouchEndEvent=function(e){if(this._zoomAvailable()){var t=this._pane.chart().model(),i=this._pane.state(),r=this.priceScale();this._mousedown=!1,t.endScalePrice(i,r),this.restoreDefaultCursor()}},A.prototype.mouseUpEvent=function(e){this._mouseUpOrTouchEndEvent(e)},A.prototype.touchEndEvent=function(e){this._mouseLeaveOrTouchEndEvent(e),this._mouseUpOrTouchEndEvent(e)},A.prototype._mouseEnterOrTouchStartEvent=function(e){this._setResizeCursor()},A.prototype.mouseEnterEvent=function(e){this._mouseEnterOrTouchStartEvent(e)},A.prototype._mouseLeaveOrTouchEndEvent=function(e){this._setCursorClassName("")},A.prototype.mouseLeaveEvent=function(e){this._mouseLeaveOrTouchEndEvent(e)},A.prototype._setResizeCursor=function(){
this._priceScale.isPercentage()||this._priceScale.isIndexedTo100()?this._setCursorClassName(""):this._pane.chart().model().model().zoomEnabled()&&this._setCursorClassName("ns-resize")},A.prototype._initActions=function(e){if(this._pane.hasState()&&null===this.actions){this.actions={};var t=this,r=this._pane.chart().model();this.actions.reset=new a({label:window.t("Reset Price Scale"),icon:i("LdoW"),shortcut:"Alt+R",shortcutHint:n.humanReadableHash(n.Modifiers.Alt+82),statName:"ResetScale",onExecute:A.prototype.reset.bind(this)}),this.actions.setAutoScale=new a({label:window.t("Auto (Fits Data To Screen)"),checkable:!0,checked:!0,statName:"ToggleAutoScale",onExecute:function(){r.togglePriceScaleAutoScaleMode(t.priceScale()),t._updateScalesActions()}}),this.actions.setPercentage=new a({label:window.t("Percent",{context:"scale_menu"}),checkable:!0,checked:this.priceScale().isPercentage(),statName:"TogglePercantage",onExecute:function(){r.togglePriceScalePercentageScaleMode(t.priceScale()),t._updateScalesActions()}}),this.actions.setIndexedTo100=new a({label:window.t("Indexed to 100",{context:"scale_menu"}),checkable:!0,checked:this.priceScale().isIndexedTo100(),statName:"ToggleIndexedTo100",onExecute:function(){r.togglePriceScaleIndexedTo100ScaleMode(t.priceScale()),t._updateScalesActions()}}),this.actions.setLog=new a({label:window.t("Logarithmic",{context:"scale_menu"}),checkable:!0,checked:this.priceScale().isLog(),statName:"ToggleLogScale",onExecute:function(){r.togglePriceScaleLogScaleMode(t.priceScale()),t._updateScalesActions()}}),this.actions.setRegular=new a({label:window.t("Regular",{context:"scale_menu"}),checkable:!0,checked:this.priceScale().isRegular(),statName:"ToggleRegularScale",onExecute:function(){r.setPriceScaleRegularScaleMode(t.priceScale()),t._updateScalesActions()}}),this.actions.alignLabels=new a({label:window.t("No Overlapping Labels",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"TogglePreciseLabels"}),this.actions.alignLabels.binding=new y(this.actions.alignLabels,this.priceScale().properties().alignLabels,this._pane.chart().model(),"No Overlapping Labels"),this.actions.invertScale=new a({label:window.t("Invert Scale",{context:"scale_menu"}),checkable:!0,checked:this.priceScale().isInverted(),statName:"Invert Scale",onExecute:function(){r.invertPriceScale(t.priceScale()),t._updateScalesActions()}}),this._updateScalesActions()}},A.prototype._logAction=function(){return this._isMainSeriesAxis()?this._pane.chart().actions().logSeriesScale:this.actions.setLog},A.prototype._percentageAction=function(){return this._isMainSeriesAxis()?this._pane.chart().actions().percentSeriesScale:this.actions.setPercentage},A.prototype._indexedTo100Action=function(){return this._isMainSeriesAxis()?this._pane.chart().actions().indexedTo100SeriesScale:this.actions.setIndexedTo100},A.prototype._autoScaleAction=function(){return this._isMainSeriesAxis()?this._pane.chart().actions().autoSeriesScale:this.actions.setAutoScale},A.prototype._regularScaleAction=function(){
return this._isMainSeriesAxis()?this._pane.chart().actions().regularSeriesScale:this.actions.setRegular},A.prototype._lockScaleAction=function(){var e=this._pane.chart().actions().lockSeriesScale,t=k(this.priceScale(),this._pane.chart().model().model().mainSeriesScaleRatio());return e.update({hint:t}),e},A.prototype._invertAction=function(){return this._isMainSeriesAxis()?this._pane.chart().actions().invertSeriesScale:this.actions.invertScale},A.prototype._isMainSeriesAxis=function(){return this.priceScale().hasMainSeries()},A.prototype._updateMainSeriesScalesActions=function(){this._isMainSeriesAxis()&&null!==this.actions&&this._updateScalesActions()},A.prototype._updateScalesActions=function(){var e=this.priceScale(),t=this._isMainSeriesAxis(),i=e.mainSource().properties(),r=t&&e.isLockScale(),n=t&&i.style.value()===TradingView.Series.STYLE_PNF;this.actions.setRegular.update({checked:e.isRegular(),disabled:r||n}),this.actions.setPercentage.update({checked:e.isPercentage(),disabled:r||n}),this.actions.setIndexedTo100.update({checked:e.isIndexedTo100(),disabled:r||n}),this.actions.setLog.update({checked:e.isLog(),disabled:r||n}),this.actions.setAutoScale.update({checked:e.isAutoScale(),disabled:e.properties().autoScaleDisabled.value()})},A.prototype._mouseDoubleClickOrDoubleTapEvent=function(e){var t=this.dataSourceAtPoint(e.localX,e.localY);t?this._pane.processDoubleClickOnSource(t):(this.reset(),g("GUI","Double click price scale"))},A.prototype.mouseDoubleClickEvent=function(e){this._mouseDoubleClickOrDoubleTapEvent(e)},A.prototype.doubleTapEvent=function(e){this._mouseDoubleClickOrDoubleTapEvent(e)},A.prototype._contextMenuOrTouchContextMenuEvent=function(e){if(this._options.contextMenuEnabled){var t=this.dataSourceAtPoint(e.localX,e.localY);if(null!==t&&this._options.contextMenu.source)return void this._pane.chart().model().selectionMacro(function(i){i.selection().isSelected(t)||(i.clearSelection(),i.addSourceToSelection(t)),this._pane.showContextMenuForSelection(e)}.bind(this));this._options.contextMenu.general&&this._createContextMenu().then((function(t){t.show(e)}))}},A.prototype.contextMenuEvent=function(e){this._contextMenuOrTouchContextMenuEvent(e)},A.prototype.touchContextMenuEvent=function(e){this._contextMenuOrTouchContextMenuEvent(e)},A.prototype._createContextMenu=function(){return c.createMenu(this.getContextMenuActions(),{statName:"PriceScaleContextMenu"})},A.prototype._createMergeScalesAction=function(){var e=this._pane.chart().actions(),t=this._pane.chart().model().model().priceScaleSlotsCount();if(t.left+t.right===1)return 0===t.left?e.moveScaleToLeft:e.moveScaleToRight;var i=[];return i.push(e.mergeLeftScalesAction),i.push(e.mergeRightScalesAction),new a({label:O,subItems:i})},A.prototype.getContextMenuActions=function(){this._initActions();var e=this._pane.chart().actions(),t=[];if(t.push(this.actions.reset,new l,this._autoScaleAction()),this._isMainSeriesAxis()&&t.push(this._lockScaleAction()),
t.push(e.scaleSeriesOnly,this._invertAction(),new l,this._regularScaleAction(),this._percentageAction(),this._indexedTo100Action(),this._logAction(),new l),o.any()||(t.push(this._createMergeScalesAction()),t.push(new l)),!L.enabled("fundamental_widget")){var i=T("financials_button");t.push(new a({label:window.t("Labels"),subItems:[e.showSymbolLabelsAction,e.showSeriesLastValue,e.showSeriesPrevCloseValue,e.showPrePostMarketPriceLabel,this._undoModel.model().hasCustomSource("bidask")&&e.showBidAskLabels,e.showStudyPlotNamesAction,e.showStudyLastValue,i?e.showFundamentalNamesAction:null,i?e.showFundamentalsLastValueAction:null,this.actions.alignLabels].filter(Boolean)}))}return t.push(P(this._pane.chart())),L.enabled("countdown")&&t.push(e.showCountdown),this._options.currencyLabelEnabled&&t.push(e.showCurrency),!TradingView.onWidget()&&L.enabled("show_chart_property_page")&&L.enabled("chart_property_page_scales")&&e.scalesProperties&&t.push(new l,e.scalesProperties),t},A.prototype._sameSideSources=function(){var e=this._pane.state().sourcesByGroup();return this._isLeft?e.leftPriceScalesSources():e.rightPriceScalesSources()},A.prototype._grouppedSources=function(){var e=this._pane,t=e.chart().model(),i=this._sameSideSources().slice(),r=e.state(),n=this.priceScale(),o=new Set,s=t.lineBeingEdited()||t.lineBeingCreated();if(s&&o.add(s),t.sourcesBeingMoved().forEach((function(e){o.add(e)})),t.selection().sources().forEach((function(e){o.add(e)})),t.hoveredSource()&&o.add(t.hoveredSource()),n===r.defaultPriceScale())for(var a=this._pane.state().dataSources(),l=0;l<a.length;l++)r.isOverlay(a[l])&&i.push(a[l]);return{sources:i,topLevelSources:o}},A.prototype.backLabels=function(e){var t=[],i=this._grouppedSources(),r=function(r){for(var n=0;n<r.length;++n){var o=r[n];if(e||!i.topLevelSources.has(o)){var s=o.priceAxisViews(this._pane.state(),this.priceScale());if(s)for(var a=0;a<s.length;a++)t.push(s[a])}}}.bind(this);return r(i.sources),r(this._pane.state().customSources()),t},A.prototype.setSizeAndOffset=function(e,t){if(e.w<0||e.h<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(e));null!==this._size&&this._size.equals(e)||(this._size=e,this._canvasBinding.resizeCanvas({width:e.w,height:e.h}),this._topCanvasBinding.resizeCanvas({width:e.w,height:e.h}),this._cell.style.width=e.w+"px",this._cell.style.height=e.h+"px",this._cell.style.minWidth=e.w+"px"),this._offset!==t&&(this._offset=t,this._cell.style.left=t+"px")},A.prototype.getWidth=function(){return this._size.w},A.prototype.update=function(){},A.prototype._hightlightBackground=function(e,t,i,r){if(i){for(var n=t[0].price,o=t[0].price,s=1;s<t.length;s++)n=Math.min(n,t[s].price),o=Math.max(o,t[s].price);var a=i.firstValue(),l=Math.floor(this.priceScale().priceToCoordinate(n,a)*r),c=Math.ceil(this.priceScale().priceToCoordinate(o,a)*r),u=this._backgroundBasedTheme.value(),h=I(u);m(e,Math.floor(r),l,Math.ceil((this._size.w-1)*r)+1,c-l,h)}},A.prototype.drawBackground=function(e,t){
var i=Math.ceil(this._size.w*t),r=Math.ceil(this._size.h*t),n=this._pane.state().model().properties().paneProperties;if(n.backgroundType.value()===C.Solid?f(e,0,0,i+1,r+1,this.backgroundColor()):_(e,0,0,i+1,r+1,n.backgroundGradientStartColor.value(),n.backgroundGradientEndColor.value()),this._highlighted){e.globalAlpha=.5;var o=x[this._backgroundBasedTheme.value()].getThemedColor("color-price-axis-highlight");m(e,0,0,i+1,r+1,o),e.globalAlpha=1}var s=this._pane.chart().model(),a=this.priceScale(),l=s.model().selection().sources().filter((function(e){return e.priceScale()===a})).filter((function(e){return w(e)})).reduce((function(e,t){var i=t.axisPoints();return 0===i.length?e:e.concat(i)}),[]);l.length>0&&this._hightlightBackground(e,l,this.priceScale().mainSource(),t);var c=s.model().crossHairSource();c.startMeasurePoint()&&this._hightlightBackground(e,c.measurePoints(),this.priceScale().mainSource(),t)},A.prototype.drawBorder=function(e,t){e.save(),e.fillStyle=this.lineColor();var i,r=Math.max(1,Math.floor(this.rendererOptions().borderSize*t));i=this._isLeft?Math.floor(this._size.w*t)-r:0,e.fillRect(i,0,r,Math.ceil(this._size.h*t)+1),e.restore()},A.prototype.drawTickMarks=function(e,t){var i=this.priceScale().marks();e.save(),e.setFont(this.baseFont());var r=this.rendererOptions(),n=this._isLeft?Math.floor((this._size.w-r.tickLength-r.borderSize)*t):Math.floor(r.borderSize*t),o=this._isLeft?Math.round(n-r.paddingInner*t):Math.round(n+(r.tickLength+r.paddingInner)*t),s=this._isLeft?"right":"left",a=Math.round(r.tickLength*t),l=Math.max(1,Math.floor(t)),c=Math.floor(.5*t),u=0!==i.length?this._tickmarksCache.getLabelHeight(e,i[0].label):0,h=this._isCurrencyLabelVisible()?this._currencyLabelLineHeight()+this._currencyLabel.labelTop():0,d=i.map((function(e){if(this._options.croppedTickMarks)return!0;var t=e.coord-u/2;return!(e.coord+u/2>this._size.h||t<h)}),this);e.fillStyle=this.lineColor(),e.beginPath();for(var p=i.length;p--;)d[p]&&e.rect(n,Math.round(i[p].coord*t)-c,a,l);e.fill(),e.fillStyle=this.textColor();for(p=i.length;p--;)d[p]&&this._tickmarksCache.paintTo(e,i[p].label,o,Math.round(i[p].coord*t),s);e.restore()},A.prototype._alignLabels=function(){var e=this._size.h/2,t=[],i=this.priceScale(),r=i.orderedSources().slice(),n=this._pane.state(),o=this.rendererOptions();if(i===n.defaultPriceScale())for(var s=this._pane.state().dataSources(),a=0;a<s.length;a++)n.isOverlay(s[a])&&r.push(s[a]);var l=this._pane.chart().model().model(),c=i.mainSource(),u=l.selection().sources(),h=new Set;function d(r){for(var o=0;o<r.length;++o){var s=r[o],a=s.priceAxisViews(n,i);if(h.has(s)&&a&&a.forEach((function(e){e.setFixedCoordinate(null)})),a){for(var l=0;l<a.length;l++){var u=a[l];u.isVisible()&&t.push(u)}c===s&&a.length>0&&(e=a[0].floatCoordinate())}}}u.forEach((function(e){h.add(e)})),d(r),d(this._pane.state().customSources());var p=t.filter((function(t){return t.floatCoordinate()<=e})),f=t.filter((function(t){return t.floatCoordinate()>e}));p.sort((function(e,t){return t.floatCoordinate()-e.floatCoordinate()})),
p.length&&f.length&&f.push(p[0]),f.sort((function(e,t){return e.floatCoordinate()-t.floatCoordinate()}));var _=t.length;for(a=0;a<_;a++){(v=t[a]).setFixedCoordinate(v.coordinate())}var m=this.priceScale().properties();if(m.alignLabels&&m.alignLabels.value()){for(a=1;a<p.length;a++){var v=p[a],g=(w=p[a-1]).height(o,!1),y=v.coordinate(),b=w.getFixedCoordinate();(y||b)&&y>b-g&&v.setFixedCoordinate(b-g)}for(var S=1;S<f.length;S++){var w;v=f[S],g=(w=f[S-1]).height(o,!0),y=v.coordinate(),b=w.getFixedCoordinate();(y||b)&&y<b+g&&v.setFixedCoordinate(b+g)}}},A.prototype.drawBackLabels=function(e,t){e.save();for(var i=this.backLabels(),r=this.rendererOptions(),n=this._isLeft?"right":"left",o=0;o<i.length;o++){var s=i[o];s.isAxisLabelVisible()&&(e.save(),s.renderer().draw(e,r,this._widthCache,this._size.w,n,t),e.restore())}e.restore()},A.prototype._minMaxViews=function(e){var t=this._pane.state(),i=this.priceScale(),r=[],n={value:null,view:null},o={value:null,view:null};return e.forEach((function(e){var r=e.priceAxisViews(t,i);if(r&&r.length)for(var s=0;s<r.length;s++){var a=r[s],l=a.coordinate();(null===n.value||n.value<=l)&&(n={value:l,view:a}),(null===o.value||o.value>=l)&&(o={value:l,view:a})}})),n.view&&r.push(n.view),o.view&&r.push(o.view),r},A.prototype._isFromSameSide=function(e){return(this._isLeft?this._pane.state().leftPriceScales():this._pane.state().rightPriceScales()).includes(e)},A.prototype._addViewsOrMaxMin=function(e,t){var i=this._pane.state(),r=this.priceScale();if(r!==i.defaultPriceScale()&&(e=e.filter(function(e){return i.isOverlay(e)||this._isFromSameSide(e.priceScale())}.bind(this))),0!==e.length)if(1===e.length){var n=e[0].priceAxisViews(i,r);n&&n.length&&t.push(n)}else t.push(this._minMaxViews(e))},A.prototype.drawCrossHairLabel=function(e,t){e.save();var i=this._pane.chart().model().model(),r=this._pane.state(),n=this.priceScale(),o=[],s=this._pane.state(),a=this.priceScale()===r.defaultPriceScale(),l=i.lineBeingEdited()||i.lineBeingCreated();l&&(l.priceScale()===n||a&&r.isOverlay(l))&&((u=l.priceAxisViews(s,n))&&u.length&&o.push(u));this._addViewsOrMaxMin(i.sourcesBeingMoved(),o),this._addViewsOrMaxMin(i.selection().sources(),o);var c=i.hoveredSource();if(c){var u,h=r.customSources().includes(c)?n:c.priceScale();if(!i.selection().isSelected(c)&&(this._isFromSameSide(h)||a&&r.isOverlay(c)))(u=i.hoveredSource().priceAxisViews(s,n))&&u.length&&o.push(u)}(u=i.crossHairSource().priceAxisViews(s,n))&&u.length&&o.push(u);var d=this.rendererOptions(),p=this._isLeft?"right":"left";o.forEach((function(i){i.forEach((function(i){e.save(),i.renderer().draw(e,d,this._widthCache,this._size.w,p,t),e.restore()}),this)}),this),e.restore()},A.prototype.setAutoScale=function(e){var t=this._pane.state(),i=this.priceScale();this._pane.chart().model().setPriceAutoScale(t,i,e)},A.prototype.reset=function(){var e=this._pane.state(),t=this.priceScale();this._pane.chart().model().resetPriceScale(e,t)},A.prototype.hardResetCanvas=function(){null!==this._size&&(p(this._canvasBinding,this._size),
p(this._topCanvasBinding,this._size))},A.prototype._isMainPane=function(){return this._pane.state().containsMainSeries()},A.prototype.paint=function(e){if(this._isVisible&&e!==u.None){if(e>u.Cursor){var t=d(this._canvasBinding.canvas);this._alignLabels(),this.drawBackground(t,this._canvasBinding.pixelRatio),this.drawBorder(t,this._canvasBinding.pixelRatio),this._pane.hasState()&&(this._updateCurrencyLabel(),this.drawTickMarks(t,this._canvasBinding.pixelRatio),this.drawBackLabels(t,this._canvasBinding.pixelRatio))}if(this._pane.hasState()){var i=d(this._topCanvasBinding.canvas),r=this._topCanvasBinding.pixelRatio;i.clearRect(0,0,Math.ceil(this._size.w*r)+1,Math.ceil(this._size.h*r)+1),this.drawCrossHairLabel(i,r)}}},A.prototype.restoreDefaultCursor=function(){this.setCursor("")},A.prototype.setCursor=function(e){var t="";"grabbing"!==e&&"ns-resize"!==e||(t="price-axis--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this._cell.classList.remove(this._currentCursorClassName),t&&this._cell.classList.add(t),this._currentCursorClassName=t,this._cell.style.cursor)},A.prototype.axisInfo=function(){return this._axisInfo},A.prototype.setHighlighted=function(e){this._highlighted!==e&&(this._highlighted=e)};var k=M(4);e.exports={PriceAxisWidget:A,scaleRatioForContextMenuTransformer:M}},"1OyB":function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return r}))},"1UCy":function(e,t,i){"use strict";var r;i.r(t),i.d(t,"AlertEditorAbortReason",(function(){return r})),function(e){e.AlertIsInvalid="alert-is-invalid",e.AlertsMaintenance="alerts-maintenance",e.ChartModelNotFound="chart-model-not-found",e.IsAlreadyPresent="is-already-present",e.MainSeriesIsATR="main-series-is-atr",e.MainSeriesIsInReplay="main-series-is-in-replay",e.MainSeriesIsOffline="main-series-is-offline",e.SourceIsDangerous="source-is-dangerous",e.SymbolInfoTimeout="symbol-info-timeout",e.SymbolIsInvalid="symbol-is-invalid",e.UnsupportedResolution="unsupported-resolution"}(r||(r={}))},"1Wlv":function(e,t,i){"use strict";(function(e){var r=i("Ktlt").ChartEventsSource,n=i("Ai40"),o=n.study_ESD$TV_EARNINGS,s=n.study_ESD$TV_SPLITS,a=n.study_ESD$TV_DIVIDENDS,l=i("Yj6H").PriceScaleBase,c=i("Ss5c").LineDataSource,u=i("7ktv").PriceDataSource,h=i("qJq3").Series,d=i("kcTO").PriceFormatter,p=i("GH0z").PercentageFormatter,f=i("Qb4w").PriceRange,_=i("e3/o").randomHash,m=i("s1Gx").sortSources,v=i("3ClC").isStudy,g=i("lTLF").PriceTickMarkBuilder,y=i("TTFo"),b=y.fromPercent,S=y.toPercent,w=y.toPercentRange,P=y.fromIndexedTo100,C=y.toIndexedTo100,T=y.toIndexedTo100Range,x=y.fromLog,I=y.toLog,E=new p,L=new d(100,1);function O(t,i){l.call(this,i),this._scalesProperties=t,this.m_height=0,this._internalHeightCache=null,this._internalHeightChanged=new e,this.m_priceRange=null,this._priceRangeChanged=new e,this.m_topMargin=0,this.m_bottomMargin=0,this._topPixelMargin=0,this._bottomPixelMargin=0,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,
this.m_maxPriceRange=null,this.m_minPriceRange=null,this.m_priceRangeSnapshot=null,this._invalidatedForRange={isValid:!0,visibleBars:null};var r=this;this._coordinateToLogicalFunc=function(e,t){return r._coordinateToLogical(e,t)},this._logicalToCoordinateFunc=function(e,t){return r._logicalToCoordinate(e,t)},this.m_markBuilder=new g(this,100,this._coordinateToLogicalFunc,this._logicalToCoordinateFunc),this._modeChanged=new e,this._properties.isInverted.listeners().subscribe(this,O.prototype._onIsInvertedChanged),this._properties.listeners().subscribe(null,(function(){if(r.mainSource()&&r.mainSource().model()){var e=r.mainSource().model().paneForSource(r.mainSource());r.mainSource().model().updatePane(e)}})),this._scalesProperties.listeners().subscribe(this,(function(){this._marksCache=null})),this.setId(_())}inherit(O,l),O.prototype.id=function(){return this._id},O.prototype.setId=function(e){this._id=e},O.prototype._convertPriceRangeFromLog=function(e){if(null===e)return null;var t=x(e.minValue()),i=x(e.maxValue());return new f(t,i)},O.prototype._convertPriceRangeToLog=function(e){if(null===e)return null;var t=I(e.minValue()),i=I(e.maxValue());return new f(t,i)},O.prototype._canConvertPriceRangeFromLog=function(e){if(null===e)return!1;var t=x(e.minValue()),i=x(e.maxValue());return isFinite(t)&&isFinite(i)},O.prototype.mode=function(){return{autoScale:this._properties.autoScale.value(),lockScale:this._properties.lockScale.value(),percentage:this._properties.percentage.value(),indexedTo100:this._properties.indexedTo100.value(),log:this._properties.log.value()}},O.prototype.setMode=function(e){var t={},i=this.mode(),r=this._properties.state(),n=null;void 0!==e.autoScale&&e.autoScale!==r.autoScale&&(t.autoScale=e.autoScale,this._setAutoScaleValueWithDependentProperties(e.autoScale)),void 0!==e.lockScale&&e.lockScale!==r.lockScale&&(t.lockScale=e.lockScale,this._setLockScaleValueWithDependentProperties(e.lockScale)),void 0!==e.percentage&&e.percentage!==r.percentage&&(t.percentage=e.percentage,this._setPercentageValueWithDependentProperties(e.percentage),this._invalidatedForRange.isValid=!1),void 0!==e.indexedTo100&&e.indexedTo100!==r.indexedTo100&&(t.indexedTo100=e.indexedTo100,this._setIndexedTo100ValueWithDependentProperties(e.indexedTo100),this._invalidatedForRange.isValid=!1),void 0!==e.log&&e.log!==r.log&&(t.log=e.log,this._setLogValueWithDependentProperties(e.log)),r.log&&!this._properties.log.value()&&(this._canConvertPriceRangeFromLog(this.m_priceRange)?null!==(n=this._convertPriceRangeFromLog(this.m_priceRange))&&this.setPriceRange(n):this.properties().autoScale.setValue(!0)),!r.log&&this._properties.log.value()&&null!==(n=this._convertPriceRangeToLog(this.m_priceRange))&&this.setPriceRange(n),r.autoScale!==this._properties.autoScale.value()&&this._properties.autoScale.listeners().fire(this._properties.autoScale),r.autoScaleDisabled!==this._properties.autoScaleDisabled.value()&&this._properties.autoScaleDisabled.listeners().fire(this._properties.autoScaleDisabled),
r.lockScale!==this._properties.lockScale.value()&&this._properties.lockScale.listeners().fire(this._properties.lockScale),r.percentage!==this._properties.percentage.value()&&(this._properties.percentage.listeners().fire(this._properties.percentage),this.updateFormatter()),r.indexedTo100!==this._properties.indexedTo100.value()&&(this._properties.indexedTo100.listeners().fire(this._properties.indexedTo100),this.updateFormatter()),r.percentageDisabled!==this._properties.percentageDisabled.value()&&this._properties.percentageDisabled.listeners().fire(this._properties.percentageDisabled),r.log!==this._properties.log.value()&&this._properties.log.listeners().fire(this._properties.log),r.logDisabled!==this._properties.logDisabled.value()&&this._properties.logDisabled.listeners().fire(this._properties.logDisabled),void 0===t.log&&void 0===t.percentage&&void 0===t.lockScale&&void 0===t.autoScale&&void 0===t.indexedTo100||this._modeChanged.fire(i,this.mode())},O.prototype.modeChanged=function(){return this._modeChanged},O.prototype.fontSize=function(){return this._scalesProperties.fontSize.value()},O.prototype.height=function(){return this.m_height},O.prototype.setHeight=function(e){this.m_height!==e&&(this.m_height=e,this._invalidateInternalHeightCache(),this._marksCache=null)},O.prototype.topPixelMargin=function(){return this.isInverted()?this.m_bottomMargin*this.height()+this._bottomPixelMargin:this.m_topMargin*this.height()+this._topPixelMargin},O.prototype.topMargin=function(){return this.m_topMargin},O.prototype.setTopMargin=function(e){if(!isNumber(e))throw new TypeError("invalid margin");if(e<0||e>30)throw new RangeError("invalid margin");this.m_topMargin!==e&&(this.m_topMargin=e,this._invalidateInternalHeightCache(),this._marksCache=null)},O.prototype.bottomPixelMargin=function(){return this.isInverted()?this.m_topMargin*this.height()+this._topPixelMargin:this.m_bottomMargin*this.height()+this._bottomPixelMargin},O.prototype.bottomMargin=function(){return this.m_bottomMargin},O.prototype.setBottomMargin=function(e){if(!isNumber(e))throw new TypeError("invalid margin");if(e<0||e>30)throw new RangeError("invalid margin");this.m_bottomMargin!==e&&(this.m_bottomMargin=e,this._invalidateInternalHeightCache(),this._marksCache=null)},O.prototype.internalHeight=function(){if(this._internalHeightCache)return this._internalHeightCache;var e=this.height()-this.topPixelMargin()-this.bottomPixelMargin();return this._internalHeightCache=e,e},O.prototype._invalidateInternalHeightCache=function(){this._internalHeightCache=null,this._internalHeightChanged.fire()},O.prototype.internalHeightChanged=function(){return this._internalHeightChanged},O.prototype.priceRange=function(){return this.makeSureItIsValid(),this.m_priceRange},O.prototype.priceRangeChanged=function(){return this._priceRangeChanged},O.prototype.setPriceRange=function(e,t,i){if(!(e instanceof f))throw new TypeError("incorrect price range");var r=this.m_priceRange;if(!t&&(null!==r||null===e)&&(null===r||r.equals(e)))return!1
;var n=null!==this.m_maxPriceRange&&this.m_maxPriceRange.containsStrictly(e),o=null!==this.m_minPriceRange&&e.containsStrictly(this.m_minPriceRange);if(this.isLockScale()&&!t&&(n||o))return!1;this._marksCache=null,this.m_priceRange=e,i||this._priceRangeChanged.fire(r,e)},O.prototype.isEmpty=function(){return this.makeSureItIsValid(),0===this.m_height||!this.m_priceRange||this.m_priceRange.isEmpty()},O.prototype.invertedCoordinate=function(e){return this.isInverted()?e:this.height()-1-e},O.prototype.priceToLogical=function(e){return this.isLog()&&e?I(e):e},O.prototype.logicalToPrice=function(e){return this.isLog()?x(e):e},O.prototype._logicalToCoordinate=function(e,t){if(this.makeSureItIsValid(),this.isEmpty())return 0;e=this.priceToLogical(e);var i=this.bottomPixelMargin()+(this.internalHeight()-1)*(e-this.priceRange().minValue())/(this.priceRange().maxValue()-this.priceRange().minValue());return this.invertedCoordinate(i)},O.prototype.priceToCoordinate=function(e,t){return this.isPercentage()?e=S(e,t):this.isIndexedTo100()&&(e=C(e,t)),this._logicalToCoordinate(e,t)},O.prototype.pointsArrayToCoordinates=function(e,t){this.makeSureItIsValid();var i=this.bottomPixelMargin(),r=this.priceRange().minValue(),n=this.priceRange().maxValue(),o=this.internalHeight()-1,s=this.isInverted(),a=o/(n-r);if(this.isPercentage())for(var l=0;l<e.length;l++)e[l].y=S(e[l].y,t);if(this.isIndexedTo100())for(l=0;l<e.length;l++)e[l].y=C(e[l].y,t);if(this.isLog())for(l=0;l<e.length;l++)e[l].y=this.priceToLogical(e[l].y);for(l=0;l<e.length;l++){var c=e[l].y;if(!TradingView.isNaN(c)&&null!=c){var u=i+a*(c-r),h=s?u:this.m_height-1-u;e[l].y=h}}},O.prototype.pricesArrayToCoordinates=function(e,t){this.makeSureItIsValid();var i=this.bottomPixelMargin(),r=this.priceRange().minValue(),n=this.priceRange().maxValue(),o=this.internalHeight()-1,s=this.isInverted(),a=o/(n-r);if(this.isPercentage())for(var l=0;l<e.length;l++)e[l]=S(e[l],t);if(this.isIndexedTo100())for(l=0;l<e.length;l++)e[l]=C(e[l],t);if(this.isLog())for(l=0;l<e.length;l++)e[l]=this.priceToLogical(e[l]);for(l=0;l<e.length;l++){var c=e[l];if(null!=c){var u=i+a*(c-r),h=s?u:this.m_height-1-u;e[l]=h}}},O.prototype.barPricesToCoordinates=function(e,t){this.makeSureItIsValid();var i=e,r=this.bottomPixelMargin(),n=this.priceRange().minValue(),o=this.priceRange().maxValue(),s=this.internalHeight()-1,a=null;if(this.isPercentage()?a=S:this.isIndexedTo100()?a=C:this.isLog()&&(a=function(e){return e?I(e):e}),null!==a)for(var l=0;l<i.length;l++)i[l]&&(i[l].open=a(i[l].open,t),i[l].high=a(i[l].high,t),i[l].low=a(i[l].low,t),i[l].close=a(i[l].close,t),void 0!==i[l].additionalPrice&&(i[l].additionalPrice=a(i[l].additionalPrice,t)));var c=s/(o-n),u=this.isInverted();for(l=0;l<i.length;l++){var h=i[l];if(h){var d=r+c*(h.open-n),p=u?d:this.m_height-1-d;h.open=p;d=r+c*(h.high-n);var f=u?d:this.m_height-1-d;h.high=f;d=r+c*(h.low-n);var _=u?d:this.m_height-1-d;h.low=_;d=r+c*(h.close-n);var m=u?d:this.m_height-1-d;if(h.close=m,void 0!==h.additionalPrice){d=r+c*(h.additionalPrice-n);var v=u?d:this.m_height-1-d
;h.additionalPrice=v}}}},O.prototype._coordinateToLogical=function(e,t){if(this.makeSureItIsValid(),this.isEmpty())return 0;var i=this.invertedCoordinate(e),r=this.priceRange().minValue()+(this.priceRange().maxValue()-this.priceRange().minValue())*((i-this.bottomPixelMargin())/(this.internalHeight()-1));return this.logicalToPrice(r)},O.prototype.coordinateToPrice=function(e,t){var i=this._coordinateToLogical(e,t);return this.isPercentage()?i=b(i,t):this.isIndexedTo100()&&(i=P(i,t)),i},O.prototype.orderedSources=function(){if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(var e=[],t=0;t<this.m_dataSources.length;t++){var i=this.m_dataSources[t];i instanceof a||i instanceof s||i instanceof o||i instanceof r||(null==i.zorder()&&i.setZorder(t+1),e.push(i))}return e=m(e),this._cachedOrderedSoruces=e,this._cachedOrderedSoruces},O.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null},O.prototype.startScale=function(e){this.isPercentage()||this.isIndexedTo100()||null===this.m_scaleStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scaleStartPoint=this.m_height-e,this.m_priceRangeSnapshot=this.priceRange().clone()))},O.prototype.marks=function(){return this._marksCache||(this.m_markBuilder.rebuildTickMarks(),this._marksCache=this.m_markBuilder.marks(),this._onMarksChanged.fire()),this._marksCache},O.prototype.setMaxPriceRange=function(e){this.m_maxPriceRange=e},O.prototype.setMinPriceRange=function(e){this.m_minPriceRange=e},O.prototype.scaleTo=function(e){if(!this.isPercentage()&&!this.isIndexedTo100()&&null!==this.m_scaleStartPoint){this.setMode({autoScale:!1}),(e=this.m_height-e)<0&&(e=0);var t=(this.m_scaleStartPoint+.2*(this.m_height-1))/(e+.2*(this.m_height-1)),i=this.m_priceRangeSnapshot.clone();t=Math.max(t,.1),i.scaleAroundCenter(t),this.setPriceRange(i)}},O.prototype.endScale=function(){this.isPercentage()||this.isIndexedTo100()||null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this.m_priceRangeSnapshot=null)},O.prototype.startScroll=function(e){this.isAutoScale()||null===this.m_scrollStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scrollStartPoint=e,this.m_priceRangeSnapshot=this.priceRange().clone()))},O.prototype.scrollTo=function(e){if(!this.isAutoScale()&&null!==this.m_scrollStartPoint){var t=this.priceRange().length()/(this.internalHeight()-1),i=e-this.m_scrollStartPoint;this.isInverted()&&(i*=-1);var r=i*t,n=this.m_priceRangeSnapshot.clone();n.shift(r),this.setPriceRange(n,!0),this._marksCache=null}},O.prototype.endScroll=function(){this.isAutoScale()||null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this.m_priceRangeSnapshot=null)},O.prototype.state=function(){var e={};return e.id=this._id,e.m_priceRange=!this.priceRange()||this.isPercentage()||this.isIndexedTo100()?null:this.priceRange().serialize(),e.m_isAutoScale=this.isAutoScale(),e.m_isPercentage=this._properties.percentage.value(),e.m_isIndexedTo100=this._properties.indexedTo100.value(),e.m_isLog=this._properties.log.value(),
e.m_isLockScale=this.isLockScale(),e.m_isInverted=this.isInverted(),e.m_height=this.m_height,e.m_topMargin=this.m_topMargin,e.m_bottomMargin=this.m_bottomMargin,e.alignLabels=this._properties.alignLabels.value(),e},O.prototype.restoreState=function(e){var t=e.m_priceRange;if(void 0===t)throw new TypeError("invalid state");if(void 0===e.m_isAutoScale)throw new TypeError("invalid state");void 0!==e.id&&(this._id=e.id);var i={autoScale:e.m_isAutoScale};void 0!==e.m_isPercentage&&(i.percentage=e.m_isPercentage),void 0!==e.m_isIndexedTo100&&(i.indexedTo100=e.m_isIndexedTo100),void 0!==e.m_isLog&&(i.log=e.m_isLog),void 0!==e.m_isLockScale&&(i.lockScale=e.m_isLockScale),void 0!==e.m_isInverted&&this._properties.isInverted.setValue(e.m_isInverted),void 0!==e.m_height&&this.setHeight(Math.max(0,e.m_height)),this.setMode(i),t?(t instanceof f||(t=new f(t)),this.setPriceRange(t,!0)):this.m_priceRange=null,void 0!==e.m_topMargin&&(this.m_topMargin=e.m_topMargin),void 0!==e.m_bottomMargin&&(this.m_bottomMargin=e.m_bottomMargin),void 0!==e.alignLabels&&this._properties.alignLabels.setValue(e.alignLabels),this._mainSource=void 0,this._scaleSeriesOnly=!1},O.prototype.mainSource=function(){if(void 0!==this._mainSource)return this._mainSource;for(var e=void 0,t=0;t<this.m_dataSources.length;t++){if(TradingView.isInherited(this.m_dataSources[t].constructor,h)){e=this.m_dataSources[t];break}!e&&this.m_dataSources[t]instanceof u&&(e=this.m_dataSources[t])}return this._mainSource=e,this._mainSource||null},O.prototype.formatter=function(){return this._formatter||this.updateFormatter(),this._formatter},O.prototype.formatPrice=function(e,t){return this.isPercentage()?e=S(e,t):this.isIndexedTo100()&&(e=C(e,t)),this.formatter().format(e)},O.prototype.formatPriceAbsolute=function(e){return this._mainSourceFormatter().format(e)},O.prototype.formatPricePercentage=function(e,t){return e=S(e,t),E.format(e)},O.prototype.updateFormatter=function(){this._marksCache=null;var e=this.mainSource(),t=100;e&&(t=e.base()),this._formatter=null,this.isPercentage()?(this._formatter=E,t=100):this.isIndexedTo100()?(this._formatter=new d(100,1),t=100):this._formatter=e?e.formatter():L,this.m_markBuilder=new g(this,t,this._coordinateToLogicalFunc,this._logicalToCoordinateFunc),this.m_markBuilder.rebuildTickMarks()},O.prototype._onIsInvertedChanged=function(){this._marksCache=null,this.m_markBuilder.rebuildTickMarks()},O.prototype._mainSourceFormatter=function(){return this.mainSource().formatter()||L},O.prototype.sourcesForAutoscale=function(){return this._mainSource&&this._scaleSeriesOnly!==this._scalesProperties.scaleSeriesOnly.value()&&(this._sourcesForAutoscale=null),this._sourcesForAutoscale||this._recalculateSourcesForAutoscale(),this._sourcesForAutoscale},O.prototype.recalculatePriceRange=function(e){this._invalidatedForRange={visibleBars:e,isValid:!1}},O.prototype.makeSureItIsValid=function(){this._invalidatedForRange.isValid||(this._invalidatedForRange.isValid=!0,this.recalculatePriceRangeImpl())},O.prototype.recalculatePriceRangeImpl=function(){
var e=this._invalidatedForRange.visibleBars;if(null!==e){for(var t=null,i=this.sourcesForAutoscale(),r=this.isPercentage(),n=this.isIndexedTo100(),o=0,s=0,a=0;a<i.length;a++){var l=i[a];if(l.properties().visible.value()){var c=e.firstBar(),u=e.lastBar(),h=l.autoScaleInfo(c,u),d=h.range;d&&(r?d=w(d,l.firstValue()):n&&(d=T(d,l.firstValue())),t=null===t?d:t.merge(d)),void 0!==h.topPixelMargin&&(o=Math.max(o,h.topPixelMargin)),void 0!==h.bottomPixelMargin&&(s=Math.max(s,h.bottomPixelMargin))}}(Math.abs(o-this._topPixelMargin)>0||Math.abs(s-this._bottomPixelMargin)>0)&&(this._bottomPixelMargin=s,this._topPixelMargin=o,this._marksCache=null,this._invalidateInternalHeightCache()),t?(t.minValue()===t.maxValue()&&(t=new f(t.minValue()-.5,t.maxValue()+.5)),this.setPriceRange(t)):this.m_priceRange||this.setPriceRange(new f(-.5,.5)),this._invalidatedForRange.isValid=!0}},O.prototype.sourcesToUpdateViews=function(){if(!this._sourcesToUpdateViews){this._sourcesToUpdateViews=[];for(var e=0;e<this.m_dataSources.length;e++){var t=this.m_dataSources[e];TradingView.isInherited(t.constructor,c)&&!t.isActualSymbol()||this._sourcesToUpdateViews.push(t)}}return this._sourcesToUpdateViews},O.prototype.updatePaneViews=function(){for(var e=this.sourcesToUpdateViews(),t=0;t<e.length;t++)e[t].updateAllViews()},O.prototype.canDetachSource=function(e){return this.m_dataSources.some((function(t){return t!==e&&!(t instanceof a||t instanceof s||t instanceof o)&&t instanceof u&&!(v(t)&&t.isLinkedToSeries())}))},t.PriceScale=O}).call(this,i("aIyQ"))},"1gmO":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ALERT_LABEL_WIDTH=void 0;var r,n=i("LxhU"),o=i("oR7+"),s=i("tc+8"),a=(r=s)&&r.__esModule?r:{default:r};var l=i("aO4+"),c=l.Point,u=l.point,h=l.box,d=i("f6yo").pointInBox,p=i("VaSN").lastEventIsTouch,f=i("Hr11").max,_=i("fgLi").DataSource,m=i("VdBB").HitTestResult,v=i("vq8G").SelectionRenderer,g=i("Zy3/").CompositeRenderer,y=i("PT1i").linking,b=i("ikwP"),S=b.drawScaled,w=b.getCanvasDevicePixelRatio,P=i("HL4j").PriceLineAxisRenderer,C=i("zDbI").CHART_FONT_FAMILY,T=i("s1Gx").sortSourcesPreOrdered,x=i("cPgM").ScaledPaneRenderer,I=T.AlertLabel;t.ALERT_LABEL_WIDTH=5;function E(){return p()?24:3}function L(e,t,i,r){_.call(this),this.m_model=e,this._data=t,this._alertOwnerSource=i,this._paneView=new O(this,e),this._priceAxisView=new R(this,e),this._priceLinePriceAxisView=new B(this,e),this.toolname="AlertLabel",this._constructor="AlertLabel",this._invokeAlertEditor=r,this._resetUserEditEnabled(),this.hasAlert.setValue(!0),this._resetUserEditEnabledCallback=this._resetUserEditEnabled.bind(this),this._chartModelLightUpdate=e.lightUpdate.bind(e),this._propertyMock=new a.default({visible:!0}),this._alertSeriesId=t.get("extra").alertSeries().id,t.on("change:id",this._resetUserEditEnabledCallback),t.on("change:extra",this._resetUserEditEnabledCallback),t.on("change:extra",this._chartModelLightUpdate),t.on("change:isBeingEdited",this._resetUserEditEnabledCallback)}function O(e,t){this.m_alertLabel=e,this.m_model=t,this.m_item=null,
this._invalidated=!0,this.labelWidth=10,this._highlightCallback=this.highlight.bind(this),this._updateHoverCallback=this.updateHover.bind(this),this.m_alertLabel.alert().on("fired",this._highlightCallback),this.m_alertLabel.alert().on("change:hovered",this._updateHoverCallback)}function A(e){this.points=e.item.points,this.alert=e.item.alert,this.borderColor=e.color,this.cursor=e.cursor,this.labelWidth=e.width}function M(e){x.call(this),this.color=e.color,this.points=e.item.points,this.lineWidth=e.lineWidth,this.lineStyle=e.lineStyle}function k(e){this._data=e}inherit(L,_),L.prototype.zorder=function(){return I},L.prototype.alertOwnerSource=function(){return this._alertOwnerSource},L.prototype.alertSeriesId=function(){return this._alertSeriesId},L.prototype.stop=function(){this._data.off("change:id",this._resetUserEditEnabledCallback),this._data.off("change:extra",this._resetUserEditEnabledCallback),this._data.off("change:extra",this._chartModelLightUpdate),this._data.off("change:isBeingEdited",this._resetUserEditEnabledCallback),this._paneView.stop(),this._priceAxisView.stop()},L.prototype._resetUserEditEnabled=function(){var e=this._data;this._userEditEnabled=!e.get("isBeingEdited")&&!e.isNew()&&e.isPrice()&&e.get("extra")},L.prototype.data=function(){return this._data},L.prototype.alert=L.prototype.data,L.prototype.alertId=function(){return this.alert().id},L.prototype.getAlert=function(){return Promise.resolve(this._data)},L.prototype.getAlertSync=function(){return this._data},L.prototype.movable=function(){return!0},L.prototype.onlyYMoving=function(){return!0},L.prototype.convertYCoordinateToPriceForMoving=function(e,t){var i=this.priceScale();if(!t||!i||i.isEmpty())return null;var r=t.firstValue();return null===r?null:i.coordinateToPrice(e,r)},L.prototype.isSynchronizable=function(){return!1},L.prototype.state=function(){var e=this.alert().get("extra"),t=[];return e&&e.conditionData().isChannel?(t.push({price:e.price().upper}),t.push({price:e.price().lower})):t.push({price:e.price()}),{points:t}},L.prototype.restorePoints=function(e,t){var i=this.alert().get("extra");i.conditionData().isChannel?i.price({upper:e[0].price,lower:e[1].price}):i.price(e[0].price)},L.prototype.createServerPoints=function(){},L.prototype.properties=function(){return this._propertyMock},L.prototype.paneViews=function(){return TradingView.printing?null:this.labelVisible()?[this._paneView]:null},L.prototype.dataWindowView=function(){return null},L.prototype.priceAxisViews=function(e,t){return TradingView.printing?[]:this.labelVisible()?e.findTargetPriceAxisViews(this,t,[this._priceAxisView],[this._priceLinePriceAxisView]):[]},L.prototype.statusView=function(){return null},L.prototype.updateAllViews=function(){this._paneView.update(),this._priceAxisView.update(),this._priceLinePriceAxisView.update()},L.prototype.pointsCount=function(){return 0},L.prototype.title=function(){return this.alert().title()},L.prototype.startMoving=function(e,t){this._userEditEnabled=!1,this._startMovingPoint=e.logical,this.alert().saveState()},
L.prototype.move=function(e,t){var i=e.logical.price,r=this.alert().get("extra");r.conditionData().isChannel&&(0===t?i={upper:i}:1===t&&(i={lower:i})),r.price(i),this._currentMovingPoint=e.logical},L.prototype.endMoving=function(){var e=this,t=this._startMovingPoint,i=this._currentMovingPoint;this._userEditEnabled=!0,delete this._startMovingPoint,delete this._currentMovingPoint,t&&i&&t!==i&&!this._undoMode&&this._invokeAlertEditor({dataSourceHub:this.m_model,alert:this.alert(),type:"edit_alert",onEditCancel:function(){setTimeout((function(){e.alert().restoreState()}),0)},actionSource:"alert_label_move"})},L.prototype.showInObjectTree=function(){return!1},L.prototype.isRemovedByStudyTemplates=function(){return!1},L.prototype.isUserDeletable=function(){return!1},L.prototype.doesMovingAffectsUndo=function(){return!1},L.prototype.drawHorzLine=function(){return this.labelLineVisible()},L.prototype.canDrawLabelForAlert=function(){var e=this.alert(),t=e.get("extra"),i=t&&t.getMainSeries(),r=i&&i.getStyle&&i.getStyle(),o=this.m_model.mainSeries(),s=o&&o.properties(),a=s&&s.style&&s.style.value(),l=n.Interval.isEqual(e.get("resolution"),y.interval.value())||e.get("crossInterval"),c=!e.isRangeBasedStyle()&&!o.isRangeBasedStyle()||r===a;return e.isPrice()&&l&&c},L.prototype.labelVisible=function(){return o.defaultSettings.visible},L.prototype.labelLineVisible=function(){return(0,o.getSettingsProperty)().line.visible.value()},L.prototype.color=function(){return this._highlighted?(0,o.getSettingsProperty)().highlightColor.value():this.alert().isNew()?"rgba( 119, 119, 119, 1)":o.defaultSettings.color},O.prototype.stop=function(){this.m_alertLabel.alert().off("fired",this._highlightCallback),this.m_alertLabel.alert().off("change:hovered",this._updateHoverCallback)},O.prototype.update=function(){this._invalidated=!0},O.prototype.invalidate=function(){this.m_model.lightUpdate()},O.prototype.highlight=function(){var e=function(){this._highlighted=!0,this.update(),this.invalidate(),setTimeout(t,500)}.bind(this),t=function(){this._highlighted=!1,this.update(),this.invalidate()}.bind(this);e(),setTimeout(e,1e3)},O.prototype.updateHover=function(e,t){this._hovered=!!t,this.update(),this.invalidate()},O.prototype._updateImpl=function(){var e,t,i=this,r=this.m_alertLabel.alert(),n=r.get("extra"),o=[],s=this.m_model.paneForSource(this.m_alertLabel),a=s.mainDataSource().firstValue(),l=function(e){return i.m_alertLabel.priceScale().priceToCoordinate(e,a)};if(this.m_alertLabel.canDrawLabelForAlert()){if(e=this.m_model.paneForSource(this.m_alertLabel).width()-this.labelWidth/2-1,t=n.price(),n.conditionData().isChannel){var u=l(t.upper),h=l(t.lower);o.push(new c(e,u)),o.push(new c(e,h))}else{var d=l(t);o.push(new c(e,d))}if(this.m_item={alert:r,points:o},this.m_model.selection().isSelected(this.m_alertLabel)){var p=s.height(),f=o.map((function(e){return i.m_model.backgroundColorAtYPercentFromTop(e.y/p)}));this._selectionData={points:o,hittestResult:m.MOVEPOINT,bgColors:f,visible:!0}}else this._selectionData=null}else this.m_item=null},
O.prototype.lineWidth=function(){var e=o.defaultSettings.line.width;return this._hovered&&(e+=2),e},O.prototype.lineStyle=function(){return o.defaultSettings.line.style},O.prototype.renderer=function(){if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),!this.m_item)return null;var e=this.m_alertLabel,t=this.m_model,i={};i.item=this.m_item,i.barSpacing=t.timeScale().barSpacing(),i.height=this._hovered?12:10,i.width=this._hovered?this.labelWidth+2:this.labelWidth,i.connectingLineWidth=this._hovered?3:1,i.color=e.color(),i.lineWidth=this.lineWidth(),i.lineStyle=this.lineStyle(),i.cursor=t.crossHairSource();var r=new g;return e.drawHorzLine()&&r.append(new M(i)),e===t.hoveredSource()&&r.append(new A(i)),t.selection().isSelected(e)&&r.append(new v(this._selectionData)),r},inherit(A,x),A.prototype._drawImpl=function(e){var t=function(e,t,i){var r,n=this.alert.get("name")||this.alert.get("description"),o=[$.t("Alert: ")+n];e.font="12px "+C;var s=f($.map(o,(function(t){return e.measureText(t).width||0}))),a=40+s,l=12*o.length+16+8*(o.length-1);if(2===this.points.length){var u,h,d=this.points[0],p=this.points[1];this.cursor.x<d.x-this.labelWidth?(u=this.cursor.x,h=Math.abs(p.y-this.cursor.y)<Math.abs(d.y-this.cursor.y)?p.y:d.y):(u=d.x,h=this.cursor.y,h=Math.min(p.y,h),h=Math.max(d.y,h)),r=new c(u,h)}else r=new c(this.cursor.x,this.points[0].y);var _={x:r.x-20-5-a,y:r.y-l/2};e.lineWidth=1,e.strokeStyle=this.borderColor,e.fillStyle=t,e.translate(_.x,_.y),e.beginPath(),e.moveTo(0,0),e.lineTo(a,0),e.lineTo(a,l/2-5),e.lineTo(a+5,l/2),e.lineTo(a,l/2+5),e.lineTo(a,l),e.lineTo(0,l),e.lineTo(0,0),e.stroke(),e.fill(),e.textBaseline="bottom",e.fillStyle=i,e.textAlign="center";for(var m=20+s/2,v=0,g=0;g<o.length;g++)v+=20,e.fillText(o[g],m,v);e.translate(-_.x,-_.y)}.bind(this);Promise.resolve().then(i.bind(null,"EsvI")).then((function(i){var r=i.getThemedColor,n=r("color-bg-primary"),o=r("color-alert-text"),s=w(e.canvas);S(e,s,(function(){t(e,n,o)}))}))},A.prototype.hitTest=function(){return null},inherit(M,x),M.prototype._drawImpl=function(e){var t,i;e.lineWidth=this.lineWidth,e.strokeStyle=this.color,CanvasEx.setLineStyle(e,this.lineStyle);for(var r=0;r<this.points.length;r++)i=this.points[r].y,t=this.points[r].x,e.beginPath(),e.moveTo(t,i),e.lineTo(0,i),e.stroke()},M.prototype.hitTest=function(e){for(var t,i,r=0;r<this.points.length;r++)if(t=this.points[r].y,Math.abs(t-e.y)<=E())return i=r,new m(m.MOVEPOINT,{itemIndex:i});return null};function D(e){this.points=e.items,this.height=e.height,this.width=e.width,this.color=e.color,this.lineStyle=e.lineStyle,this.horzLineWidth=e.lineWidth,this.connectingLineWidth=e.connectingLineWidth}function R(e,t){this._alertLabel=e,this._model=t,this._data={visible:!1,items:[]},this._invalidated=!0,this._updateHoverCallback=this._updateHover.bind(this),this._alertLabel.alert().on("change:hovered",this._updateHoverCallback)}function V(e){this._bases=e}function B(e,t){R.call(this,e,t),this._renderers=[],this._compositeRenderer=new V(this._renderers)}k.prototype.draw=function(e,t,i,r,n,o){
e.save(),e.fillStyle=this._data.color;var s=this._data.items[0],a=Math.round(1*o),l=Math.round(s*o),c=Math.round(5*o),u=Math.round(5*o),h=Math.round(2*o),d=Math.round(r*o);"left"===n?(e.beginPath(),e.moveTo(a,l),e.lineTo(a+c,l-u),e.lineTo(a+c+h,l-u),e.lineTo(a+c+h,l+u),e.lineTo(a+c,l+u),e.closePath(),e.fill()):(e.beginPath(),e.moveTo(d-a,l),e.lineTo(d-a-c,l-u),e.lineTo(d-a-c-h,l-u),e.lineTo(d-a-c-h,l+u),e.lineTo(d-a-c,l+u),e.closePath(),e.fill()),e.restore()},k.prototype.hitTest=function(e,t,i){var r=this._data.items[0],n=null;n="right"===i?h(u(1,r-5),u(8,r+5)):h(u(t-1-1,r-5),u(t-1-5-2-1,r+5));var o=E();return n.min.x-=o,n.min.y-=o,n.max.x+=o,n.max.y+=o,d(e,n)?new m(m.REGULAR):null},D.prototype.hitTest=function(e,t,i){var r=[],n=this.points[0],o=this.points[1],s=this._claculateTriangleHeight(n,o),a=this.connectingLineWidth,l=this.horzLineWidth/2;"right"===i?(r.push(h(u(1,n-l),u(1+this.width,n+s))),r.push(h(u(1,o+l),u(1+this.width,o-s))),o>n&&r.push(h(u(1+this.width-a,o),u(1+this.width+a,n)))):(r.push(h(u(t-1,n-l),u(t-1-this.width,n+s))),r.push(h(u(t-1,o+l),u(t-1-this.width,o-s))),o>n&&r.push(h(u(t-1-this.width-a,o),u(t-1-this.width+a,n))));var c=E();return r.forEach((function(e){e.min.x-=c,e.min.y-=c,e.max.x+=c,e.max.y+=c})),r.some((function(t){return d(e,t)}))?new m(m.REGULAR):null},D.prototype._claculateTriangleHeight=function(e,t){var i=this.height;return e.y<=t.y&&(i=Math.min(i,Math.abs(e.y-t.y)/2)),i},D.prototype.draw=function(e,t,i,r,n,o){var s=this.points[0],a=this.points[1],l=this._claculateTriangleHeight(s,a),c=this.connectingLineWidth,u=this.horzLineWidth/2;e.save(),e.fillStyle=this.color,e.strokeStyle=this.color,e.lineWidth=c,CanvasEx.setLineStyle(e,this.lineStyle);var h=Math.round(1*o),d=Math.round(r*o),p=Math.round(u*o),f=Math.round(this.width*o),_=Math.round(l*o),m=Math.round(a*o),v=Math.round(s*o);if("left"===n){if(e.beginPath(),e.moveTo(h,v-p),e.lineTo(h+f,v-p),e.lineTo(h+f,v+_),e.closePath(),e.fill(),e.beginPath(),e.moveTo(h,m+p),e.lineTo(h+f,m+p),e.lineTo(h+f,m-_),e.closePath(),e.fill(),m<v)return;e.beginPath(),e.moveTo(h+f,m),e.lineTo(h+f,v),e.stroke()}else{if(e.beginPath(),e.moveTo(d-h,v-p),e.lineTo(d-h-f,v-p),e.lineTo(d-h-f,v+_),e.closePath(),e.fill(),e.beginPath(),e.moveTo(d-h,m+p),e.lineTo(d-h-f,m+p),e.lineTo(d-h-f,m-_),e.closePath(),e.fill(),m<v)return;e.beginPath(),e.moveTo(d-h-f,m),e.lineTo(d-h-f,v),e.stroke()}e.restore()},R.prototype.stop=function(){this._alertLabel.alert().off("change:hovered",this._updateHoverCallback)},R.prototype.coordinate=function(){return this._data.length>0?this._data[0]:null},R.prototype.floatCoordinate=function(){return null},R.prototype.getFixedCoordinate=function(){return null},R.prototype.height=function(){return 0},R.prototype.isVisible=function(){return this._data.visible},R.prototype.isAxisLabelVisible=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!0),this._data.visible},R.prototype.paneRenderer=function(){return null},R.prototype.setFixedCoordinate=function(){},R.prototype.text=function(){return""},R.prototype.update=function(){
this._invalidated=!0},R.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!0),0===this._data.items.length?new g:1===this._data.items.length?new k(this._data):2===this._data.items.length?new D(this._data):new g},R.prototype.secondLineText=function(){},R.prototype._updateHover=function(e,t){this._hovered=!!t,this.update()},R.prototype._updateImpl=function(){var e=this;if(this._data.visible=!1,null!==this._model.paneForSource(this._alertLabel)){var t=function(t){var i=e._model.paneForSource(e._alertLabel).mainDataSource().firstValue();return e._alertLabel.priceScale().priceToCoordinate(t,i)},i=this._alertLabel.alert().get("extra");if(this._alertLabel.canDrawLabelForAlert()){this._data.visible=!0,this._data.width=7,this._data.height=7,this._data.color=this._alertLabel.color(),this._data.items=[],this._data.connectingLineWidth=this._hovered?3:1,this._data.lineWidth=(0,o.getSettingsProperty)().line.width.value()+(this._hovered?2:0),this._data.lineStyle=(0,o.getSettingsProperty)().line.style.value();var r=i.price();if(i.conditionData().isChannel){var n=t(r.upper),s=t(r.lower);this._data.items.push(n),this._data.items.push(s)}else{var a=t(r);this._data.items.push(a)}}}},V.prototype.draw=function(e,t,i,r,n,o){this._bases.forEach((function(s){s.draw(e,t,i,r,n,o)}))},V.prototype.height=function(){return 0},inherit(B,R),B.prototype.renderer=function(){var e=this;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),!this._data.visible)return new V([]);for(var t={visible:this._data.visible,linewidth:this._data.lineWidth,linestyle:this._data.lineStyle},i=this._renderers.length;i<this._data.items.length;i++){var r={color:this._data.color,coordinate:this._data.items[i]};this._renderers.push(new P(t,r))}return this._renderers.length>this._data.items.length&&this._renderers.splice(this._data.items.length),this._data.items.forEach((function(i,r){var n={color:e._data.color,coordinate:i};e._renderers[r].setData(t,n)})),this._compositeRenderer},B.prototype._updateImpl=function(){this._alertLabel.drawHorzLine()?R.prototype._updateImpl.call(this):this._data.visible=!1},t.AlertLabel=L},"1oAu":function(e,t,i){"use strict";!function(e,t,i){function r(i,r){r=r||i+"outside";var n=e(),o=i+"."+r+"-special-event";function s(t){e(n).each((function(){var i=e(this);this===t.target||i.has(t.target).length||i.triggerHandler(r,[t.target])}))}e.event.special[r]={setup:function(){delete(n=n.add(this)).prevObject,1===n.length&&e(t).bind(o,s)},teardown:function(){delete(n=n.not(this)).prevObject,0===n.length&&e(t).unbind(o)},add:function(e){var t=e.handler;e.handler=function(e,i){e.target=i,t.apply(this,arguments)}}}}e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),(function(e){r(e)})),r("focusin","focusoutside"),r("focusout","bluroutside"),Modernizr.mobiletouch&&(r("touchstart","mousedownoutside"),r("touchmove","mousemoveoutside"),r("touchend","mouseupoutside")),e.addOutsideEvent=r}(jQuery,document)},"1pHB":function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" transform="translate(4 5)"><circle stroke="currentColor" cx="9.5" cy="9.5" r="9"/><path stroke="currentColor" d="M7 14.5h2.5v-5H7"/><path stroke="currentColor" stroke-linecap="square" d="M9.5 14.5h2"/><path fill="currentColor" d="M9.5 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/></g></svg>'},"2+aH":function(e,t,i){"use strict";(function(e){var r=i("vdSZ").CrosshairDataWindowView,n=i("Hm6r").CrosshairTimeAxisView,o=i("zZ2k").CrosshairBase,s=i("mMWL"),a=i("ogJP").isNaN;function l(t,i,a){var l=this;o.call(this,t,a),this._properties=i,this._dataWindowView=new r(t);var c=function(){return this.appliedIndex()}.bind(this),u=function(){return this._startMeasurePoint.index}.bind(this),h=function(){return this._lastMeasurePoint().index}.bind(this);this._timeAxisView=new n(t,c,!1),this._startMeasureTimeAxisView=new n(t,u,!0),this._endMeasureTimeAxisView=new n(t,h,!0),this.visible=!0,t.readOnly()?this.areLinesVisible=!0:s.cursorTool.subscribe((function(e){l.areLinesVisible="arrow"!==e}),{callWithLast:!0}),this._movedDelegate=new e,this._subscribed=!1,this._barSelectedDelegate=new e}inherit(l,o),l.prototype.index=0,l.prototype.price=NaN,l.prototype.pane=null,l.prototype.color="white",l.prototype.style="",l.prototype.customization={disableSelection:!0},l.prototype.model=function(){return this._model},l.prototype.properties=function(){return this._properties},l.prototype.moved=function(){return this._movedDelegate},l.prototype.originX=function(){return this._originX},l.prototype.originY=function(){return this._originY},l.prototype.saveOriginCoord=function(e,t){this._originX=e,this._originY=t},l.prototype.originCoordX=function(){return this._originX},l.prototype.originCoordY=function(){return this._originY},l.prototype.clearOriginCoord=function(){this._originX=NaN,this._originY=NaN},l.prototype.setPosition=function(e,t,i){this._subscribed||(this._model.mainSeries().onRestarted().subscribe(this,l.prototype.clearMeasure),this._subscribed=!0),this.setLockedPosition(i),this.visible=!0,this._tryToUpdateViews(e,t,i)},l.prototype.selectionPane=function(){return this._selectionPane},l.prototype.update=function(){if(this.visible){var e=this._priceScaleByPane(this.pane),t=this._originX||this.x,i=this._originY||this.y,r=this._model.timeScale().coordinateToIndex(t),n=NaN;if(null!==e){var o=this.pane.mainDataSource().firstValue();n=e.coordinateToPrice(i,o)}this._tryToUpdateViews(r,n,this.pane)}else this._setIndexToLastSeriesBarIndex()},l.prototype._priceScaleByPane=function(e){return e&&!e.defaultPriceScale().isEmpty()?e.defaultPriceScale():null},l.prototype._tryToUpdateViews=function(e,t,i){this._tryToUpdateData(e,t,i)&&(this.updateAllViews(),this._movedDelegate.fire({time:this._model.timeScale().points().roughTime(this.index),price:this.price}))},l.prototype._tryToUpdateData=function(e,t,i){var r=this.x,n=this.y,o=this.price,s=this.index,l=this.pane,c=this._priceScaleByPane(i);if(this.index=e,
this.x=a(e)?NaN:this._model.timeScale().indexToCoordinate(e),null!==c){this.pane=i,this.price=t;var u=i.mainDataSource().firstValue();this.y=c.priceToCoordinate(t,u)}else this.pane=null,this.price=NaN,this.y=NaN;return r!==this.x||n!==this.y||s!==this.index||o!==this.price||l!==this.pane},l.prototype.clearPosition=function(){this.visible=!1,this._setIndexToLastSeriesBarIndex(),this.price=NaN,this.x=NaN,this.y=NaN,this.pane=null,this.clearOriginCoord()},l.prototype._setIndexToLastSeriesBarIndex=function(){var e=this._model.mainSeries().bars().lastIndex();this.index=null!==e?e:NaN},l.prototype.dataWindowView=function(){return this._dataWindowView},l.prototype.appliedIndex=function(){return isFinite(this.lockedIndex)&&this.lockedIndex||this.index},l.prototype.appliedX=function(){return isFinite(this.lockedX)&&this.lockedX||this.x},l.prototype.selectBarMode=function(){return this._selectBarMode},l.prototype.toggleSelectBarMode=function(){this._setSelectBarModeState(!this._selectBarMode.value())},l.prototype.onBarSelected=function(){return this._barSelectedDelegate},l.prototype._setSelectBarModeState=function(e){this._selectBarMode.setValue(e),this._model.lightUpdate()},l.prototype.trySelectCurrentBar=function(){if(this._model.mainSeries().bars().contains(this.index)){var e=this._model.timeScale().indexToTimePoint(this.index);null!==e&&(this._setSelectBarModeState(!1),this._barSelectedDelegate.fire(e))}},l.prototype.handleContextMenuEvent=function(){this._selectBarMode.value()&&this._setSelectBarModeState(!1)},l.prototype.setOnHoveredChartWidget=function(e){this._isOnHoveredChartWidget=e},l.prototype.isOnHoveredChartWidget=function(){return this._isOnHoveredChartWidget},t.CrossHair=l}).call(this,i("aIyQ"))},"22O2":function(e,t,i){"use strict";var r,n=i("Eyy1").ensureNotNull,o=i("aO4+").Point,s=i("vq8G").SelectionRenderer,a=i("VdBB").HitTestResult,l=i("gK+X").PaneRendererRenkoPB,c=i("fSwl").PaneRendererKagi,u=i("d8RW").PaneRendererPnF,h=i("29fS").PaneRendererBars,d=i("Zy3/").CompositeRenderer,p=i("ga+R"),f=i("txPx").getLogger("Chart.JapaneseSeriesPaneView"),_=i("Kxc7");function m(e,t){this.m_series=e,this.m_model=t,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=_.enabled("source_selection_markers")}function v(e,t){m.call(this,e,t)}function g(e,t){m.call(this,e,t)}function y(e,t){v.call(this,e,t)}function b(e,t){g.call(this,e,t)}function S(e,t){v.call(this,e,t)}function w(e,t){g.call(this,e,t)}function P(e,t){v.call(this,e,t)}function C(e,t){g.call(this,e,t)}function T(e,t){v.call(this,e,t)}function x(e,t){g.call(this,e,t)}m.prototype.bars=function(){throw new Error("unimplemented")},m.prototype.isProjection=function(){throw new Error("unimplemented")},m.prototype.update=function(){this._invalidated=!0},m.prototype.nearestIndex=function(e,t){if(TradingView.isInteger(e)){var i=this.bars().search(e,t);return null!==i?i.index:void 0}f.logDebug("incorrect logicalPoint")},m.prototype._updateImpl=function(){var e=this;if((this.m_bars.length=0,
this.m_series.properties().style.value()!==TradingView.Series.STYLE_PNF||this.m_series.data().boxSize)&&(!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty()&&null!==(s=this.m_series.getRealVisibleRange())&&0!==this.bars().size()&&!e.m_series.data().bars().isEmpty())){for(var t=s.firstBar(),i=s.lastBar(),r=this.m_series.data().search(t).value[TradingView.CLOSE_PLOT];t<=i;t++){if(null!==this.bars().valueAt(t))break}if(!(t>i)){var s=this.bars().range(t,i),l=this.m_series.priceScale(),c=this.m_series.barColorer(),u={},h=e.m_series.properties().style.value(),d=h===TradingView.Series.STYLE_KAGI||h===TradingView.Series.STYLE_PNF,f=e.isProjection(),_=n(e.m_series.data().bars().lastIndex());if(s.each((function(t,i){if(void 0!==i[TradingView.OPEN_PLOT]&&void 0!==i[TradingView.HIGH_PLOT]&&void 0!==i[TradingView.LOW_PLOT]&&void 0!==i[TradingView.CLOSE_PLOT]){var r={},n={O:i[TradingView.OPEN_PLOT],H:i[TradingView.HIGH_PLOT],L:i[TradingView.LOW_PLOT],C:i[TradingView.CLOSE_PLOT],Adt:d?i[TradingView.ADT_PLOT]:void 0};r.time=Math.round(t),r.open=n.O,r.high=n.H,r.low=n.L,r.close=n.C,u.value=i;var o=c.barStyle(t,f,u);switch(u.previousValue=i,r.color=o.barColor,r.borderColor=o.barBorderColor,r.isUp=o.isBarUp,r.wickColor=o.barWickColor,h){case TradingView.Series.STYLE_PNF:r.low-=.5*e.m_series.data().boxSize,r.high+=.5*e.m_series.data().boxSize,r.upColor=o.upColor,r.downColor=o.downColor,r.isMergedBar=o.isMergedBar,r.additionalNum=Math.round(1+(i[TradingView.HIGH_PLOT]-i[TradingView.LOW_PLOT])/e.m_series.data().boxSize);break;case TradingView.Series.STYLE_KAGI:if(r.upColor=o.upColor,r.downColor=o.downColor,r.isTwoColorBar=o.isTwoColorBar,!isNumber(n.Adt))break;r.additionalPrice=n.Adt,f&&r.time===_&&(r.combinedWithProjection=!0)}e.m_bars.push(r)}}),this),h===TradingView.Series.STYLE_PNF&&(this.blockSize=(l.priceToCoordinate(0,r)-l.priceToCoordinate(500,r))/500*this.m_series.data().boxSize),l.barPricesToCoordinates(this.m_bars,r),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_model.selection().isSelected(this.m_series)){var m=p(t,i);this._selectionData={points:[],bgColors:[],visible:!0};var v=this.m_model.paneForSource(this.m_series).height();this._selectionData.hittestResult=a.REGULAR;for(var g=0;g<m.length;g++){var y=m[g],b=this.m_series.bars().valueAt(y);if(null!==b){var S=.5*(b[TradingView.OPEN_PLOT]+b[TradingView.CLOSE_PLOT]),w=this.m_model.timeScale().indexToCoordinate(y),P=this.m_series.priceScale().priceToCoordinate(S,r);this._selectionData.points.push(new o(w,P)),this._selectionData.bgColors.push(this.m_model.backgroundColorAtYPercentFromTop(P/v))}}}}}},m.prototype.items=function(){return this.m_bars},inherit(v,m),v.prototype.bars=function(){return this.m_series.bars()},v.prototype.isProjection=function(){return!1},inherit(g,m),g.prototype.bars=function(){return this.m_series.nsBars()},g.prototype.isProjection=function(){return!0},inherit(y,v),y.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,
e.barSpacing=this.m_model.timeScale().barSpacing();var t=new d;return t.append(new l(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&t.append(new s(this._selectionData)),t},inherit(b,g),b.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),new l(e)},r=function(e,t){g.call(this,e,t)},inherit(r,g),r.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.thinBars=this.m_series.properties().rangeStyle.thinBars.value(),new h(e)},inherit(S,v),S.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.barSpacing=.9*this.m_model.timeScale().barSpacing();var t=new d;return t.append(new l(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&t.append(new s(this._selectionData)),t},inherit(w,g),w.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.barSpacing=.9*this.m_model.timeScale().barSpacing(),new l(e)},inherit(P,v),P.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing();var t=new d;return t.append(new c(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&t.append(new s(this._selectionData)),t},inherit(C,g),C.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.upColor=this.upColor,e.downColor=this.downColor,e.barSpacing=this.m_model.timeScale().barSpacing(),new c(e)},inherit(T,v),T.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.blockSize=this.blockSize,e.barSpacing=this.m_model.timeScale().barSpacing();var t=new d;return t.append(new u(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&t.append(new s(this._selectionData)),t},inherit(x,g),x.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.blockSize=this.blockSize,e.barSpacing=this.m_model.timeScale().barSpacing(),new u(e)},t.SeriesRenkoPaneView=y,t.SeriesProjectionRenkoPaneView=b,t.SeriesPriceBreakPaneView=S,t.SeriesProjectionPriceBreakPaneView=w,t.SeriesKagiPaneView=P,t.SeriesProjectionKagiPaneView=C,t.SeriesPnFPaneView=T,t.SeriesProjectionPnFPaneView=x,t.SeriesProjectionRangePaneView=r},"22xp":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=(i("YFKU"),i("9uLv")),s=i("txPx"),a=i("//lZ"),l=i("aIyQ"),c=i.n(l),u=i("Kxc7"),h=i("Hr11"),d=i("ogJP"),p=i("ZJKN"),f=function(){function e(e,t){Object(n.assert)(e<=t,"The left value should be greater than or equal to the right value"),this._left=e,this._right=t}
return e.prototype.left=function(){return this._left},e.prototype.right=function(){return this._right},e.prototype.length=function(){return this._right-this._left+1},e.prototype.contains=function(e){return this._left<=e&&e<=this._right},e.prototype.equals=function(e){return this._left===e.left()&&this._right===e.right()},e.compare=function(e,t){return null===e||null===t?e===t:e.equals(t)},e}(),_=Object(s.getLogger)("Chart.TimePoints"),m=function(){function e(){this._zoffset=0,this._items=[]}return e.prototype.clear=function(){this._zoffset=0,this._items=[]},e.prototype.size=function(){return this._items.length},e.prototype.firstIndex=function(){return this._offsetToIndex(0)},e.prototype.lastIndex=function(){return this._offsetToIndex(this._items.length-1)},e.prototype.merge=function(e,t,i){if(0===i.length)return _.logError("merge: 'values' does not contain any time points"),[];if(t>this._zoffset&&e+t>0)return _.logError("merge: when the first time point index is updated, we should fill the time points starting from the first one"),[];if(0===this._items.length)return this._items=i,this._zoffset=t,[{change:"rebuild",index:this._validOffsetToIndex(0)}];var r=e+this._zoffset;if(r<0){var n=Math.abs(r);if(i.length<n)return _.logError("merge: 'values' does not contain enough time points to fill in the new items. 'index': "+e.toString()+", previous 'zoffset': "+this._zoffset.toString()+", new 'zoffset': "+t.toString()+", 'values.length': "+i.length),[];this._items=new Array(n).concat(this._items),this._zoffset=t;for(var o=0;o<i.length;++o)this._items[e+o+t]=i[o];return[{change:"rebuild",index:this._validOffsetToIndex(0)}]}for(var s=[],a=r;a<this._items.length&&a-r<i.length;++a)this._items[a]=i[a-r],s.push({change:"update",index:this._validOffsetToIndex(a),value:i[a-r]});var l=r+i.length;if(l>this._items.length){n=l-this._items.length;for(var c=a;c<a+n;++c){var u=this._items.length;this._items.push(i[c-r]),s.push({change:"append",index:this._validOffsetToIndex(u),value:i[c-r]})}}return this._zoffset=t,s},e.prototype.addTail=function(e,t){for(var i=t?1:0;i<e.length;i++)this._items.push(e[i])},e.prototype.remove=function(e){var t=this._indexToOffset(e);if(null===t)return[];for(var i=this._items.splice(t),r=[],n=0;n<i.length;n++)r.push({change:"remove",index:e+n,value:i[n]});return r},e.prototype.valueAt=function(e){var t=this._indexToOffset(e);return null!==t?this._items[t]:null},e.prototype.indexOf=function(e,t){if(this._items.length<1)return null;if(e>this._items[this._items.length-1])return t?this._validOffsetToIndex(this._items.length-1):null;for(var i=0;i<this._items.length;++i){if(e===this._items[i])return this._validOffsetToIndex(i);if(e<this._items[i])return t?this._validOffsetToIndex(i):null}return null},e.prototype.state=function(){return{items:this._items,zoffset:this._zoffset}},e.prototype.restoreState=function(e){null!==e&&(this._items=e.items,this._zoffset=e.zoffset)},e.prototype.roughTime=function(e,t){void 0===t&&(t=null);var i=this.valueAt(e);if(null!==i)return i;var r=this._items
;if(!r.length||r.length<2)return null;var n=r.length-1,o=this._validOffsetToIndex(0),s=this._validOffsetToIndex(n),a=r[0],l=r[n],c=(l-a)/(s-o);if(e<o)return a-(u=o-e)*c;var u;return e>s?(u=e-s)<500&&null!=t?t(l,u):l+u*c:null},e.prototype.roughIndex=function(e,t){void 0===t&&(t=null);var i=this._items;if(!i.length||i.length<2)return null;var r=i.length-1,n=this._validOffsetToIndex(0),o=this._validOffsetToIndex(r),s=i[0],a=i[r];if(e>=s&&e<=a)return this.closestIndexLeft(e);var l=(a-s)/(o-n);if(e<s){var c=s-e;return n-(u=Math.round(c/l))}if(e>a){var u;c=e-a;if((u=Math.trunc(c/l))<500&&null!==t){var h=t(a,e);h.success&&(u=h.result)}return o+u}return null},e.prototype.closestIndexLeft=function(e){var t=this._items;if(!t.length)return null;if(Number.isNaN(e))return null;var i=t.length-1;if(e>=t[i])return this._validOffsetToIndex(i);var r=0,n=t[r];if(e<n)return null;if(e===n)return this._validOffsetToIndex(r);for(;i>r+1;){var o=r+i>>1,s=t[o];if(s>e)i=o;else{if(!(s<e))return s===e?this._validOffsetToIndex(o):null;r=o}}return this._validOffsetToIndex(r)},e.prototype._validOffsetToIndex=function(e){return e-this._zoffset},e.prototype._offsetToIndex=function(e){return 0<=e&&e<this.size()?this._validOffsetToIndex(e):null},e.prototype._indexToOffset=function(e){var t=e+this._zoffset;return 0<=t&&t<this.size()?t:null},e}(),v=i("tc+8"),g=i.n(v),y=new Map([[0,.1],[11,.1],[1,.35],[9,.35],[12,.35],[8,.35]]),b=function(){function e(e,t){this._styleSpecificRanges=new Map,this._logicalRange=e,this._defaultStyle=t}return e.prototype.strictRange=function(e){if(null===this._logicalRange)return null;void 0===e&&(e=this._defaultStyle);var t=this._styleSpecificRanges.get(e);if(void 0===t){var i=(y.get(e)||0)/2;t=new p.BarsRange(Math.ceil(this._logicalRange.left()+i),Math.ceil(this._logicalRange.right()-i)),this._styleSpecificRanges.set(e,t)}return t},e.prototype.logicalRange=function(){return this._logicalRange},e.prototype.isValid=function(){return null!==this._logicalRange},e.invalid=function(){return new e(null,1)},e}(),S=i("Ocx9"),w=i("GhVi"),P=i("8OdW"),C=function(){function e(e,t){void 0===t&&(t=50),this._actualSize=0,this._usageTick=1,this._oldestTick=1,this._cache=new Map,this._tick2Labels=new Map,this._format=e,this._maxSize=t}return e.prototype.format=function(e){var t=this._cache.get(e.valueOf());if(void 0!==t)return t.string;if(this._actualSize===this._maxSize){var i=this._tick2Labels.get(this._oldestTick);this._tick2Labels.delete(this._oldestTick),this._cache.delete(Object(n.ensureDefined)(i)),this._oldestTick++,this._actualSize--}var r=this._format(e);return this._cache.set(e.valueOf(),{string:r,tick:this._usageTick}),this._tick2Labels.set(this._usageTick,e.valueOf()),this._actualSize++,this._usageTick++,r},e}(),T=i("kcTO");i.d(t,"TimeScale",(function(){return k}));var x,I={preserveBarSpacing:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!0},E=u.enabled("low_density_bars"),L=u.enabled("high_density_bars")?.025:.5,O=E?1:5,A=Object(s.getLogger)("Chart.TimeScale"),M=new Map([[0,.9],[11,.9],[1,.8],[9,.8],[12,.8],[8,.8]])
;var k=function(){function e(e,t){var i=this;this._width=0,this._widthChanged=new c.a,this._rightOffset=10,this._maxRightOffsetChanged=new c.a,this._defaultRightOffsetProperty=new g.a(10),this._baseIndex=null,this._leftEdgeIndex=null,this._barSpacingChanged=new c.a,this._barSpacing=6,this._visibleBars=b.invalid(),this._visibleBarsInvalidated=!0,this._visibleBarsChanged=new c.a,this._logicalRangeChanged=new c.a,this._points=new m,this._tickMarks=new w.Tickmarks,this._onScroll=new c.a,this._resetDelegate=new c.a,this._scrollStartPoint=null,this._scaleStartPoint=null,this._commonTransitionStartState=null,this._formattedBySpan=new Map,this._options=Object(r.__assign)(Object(r.__assign)({},I),t),this._model=e,this._scalesProperties=e.properties().scalesProperties,this._defaultRightOffsetProperty.listeners().subscribe(this,(function(e){i.setRightOffset(e.value())})),this._options.preserveBarSpacing&&(this._barSpacing=this._scalesProperties.childs().barSpacing.value()||6),this._model.mainSeries().onStyleChanged().subscribe(this,this._invalidateVisibleBars),this._barSpacingChanged.subscribe(this,this._maxRightOffsetOnChanged),this._widthChanged.subscribe(this,this._maxRightOffsetOnChanged)}return e.prototype.destroy=function(){this._model.mainSeries().onStyleChanged().unsubscribe(this,this._invalidateVisibleBars),this._barSpacingChanged.destroy(),this._widthChanged.destroy()},e.prototype.isEmpty=function(){return 0===this._width||0===this._points.size()},e.prototype.update=function(e,t,i,r){this._visibleBarsInvalidated=!0,i.length>0&&this._points.merge(e,t,i),this._tickMarks.merge(r),this._correctOffset()},e.prototype.addTail=function(e,t,i){this._tickMarks.removeTail(t);for(var r=e.params,o=Object(n.ensureDefined)(this._tickMarks.maxIndex)+(i?0:1),s=0;s<r.marks.length;s++)r.marks[s].index=o+s;this._tickMarks.addTail(r.marks),this._points.addTail(r.changes,i),this._rightOffset-=r.changes.length},e.prototype.state=function(e){var t={m_barSpacing:this.barSpacing(),m_rightOffset:e?this._rightOffset:this._defaultRightOffsetProperty.value()};return e&&(t.points=this._points.state(),t.tickmarks=this._tickMarks.state(),t.width=this._width),t},e.prototype.restoreState=function(e,t){if(void 0!==e.m_barSpacing)if(void 0!==e.m_rightOffset){var i=e.m_barSpacing,r=e.m_rightOffset<0&&!t?this.rightOffsetDefaultValue():e.m_rightOffset,n=r<0?this.rightOffsetDefaultValue():Math.round(r);this._defaultRightOffsetProperty.setValue(n),this._rightOffset=r,t&&(this._points.restoreState(e.points||null),this._tickMarks.restoreState(e.tickmarks||null),e.width&&this._width>0&&(i*=this._width/e.width)),this._tryToUpdateBarSpacing(this._barSpacing,i),this._correctOffset()}else A.logDebug("restoreState: invalid state");else A.logDebug("restoreState: invalid state")},e.prototype.marks=function(){if(this.isEmpty())return null
;for(var e=this._barSpacing,t=5*((this._scalesProperties.childs().fontSize.value()||0)+4),i=Math.round(t/e),r=Object(n.ensureNotNull)(this.visibleBarsStrictRange()),o=Math.max(r.firstBar(),r.firstBar()-i),s=Math.max(r.lastBar(),r.lastBar()-i),a=[],l=0,c=this._tickMarks.build(e,t);l<c.length;l++){var u=c[l];if(o<=u.index&&u.index<=s){var h=this._tickMarks.indexToTime(u.index);null!==h&&a.push({coord:this.indexToCoordinate(u.index),label:this.formatLabel(h,u.span),span:u.span,major:u.label>=P.DAY_SPAN})}}return a},e.prototype.visibleBarsStrictRange=function(){return this._visibleBarsInvalidated&&(this._visibleBarsInvalidated=!1,this._updateVisibleBars()),this._visibleBars.strictRange()},e.prototype.visibleBarsStrictRangeChanged=function(){return this._visibleBarsChanged},e.prototype.logicalRangeChanged=function(){return this._logicalRangeChanged},e.prototype.tickMarks=function(){return this._tickMarks},e.prototype.points=function(){return this._points},e.prototype.width=function(){return this._width},e.prototype.setWidth=function(e){if(!Number.isFinite(e)||e<=0)A.logWarn("setWidth: invalid argument: "+e);else if(this._width!==e){if(this._visibleBarsInvalidated=!0,this._options.lockVisibleTimeRangeOnResize&&this._width){var t=this._barSpacing*e/this._width;this._tryToUpdateBarSpacing(this._barSpacing,t)}if(null!==this._leftEdgeIndex)if(Object(n.ensureNotNull)(this.visibleBarsStrictRange()).firstBar()<=this._leftEdgeIndex){var i=this._width-e;this._rightOffset-=Math.round(i/this._barSpacing)+1}this._width=e,this._widthChanged.fire(e),this._correctOffset()}},e.prototype.setLeftEdgeFix=function(e){this._leftEdgeIndex=e;var t=this.visibleBarsStrictRange();if(null!==t){var i=t.firstBar()-e;if(i<0){var r=this._rightOffset-i-1;this.scrollToOffsetAnimated(r,500)}}},e.prototype.indexToCoordinate=function(e){if(this.isEmpty())return 0;if(!Object(d.isInteger)(e))return 0;var t=this.baseIndex()+this._rightOffset-e;return this._width-(t+.5)*this._barSpacing},e.prototype.indexToUserTime=function(e){return this._tickMarks.indexToTime(e)},e.prototype.timePointToIndex=function(e){return this._points.indexOf(e,!0)},e.prototype.indexToTimePoint=function(e){return this._points.valueAt(e)},e.prototype.timeToCoordinate=function(e){var t=this._points.closestIndexLeft(e);if(null===t)return null;var i=Object(n.ensureNotNull)(this._points.valueAt(t)),r=this.indexToCoordinate(t);if(r<=0||r>=this._width)return null;var o=this.barSpacing(),s=this.baseIndex(),a=r+(e-i)/(Object(n.ensureNotNull)(this._points.valueAt(s))-Object(n.ensureNotNull)(this._points.valueAt(s-1)))*o+1;return a<=0||a>=this._width?null:a},e.prototype.barIndexesToCoordinates=function(e){for(var t=this.baseIndex(),i=0,r=e;i<r.length;i++){var n=r[i],o=n.time,s=t+this._rightOffset-o,a=this._width-(s+.5)*this._barSpacing;n.time=a,n.exactTime=a}},e.prototype.indexesToCoordinates=function(e){for(var t=this.baseIndex()+this._rightOffset,i=this._width-t*this._barSpacing-.5*this._barSpacing,r=0,n=e;r<n.length;r++){var o=n[r],s=i+o.x*this._barSpacing;o.x=s}},
e.prototype.rightOffsetForTimePoint=function(e){var t=this.timeToCoordinate(e);return null===t?null:this._rightOffsetForCoordinate(t)},e.prototype.scrollToRealtime=function(e,t){var i=this,r=this._defaultRightOffsetProperty.value();if(r<0&&(r=this.rightOffsetDefaultValue()),e){var n=this._rightOffset,s=this.maxRightOffset();s>0&&r>s&&(r=s);var l=this._model;Object(a.doAnimate)({from:n,to:r,duration:1e3,easing:o.easingFunc.easeInOutQuint,onComplete:t,onStep:function(e,t){i._visibleBarsInvalidated=!0,i._rightOffset=t,i._correctOffset(),l.recalculateAllPanes(),l.lightUpdate(),l.recalcVisibleRangeStudy(l.dataSources())}})}else this._visibleBarsInvalidated=!0,this._rightOffset=r,this._correctOffset(),void 0!==t&&t()},e.prototype.scrollToOffsetAnimated=function(e,t){var i=this;if(!isFinite(e))throw new RangeError("offset is required and must be finite number");var r=void 0===t?400:t;if(!isFinite(r)||r<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var n=this._rightOffset,o=Date.now(),s=function(){i._visibleBarsInvalidated=!0;var t=(Date.now()-o)/r;if(t>=1)return i._rightOffset=e,i._correctOffset(),i._visibleBarsInvalidated=!0,i._model.recalculateAllPanes(),void i._model.lightUpdate();i._rightOffset=n+(e-n)*t,i._correctOffset(),i._model.recalculateAllPanes(),setTimeout(s,20)};s()},e.prototype.defaultRightOffsetProperty=function(){return this._defaultRightOffsetProperty},e.prototype.rightOffsetDefaultValue=function(){return 10},e.prototype.barSpacing=function(){return this._barSpacing},e.prototype.setBarSpacing=function(e){Number.isFinite(e)?(e=this.getValidBarSpacing(e),this._tryToUpdateBarSpacing(this._barSpacing,e)&&(this._correctOffset(),this._options.preserveBarSpacing&&(Object(S.saveDefaultProperties)(!0),this._scalesProperties.childs().barSpacing.setValue(this._barSpacing),Object(S.saveDefaultProperties)(!1)))):A.logWarn("setBarSpacing: invalid argument: "+e)},e.prototype.barSpacingChanged=function(){return this._barSpacingChanged},e.prototype.getValidBarSpacing=function(e){return null==e&&(e=this.barSpacing()),e<this.minBarSpacing()?this.minBarSpacing():e>this.maxBarSpacing()?this.maxBarSpacing():e},e.prototype.isValidBarSpacing=function(e){return e>=this.minBarSpacing()&&e<=this.maxBarSpacing()},e.prototype.preserveBarSpacing=function(){return this._options.preserveBarSpacing},e.prototype.normalizeBarIndex=function(e){var t=0,i=0,r=this.baseIndex(),o=Object(n.ensureNotNull)(this._points.firstIndex());return e<o?(t=Object(n.ensureNotNull)(this._points.valueAt(o)),i=e-o):e>r?(t=Object(n.ensureNotNull)(this._points.valueAt(r)),i=e-r):(t=Object(n.ensureNotNull)(this._points.valueAt(e)),i=0),{time_t:t,offset:i}},e.prototype.denormalizeTimePoint=function(e){var t=this._points.indexOf(e.time_t,!1);if(null!==t)return t+e.offset},e.prototype.rightOffset=function(){return this._rightOffset},e.prototype.minRightOffset=function(){var e=this.points().firstIndex(),t=this._baseIndex;if(null===e||null===t)return null;if(null!==this._leftEdgeIndex){var i=this.width()/this._barSpacing
;return this._leftEdgeIndex-t+i-1}return e-t-1+O},e.prototype.maxRightOffset=function(){return this.width()/this._barSpacing-O},e.prototype.maxRightOffsetChanged=function(){return this._maxRightOffsetChanged},e.prototype.onReset=function(){return this._resetDelegate},e.prototype.scrollStartPoint=function(){return this._scrollStartPoint},e.prototype.baseIndex=function(){return this._baseIndex||0},e.prototype.zoom=function(e,t,i){if(Number.isFinite(e)&&Number.isFinite(t)){var r=this.coordinateToIndex(e),n=this.barSpacing(),o=n+t*(n/10);this.setBarSpacing(o),(void 0!==i?!i:this._options.rightBarStaysOnScroll)||this.setRightOffset(this.rightOffset()-.5+(r-this._coordinateToFloatIndex(e)))}else A.logWarn("zoom: invalid arguments: "+e+", "+t+", "+i)},e.prototype.zoomToBarsRange=function(e,t){if(!(t<=e)){var i=this.baseIndex();this._rightOffset=t-i;var r=M.get(this._model.mainSeries().style())||.6,n=Math.max(t-e+r,O);this.setBarSpacing(this.width()/n),this._visibleBarsInvalidated=!0}},e.prototype.coordinateToIndex=function(e){return Math.ceil(this._coordinateToFloatIndex(e))},e.prototype.canZoomIn=function(){return this.barSpacing()<this.maxBarSpacing()},e.prototype.canZoomOut=function(){return this.barSpacing()>L},e.prototype.minBarSpacing=function(){return L},e.prototype.maxBarSpacing=function(){return E?this.width():50},e.prototype.resetRightOffset=function(){this.setRightOffset(this._defaultRightOffsetProperty.value())},e.prototype.reset=function(){this._visibleBarsInvalidated=!0,this._points=new m,this._scrollStartPoint=null,this._scaleStartPoint=null,this._clearCommonTransitionsStartState(),this._tickMarks.reset(),this._leftEdgeIndex=null,this._resetDelegate.fire()},e.prototype.setBaseIndex=function(e){Number.isFinite(e)?(this._visibleBarsInvalidated=!0,this._baseIndex=e,this._correctOffset()):A.logDebug("setBaseIndex: invalid argument: "+e)},e.prototype.setRightOffset=function(e){Number.isFinite(e)?(this._visibleBarsInvalidated=!0,this._rightOffset=e,this._correctOffset()):A.logWarn("setRightOffset: invalid argument: "+e)},e.prototype.correctBarSpacing=function(){this.isEmpty()||this.points().size()<this.width()/this.barSpacing()&&(this.setRightOffset(this._defaultRightOffsetProperty.value()),this.setBarSpacing(this.width()/(this.points().size()+this.rightOffset())))},e.prototype.logicalRange=function(){return this._visibleBarsInvalidated&&(this._visibleBarsInvalidated=!1,this._updateVisibleBars()),this._visibleBars.logicalRange()},e.prototype.restoreDefault=function(){this._visibleBarsInvalidated=!0,this.setBarSpacing(6),this.resetRightOffset()},e.prototype.restoreRightOffsetPropertyToDefault=function(){this._defaultRightOffsetProperty.setValue(this.rightOffsetDefaultValue())},e.prototype.startScale=function(e){this._scrollStartPoint&&this.endScroll(),null===this._scaleStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this._scaleStartPoint=e,this._saveCommonTransitionsStartState()))},e.prototype.scaleTo=function(e){if(null!==this._commonTransitionStartState){
var t=Object(h.clamp)(this._width-e,0,this._width),i=Object(h.clamp)(this._width-Object(n.ensureNotNull)(this._scaleStartPoint),0,this._width);0!==t&&0!==i&&this.setBarSpacing(this._commonTransitionStartState.barSpacing*t/i)}},e.prototype.endScale=function(){null!==this._scaleStartPoint&&(this._scaleStartPoint=null,this._clearCommonTransitionsStartState())},e.prototype.startScroll=function(e){null===this._scrollStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this._scrollStartPoint=e,this._saveCommonTransitionsStartState()))},e.prototype.scrollTo=function(e){if(this._visibleBarsInvalidated=!0,null!==this._scrollStartPoint){var t=(this._scrollStartPoint-e)/this.barSpacing();this._rightOffset=Object(n.ensureNotNull)(this._commonTransitionStartState).rightOffset+t,this._correctOffset(),this._onScroll.fire()}},e.prototype.endScroll=function(){null!==this._scrollStartPoint&&(this._scrollStartPoint=null,this._clearCommonTransitionsStartState())},e.prototype.formatLabel=function(e,t){var i=this,r=this._formattedBySpan.get(t);return void 0===r&&(r=new C((function(e){return i.formatLabelImpl(e,t)})),this._formattedBySpan.set(t,r)),r.format(new Date(e))},e.prototype.formatLabelImpl=function(e,t){if(!(e&&e instanceof Date))return"incorrect time";var i=this._model.mainSeries().isDWM();return t<P.MINUTE_SPAN&&!i?Object(T.numberToStringWithLeadingZero)(e.getUTCHours(),2)+":"+Object(T.numberToStringWithLeadingZero)(e.getUTCMinutes(),2)+":"+Object(T.numberToStringWithLeadingZero)(e.getUTCSeconds(),2):t<P.DAY_SPAN&&!i?Object(T.numberToStringWithLeadingZero)(e.getUTCHours(),2)+":"+Object(T.numberToStringWithLeadingZero)(e.getUTCMinutes(),2):t<P.WEEK_SPAN||t<P.MONTH_SPAN?e.getUTCDate().toString():t<P.YEAR_SPAN?(void 0===x&&(x=[window.t("Jan"),window.t("Feb"),window.t("Mar"),window.t("Apr"),window.t("May"),window.t("Jun"),window.t("Jul"),window.t("Aug"),window.t("Sep"),window.t("Oct"),window.t("Nov"),window.t("Dec")]),x)[e.getUTCMonth()]:e.getUTCFullYear().toString()},e.prototype.onScroll=function(){return this._onScroll},e.prototype._updateVisibleBars=function(){var e=this._visibleBars;if(this.isEmpty())this._visibleBars.isValid()&&(this._visibleBars=b.invalid(),this._visibleBarsChanged.fire(null,e.strictRange()),this._logicalRangeChanged.fire(null,e.logicalRange()));else{var t=this.baseIndex(),i=this.width()/this._barSpacing,r=this._rightOffset+t,n=r-i;Number.isFinite(n)&&Number.isFinite(r)?(this._visibleBars=new b(new f(n,r),this._model.mainSeries().style()),p.BarsRange.compare(e.strictRange(),this._visibleBars.strictRange())||this._visibleBarsChanged.fire(this._visibleBars.strictRange(),e.strictRange()),f.compare(e.logicalRange(),this._visibleBars.logicalRange())||this._logicalRangeChanged.fire(this._visibleBars.logicalRange(),e.logicalRange())):A.logWarn("updateVisibleBars error: baseIndex: "+t+", barSpacing: "+this._barSpacing+", rightOffset: "+this._rightOffset)}},e.prototype._rightOffsetForCoordinate=function(e){return(this._width+1-e)/this._barSpacing},e.prototype._invalidateVisibleBars=function(){
this._visibleBarsInvalidated=!0},e.prototype._correctOffset=function(){var e=this.maxRightOffset();this._rightOffset>e&&(this._rightOffset=e,this._visibleBarsInvalidated=!0);var t=this.minRightOffset();null!==t&&this._rightOffset<t&&(this._rightOffset=t,this._visibleBarsInvalidated=!0)},e.prototype._tryToUpdateBarSpacing=function(e,t){return e!==t&&(this._visibleBarsInvalidated=!0,this._barSpacing=t,this._barSpacingChanged.fire(e,t),!0)},e.prototype._coordinateToFloatIndex=function(e){var t=this._rightOffsetForCoordinate(e),i=this.baseIndex()+this.rightOffset()-t;return Math.round(1e6*i)/1e6},e.prototype._saveCommonTransitionsStartState=function(){this._commonTransitionStartState={barSpacing:this.barSpacing(),rightOffset:this.rightOffset()}},e.prototype._clearCommonTransitionsStartState=function(){this._commonTransitionStartState=null},e.prototype._maxRightOffsetOnChanged=function(){this._maxRightOffsetChanged.fire(this.maxRightOffset())},e}()},"23IT":function(e,t,i){"use strict";var r,n;function o(e){return"line"===e.type}function s(e){return"shapes"===e.type}function a(e){return"chars"===e.type}function l(e){return"arrows"===e.type}function c(e){return"dataoffset"===e.type}function u(e){return"ohlc_open"===e.type}function h(e){return"ohlc_high"===e.type}function d(e){return"ohlc_low"===e.type}function p(e){return"ohlc_close"===e.type}function f(e){return u(e)||h(e)||d(e)||p(e)}function _(e){return"colorer"===e.type}function m(e){return"bar_colorer"===e.type}function v(e){return"bg_colorer"===e.type}function g(e){return"text_colorer"===e.type}function y(e){return"ohlc_colorer"===e.type}function b(e){return"alertcondition"===e.type}function S(e){return"Plot"!==e}function w(e){return"ohlc_bars"===e.plottype}function P(e){return"ohlc_candles"===e.plottype}i.r(t),i.d(t,"LineStudyPlotStyle",(function(){return r})),i.d(t,"isLinePlot",(function(){return o})),i.d(t,"isShapesPlot",(function(){return s})),i.d(t,"isCharsPlot",(function(){return a})),i.d(t,"isArrowsPlot",(function(){return l})),i.d(t,"isDataOffsetPlot",(function(){return c})),i.d(t,"isOhlcOpenPlot",(function(){return u})),i.d(t,"isOhlcHighPlot",(function(){return h})),i.d(t,"isOhlcLowPlot",(function(){return d})),i.d(t,"isOhlcClosePlot",(function(){return p})),i.d(t,"isOhlcPlot",(function(){return f})),i.d(t,"isColorerPlot",(function(){return _})),i.d(t,"isBarColorerPlot",(function(){return m})),i.d(t,"isBgColorerPlot",(function(){return v})),i.d(t,"isTextColorerPlot",(function(){return g})),i.d(t,"isOhlcColorerPlot",(function(){return y})),i.d(t,"isAlertConditionPlot",(function(){return b})),i.d(t,"isPlotTitleDefined",(function(){return S})),i.d(t,"isOhlcPlotStyleBars",(function(){return w})),i.d(t,"isOhlcPlotStyleCandles",(function(){return P})),i.d(t,"PlotSymbolSize",(function(){return n})),function(e){e[e.Line=0]="Line",e[e.Histogram=1]="Histogram",e[e.Cross=3]="Cross",e[e.Area=4]="Area",e[e.Columns=5]="Columns",e[e.Circles=6]="Circles",e[e.LineWithBreaks=7]="LineWithBreaks",e[e.AreaWithBreaks=8]="AreaWithBreaks",e[e.StepLine=9]="StepLine"}(r||(r={})),
function(e){e.Auto="auto",e.Tiny="tiny",e.Small="small",e.Normal="normal",e.Large="large",e.Huge="huge"}(n||(n={}))},"24R9":function(e,t,i){"use strict";function r(e){return decodeURIComponent(e.replace(/\+/g," ")).replace(/<\/?[^>]+(>|$)/g,"")}function n(e){var t=/([^&=]+)=?([^&]*)/g,i={};if(!e)return i;for(var n=t.exec(e);n;)i[r(n[1])]=r(n[2]),n=t.exec(e);return i}function o(){return n(window.location.search.substring(1))}function s(){return n(window.location.hash.split("#")[1])}function a(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&null!=e[i]&&t.push({key:i,pair:encodeURIComponent(i)+"="+encodeURIComponent(e[i])});return t.sort((function(e,t){return e.key>t.key?1:e.key<t.key?-1:0})).map((function(e){return e.pair})).join("&")}i.r(t),i.d(t,"decode",(function(){return r})),i.d(t,"getQueryParams",(function(){return n})),i.d(t,"getUrlParams",(function(){return o})),i.d(t,"getHashUrlParams",(function(){return s})),i.d(t,"createUrlParams",(function(){return a}))},"25b6":function(e,t,i){"use strict";i.r(t),i.d(t,"htmlEscape",(function(){return o})),i.d(t,"removeTags",(function(){return s})),i.d(t,"removeSpaces",(function(){return a})),i.d(t,"capitalizeFirstLetterInWord",(function(){return l}));var r=/[<"'&>]/g,n=function(e){return"&#"+e.charCodeAt(0)+";"};function o(e){return e.replace(r,n)}function s(e){return void 0===e&&(e=""),e.replace(/(<([^>]+)>)/gi,"")}function a(e){return void 0===e&&(e=""),e.replace(/\s+/g,"")}function l(e){return void 0===e&&(e=""),e.replace(/\b\w/g,(function(e){return e.toUpperCase()}))}},"29fS":function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererBars",(function(){return o}));var r=i("VdBB"),n=i("Zp/P"),o=function(){function e(e){this._bars=e.bars,this._barSpacing=e.barSpacing,this._dontDrawOpen=e.dontDrawOpen,this._thinBars=e.thinBars}return e.prototype.hitTest=function(e){var t=this._bars,i=.5*this._barSpacing;if(0===t.length)return null;if(e.x<t[0].time-i)return null;if(e.x>t[t.length-1].time+i)return null;for(var o=null,s=0,a=t;s<a.length;s++){var l=a[s];if(e.x<=l.time+i){o=l;break}}if(null===o)return null;var c=this._calcBarWidth(1),u=this._thinBars?Math.min(c,1):c,h=Object(n.selectionTolerance)(u),d=Math.min(o.high,o.low),p=Math.max(o.high,o.low);return d-h<=e.y&&e.y<=p+h?new r.HitTestResult(r.HitTestResult.REGULAR):null},e.prototype.draw=function(e,t){e.save();var i=t.pixelRatio;(this._barWidth=this._calcBarWidth(i),this._barWidth>=2)&&(Math.max(1,Math.floor(i))%2!=this._barWidth%2&&this._barWidth--);this._barLineWidth=this._thinBars?Math.min(this._barWidth,Math.floor(i)):this._barWidth;for(var r=null,n=this._barLineWidth<=this._barWidth&&this._barSpacing>=Math.floor(1.5*t.pixelRatio),o=0,s=this._bars;o<s.length;o++){var a=s[o];r!==a.color&&(e.fillStyle=a.color,r=a.color);var l=Math.floor(.5*this._barLineWidth),c=Math.round(a.time*i),u=c-l,h=this._barLineWidth,d=u+h-1,p=Math.min(a.high,a.low),f=Math.max(a.high,a.low),_=Math.round(p*i)-l,m=Math.round(f*i)+l,v=Math.max(m-_,this._barLineWidth);e.fillRect(u,_,h,v);var g=Math.ceil(1.5*this._barWidth);if(n){if(!this._dontDrawOpen){
var y=c-g,b=Math.max(_,Math.round(a.open*i)-l),S=b+h-1;S>_+v-1&&(b=(S=_+v-1)-h+1),e.fillRect(y,b,u-y,S-b+1)}var w=c+g,P=Math.max(_,Math.round(a.close*i)-l),C=P+h-1;C>_+v-1&&(P=(C=_+v-1)-h+1),e.fillRect(d+1,P,w-d,C-P+1)}}e.restore()},e.prototype._calcBarWidth=function(e){var t=Math.floor(e);return Math.max(t,Math.floor(Object(n.optimalBarWidth)(this._barSpacing,e)))},e}()},"2EnG":function(e,t,i){"use strict";i.r(t),i.d(t,"StandardPivotPointsImageCache",(function(){return o}));var r=i("ikwP"),n=i("Eyy1"),o=function(){function e(e,t,i,n){this._priceAxisFontSize=11,this._prices=[],this._labelWidth=0,this._paneRenderParams=e,this._recreateCanvasAndContext(new r.Size(0,0)),this.reset({font:t,fontSize:i,backColors:n})}return e.prototype.destroy=function(){delete this._canvas,delete this._cache},e.prototype.canvas=function(){return this._canvas},e.prototype.reset=function(e){var t=this;this._renderParams=e,this._prices=[],this._cache.font=e.fontSize+"px "+e.font,this._labelWidth=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5","/"].reduce((function(e,i){var r=t._cache.measureText(i).width;return Math.max(r,e)}),0)},e.prototype.rowHeight=function(){return this._priceAxisFontSize+4},e.prototype.labelRectByIndex=function(e){return{left:0,top:Math.round(this._topByIndex(e)),width:Math.round(this._labelWidth+4),height:Math.round(this._renderParams.fontSize+8)}},e.prototype.setPrices=function(e){var t,i,o,s,a=this,l=!1;if(e.length!==this._prices.length)l=!0;else for(var c=0;c<this._prices.length;c++)if(t=this._prices[c],i=e[c],o=void 0,s=void 0,s=void 0===i,((o=void 0===t)||s)&&o!==s||Object(n.ensureDefined)(t).formatted!==Object(n.ensureDefined)(i).formatted){l=!0;break}if(l){var u=this._labelWidth+6,h=this._renderParams.fontSize,d=Math.max(e.length,22)*(h+8);this._recreateCanvasAndContext(new r.Size(u,d)),this._prices=e,this._cache.save(),Object(r.drawScaled)(this._cache,this._paneRenderParams.pixelRatio,(function(){a._cache.translate(.5,.5),a._cache.font=a._renderParams.fontSize+"px "+a._renderParams.font,a._cache.textBaseline="middle";for(var e=0;e<a._prices.length;e++)if(a._prices[e]){var t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"][e];a._cache.fillStyle=a._renderParams.backColors[e],a._cache.fillText(t,0,a._centerByIndex(e)),a._cache.fillText("/",0,a._centerByIndex(e+11))}})),this._cache.restore(),this._prices=e}},e.prototype._recreateCanvasAndContext=function(e){this._canvas=document.createElement("canvas"),this._canvas.width=e.w*this._paneRenderParams.pixelRatio,this._canvas.height=e.h*this._paneRenderParams.pixelRatio,this._cache=Object(n.ensureNotNull)(this._canvas.getContext("2d"))},e.prototype._centerByIndex=function(e){return Math.round((e+.5)*(this._renderParams.fontSize+8))},e.prototype._topByIndex=function(e){return Math.round(e*(this._renderParams.fontSize+8))},e}()},"2Fqk":function(e,t,i){"use strict";i.r(t),i.d(t,"CompareLegendView",(function(){return s}));var r=i("mrSG"),n=i("TrvT"),o=i("oxKA"),s=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._additional=null,
r._showStudyValues=i.properties().paneProperties.legendProperties.showStudyValues,r._showStudyValues.subscribe(r,r.update),r}return Object(r.__extends)(t,e),t.prototype.isValuesVisible=function(){return this._showStudyValues.value()},t.prototype.destroy=function(){this._showStudyValues.unsubscribeAll(this)},t.prototype.additional=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional},t.prototype._updateImpl=function(){var t=Object(o.getDataVendorString)(this._studyCompare.symbolInfo());this._additional=t?window.t("Data Provided by")+" "+t:null,e.prototype._updateImpl.call(this)},t}(n.CompareDataWindowView)},"2O5g":function(e,t,i){"use strict";i.r(t),i.d(t,"invokeAlertEditor",(function(){return h})),i.d(t,"invokeAlertEditorWithOnlineSeries",(function(){return p}));var r=i("mrSG"),n=i("PlME"),o=i("JUY+"),s=i("1UCy"),a=i("+slJ"),l=i("txPx"),c=i("Hpjb"),u=Object(l.getLogger)("Alerts.Price.InvokeAlertEditor");function h(e){var t=Object(n.shouldAbortAlertEditor)(e);if(null!==t)return t!==s.AlertEditorAbortReason.IsAlreadyPresent&&Object(n.showAbortExplainingDialog)(t,Object(n.getAlertDialogType)(e)),u.logWarn("Aborted: "+t),void(e.onAborted&&e.onAborted(t));var r=c.a.lockInvocation(e);Promise.all([Promise.all([i.e(60),i.e(38),i.e(64),i.e(84),i.e(188),i.e("alert-editor-impl")]).then(i.t.bind(null,"Hlqb",7)),Object(o.getPriceAlertsDispatcher)(),d(e,r)]).then((function(e){var t=e[0],i=e[1],r=e[2];new t.AlertEditor(i,r)}),r)}function d(e,t){return(e.series?Object(a.b)(e.series):Promise.resolve(!0)).then((function(i){var n=e.onDestroy,o=Object(r.__assign)(Object(r.__assign)({},e),{onDestroy:function(){t(),n&&n()}});return i||(delete o.series,delete o.value),o}))}function p(e){e.dataSourceHub?Object(n.ensureSeriesIsNotOffline)(e.dataSourceHub.mainSeries()).then((function(){h(e)})):h(e)}},"2OVc":function(e,t,i){"use strict";i.r(t),i.d(t,"InsertStudyCommand",(function(){return l}));var r=i("mrSG"),n=i("Eyy1"),o=i("wFwD"),s=i("RDU5"),a=i("JWMC"),l=function(e){function t(t,i,r,n,o,s,a,l,c,u,h){var d=e.call(this,h)||this;return d._studyId=null,d._chartModel=t,d._studyMetaInfo=i,d._props=n,d._addAsOverlay=o,d._parentId=null==s?null:s.id(),d._inputs=r,d._targetZOrder=u,d._preferredPriceScale=a,d._allowChangeCurrency=l,d._paneSize=c,d}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=null===this._parentId?void 0:this._chartModel.dataSourceForId(this._parentId),t=this._chartModel.insertStudyWithParams(this._studyMetaInfo,this._inputs,this._targetZOrder,this._props,this._addAsOverlay,e,this._preferredPriceScale,this._allowChangeCurrency,this._paneSize,null===this._studyId?void 0:this._studyId);this._studyId=t.id(),t.childStudyByRebind().subscribe(null,(function(){return Object(a.trackEvent)("SOS","Apply SOS","Rebind SOS")})),Object(o.trackStudies)(t,"add"),this._chartModel.setShouldBeSavedEvenIfHidden(!0)},t.prototype.undo=function(){var e=Object(n.ensureNotNull)(this._chartModel.dataSourceForId(Object(n.ensureNotNull)(this._studyId)));this._chartModel.removeSource(e)},
t.prototype.insertedStudy=function(){return this._chartModel.dataSourceForId(Object(n.ensureNotNull)(this._studyId))},t}(s.UndoCommand)},"2S76":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("hY0g"),s=i.n(o),a=i("+DwS"),l=i("dfhE"),c=i("8woN"),u=i.n(c),h=i("bKsZ"),d=i("NP3r"),p=["DJ","CBOE"];function f(e,t){return u.a.hasEodSymbols(e.full_name)||t===l.STATUS_EOD}function _(e){return void 0!==e&&e>0}function m(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=Object(n.ensureDefined)(window.pro),[4,new Promise((function(e){t.runOrUpdate(e)}))];case 1:return r.sent(),i=t.getProduct(function(e){return"exchange-"+e.pro_perm}(e)),(o=function(e){var t;if(!window.pro)throw new Error("Pro module not defined");var i=window.pro.getProductsByType(window.pro.PRODUCT_TYPES.exchange);t=i.find((function(t){return Boolean(t.included_exchanges&&t.included_exchanges.includes(e))}));return t||null}(i.exchange||""))&&"cme-full"===o.exchange?[2,i]:[2,o||i];case 2:return[2,null]}}))}))}var v=i("txPx"),g=i("Cf1E");i.d(t,"DataUpdatedModeModel",(function(){return S}));var y=Object(v.getLogger)("Chart.Definitions.Series");function b(e,t){var i=[];return _(e.delay)?(!function(e){return"index"===e.type&&p.includes(e.listed_exchange)}(e)?!function(e){return"MOEX"===e.listed_exchange&&!window.is_authenticated}(e)?!function(e){return"TFEX"===e.listed_exchange&&!window.is_authenticated}(e)?i.push("DelayToRealtime"):i.push("TFEXDelayForGuest"):i.push("MOEXDelayForGuest"):i.push("DelayNoRealtime"),i):f(e,t)?(i.push("EOD"),i):(function(e,t){return!(Object(d.enabled)(h.ProductFeatures.TICK_BY_TICK_PUSH_DATA)||_(e.delay)||f(e,t)||function(e){return"bitcoin"===e.type||"crypto"===e.type}(e))}(e,t)&&i.push("TickByTick"),function(e){return u.a.hasBatsSymbols(e.full_name)}(e)&&i.push("BATSToRealtime"),i)}var S=function(){function e(e,t,i){this._dataUpdatedModeStatus=new s.a(null),this._symbolInfo=Object(a.a)(e.getter,e.onChange),this._status=Object(a.a)(t.getter,t.onChange),this._symbolInfo.subscribe(this._update.bind(this)),this._status.subscribe(this._update.bind(this)),this._resetSubscription=i,this._resetSubscription.subscribe(this,this._resetStatus)}return e.prototype.destroy=function(){this._symbolInfo.destroy(),this._status.destroy(),this._resetSubscription.unsubscribeAll(this)},e.prototype.status=function(){return this._dataUpdatedModeStatus.readonly()},e.prototype.symbolName=function(){var e=this._symbolInfo.value();return null!==e?e.name:""},e.prototype.time=function(){var e=this._symbolInfo.value(),t=null!==e&&e.delay&&e.delay>0?e.delay:900;return Math.round(t/60)},e.prototype.listedExchange=function(){var e=this._symbolInfo.value();return null!==e?e.listed_exchange:""},e.prototype.description=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(null===(e=this._symbolInfo.value()))return[2,""];t={},r.label=1;case 1:
return r.trys.push([1,3,,4]),i=n.ensureNotNull,[4,m(e)];case 2:return t=i.apply(void 0,[r.sent()]),[3,4];case 3:return o=r.sent(),y.logWarn("Cannot get exchange "+Object(g.errorToString)(o)),[3,4];case 4:return[2,t.description||e.listed_exchange]}}))}))},e.prototype.exchange=function(){var e=this._symbolInfo.value();return null!==e?e.exchange:""},e.prototype._resetStatus=function(){this._dataUpdatedModeStatus.setValue(null)},e.prototype._update=function(){var e=this._symbolInfo.value();if(null!==e){var t=this._status.value();if("string"!=typeof t){if(t!==l.STATUS_LOADING&&t!==l.STATUS_RESOLVING){var i=b(e,t);0!==i.length?this._dataUpdatedModeStatus.setValue(i):this._dataUpdatedModeStatus.setValue(null)}}else this._dataUpdatedModeStatus.setValue(null)}else this._dataUpdatedModeStatus.setValue(null)},e}()},"2WC2":function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return p})),i.d(t,"a",(function(){return f}));var r=i("mrSG"),n=i("Eyy1"),o=i("aO4+"),s=i("f6yo"),a=i("VdBB"),l=i("tS10"),c=i("gBDZ"),u=i("zDbI"),h=i("ikwP"),d=function(){function e(e,t){void 0===t&&(t={skipRenderingOptimizations:!1}),this._height=void 0!==e.height?e.height:e.width,this._width=void 0!==e.width?e.width:e.height,this._items=[],this._barSpacing=0,this._textCache=t.textCache||new l.a(5e3),this._drawOperation=t.skipRenderingOptimizations?this._drawWithoutOptimizations.bind(this):this._drawWithOptimizations.bind(this),this._color=e.color,this._borderColor=e.borderColor,this._vertOffset=e.vertOffset||0,e.text&&(this._text=e.text,this._fontSize=e.fontSize,this._textColor=e.textColor,this._textAlign=e.textAlign||"center"),void 0!==e.items&&void 0!==e.barSpacing&&this.setData(e.items,e.barSpacing)}return e.prototype.draw=function(e,t){this._preDrawInit(),this._drawOperation(e,t)},e.prototype.hitTest=function(e){for(var t=a.HitTestResult.REGULAR,i=null,r=0,n=this._items;r<n.length;r++){var o=n[r];if(o){var l=this._calcBoundingBox(o);if(l&&Object(s.pointInBox)(e,l)){var c={tooltip:this._getTooltip(o,l)};i=new a.HitTestResult(t,c)}}}return i},e.prototype.setData=function(e,t){this._setBaseData(e,t)},e.prototype._calcBoundingBox=function(e){var t=e.vertOffset,i=this._getTextCache(e);if(i){var r=i.textImageWidth,n=i.textImageHeight,s=r/2,a=e.y+t+e.textVertOffset,l=t>0?0:-n,c=t>0?n:0,u=new o.Point(e.x-s,a+l),h=new o.Point(e.x+s,a+c);return Object(o.box)(u,h)}},e.prototype._unionBox=function(e,t){var i=Math.min(e.min.x,t.min.x),r=Math.max(e.max.x,t.max.x),n=Math.min(e.min.y,t.min.y),s=Math.max(e.max.y,t.max.y),a=new o.Point(i,n),l=new o.Point(r,s);return Object(o.box)(a,l)},e.prototype._getTooltip=function(e,t){if(e.tooltip)return{content:{type:"text",data:e.tooltip},tooltipDelay:200,extendMargin:!0,rect:{x:t.min.x,y:t.min.y,w:Math.abs(t.max.x-t.min.x),h:Math.abs(t.max.y-t.min.y)}}},e.prototype._setBaseData=function(e,t){this._items.length=0,this._barSpacing=t;for(var i=0,o=e;i<o.length;i++){
var s=o[i],a=void 0===s.width?Object(n.ensureDefined)(this._width):s.width,l=void 0===s.height?Object(n.ensureDefined)(this._height):s.height,c=void 0===s.vertOffset?this._vertOffset:s.vertOffset,u=c>0?l:-l;this._items.push(Object(r.__assign)({width:a,height:l,vertOffset:c,textVertOffset:u,shapeWidth:0,shapeHeight:0,stepX:0,stepY:0},s))}},e.prototype._drawItemText=function(e,t,i){var r=this._getTextCache(i);if(null!==r){var n,o=i.x,s=i.vertOffset,a=i.y+s+i.textVertOffset;n=i.style&&void 0!==i.style.textColor?i.style.textColor:this._textColor,r.paintTo(e,t,n,o,a,c.a.Center,s>0?c.c.Top:c.c.Bottom)}},e.prototype._drawWithOptimizations=function(e,t){for(var i,r,n=null,o=!1,s=0,a=this._items;s<a.length;s++){(u=a[s]).style&&void 0!==u.style.color?(i=u.style.color,r=u.style.borderColor):(i=this._color,r=this._borderColor),n!==i&&(n=i,o&&this._endPath(e),this._startPath(e,t,i,r)),this._drawItemShape(e,t,u),o=!0}o&&this._endPath(e);for(var l=0,c=this._items;l<c.length;l++){var u=c[l];this._drawItemText(e,t,u)}},e.prototype._drawWithoutOptimizations=function(e,t){for(var i,r,o=0,s=this._items;o<s.length;o++){var a=s[o],l=Object(n.ensureDefined)(a.style);i=Object(n.ensureDefined)(l.color),r=l.borderColor,this._startPath(e,t,i,r),this._drawItemShape(e,t,a),this._endPath(e),this._drawItemText(e,t,a)}},e.prototype._drawItemShape=function(e,t,i){var r=this;Object(h.drawScaled)(e,t.pixelRatio,(function(){return r._drawItemShapeUsingCSSPixels(e,i)}))},e.prototype._drawItemShapeUsingCSSPixels=function(e,t){},e.prototype._preDrawInit=function(){},e.prototype._startPath=function(e,t,i,r){},e.prototype._endPath=function(e){},e.prototype._getTextCache=function(e){var t=e.text||this._text,i=e.fontSize||this._fontSize,r=e.textAlign||this._textAlign;return this._textCache.get({text:t,bold:!1,italic:!1,font:u.CHART_FONT_FAMILY,fontSize:i,align:r})},e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._startPath=function(e,t,i,r){e.beginPath(),e.lineWidth=this._lineWidth(t),e.lineCap="butt",e.strokeStyle=i},t.prototype._endPath=function(e){e.stroke()},t.prototype._lineWidth=function(e){return Math.max(1,Math.floor(2*e.pixelRatio))},t}(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._startPath=function(e,t,i,r){e.beginPath(),e.lineWidth=this._lineWidth(t),e.lineCap="butt",e.fillStyle=i,e.strokeStyle=r},t.prototype._endPath=function(e){e.fill(),e.stroke()},t.prototype._lineWidth=function(e){return Math.max(1,Math.floor(e.pixelRatio))},t}(d)},"2bPF":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("7KDR").Action,o=i("Ocx9").DefaultProperty,s=i("k9/m").PlotRowSearchMode,a=i("Ye2/").LineToolBarsPatternMode,l=window.t("Bars Pattern");function c(e,t){this._constructor="LineToolBarsPattern";var n=t||c.createProperties();r.call(this,e,n),n.mirrored.listeners().subscribe(this,c.prototype.mirror),n.flipped.listeners().subscribe(this,c.prototype.flip),this._scaleCoeff=1,this.version=c.version,
this._pattern=[],this._properties.mode.listeners().subscribe(this,c.prototype.onModeChanged),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("c6sA").BarsPatternPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(c,r),c.version=2,c.prototype.isSynchronizable=function(){return!1},c.prototype.onModeChanged=function(){var e=this.patternPriceDiff();e*=this._pressCoeff,this._points[1].price=this._timePoint[1].price=this._points[0].price+e},c.prototype.additionalActions=function(e){var t=this;return[new n({checked:this.properties().mirrored.value(),checkable:!0,label:window.t("Mirrored"),payload:{target:this},onExecute:function(t){var i=t.getPayload().target;e.setProperty(i.properties().mirrored,!i.properties().mirrored.value(),"Bats Pattern Mirroring"),i.updateAllViews(),i._model.updateSource(i)}}),new n({checked:this.properties().flipped.value(),checkable:!0,label:window.t("Flipped"),payload:{target:this},onExecute:function(t){var i=t.getPayload().target;e.setProperty(i.properties().flipped,!i.properties().flipped.value(),"Bats Pattern Flipping"),i.updateAllViews(),i._model.updateSource(i)}}),new n({checkable:!0,label:window.t("Restore Size"),onExecute:function(i){var r=t.points()[0],n=t.patternPriceDiff(),o=r.price+n,s=r.index+t._pattern.length-1;e.startChangingLinetool(t,{price:o,index:s},1,{}),e.changeLinePoint({price:o,index:s},{}),e.endChangingLinetool()}})]},c.prototype.pointsCount=function(){return 2},c.prototype.state=function(e){var t=r.prototype.state.call(this,e);return t.pattern=this._pattern,t},c.prototype.restoreData=function(e){e.pattern&&(this._pattern=e.pattern)},c.prototype.translatedType=function(){return l},c.prototype.name=function(){return"Bars Pattern"},c.prototype.hasEditableCoordinates=function(){return!1},c.prototype.cloneData=function(e){this._pattern=TradingView.clone(e._pattern)},c.prototype.mirror=function(){for(var e=this._pattern,t=e[0][TradingView.HIGH_PLOT],i=Math.min(e[0][TradingView.LOW_PLOT],e[0][TradingView.HIGH_PLOT]),r=Math.max(e[0][TradingView.LOW_PLOT],e[0][TradingView.HIGH_PLOT]),n=1;n<e.length;n++)i=Math.min(i,e[n][TradingView.LOW_PLOT]),r=Math.max(r,e[n][TradingView.HIGH_PLOT]);if(i<r){var o=(i+r)/2,s=function(e){return o-(e-o)};for(n=0;n<e.length;n++)e[n][TradingView.HIGH_PLOT]=s(e[n][TradingView.HIGH_PLOT]),e[n][TradingView.LOW_PLOT]=s(e[n][TradingView.LOW_PLOT]),e[n][TradingView.OPEN_PLOT]=s(e[n][TradingView.OPEN_PLOT]),e[n][TradingView.CLOSE_PLOT]=s(e[n][TradingView.CLOSE_PLOT])}var a=e[0][TradingView.HIGH_PLOT]-t,l=e[e.length-1][TradingView.LOW_PLOT]-e[0][TradingView.HIGH_PLOT];this._points[0].price+=a,this._points[1].price=this._points[0].price+l,this.updateAllViews()},c.prototype.flip=function(){this._points[0].price=this._points[1].price;for(var e=0;e<this._pattern.length/2;e++){var t=this._pattern[e];this._pattern[e]=this._pattern[this._pattern.length-e-1],this._pattern[this._pattern.length-e-1]=t}
var i=this._pattern[this._pattern.length-1][TradingView.LOW_PLOT]-this._pattern[0][TradingView.HIGH_PLOT];this._points[1].price=this._points[0].price+i,this.updateAllViews()},c.prototype.firstPatternPrice=function(){var e=parseInt(this.properties().mode.value(),10);if(e===a.LineHL2)return(this._pattern[0][TradingView.HIGH_PLOT]+this._pattern[0][TradingView.LOW_PLOT])/2;var t={0:TradingView.HIGH_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.OPEN_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT}[e];return this._pattern[0][t]},c.prototype.lastPatternPrice=function(){var e=parseInt(this.properties().mode.value(),10);if(e===a.LineHL2)return(this._pattern[this._pattern.length-1][TradingView.HIGH_PLOT]+this._pattern[this._pattern.length-1][TradingView.LOW_PLOT])/2;var t={0:TradingView.LOW_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.CLOSE_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT}[e];return this._pattern[this._pattern.length-1][t]},c.prototype.patternPriceDiff=function(){return this.lastPatternPrice()-this.firstPatternPrice()},c.prototype.pressCoeff=function(){var e=this.patternPriceDiff(),t=this.points()[0].price,i=(this.points()[1].price-t)/e;return this._pressCoeff=i,i},c.prototype.addPoint=function(e,t){var i=this._model.mainSeries(),n=i.nearestIndex(e.index,s.NearestRight);this.properties().mode.value()===a.Bars?e.price=i.bars().valueAt(n)[TradingView.HIGH_PLOT]:e.price=i.bars().valueAt(n)[TradingView.CLOSE_PLOT];var o=this.priceScale(),l=this.ownerSource().firstValue(),c=.05*o.height(),u=o.priceToCoordinate(e.price,l)-c;e.price=o.coordinateToPrice(u,l);var h=r.prototype.addPoint.call(this,e,t,!0);if(h){var d=Math.min(this.points()[0].index,this.points()[1].index),p=Math.max(this.points()[0].index,this.points()[1].index),f=(n=this._model.mainSeries().nearestIndex(d,s.NearestRight),this._model.mainSeries().nearestIndex(p,s.NearestLeft));this.points()[0].index>this.points()[1].index&&(this._points[0].price=this._points[1].price),this._pattern=[];for(var _=n;_<=f;_++){var m=this._model.mainSeries().data().valueAt(_);this._pattern.push(TradingView.clone(m))}if(this._pattern.length>0){var v=this.patternPriceDiff();this._points[1].price=this._points[0].price+v,this._points[1].index=this._points[0].index+(f-n),this.normalizePoints(),this.createServerPoints()}}return h},c.prototype.setPoint=function(e,t,i){1===e&&t.index<=this._points[0].index&&(t.index=this._points[0].index+1),0===e&&t.index>=this._points[1].index&&(t.index=this._points[1].index-1),r.prototype.setPoint.call(this,e,t,i)},c.prototype.migrateVersion=function(e,t,i){if(1===e&&this._pattern.length>0){var r=this.patternPriceDiff();2===this._timePoint.length&&(this._timePoint[1].price=this._timePoint[0].price+r),2===this._points.length&&(this._points[1].price=this._points[0].price+r)}},c.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("8ioM").BarsPatternDefinitionsViewModel
}.bind(null,i)).catch(i.oe)},c.createProperties=function(e){var t=new o("linetoolbarspattern",e);return c._configureProperties(t),t},c._configureProperties=function(e){r._configureProperties(e),e.addExclusion("mirrored"),e.addExclusion("flipped")},t.LineToolBarsPattern=c},"2h0C":function(e,t,i){var r=i("txPx").getLogger("Chart.PropertyPage.Binding");function n(e,t,i,n,o,s){e?(this._control=e,this._property=t,this._applyOnFly=i,this._undoModel=n,this._undoText=o,this._doesNotAffectSave=!1,t&&(this._formatters=[],this._changed=!1,this.setValue(t.value()),t.listeners().subscribe(this,this.propertyChanged))):r.logDebug("Missing control")}n.prototype.addFormatter=function(e){this._formatters.push(e),this.setValue(this._property.value())},n.prototype._formatValue=function(e){return this._formatters.reduce((function(e,t){return t(e)}),e)},n.prototype._setValueToProperty=function(e){this._setter?this._setter.call(this,e):this.setValueToProperty(e)},n.prototype._attachToControl=function(e,t){var i=this;t?e.on("keyup change input",(function(e){var t=i.value();i._setValueToProperty(t),i.setValue(t)})):(e.keypress((function(e){if(i._changed=!0,13===e.which){var t=i.value();i._setValueToProperty(t),i.setValue(t)}})),e.focusout((function(e){var t=i.value();i.changed()&&(i._setValueToProperty(t),i.setValue(t))})),e.change((function(e){var t=i.value();$(e.target).is(".ticker")?(void 0!==i._changeTimerId&&clearTimeout(i._changeTimerId),i._changeTimerId=setTimeout((function(){i._setValueToProperty(t)}),250)):i._setValueToProperty(t),i.setValue(t)})))},n.prototype.control=function(){return this._control},n.prototype.changed=function(){return this._changed},n.prototype.setValueToProperty=function(e){this._undoModel.setProperty(this._property,e,this._undoText,this._doesNotAffectSave),this._changed=!1},n.prototype.property=function(){return this._property},n.prototype.propertyChanged=function(e){this.setValue(e.value())},n.prototype.destroy=function(){this._property&&this._property.listeners().unsubscribe(this,this.propertyChanged)},n.prototype.disableAffectingSave=function(){this._doesNotAffectSave=!0},t.Binding=n},"2ijp":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("l4sv"),n=i("8Uy/"),o=function(){function e(){this._lineRendererData={y:0,color:"rgba(0, 0, 0, 0)",linewidth:1,linestyle:n.LINESTYLE_SOLID,visible:!1},this._lineRenderer=new r.HorizontalLineRenderer,this._invalidated=!0,this._lineRenderer.setData(this._lineRendererData)}return e.prototype.update=function(){this._invalidated=!0},e.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._lineRenderer},e}()},"2jAL":function(e,t,i){"use strict";i.r(t),i.d(t,"SwapChartsUndoCommand",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i,r){var n=e.call(this,"Swap Charts in the Layout")||this;return n._swapper=t,n._from=i,n._to=r,n}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._swapper(this._from,this._to)},t.prototype.undo=function(){this._swapper(this._from,this._to)},t
}(i("RDU5").UndoCommand)},"2kV1":function(e,t,i){"use strict";i.r(t),i.d(t,"StudyStatusView",(function(){return c}));var r=i("mrSG"),n=i("+GxX"),o=i("nBJD"),s=i("8sOK"),a={NONE:"Default"},l=Object(n.isFeatureEnabled)("hide_exchange_in_inputs"),c=function(e){function t(t,i){var r=e.call(this,i)||this;return r._source=t,r}return Object(r.__extends)(t,e),t.prototype.color=function(){return this._source instanceof s.StudyStub?e.prototype.color.call(this):this._source.isFailed()||this._source.metaInfo&&this._source.metaInfo().isTVScriptStub?"#ff0000":e.prototype.color.call(this)},t.prototype.getSplitTitle=function(){return this._source.titleInParts(!0,a,void 0,l)},t.prototype.update=function(){this._source.isFailed()?this._text=this._source.title(!0,a,void 0,l)+": "+this._source.status():this._text=this._source.title(!0,a,void 0,l)+" "+this._source.status()},t}(o.a)},"2tp3":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return u}));var r,n,o=i("tqok"),s=i("hsV8");function a(e,t){if(e.x1>=t.length||e.x2>=t.length)return null;var i=t[e.x1],r=t[e.x2];return i===o.INVALID_TIME_POINT_INDEX||r===o.INVALID_TIME_POINT_INDEX?null:{x1:i,y1:e.y1,x2:r,y2:e.y2,style:e.st,extend:e.ex,width:e.w,colorIndex:e.ci}}function l(e,t,i){var r=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.x1)),n=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.x2));return{id:t,x1:r,y1:e.y1,x2:n,y2:e.y2,st:e.style,ex:e.extend,w:e.width,ci:e.colorIndex}}!function(e){e.Solid="sol",e.Dotted="dot",e.Dashed="dsh",e.LeftArrow="al",e.RightArrow="ar",e.BothArrow="ab"}(r||(r={})),function(e){e.None="n",e.Left="l",e.Right="r",e.Both="b"}(n||(n={}));var c=new Map([[r.Solid,{dashPattern:[],drawLeftArrow:!1,drawRightArrow:!1}],[r.Dashed,{dashPattern:[5,6],drawLeftArrow:!1,drawRightArrow:!1}],[r.Dotted,{dashPattern:[1,2],drawLeftArrow:!1,drawRightArrow:!1}],[r.LeftArrow,{dashPattern:[],drawLeftArrow:!0,drawRightArrow:!1}],[r.RightArrow,{dashPattern:[],drawLeftArrow:!1,drawRightArrow:!0}],[r.BothArrow,{dashPattern:[],drawLeftArrow:!0,drawRightArrow:!0}]]);function u(e){return c.get(e)}},"2vAl":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){o.default.trackGoPro("Gopro Features",e,t)};var r,n=i("WZy5"),o=(r=n)&&r.__esModule?r:{default:r};e.exports=t.default},"3/8U":function(e,t,i){"use strict";function r(e){return"dark"===e?"rgba(30,136,229,0.25)":"rgba(33,150,243,0.25)"}i.r(t),i.d(t,"axesHighlightColor",(function(){return r}))},"35Sq":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M17.5 7H17v6h-3v-3H9v6H5v6h17V7h-4.5zm.5 14h3V8h-3v13zm-1 0v-7h-3v7h3zm-4-7.5V21h-3V11h3v2.5zM9 21v-4H6v4h3z"/></svg>'},"38az":function(e,t,i){"use strict";var r=i("k9/m").PlotRowSearchMode;function n(){this.backColorers=[]}function o(e){n.call(this),this._series=e}function s(e,t){n.call(this),
this._study=e,this._plotIndex=t}n.prototype.barStyle=function(e,t,i){for(var r={},n=this.backColorers.length-1;n>=0;n--)this.backColorers[n].applyBarStyle(e,t,r,i);return this.applyBarStyle(e,t,r,i),r},n.prototype.pushBackBarColorer=function(e){this.backColorers.push(e)},n.prototype.applyBarStyle=function(e,t,i){throw new Error("This function is supposed to be reimplemented in a subclass")},inherit(o,n),o.upColor=function(e,t){var i=e.style.value();switch(i){case TradingView.Series.STYLE_LINE:return e.lineStyle.color.value();case TradingView.Series.STYLE_AREA:return e.areaStyle.linecolor.value();case TradingView.Series.STYLE_BARS:return e.barStyle.upColor.value();case TradingView.Series.STYLE_CANDLES:return e.candleStyle.upColor.value();case TradingView.Series.STYLE_HOLLOW_CANDLES:return e.hollowCandleStyle.upColor.value();case TradingView.Series.STYLE_HEIKEN_ASHI:return e.haStyle.upColor.value();case TradingView.Series.STYLE_BASELINE:return e.baselineStyle.topLineColor.value();case TradingView.Series.STYLE_HILO:return e.hiloStyle.color.value()}switch(i){case TradingView.Series.STYLE_RENKO:return t?e.renkoStyle.upColorProjection.value():e.renkoStyle.upColor.value();case TradingView.Series.STYLE_PB:return t?e.pbStyle.upColorProjection.value():e.pbStyle.upColor.value();case TradingView.Series.STYLE_KAGI:return t?e.kagiStyle.upColorProjection.value():e.kagiStyle.upColor.value();case TradingView.Series.STYLE_PNF:return t?e.pnfStyle.upColorProjection.value():e.pnfStyle.upColor.value()}if(TradingView.Series.STYLE_RANGE===i)return t?e.rangeStyle.upColorProjection.value():e.rangeStyle.upColor.value();throw new Error("Unknown series style")},o.downColor=function(e,t){var i=e.style.value();switch(i){case TradingView.Series.STYLE_LINE:return e.lineStyle.color.value();case TradingView.Series.STYLE_AREA:return e.areaStyle.linecolor.value();case TradingView.Series.STYLE_BARS:return e.barStyle.downColor.value();case TradingView.Series.STYLE_CANDLES:return e.candleStyle.downColor.value();case TradingView.Series.STYLE_HOLLOW_CANDLES:return e.hollowCandleStyle.downColor.value();case TradingView.Series.STYLE_HEIKEN_ASHI:return e.haStyle.downColor.value();case TradingView.Series.STYLE_BASELINE:return e.baselineStyle.bottomLineColor.value();case TradingView.Series.STYLE_HILO:return e.hiloStyle.color.value()}switch(i){case TradingView.Series.STYLE_RENKO:return t?e.renkoStyle.downColorProjection.value():e.renkoStyle.downColor.value();case TradingView.Series.STYLE_PB:return t?e.pbStyle.downColorProjection.value():e.pbStyle.downColor.value();case TradingView.Series.STYLE_KAGI:return t?e.kagiStyle.downColorProjection.value():e.kagiStyle.downColor.value();case TradingView.Series.STYLE_PNF:return t?e.pnfStyle.downColorProjection.value():e.pnfStyle.downColor.value()}if(TradingView.Series.STYLE_RANGE===i)return t?e.rangeStyle.downColorProjection.value():e.rangeStyle.downColor.value();throw new Error("Unknown series style")},o.prototype._applyLineStyle=function(e,t,i,r,n){i.barColor=o.upColor(n)},o.prototype._applyAreaStyle=function(e,t,i,r,n){
i.barColor=o.upColor(n)},o.prototype._applyBarStyle=function(e,t,i,r,n){var s=o.upColor(n),a=o.downColor(n),l=this.findBar(e,!1,r);if(n.barStyle.barColorsOnPrevClose.value()){var c=this.findPrevBar(e,!1,r);i.barColor=c[TradingView.CLOSE_PLOT]<=l[TradingView.CLOSE_PLOT]?s:a,i.barBorderColor=c[TradingView.CLOSE_PLOT]<=l[TradingView.CLOSE_PLOT]?s:a}else i.barColor=l[TradingView.OPEN_PLOT]<=l[TradingView.CLOSE_PLOT]?s:a,i.barBorderColor=l[TradingView.OPEN_PLOT]<=l[TradingView.CLOSE_PLOT]?s:a},o.prototype._applyRangeStyle=function(e,t,i,r,n){var s=o.upColor(n,t),a=o.downColor(n,t),l=this.findBar(e,!1,r);i.barColor=l[TradingView.OPEN_PLOT]<=l[TradingView.CLOSE_PLOT]?s:a,i.barBorderColor=i.barColor},o.prototype._applyCandleStyle=function(e,t,i,r,n){var s,a=o.upColor(n,t),l=o.downColor(n,t),c=n.candleStyle.borderUpColor?n.candleStyle.borderUpColor.value():n.candleStyle.borderColor.value(),u=n.candleStyle.borderDownColor?n.candleStyle.borderDownColor.value():n.candleStyle.borderColor.value(),h=n.candleStyle.wickUpColor?n.candleStyle.wickUpColor.value():n.candleStyle.wickColor.value(),d=n.candleStyle.wickDownColor?n.candleStyle.wickDownColor.value():n.candleStyle.wickColor.value(),p=this.findBar(e,!1,r);n.candleStyle.barColorsOnPrevClose.value()?s=this.findPrevBar(e,!1,r)[TradingView.CLOSE_PLOT]<=p[TradingView.CLOSE_PLOT]:s=p[TradingView.OPEN_PLOT]<=p[TradingView.CLOSE_PLOT];i.barColor=s?a:l,i.barBorderColor=s?c:u,i.barWickColor=s?h:d},o.prototype._applyHollowCandleStyle=function(e,t,i,r,n){var s=o.upColor(n,t),a=o.downColor(n,t),l=n.hollowCandleStyle.borderUpColor?n.hollowCandleStyle.borderUpColor.value():n.hollowCandleStyle.borderColor.value(),c=n.hollowCandleStyle.borderDownColor?n.hollowCandleStyle.borderDownColor.value():n.hollowCandleStyle.borderColor.value(),u=n.hollowCandleStyle.wickUpColor?n.hollowCandleStyle.wickUpColor.value():n.hollowCandleStyle.wickColor.value(),h=n.hollowCandleStyle.wickDownColor?n.hollowCandleStyle.wickDownColor.value():n.hollowCandleStyle.wickColor.value(),d=this.findBar(e,!1,r);this.findPrevBar(e,!1,r)[TradingView.CLOSE_PLOT]<=d[TradingView.CLOSE_PLOT]?(i.barColor=s,i.barBorderColor=l,i.barWickColor=u):(i.barColor=a,i.barBorderColor=c,i.barWickColor=h),i.isBarHollow=d[TradingView.OPEN_PLOT]<=d[TradingView.CLOSE_PLOT]},o.prototype._applyHAStyle=function(e,t,i,r,n){var s,a=o.upColor(n,t),l=o.downColor(n,t),c=n.haStyle.borderUpColor.value(),u=n.haStyle.borderDownColor.value(),h=n.haStyle.wickUpColor.value(),d=n.haStyle.wickDownColor.value(),p=this.findBar(e,t,r);n.haStyle.barColorsOnPrevClose.value()?s=this.findPrevBar(e,t,r)[TradingView.CLOSE_PLOT]<=p[TradingView.CLOSE_PLOT]:s=p[TradingView.OPEN_PLOT]<=p[TradingView.CLOSE_PLOT];i.barColor=s?a:l,i.barBorderColor=s?c:u,i.barWickColor=s?h:d},o.prototype._applyRenkoStyle=function(e,t,i,r,n){
var s=this.findBar(e,t,r),a=s[TradingView.OPEN_PLOT]<=s[TradingView.CLOSE_PLOT],l=o.upColor(n,t),c=o.downColor(n,t),u=t?n.renkoStyle.borderUpColorProjection.value():n.renkoStyle.borderUpColor.value(),h=t?n.renkoStyle.borderDownColorProjection.value():n.renkoStyle.borderDownColor.value(),d=n.renkoStyle.wickUpColor.value(),p=n.renkoStyle.wickDownColor.value();i.barColor=a?l:c,i.barBorderColor=a?u:h,i.barWickColor=a?d:p,i.isBarUp=a},o.prototype._applyPBStyle=function(e,t,i,r,n){i.barColor=o.upColor(n);var s=this.findBar(e,t,r),a=s[TradingView.OPEN_PLOT]<=s[TradingView.CLOSE_PLOT],l=o.upColor(n,t),c=o.downColor(n,t),u=t?n.pbStyle.borderUpColorProjection.value():n.pbStyle.borderUpColor.value(),h=t?n.pbStyle.borderDownColorProjection.value():n.pbStyle.borderDownColor.value();i.barColor=a?l:c,i.barBorderColor=a?u:h,i.isBarUp=a},o.prototype._applyKagiStyle=function(e,t,i,r,n){i.upColor=o.upColor(n,t),i.downColor=o.downColor(n,t);var s=null,a=this.findBar(e,t,r);a[TradingView.LOW_PLOT]<a[TradingView.ADT_PLOT]&&a[TradingView.ADT_PLOT]<a[TradingView.HIGH_PLOT]?(s=a[TradingView.OPEN_PLOT]<=a[TradingView.CLOSE_PLOT],i.isTwoColorBar=!0):(s=a[TradingView.OPEN_PLOT]<=a[TradingView.CLOSE_PLOT]?a[TradingView.OPEN_PLOT]===a[TradingView.ADT_PLOT]:a[TradingView.OPEN_PLOT]!==a[TradingView.ADT_PLOT],i.isTwoColorBar=!1),i.barColor=s?i.upColor:i.downColor,i.isBarUp=a[TradingView.OPEN_PLOT]<=a[TradingView.CLOSE_PLOT]},o.prototype._applyPnfStyle=function(e,t,i,r,n){var s=this.findBar(e,t,r)[TradingView.ADT_PLOT],a=s>0,l=o.upColor(n,t),c=o.downColor(n,t);i.isBarUp=a,i.isMergedBar=2===Math.abs(s),i.upColor=l,i.downColor=c,i.barColor=a?l:c},o.prototype._applyBaseLineStyle=function(e,t,i,r,n){var s=this.findBar(e,t,r),a=n.baselineStyle,l=this._series.priceScale(),c=Math.round(l.height()*(Math.abs(100-a.baseLevelPercentage.value())/100)),u=this._series.firstValue(),h=l.coordinateToPrice(c,u);s[TradingView.CLOSE_PLOT]>h?i.barColor=o.upColor(n,t):i.barColor=o.downColor(n,t)},o.prototype._applyHiLoStyle=function(e,t,i,r,n){i.barColor=o.upColor(n,t),i.barBorderColor=n.hiloStyle.borderColor.value()},o.prototype.applyBarStyle=function(e,t,i,r){i||(i={}),i.barColor=null,i.barBorderColor=null,i.barWickColor=null,i.isBarHollow=null,i.isBarUp=null,i.upColor=null,i.downColor=null,i.isTwoColorBar=null,i.isMergedBar=null;var n=this._series.properties(),o=n.style.value();switch(o){case TradingView.Series.STYLE_LINE:this._applyLineStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_AREA:this._applyAreaStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_BARS:this._applyBarStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_CANDLES:this._applyCandleStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_HOLLOW_CANDLES:this._applyHollowCandleStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_HEIKEN_ASHI:this._applyHAStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_BASELINE:this._applyBaseLineStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_HILO:this._applyHiLoStyle(e,t,i,r,n)}switch(o){case TradingView.Series.STYLE_RENKO:this._applyRenkoStyle(e,t,i,r,n)
;break;case TradingView.Series.STYLE_PB:this._applyPBStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_KAGI:this._applyKagiStyle(e,t,i,r,n);break;case TradingView.Series.STYLE_PNF:this._applyPnfStyle(e,t,i,r,n)}return TradingView.Series.STYLE_RANGE===o&&this._applyRangeStyle(e,t,i,r,n),i},o.prototype.getSeriesBars=function(e){return e?this._series.nsBars():this._series.bars()},o.prototype._findBarFieldValue=function(e,t,i){var r=this.getSeriesBars(i).valueAt(e);if(null!==r)return r[t]},o.prototype.findBar=function(e,t,i){return i?i.value:this.getSeriesBars(t).valueAt(e)||[]},o.prototype.findPrevBar=function(e,t,i){if(i&&i.previousValue)return i.previousValue;var n=this._series.bars()._search(e,r.Exact);return null!==n&&n>0?this._series.bars()._valueAt(n-1):[]},inherit(s,n),s.prototype.getBars=function(){return this._study.series().bars()},s.prototype.firstColoredBar=function(e){for(var t=e,i=0;i<this.backColorers.length;i++)t=Math.min(t,this.backColorers[i].firstColoredBar(e));var r=this.getOffset(this._plotIndex);t=Math.min(t,e+r);var n=this.getBars().firstIndex();return Math.max(t,n)},s.prototype.getOffset=function(){var e=this._study.metaInfo().plots[this._plotIndex];return this._study.offset(e.id)},s.prototype.applyBarStyle=function(e,t,i){if(i||(i={}),t)return i;var r=this._study.properties();if(!r.visible.value())return i;var n=this._study.metaInfo(),o=this._study.data();if(!o||0===o.size())return i;var s=n.plots[this._plotIndex],a=this.getOffset();if(this._study.getMinFirstBarIndexForPlot(s.id)>e+a)return i;var l=r.styles[s.id];if(l.visible&&!l.visible.value())return i;var c=o.valueAt(e-a);if(null===c)return i;var u=c[this._plotIndex+1];if(null==u)return i;u=Math.round(u);var h=n.plots[this._plotIndex].palette,d=r.palettes[h],p=n.palettes[h].valToIndex?n.palettes[h].valToIndex[u]:u,f=d.colors[p].color.value();return i.barColor=f,i.upColor=f.color,i.downColor=f.color,i},t.SeriesBarColorer=o,t.StudyBarColorer=s},"3ClC":function(e,t,i){"use strict";i.r(t);var r=i("0YCj"),n=i.n(r),o=i("GVHu"),s=i("k5SP"),a=i("Ai40"),l=i("PlrB"),c=i("Pb0m"),u=i("mrSG"),h=i("tqok"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.__extends)(t,e),t.prototype.startIndex=function(){var e=this.customData();if(null==e||null==this._indexes)return null;var t=this._indexes[e.startIndex];return t!==h.INVALID_TIME_POINT_INDEX?t:null},t.prototype.endIndex=function(){var e=this.customData();if(null==e||null==this._indexes)return null;var t=this._indexes[e.endIndex];return t!==h.INVALID_TIME_POINT_INDEX?t:null},t.prototype.baseLine=function(){var e=this.customData();return null!=e?e.baseLine:null},t.prototype.downLine=function(){var e=this.customData();return null!=e?e.downLine:null},t.prototype.upLine=function(){var e=this.customData();return null!=e?e.upLine:null},t.prototype.pearsons=function(){var e=this.customData();return null!=e&&void 0!==e.pearsons?e.pearsons:null},t.prototype.isVisible=function(){if(!this.properties().visible.value())return!1;var e=this.properties().styles
;return e.upLine.visible.value()||e.downLine.visible.value()||e.baseLine.visible.value()},t.prototype.createViews=function(){var t=this;e.prototype.createViews.call(this),Promise.all([i.e(98),i.e(213),i.e("study-pane-views")]).then(function(e){var r=i("rvCT").LinearRegressionPaneView;t._setPaneViews([new r(t.model(),t)])}.bind(null,i)).catch(void 0)},t}(i("Qq0B").NonSeriesStudy),p=i("qx3g"),f=i("Eyy1"),_=i("Qb4w");var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.__extends)(t,e),t.prototype.priceRange=function(e,t){var i=this,r=!1;this.graphics().hhists().forEach((function(e,t){r=r||i.properties().child("graphics").child("hhists").child(t).child("showValues").value()}));var n=function(e,t,i,r){var n=null;return e.forEach((function(e,r){e.forEach((function(e){e.firstBarTime<=i&&e.lastBarTime>=t&&(null===n?n={low:{l:e.priceLow,h:e.priceHigh},high:{h:e.priceHigh}}:(e.priceLow<n.low.l&&(n.low.l=e.priceLow,n.low.h=e.priceHigh),n.high.h=Math.max(n.high.h,e.priceHigh)))}))})),null===n?null:r?new _.PriceRange(n.low.l-.8*(n.low.h-n.low.l),n.high.h):new _.PriceRange(n.low.l,n.high.h)}(this.graphics().hhists(),e,t,r);if(null===n)return null;var o=Object(f.ensureNotNull)(this.priceScale());return o.isLog()?new _.PriceRange(o.priceToLogical(n.minValue()),o.priceToLogical(n.maxValue())):n},t}(o.Study),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.__extends)(t,e),t}(m),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.__extends)(t,e),t}(m),y=i("xlAu"),b=i("k9/m"),S=i("cBZt"),w=i("ZAxB"),P=i("gvrv"),C=i("w4Ji"),T=i("jenN"),x=function(){function e(e,t){this._rough=e,this._detailed=t}return e.prototype.forEach=function(e,t){var i=this;this._mostDetailedHorizLines().forEach((function(r){e.call(t,r,r,i)}))},e.prototype.has=function(e){var t=!1;return this._mostDetailedHorizLines().forEach((function(i){t=t||i===e})),t},Object.defineProperty(e.prototype,"size",{get:function(){return this._rough.size},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){throw new Error("Not implemented")},e.prototype.entries=function(){throw new Error("Not implemented")},e.prototype.keys=function(){throw new Error("Not implemented")},e.prototype.values=function(){throw new Error("Not implemented")},e.prototype._mostDetailedHorizLines=function(){var e=new Map;this._rough.forEach((function(t){return e.set(t.startIndex,t)}));for(var t=this._detailed.length-1;t>=0;t--){this._detailed[t].forEach((function(t){e.has(t.startIndex)&&e.set(t.startIndex,t)}))}return e},e}(),I=function(){function e(e,t){this._roughHorizLineSets=e,this._detailedHorizLineSets=t}return e.prototype.forEach=function(e,t){var i=this;this._roughHorizLineSets.forEach((function(r,n){e.call(t,Object(f.ensureDefined)(i.get(n)),n,i)}))},e.prototype.get=function(e){if(this._roughHorizLineSets.has(e))return new x(Object(f.ensureDefined)(this._roughHorizLineSets.get(e)),this._detailedHorizLineSets.map((function(t){return t.get(e)})).filter((function(e){
return void 0!==e})))},e.prototype.has=function(e){return this._roughHorizLineSets.has(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._roughHorizLineSets.size},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){throw new Error("Not implemented")},e.prototype.entries=function(){throw new Error("Not implemented")},e.prototype.keys=function(){throw new Error("Not implemented")},e.prototype.values=function(){throw new Error("Not implemented")},e}(),E=function(){function e(e,t){this._rough=e,this._detailed=t}return e.prototype.forEach=function(e,t){var i=this;this._rough.forEach((function(r,n){for(var o=0,s=i._detailed;o<s.length;o++){var a=s[o].get(n);if(void 0!==a)return void e.call(t,a,n,i)}e.call(t,r,n,i)}))},e.prototype.get=function(e){for(var t=0,i=this._detailed;t<i.length;t++){var r=i[t].get(e);if(void 0!==r)return r}return this._rough.get(e)},e.prototype.has=function(e){for(var t=0,i=this._detailed;t<i.length;t++){if(i[t].has(e))return!0}return this._rough.has(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._rough.size},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){throw new Error("Not implemented")},e.prototype.entries=function(){throw new Error("Not implemented")},e.prototype.keys=function(){throw new Error("Not implemented")},e.prototype.values=function(){throw new Error("Not implemented")},e}(),L=function(){function e(e,t){this._graphics=e,this._styleId=t}return e.prototype.forEach=function(e,t){var i=this;this._graphics.hhistsByTimePointIndex().forEach((function(r){r.forEach((function(r){if(r.styleId===i._styleId){var n={firstBarTime:r.firstBarTime,lastBarTime:r.lastBarTime,rate:r.rate,priceHigh:r.priceHigh,priceLow:r.priceLow};e.call(t,n,n,i)}}))}))},e.prototype.has=function(e){var t=this,i=!1;return this._graphics.hhistsByTimePointIndex().forEach((function(r){r.forEach((function(r){r.styleId===t._styleId&&r===e&&(i=!0)}))})),i},Object.defineProperty(e.prototype,"size",{get:function(){var e=this,t=0;return this._graphics.hhistsByTimePointIndex().forEach((function(i){i.forEach((function(i){i.styleId===e._styleId&&t++}))})),t},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){throw new Error("Not implemented")},e.prototype.entries=function(){throw new Error("Not implemented")},e.prototype.keys=function(){throw new Error("Not implemented")},e.prototype.values=function(){throw new Error("Not implemented")},e}(),O=function(){function e(e,t){this._graphicsInfo=e,this._graphics=t}return e.prototype.forEach=function(e,t){if(void 0!==this._graphicsInfo.hhists)for(var i=0,r=Object.keys(this._graphicsInfo.hhists);i<r.length;i++){var n=r[i];e.call(t,Object(f.ensureDefined)(this.get(n)),n,this)}},e.prototype.get=function(e){if(void 0!==this._graphicsInfo.hhists)return new L(this._graphics,e)},e.prototype.has=function(e){return void 0!==this._graphicsInfo.hhists&&e in this._graphicsInfo.hhists},Object.defineProperty(e.prototype,"size",{get:function(){
return void 0===this._graphicsInfo.hhists?0:Object.keys(this._graphicsInfo.hhists).length},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){throw new Error("Not implemented")},e.prototype.entries=function(){throw new Error("Not implemented")},e.prototype.keys=function(){throw new Error("Not implemented")},e.prototype.values=function(){throw new Error("Not implemented")},e}(),A=function(){function e(e,t,i){this._graphicsInfo=e,this._roughStudyGraphics=t,this._detailedStudyGraphics=i}return e.prototype.horizlines=function(){return new I(this._roughStudyGraphics.horizlines(),this._detailedStudyGraphics.map((function(e){return e.horizlines()})))},e.prototype.vertlines=function(){return this._roughStudyGraphics.vertlines()},e.prototype.lines=function(){return this._roughStudyGraphics.lines()},e.prototype.hlines=function(){return this._roughStudyGraphics.hlines()},e.prototype.textmarks=function(){return this._roughStudyGraphics.textmarks()},e.prototype.shapemarks=function(){return this._roughStudyGraphics.shapemarks()},e.prototype.backgrounds=function(){return this._roughStudyGraphics.backgrounds()},e.prototype.polygons=function(){return this._roughStudyGraphics.polygons()},e.prototype.trendchannels=function(){return this._roughStudyGraphics.trendchannels()},e.prototype.hhists=function(){return new O(this._graphicsInfo,this)},e.prototype.hhistsByTimePointIndex=function(){return new E(this._roughStudyGraphics.hhistsByTimePointIndex(),this._detailedStudyGraphics.map((function(e){return e.hhistsByTimePointIndex()})))},e.prototype.dwglabels=function(){return this._roughStudyGraphics.dwglabels()},e.prototype.dwglines=function(){return this._roughStudyGraphics.dwglines()},e}(),M=i("+GxX"),k=(i("bSeV"),"tv-volumebyprice"),D=Object(S.studyIdString)("VbPSessionsRough",k),R=Object(S.studyIdString)("VbPSessionsDetailed",k),V=Object(S.studyIdString)("VbPSessionsDetailedAlerts",k),B=Number.MAX_SAFE_INTEGER,N=window.t("study package is not available"),F=window.t("disabled"),j=window.t("awaiting..."),W=function(e){function t(t,i,r,n){var o=e.call(this,t,i,r,n)||this;return o._isPackageAvailable=H(),o._isEnabled=Object(M.isFeatureEnabled)("studies-vp-session-volume-2"),o._alertsStudyMetaInfo=null,o._roughDataSource=null,o._detailedDataSource=null,o._detailedDataBuffer=new y.CircularBuffer(7),o._loadedGraphics=null,o._loadedPlots=null,o._mergedGraphics=Object(T.emptyStudyGraphics)(),o._mergedPlots=o._emptyPlotList(),o._isPackageAvailable||o._setStatus(N),o._isEnabled||o._setStatus(F),o}return Object(u.__extends)(t,e),t.prototype.destroy=function(){null!==this._detailedDataSource&&(this._detailedDataSource.dataUpdated().unsubscribe(this,this._onRoughOrDetailedDataUpdated),this._detailedDataSource.dataCleared().unsubscribe(this,this._onRoughOrDetailedDataCleared),this._detailedDataSource.studyStatusChanged().unsubscribe(this,this._onStudyStatusChanged),this._detailedDataSource.destroy(),this._detailedDataSource=null),
null!==this._roughDataSource&&(this._roughDataSource.dataUpdated().unsubscribe(this,this._onRoughOrDetailedDataUpdated),this._roughDataSource.dataCleared().unsubscribe(this,this._onRoughOrDetailedDataCleared),this._roughDataSource.studyStatusChanged().unsubscribe(this,this._onStudyStatusChanged),this._roughDataSource.destroy(),this._roughDataSource=null)},t.prototype.data=function(){return this._loadedPlots||this._mergedPlots},t.prototype.graphics=function(){return this._loadedGraphics||this._mergedGraphics},t.prototype.clearData=function(){null!==this._roughDataSource&&this._roughDataSource.clearData(),null!==this._detailedDataSource&&this._detailedDataSource.clearData()},t.prototype.restoreData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this._loadedPlots=this._emptyPlotList(),this._loadedPlots.restoreState(e),void 0!==e.graphics&&(this._loadedGraphics=Object(T.loadStudyGraphics)(e.graphics)),this._postProcessGraphics()},t.prototype.isFailed=function(){return!this._isPackageAvailable||!this._isEnabled||null!==this._roughDataSource&&this._roughDataSource.studyStatus().type===P.b.Error||null!==this._detailedDataSource&&this._detailedDataSource.studyStatus().type===P.b.Error},t.prototype.isLoading=function(){return null!==this._roughDataSource&&this._roughDataSource.studyStatus().type===P.b.Loading||null!==this._detailedDataSource&&this._detailedDataSource.studyStatus().type===P.b.Loading},t.prototype.isStarted=function(){return null!==this._roughDataSource&&this._roughDataSource.isStarted()||null!==this._detailedDataSource&&this._detailedDataSource.isStarted()},t.prototype.sourceId=function(){throw new Error("Invalid operation")},t.prototype.idForAlert=function(){return e.prototype._collectDepsForAlert.call(this).idForAlert},t.prototype.hasStateForAlert=function(){return e.prototype.hasStateForAlert.call(this)&&null!==this._alertsStudyMetaInfo},t.prototype.canHaveChildren=function(){return!1},t.prototype.isChildStudy=function(){return!1},t.prototype.hasChildren=function(){return!1},t.prototype.getAllChildren=function(){return[]},t.prototype._startAfterSymbolsResolved=function(e,t){return Object(u.__awaiter)(this,void 0,void 0,(function(){var e,t,i,r;return Object(u.__generator)(this,(function(n){switch(n.label){case 0:return this.isStarted()&&!this.isRestarting()?[2]:(this._restarting=!1,this._isPackageAvailable=H(),this._isPackageAvailable?(this._isEnabled=Object(M.isFeatureEnabled)("studies-vp-session-volume-2"),this._isEnabled?this._allInputsAreValid()?(this._inputs=this.inputs(),e=this.model().studyMetaInfoRepository(),null!==this._roughDataSource?[3,2]:[4,e.findById({type:"java",studyId:D})]):[2]:(this._setStatus(F),[2])):(this._setStatus(N),[2]));case 1:return t=n.sent(),this._roughDataSource=new P.a(this.model().chartApi(),this.model().mainSeries(),"vbpsessionsrough_",t),this._roughDataSource.studyStatusChanged().subscribe(this,this._onStudyStatusChanged),this._roughDataSource.dataCleared().subscribe(this,this._onRoughOrDetailedDataCleared),
this._roughDataSource.dataUpdated().subscribe(this,this._onRoughOrDetailedDataUpdated),[3,3];case 2:this._roughDataSource.stop(),n.label=3;case 3:return this._roughDataSource.setInputs(U(this._roughDataSource.metaInfo().inputs,this._inputs)),this.processHibernate(),null!==this._detailedDataSource?[3,5]:[4,e.findById({type:"java",studyId:R})];case 4:return i=n.sent(),this._detailedDataSource=new P.a(this.model().chartApi(),this.model().mainSeries(),"vbpsessionsdetailed_",i),this._detailedDataSource.studyStatusChanged().subscribe(this,this._onStudyStatusChanged),this._detailedDataSource.dataCleared().subscribe(this,this._onRoughOrDetailedDataCleared),this._detailedDataSource.dataUpdated().subscribe(this,this._onRoughOrDetailedDataUpdated),[3,6];case 5:this._detailedDataSource.stop(),n.label=6;case 6:return this._detailedDataSource.setInputs(z(this._inputs)),this.processHibernate(),this._createStudyGraphics(),this._subscribeExtendedHours(),this._setStatus(this._statusValueFromDataSources()),this.onStart.fire(),null!==this._alertsStudyMetaInfo?[3,8]:(r=this,[4,e.findById({type:"java",studyId:V})]);case 7:r._alertsStudyMetaInfo=n.sent(),n.label=8;case 8:return[2]}}))}))},t.prototype._changeInputsImpl=function(e,t){if(null!==this._roughDataSource){if(Object(w.a)(this._roughDataSource.metaInfo().inputs,t,e)){if(null!==this._detailedDataSource){var i=z(e),r=Object(w.b)(i);if(this._moreDetailedDataRequiredForTimeRange(r)){if(this._detailedDataSource.isActive()){var n=this._detailedDataSource.stopAndStealData();if(n.plots.size()>0||!Object(T.isStudyGraphicsEmpty)(n.graphics)){var o=Object(f.ensureNotNull)(this._detailedDataSource.inputs());n.plots=this._extractEffectiveDetailedPlotValues(n.plots,o),this._detailedDataBuffer.enqueue({lod:G(o),value:n})}}this._detailedDataSource.setInputs(i),this._detailedDataSource.start()}}}else this._roughDataSource.setInputs(U(this._roughDataSource.metaInfo().inputs,e)),this._detailedDataBuffer.clear(),null!==this._detailedDataSource&&this._detailedDataSource.setInputs(z(e));null!==this._detailedDataSource&&this._createStudyGraphics()}},t.prototype._collectDepsForAlert=function(){var t=this,i=e.prototype._collectDepsForAlert.call(this);if(null===this._alertsStudyMetaInfo)throw new Error("Alerts study metainfo is not ready yet. Have you checked the alert availability using hasStateForAlert()?");return Object(u.__assign)(Object(u.__assign)({},i),{studyDependencies:i.studyDependencies.map((function(e){var i,r=e.study===q(t.metaInfo());return{id:e.id,inputs:r?(i=e.inputs,Object(u.__assign)(Object(u.__assign)({},i),{subscribeRealtime:!0})):e.inputs,study:r&&null!==t._alertsStudyMetaInfo?q(t._alertsStudyMetaInfo):e.study}}))})},t.prototype.isHibernated=function(){return!(this.isVisible()||null!==this._roughDataSource&&this._roughDataSource.isStarted()||null!==this._detailedDataSource&&this._detailedDataSource.isStarted())},t.prototype.processHibernate=function(){this.isVisible()?(null===this._roughDataSource||this._roughDataSource.isStarted()||this._roughDataSource.start(),
null===this._detailedDataSource||this._detailedDataSource.isStarted()||this._detailedDataSource.start()):(null!==this._roughDataSource&&this._roughDataSource.isStarted()&&this._roughDataSource.stop(),null!==this._detailedDataSource&&this._detailedDataSource.isStarted()&&this._detailedDataSource.stop())},t.prototype._statusValueFromDataSources=function(){if(null===this._roughDataSource||null===this._detailedDataSource)return"";if(!this._roughDataSource.isStarted()&&!this._detailedDataSource.isStarted())return"";var e=this._roughDataSource.studyStatus(),t=this._detailedDataSource.studyStatus();return e.type===P.b.Completed&&t.type===P.b.Completed?"":e.type===P.b.Error?window.t(e.reason.split(":",2)[0]):t.type===P.b.Error?window.t(t.reason.split(":",2)[0]):e.type===P.b.Loading||t.type===P.b.Loading?o.studyLoadingStatus:j},t.prototype._emptyPlotList=function(){return new b.PlotList(Object(C.studyPlotFunctionMap)(this.metaInfo()),C.studyEmptyPlotValuePredicate)},t.prototype._createStudyPlots=function(){var e=this,t=Object(f.ensureNotNull)(this._roughDataSource),i=Object(f.ensureNotNull)(this._detailedDataSource);this._mergedPlots.clear();var r=[];r.push({lod:B,value:t.plots()}),this._detailedDataBuffer.forEach((function(e){r.push({lod:e.lod,value:e.value.plots})}));var n=Object(f.ensureNotNull)(i.inputs());r.push({lod:G(n),value:this._extractEffectiveDetailedPlotValues(i.plots(),n)}),r.sort((function(e,t){return t.lod-e.lod}));for(var o=0,s=r;o<s.length;o++){s[o].value.each((function(t,i){for(var r=0,n=i;r<n.length;r++){if(void 0===n[r])return!1}return e._mergedPlots.add(t,i),!1}))}this._invalidateLastNonEmptyPlotRowCache()},t.prototype._createStudyGraphics=function(){var e=Object(f.ensureNotNull)(this._roughDataSource),t=Object(f.ensureNotNull)(this._detailedDataSource),i=[];this._detailedDataBuffer.forEach((function(e){i.push({lod:e.lod,value:e.value.graphics})})),void 0!==this._inputs&&i.push({lod:G(this._inputs),value:t.graphics()}),i.sort((function(e,t){return e.lod-t.lod}));var r=i.map((function(e){return e.value}));this._mergedGraphics=new A(this.metaInfo().graphics,e.graphics(),r)},t.prototype._extractEffectiveDetailedPlotValues=function(e,t){var i=Object(w.b)(t),r=this.model().timeScale().timePointToIndex(i.from),n=this.model().timeScale().timePointToIndex(i.to);return e.size()>0?e.range(r||Object(f.ensureNotNull)(e.firstIndex()),n||Object(f.ensureNotNull)(e.lastIndex())):this._emptyPlotList()},t.prototype._moreDetailedDataRequiredForTimeRange=function(e){var t=this,i=e.from,r=e.to,n=!1;return Object(f.ensureNotNull)(this._roughDataSource).graphics().hhistsByTimePointIndex().forEach((function(e,o){if(!n){var s=t.model().timeScale().indexToTimePoint(o);if(!(null===s||s<i||r<s)){var a=r-i,l=!1;t._detailedDataBuffer.forEach((function(e){e.lod<=a&&(e.value.graphics.hhistsByTimePointIndex().has(o)&&(l=!0))})),l||(n=!0)}}})),n},t.prototype._onStudyStatusChanged=function(e,t){this._setStatus(this._statusValueFromDataSources()),Object(f.ensureDefined)(this._statusView).update()},
t.prototype._onRoughOrDetailedDataCleared=function(){null!==this._roughDataSource&&null!==this._detailedDataSource&&(this._invalidateLastNonEmptyPlotRowCache(),this._detailedDataBuffer.clear(),this._createStudyPlots(),this._createStudyGraphics(),this.updateAllViews(),this.model().updateSource(this))},t.prototype._onRoughOrDetailedDataUpdated=function(e){null!==this._roughDataSource&&null!==this._detailedDataSource&&(e.length>0&&this._createStudyPlots(),this.updateAllViews(),this.model().updateSource(this))},t}(m);function H(){return void 0!==window.pro&&window.pro.hasPackage(k)}function U(e,t){for(var i={},r=0,n=e;r<n.length;r++){var o=n[r];i[o.id]=t[o.id]}return i}function z(e){var t=e.last_visible_bar_time-e.first_visible_bar_time;return Object(u.__assign)(Object(u.__assign)({},e),{first_visible_bar_time:e.first_visible_bar_time-t,last_visible_bar_time:e.last_visible_bar_time+t})}function G(e){var t=Object(w.b)(e),i=t.from;return t.to-i}function q(e){return e.id+"-"+e.version}var Y=i("ifvX"),X=i("PL0c"),K=i("cKqi"),J=i("0gbU"),Q=i("TMWk"),Z=i("8sOK"),$=function(e){function t(t,i,r,n){var o=e.call(this,t,i,r,n)||this;return o.properties().styles.vol_ma.visible.listeners().subscribe(o,(function(){return o.invalidateTitleCache()})),o}return Object(u.__extends)(t,e),t.prototype.base=function(){return 1},t.prototype.destroy=function(){this.properties().styles.vol_ma.visible.listeners().unsubscribeAll(this),e.prototype.destroy.call(this)},t.prototype._titleInputs=function(){var e={symbolsForDisplay:!0,skipHiddenInputs:!0,fakeInputsForDisplay:!0,asObject:!1};return this.properties().styles.vol_ma.visible.value()?this.inputs(e):this.inputs(Object(u.__assign)(Object(u.__assign)({},e),{skippedInputs:["length"]}))},t}(o.Study);function ee(e,t){return void 0===t&&(t="shift"),{studyConstructor:e,colorRotationMode:t}}i.d(t,"isStudy",(function(){return re})),i.d(t,"isStudyStrategy",(function(){return ne})),i.d(t,"isStudyStub",(function(){return oe})),i.d(t,"isFundamentalStudy",(function(){return se})),i.d(t,"isESDStudy",(function(){return ae})),i.d(t,"isFundamentalStudyMetaInfo",(function(){return le})),i.d(t,"createStudy",(function(){return ue})),i.d(t,"studyColorRotationMode",(function(){return he}));var te={study_PivotPointsStandard:ee(X.study_PivotPointsStandard),study_Overlay:ee(K.study_Overlay,"loop"),study_Compare:ee(J.study_Compare,"loop"),study_Volume:ee($),study_ScriptWithDataOffset:ee(Q.study_ScriptWithDataOffset)};for(var ie in te.study_ESD$TV_EARNINGS=ee(a.study_ESD$TV_EARNINGS),te["study_Internal$STD;Fund_"]=ee(l.a),te.study_ESD$TV_SPLITS=ee(a.study_ESD$TV_SPLITS),te.study_ESD$TV_DIVIDENDS=ee(a.study_ESD$TV_DIVIDENDS),te.study_ElliottWave=ee(c.study_ElliottWave),te.study_LinearRegression=ee(d),te.study_PivotPointsHighLow=ee(p.study_PivotPointsHighLow),te.study_VbPSessions=ee(v),te.study_VbPSessionsRoughDetailed=ee(W),te.study_VbPVisible=ee(g),te.study_ZigZag=ee(Y.study_ZigZag),TradingView.StudyStrategy=ee(s.StudyStrategy).studyConstructor,te)te.hasOwnProperty(ie)&&(TradingView[ie]=te[ie].studyConstructor)
;function re(e){return e instanceof o.Study}function ne(e){return e instanceof s.StudyStrategy}function oe(e){return e instanceof Z.StudyStub}function se(e){return e instanceof l.a}function ae(e){return e instanceof a.ESDStudyBase}function le(e){return"study_Internal$STD;Fund_"===ce(e)}function ce(e){var t="study_"+(e.classId||e.shortId);return t.startsWith("study_Internal$STD;Fund_")?"study_Internal$STD;Fund_":t}function ue(e,t,i,r,a){if(n.a.isScriptStrategy(r))return new s.StudyStrategy(e,t,i,r);var l=ce(r),c=new(l in te?te[l].studyConstructor:o.Study)(e,t,i,r);return void 0!==a&&c.setId(a),c}function he(e){var t=ce(e);return t in te?te[t].colorRotationMode:1!==e.plots.length?"shift":void 0===e.pine||n.a.isStandardPine(e.id)?"loop":"shift"}},"3UA0":function(e,t){e.exports.tzData={"America/New_York":{
time:[-2717668562,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1536530400,-1523224800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-76941e4,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-17762,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Los_Angeles":{
time:[-2717668378,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-769420800,-765410400,-687995940,-662680800,-620866800,-608162400,-589417200,-576108e3,-557967600,-544658400,-526518e3,-513208800,-495068400,-481759200,-463618800,-450309600,-431564400,-418255200,-400114800,-386805600,-368665200,-355356e3,-337215600,-323906400,-305766e3,-292456800,-273711600,-261007200,-242262e3,-226533600,-210812400,-195084e3,-179362800,-163634400,-147913200,-13158e4,-116463600,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-28378,-28800,-25200,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Chicago":{
time:[-2717668236,-1633298400,-1615154400,-1601848800,-1583704800,-1563746400,-1551650400,-1538949600,-1520200800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1067810400,-1045432800,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-769413600,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-21036,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"America/Phoenix":{time:[-2717670498,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-820540740,-812678340,-796867140,-84405600,-68680800,1924966800],offset:[-26898,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"America/Toronto":{
time:[-2366755200,-1632088800,-1615154400,-1601771400,-1583712e3,-1567375200,-1554681600,-1534716e3,-1524088800,-1503266400,-149238e4,-1471816800,-1460930400,-1440972e3,-1428876e3,-1409522400,-1397426400,-1378072800,-1365976800,-1346623200,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1188770400,-1176069600,-1157320800,-1144015200,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-880232400,-76941e4,-765410400,-747266400,-733960800,-715824e3,-702518400,-684374400,-671068800,-652924800,-634176e3,-620863200,-602719200,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-19052,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Vancouver":{
time:[-2713910400,-1632088800,-1615154400,-880236e3,-769420800,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-386805600,-368661600,-355356e3,-337212e3,-323906400,-305762400,-292456800,-273708e3,-261007200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-29548,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Argentina/Buenos_Aires":{time:[-2372112e3,-1567468800,-1233446400,-1222992e3,-1205971200,-1194048e3,-117288e4,-1162512e3,-1141344e3,-1130976e3,-1109808e3,-109944e4,-1078272e3,-1067817600,-1046649600,-1036281600,-1015113600,-1004745600,-983577600,-973209600,-952041600,-941587200,-931046400,-900892800,-890352e3,-83376e4,-82728e4,-752284800,-733795200,-197337600,-190857600,-184204800,-164505600,-152668800,-132969600,-121132800,-101433600,-86832e3,-71107200,-54777600,-39052800,-23328e3,-7603200,128131200,136598400,596937600,605059200,624412800,636508800,656467200,667958400,687916800,699408e3,719366400,731462400,938908800,952041600,1198972800,1205625600,1224374400,1237075200,1924981200],offset:[-14028,-15408,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-10800,-10800,-7200,-10800,-7200,-10800]},"America/El_Salvador":{time:[-1546300800,546998400,559699200,578448e3,591148800,1924970400],offset:[-21408,-21600,-18e3,-21600,-18e3,-21600]},"America/Sao_Paulo":{
time:[-1767225600,-1206968400,-1191369600,-1175385600,-1159833600,-633830400,-622076400,-602294400,-59184e4,-570758400,-560217600,-539136e3,-53136e4,-195436800,-184204800,-155174400,-150076800,-128908800,-121132800,-99964800,-89596800,-68428800,-57974400,499737600,511228800,530582400,540259200,562118400,571190400,592963200,602035200,624412800,634694400,656467200,666748800,687916800,697593600,719971200,728438400,750816e3,761702400,782265600,793152e3,813715200,823996800,84456e4,856051200,876096e3,888710400,908064e3,919555200,938908800,951609600,970963200,982454400,1003017600,1013904e3,1036281600,1045353600,1066521600,1076803200,1099353600,1108857600,1129420800,1140307200,1162684800,1172361600,119232e4,1203206400,1224374400,1234656e3,1255824e3,1266710400,1287273600,129816e4,1318723200,1330214400,1350777600,1361059200,1382227200,1392508800,1413676800,1424563200,1445126400,1456012800,1476576e3,1487462400,1508025600,1518912e3,1541289600,1550361600,1924981200],offset:[-11188,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800]},"America/Bogota":{time:[-2707689600,-1739059200,704851200,733881600,1924974e3],offset:[-17776,-17776,-18e3,-14400,-18e3]},"America/Caracas":{time:[-2524521600,-1826755200,-157766400,1197169200,1462069800,1924977600],offset:[-16064,-16060,-16200,-14400,-16200,-14400]},"Europe/Moscow":{time:[-2840140800,-1688256e3,-165681e4,-1641340800,-1627956e3,-1618700400,-1596416400,-1593804521,-1589846400,-1542416400,-1539478800,-1525305600,-1522713600,-1491177600,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1414288800,1925002800],
offset:[9017,9017,9079,12679,9079,16279,12679,16279,14400,10800,14400,18e3,14400,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800]},"Europe/Athens":{time:[-2344636800,-1686095940,-1182988800,-1178150400,-906854400,-904867200,-85725e4,-844473600,-828230400,-812419200,-552355200,-541641600,166492800,186195600,198036e3,213764400,228880800,244090800,260330400,275457600,291805200,307418400,323395200,338947200,354682800,370411200,386132400,401860800,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5692,5692,7200,10800,7200,10800,7200,3600,7200,3600,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Belgrade":{
time:[-2713910400,-905821200,-85725e4,-844552800,-828219600,-812498400,-79677e4,-777938400,-766616400,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[4920,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Berlin":{time:[-2422051200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-938901600,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-776556e3,-765925200,-761173200,-748476e3,-733266e3,-717627600,-714603600,-71037e4,-701902800,-684972e3,-670453200,-654127200,-639003600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[3208,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/London":{
time:[-3852662400,-1691964e3,-1680469200,-1664143200,-1650142800,-1633903200,-1617483600,-1601848800,-1586034e3,-1570399200,-1552165200,-1538344800,-152253e4,-15075e5,-1490562e3,-1473631200,-1460926800,-1442786400,-1428872400,-1410732e3,-1396213200,-1379282400,-1364763600,-1348437600,-1333314e3,-1315778400,-1301259600,-1284328800,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-118998e4,-1175461200,-1159135200,-1143406800,-1126476e3,-1111957200,-1095631200,-1080507600,-1063576800,-1049058e3,-1032127200,-1017608400,-1001282400,-986158800,-969228e3,-950475600,-942012e3,-904514400,-896043600,-875484e3,-864594e3,-844034400,-832539600,-812584800,-798066e3,-781048800,-772059600,-764802e3,-748476e3,-733352400,-719445600,-717026400,-706741200,-699483600,-687996e3,-668034e3,-654732e3,-636584400,-622072800,-605739600,-590623200,-57429e4,-558568800,-542235600,-527119200,-512600400,-496274400,-481150800,-46422e4,-449701200,-432165600,-417646800,-401320800,-386197200,-369266400,-354747600,-337816800,-323298e3,-306972e3,-291848400,-276732e3,-257979600,-245282400,-22653e4,-213228e3,-195080400,-182383200,-163630800,-150933600,-132181200,-119484e3,-100731600,-88034400,-68677200,-59004e3,-37238400,57726e3,69818400,89175600,101268e3,120625200,132717600,152074800,164167200,183524400,196221600,214974e3,227671200,246423600,259120800,278478e3,290570400,309927600,32202e4,341377200,354675600,372823200,386125200,404272800,417574800,435722400,449024400,467776800,481078800,499226400,512528400,530676e3,543978e3,562125600,575427600,593575200,606877200,625629600,638326800,657079200,670381200,688528800,701830800,719978400,733280400,751428e3,76473e4,782877600,796179600,814327200,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174784400,1193536800,1206838800,1224986400,1238288400,1256436e3,1269738e3,1288490400,1301187600,131994e4,1332637200,1351389600,1364691600,1382839200,1396141200,1414288800,1427590800,1445738400,1459040400,1477792800,149049e4,1509242400,1521939600,1540692e3,1553994e3,1572141600,1585443600,1603591200,1616893200,1635645600,1648342800,1667095200,1679792400,1698544800,1711846800,1729994400,1743296400,1761444e3,1774746e3,1792893600,1806195600,1824948e3,1837645200,1856397600,1869094800,1887847200,1901149200,1919296800,1932598800],
offset:[-75,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0]},"Europe/Luxembourg":{time:[-2069712e3,-1692493200,-1680476400,-1662339600,-165015e4,-1632002400,-1618693200,-1612656e3,-1604278800,-1585515600,-1574038800,-1552255200,-1539997200,-1520546400,-1507510800,-1490569200,-1473642e3,-1459116e3,-1444006800,-142767e4,-1411866e3,-1396220400,-1379293200,-1364770800,-1348448400,-1333321200,-1316394e3,-1301266800,-1284339600,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-1191189600,-1175461200,-1160344800,-1143406800,-1127685600,-1111957200,-1096840800,-1080507600,-1063576800,-1049058e3,-1033336800,-1017608400,-1002492e3,-986158800,-969228e3,-950475600,-942012e3,-935182800,-85725e4,-844552800,-828219600,-812498400,-797979600,-781048800,-766616400,-745452e3,-733266e3,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[1476,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Madrid":{time:[-2177453684,-1631926800,-1616886e3,-1601168400,-158535e4,-1442451600,-142767e4,-1379293200,-1364770800,-1348448400,-1333321200,-1316390400,-1301266800,-1284339600,-1269817200,-1026954e3,-1017615600,-1001898e3,-999478800,-986083200,-951433200,-940208400,-873075600,-862614e3,-842835600,-828313200,-811386e3,-796863600,-779936400,-765414e3,-748486800,-733964400,-652323600,-639010800,135126e3,150253200,166575600,181702800,196815600,212547600,22887e4,243997200,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[-884,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Paris":{time:[-2486678340,-1855958340,-1689814800,-1680393600,-1665363600,-1648339200,-1635123600,-1616889600,-1604278800,-158544e4,-1574038800,-1552262400,-1539997200,-1520553600,-1507510800,-1490572800,-1470618e3,-1459123200,-1444006800,-1427673600,-1411952400,-1396224e3,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301270400,-1284339600,-1269820800,-1253494800,-1238371200,-1221440400,-1206921600,-1191200400,-1175472e3,-1160355600,-1143417600,-1127696400,-1111968e3,-1096851600,-1080518400,-1063587600,-1049068800,-1033347600,-1017619200,-1002502800,-986169600,-969238800,-950486400,-942012e3,-932432400,-85725e4,-844552800,-828219600,-812498400,-800064e3,-796258800,-781048800,-766616400,196822800,212547600,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[561,561,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Rome":{time:[-3252096e3,-2403562204,-1690761600,-168048e4,-1664755200,-1648944e3,-163512e4,-1616889600,-1604275200,-1585526400,-1571011200,-1555286400,-932428800,-85725e4,-844552800,-828219600,-812498400,-798066e3,-781048800,-76671e4,-750895200,-733352400,-719452800,-70191e4,-689205600,-670453200,-114048e3,-103161600,-81993600,-71708400,-50544e3,-40258800,-18489600,-8204400,1296e4,23245200,43804800,54694800,75859200,86749200,107913600,118198800,138758400,149648400,170812800,181098e3,202262400,212547600,233107200,243997200,265161600,276051600,296611200,307501200,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[2996,2996,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Warsaw":{time:[-2840140800,-1717027200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-1600466400,-1587157200,-1501718400,-931730400,-85725e4,-844552800,-828219600,-812498400,-796600800,-778723200,-762652800,-748483200,-733266e3,-715212e3,-701902800,-684972e3,-670453200,-654127200,-639003600,-397090800,-386805600,-371084400,-355356e3,-334191600,-323301600,-307580400,-291852e3,-271292400,-260402400,-239842800,-228952800,-208393200,-197503200,-176338800,-166053600,228877200,244000800,260326800,276055200,291776400,307504800,323830800,338954400,354675600,370404e3,386125200,401853600,417574800,433303200,449024400,465357600,481078800,496807200,512528400,528256800,543978e3,559706400,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[5040,5040,3600,7200,3600,7200,3600,7200,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Istanbul":{time:[-2840140800,-1869868800,-1693699200,-168048e4,-1570406400,-1552176e3,-1538352e3,-1522540800,-1507507200,-1490572800,-1440201600,-1428019200,-1409702400,-1396483200,-931046400,-922665600,-917827200,-892425600,-875836800,-764726400,-744336e3,-733795200,-716428800,-701913600,-684979200,-670464e3,-654134400,-639014400,-62208e4,-60696e4,-590025600,-575510400,-235612800,-194832e3,-177724800,-165715200,107917200,121226400,133927200,152676e3,164685600,184125600,196221600,215575200,228880800,245815200,260330400,267926400,428464800,433908e3,468122400,482806800,496720800,512528400,528256800,543978e3,559706400,575427600,591156e3,606877200,622605600,638326800,65466e4,670381200,686109600,701830800,717559200,733280400,749008800,764125200,780458400,796179600,811908e3,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301281200,1319947200,1332644400,1351396800,1364698800,1382846400,1396234800,1414296e3,1427598e3,1446955200,1459047600,1473206400,1925002800],offset:[6952,7016,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,10800,14400,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,10800]},"Europe/Zurich":{
time:[-3675196800,-2385244800,-904431600,-891122400,-872982e3,-859672800,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[2048,1786,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Australia/Sydney":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Australia/Brisbane":{time:[-2366755200,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,625629600,636519600,657079200,667969200,688528800,699418800,1925028e3],offset:[36728,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3]},"Australia/Adelaide":{time:[-2364076800,-2230156800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,637729200,657079200,667969200,688528800,701233200,719978400,731473200,752032800,764132400,783482400,796186800,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,972784800,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[33260,32400,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800]},"Australia/ACT":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Asia/Almaty":{
time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1925013600],offset:[18468,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,21600,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600]},"Asia/Ashkhabad":{time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,192501e4],offset:[14012,14400,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,18e3,14400,18e3]},"Asia/Tokyo":{time:[-2587678861,-683769600,-672274800,-654739200,-640825200,-620265600,-609375600,-588816e3,-577926e3,1925024400],offset:[33539,32400,36e3,32400,36e3,32400,36e3,32400,36e3,32400]},"Asia/Taipei":{time:[-2335219200,-1017792e3,-766191600,-745804800,-733795200,-716860800,-699580800,-683856e3,-670636800,-65232e4,-639100800,-620784e3,-607564800,-589248e3,-576028800,-562896e3,-541728e3,-528681600,-510192e3,-497145600,-478656e3,-465609600,-449798400,-433987200,-418176e3,-402451200,-38664e4,-370915200,-355104e3,-339379200,-323568e3,-302486400,-291945600,-270950400,-260409600,134006400,149817600,165542400,181353600,299635200,307584e3,1925020800],offset:[29160,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Singapore":{time:[-2177452800,-2038176e3,-1167609600,-1073001600,-894153600,-879638400,-766972800,378691200,1925020800],offset:[24925,24925,25200,26400,26400,27e3,32400,27e3,28800]},"Asia/Shanghai":{time:[-2177452800,-1600646400,-1585872e3,-933638400,-922060800,-908841600,-888796800,-881020800,-767836800,-745804800,-733795200,-716860800,-699580800,-683856e3,-670636800,-65232e4,-649987200,515556e3,527047200,545191200,558496800,577245600,589946400,608695200,622000800,640144800,653450400,671594400,6849e5,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Seoul":{
time:[-1948752e3,-1830384e3,-767318400,-681177600,-672192e3,-654739200,-640828800,-623376e3,-609379200,-588816e3,-577929600,-498096e3,-462672e3,-451699200,-429753600,-418262400,-399513600,-387417600,-368064e3,-355968e3,-336614400,-324518400,-305164800,-293068800,-264902400,547610400,560919600,57906e4,592369200,1925024400],offset:[30472,30600,32400,32400,36e3,32400,36e3,32400,36e3,32400,36e3,32400,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,32400,36e3,32400,36e3,32400]},"Asia/Tehran":{time:[-1704153600,-757382400,247190400,259286400,277776e3,283996800,290822400,306547200,322444800,338515200,673228800,685497600,701222400,71712e4,732758400,748656e3,764294400,780192e3,795830400,811728e3,827366400,843264e3,858988800,874886400,890524800,906422400,922060800,937958400,953596800,969494400,985219200,1001116800,1016755200,1032652800,1048291200,1064188800,1079827200,1095724800,1111449600,1127347200,1206057600,1221955200,123768e4,1253577600,1269216e3,1285113600,1300752e3,1316649600,1332288e3,1348185600,1363910400,1379808e3,1395446400,1411344e3,1426982400,144288e4,1458518400,1474416e3,1490140800,1506038400,1521676800,1537574400,1553212800,1569110400,1584748800,1600646400,1616371200,1632268800,1647907200,1663804800,1679443200,1695340800,1710979200,1726876800,1742601600,1758499200,1774137600,1790035200,1805673600,1821571200,1837209600,1853107200,1868745600,1884643200,1900368e3,1916265600,1931904e3],offset:[12344,12344,12600,14400,18e3,14400,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600]},"Asia/Dubai":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Kolkata":{time:[-3645216e3,-3155673600,-2019686400,-891561600,-872035200,-862617600,-764121600,1925011800],offset:[21208,21200,19270,19800,23400,19800,23400,19800]},"Asia/Hong_Kong":{time:[-2056663398,-900882e3,-891547200,-884217600,-761176800,-747878400,-728508600,-717021e3,-697059e3,-683757e3,-668028600,-654726600,-636579e3,-623277e3,-605129400,-591827400,-573679800,-559773e3,-541625400,-528323400,-510179400,-498083400,-478729800,-466633800,-446675400,-435184200,-415225800,-403129800,-383776200,-371680200,-352326600,-340230600,-320877e3,-308781e3,-288822600,-277331400,-257373e3,-245881800,-225923400,-213827400,-194473800,-182377800,-163024200,-148509e3,-132784200,-117059400,-101334600,-85609800,-69280200,-53555400,-37830600,-22105800,-6381e3,9343800,25068600,40793400,56518200,72243e3,88572600,104297400,120022200,126070200,151471800,167196600,182921400,198646200,214371e3,295414200,309324600,1925020800],
offset:[27402,28800,32400,30600,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Bangkok":{time:[-2840140800,-1570060800,1925017200],offset:[24124,24124,25200]},"Asia/Chongqing":{time:[-2177452800,-1600646400,-1585872e3,-933638400,-922060800,-908841600,-888796800,-881020800,-767836800,-745804800,-733795200,-716860800,-699580800,-683856e3,-670636800,-65232e4,-649987200,515556e3,527047200,545191200,558496800,577245600,589946400,608695200,622000800,640144800,653450400,671594400,6849e5,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Jerusalem":{time:[-2840140800,-1640995200,-933638400,-857347200,-844293600,-825811200,-812678400,-794188800,-779846400,-762645600,-748303200,-731116800,-681955200,-673228800,-667951200,-65232e4,-636415200,-62208e4,-608936400,-59184e4,-572475600,-558568800,-542840400,-527724e3,-514414800,-490838400,-482976e3,-459468e3,-451526400,-428544e3,-418251600,-400024800,-387417600,142387200,150854400,167184e3,178675200,334022400,337654800,452563200,462243600,482284800,495590400,516758400,526435200,545443200,558489600,576633600,589334400,609897600,620784e3,638323200,651628800,669772800,683683200,701827200,715737600,733708800,747187200,765158400,778032e3,796608e3,810086400,826848e3,842832e3,858902400,874195200,890352e3,90504e4,923018400,936324e3,955677600,970794e3,986778e3,1001293200,1017363600,1033952400,1048813200,1065142800,1081299600,1095814800,1112320800,1128823200,1143770400,1159668e3,117522e4,1189908e3,1206669600,1223172e3,1238119200,1254016800,1269568800,1284256800,1301623200,1317520800,1333072800,1348365600,1364522400,1382839200,1395972e3,1414288800,1427421600,1445738400,1458871200,1477792800,1490320800,1509242400,1521770400,1540692e3,1553824800,1572141600,1585274400,1603591200,1616724e3,1635645600,1648173600,1667095200,1679623200,1698544800,1711677600,1729994400,1743127200,1761444e3,1774576800,1792893600,1806026400,1824948e3,1837476e3,1856397600,1868925600,1887847200,190098e4,1919296800,1932429600],
offset:[8454,8440,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,14400,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Asia/Kuwait":{time:[-719625600,1925002800],offset:[11212,10800]},"Asia/Muscat":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Qatar":{time:[-1577923200,76204800,1925002800],offset:[12368,14400,10800]},"Asia/Riyadh":{time:[-719625600,1925002800],offset:[11212,10800]},"Pacific/Auckland":{time:[-3192393600,-1330293600,-1320012e3,-1300658400,-1287352800,-1269208800,-1255903200,-1237759200,-1224453600,-1206309600,-1192399200,-117486e4,-1160949600,-1143410400,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-757382400,152676e3,162356400,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,510116400,530676e3,541566e3,562125600,573620400,59418e4,60507e4,623815200,637729200,655264800,669178800,686714400,700628400,718164e3,732682800,749613600,764132400,781063200,795582e3,812512800,827031600,844567200,858481200,876016800,889930800,907466400,921985200,938916e3,953434800,970365600,984884400,100242e4,1016334e3,1033869600,1047783600,1065319200,1079838e3,1096768800,1111287600,1128218400,1142737200,1159668e3,1174186800,1191117600,1207450800,1222567200,1238900400,1254016800,127035e4,1285466400,1301799600,1316916e3,1333249200,1348970400,1365303600,138042e4,1396753200,1411869600,1428202800,1443319200,1459652400,1474768800,1491102e3,1506218400,1522551600,1538272800,1554606e3,1569722400,1586055600,1601172e3,1617505200,1632621600,1648954800,1664071200,1680404400,1695520800,1712458800,1727575200,1743908400,1759024800,1775358e3,1790474400,1806807600,1821924e3,1838257200,1853373600,1869706800,1885428e3,1901761200,1916877600,1933210800],
offset:[41944,41400,45e3,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800]},"Pacific/Chatham":{time:[-3192393600,-757382400,152678700,162359100,183523500,195018300,215577900,226467900,247027500,257917500,278477100,289367100,309926700,320816700,341376300,352266300,372825900,384320700,404880300,415770300,436329900,447219900,467779500,478669500,499229100,510119100,530678700,541568700,562128300,573623100,594182700,605072700,623817900,637731900,655267500,669181500,686717100,700631100,718166700,732685500,749616300,764135100,781065900,795584700,812515500,827034300,844569900,858483900,876019500,889933500,907469100,921987900,938918700,953437500,970368300,984887100,1002422700,1016336700,1033872300,1047786300,1065321900,1079840700,1096771500,1111290300,1128221100,1142739900,1159670700,1174189500,1191120300,1207453500,1222569900,1238903100,1254019500,1270352700,1285469100,1301802300,1316918700,1333251900,1348973100,1365306300,1380422700,1396755900,1411872300,1428205500,1443321900,1459655100,1474771500,1491104700,1506221100,1522554300,1538275500,1554608700,1569725100,1586058300,1601174700,1617507900,1632624300,1648957500,1664073900,1680407100,1695523500,1712461500,1727577900,1743911100,1759027500,1775360700,1790477100,1806810300,1821926700,1838259900,1853376300,1869709500,1885430700,1901763900,1916880300,1933213500],offset:[44028,44100,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500]},"Pacific/Fakaofo":{time:[-2177452800,1325203200,1925038800],offset:[-41096,-39600,46800]},"Pacific/Honolulu":{time:[-2334139200,-1157320800,-1155470400,-880236e3,-769429800,-765410400,-712188e3,1924956e3],
offset:[-37886,-37800,-34200,-37800,-34200,-34200,-37800,-36e3]},"America/Mexico_City":{time:[-1514763396,-1343091600,-1234828800,-1220317200,-1207180800,-1191369600,-975283200,-963187200,-917136e3,-907372800,-821923200,-810086400,-627523200,-613008e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,989114400,1001815200,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1175392800,1193536800,1207447200,1224986400,1238896800,1256436e3,1270346400,1288490400,1301796e3,131994e4,1333245600,1351389600,13653e5,1382839200,1396749600,1414288800,1428199200,1445738400,1459648800,1477792800,1491098400,1509242400,1522548e3,1540692e3,1554602400,1572141600,1586052e3,1603591200,1617501600,1635645600,1648951200,1667095200,1680400800,1698544800,1712455200,1729994400,1743904800,1761444e3,1775354400,1792893600,1806804e3,1824948e3,1838253600,1856397600,1869703200,1887847200,1901757600,1919296800,1933207200],offset:[-23796,-25200,-21600,-25200,-21600,-25200,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"Africa/Cairo":{time:[-2185401600,-929836800,-923097600,-906163200,-892857600,-875836800,-857779200,-844300800,-825811200,-812678400,-794188800,-779846400,-762652800,-399081600,-38664e4,-368323200,-355104e3,-336783600,-323643600,-305161200,-292021200,-273625200,-260485200,-242089200,-228949200,-210553200,-197413200,-178930800,-165790800,-147394800,-134254800,-115858800,-102632400,-84322800,-71096400,-52700400,-39474e3,-21164400,-7938e3,10371600,23598e3,41907600,55134e3,7353e4,86756400,105066e3,118292400,136602e3,149828400,168138e3,181364400,199760400,212986800,231296400,244522800,262832400,276058800,294368400,307594800,325990800,339217200,357526800,370753200,396406800,402289200,426819600,433825200,452221200,465447600,483757200,496983600,515293200,528519600,546829200,560055600,578451600,591678e3,610419600,623214e3,641523600,65475e4,673059600,686286e3,704682e3,717908400,736218e3,749444400,767754e3,780980400,799027200,812332800,830476800,843782400,861926400,875232e3,893376e3,906681600,925430400,938736e3,95688e4,970185600,988329600,1001635200,1019779200,1033084800,1051228800,1064534400,1083283200,1096588800,1114732800,1128038400,1146182400,1158883200,1177632e3,1189123200,1209081600,1219968e3,1240531200,1250812800,1272585600,1281484800,1284076800,1285891200,1400198400,1403827200,1406851200,1411689600,1924999200],
offset:[7509,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Africa/Johannesburg":{time:[-2458166400,-2109283200,-860968800,-845244e3,-829519200,-813794400,1924999200],offset:[6720,5400,7200,10800,7200,10800,7200]},"Asia/Kathmandu":{time:[-1577923200,504921600,1925012700],offset:[20476,19800,20700]},"US/Mountain":{time:[-2717668796,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1538949600,-1534111200,-880236e3,-769417200,-765410400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-25196,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"Europe/Helsinki":{time:[-2890252800,-1535932800,-875664e3,-859762800,354679200,370407600,386128800,401857200,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5989,5989,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Stockholm":{
time:[-2871676800,-2208988800,-1692493200,-1680476400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[4332,3614,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Copenhagen":{time:[-2524521600,-2398291200,-1692493200,-1680483600,-935107200,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-769381200,-747007200,-736376400,-715212e3,-706741200,-683157600,-675291600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[3020,3020,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Atlantic/Reykjavik":{time:[-1956614400,-1668214800,-1647212400,-1636678800,-161343e4,-1605142800,-1581894e3,-1539565200,-153135e4,-968029200,-952293600,-942012e3,-920239200,-909961200,-888789600,-877906800,-857944800,-846457200,-826495200,-815007600,-795045600,-783558e3,-762991200,-752108400,-731541600,-717634800,-700092e3,-686185200,-668642400,-654735600,-636588e3,-623286e3,-605743200,-591836400,-573688800,-559782e3,-542239200,-528332400,-510789600,-496882800,-47934e4,-465433200,-447890400,-433983600,-415836e3,-401929200,-384386400,-370479600,-352936800,-33903e4,-321487200,-307580400,-290037600,-276130800,-258588e3,-244681200,-226533600,-212626800,-195084e3,-181177200,-163634400,-149727600,-132184800,-118278e3,-100735200,-86828400,-68680800,-54774e3,1924992e3],offset:[-5280,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0]},"Europe/Tallinn":{time:[-2840140800,-1638316800,-1632002400,-1618693200,-1593820800,-1535932800,-927936e3,-892944e3,-85725e4,-844552800,-828219600,-812498400,-797644800,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909288e3,92259e4,941342400,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],
offset:[5940,5940,3600,7200,3600,5940,7200,10800,7200,3600,7200,3600,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Riga":{time:[-2840140800,-1632002400,-1618693200,-1601676e3,-1597266e3,-1377302400,-928022400,-899510400,-85725e4,-844552800,-828219600,-812498400,-79677e4,-795830400,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,843966e3,859690800,877838400,891140400,909288e3,92259e4,941342400,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5794,5794,9394,5794,9394,5794,7200,10800,7200,3600,7200,3600,7200,3600,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Vilnius":{
time:[-2840140800,-1672531200,-1585094400,-1561248e3,-1553558400,-928195200,-900115200,-85725e4,-844552800,-828219600,-812498400,-802137600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891140400,909284400,922586400,941338800,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[6076,5040,5736,3600,7200,3600,10800,7200,3600,7200,3600,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,7200,3600,7200,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"America/Lima":{time:[-2524521600,-1938556800,-1009843200,-1002067200,-986774400,-971049600,-955324800,-9396e5,504921600,512697600,536457600,544233600,631152e3,638928e3,757382400,765158400,1924974e3],offset:[-18492,-18516,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Santiago":{
time:[-2524521600,-1892678400,-1688428800,-1619222400,-1593820800,-1336003200,-13176e5,-1304380800,-1286064e3,-1272844800,-1254528e3,-1241308800,-1222992e3,-1209772800,-1191369600,-1178150400,-870566400,-865296e3,-740534400,-736387200,-718070400,-713667600,-36633600,-23932800,-3369600,7516800,24451200,37756800,55900800,69206400,87955200,100656e3,118195200,132105600,150854400,163555200,182304e3,195609600,213753600,227059200,245203200,258508800,277257600,289958400,308707200,321408e3,340156800,353462400,371606400,384912e3,403056e3,416361600,434505600,447811200,46656e4,479260800,498009600,510710400,529459200,545184e3,560908800,574214400,592358400,605664e3,624412800,637113600,653443200,668563200,687312e3,700617600,718761600,732067200,750211200,763516800,781660800,794966400,813715200,826416e3,845164800,85968e4,876614400,88992e4,906854400,923184e3,939513600,952819200,971568e3,984268800,1003017600,1015718400,1034467200,1047168e3,1065916800,1079222400,1097366400,1110672e3,1128816e3,1142121600,1160870400,1173571200,119232e4,1206835200,1223769600,1237075200,1255219200,1270339200,1286668800,1304812800,1313884800,1335657600,1346544e3,1367107200,1378598400,1398556800,1410048e3,1463270400,1471132800,149472e4,1502582400,1526169600,1534032e3,1554595200,1567900800,1586044800,1599350400,1617494400,16308e5,1648944e3,1662249600,1680393600,1693699200,1712448e3,1725753600,1743897600,1757203200,1775347200,1788652800,1806796800,1820102400,1838246400,1851552e3,1870300800,1883001600,1901750400,1915056e3,19332e5],offset:[-16966,-16966,-18e3,-16966,-14400,-16966,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-10800,-14400,-18e3,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800]},"Asia/Bahrain":{time:[-1577923200,76204800,1925002800],offset:[12368,14400,10800]},"Asia/Jakarta":{time:[-3231273600,-1451693568,-117288e4,-876614400,-766022400,-683856e3,-620784e3,-189388800,1925017200],offset:[25632,25632,26400,27e3,32400,27e3,28800,27e3,25200]},"Africa/Lagos":{time:[-1588464e3,1924995600],offset:[816,3600]},"Pacific/Norfolk":{
time:[-2177452800,-599616e3,152071200,162961200,1443924e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[40312,40320,41400,45e3,41400,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200,39600,43200]},"America/Juneau":{time:[-3225169588,-2188987200,-880236e3,-769420800,-765410400,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,438998400,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[54139,-32261,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-28800,-28800,-25200,-28800,-25200,-28800,-25200,-32400,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400]},"Asia/Ho_Chi_Minh":{time:[-2004048e3,-1851552e3,-852080400,-782614800,-767836800,-718070400,-457747200,-315622800,171849600,1925017200],offset:[25600,25590,25200,28800,32400,25200,28800,25200,28800,25200]},"Australia/Perth":{
time:[-2337897600,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,152071200,162961200,436327200,447217200,690343200,699418800,1165111200,1174791600,1193536800,1206846e3,1224986400,1238295600,1925020800],offset:[27804,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Europe/Malta":{time:[-2403475200,-1690761600,-168048e4,-1664755200,-1648944e3,-163512e4,-1616889600,-1604275200,-1585526400,-1571011200,-1555286400,-932428800,-85725e4,-844552800,-828219600,-812584800,-798066e3,-781048800,-76671e4,-750895200,-733352400,-719452800,-70191e4,-689205600,-670453200,-114048e3,-103161600,-81993600,-71708400,-50544e3,-40258800,-18489600,-8204400,1296e4,23245200,43804800,54694800,75859200,86749200,102384e3,118112400,135734400,148525200,167191200,180496800,198640800,211946400,230090400,243396e3,26154e4,274845600,292989600,306295200,323316e3,338349600,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[3484,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Amsterdam":{
time:[-4260211200,-1693699200,-168048e4,-1663452e3,-1650142800,-1633212e3,-1617483600,-1601157600,-1586034e3,-1569708e3,-1554584400,-1538258400,-1523134800,-15075e5,-1490562e3,-1470175200,-1459112400,-1443996e3,-1427662800,-1406671200,-1396213200,-1376949600,-1364763600,-1345413600,-1333314e3,-1313791200,-1301259600,-1282255200,-126981e4,-1250719200,-1238360400,-1219183200,-1206910800,-1186956e3,-1175461200,-1156024800,-1143406800,-1124488800,-1111957200,-1092952800,-1080507600,-1061330400,-1049058e3,-1029189600,-1025740800,-1017608400,-998258400,-986158800,-966722400,-954104400,-935020800,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-766616400,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[1172,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,1172,4772,4800,1200,4800,1200,4800,1200,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Brussels":{
time:[-2840140800,-2450994150,-1740355200,-1693699200,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-1613822400,-1604278800,-1585526400,-1574038800,-1552262400,-1539997200,-1520553600,-1507510800,-1490572800,-1473642e3,-1459123200,-1444006800,-1427673600,-1411952400,-1396224e3,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301259600,-1284328800,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-1191189600,-1175461200,-1160344800,-1143406800,-1127685600,-1111957200,-1096840800,-1080507600,-1063576800,-1049058e3,-1033336800,-1017608400,-1002492e3,-986158800,-969228e3,-950475600,-942012e3,-934664400,-85725e4,-844552800,-828219600,-812498400,-798066e3,-781048800,-766616400,-745452e3,-733266e3,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[1050,1050,0,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Lisbon":{
time:[-1830386205,-1689555600,-1677798e3,-1667437200,-1647734400,-1635814800,-1616198400,-1604365200,-1584662400,-1572742800,-155304e4,-1541206800,-1521504e3,-1442451600,-1426809600,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301270400,-1284339600,-1269820800,-1221440400,-1206921600,-1191200400,-1175472e3,-1127696400,-1111968e3,-1096851600,-1080518400,-1063587600,-1049068800,-1033347600,-1017619200,-1002502800,-986169600,-969238800,-950486400,-942022800,-922665600,-906944400,-891129600,-877309200,-873680400,-864e6,-857952e3,-845859600,-842835600,-831340800,-825897600,-81441e4,-810781200,-799891200,-794448e3,-782960400,-779331600,-768441600,-762998400,-749091600,-733363200,-717631200,-701902800,-686181600,-670453200,-654732e3,-639003600,-591832800,-575499600,-559778400,-54405e4,-528328800,-512600400,-496879200,-481150800,-465429600,-449701200,-43398e4,-417646800,-401925600,-386197200,-370476e3,-354747600,-339026400,-323298e3,-307576800,-291848400,-276127200,-260398800,-244677600,-228344400,-212623200,-196894800,-181173600,-165445200,-149724e3,-133995600,-118274400,212547600,228268800,243997200,260323200,276051600,291772800,307504800,323222400,338954400,354675600,370404e3,386125200,401853600,417578400,433303200,449024400,465357600,481078800,496807200,512528400,528256800,543978e3,559706400,575427600,591156e3,606877200,622605600,638326800,65466e4,670381200,686109600,701830800,717559200,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174784400,1193536800,1206838800,1224986400,1238288400,1256436e3,1269738e3,1288490400,1301187600,131994e4,1332637200,1351389600,1364691600,1382839200,1396141200,1414288800,1427590800,1445738400,1459040400,1477792800,149049e4,1509242400,1521939600,1540692e3,1553994e3,1572141600,1585443600,1603591200,1616893200,1635645600,1648342800,1667095200,1679792400,1698544800,1711846800,1729994400,1743296400,1761444e3,1774746e3,1792893600,1806195600,1824948e3,1837645200,1856397600,1869094800,1887847200,1901149200,1919296800,1932598800],offset:[-2205,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,0,3600,7200,3600,0,3600,7200,3600,0,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,3600,7200,3600,7200,3600,7200,3600,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0]},"Europe/Dublin":{
time:[-2821651200,-1691964e3,-1680469200,-1664143200,-1650142800,-1633903200,-1617483600,-1601848800,-1586034e3,-1570399200,-1552165200,-1538344800,-152253e4,-15075e5,-1490562e3,-1473631200,-1460926800,-1442786400,-1428872400,-1410732e3,-1396213200,-1379282400,-1364763600,-1348437600,-1333314e3,-1315778400,-1301259600,-1284328800,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-118998e4,-1175461200,-1159135200,-1143406800,-1126476e3,-1111957200,-1095631200,-1080507600,-1063576800,-1049058e3,-1032127200,-1017608400,-1001282400,-986158800,-969228e3,-950475600,-942012e3,-733352400,-719445600,-699483600,-684972e3,-668034e3,-654732e3,-636584400,-622072800,-605739600,-590623200,-57429e4,-558568800,-542235600,-527119200,-512600400,-496274400,-481150800,-46422e4,-449701200,-432165600,-417646800,-401320800,-386197200,-369266400,-354747600,-337816800,-323298e3,-306972e3,-291848400,-276732e3,-257979600,-245282400,-22653e4,-213228e3,-195080400,-182383200,-163630800,-150933600,-132181200,-119484e3,-100731600,-88034400,-68677200,-59004e3,57726e3,69818400,89175600,101268e3,120625200,132717600,152074800,164167200,183524400,196221600,214974e3,227671200,246423600,259120800,278478e3,290570400,309927600,32202e4,341377200,354675600,372823200,386125200,404272800,417574800,435722400,449024400,467776800,481078800,499226400,512528400,530676e3,543978e3,562125600,575427600,593575200,606877200,625629600,638326800,657079200,670381200,688528800,701830800,719978400,733280400,751428e3,76473e4,782877600,796179600,814327200,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174784400,1193536800,1206838800,1224986400,1238288400,1256436e3,1269738e3,1288490400,1301187600,131994e4,1332637200,1351389600,1364691600,1382839200,1396141200,1414288800,1427590800,1445738400,1459040400,1477792800,149049e4,1509242400,1521939600,1540692e3,1553994e3,1572141600,1585443600,1603591200,1616893200,1635645600,1648342800,1667095200,1679792400,1698544800,1711846800,1729994400,1743296400,1761444e3,1774746e3,1792893600,1806195600,1824948e3,1837645200,1856397600,1869094800,1887847200,1901149200,1919296800,1932598800],offset:[-1500,-1521,2079,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0]},"Europe/Oslo":{
time:[-2366755200,-1691881200,-1680566400,-927507600,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-765320400,-340840800,-324507600,-308786400,-293058e3,-277336800,-261608400,-245887200,-230158800,-214437600,-198709200,-182988e3,-166654800,-147909600,-135205200,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[2580,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]}}},"3jc8":function(e,t,i){"use strict";i.r(t),i.d(t,"showDeleteStudyTreeConfirm",(function(){return n}));var r=i("oNDq");function n(e){Object(r.createConfirmDialog)({type:"modal",title:window.t("Confirm Remove Study Tree"),content:window.t("Do you really want to delete study and all of it's children?")}).then((function(t){t.on("action:yes",(function(t){e(),t.close()})),t.open()}))}},"4O8T":function(e,t,i){var r;!function(t){"use strict";function n(){}var o=n.prototype,s=t.EventEmitter;function a(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function l(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,i,r=this._getEvents();if(e instanceof RegExp)for(i in t={},r)r.hasOwnProperty(i)&&e.test(i)&&(t[i]=r[i]);else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},o.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i},o.addListener=function(e,t){if(!function e(t){
return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var i,r=this.getListenersAsObject(e),n="object"==typeof t;for(i in r)r.hasOwnProperty(i)&&-1===a(r[i],t)&&r[i].push(n?t:{listener:t,once:!1});return this},o.on=l("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=l("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var i,r,n=this.getListenersAsObject(e);for(r in n)n.hasOwnProperty(r)&&-1!==(i=a(n[r],t))&&n[r].splice(i,1);return this},o.off=l("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,i){var r,n,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=i.length;r--;)o.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(n=t[r])&&("function"==typeof n?o.call(this,r,n):s.call(this,r,n));return this},o.removeEvent=function(e){var t,i=typeof e,r=this._getEvents();if("string"===i)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=l("removeEvent"),o.emitEvent=function(e,t){var i,r,n,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(i=s[o].slice(0),n=0;n<i.length;n++)!0===(r=i[n]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},o.trigger=l("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=s,n},void 0===(r=function(){return n}.call(t,i,t,e))||(e.exports=r)}(this||{})},"4QoS":function(e,t,i){"use strict";i.r(t),i.d(t,"takeChartSnapshot",(function(){return a})),i.d(t,"makeSnapshotRequest",(function(){return l}));var r=i("mrSG"),n=(i("HbRj"),i("YFKU"),i("Kxc7")),o=i("Gvuy"),s=i("BHQF");function a(e,t,i,n){var o;return void 0===n&&(n={}),Object(r.__awaiter)(this,void 0,void 0,(function(){var s,a,c,u,h,d,p,f;return Object(r.__generator)(this,(function(r){if(s=new FormData,void 0!==n.previews)for(a=0,c=n.previews;a<c.length;a++)u=c[a],s.append("previews[]",u);return void 0!==n.cme&&s.append("cme",String(n.cme)),void 0!==n.wl&&s.append("wl",String(n.wl)),void 0!==n.onWidget&&s.append("onWidget",String(n.onWidget)),n.isReport&&s.append("isReport",String(n.isReport)),(h=window.urlParams)&&h.locale&&s.append("language",h.locale),d=e.activeChartWidget.value(),
void 0!==(p=d.widgetCustomer())&&s.append("customer",p),"exchange"===(f=d.properties().childs().timezone.value())&&(f=(null===(o=d.model().mainSeries().symbolInfo())||void 0===o?void 0:o.timezone)||f),s.append("timezone",f),s.append("images",JSON.stringify(e.images())),l(s,t,i,n),[2]}))}))}function l(e,t,a,l){return void 0===l&&(l={}),Object(r.__awaiter)(this,void 0,void 0,(function(){var c,u,h,d;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:c=n.enabled("charting_library_base")?l.snapshotUrl||"https://www.tradingview.com/snapshot/":"/snapshot/",r.label=1;case 1:return r.trys.push([1,4,,5]),[4,Object(s.fetch)(c,{body:e,method:"POST",credentials:"same-origin"})];case 2:return[4,(u=r.sent()).text()];case 3:if(h=r.sent(),u.ok)t(h);else{if("suspicious_chart_snapshots_error"===h)return d=window.t("Snapshot seems to contain prohibited content. Please contact {start_link}our support team{end_link} if you have received this by mistake.").format({start_link:'<a class="tv-dialog__link js-send-report-link" href="#" data-issue-type="other">',end_link:"</a>"}),l.onInvalidSnapshotImage&&l.onInvalidSnapshotImage(),[2,Object(o.createErrorDialog)({title:window.t("Your snapshot was flagged as suspicious"),content:d,btnType:"danger"}).then((function(e){e.on("afterOpen",(function(){i.e("bug-dialog-creation-handler").then(function(t){(0,i("k2ji").bugDialogCreationHandler)(),e.$el.find(".js-send-report-link").click((function(){e.close()}))}.bind(null,i)).catch(void 0)})),e.open()}))];a()}return[3,5];case 4:return r.sent(),a(),[3,5];case 5:return[2]}}))}))}},"4TVt":function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolPriceAxisView",(function(){return o}));var r=i("mrSG"),n=i("Eyy1"),o=function(e){function t(t,i){var r=e.call(this)||this;return r._active=!1,r._source=t,r._data=i,r}return Object(r.__extends)(t,e),t.prototype.setActive=function(e){this._active=e},t.prototype._updateRendererData=function(e,t,i){e.visible=!1;var r=this._source.model();if(r.timeScale()&&!r.timeScale().isEmpty()){var n=this._source.priceScale();if(null!==n&&!n.isEmpty())if(r.selection().isSelected(this._source)||this._source.isForcedDrawPriceAxisLabel())if(null!==r.timeScale().visibleBarsStrictRange()){var o=this._source.axisPoints(),s=this._data.pointIndex;if(!(o.length<=s)){var a=o[s];if(isFinite(a.price)){var l=this._source.ownerSource(),c=null!==l?l.firstValue():null;if(null!==c){var u=this._active?"#1565C0":r.isDark()?"#1E88E5":"#2196F3";this._data.backgroundProperty?u=this._data.backgroundProperty.value():this._data.backgroundPropertyGetter&&(u=this._data.backgroundPropertyGetter()),i.background=u,i.borderColor="#2E84A6",i.color=this.generateTextColor(u),i.coordinate=n.priceToCoordinate(a.price,c),e.text=this._formatPrice(a.price,c),e.visible=!0}}}}}},t.prototype._formatPrice=function(e,t){return Object(n.ensureNotNull)(this._source.priceScale()).formatPrice(e,t)},t}(i("KcY8").a)},"4bfY":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Fib Circles");function a(e,t){
this._constructor="LineToolFibCircles";var n=t||a.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("FzRY").FibCirclesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);for(var s=[this._properties.child("trendline").child("linewidth")],l=1;l<=a.LevelsCount;l++)s.push(this._properties.child("level"+l).child("linewidth"));this._widthsProperty=new o(s)}inherit(a,r),a.LevelsCount=11,a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.pointsCount=function(){return 2},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Fib Circles"},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.createProperties=function(e){var t=new n("linetoolfibcircles",e,!1,{range:[1,11]});return a._configureProperties(t),t},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("6U6r").FibCirclesDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a._configureProperties=function(e){r._configureProperties(e)},t.LineToolFibCircles=a},"4kQX":function(e,t,i){"use strict";i.r(t),i.d(t,"TimeFormatter",(function(){return n}));var r=i("kcTO"),n=function(){function e(e){this._formatStr=e||"%h:%m:%s"}return e.prototype.format=function(e){return r.customFormatters.timeFormatter?r.customFormatters.timeFormatter.format(e):this._formatStr.replace("%h",Object(r.numberToStringWithLeadingZero)(e.getUTCHours(),2)).replace("%m",Object(r.numberToStringWithLeadingZero)(e.getUTCMinutes(),2)).replace("%s",Object(r.numberToStringWithLeadingZero)(e.getUTCSeconds(),2))},e.prototype.formatLocal=function(e){return r.customFormatters.timeFormatter?r.customFormatters.timeFormatter.formatLocal?r.customFormatters.timeFormatter.formatLocal(e):r.customFormatters.timeFormatter.format(e):this._formatStr.replace("%h",Object(r.numberToStringWithLeadingZero)(e.getHours(),2)).replace("%m",Object(r.numberToStringWithLeadingZero)(e.getMinutes(),2)).replace("%s",Object(r.numberToStringWithLeadingZero)(e.getSeconds(),2))},e}()},"4miz":function(e,t,i){"use strict";i.r(t),i.d(t,"DataWindowItem",(function(){return r})),i.d(t,"DataWindowView",(function(){return n}));var r=function(){function e(e,t){this._visible=!0,this._title=e,this._value=t}return e.prototype.title=function(){return this._title},e.prototype.setTitle=function(e){this._title=e},e.prototype.text=function(){return this._value},e.prototype.value=function(){return this._value},e.prototype.setValue=function(e){this._value=e},e.prototype.visible=function(){return this._visible},e.prototype.setVisible=function(e){this._visible=e},e.prototype.color=function(){return this._color},e.prototype.setColor=function(e){this._color=e},e}(),n=function(){function e(){this._items=[],this._header="",this._title=""}return e.prototype.header=function(){return this._header},e.prototype.title=function(){
return this._title},e.prototype.items=function(){return this._items},e.prototype.update=function(){},e}()},"4o++":function(e,t,i){"use strict";var r;i.r(t),i.d(t,"MagnetMode",(function(){return r})),function(e){e[e.WeakMagnet=0]="WeakMagnet",e[e.StrongMagnet=1]="StrongMagnet"}(r||(r={}))},"4u8j":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Gann Fan");function a(e,t){this._constructor="LineToolGannFan";var n=t||a.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("ZJWf").GannFanPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);for(var s=[],l=1;l<=a.LevelsCount;l++)s.push(this._properties.child("level"+l).child("linewidth"));this._widthsProperty=new o(s)}inherit(a,r),a.LevelsCount=9,a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.pointsCount=function(){return 2},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Gann Fan"},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("ASG6").GannFanDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a.createProperties=function(e){var t=new n("linetoolgannfan",e,!1,{range:[1,9]});return a._configureProperties(t),t},a._configureProperties=function(e){r._configureProperties(e)},t.LineToolGannFan=a},"4vW/":function(e,t,i){"use strict";var r;i.r(t),i.d(t,"ColorType",(function(){return r})),function(e){e.Solid="solid",e.Gradient="gradient"}(r||(r={}))},"55Xp":function(e,t,i){"use strict";function r(e){var t=e.toString(),i=t.split(".")[1],r=2;if(i){var n=i.match(/^([0]+)/);n&&(r=n[1].length+1)}return parseFloat(t).toFixed(r)}i.r(t),i.d(t,"roundToFirstValuable",(function(){return r}))},"5C6T":function(e,t,i){"use strict";i.r(t),i.d(t,"PipFormatter",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i,r,n){var o=this;return i||(i=1),"forex"!==r&&"cfd"!==r||!n?(o=e.call(this,1)||this)._isForex=!1:(o=e.call(this,n)||this)._isForex=!0,o._pipPriceScale=t,o._pipMinMove=i,o._pipMinMove2=n,o}return Object(r.__extends)(t,e),t.prototype.format=function(t,i,r){var n=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===n&&(n=NaN),e.prototype.format.call(this,t*this._pipPriceScale/n,i,r)},t}(i("kcTO").PriceFormatter)},"5VQP":function(e,t,i){"use strict";i.r(t),i.d(t,"ContextMenuManager",(function(){return r}));var r,n=i("mrSG"),o=i("tWVy");!function(e){var t=[];function r(){Object(o.b)()}e.createMenu=function(e,o,s){return void 0===o&&(o={}),Object(n.__awaiter)(this,void 0,void 0,(function(){var a,l;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:
return[4,Promise.all([i.e("vendors_embed"),i.e(8),i.e(19),i.e(23),i.e(40),i.e(216),i.e(276),i.e(0),i.e(7),i.e(17),i.e(176),i.e("context-menu-renderer")]).then(i.bind(null,"cbq4"))];case 1:return a=n.sent(),l=new a.ContextMenuRenderer(e,o,(function(){var e=t.indexOf(l);-1!==e&&t.splice(e,1),void 0!==s&&s()}),r),t.push(l),[2,l]}}))}))},e.hideAll=r,e.getShown=function(){for(var e=0;e<t.length;e++)if(t[e].isShown())return t[e];return null}}(r||(r={}))},"5ZUI":function(e,t,i){"use strict";var r=i("WPQD").LineToolTrendLine,n=i("Ocx9").DefaultProperty,o=window.t("Ray");function s(e,t){var i=t||s.createProperties();r.call(this,e,i),this._constructor="LineToolRay"}inherit(s,r),s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Ray"},s.createProperties=function(e){var t=new n("linetoolray",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolRay=s},"5fI3":function(e,t,i){"use strict";function r(e){return"="+JSON.stringify(e)}i.r(t),i.d(t,"encodeExtendedSymbol",(function(){return r}))},"5mo2":function(e,t,i){"use strict";i.r(t);var r=i("jCNj"),n=i("Y7w9"),o=i("txPx"),s=i("OBgQ"),a=Object(o.getLogger)("Chart.Model.SessionSpec");function l(e){return e>=48&&e<=57}var c=function(){function e(){this.entries=[],this.firstDayOfWeek=r.MONDAY,this.weekEndsCount=-1}return e.prototype.parseSessions=function(t,i){if(this._clear(),this.timezone=t,"24x7"===(i=this._parseFirstDayOfWeek(i)).toLowerCase())for(var r=0,n=h;r<n.length;r++){var o=n[r];this.entries.push(e._createSessionEntry(o,0,0,0,0))}else{for(var s=!1,l=new Map,c=0,d=i.split("|");c<d.length;c++){var f=d[c],_=f.split(":");if(1===_.length||2===_.length){var m=1===_.length;if(m){if(s){a.logError("Duplicated default section: "+f);continue}s=!0}for(var v=0,g=m?u:e._parseWorkingDays(_[1]);v<g.length;v++){var y=g[v];m&&l.has(y)||l.set(y,_[0])}}else a.logError("Bad session section: "+f)}for(var b=0,S=h;b<S.length;b++){y=S[b];var w=l.get(y);if(void 0!==w)for(var P=0,C=w.split(",");P<C.length;P++){var T=C[P];this.entries.push(e._parseSessionEntry(y,T))}}}this.entries.sort(p);for(var x=new Set,I=0,E=this.entries;I<E.length;I++){var L=E[I];x.add(L.dayOfWeek())}this.weekEndsCount=7-x.size},e.parseHolidaysAndCorrections=function(e,t,i){var n=this,o=new Map,s=new Map,a=function(e){var t=n._parseDay(e),i=t.toString(),r=s.get(i);return void 0!==r?r:(s.set(i,t),t)};if(""!==t)for(var l=[],c=0,u=t.split(",");c<u.length;c++){if(8!==(S=u[c]).length)throw new Error("bad holiday date: "+S);var h=a(S);o.set(h,l)}if(""===i)return o;for(var d=r.get_timezone("Etc/UTC"),p=0,_=i.split(";");p<_.length;p++){var m=_[p],v=m.split(":");if(2!==v.length)throw new Error("bad correction section: "+m);var g=[];if("dayoff"!==v[0])for(var y=0,b=v[0].split(",");y<b.length;y++){var S=b[y];g.push(this._parseSessionEntry(1,S))}for(var w=0,P=v[1].split(",");w<P.length;w++){if(8!==(S=P[w]).length)throw new Error("bad correction date: "+S);h=a(S);for(var C=r.get_day_of_week(r.get_cal(d,h.year,h.month-1,h.day)),T=[],x=0,I=g;x<I.length;x++){
var E=I[x];T.push(new f(C,E.startOffset(),E.length()))}o.set(h,T)}}return o},e.prototype._clear=function(){this.entries=[],this.timezone="",this.firstDayOfWeek=r.MONDAY,this.weekEndsCount=-1},e.prototype._parseFirstDayOfWeek=function(e){var t=e.split(";");if(t.length>2)return a.logError("Only one `first day` specification expected @ session "+e),e;if(1===t.length)return e;var i=1,n=t[0].indexOf("-")>=0?NaN:parseInt(t[0]);return isNaN(n)&&(i=0,n=parseInt(t[1])),n<r.SUNDAY||n>r.SATURDAY?(a.logError("Unexpected day index @ session: "+e+"; day index "+n),e):(this.firstDayOfWeek=n,t[i])},e._parseDay=function(e){var t=parseInt(e.substring(0,4)),i=parseInt(e.substring(4,6)),r=parseInt(e.substring(6,8));return new s.a(t,i,r)},e._parseSessionEntry=function(t,i){var r=i.split("-");2!==r.length&&(a.logError("Bad sessions entry: "+i),r=["0000","0000"]);var n=0,o=r[0];if(o.includes("F")){var s=o.split("F");o=s[0],n=""!==s[1]?parseInt(s[1]):1}var l=0,c=r[1];if(c.includes("F")){s=c.split("F");c=s[0],l=""!==s[1]?parseInt(s[1]):1}if(!this._isCorrectSession(o)||!this._isCorrectSession(c))throw new Error("Incorrect entry syntax: "+i);var u=o,h=c;return this._createSessionEntry(t,e._minutesFromHHMM(u),e._minutesFromHHMM(h),n,l)},e._isCorrectSession=function(e){return 4===e.length&&l(e.charCodeAt(0))&&l(e.charCodeAt(1))&&l(e.charCodeAt(2))&&l(e.charCodeAt(3))},e._parseWorkingDays=function(e){for(var t=[],i=0;i<e.length;i++){var r=+e[i];-1===t.indexOf(r)&&t.push(r)}return t},e._minutesFromHHMM=function(e){return r.get_minutes_from_hhmm(e)},e._createSessionEntry=function(e,t,i,n,o){return 0===i&&(i=r.minutesPerDay),n===o&&i<=t&&(n+=1),n>0&&(t-=n*r.minutesPerDay),o>0&&(i-=o*r.minutesPerDay),new f(e,t,i-t)},e}();i.d(t,"workingDays",(function(){return u})),i.d(t,"workingDaysAndWeekEnds",(function(){return h})),i.d(t,"compareSessionEntries",(function(){return p})),i.d(t,"SessionEntry",(function(){return f})),i.d(t,"EntryIndex",(function(){return _})),i.d(t,"SessionSpec",(function(){return v}));var u=[r.MONDAY,r.TUESDAY,r.WEDNESDAY,r.THURSDAY,r.FRIDAY],h=[r.SUNDAY,r.MONDAY,r.TUESDAY,r.WEDNESDAY,r.THURSDAY,r.FRIDAY,r.SATURDAY];function d(e,t){return e.compareTo(t)<0}function p(e,t){return e.compareTo(t)}var f=function(){function e(e,t,i){this._dayOfWeek=e,this._start=t,this._length=i}return e.prototype.start=function(){return this._start+r.minutesPerDay*this.sessionStartDaysOffset()},e.prototype.startOffset=function(){return this._start},e.prototype.sessionStartDaysOffset=function(){return this._start>=0?0:this._start%r.minutesPerDay==0?-Math.ceil(this._start/r.minutesPerDay):-Math.floor(this._start/r.minutesPerDay)},e.prototype.isOvernight=function(){return this._start<0},e.prototype.dayOfWeek=function(){return this._dayOfWeek},e.prototype.sessionStartDayOfWeek=function(){var e=this._dayOfWeek-this.sessionStartDaysOffset();return e<r.SUNDAY&&(e+=7),e},e.prototype.length=function(){return this._length},e.prototype.weight=function(){return this._dayOfWeek*r.minutesPerDay+this._start},e.prototype.compareTo=function(e){
var t=this.weight(),i=t+this._length,r=e.weight(),n=r+e._length;return t<=r&&r<i||r<=t&&t<n?0:t>r?1:-1},e.prototype.contains=function(e){var t=60*r.get_hours(e)+r.get_minutes(e),i=r.get_day_of_week(e)-this._dayOfWeek;i>0&&(i-=7);var n=i*r.minutesPerDay+t;return n>=this._start&&n<this._start+this._length},e}(),_=function(){function e(e,t,i){this.weekIndex=e,this.entryIndex=t,this.entries=i}return e.prototype.getEntry=function(){return this.entries[this.entryIndex]},e}();function m(e,t){var i=Object(n.lowerbound)(e,t,(function(e,t){return-1===e.day.compareTo(t)}));return i===e.length?null:e[i]}var v=function(){function e(e,t,i,n){var o=this;void 0===e&&(e="Etc/UTC"),void 0===t&&(t="0000-0000"),void 0===i&&(i=""),void 0===n&&(n=""),this._entries=[],this._firstDayOfWeek=r.MONDAY,this._entriesHash=new Map,this._holidayAndCorrectionMap=new Map,this._holidaySessions=[];var s=new c;s.parseSessions(e,t),this._entries=s.entries,this._timezone=s.timezone,this._firstDayOfWeek=s.firstDayOfWeek,this._weekEndsCount=s.weekEndsCount;var a=c.parseHolidaysAndCorrections(e,i,n),l=r.get_timezone(e);this._isThereCorrections=""!==i||""!==n,a.forEach((function(e,t){o._holidayAndCorrectionMap.set(t.toString(),e),o._holidaySessions.push({day:t,sessions:e});var i=o.getWeekIndex(t.toCalendar(l));o._entriesHash.set(i,null)})),this._holidaySessions.sort((function(e,t){return e.day.compareTo(t.day)}))}return e.prototype.entries=function(){return this._entries},e.prototype.timezone=function(){return this._timezone},e.prototype.firstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.addSessionEntry=function(e,t,i,n,o){0===i&&(i=r.minutesPerDay),n===o&&i<=t&&(n+=1),n>0&&(t-=n*r.minutesPerDay),o>0&&(i-=o*r.minutesPerDay);var s=i-t;this._entries.push(new f(e,t,s))},e.prototype.longestSessionLength=function(){for(var e=0,t=0,i=0,r=this._holidaySessions;i<r.length;i++){r[i].sessions.forEach((function(t){e=Math.max(e,t.length())}))}return this._entries.forEach((function(e){t=Math.max(t,e.length())})),Math.max(e,t)},e.prototype.isWeekEnd=function(e){var t=Object(n.lowerbound)(this._entries,new f(e,0,0),(function(e,t){return e.dayOfWeek()<t.dayOfWeek()}));return t>this._entries.length-1||this._entries[t].dayOfWeek()!==e},e.prototype.isCalWeekEnd=function(e){var t=r.get_day_of_week(e);if(!this._isThereCorrections)return this.isWeekEnd(t);var i=s.a.fromCalendar(e),n=this._holidayAndCorrectionMap.get(i.toString());return void 0===n?this.isWeekEnd(t):0===n.length},e.prototype.hasWeekEnds=function(){return this.weekEndsCount()>0},e.prototype.weekEndsCount=function(){return this._weekEndsCount},e.prototype.holidaysFromYearStart=function(e){if(!this._isThereCorrections)return 0;for(var t=r.get_timezone(this._timezone),i=new s.a(r.get_year(e),r.JANUARY,1),n=s.a.fromCalendar(e),o=0,a=this._selectHolidays(i,n),l=0;l<a.length;l++){var c=a[l].day.toCalendar(t);this.isWeekEnd(r.get_day_of_week(c))?o+=0===a[l].sessions.length?0:-1:o+=0===a[l].sessions.length?1:0}return o},e.prototype.intradayCanBeBuiltFrom24x7=function(e){
return this._entries.every((function(t){return t.start()%e==0&&t.length()%e==0}))},e.prototype.indexOfSession=function(e,t,i){var o=this._getEntriesForWeek(e),s=Object(n.lowerbound)(o,new f(t,i,0),d);if(s!==o.length)return new _(e,s,o);var a=e,l=7-t+this._firstDayOfWeek-1;for(i=-(r.minutesPerDay-i+l*r.minutesPerDay);;){a++;var c=this._getEntriesForWeek(a);if(0!==c.length)return s=Object(n.lowerbound)(c,new f(this._firstDayOfWeek,i,0),d),new _(a,s,c)}},e.prototype.findSession=function(e,t,i,r){void 0===r&&(r=0);var n=this.indexOfSession(e,t,i),o=n.entries,s=n.entryIndex;if(0!==r)for(var a=o[s].dayOfWeek(),l=r>0?1:-1;;){var c=s+l;if(c<0||c>=o.length||o[c].dayOfWeek()!==a)break;s=c}return new _(n.weekIndex,s,o)},e.prototype.getWeekIndex=function(e){if(!this._isThereCorrections)return 0;var t=r.get_day_of_week(e)-r.SUNDAY,i=r.get_timezone("Etc/UTC"),n=r.get_cal(i,r.get_year(e),r.get_month(e),r.get_day_of_month(e)-t);return Math.floor((n.getTime()+621672192e5)/1e3/86400/7)},e.prototype.correctTradingDay=function(e){var t=r.get_day_of_week(e),i=60*r.get_hours(e)+r.get_minutes(e),n=this.getWeekIndex(e),o=this.findSession(n,t,i,0),s=o.getEntry().dayOfWeek()-t+7*(o.weekIndex-n);return 0!==s&&r.add_date(e,s),e},e.prototype.alignToSessionStart=function(e,t){void 0===t&&(t=0);var i=r.get_day_of_week(e),n=60*r.get_hours(e)+r.get_minutes(e),o=this.getWeekIndex(e),s=this.findSession(o,i,n,t),a=s.getEntry(),l=a.dayOfWeek()-i+7*(s.weekIndex-o);0!==l&&r.add_date(e,l);var c=a.startOffset();return r.set_hms(e,c/60,c%60,0,0,r.get_timezone(this._timezone)),a.length()},e.prototype.businessDaysToCalendarDays=function(e,t){for(var i=this.getWeekIndex(e),n=r.get_day_of_week(e),o=0,s=0;s<t;){for(var a=this._getEntriesForWeek(i),l=0,c=n;c<=r.SATURDAY;c++){o++;for(var u=!0;l<a.length&&!(a[l].dayOfWeek()>c);)a[l].dayOfWeek()<c||u&&(u=!1,s++),l++;if(s>=t)return o}i++,n=r.SUNDAY}return o},e.prototype.calendarDaysToBusinessDays=function(e,t){for(var i=this.getWeekIndex(e),n=r.get_day_of_week(e),o=0,s=0;o<t;){for(var a=this._getEntriesForWeek(i),l=0,c=n;c<=r.SATURDAY;c++){o++;for(var u=!0;l<a.length&&!(a[l].dayOfWeek()>c);)a[l].dayOfWeek()<c||u&&(u=!1,s++),l++;if(o>=t)return s}i++,n=r.SUNDAY}return s},e.prototype.alignToNearestSessionStart=function(e,t){return this._alignToNearestSessionValue(e,t,this._entrySessionStart.bind(this))},e.prototype.alignToNearestSessionEnd=function(e,t){return this._alignToNearestSessionValue(e,t,this._entrySessionEnd.bind(this))},e.prototype.leftBorderOfDailyBar=function(e){var t=this._getEntriesForDay(e);return 0===t.length?null:(t.sort(p),this._getLeftEntryBorder(e,t[0]))},e.prototype.bordersOfDailyBar=function(e){var t=this._getEntriesForDay(e);if(0===t.length)return null;t.sort(p);var i=this._getLeftEntryBorder(e,t[0]),n=t[t.length-1],o=r.clone(e),s=60*(n.startOffset()+n.length())-1,a=Math.floor(s/3600);return s-=3600*a,r.set_hms(o,a,s/60,s%60,0,r.get_timezone(this._timezone)),{from:i,to:o}},e.prototype._getEntriesForWeek=function(e){var t=this._entriesHash.get(e);if(void 0===t)return this._entries
;if(null!==t)return t;var i=r.get_timezone(this._timezone);t=this._entries.slice();for(var n=this._weekIndexToCalendar(e),o=this._weekIndexToCalendar(e+1),a=s.a.fromCalendar(n),l=s.a.fromCalendar(o),c=function(e){var n=e.day.toCalendar(i),o=r.get_day_of_week(n);t=(t=t.filter((function(e){return e.dayOfWeek()!==o}))).concat(e.sessions)},u=0,h=this._selectHolidays(a,l);u<h.length;u++){c(h[u])}return t.sort(p),this._entriesHash.set(e,t),t},e.prototype._selectHolidays=function(e,t){for(var i=[],r=e;;){var n=m(this._holidaySessions,r);if(null===n)return i;if(!n.day.before(t))return i;i.push(n),r=n.day.addDays(1)}},e.prototype._weekIndexToCalendar=function(e){var t=1e3*(86400*e*7+86400)-621672192e5,i=r.get_cal_from_unix_timestamp_ms(r.get_timezone("Etc/UTC"),t),n=r.get_timezone("Etc/UTC");return r.get_cal(n,r.get_year(i),r.get_month(i),r.get_day_of_month(i))},e.prototype._alignToNearestSessionValue=function(e,t,i){var n=r.get_day_of_week(e),o=60*r.get_hours(e)+r.get_minutes(e),s=this.getWeekIndex(e),a=this.findSession(s,n,o);if(a.getEntry().contains(e)&&s===a.weekIndex||1===t)return i(a,r.clone(e),t);var l=a.entryIndex-1;if(l<0){for(var c=a.weekIndex,u=a.entries;l<0;)c--,l+=(u=this._getEntriesForWeek(c)).length;a=new _(c,l,u)}else a=new _(a.weekIndex,l,a.entries);return i(a,r.clone(e),t)},e.prototype._entrySessionStart=function(e,t,i){return this._entrySessionValue(e,t,i,(function(e){return 60*e.start()}))},e.prototype._entrySessionEnd=function(e,t,i){return this._entrySessionValue(e,t,i,(function(e){return 60*(e.start()+e.length())-1}))},e.prototype._entrySessionValue=function(e,t,i,n){var o=r.get_day_of_week(t),s=e.getEntry(),a=s.dayOfWeek()-s.sessionStartDaysOffset(),l=this.getWeekIndex(t),c=e.weekIndex-l,u=!1;if(a<r.SUNDAY&&(c<=0?u=!0:c--,a+=7),(c>0&&i>=0||c<0&&i<0)&&r.add_date(t,7*c),!s.contains(t)){var h=a-o;u&&i<0&&(h=-(7-a+o)),r.add_date(t,h),o=r.get_day_of_week(t)}s.isOvernight()&&o===s.dayOfWeek()&&r.add_date(t,-s.sessionStartDaysOffset());var d=n(s),p=Math.floor(d/3600);return d-=3600*p,r.set_hms(t,p,d/60,d%60,0,r.get_timezone(this._timezone)),t},e.prototype._getEntriesForDay=function(e){var t=r.get_day_of_week(e);return this._getEntriesForWeek(this.getWeekIndex(e)).filter((function(e){return e.dayOfWeek()===t}))},e.prototype._getLeftEntryBorder=function(e,t){var i=r.clone(e),n=t.startOffset();return r.set_hms(i,n/60,n%60,0,0,r.get_timezone(this._timezone)),i},e}()},"5rJj":function(e,t,i){"use strict";(function(t){var r=i("ogJP").isSameType,n=i("Ocx9").DefaultProperty,o=i("vADo");function s(e,t,i,r){this._map=Object.assign({},this._map,r),t&&(t=this.unpackLevels(t)),n.call(this,e,t,i),this.updateCollectibleProperty()}inherit(s,n),s.prototype.state=function(e,i){(e=e||[]).push("__collectibleLines");var r=t.prototype.state.call(this,e);return i?r:this.packLevels(r)},s.prototype.clone=function(){var e=this.state();this.__collectibleLines&&(e.__collectibleLines=this.__collectibleLines.state());for(var t=new s(this._defaultName,e),i=0;i<this._exclusions.length;++i)t.addExclusion(this._exclusions[i]);return t},
s.prototype.merge=function(e,i){var r=t.prototype.merge.call(this,this.unpackLevels(e),i);return this.updateCollectibleProperty(),r},s.prototype._map={prefixes:[""],range:[0,0],names:["coeff","color","visible","linestyle","linewidth"],typecheck:{pack:Object,unpack:Array}},s.prototype._packLvlTpl=function(){return[]},s.prototype._unpackLvlTpl=function(){return{}},s.prototype._packLvlFill=function(e,t,i,r){return r.push(i[t]),r},s.prototype._unpackLvlFill=function(e,t,i,r){return r[t]=i[e],r},s.prototype._iterateLevels=function(e,t){for(var i in this._map.prefixes)for(var n=(this._map.prefixes[i]||"")+"level",o=this._map.range[0];o<=this._map.range[1];o++)if(e[n+o]&&r(e[n+o],t.typecheck())){var s=t.tpl();for(var a in this._map.names)s=t.fill(a,this._map.names[a],e[n+o],s);e[n+o]=s}return e},s.prototype.packLevels=function(e){return this._iterateLevels(e,{tpl:this._packLvlTpl,fill:this._packLvlFill,typecheck:this._map.typecheck.pack})},s.prototype.unpackLevels=function(e){return this._iterateLevels(e,{tpl:this._unpackLvlTpl,fill:this._unpackLvlFill,typecheck:this._map.typecheck.unpack})},s.prototype.saveDefaults=function(){TradingView.saveDefaults(this._defaultName,this.state(this._exclusions,!0))},s.prototype.updateCollectibleProperty=function(){if(this.__collectibleLines){var e=this,t=[];this.__collectibleLines._childs.forEach((function(i){for(var r=e.__collectibleLines[i].value().split("."),n=e[r[0]],o=1;o<r.length&&n;++o)n=n[r[o]];n&&t.push({property:n.color,defaultValue:n.color.value()})})),this.collectibleColors?this.collectibleColors.reloadProperties(t):this.collectibleColors=new o(t)}},e.exports=s}).call(this,i("tc+8"))},"5vwb":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));var r=i("mrSG"),n=i("tqok"),o=i("hsV8");function s(e,t){for(var i=0,r=e.points;i<r.length;i++){var o=r[i];if(o.index>=t.length)return null;if(t[o.index]===n.INVALID_TIME_POINT_INDEX)return null}return{points:e.points.map((function(e){return{index:t[e.index],offset:e.offset,level:e.level}}))}}function a(e,t,i){return{id:t,points:e.points.map((function(e){return Object(r.__assign)(Object(r.__assign)({},e),{index:Object(o.ensureTimePointIndexIndex)(i.indexOf(e.index))})}))}}},"68at":function(e,t,i){"use strict";var r=i("5rJj"),n=i("9QkW").LineToolFibWedge,o=i("xUGI"),s=i("Ss5c").LineDataSource,a=window.t("Projection");function l(){o.call(this)}function c(e,t){this._constructor="LineToolProjection";var r=t||c.createProperties();s.call(this,e,r),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("jlk4").ProjectionLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(l,o),l.prototype.levelsCount=function(){return 1},inherit(c,n),c.prototype.levelsCount=function(){return 1},c.prototype.translatedType=function(){return a},c.prototype.name=function(){return"Projection"},c.prototype.hasEditableCoordinates=function(){return!1},c.prototype._getPropertyDefinitionsViewModelClass=function(){
return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("LzAw").ProjectionDefinitionsViewModel}.bind(null,i)).catch(i.oe)},c.createProperties=function(e){var t=new r("linetoolprojection",e,!1,{range:[1,1]});return c._configureProperties(t),t},c._configureProperties=function(e){n._configureProperties(e)},t.LineToolProjection=c},"6Fc/":function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererArrowsUpDownItem",(function(){return a})),i.d(t,"calculateVerticalOffset",(function(){return l})),i.d(t,"calculateMinHeight",(function(){return c})),i.d(t,"PaneRendererArrowsUpDown",(function(){return h}));var r=i("mrSG"),n=i("aO4+"),o=i("VdBB"),s=i("Hr11"),a=function(e){function t(t,i,r,n){var o=e.call(this,t,i)||this;return o.height=r,o.isUp=n,o}return Object(r.__extends)(t,e),t}(n.Point);function l(e){return Math.round(e/4)}function c(e){return u(e)}function u(e){return Math.round(e/2)}var h=function(){function e(e){this._data=e}return e.prototype.draw=function(e,t){var i=t.pixelRatio,r=this._data,n=u(r.barSpacing),o=l(r.barSpacing),a=n<4,c=Math.max(n/2,1),h=Object(s.ceiledEven)(n*i),d=h/2,p=Math.round(n*i);e.lineCap="butt",e.lineWidth=Math.max(1,Math.floor(i));for(var f=e.lineWidth%2?.5:0,_=0,m=r.items;_<m.length;_++){var v=m[_],g=v.isUp?-1:1,y=Math.round(Math.abs(v.height)*i),b=Math.round(v.x*i)+f,S=Math.round((v.y-g*o)*i)+f;e.beginPath(),e.translate(b,S),a?(e.moveTo(0,0),e.lineTo(-d,-d*g),e.moveTo(0,0),e.lineTo(d,-d*g),e.moveTo(0,0),e.lineTo(0,-y*g),e.moveTo(-d,-y*g),e.lineTo(d,-y*g),e.lineWidth=c,e.strokeStyle=v.isUp?r.colorup:r.colordown,e.stroke()):(e.moveTo(0,0),y<p?(e.lineTo(h,-y*g),e.lineTo(-h,-y*g)):(e.lineTo(h,-p*g),e.lineTo(d,-p*g),e.lineTo(d,-y*g),e.lineTo(-d,-y*g),e.lineTo(-d,-p*g),e.lineTo(-h,-p*g)),e.lineTo(0,0),e.strokeStyle=v.isUp?r.colorBorderUp:r.colorBorderDown,e.stroke(),e.fillStyle=v.isUp?r.colorup:r.colordown,e.fill()),e.translate(-b,-S)}},e.prototype.hitTest=function(e){for(var t=this._data,i=u(t.barSpacing),r=Math.round(i/2),n=Math.round(i),s=l(t.barSpacing),a=0,c=t.items;a<c.length;a++){var h=c[a];if(h&&(Number.isFinite(h.x)&&Number.isFinite(h.y))){var d=Math.abs(h.height),p=h.isUp?-1:1,f=d+n,_=h.y-p*s,m=_-p*f,v=h.x-r,g=h.x+r;if(v<e.x&&e.x<g&&(h.isUp?_<e.y&&e.y<m:m<e.y&&e.y<_))return new o.HitTestResult(o.HitTestResult.REGULAR)}}return null},e}()},"6Y0w":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));var r,n=i("mrSG"),o=i("tqok"),s=i("hsV8");function a(e,t){if(e.time>=t.length)return null;var i=t[e.time];return i===o.INVALID_TIME_POINT_INDEX?null:{time:i,price:e.price}}function l(e,t,i){var r=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.time));return Object(n.__assign)(Object(n.__assign)({id:t},e),{time:r})}!function(e){e.Circle="circle",e.ArrowUp="arrowUp",e.ArrowDown="arrowDown",e.ArrowRight="arrowRight",e.ArrowLeft="arrowLeft",e.Square="square"}(r||(r={}))},"6ctS":function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor" transform="translate(3 6)"><path d="M.964 8C3 4 6.679.5 11 .5 15.32.5 19 4 21.036 8 19 12 15.32 15.5 11 15.5 6.679 15.5 3 12 .964 8z"/><circle cx="11" cy="8" r="3.5"/></g></svg>'},"6et/":function(e,t,i){"use strict";i.r(t),i.d(t,"listen",(function(){return l})),i.d(t,"registerListener",(function(){return c})),i.d(t,"removeListener",(function(){return u})),i.d(t,"pushBackListener",(function(){return h})),i.d(t,"disable",(function(){return d})),i.d(t,"enable",(function(){return p}));var r=i("e3/o"),n=[],o=null;function s(e){for(var t=0;t<n.length;t++)if(n[t].name===e)return t;return-1}function a(e){if(!o)for(var t=n.length-1;t>=0&&!0!==n[t].func(e);t--);}function l(e){e.addEventListener("keypress",a,!1)}function c(e,t){var i={name:e,func:t},r=s(i.name);r>-1?n[r]=i:n.push(i)}function u(e){n.forEach((function(t,i){t.name===e&&n.splice(i,1)}))}function h(e,t){var i={name:e,func:t},r=s(i.name);r>-1&&n.splice(r,1),n.unshift(i)}function d(){return o?null:o=Object(r.randomHashN)(4)}function p(e){if(e!==o)throw Error("Lock id is outdated");o=null}l(window)},"6js9":function(e,t,i){"use strict";i.r(t),i.d(t,"showMagnetModeNotification",(function(){return n}));var r=i("mrSG");function n(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([i.e("vendors_embed"),i.e(347),i.e("magnet-mode-notification")]).then(i.bind(null,"rDe7"))];case 1:return[2,t.sent().showMagnetModeToast(e)]}}))}))}},"6ptY":function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererSquare",(function(){return s}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShape=function(e,t,i){var r=t.pixelRatio,n=Math.max(1,Math.floor(r))%2?.5:0,o=this._lineWidth(t)%2?.5:0,s=Math.round(i.height/2*r);(n+s)%1!=o%1&&(s+=.5);var a=Math.round(i.x*r)+n,l=Math.round((i.y+i.vertOffset)*r)+n,c=a-s,u=l-s,h=a+s,d=l+s;e.rect(c,u,h-c,d-u)},t.prototype._calcBoundingBox=function(t){var i=t.height,r=Math.round(i/2),n=t.x-r,s=t.vertOffset,a=t.y+s-r,l=n,c=n+i,u=a,h=a+i,d=new o.Point(l,u),p=new o.Point(c,h),f=Object(o.box)(d,p),_=e.prototype._calcBoundingBox.call(this,t);return _&&(f=this._unionBox(f,_)),f},t}(n.a)},"6sst":function(e,t,i){"use strict";i.r(t),i.d(t,"OverlayStudyPriceLineAxisView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t){var i=e.call(this)||this;return i._study=t,i}return Object(r.__extends)(t,e),t.prototype._value=function(){return this._study.lastValueData("",!0)},t.prototype._priceLineColor=function(e){return e},t.prototype._lineWidth=function(){return 1},t.prototype._isVisible=function(){var e=this._study.model().properties().scalesProperties.showSeriesLastValue.value();return this._study.properties().childs().showPriceLine.value()&&e},t}(i("TmNs").PriceLineAxisView)},"6xeX":function(e,t,i){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();i("oWyD");var n=i("Ialn"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i("ULlu")),s=i("ZZnO"),a=i("MbIA");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){var i=new Date(e+t),r=s.dateFormatProperty.value();return new a.DateTimeFormatter({dateFormat:r,timeFormat:"%h:%m",dateTimeSeparator:"   "}).format(i)}function u(e){return"string"==typeof e&&0!==e.trim().length}function h(e){if(!e||0===e.length)return!0;for(var t=0;t<e.length;t++){if(u(e[t])||e[t].id||u(e[t].title))return!1;if(e[t].lines)for(var i=e[t].lines,r=i.length,n=0;n<r;n++){var o=i[n];if(u(o)||u(o.line))return!1}}return!0}function d(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.hasOwnProperty("text")){var s=r&&(0,n.forceLTRStr)(e.text)||e.text;if(e.hasOwnProperty("color")&&i){var a=document.createElement("span");a.style.cssText="color: "+e.color,o.html(a,s),t.appendChild(a)}else o.html(t,s)}else{var l=r&&(0,n.forceLTRStr)(e)||e;o.html(t,l)}return t}function p(e,t){if(Array.isArray(e)&&2===e.length){var i=document.createElement("dl");i.appendChild(d(e[0],document.createElement("dt"))),i.appendChild(d(e[1],document.createElement("dd"),!0,!0)),t.appendChild(i)}else if(e.hasOwnProperty("br")&&e.br)t.appendChild(document.createElement("br"));else{var r=document.createElement("dl");r.appendChild(d(e,document.createElement("dt"))),t.appendChild(r),e.hasOwnProperty("listItem")&&r.classList.add("list-item")}}function f(e,t){var i=(0,n.forceLTRStr)(e.text);e.attr=e.attr||{};var r=document.createElement("a");o.attr(r,"href",e.href),o.addClass(r,e.class),o.attr(r,e.attr.name,e.attr.value),o.html(r,i),t.appendChild(r)}function _(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e){var r=(0,n.forceLTRStr)(e),s=document.createElement("h2");o.html(s,r),t.appendChild(s)}else if(e.hasOwnProperty("lines"))for(var a=0;a<e.lines.length;a++){var l=e.lines[a];if(l.hasOwnProperty("line"))if(0===a){if(!l.line.isEmpty){var u=document.createElement("h2");void 0!==l.options&&Boolean(l.options.noWrap)&&(u.style.whiteSpace="nowrap"),o.html(u,l.line),t.appendChild(u)}}else p(l.line,t);else l.hasOwnProperty("link")&&f(l.link,t)}else{if(e.hasOwnProperty("indicator")){var h=document.createElement("h2");o.html(h,e.indicator),t.appendChild(h)}if(e.hasOwnProperty("timestamp")){var d=document.createElement("dl");d.classList.add("tv-chart-events-tooltip-date");var _=document.createElement("dd");o.html(_,c(e.timestamp,i)||"—"),d.appendChild(_),t.appendChild(d)}var m=document.createElement("table")
;m.classList.add("tv-chart-events-table");var v=document.createElement("tr"),g=document.createElement("tr");m.appendChild(v),m.appendChild(g);var y=document.createElement("th");y.textContent=window.t("Actual"),v.appendChild(y);var b=document.createElement("th");b.textContent=window.t("Forecast"),v.appendChild(b);var S=document.createElement("th");S.textContent=window.t("Previous"),v.appendChild(S);var w=document.createElement("td"),P=e.actual&&(0,n.forceLTRStr)(e.actual);o.html(w,P||"—"),g.appendChild(w);var C=document.createElement("td"),T=e.forecast&&(0,n.forceLTRStr)(e.forecast);o.html(C,T||"—"),g.appendChild(C);var x=document.createElement("td"),I=e.previous&&(0,n.forceLTRStr)(e.previous);o.html(x,I||"—"),g.appendChild(x),t.appendChild(m)}}t.Tooltip=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.direction,r=void 0===i?"top":i,n=t.clickable,o=void 0!==n&&n,s=t.width;l(this,e),this._direction=r,this._tooltipShown=!1,this._tooltipX=void 0,this._tooltipY=void 0,this._tooltipItems=null,this._width=void 0!==s?s:200,this._tooltip=document.createElement("div"),this._tooltip.classList.add("tv-chart-events-source__tooltip"),this._tooltip.style.position="absolute",this._tooltip.style.width=this._width+"px",this._tooltipContent=document.createElement("div"),this._tooltipContent.classList.add("tv-chart-events-source__tooltip__content"),this._tooltip.appendChild(this._tooltipContent),o&&this._tooltip.classList.add("tv-chart-events-source__tooltip--clickable")}return r(e,[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,i=void 0===t?[]:t,r=e.x,n=void 0===r?0:r,s=e.y,a=void 0===s?0:s,l=e.wrapElement,c=void 0===l?null:l,u=e.timeOffset,d=void 0===u?"":u,p=e.leftBorderColor,f=void 0===p?null:p;if(c&&!h(i)){var m=o.contentWidth(c),v=o.contentHeight(c),g=!1,y=!1;if(this._tooltipShown||(c.appendChild(this._tooltip),this._tooltipShown=!0,g=!0,y=!0),n===this._tooltipX&&a===this._tooltipY||(g=!0),g){var b=Math.max(Math.min(n-this._width/2,m-this._width-10),0);this._tooltip.style.left=Math.round(b)+"px",this._tooltip.style.bottom=Math.round(v-a+10)+"px"}if(this._tooltipItems||(y=!0),!y)for(var S=i.length;S--;)if(this._tooltipItems[S]!==i[S]){y=!0;break}if(y){var w=void 0;if(i.length<=1)w=i;else{for(var P={},C=i.length;C--;){var T=i[C].importance;null==T&&(T=-1),P[T]||(P[T]=[]),P[T].push(i[C])}var x=Object.keys(P).sort((function(e,t){return e-t}));if(x.length<=1)w=P[x[0]];else{w=[];for(var I=x.length;I--;)for(var E=P[x[I]],L=E.length;L--;)w.push(E[L])}}this._tooltipContent.innerHTML="";for(var O=w.length;O--;){var A=w[O],M="";A.hasOwnProperty("importance")?("string"==typeof A.importance&&("earnings"===A.importance?M="--importance-earnings":"splits"===A.importance?M="--importance-splits":"dividends"===A.importance?M="--importance-dividends":"list"===A.importance&&(M="--importance-list")),0===A.importance?M="--importance-normal":A.importance>0&&(M="--importance-high")):f||(M="--importance-none");var k="tv-chart-events-source__tooltip__item"
;M&&(k+=" "+k+M);var D=document.createElement("div");o.attr(D,"class",k),f&&(D.style.borderLeftColor=f),_(A,D,d),this._tooltipContent.appendChild(D)}this._tooltipItems=i}"bottom"===this._direction&&(this._tooltip.style.bottom=Math.round(v-a-o.contentHeight(this._tooltipContent)+10)+"px")}}},{key:"hide",value:function(){this._tooltipShown&&(this._tooltip.parentElement&&this._tooltip.parentElement.removeChild(this._tooltip),this._tooltipShown=!1)}},{key:"isOpened",value:function(){return this._tooltipShown}},{key:"getElem",value:function(){return this._tooltip}}]),e}()},"7Fue":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return s}));var r=i("mrSG"),n=["horizlines","vertlines","lines","hlines","textmarks","shapemarks","backgrounds","polygons","trendchannels","hhists","dwglabels","dwglines"];function o(e){return!n.some((function(t){return e[t]().size>0}))}function s(e){var t=new Map;return e.forEach((function(e,i){e.forEach((function(e){var n=Object(r.__assign)(Object(r.__assign)({},e),{styleId:i}),o=e.firstBarTime,s=t.get(o);void 0===s&&(s=new Set,t.set(o,s)),s.add(n)}))})),t}},"7G8O":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("YFKU"),o=i("e3/o"),s=i("Vdly"),a=i("pA52"),l=i("eqEH"),c=i("aIyQ"),u=i.n(c),h=new u.a,d=new u.a,p=new u.a,f=new u.a,_=new u.a,m=i("Kxc7"),v=i.n(m);i.d(t,"SettingsSymbolList",(function(){return g})),i.d(t,"registerSettingsSymbolListBackend",(function(){return y}));var g=function(){function e(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=s),this._lists={},this._activeListSettingsKey="widgetbar.widget.watchlist",v.a.enabled("cqg_terminal")&&(this._activeListSettingsKey+="cqg"),v.a.enabled("trading_terminal")&&(this._activeListSettingsKey+="terminal"),this._settings=t,this._settings.onSync.subscribe(this,this._updateLists),this._updateLists(),0===Object.keys(this._lists).length){var i=this._createList({title:this._pickTitle(),symbols:Object(r.__spreadArrays)(e)});this.setActive(i.id)}}return e.prototype.destroy=function(){this._settings.onSync.unsubscribeAll(this)},e.prototype.getAllWatchLists=function(){return this.getCustomWatchLists()},e.prototype.getCustomWatchLists=function(){var e=this;this._updateLists();var t=[];return Object.keys(this._lists).forEach((function(i){var r=e._getList(i);r&&t.push(e._toSymbolList(r))})),Promise.resolve(t)},e.prototype.getSymbols=function(e){var t=this._getList(e.id);return null===t?Promise.resolve([]):Promise.resolve(t.symbols)},e.prototype.createWatchList=function(e){var t=this._createList({id:e.id,title:e.title||this._pickTitle(),symbols:e.symbols||[]});return p.fire(t.id,Object(r.__spreadArrays)(t.symbols)),Promise.resolve(this._toSymbolList(t))},e.prototype.putWatchList=function(e){this._updateLists();var t=this._getList(e.id),i=null==t?void 0:t.title,r=e.title;return this.saveList(e),void 0!==i&&i!==r&&_.fire(e.id,i,r),null!==t?h.fire(e.id):p.fire(e.id,e.symbols),Promise.resolve(e)},e.prototype.removeWatchList=function(e){var t=e.id;return this._settings.remove("savedwatch."+t,{forceFlush:!0}),
delete this._lists[t],f.fire(t),Promise.resolve()},e.prototype.renameWatchList=function(e,t){this._updateLists();var i=e.title;return e.title=t,this.saveList(e),_.fire(e.id,i,t),Promise.resolve(t)},e.prototype.replaceSymbols=function(e,t){var i=this._getList(e.id);return null===i||(i.symbols=Object(r.__spreadArrays)(t),this.saveList(i),h.fire(e.id)),Promise.resolve()},e.prototype.addSymbols=function(e,t){var i,n=this._getList(e.id);return null===n?Promise.resolve([]):((i=n.symbols).push.apply(i,t),this.saveList(n),h.fire(e.id),Promise.resolve(Object(r.__spreadArrays)(n.symbols)))},e.prototype.removeSymbols=function(e,t){var i=this._getList(e.id);return null===i?Promise.resolve([]):(i.symbols=i.symbols.filter((function(e){return!t.includes(e)})),this.saveList(i),h.fire(e.id),Promise.resolve(Object(r.__spreadArrays)(i.symbols)))},e.prototype.setActive=function(e){return this._settings.setValue(this._activeListSettingsKey,e),d.fire(),Promise.resolve()},e.prototype.getActive=function(){var e=this._getActive();return Promise.resolve(this._toSymbolList(e))},e.prototype.saveList=function(e){var t={symbols:e.symbols,title:String(e.title)};this._settings.setJSON("savedwatch."+e.id,t,{forceFlush:!0}),this._lists[e.id]=t},e.prototype._createList=function(e){var t,i={id:null!==(t=e.id)&&void 0!==t?t:Object(o.randomHash)(),symbols:e.symbols,title:e.title};return this.saveList(i),i},e.prototype._getList=function(e){if(this._updateLists(),this._lists.hasOwnProperty(e)){var t=this._lists[e];return{id:e,symbols:t.symbols.slice(),title:t.title}}return null},e.prototype._toSymbolList=function(e){return{type:"custom",id:e.id,title:e.title,symbols:e.symbols,color:null,isHotlist:!1}},e.prototype._updateLists=function(){var e=this;this._lists={},this._settings.keys().forEach((function(t){var i=/^savedwatch\.(.*)$/.exec(t);if(i){var r=i[1],n=e._settings.getJSON(t,null);n&&(n.symbols||(n.symbols=[]),e._lists[r]=n)}}))},e.prototype._getActive=function(){var e=this._settings.getValue(this._activeListSettingsKey),t=Object.entries(this._lists)[0],i=t[0],n=t[1],o=Object(r.__assign)({id:i},n);return void 0!==e&&this._getList(e)||o},e.prototype._pickTitle=function(){var e=this;this._updateLists();for(var t=Object.keys(this._lists).map((function(t){return e._lists[t].title})),i=1;;i++){var r=Object(n.t)("Watchlist")+(i>1?" ("+i+")":"");if(-1===t.indexOf(r))return r}},e}();function y(e){var t=new g(e);return Object(l.b)(a.a,t),function(){Object(l.d)(a.a)}}},"7KDR":function(e,t,i){"use strict";i.r(t),i.d(t,"Action",(function(){return c})),i.d(t,"ActionAsync",(function(){return u})),i.d(t,"Separator",(function(){return h}));var r=i("mrSG"),n=i("zRdu"),o=i("aIyQ"),s=i.n(o),a=i("/3z9"),l=i("e3/o"),c=function(){function e(e,t){void 0===t&&(t=l.guid()),this.type=n.a.Action,this._destroyed=!1,this._binding=null,this.id=t,this._onUpdate=new s.a,this._options=e,this.update(e)}return e.prototype.execute=function(){this._options.checkable&&this.update({checked:!this._options.checked}),this._options.onExecute&&this._options.onExecute(this)},
e.prototype.getLabel=function(){return this._options.label||""},e.prototype.getSubItems=function(){return this._options.subItems||[]},e.prototype.isDisabled=function(){return!0===this._options.disabled},e.prototype.isActive=function(){return!0===this._options.active},e.prototype.isCheckable=function(){return!0===this._options.checkable},e.prototype.isChecked=function(){return!0===this._options.checked},e.prototype.getPayload=function(){return this._options.payload},e.prototype.update=function(e){this._destroyed||(this._unbindShortcut(),e.hotkeyHash&&(this._options.shortcutHint=Object(a.humanReadableHash)(e.hotkeyHash)),this._options=Object.assign(this._options,e),this._bindShortcut(),this._onUpdate.fire(this))},e.prototype.onUpdate=function(){return this._onUpdate},e.prototype.getState=function(){return{label:this.getLabel(),disabled:this.isDisabled(),active:this.isActive(),subItems:this.getSubItems(),checkable:this.isCheckable(),checked:this.isChecked(),doNotCloseOnClick:this._options.doNotCloseOnClick||!1,shortcutHint:this._options.shortcutHint,hint:this._options.hint,icon:this._options.icon,iconChecked:this._options.iconChecked,toolbox:this._options.toolbox,showToolboxOnHover:this._options.showToolboxOnHover||!1,statName:this._options.statName,name:this._options.name,fullWidthLabel:this._options.fullWidthLabel}},e.prototype.getBinding=function(){return this._binding},e.prototype.setBinding=function(e){this._binding=e},e.prototype.destroy=function(){this._destroyed=!0,this._onUpdate.destroy(),null!==this._binding&&this._binding.destroy(),this._unbindShortcut()},e.prototype._bindShortcut=function(){var e=this;if(this._options.hotkeyGroup&&this._options.hotkeyHash){var t="string"==typeof this._options.label?this._options.label:this._options.name;this._hotkeyAction=this._options.hotkeyGroup.add({hotkey:this._options.hotkeyHash,desc:t,handler:function(){return e.execute()},isDisabled:function(){return e.isDisabled()}})}},e.prototype._unbindShortcut=function(){this._hotkeyAction&&(this._hotkeyAction.destroy(),delete this._hotkeyAction)},e}(),u=function(e){function t(t,i){var r=e.call(this,{},i)||this;return r.type=n.a.ActionAsync,r._loader=t,r._loaded=!1,r}return Object(r.__extends)(t,e),t.prototype.loadOptions=function(){var e=this;return this._loadingPromise||(this._loadingPromise=this._loader().then((function(t){e.update(t),e._loaded=!0}))),this._loadingPromise},t.prototype.isLoaded=function(){return this._loaded},t}(c),h=function(){function e(e,t){void 0===t&&(t=l.guid()),this.type=n.a.Separator,this.id=t,this._hint=e}return e.prototype.getHint=function(){return this._hint},e}()},"7MZv":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showTooManyStudiesNotice=function(e){"number"!=typeof e&&(e=TradingView.STUDY_COUNT_LIMIT,e=(0,r.getConfig)(n.ProductFeatures.STUDY_ON_STUDY).limit);(0,o.showNoticeDialog)({title:window.t("Warning"),content:window.t("Studies limit exceeded: {0} studies per layout.\nPlease, remove some studies.").format(e)})};var r=i("NP3r"),n=i("bKsZ"),o=i("brCa")},
"7ktv":function(e,t,i){"use strict";i.r(t),i.d(t,"PriceDataSource",(function(){return a}));var r=i("mrSG"),n=i("fgLi"),o=i("aIyQ"),s=i.n(o),a=function(e){function t(t){var i=e.call(this)||this;return i._formatterChanged=new s.a,i._priceStepChanged=new s.a,i._currencyChanged=new s.a,i._metaInfo=null,i._priceStep=null,i._model=t,i}return Object(r.__extends)(t,e),t.prototype.firstValue=function(){return null},t.prototype.barColorer=function(){return null},t.prototype.base=function(){return 0},t.prototype.model=function(){return this._model},t.prototype.currencyChanged=function(){return this._currencyChanged},t.prototype.isCurrencySource=function(){return!0},t.prototype.priceRange=function(e,t){return null},t.prototype.isDraggable=function(){return!this._metaInfo||!this._metaInfo.linkedToSeries},t.prototype.priceLineColor=function(e){return e},t.prototype.formatterChanged=function(){return this._formatterChanged},t.prototype.priceStep=function(e){return this._priceStep},t.prototype.priceStepChanged=function(){return this._priceStepChanged},t.prototype.hasStateForAlert=function(){return!1},t.prototype.isIncludedInAutoScale=function(){return!0},t}(n.DataSource)},"7nsU":function(e,t,i){"use strict";i.r(t),i.d(t,"showConfirmInputsDialog",(function(){return r}));i("YFKU");function r(e,t,r,n,o){void 0===o&&(o="default"),Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(6),i.e(8),i.e(12),i.e(18),i.e(20),i.e(21),i.e(22),i.e(30),i.e(35),i.e(34),i.e(73),i.e(77),i.e(104),i.e(158),i.e(211),i.e(364),i.e(0),i.e(7),i.e(9),i.e(25),i.e(32),i.e(66),i.e(97),i.e(174),i.e("new-confirm-inputs-dialog")]).then(i.bind(null,"iqv3")).then((function(i){var s=new i.ConfirmInputsDialogRenderer(function(e){if("symbol"===e)return window.t("Add Symbol");return window.t("Confirm Inputs")}(o),e,t,o,r,n);return s.show(),s}))}},"7qI1":function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolRectangle",(function(){return h}));var r=i("mrSG"),n=i("YFKU"),o=i("aO4+"),s=i("Ocx9"),a=i("tc+8"),l=i.n(a),c=i("Ss5c"),u=Object(n.t)("Rectangle"),h=function(e){function t(r,n){var o=this,s=n||t.createProperties();return(o=e.call(this,r,s)||this)._constructor="LineToolRectangle",Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=[new(0,i("GW0y").RectanglePaneView)(o,r)];o._setPaneViews(t)}.bind(null,i)).catch(void 0),o}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.translatedType=function(){return u},t.prototype.name=function(){return"Rectangle"},t.prototype.setPoint=function(t,i,r){if(t<2)e.prototype.setPoint.call(this,t,i,r);else{if(r&&r.shift()&&this.properties().childs().snapTo45Degrees){var n=this._getAnchorPointForIndex(t);if(t>=4)return this._correctMiddlePoints(t,i,n),void this.normalizePoints();this._snapPoint45Degree(i,n)}switch(t){case 2:this._points[1].price=i.price,this._points[0].index=i.index;break;case 3:this._points[0].price=i.price,this._points[1].index=i.index;break;case 4:this._points[0].index=i.index;break
;case 5:this._points[1].index=i.index;break;case 6:this._points[0].price=i.price;break;case 7:this._points[1].price=i.price}this.normalizePoints()}},t.prototype.template=function(){var t=e.prototype.template.call(this);return t.text=this.properties().childs().text.value(),t},t.createProperties=function(e){var i=new s.DefaultProperty("linetoolrectangle",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"K4wI")).then((function(e){return e.RectangleDefinitionsViewModel}))},t.prototype._applyTemplateImpl=function(t){e.prototype._applyTemplateImpl.call(this,t),this.properties().childs().text.setValue(t.text)},t.prototype._snapPoint45Degree=function(e,t,i){var r=this.m_priceScale,n=this.ownerSource();if(null!==r&&null!==n){var o=n.firstValue();if(null!==o){var s=this._model.timeScale(),a=this.pointToScreenPoint(e)[0],l=this.pointToScreenPoint(t)[0],c=a.x-l.x,u=a.y-l.y,h=c<0?-1:1,d=u<0?-1:1,p=Math.max(Math.abs(c),Math.abs(u)),f=Math.round(s.coordinateToIndex(l.x+p*h)),_=Math.abs(s.indexToCoordinate(f)-l.x),m=r.coordinateToPrice(l.y+_*d,o);e.index=f,e.price=m}}},t.prototype._correctMiddlePoints=function(e,t,i){e<6?this._correctRightLeftMiddlePoint(e,t,i):this._correctTopBottomMiddlePoint(e,t,i)},t.prototype._correctRightLeftMiddlePoint=function(e,t,i){var r=this.pointToScreenPoint(t)[0],n=this.pointToScreenPoint(i)[0],s=this.pointToScreenPoint(this._points[0])[0],a=this.pointToScreenPoint(this._points[1])[0],l=r.x-n.x;if(0!==l){var c=s.x<a.x?1:-1,u=s.y<a.y?1:-1;switch(l*=c,e){case 4:var h=a.y-u*l/2,d=this.screenPointToPoint(new o.Point(a.x,h));this._points[1].price=d.price;var p=this.screenPointToPoint(new o.Point(s.x+c*l,s.y+u*l/2));this._points[0].price=p.price,this._points[0].index=p.index;break;case 5:var f=s.y-u*l/2;p=this.screenPointToPoint(new o.Point(s.x,f));this._points[0].price=p.price;d=this.screenPointToPoint(new o.Point(a.x+c*l,a.y+u*l/2));this._points[1].price=d.price,this._points[1].index=d.index}}},t.prototype._correctTopBottomMiddlePoint=function(e,t,i){var r=this.m_priceScale,n=this.ownerSource();if(null!==r&&null!==n){var s=this._model.timeScale(),a=n.firstValue();if(null!==a){var l=this.pointToScreenPoint(t)[0],c=this.pointToScreenPoint(i)[0],u=this.pointToScreenPoint(this._points[0])[0],h=this.pointToScreenPoint(this._points[1])[0],d=l.y-c.y,p=d<0?-1:1,f=u.x<h.x?1:-1,_=u.y<h.y?1:-1;switch(e){case 6:var m=Math.floor(h.x-f*d/2),v=this.screenPointToPoint(new o.Point(m,h.y)),g=Math.abs(this._points[1].index-v.index);if(0===(b=f*_*p*Math.ceil(g/2)))return;this._points[1].index=this._points[1].index-b;var y=p*Math.abs(s.indexToCoordinate(this._points[1].index)-h.x);this._points[0].price=r.coordinateToPrice(u.y+y,a),this._points[0].index=this._points[0].index+b;break;case 7:var b,S=Math.floor(u.x-f*d/2),w=this.screenPointToPoint(new o.Point(S,u.y));g=Math.abs(this._points[0].index-w.index);if(0===(b=f*_*p*Math.ceil(g/2)))return
;this._points[0].index=this._points[0].index-b;y=p*Math.abs(s.indexToCoordinate(this._points[0].index)-u.x);this._points[1].price=r.coordinateToPrice(h.y+y,a),this._points[1].index=this._points[1].index+b}}}},t._configureProperties=function(e){c.LineDataSource._configureProperties(e),e.hasChild("text")||e.addChild("text",new l.a("")),e.addExclusion("text")},t.prototype._getAnchorPointForIndex=function(e){var t=this.points(),i=t[0],r=t[1],n=0,o=0;switch(e){case 0:n=r.price,o=r.index;break;case 1:n=i.price,o=i.index;break;case 2:n=i.price,o=r.index;break;case 3:n=r.price,o=i.index;break;case 4:n=(r.price+i.price)/2,o=i.index;break;case 5:n=(r.price+i.price)/2,o=r.index;break;case 6:n=i.price,o=(r.index+i.index)/2;break;case 7:n=r.price,o=(r.index+i.index)/2}return{index:o,price:n}},t}(c.LineDataSource)},"7qT/":function(e,t,i){"use strict";function r(e,t){return 100*(t-e)/Math.abs(e)}i.d(t,"a",(function(){return r}))},"8C8C":function(e,t,i){"use strict";i.r(t),i.d(t,"RestoreFactoryDefaultsUndoCommand",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i,r){void 0===r&&(r="Restore Defaults");var n=e.call(this,r)||this;return n._chartModel=t,n._defaultProperty=i,n._state=i.state(),n}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._chartModel.restoreFactoryDefaults(this._defaultProperty)},t.prototype.undo=function(){this._defaultProperty.mergeAndFire(this._state),this._chartModel.mainSeries().onChartStyleChanged()},t}(i("RDU5").UndoCommand)},"8GoI":function(e,t,i){"use strict";i.r(t);var r=i("+GxX"),n=i("BHQF"),o=i("h7NA");function s(){var e=document.querySelector('link[rel~="chart-storage"]'),t=new URL((null==e?void 0:e.href)||"/charts-storage/",location.href);return t.pathname.endsWith("/")||(t.pathname+="/"),t}var a=function(){function e(){this._token=Object(o.getInitData)().chartsStorageToken}return e.prototype.saveLineToolsAndGroups=function(e,t,i){var r=new URL("layout/"+e+"/sources",s());r.searchParams.append("chart_id",t),r.searchParams.append("jwt",this._token);var o=function(e){var t={sources:{}};return e.sources.forEach((function(e,i){t.sources[i]=e})),t.drawing_groups={},e.groups.forEach((function(e,i){t.drawing_groups[i]=e})),JSON.stringify(t)}(i);return Object(n.fetch)(r.toString(),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:o}).then((function(e){if(!e.ok)throw new Error("Response status is not success");return e.json()})).then((function(e){return{content:e}}))},e.prototype.loadLineToolsAndGroups=function(e,t,i){var r=new URL("layout/"+e+"/sources",s());return r.searchParams.append("chart_id",t),r.searchParams.append("jwt",this._token),"mainSeriesLineTools"===i.requestType?(r.searchParams.append("symbol",i.symbol),r.searchParams.append("includeOwnerSource",i.seriesSourceId)):r.searchParams.append("excludeOwnerSource",i.seriesSourceId),Object(n.fetch)(r.toString(),{method:"GET",credentials:"include"}).then((function(e){if(!e.ok)throw new Error("Response status is not success");var t=e.headers.get("X-Request-Id")
;return e.json().then((function(e){if(null===e)throw new Error("Body is null");if(!e.success)throw new Error("Response is not success");return function(e,t){var i={sources:new Map,groups:new Map};for(var r in e.sources||{}){var n=e.sources[r];i.sources.set(r,n)}for(var r in e.drawing_groups||{}){n=e.drawing_groups[r];i.groups.set(r,n)}return null!==t&&(i.serverRequestId=t),i}(e.payload||{},t)}))}))},e}(),l=function(){function e(){}return e.prototype.saveLineToolsAndGroups=function(e,t,i){return Promise.resolve({content:{}})},e.prototype.loadLineToolsAndGroups=function(e,t,i){return Promise.resolve(null)},e}();function c(){return Object(r.isFeatureEnabled)("charts_storage_support")&&Object(o.getInitData)().chartsStorageToken?new a:new l}i.d(t,"getChartStorage",(function(){return c}))},"8OdW":function(e,t,i){"use strict";i.r(t),i.d(t,"MINUTE_SPAN",(function(){return r})),i.d(t,"HOUR_SPAN",(function(){return n})),i.d(t,"DAY_SPAN",(function(){return o})),i.d(t,"WEEK_SPAN",(function(){return s})),i.d(t,"MONTH_SPAN",(function(){return a})),i.d(t,"YEAR_SPAN",(function(){return l})),i.d(t,"DEFAULT_BAR_SPACING",(function(){return c}));var r=20,n=30,o=40,s=50,a=60,l=70,c=6},"8Uy/":function(e,t,i){"use strict";i.r(t),i.d(t,"LINESTYLE_SOLID",(function(){return r})),i.d(t,"LINESTYLE_DOTTED",(function(){return n})),i.d(t,"LINESTYLE_DASHED",(function(){return o})),i.d(t,"LINESTYLE_LARGE_DASHED",(function(){return s})),i.d(t,"LINESTYLE_SPARSE_DOTTED",(function(){return a})),i.d(t,"LINESTYLE_SMALL_DASHED",(function(){return l}));var r=0,n=1,o=2,s=3,a=4,l=5},"8aff":function(e,t,i){"use strict";i.r(t),i.d(t,"CompareStudyPriceAxisView",(function(){return o}));var r=i("mrSG"),n=i("oXaB"),o=function(e){function t(t,i){var r=e.call(this)||this;return r._studyCompare=t,r._data=i,r}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1;var r=this._studyCompare.lastValueData(this._data.plotIndex,!1);if(!r.noData){i.background=r.color,i.color=this.generateTextColor(r.color),i.coordinate=r.coordinate,i.floatCoordinate=r.floatCoordinate;var o=this._studyCompare.model().properties().scalesProperties;o.showSeriesLastValue.value()&&(e.text=this._axisText(r),e.visible=!0),t.text="",(o.showSymbolLabels.value()||o.seriesLastValueMode.value()===n.PriceAxisLastValueMode.LastPriceAndPercentageValue)&&(t.text=this._paneText(r),t.visible=t.text.length>0)}},t.prototype._paneText=function(e){var t="",i=this._studyCompare.model().properties().scalesProperties;i.showSymbolLabels.value()&&(t+=this._studyCompare.symbol()+" ");var r=this._studyCompare.priceScale();return null!==r&&i.showSeriesLastValue.value()&&i.seriesLastValueMode.value()===n.PriceAxisLastValueMode.LastPriceAndPercentageValue&&(t+=r.isPercentage()?e.formattedPriceAbsolute:e.formattedPricePercentage),t.trim()},t.prototype._axisText=function(e){var t=this._studyCompare.model().properties().scalesProperties,i=this._studyCompare.priceScale()
;return t.seriesLastValueMode.value()!==n.PriceAxisLastValueMode.LastPriceAndPercentageValue||null===i?e.text:i.isPercentage()?e.formattedPricePercentage:e.formattedPriceAbsolute},t}(i("KcY8").a)},"8pII":function(e){e.exports=JSON.parse('{"content":{"chartProperties":{"scalesProperties":{"textColor":"#B2B5BE","lineColor":"#2A2E39","backgroundColor":"#ffffff"},"paneProperties":{"vertGridProperties":{"color":"#1E222D"},"horzGridProperties":{"color":"#1E222D"},"background":"#131722","backgroundGradientStartColor":"#131722","backgroundGradientEndColor":"#131722"}},"sessions":{"graphics":{"backgrounds":{"outOfSession":{"color":"#2196F3","transparency":92},"preMarket":{"color":"#FF9800","transparency":92},"postMarket":{"color":"#2196F3","transparency":92}},"vertlines":{"sessBreaks":{"color":"#4985e7","style":2,"width":1}}}},"mainSourceProperties":{"baseLineColor":"#5d606b","candleStyle":{"borderColor":"#378658","upColor":"#26a69a","wickColor":"#B5B5B8","wickUpColor":"#26a69a","wickDownColor":"#ef5350","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350"},"haStyle":{"borderColor":"#378658","upColor":"#26a69a","wickColor":"#B5B5B8","wickUpColor":"#26a69a","wickDownColor":"#ef5350","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350"},"barStyle":{"downColor":"#ef5350","upColor":"#26a69a"},"pnfStyle":{"downColor":"#ef5350","upColor":"#26a69a","upColorProjection":"#336854","downColorProjection":"#7f323f"},"baselineStyle":{"baselineColor":"rgba( 117, 134, 150, 1)","topFillColor1":"rgba( 38, 166, 154, 0.28)","topFillColor2":"rgba( 38, 166, 154, 0.05)","bottomFillColor1":"rgba( 239, 83, 80, 0.05)","bottomFillColor2":"rgba( 239, 83, 80, 0.28)","topLineColor":"rgba( 38, 166, 154, 1)","bottomLineColor":"rgba( 239, 83, 80, 1)"},"areaStyle":{"transparency":100,"color1":"rgba(33, 150, 243, 0.28)","color2":"#2196f3","linecolor":"#2196f3","linewidth":2,"linestyle":0},"renkoStyle":{"upColor":"#26a69a","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350","upColorProjection":"#336854","downColorProjection":"#7f323f","borderUpColorProjection":"#336854","borderDownColorProjection":"#7f323f","wickUpColor":"#26a69a","wickDownColor":"#ef5350"},"lineStyle":{"color":"#2196f3","linewidth":2,"linestyle":0},"kagiStyle":{"downColor":"#ef5350","upColor":"#26a69a","upColorProjection":"#336854","downColorProjection":"#7f323f"},"pbStyle":{"upColor":"#26a69a","downColor":"#ef5350","borderUpColor":"#26a69a","borderDownColor":"#ef5350","upColorProjection":"#336854","downColorProjection":"#7f323f","borderUpColorProjection":"#336854","borderDownColorProjection":"#7f323f"},"rangeStyle":{"upColor":"#26a69a","downColor":"#ef5350","upColorProjection":"#336854","downColorProjection":"#7f323f"}}}}')},"8qoI":function(e,t,i){"use strict";i.r(t),i.d(t,"StudyLegendView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._showStudyValues=i.properties().paneProperties.legendProperties.showStudyValues,r._showStudyValues.subscribe(r,r.update),r}
return Object(r.__extends)(t,e),t.prototype.isValuesVisible=function(){return this._showStudyValues.value()},t.prototype.additional=function(){return null},t.prototype.destroy=function(){this._showStudyValues.unsubscribeAll(this)},t.prototype._updateImpl=function(){e.prototype._updateImpl.call(this);for(var t=this._showStudyValues.value(),i=0,r=this._items;i<r.length;i++){var n=r[i];n.setVisible(n.visible()&&t)}},t}(i("it7y").StudyDataWindowView)},"8sOK":function(e,t,i){"use strict";i.r(t),i.d(t,"StudyStub",(function(){return h}));var r=i("mrSG"),n=i("2kV1"),o=i("7ktv"),s=i("kcTO"),a=i("aIyQ"),l=i.n(a),c=i("tc+8"),u=i.n(c),h=function(e){function t(t,i,r){var o=e.call(this,t)||this;o._priceStep=.01,o._status=window.t("compiling..."),o._statusChanged=new l.a,o._formatter=new s.PriceFormatter(100),o._failed=!1,o._loading=!0,o._origState=i,o._title=r;return o._properties=new u.a({visible:!0}),o._statusView=new n.StudyStatusView(o,o._model.properties().scalesProperties.textColor),o._statusView.setText(o._title+" "+o._status),o}return Object(r.__extends)(t,e),t.prototype.properties=function(){return this._properties},t.prototype.statusView=function(){return this._statusView},t.prototype.legendView=function(){return null},t.prototype.state=function(e){return this._origState},t.prototype.setStatus=function(e){this._status=e,this._statusView.setText(this._title+" "+this._status),this._statusChanged.fire()},t.prototype.formatter=function(){return this._formatter},t.prototype.title=function(){return this._title},t.prototype.titleInParts=function(){return[this._title,void 0]},t.prototype.isFailed=function(){return this._failed},t.prototype.isLoading=function(){return this._loading},t.prototype.setFailed=function(e){this._failed=e,this._failed&&(this._loading=!1)},t.prototype.isSymbolInvalid=function(){return!1},t.prototype.start=function(){},t.prototype.status=function(){return this._status},t.prototype.onStatusChanged=function(){return this._statusChanged},t.prototype.firstValue=function(){return null},t.prototype.currency=function(){return null},t.prototype.symbolSource=function(){return this._model.mainSeries()},t}(o.PriceDataSource)},"8woN":function(e,t,i){"use strict";(function(t){var i=[{d:"E-Mini S&P 500",t:"ES"},{d:"E-Mini Nasdaq 100",t:"NQ"},{d:"Gold",t:"GC"},{d:"Silver",t:"SI"},{d:"Crude Oil WTI",t:"CL"},{d:"Natural Gas",t:"NG"},{d:"Australian Dollar",t:"6A"},{d:"Australian Dollar (Floor)",t:"AD"},{d:"Euro FX",t:"6E"},{d:"Euro FX (Floor)",t:"EC"},{d:"Corn",t:"ZC"},{d:"Corn (Floor)",t:"C"},{d:"Eurodollar",t:"GE"},{d:"Eurodollar (Floor)",t:"ED"}],r=function(){var e=[{pattern:"(",ctor:s},{pattern:")",ctor:a},{pattern:"+",ctor:c},{pattern:"-",ctor:u},{pattern:"*",ctor:h},{pattern:"/",ctor:d},{pattern:"^",ctor:p},{pattern:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:.&]))|\.\d+/,ctor:v},{pattern:/\./,ctor:b},{
pattern:t.enabled("charting_library_base")?/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF^][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!:.&]*|'.+?'/:/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!|:.&]*|'.+?'/,ctor:m},{pattern:/'[^']*/,ctor:y},{pattern:/[\0-\x20\s]+/,ctor:o}];function r(e,t){var i=function(){};return i.prototype=t.prototype,e.prototype=new i,e}function n(){}function o(e){this.value=e}function s(){}function a(){}function l(){}function c(){}function u(){}function h(){}function d(){}function p(){}n.prototype.toString=function(){return this.value},r(o,n),r(s,n),s.prototype.value="(",r(a,n),a.prototype.value=")",r(l,n),r(c,l),c.prototype.value="+",c.prototype.precedence=0,c.prototype.commutative=!0,r(u,l),u.prototype.value="-",u.prototype.precedence=0,u.prototype.commutative=!1,r(h,l),h.prototype.value="*",h.prototype.precedence=1,h.prototype.commutative=!0,r(d,l),d.prototype.value="/",d.prototype.precedence=1,d.prototype.commutative=!1,r(p,l),p.prototype.value="^",p.prototype.precedence=2,p.prototype.commutative=!1;var f=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i,_=/[+\-/*]/;function m(e){this.value=e}function v(e){this.value=e}function g(e){this.value=e}function y(){m.apply(this,arguments)}function b(){v.apply(this,arguments)}r(m,n),m.prototype.toString=function(){if(this.hasOwnProperty("_ticker")){var e=_.test(this._ticker)?"'":"";return e+(this._exchange?this._exchange+":":"")+this._ticker+e}return this.value},m.prototype.parse=function(){var e=f.exec(this.value);e[1]&&(this._exchange=e[1]),this._ticker=e[2]},m.prototype.parseAsFutures=function(){this.hasOwnProperty("_ticker")||this.parse();for(var e=function(e){return i.some((function(t){return t.t===e}))},t=2;t>=1;--t){var r=this._ticker.slice(0,t);if(e(r)){this._root=r,this._contract=this._ticker.slice(t);break}}},m.prototype.exchange=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._exchange;null==e?delete this._exchange:this._exchange=e+""},m.prototype.ticker=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._ticker;null==e?delete this._ticker:this._ticker=e+"",delete this._root,delete this._contract},m.prototype.root=function(e){if(this.hasOwnProperty("_root")||this.parseAsFutures(),!(arguments.length>0))return this._root;null==e?delete this._root:(this._root=e+"",this._root&&(this._ticker=this._root+(this._contract||"")))},m.prototype.contract=function(e){if(this.hasOwnProperty("_contract")||this.parseAsFutures(),!(arguments.length>0))return this._root;null==e?delete this._contract:(this._contract=e+"",this._root&&(this._ticker=this._root+this._contract))},r(v,n),v.prototype.toString=function(){return this.hasOwnProperty("_normalizedValue")?this._normalizedValue:this.value},v.prototype.parse=function(){this._normalizedValue=this.value.replace(/^0+|\.0*$/g,"").replace(/(\.\d*?)0+$/,"$1").replace(/^(\.|$)/,"0$1")},g.prototype.toString=function(){return this.value},r(y,m),y.prototype.isIncomplete=!0,
y.prototype.incompleteSuggest=function(){if("'"!==this.value)return String("'")},r(b,v),b.prototype.isIncomplete=!0;var S=new RegExp(e.map((function(e){return"("+("string"==typeof e.pattern?e.pattern.replace(/[\^$()[\]{}*+?|\\]/g,"\\$&"):e.pattern.source)+")"})).concat(".").join("|"),"g");function w(t,i){var r,n=[];e:for(;r=S.exec(t);){for(var s=e.length;s--;)if(r[s+1]){if(e[s].ctor){var a=new e[s].ctor(r[s+1]);a._offset=r.index,n.push(a)}continue e}var l=new g(r[0]);l._offset=r.index,n.push(l)}if(i&&i.recover){var c;for(s=n.length;s--;){var u=n[s];if(u instanceof v||u instanceof m){if(void 0!==c){var h=new m(""),d=n.splice(s,c-s+1,h);h.value=d.map((function(e){return e.value})).join("")}c=s}else u instanceof o||(c=void 0)}}return n}function P(e){for(var t=[],i=0;i<e.length;i++)e[i]instanceof o||t.push(e[i]);return t}function C(e){e=P(e);for(var t,i=[],r=[],n=0;n<e.length;n++){var o=e[n];if(o instanceof l)r.length&&r[r.length-1].minPrecedence>o.precedence&&(r[r.length-1].minPrecedence=o.precedence);else if(o instanceof s)r.push(t={minPrecedence:1/0,openBraceIndex:n});else if(o instanceof a){var c=e[(t=r.pop()).openBraceIndex-1],u=e[n+1];u instanceof l&&!(u.precedence<=t.minPrecedence)||!(!(c instanceof l)||c.precedence<t.minPrecedence||c.precedence===t.minPrecedence&&c.commutative)||(i.unshift(t.openBraceIndex),i.push(n),r.length&&r[r.length-1].minPrecedence>t.minPrecedence&&(r[r.length-1].minPrecedence=t.minPrecedence))}}for(n=i.length;n--;)e.splice(i[n],1);return e}function T(e){if("string"!=typeof e)throw new TypeError("expression must be a string");return(e=w(e)).filter((function(e){return e instanceof m})).map((function(e){return e.exchange()})).filter((function(e){return e}))}function x(e){return 1!==(e=T(e)).length?null:e[0]}function I(e,t){return(e=T(e)).some((function(e){return t.includes((e||"").toUpperCase())}))}function E(e){return e.join("")}return{tokenize:w,validate:function(e){if(t.enabled("charting_library_base"))return{currentState:"var"};for(var i="init",r={warnings:[],errors:[],isEmpty:!0},n=[],c=0;c<e.length;c++){if(!((h=e[c])instanceof o)){if(delete r.isEmpty,h.isIncomplete){var u={status:"incomplete",reason:"incomplete_token",offset:h._offset,token:h};if(h.incompleteSuggest&&(u.recover={append:h.incompleteSuggest()}),r.warnings.push(u),c!==e.length-1){u.status="error";continue}}if(h instanceof m||h instanceof v){if("var"===i){r.errors.push({status:"error",reason:"unexpected_token",offset:h._offset,token:h});continue}i="var"}else if(h instanceof l){if("var"!==i){r.errors.push({status:"error",reason:"unexpected_token",offset:h._offset,token:h});continue}i="operator"}else if(h instanceof s){if("var"===i){r.errors.push({status:"error",reason:"unexpected_token",offset:h._offset,token:h});continue}n.push(h),i="init"}else if(h instanceof a){if("var"!==i){r.errors.push({status:"error",reason:"unexpected_token",offset:h._offset,token:h});continue}n.pop()||r.errors.push({status:"error",reason:"unbalanced_brace",offset:h._offset,token:h,recover:{prepend:new s}}),i="var"
}else h instanceof g&&r.errors.push({status:"error",reason:"unparsed_entity",offset:h._offset,token:h})}}for(r.braceBalance=n.length,"var"!==i&&r.warnings.push({status:"incomplete"});n.length;){var h;u={status:"incomplete",reason:"unbalanced_brace",offset:(h=n.pop())._offset,token:h};"var"===i&&(u.recover={append:new a}),r.warnings.push(u)}return r.currentState=i,0===r.warnings.length&&delete r.warnings,0===r.errors.length&&delete r.errors,r},factorOutBraces:C,normalizeTokens:function(e){for(var t=0;t<e.length;t++)e[t].parse&&e[t].parse();return e},flip:function(e){var t=function(e){for(var t,i=0,r=0,n=0;n<e.length;n++){var c=e[n];if(!(c instanceof o))switch(i){case 0:if(!(c instanceof v&&1==+c.value))return!1;i=1;break;case 1:if(!(1===i&&c instanceof d))return!1;i=2,t=n+1;break;case 2:if(c instanceof s)i=3,r=1;else if(c instanceof l)return!1;break;case 3:c instanceof s?r++:c instanceof a&&--r<=0&&(i=2)}}return e.slice(t)}(e);return C(t||[new v("1"),new d,new s].concat(e).concat(new a))},hasBatsSymbols:function(e){return I(e,["BATS"])},hasEodSymbols:function(e){return(e=x(e))&&-1!==e.toUpperCase().indexOf("_EOD")},hasChxjpySymbols:function(e){return I(e,["CHXJPY"])},hasFreeDelaySymbols:function(e){return I(e,pro.getProductsByType(pro.PRODUCT_TYPES.exchange).map((function(e){return e.exchange.toUpperCase()+"_DLY"})))},getExchange:x,isExchange:function(e,t){return!!(e=x(e))&&e.substr(0,t.length)===t},SymbolToken:m,IncompleteSymbolToken:y,NumberToken:v,BinaryOperatorToken:l,OpenBraceToken:s,CloseBraceToken:a,ticker:function(e){return new m(e).ticker()},shortName:function(e){if("string"!=typeof e)throw new TypeError("expression must be a string");var t=C(P(w(e)));return t.forEach((function(e){e instanceof m&&e.exchange(null)})),E(t)},normalize:function(e){if("string"!=typeof e)throw new TypeError("expression must be a string");return E(C(P(w(e))))}}}();e.exports=r}).call(this,i("Kxc7"))},"8xSi":function(e,t,i){"use strict";i.r(t),i.d(t,"CompareStatusView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getSplitTitle=function(){return this._source.titleInParts(!0,void 0,!1,!1)},t.prototype.update=function(){this._source.isFailed()?this._text=this._source.title(!0,void 0,!1,!1)+": "+this._source.status():this._text=this._source.title(!0,void 0,!1,!1)+" "+this._source.status()},t}(i("2kV1").StudyStatusView)},"972a":function(e,t,i){"use strict";var r,n,o,s;i.r(t),i.d(t,"MarkLocation",(function(){return r})),i.d(t,"HAlign",(function(){return n})),i.d(t,"VAlign",(function(){return o})),i.d(t,"LineStyle",(function(){return s})),function(e){e.AboveBar="AboveBar",e.BelowBar="BelowBar",e.Top="Top",e.Bottom="Bottom",e.Right="Right",e.Left="Left",e.Absolute="Absolute",e.AbsoluteUp="AbsoluteUp",e.AbsoluteDown="AbsoluteDown"}(r||(r={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(n||(n={})),function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"}(o||(o={})),function(e){e[e.Solid=0]="Solid",
e[e.Dotted=1]="Dotted",e[e.Dashed=2]="Dashed"}(s||(s={}))},"9Jkk":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("XlJ7"),s=i("x0JF"),a=i("Y7w9"),l=i("Zp/P"),c=i("VdBB"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._data=null,t._barWidth=null,t}return Object(r.__extends)(t,e),t.prototype.setData=function(e){this._data=e,this._barWidth=Math.max(1,Math.round(Object(l.optimalHiLoWidth)(e.barSpacing)))},t.prototype.hitTest=function(e){if(null===this._data||null===this._barWidth)return null;var t=this._data.bars,i=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].time-i)return null;if(e.x>t[t.length-1].time+i)return null;var r=t[Object(a.lowerbound)(t,e.x-i,(function(e,t){return e.time<t}))];if(e.x<r.time-i||e.x>r.time+i)return null;var n=Object(l.selectionTolerance)(this._barWidth),o=Math.min(r.high,r.low),s=Math.max(r.high,r.low),u=this._data.fontSize;return o-n-u<=e.y&&e.y<=o+n||s-n<=e.y&&e.y<=s+n+u?new c.HitTestResult(c.HitTestResult.REGULAR):null},t.prototype._drawImpl=function(e){if(null!==this._data&&null!==this._barWidth){e.save(),e.translate(.5,.5),e.textAlign="center",e.fillStyle=this._data.labelColor,e.font=Object(o.makeFont)(this._data.fontSize,this._data.font);for(var t=this._data.bars,i=this._data.inverted,r=0;r<t.length;++r){var n=t[r],s=Math.min(n.high,n.low),a=Math.max(n.high,n.low);e.fillText(i?n.lowLabel:n.highLabel,n.time,s-this._data.labelsPadding),e.fillText(i?n.highLabel:n.lowLabel,n.time,a+this._data.labelsPadding+this._data.fontSize)}e.restore()}},t}(i("cPgM").ScaledPaneRenderer),h=i("/hKg"),d=i("Zy3/"),p=i("vq8G"),f=i("u+0B"),_=i("zDbI");function m(e){return null!=e}i.d(t,"SeriesHiLoPaneView",(function(){return v}));var v=function(e){function t(t,i){var r=e.call(this,t,i)||this;r._widthsCache=new f.TextWidthCache,r._labelsRenderer=new u,r._candlesRenderer=new h.PaneRendererCandles,r._canvas=document.createElement("canvas"),r._context=Object(n.ensureNotNull)(r._canvas.getContext("2d"));var s=t.properties();return r._context.font=Object(o.makeFont)(s.hiloStyle.fontSize.value(),_.CHART_FONT_FAMILY),r}return Object(r.__extends)(t,e),t.prototype.renderer=function(e,t,i){if(this._invalidated){var r=this._series().formatter(),n=this._needLabels();this._updateImpl(this._barUpdater.bind(this,r,n)),this._invalidated=!1}var o=this._series().properties().hiloStyle,s=this._model().timeScale().barSpacing(),a=this._needLabels()&&this._bars().every((function(e){return e.highLabelWidth<=s&&e.lowLabelWidth<=s})),c={bars:this._bars(),wickVisible:!1,bodyVisible:o.drawBody.value(),barSpacing:s,borderVisible:o.showBorders.value(),barWidth:Object(l.optimalHiLoWidth)(s),font:_.CHART_FONT_FAMILY,fontSize:o.fontSize.value(),labelColor:o.labelColor.value(),inverted:this._series().priceScale().isInverted(),labelsPadding:3},u=new d.CompositeRenderer;return this._candlesRenderer.setData(c),u.append(this._candlesRenderer),a&&(this._labelsRenderer.setData(c),u.append(this._labelsRenderer)),
this._model().selection().isSelected(this._series())&&this._isMarkersEnabled&&u.append(new p.SelectionRenderer(this._selectionData)),u},t.prototype.topPixelMargin=function(){return this._margin()},t.prototype.bottomPixelMargin=function(){return this._margin()},t.prototype._margin=function(){var e=this._series().properties().hiloStyle;return e.showLabels.value()?e.fontSize.value()+6:0},t.prototype._barUpdater=function(e,t,i,r){var n=i[2],o=i[3];return!(!m(n)||!m(o))&&(r.high=r.open=n,r.low=r.close=o,t&&(r.highLabel=e.format(n),r.highLabelWidth=this._getLabelWidth(r.highLabel),r.lowLabel=e.format(o),r.lowLabelWidth=this._getLabelWidth(r.lowLabel)),!0)},t.prototype._needLabels=function(){var e=this._model().timeScale().barSpacing();return this._series().properties().hiloStyle.showLabels.value()&&e>5},t.prototype._getLabelWidth=function(e){return this._widthsCache.measureText(this._context,e)},t}(s.SeriesBarCandlesPaneView)},"9QkW":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Fib Wedge");function a(e,t){this._constructor="LineToolFibSpeedResistanceArcs";var n=t||a.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("1SUO").FibWedgePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);for(var s=[this._properties.child("trendline").child("linewidth")],l=1;l<=a.LevelsCount;l++)s.push(this._properties.child("level"+l).child("linewidth"));this._widthsProperty=new o(s)}inherit(a,r),a.LevelsCount=11,a.prototype.isSynchronizable=function(){return!1},a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.pointsCount=function(){return 3},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Fib Wedge"},a.prototype.hasEditableCoordinates=function(){return!1},a.prototype.setPoint=function(e,t){if(r.prototype.setPoint.call(this,e,t),!this._recursiveGuard){if(this._recursiveGuard=!0,2===e){var i=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0],o=(l=this.pointToScreenPoint(this._points[2])[0]).subtract(i).length(),s=n.subtract(i).normalized();n=i.add(s.scaled(o));var a=this.screenPointToPoint(n);this._properties.points[1].price.setValue(a.price),this._properties.points[1].bar.setValue(a.index)}else{i=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0];var l=this.pointToScreenPoint(this._points[2])[0],c=n.subtract(i).length();s=l.subtract(i).normalized();l=i.add(s.scaled(c));a=this.screenPointToPoint(l);this._properties.points[2].price.setValue(a.price),this._properties.points[2].bar.setValue(a.index)}this._recursiveGuard=!1}},a.prototype.addPoint=function(e){if(2===this._points.length){var t=this.pointToScreenPoint(this._points[0])[0],i=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(e)[0],o=i.subtract(t).length(),s=n.subtract(t).normalized();n=t.add(s.scaled(o))
;var a=this.ownerSource().firstValue(),l=this.priceScale().coordinateToPrice(n.y,a);e={index:Math.round(this._model.timeScale().coordinateToIndex(n.x)),price:l}}return r.prototype.addPoint.call(this,e)},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.createProperties=function(e){var t=new n("linetoolfibwedge",e,!1,{range:[1,11]});return a._configureProperties(t),t},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("6mGk").FibWedgeDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a._configureProperties=function(e){r._configureProperties(e)},t.LineToolFibWedge=a},"9RhJ":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#f7f8fa" d="M0 0h18v18H0z"/><path fill="#ed5565" d="m0 14h18v4H0zm9-7h9v4H9zm0-7h9v4H9z"/><path fill="#4a89dc" d="M0 0v11h11V0z"/><path fill="#fff" d="M8.1 3.3L8 3.2l.1-.5a.4.4 0 0 0-.1-.4L7.6 2v-.2h.6a.4.4 0 0 0 .3-.2l.2-.6h.1l.2.6.3.2h.5c.2 0 .2 0 .1.2l-.4.3a.4.4 0 0 0-.1.4l.1.4c0 .2 0 .2-.1.1L9 3a.4.4 0 0 0-.4 0l-.5.3zm0 3.3c0 .1-.1 0-.1 0L8 6a.4.4 0 0 0-.1-.4l-.4-.3v-.1h.6a.4.4 0 0 0 .3-.3l.2-.5c0-.2 0-.2.1 0l.2.5.3.2h.5c.2 0 .2.1.1.2l-.4.3a.4.4 0 0 0-.1.4l.1.5s0 .1-.1 0L9 6.4a.4.4 0 0 0-.4 0l-.5.3zm0 3.4L8 9.9l.1-.5A.4.4 0 0 0 8 9l-.4-.3v-.2h.6a.4.4 0 0 0 .3-.3l.2-.5c0-.1 0-.1.1 0l.2.5c0 .2.2.3.3.3h.5c.2 0 .2 0 .1.1l-.4.4a.4.4 0 0 0-.1.4l.1.4c0 .1 0 .2-.1.1L9 9.7a.4.4 0 0 0-.4 0L8 10zM4.8 3.3c-.1 0-.2 0-.1-.1v-.5a.4.4 0 0 0 0-.4L4.3 2c-.1-.1 0-.2 0-.2h.5a.4.4 0 0 0 .3-.2l.2-.6c0-.1.1-.1.2 0l.2.5c0 .2.1.3.3.3h.5c.1 0 .2 0 0 .1l-.3.4a.4.4 0 0 0-.1.4V3c.1.1 0 .2 0 .1L5.5 3a.4.4 0 0 0-.4 0l-.4.3zm-3.4 0l-.1-.1.1-.5a.4.4 0 0 0-.1-.4L.9 2v-.2h.6a.4.4 0 0 0 .3-.2l.1-.6h.2l.2.6.3.2h.5c.2 0 .2 0 .1.2l-.4.3a.4.4 0 0 0-.1.4l.1.4c0 .2 0 .2-.1.1L2.3 3a.4.4 0 0 0-.5 0l-.4.3zm3.4 3.3c-.1.1-.2 0-.1 0V6a.4.4 0 0 0 0-.4l-.4-.3c-.1 0 0-.1 0-.1h.5a.4.4 0 0 0 .3-.3l.2-.5c0-.2.1-.2.2 0l.2.5c0 .1.1.2.3.2h.5c.1 0 .2.1 0 .2l-.3.3A.4.4 0 0 0 6 6v.5c.1 0 0 .1 0 0l-.5-.2a.4.4 0 0 0-.4 0l-.4.3zm0 3.4c-.1 0-.2 0-.1-.1v-.5a.4.4 0 0 0 0-.4l-.4-.3c-.1-.1 0-.2 0-.2h.5a.4.4 0 0 0 .3-.3l.2-.5c0-.1.1-.1.2 0l.2.5c0 .2.1.3.3.3h.5c.1 0 .2 0 0 .1l-.3.4a.4.4 0 0 0-.1.4v.4c.1.1 0 .2 0 .1l-.5-.2a.4.4 0 0 0-.4 0l-.4.3zM1.4 6.6c0 .1-.1 0-.1 0l.1-.6a.4.4 0 0 0-.1-.4l-.4-.3v-.1h.6a.4.4 0 0 0 .3-.3l.2-.5c0-.2 0-.2.1 0l.2.5.3.2h.5c.2 0 .2.1.1.2l-.4.3a.4.4 0 0 0-.1.4l.1.5s0 .1-.1 0l-.4-.2a.4.4 0 0 0-.4 0l-.5.3zm0 3.4l-.1-.1.1-.5a.4.4 0 0 0-.1-.4l-.4-.3v-.2h.6a.4.4 0 0 0 .3-.2l.2-.6c0-.1 0-.1.1 0l.2.5c0 .2.2.3.3.3h.5c.2 0 .2 0 .1.1l-.4.4a.4.4 0 0 0-.1.4l.1.4c0 .1 0 .2-.1.1l-.4-.3a.4.4 0 0 0-.4 0l-.5.4z"/></svg>'},"9dnG":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path d="M5 11l9-7 9 7-9 7z"/><path d="M23 14l-9 7-9-7"/><path d="M23 17l-9 7-9-7"/></g></svg>'},
"9goP":function(e,t,i){"use strict";var r=i("oOPW").createGoProDialog,n=i("xlKU").showSignModal;window.TVDialogs={showSignInDialog:function(e){return n(e)},signModal:null,showGoProDialog:function(e){r(e)}}},"9iCb":function(e,t,i){"use strict";i.r(t),i.d(t,"applyOverridesToStudy",(function(){return u})),i.d(t,"applyOverridesToStudyDefaults",(function(){return h}));var r,n,o=i("Eyy1"),s=i("23IT"),a=i("txPx"),l=Object(a.getLogger)("Chart.Model.StudyPropertiesOverrider");function c(e,t,i,o){var s=i.split(".");if(0!==s.length&&0!==s[0].length){var a,c,u=(a=s[0],{name:(c=a.split(":"))[0],type:2===c.length?c[1]:null}),h=u.name,d=u.type,p=null!==d,f=!p||"band"===d,_=!p||"area"===d,m=!p||"input"===d,v=!p||"plot"===d?n.getPlotIdByTitle(e,h):null,g=f?n.getBandIndexByName(e,h):null,y=_?n.getFilledAreaIdByTitle(e,h):null,b=m?n.getInputByName(e,h):null,S=t.hasOwnProperty(h);if((null!==v?1:0)+(null!==g?1:0)+(null!==y?1:0)+(null!==b?1:0)+(S?1:0)>1)l.logWarn("Study '"+e.description+"' has ambiguous identifier '"+h+"'");else{var w=s[1];if(null!==v){if(1===s.length)return void l.logWarn("Path of sub-property of '"+h+"' plot for study '"+e.description+"' must be not empty");var P=s.slice(1);r.applyPlotProperty(e,t,v,P,o)}else if(null!==b)r.applyInputValue(t,b,o);else if(null!==g){if(void 0===w)return void l.logWarn("Property name of '"+h+"' band for study '"+e.description+"' must be set");r.applyBandProperty(t,g,w,o)}else if(null!==y){if(void 0===w)return void l.logWarn("Property name of '"+h+"' area for study '"+e.description+"' must be set");r.applyFilledAreaProperty(t,y,w,o)}else S?r.setRootProperty(t,s,o):l.logWarn("Study '"+e.description+"' has no plot or input '"+h+"'")}}}function u(e,t){var i=e.properties(),r=i.state();for(var n in t)t.hasOwnProperty(n)&&c(e.metaInfo(),r,n,t[n]);i.mergeAndFire(r)}function h(e,t,i){for(var r in e)if(e.hasOwnProperty(r)){var o=r.indexOf(".");if(-1!==o){var s=r.substr(0,o),a=n.getMetaInfoByDescription(t,s);if(null!==a){var u=i(a);null!==u?c(a,u,r.substr(o+1),e[r]):l.logWarn("Cannot apply overrides for study "+s)}else l.logWarn("There is no such study "+s)}}}!function(e){var t={line:s.LineStudyPlotStyle.Line,histogram:s.LineStudyPlotStyle.Histogram,cross:s.LineStudyPlotStyle.Cross,area:s.LineStudyPlotStyle.Area,columns:s.LineStudyPlotStyle.Columns,circles:s.LineStudyPlotStyle.Circles,line_with_breaks:s.LineStudyPlotStyle.LineWithBreaks,area_with_breaks:s.LineStudyPlotStyle.AreaWithBreaks};e.applyPlotProperty=function(e,i,r,n,a){if(void 0!==i.styles){var c=n[0];if("color"!==c){var u=i.styles[r];if(void 0!==u&&u.hasOwnProperty(c)){if("plottype"===c){var h=t[String(a)];if(void 0===h)return void l.logWarn("Unsupported plot type for plot: "+a);a=h}u[c]=a}else l.logWarn("Study plot does not have property '"+c+"'")}else{!function(e,t,i,r,n){if(void 0!==e.styles)if(null===t&&!isNaN(r)&&r>0)l.logWarn("Study plot does not have color #"+r);else{if(0===r||isNaN(r))Object(o.ensureDefined)(e.styles[i]).color=String(n),r=0;null!==t&&(Object(o.ensureDefined)(t.colors[r]).color=String(n))
}else l.logWarn("Study does not have styles")}(i,function(e,t,i){if(void 0===e.plots)return null;for(var r=0,n=e.plots;r<n.length;r++){var o=n[r];if(Object(s.isColorerPlot)(o)&&void 0!==t.palettes){var a=t.palettes[o.palette];if(o.target===i&&void 0!==a)return a}}return null}(e,i,r),r,n.length>1?parseInt(n[1]):NaN,a)}}else l.logWarn("Study does not have styles")},e.applyBandProperty=function(e,i,r,n){if(void 0!==e.bands){var o=e.bands[i];if(void 0!==o&&o.hasOwnProperty(r)){if("plottype"===r){var s=t[String(n)];if(void 0===s)return void l.logWarn("Unsupported plot type for band: "+n);n=s}o[r]=n}else l.logWarn("Study band does not have property '"+r+"'")}else l.logWarn("Study does not have bands")},e.applyFilledAreaProperty=function(e,t,i,r){if(void 0!==e.filledAreasStyle){var n=e.filledAreasStyle[t];void 0!==n&&n.hasOwnProperty(i)?n[i]=r:l.logWarn("Study area does not have property '"+i+"'")}else l.logWarn("Study does not have areas")},e.applyInputValue=function(e,t,i){void 0!==e.inputs&&e.inputs.hasOwnProperty(t)?e.inputs[t]=i:l.logWarn("Study does not have input '"+t+"'")},e.setRootProperty=function(e,t,i){if(0!==t.length){for(var r=e,n=0,o=t.slice(0,-1);n<o.length;n++){var s=o[n];if(null==r||!r.hasOwnProperty(s))break;r=r[s]}var a=t[t.length-1];null!=r&&r.hasOwnProperty(a)?r[a]=i:l.logWarn("Study does not have property "+t.join("."))}}}(r||(r={})),function(e){e.getInputByName=function(e,t){if(void 0===e.inputs)return null;t=t.toLowerCase();for(var i=0,r=e.inputs;i<r.length;i++){var n=r[i];if(n.name.toLowerCase()===t)return n.id}return null},e.getPlotIdByTitle=function(e,t){if(void 0===e.styles)return null;for(var i in t=t.toLowerCase(),e.styles){var r=e.styles[i];if((void 0!==r&&void 0!==r.title?r.title:i).toLowerCase()===t)return i}return null},e.getFilledAreaIdByTitle=function(e,t){if(void 0===e.filledAreas)return null;t=t.toLowerCase();for(var i=0,r=e.filledAreas;i<r.length;i++){var n=r[i];if(n.title.toLowerCase()===t)return n.id}return null},e.getBandIndexByName=function(e,t){if(void 0===e.bands)return null;t=t.toLowerCase();for(var i=0;i<e.bands.length;++i)if(e.bands[i].name.toLowerCase()===t)return i;return null},e.getMetaInfoByDescription=function(e,t){t=t.toLowerCase();for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n.description.toLowerCase()===t||n.shortDescription.toLowerCase()===t)return n}return null}}(n||(n={}))},"9lPX":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><rect width="10" height="4" fill="currentColor" rx="2" x="4" y="7"/></svg>'},"9tJu":function(e,t,i){"use strict";var r;function n(e,t){void 0===t&&(t={});var i=t.page,n=t.query,o="/u/",s=!1,a=null;if(function(e){return e.is_broker||1===e.account_type}(e))switch(o="/broker/",i){case r.PublishedCharts:a="ideas/";break;case r.FollowingPeople:a="following/";break;case r.Followers:a="followers/";break;case r.Reviews:a="reviews/";break;case r.Settings:case r.SettingsProfile:case r.Notifications:case r.Billing:o="/u/",s=!0}else s=!0;return"Guest"!==e.username&&(o+=e.username+"/"),
n&&(o+="?"+n),void 0!==i&&(s?o+="#"+i:null!==a&&(o+=""+a)),o}i.r(t),i.d(t,"ProfilePages",(function(){return r})),i.d(t,"getUserProfilePath",(function(){return n})),function(e){e.Settings="settings",e.SettingsProfile="settings-profile",e.Notifications="notifications",e.Billing="billing",e.PublishedCharts="published-charts",e.FollowingPeople="following-people",e.Followers="followers",e.Reviews="reviews"}(r||(r={}))},"9uLv":function(e,t,i){"use strict";i.r(t);var r=i("K9GE");for(var n in r)"default"!==n&&function(e){i.d(t,e,(function(){return r[e]}))}(n)},AE9l:function(e,t,i){},AXy7:function(e,t,i){"use strict";var r=i("Eyy1").assert,n=i("aO4+").Point,o=i("Hr11").clamp,s=i("l4sv").HorizontalLineRenderer,a=i("0YCj"),l=i("Tmoa"),c=i("cPgM").ScaledPaneRenderer;function u(e,t){this._source=t,this._properties=e,this._points=[new n(-1,-1)],this._invalidated=!0,this._lineRenderer=new s}function h(){c.call(this),this._data=null}function d(e){this._source=e,this._points=[],this._bandBgRenderer=new h}function p(e,t,i){this._source=e,this._points=[],r(t.type===a.FilledArea.TYPE_HLINES,"Wrong filledArea type: "+t.type),this._initBandIndexes(t.objAId,t.objBId),this._fillStyleProps=i,this._bandBgRenderer=new h}u.prototype.update=function(){this._invalidated=!0},u.prototype.updateImpl=function(){var e=this._source.priceScale();if(e&&!e.isEmpty()){var t=this._properties.value.value();if(isNumber(t)){var i=this._source.firstValue();this._points[0]=new n(-1,e.priceToCoordinate(t,i))}else this._points[0]=new n(-1,NaN)}else this._points[0]=new n(-1,-1)},u.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={};return e.width=this._source.model().timeScale().width(),e.height=this._source.priceScale().height(),e.y=this._points[0].y,e.color=this._properties.color.value(),e.linewidth=this._properties.linewidth.value(),e.linestyle=this._properties.linestyle.value(),this._lineRenderer.setData(e),this._lineRenderer},inherit(h,c),h.prototype.setData=function(e){this._data=e},h.prototype._drawImpl=function(e){if(null!==this._data&&0!==this._data.points.length){var t=e.canvas.width;e.fillStyle=l.generateColor(this._data.backcolor,this._data.transparency);var i=Math.min(this._data.points[0],this._data.points[1]),r=Math.max(this._data.points[0],this._data.points[1]);e.fillRect(0,i,t,r-i)}},h.prototype.hitTest=function(e){return null},d.prototype.update=function(){if(this._points=[],this._source.properties().bandsBackground.fillBackground.value()){var e=this._source.properties().bands[0],t=this._source.properties().bands[1],i=this._source.priceScale();if(i&&!i.isEmpty()){var r=this._source.firstValue();this._points.push(i.priceToCoordinate(e.value.value(),r)),this._points.push(i.priceToCoordinate(t.value.value(),r))}}},d.prototype.renderer=function(){var e={};return e.points=this._points,e.backcolor=this._source.properties().bandsBackground.backgroundColor.value(),e.transparency=this._source.properties().bandsBackground.transparency.value(),this._bandBgRenderer.setData(e),this._bandBgRenderer},
p.prototype._initBandIndexes=function(e,t){this._bandAKey=null,this._bandBKey=null;for(var i=0;i<this._source.metaInfo().bands.length;++i){var r=this._source.metaInfo().bands[i];null===this._bandAKey&&r.id===e&&(this._bandAKey=i),null===this._bandBKey&&r.id===t&&(this._bandBKey=i)}},p.prototype.update=function(){if(this._points=[],this._fillStyleProps.visible.value()){var e=this._source.properties().bands[this._bandAKey],t=this._source.properties().bands[this._bandBKey],i=this._source.priceScale();if(i&&!i.isEmpty()){var r=this._source.firstValue();this._points.push(i.priceToCoordinate(e.value.value(),r)),this._points.push(i.priceToCoordinate(t.value.value(),r))}}},p.prototype.renderer=function(){var e=this._fillStyleProps.transparency.value();e=o(e,0,100);var t={};return t.points=this._points,t.backcolor=l.generateColor(this._fillStyleProps.color.value(),e),t.transparency=this._fillStyleProps.transparency.value(),this._bandBgRenderer.setData(t),this._bandBgRenderer},t.BandPaneView=u,t.BandBackgroundPaneView=d,t.HlineFillPaneView=p},"Aba+":function(e,t,i){},Ai40:function(e,t,i){"use strict";(function(e){var r=i("GVHu").Study,n=i("2kV1").StudyStatusView,o=i("4miz").DataWindowView,s=i("vAx0"),a=s.DividendsPaneView,l=s.SplitsPaneView,c=s.EarningsPaneView,u=i("vopJ").createEstimatesProvider,h=i("pPtI").getServerInterval,d=i("txPx").getLogger("Chart.EarningsStudy"),p=i("s1Gx").sortSourcesPreOrdered,f=p.Dividends,_=p.Splits,m=p.Earnings;function v(e,t,i,n,o){this._paneView=o,r.call(this,e,t,i,n)}function g(e,t,i,r){v.call(this,e,t,i,r,new a(e,this))}function y(e,t,i,r){v.call(this,e,t,i,r,new l(e,this))}function b(e,t,i,r){v.call(this,e,t,i,r,new c(e,this)),this._estimateData={pointsetId:null,plotRow:null,estimateDate:null},this._model.mainSeries().dataEvents().symbolResolved().subscribe(this,this._onSeriesSymbolResolved),this._estimateUpdatedHandler=this._onEstimateUpdated.bind(this),this._needRequestEstimate=!0,this._estimatesCache=null}inherit(v,r),v.prototype.destroy=function(){this._paneView.destroy(),r.prototype.destroy.call(this)},v.prototype.createViews=function(){this._paneViews=[this._paneView],this._priceAxisViews=[],this._dataWindowView||(this._dataWindowView=new o),this._legendView=null,this._statusView||(this._statusView=new n(this,this._model.properties().scalesProperties.textColor))},v.prototype.onClickOutside=function(){this._paneView.onClickOutside()},v.prototype.preferNoScale=function(){return!0},v.prototype.showInObjectTree=function(){return!1},v.prototype.isSavedInStudyTemplates=function(){return!1},v.prototype.isRemovedByStudyTemplates=function(){return!1},v.prototype.removeByRemoveAllStudies=function(){return!1},v.prototype.isDraggable=function(){return!1},v.prototype.statusView=function(){return null},v.prototype.hasStateForAlert=function(){return!1},v.prototype.start=function(){r.prototype.start.call(this),this._model.mainSeries().dataEvents().symbolResolved().subscribe(this,this._initPlotStash),this._initPlotStash()},v.prototype.stop=function(){r.prototype.stop.call(this),
this._model.mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._initPlotStash),this._paneView.closeTooltips()},v.prototype.isSavedInChart=function(e){return e},v.prototype._initPlotStash=function(){this._plotStash={}},v.prototype._updatePlotStash=function(e,t){if(!this._restartRequired&&this._plotStash){var i=e.value.slice(),r=i.shift(),n=String(r);t?this._plotStash[n]?String(this._plotStash[n])!==String(i)&&(this._restartRequired=!0):this._plotStash[n]=i:this._plotStash[n]&&(this._restartRequired=!0)}},v.prototype.transformData=function(e){for(var t,i,r=e.length-1;r>=0;--r)t=e[r],i=this.isValid(t.value),this._updatePlotStash(t,i),i||e.splice(r,1)},v.prototype.isValid=function(e){throw new Error("Not Implemented")},v.prototype.restoreData=function(e){this.transformData(e.data),e.end=e.data.length,r.prototype.restoreData.call(this,e)},v.prototype.canHaveChildren=function(){return!1},v.getSettingsValue=function(e,t){var i=null;switch(e){case"TV_DIVIDENDS":i=t.esdShowDividends.value();break;case"TV_SPLITS":i=t.esdShowSplits.value();break;case"TV_EARNINGS":i=t.esdShowEarnings.value()}return i},v.prototype.isIncludedInAutoScale=function(){return!1},v.prototype.isCurrencySource=function(){return!1},inherit(g,v),g.prototype.zorder=function(){return f},g.prototype.isValid=function(e){var t=e[2];return $.isNumeric(t)},inherit(y,v),y.prototype.zorder=function(){return _},y.prototype.isValid=function(e){var t=e[3];return $.isNumeric(t)},inherit(b,v),b.prototype.destroy=function(){this._removePointset(),this._removeEstimatesCache(),this._model.mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._onSeriesSymbolResolved),v.prototype.destroy.call(this)},b.prototype.zorder=function(){return m},b.pointSetCounter=1,b.pointSetsVersion="2",b.prototype.isValid=function(e){var t=e[3],i=e[4];return $.isNumeric(t)&&$.isNumeric(i)},b.prototype.restorePointset=function(t){return{index:t.index,value:[t.tickmark,void 0,t.estimate,$.isNumeric(t.period)?t.period:e(t.period).unix(),$.isNumeric(t.date)?t.date:e(t.date).unix()]}},b.prototype.restoreData=function(e){v.prototype.restoreData.call(this,e);var t=null;if(e.estimate)t=this.restorePointset(e.estimate);else if(e.pointSets&&null==e.pointSetsVersion){if(null!==(r=this._getSymbol())){var i=r.split(":")[1].toUpperCase();e.pointSets[r]?t=this.restorePointset(e.pointSets[r]):e.pointSets[i]&&(t=this.restorePointset(e.pointSets[i]))}}else if(e.pointSets&&"1"===e.pointSetsVersion){var r;if(null!==(r=this._getSymbol())){i=r.split(":")[1].toUpperCase();e.pointSets[r]?t=e.pointSets[r].estimate:e.pointSets[i]&&(t=e.pointSets[i].estimate)}}else null!=e.estimatePlotRow&&e.pointSetsVersion===b.pointSetsVersion&&(t=e.estimatePlotRow);this._estimateData.plotRow=t},b.prototype.state=function(e){var t=v.prototype.state.call(this,e);return e&&(t.data.estimatePlotRow=this._estimateData.plotRow,t.data.pointSetsVersion=b.pointSetsVersion),t},b.prototype.stop=function(){v.prototype.stop.call(this),this._removePointset(),this._removeEstimatesCache()},b.prototype.onData=function(e){
v.prototype.onData.call(this,e),"study_completed"===e.method&&this._needRequestEstimate&&(this._needRequestEstimate=!1,this._rerequestEstimate("requesting estimate flag enabled"))},b.prototype.clearData=function(){v.prototype.clearData.call(this),this._needRequestEstimate=!0},b.prototype.generatePointsetId=function(){return"pointsetEstimates_"+b.pointSetCounter++},b.prototype.getEstimate=function(){return this._estimateData.plotRow},b.prototype._getSymbol=function(){var e=this._series.symbolInfo();return e?e.base_name[0].toLowerCase():null},b.prototype._onEstimateUpdated=function(e){this._model.chartApi().connected()&&(d.logNormal("Estimate update received: "+JSON.stringify(e)),!e.date||void 0===e.period||void 0===e.reported&&void 0===e.estimate?this._removePointset():this._recreatePointset(e))},b.prototype.start=function(){v.prototype.start.call(this),this._removePointset(),this._recreateEstimatesCache(),this._rerequestEstimate("starting study")},b.prototype.disconnect=function(){this._estimateData.pointsetId=null},b.prototype._removePointset=function(){null!==this._estimateData.pointsetId&&this._model.chartApi().connected()&&(d.logNormal("Removing previous pointset "+this._estimateData.pointsetId),this._model.chartApi().removePointset(this._estimateData.pointsetId)),this._estimateData={pointsetId:null,plotRow:null,estimateDate:null},this._model.updateSource(this)},b.prototype._recreatePointset=function(t){if(null===this._estimateData.pointsetId||t.alignedDate!==this._estimateData.estimateDate){this._removePointset();var i=this.generatePointsetId(),r=this._model.mainSeries(),n=r.symbolId(),o=h(r.properties().interval.value().split(",")[0]);this._estimateData.estimateDate=t.alignedDate,this._estimateData.pointsetId=i,this._estimateData.plotRow=null;var s=this;d.logNormal("Creating pointset "+i+" for date="+this._estimateData.estimateDate+", symbolId="+n+", interval="+o);var a=[[this._estimateData.estimateDate,0]];this._model.chartApi().createPointset(i,"turnaround",n,o,a,(function(i){i.params.customId===s._estimateData.pointsetId&&0!==i.params.plots.length&&(d.logNormal("Received data for "+s._estimateData.pointsetId+" pointset"),s._estimateData.plotRow={index:i.params.plots[0].value[0],value:[i.params.plots[0].value[1],t.reported,t.estimate,e(t.period).unix(),e(t.date).unix()]},s._model.updateSource(s))}))}else d.logNormal("Re-creating pointset skipped due the same date")},b.prototype._rerequestEstimate=function(e){if(null!==this._estimatesCache){d.logNormal("Re-requesting estimate data due "+e),this._estimatesCache.resetSymbol();var t=this._getSymbol();if(null!==t&&this._model.chartApi().connected()){var i=t.split(":")[0],r=t.split(":")[1];this._estimatesCache.setSymbol(i,r)}}else d.logNormal("Re-requesting estimate data skipped")},b.prototype._onSeriesSymbolResolved=function(){this._removePointset(),this._rerequestEstimate("series symbol resolved")},b.prototype._removeEstimatesCache=function(){null!==this._estimatesCache&&(d.logNormal("Destroying estimates cache"),
this._estimatesCache.off("data",this._estimateUpdatedHandler),this._estimatesCache.destroy(),this._estimatesCache=null)},b.prototype._recreateEstimatesCache=function(){this._removeEstimatesCache(),d.logNormal("Creating estimates cache"),this._estimatesCache=u(),this._estimatesCache.on("data",this._estimateUpdatedHandler)},t.ESDStudyBase=v,t.study_ESD$TV_EARNINGS=b,t.study_ESD$TV_SPLITS=y,t.study_ESD$TV_DIVIDENDS=g}).call(this,i("ldgD"))},ApcL:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("ogJP"),o=i("vTIA"),s=i("txPx"),a=i("oXaB"),l=i("wZIs"),c=i("KUek"),u=i("FIi8"),h=i("4vW/"),d={visible:!1,lineStyle:i("8Uy/").LINESTYLE_DOTTED,lineWidth:1,bidLineColor:"#2196F3",askLineColor:"#EF5350"},p=i("pCTl");i.d(t,"gridPreferencesDefault",(function(){return _})),i.d(t,"crossHairPreferencesDefault",(function(){return m})),i.d(t,"legendPreferencesDefault",(function(){return v})),i.d(t,"panePreferencesDefault",(function(){return g})),i.d(t,"scalesPreferencesBaseDefault",(function(){return y})),i.d(t,"scalesPreferencesToApplyDefault",(function(){return b})),i.d(t,"chartEventsSourceBreaksPreferencesDefault",(function(){return S})),i.d(t,"chartEventsSourcePreferencesDefault",(function(){return w})),i.d(t,"timeScalePreferencesDefault",(function(){return P})),i.d(t,"priceScalePreferencesDefault",(function(){return C})),i.d(t,"statusViewPreferencesDefault",(function(){return T})),i.d(t,"mainSeriesPreferencesDefault",(function(){return x})),i.d(t,"chartPreferencesBaseDefault",(function(){return I})),i.d(t,"chartPreferencesToApplyDefault",(function(){return E})),i.d(t,"chartPreferencesToRestoreDefault",(function(){return L})),i.d(t,"createPreferencesObject",(function(){return O})),i.d(t,"preferencesByWhiteList",(function(){return A})),i.d(t,"defaultsPreferencesByWhiteList",(function(){return M}));var f=Object(s.getLogger)("Chart.ApplyPreferencesToAllCharts"),_={color:"",style:0},m={color:"",style:0,transparency:0,width:0},v={showStudyArguments:!1,showStudyTitles:!1,showStudyValues:!1,showSeriesTitle:!1,showSeriesOHLC:!1,showLegend:!1,showBarChange:!0,showBackground:!0,backgroundTransparency:0,wrapText:!1},g={backgroundType:h.ColorType.Solid,background:"",backgroundGradientStartColor:"",backgroundGradientEndColor:"",topMargin:0,bottomMargin:0,rightOffset:0,horzGridProperties:Object(u.deepExtend)({},_),vertGridProperties:Object(u.deepExtend)({},_),crossHairProperties:Object(u.deepExtend)({},m),legendProperties:Object(u.deepExtend)({},v)},y={lineColor:"",textColor:"",fontSize:0,scaleSeriesOnly:!1,showSeriesLastValue:!1,seriesLastValueMode:a.PriceAxisLastValueMode.LastValueAccordingToScale,showSeriesPrevCloseValue:!1,showStudyLastValue:!1,showSymbolLabels:!1,showStudyPlotLabels:!1,showBidAskLabels:!1,showPrePostMarketPriceLabel:!0,showFundamentalLastValue:!1,showFundamentalNameLabel:!1,showCurrency:!0},b=Object(r.__assign)({},y),S={color:"",visible:!1,style:0,width:0},w={visible:!1,futureOnly:!1,breaks:Object(u.deepExtend)({},S)},P={defaultRightOffset:0},C={autoScale:!1,autoScaleDisabled:!1,lockScale:!1,percentage:!1,
percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!1,isInverted:!1,indexedTo100:!1},T={fontSize:16,showExchange:!0,showInterval:!0,symbolTextSource:"description"},x={style:0,minTick:0,showPriceLine:!1,priceLineWidth:0,priceLineColor:"",showPrevClosePriceLine:!1,showCountdown:!0,prevClosePriceLineWidth:0,extendedHours:!1,prevClosePriceLineColor:"",esdShowDividends:!1,esdShowSplits:!1,esdShowEarnings:!1,esdShowBreaks:!1,dividendsAdjustment:!1,statusViewStyle:Object(u.deepExtend)({},T),priceAxisProperties:Object(u.deepExtend)({},C),esdBreaksStyle:Object(u.deepExtend)({},{color:"",style:0,width:0}),bidAsk:Object(u.deepExtend)({},d),prePostMarket:Object(u.deepExtend)({},p.b),candleStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",drawWick:!1,drawBorder:!1,drawBody:!0,borderColor:"",borderUpColor:"",borderDownColor:"",wickColor:"",wickUpColor:"",wickDownColor:"",barColorsOnPrevClose:!1}),hollowCandleStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",drawWick:!1,drawBorder:!1,drawBody:!0,borderColor:"",borderUpColor:"",borderDownColor:"",wickColor:"",wickUpColor:"",wickDownColor:""}),barStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",barColorsOnPrevClose:!1,dontDrawOpen:!1,thinBars:!0}),lineStyle:Object(u.deepExtend)({},{color:"",linestyle:0,linewidth:0,styleType:0}),areaStyle:Object(u.deepExtend)({},{color1:"",color2:"",linecolor:"",linestyle:0,linewidth:0,transparency:0}),baselineStyle:Object(u.deepExtend)({},{topFillColor1:"",topFillColor2:"",bottomFillColor1:"",bottomFillColor2:"",topLineColor:"",bottomLineColor:"",topLineWidth:0,bottomLineWidth:0,transparency:0,baseLevelPercentage:0}),hiloStyle:Object(u.deepExtend)({},{color:"",showBorders:!1,borderColor:"",showLabels:!1,labelColor:"",fontSize:0,drawBody:!0}),haStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",drawWick:!1,drawBorder:!1,drawBody:!0,borderColor:"",borderUpColor:"",borderDownColor:"",wickColor:"",wickUpColor:"",wickDownColor:"",showRealLastPrice:!1,barColorsOnPrevClose:!1,inputs:{}}),renkoStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",borderUpColor:"",borderDownColor:"",upColorProjection:"",downColorProjection:"",borderUpColorProjection:"",borderDownColorProjection:"",wickUpColor:"",wickDownColor:"",inputs:{boxSize:0,style:"",atrLength:0,wicks:!1,sources:"",source:""}}),pbStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",borderUpColor:"",borderDownColor:"",upColorProjection:"",downColorProjection:"",borderUpColorProjection:"",borderDownColorProjection:"",inputs:{source:"",lb:0}}),kagiStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",upColorProjection:"",downColorProjection:"",inputs:{style:"",atrLength:0,reversalAmount:0}}),pnfStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",upColorProjection:"",downColorProjection:"",inputs:{reversalAmount:0,boxSize:0,style:"",atrLength:0}}),rangeStyle:Object(u.deepExtend)({},{upColor:"",downColor:"",upColorProjection:"",downColorProjection:"",thinBars:!1,inputs:{range:0,phantomBars:!1}})},I={priceScaleSelectionStrategyName:"auto",timeScale:Object(u.deepExtend)({},P),
mainSeries:Object(u.deepExtend)({},x),sessions:Object(u.deepExtend)({},c.sessionsPreferencesDefault),paneProperties:Object(u.deepExtend)({},g),chartEventsSourceProperties:Object(u.deepExtend)({},w),tradingProperties:Object(u.deepExtend)({},o.b)},E=Object(r.__assign)({timezone:"",scalesProperties:Object(u.deepExtend)({},b)},I),L=Object(r.__assign)({scalesProperties:Object(u.deepExtend)({},y)},I);function O(e,t,i,r,o){if(void 0===o&&(o=!0),void 0===t[e])return f.logDebug("We haven't had this property "+r+"."+e+" yet, please, remove it from whiteList"),null;if(Object(n.isObject)(i[e])){var s=Object.keys(i[e]),a="";return s.map((function(n){var s;return(s={})[n]=O(n,t[e],i[e],r+"."+e,o),s})).reduce((function(e,t){return e[a=Object.keys(t)[0]]=t[a],e}),{})}return o?t[e].value():t[e]}function A(e,t,i){void 0===i&&(i=E);var r={timezone:"",priceScaleSelectionStrategyName:"auto",timeScale:{defaultRightOffset:e.timeScale().defaultRightOffsetProperty().value()},mainSeries:{},sessions:{},paneProperties:{},scalesProperties:{},chartEventsSourceProperties:{},tradingProperties:{}},n=["timeScale","mainSeries","sessions"],o=i.mainSeries,s=Object.keys(i),a=Object.keys(o),l=t.properties(),c=e.properties(),u=i.sessions,h=Object.keys(u),d=e.sessions().properties();return a.forEach((function(e){r.mainSeries[e]=O(e,l,o,"mainSeries")})),h.forEach((function(e){r.sessions[e]=O(e,d,u,"sessions")})),s.forEach((function(e){n.includes(e)||(r[e]=O(e,c,i,"preferences"))})),r}function M(e,t,i){void 0===i&&(i=L);var r={timeScale:{defaultRightOffset:e.timeScale().rightOffsetDefaultValue()},mainSeries:{},sessions:Object(u.deepExtend)({},c.sessionsPreferencesDefault),paneProperties:{},scalesProperties:{},chartEventsSourceProperties:{},tradingProperties:{},priceScaleSelectionStrategyName:"auto"},n=["timeScale","mainSeries","sessions"],o=i.mainSeries,s=Object.keys(i),a=Object.keys(o),h=Object(l.factoryDefaults)("chartproperties.mainSeriesProperties"),d=Object(l.factoryDefaults)("chartproperties");return a.forEach((function(e){r.mainSeries[e]=O(e,h,o,"mainSeries",!1)})),s.forEach((function(e){n.includes(e)||(r[e]=O(e,d,i,"preferences",!1))})),r}},Az04:function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("GEp6").distanceToLine,o=i("Ss5c").LineDataSource,s=i("Ocx9").DefaultProperty,a=window.t("Rotated Rectangle");function l(e,t){this._constructor="LineToolRotatedRectangle";var r=t||l.createProperties();o.call(this,e,r),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("lZ9F").RotatedRectanglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(l,o),l.prototype.startChanging=function(e,t){if(o.prototype.startChanging.call(this,e,t),0===e||1===e){var i=this._getPaneViews()[0],r=i._points[0],s=i._points[1],a=i._points[2];this._distance=n(r,s,a).distance}},l.prototype.setPoint=function(e,t,i){if(o.prototype.setPoint.call(this,e,t,i),0===e||1===e){var n=this._getPaneViews()[0];n.update()
;var s=n._points[0],a=n._points[1].subtract(s),l=new r(a.y,-a.x).normalized().scaled(this._distance),c=s.add(l),u=this.screenPointToPoint(c);this._points[2]=u}},l.prototype.endChanging=function(e,t){delete this._distance,o.prototype.endChanging.call(this,e,t)},l.prototype.pointsCount=function(){return 3},l.prototype.translatedType=function(){return a},l.prototype.name=function(){return"Rotated Rectangle"},l.prototype.hasEditableCoordinates=function(){return!1},l.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("Zd1D").GeneralFiguresDefinitionsViewModel}.bind(null,i)).catch(i.oe)},l.createProperties=function(e){var t=new s("linetoolrotatedrectangle",e);return l._configureProperties(t),t},l._configureProperties=function(e){o._configureProperties(e)},t.LineToolRotatedRectangle=l},"B4/o":function(e,t,i){"use strict";(function(e){var r=i("QIuV").LineToolTrading,n=i("4TVt").LineToolPriceAxisView,o=i("jkoZ"),s=i("Ss5c").LineDataSource,a=i("Ocx9").DefaultProperty,l=i("s1Gx").sortSourcesPreOrdered.LineToolOrder;function c(e){this._line=e,this._data={bodyText:"order",quantityText:"0"},this._editable=!0,this._cancellable=!0,this._mode="",this._direction="buy",this._active=!0}function u(e){return null==e?e="":e+="",e}function h(e,t){this._adapter=new c(this),this._constructor="LineToolOrder";var n=t||h.createProperties();r.call(this,e,n),this.customization.disableSelection=!1,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("LMGK").OrderPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}c.prototype.setMode=function(e){return this._mode=e,this._line.updateAllViewsAndRedraw(),this},c.prototype.setDirection=function(e){return this._direction=e,this._line.updateAllViewsAndRedraw(),this},c.prototype.setActive=function(e){return this._active=e,this._line.updateAllViewsAndRedraw(),this},c.prototype.setEditable=function(e){return this._editable=e,this._line.updateAllViewsAndRedraw(),this},c.prototype.setCancellable=function(e){return this._cancellable=e,this._line.updateAllViewsAndRedraw(),this},c.prototype.hasMoveCallback=function(){return this.isFunction(this._onMoveCallback)},c.prototype.hasModifyCallback=function(){return this.isFunction(this._onModifyCallback)},c.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},c.prototype.setPrice=function(e){if(this._line.points().length>0){var t=this._line.points()[0];t.price=e,this._line._points[0]=t,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},c.prototype.getText=function(){return this._data.bodyText},c.prototype.setText=function(e){return this._data.bodyText=e||"",this._line.updateAllViewsAndRedraw(),this},c.prototype.setTooltip=function(e){return this._line.properties().tooltip.setValue(u(e)),
this},c.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},c.prototype.setModifyTooltip=function(e){return this._line.properties().modifyTooltip.setValue(u(e)),this},c.prototype.getModifyTooltip=function(){return this._line.properties().modifyTooltip.value()},c.prototype.setCancelTooltip=function(e){return this._line.properties().cancelTooltip.setValue(u(e)),this},c.prototype.getCancelTooltip=function(){return this._line.properties().cancelTooltip.value()},c.prototype.getQuantity=function(){return this._data.quantityText},c.prototype.setQuantity=function(e){return this._data.quantityText=e||"",this._line.updateAllViewsAndRedraw(),this},c.prototype.getExtendLeft=function(){var e=this._line.properties().extendLeft.value();return"inherit"===e?this._line._model.properties().tradingProperties.extendLeft.value():e},c.prototype.setExtendLeft=function(e){return this._line.properties().extendLeft.setValue(e),this},c.prototype.getLineLength=function(){var e=this._line.properties().lineLength.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineLength.value():e},c.prototype.setLineLength=function(e){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(e,100))),this},c.prototype.getLineColor=function(){var e=this._line.properties();return"buy"===this._direction?this._active?e.lineActiveBuyColor.value():e.lineInactiveBuyColor.value():this._active?e.lineActiveSellColor.value():e.lineInactiveSellColor.value()},c.prototype.setLineColor=function(e){return"buy"===this._direction?this._active?this.setLineActiveBuyColor(e):this.setLineInactiveBuyColor(e):this._active?this.setLineActiveSellColor(e):this.setLineInactiveSellColor(e),this},c.prototype.setLineActiveBuyColor=function(e){return this._line.properties().lineActiveBuyColor.setValue(e),this},c.prototype.setLineInactiveBuyColor=function(e){return this._line.properties().lineInactiveBuyColor.setValue(e),this},c.prototype.setLineActiveSellColor=function(e){return this._line.properties().lineActiveSellColor.setValue(e),this},c.prototype.setLineInactiveSellColor=function(e){return this._line.properties().lineInactiveSellColor.setValue(e),this},c.prototype.getLineStyle=function(){var e=this._line.properties().lineStyle.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineStyle.value():e},c.prototype.setLineStyle=function(e){return this._line.properties().lineStyle.setValue(e),this},c.prototype.getLineWidth=function(){var e=this._line.properties().lineWidth.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineWidth.value():e},c.prototype.setLineWidth=function(e){return this._line.properties().lineWidth.setValue(e),this},c.prototype.getBodyBorderColor=function(){var e=this._line.properties();return"buy"===this._direction?this._active?e.bodyBorderActiveBuyColor.value():e.bodyBorderInactiveBuyColor.value():this._active?e.bodyBorderActiveSellColor.value():e.bodyBorderInactiveSellColor.value()},c.prototype.setBodyBorderColor=function(e){
return"buy"===this._direction?this._active?this.setBodyBorderActiveBuyColor(e):this.setBodyBorderInactiveBuyColor(e):this._active?this.setBodyBorderActiveSellColor(e):this.setBodyBorderInactiveSellColor(e),this},c.prototype.setBodyBorderActiveBuyColor=function(e){return this._line.properties().bodyBorderActiveBuyColor.setValue(e),this},c.prototype.setBodyBorderInactiveBuyColor=function(e){return this._line.properties().bodyBorderInactiveBuyColor.setValue(e),this},c.prototype.setBodyBorderActiveSellColor=function(e){return this._line.properties().bodyBorderActiveSellColor.setValue(e),this},c.prototype.setBodyBorderInactiveSellColor=function(e){return this._line.properties().bodyBorderInactiveSellColor.setValue(e),this},c.prototype.getBodyBackgroundColor=function(){return o.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},c.prototype.setBodyBackgroundColor=function(e){return o.setColorToProperties(e,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},c.prototype.getBodyTextColor=function(){var e=this._line.properties();return"limit"===this._mode?this._active?e.bodyTextActiveLimitColor.value():e.bodyTextInactiveLimitColor.value():"stop"===this._mode?this._active?e.bodyTextActiveStopColor.value():e.bodyTextInactiveStopColor.value():"buy"===this._direction?this._active?e.bodyTextActiveBuyColor.value():e.bodyTextInactiveBuyColor.value():this._active?e.bodyTextActiveSellColor.value():e.bodyTextInactiveSellColor.value()},c.prototype.setBodyTextColor=function(e){return"limit"===this._mode?this._active?this.setBodyTextActiveLimitColor(e):this.setBodyTextInactiveLimitColor(e):"stop"===this._mode?this._active?this.setBodyTextActiveStopColor(e):this.setBodyTextInactiveStopColor(e):"buy"===this._direction?this._active?this.setBodyTextActiveBuyColor(e):this.setBodyTextInactiveBuyColor(e):this._active?this.setBodyTextActiveSellColor(e):this.setBodyTextInactiveSellColor(e),this},c.prototype.setBodyTextInactiveLimitColor=function(e){return this._line.properties().bodyTextInactiveLimitColor.setValue(e),this},c.prototype.setBodyTextActiveLimitColor=function(e){return this._line.properties().bodyTextActiveLimitColor.setValue(e),this},c.prototype.setBodyTextInactiveStopColor=function(e){return this._line.properties().bodyTextInactiveStopColor.setValue(e),this},c.prototype.setBodyTextActiveStopColor=function(e){return this._line.properties().bodyTextActiveStopColor.setValue(e),this},c.prototype.setBodyTextInactiveBuyColor=function(e){return this._line.properties().bodyTextInactiveBuyColor.setValue(e),this},c.prototype.setBodyTextActiveBuyColor=function(e){return this._line.properties().bodyTextActiveBuyColor.setValue(e),this},c.prototype.setBodyTextInactiveSellColor=function(e){return this._line.properties().bodyTextInactiveSellColor.setValue(e),this},c.prototype.setBodyTextActiveSellColor=function(e){return this._line.properties().bodyTextActiveSellColor.setValue(e),this},c.prototype.getBodyFont=function(){
return o.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},c.prototype.setBodyFont=function(e){return o.setFontToProperties(e,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},c.prototype.getQuantityBorderColor=function(){var e=this._line.properties();return"buy"===this._direction?this._active?e.quantityBorderActiveBuyColor.value():e.quantityBorderInactiveBuyColor.value():this._active?e.quantityBorderActiveSellColor.value():e.quantityBorderInactiveSellColor.value()},c.prototype.setQuantityBorderColor=function(e){return"buy"===this._direction?this._active?this.setQuantityBorderActiveBuyColor(e):this.setQuantityBorderInactiveBuyColor(e):this._active?this.setQuantityBorderActiveSellColor(e):this.setQuantityBorderInactiveSellColor(e),this},c.prototype.setQuantityBorderActiveBuyColor=function(e){return this._line.properties().quantityBorderActiveBuyColor.setValue(e),this},c.prototype.setQuantityBorderInactiveBuyColor=function(e){return this._line.properties().quantityBorderInactiveBuyColor.setValue(e),this},c.prototype.setQuantityBorderActiveSellColor=function(e){return this._line.properties().quantityBorderActiveSellColor.setValue(e),this},c.prototype.setQuantityBorderInactiveSellColor=function(e){return this._line.properties().quantityBorderInactiveSellColor.setValue(e),this},c.prototype.getQuantityBackgroundColor=function(){var e=this._line.properties();return"buy"===this._direction?this._active?e.quantityBackgroundActiveBuyColor.value():e.quantityBackgroundInactiveBuyColor.value():this._active?e.quantityBackgroundActiveSellColor.value():e.quantityBackgroundInactiveSellColor.value()},c.prototype.setQuantityBackgroundColor=function(e){return"buy"===this._direction?this._active?this.setQuantityBackgroundActiveBuyColor(e):this.setQuantityBackgroundInactiveBuyColor(e):this._active?this.setQuantityBackgroundActiveSellColor(e):this.setQuantityBackgroundInactiveSellColor(e),this},c.prototype.setQuantityBackgroundActiveBuyColor=function(e){return this._line.properties().quantityBackgroundActiveBuyColor.setValue(e),this},c.prototype.setQuantityBackgroundInactiveBuyColor=function(e){return this._line.properties().quantityBackgroundInactiveBuyColor.setValue(e),this},c.prototype.setQuantityBackgroundActiveSellColor=function(e){return this._line.properties().quantityBackgroundActiveSellColor.setValue(e),this},c.prototype.setQuantityBackgroundInactiveSellColor=function(e){return this._line.properties().quantityBackgroundInactiveSellColor.setValue(e),this},c.prototype.getQuantityTextColor=function(){return o.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},c.prototype.setQuantityTextColor=function(e){return o.setColorToProperties(e,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},
c.prototype.getQuantityFont=function(){return o.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},c.prototype.setQuantityFont=function(e){return o.setFontToProperties(e,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},c.prototype.getCancelButtonBorderColor=function(){var e=this._line.properties();return"buy"===this._direction?this._active?e.cancelButtonBorderActiveBuyColor.value():e.cancelButtonBorderInactiveBuyColor.value():this._active?e.cancelButtonBorderActiveSellColor.value():e.cancelButtonBorderInactiveSellColor.value()},c.prototype.setCancelButtonBorderColor=function(e){return"buy"===this._direction?this._active?this.setCancelButtonBorderActiveBuyColor(e):this.setCancelButtonBorderInactiveBuyColor(e):this._active?this.setCancelButtonBorderActiveSellColor(e):this.setCancelButtonBorderInactiveSellColor(e),this},c.prototype.setCancelButtonBorderActiveBuyColor=function(e){return this._line.properties().cancelButtonBorderActiveBuyColor.setValue(e),this},c.prototype.setCancelButtonBorderInactiveBuyColor=function(e){return this._line.properties().cancelButtonBorderInactiveBuyColor.setValue(e),this},c.prototype.setCancelButtonBorderActiveSellColor=function(e){return this._line.properties().cancelButtonBorderActiveSellColor.setValue(e),this},c.prototype.setCancelButtonBorderInactiveSellColor=function(e){return this._line.properties().cancelButtonBorderInactiveSellColor.setValue(e),this},c.prototype.getCancelButtonBackgroundColor=function(){return o.getColorFromProperties(this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency)},c.prototype.setCancelButtonBackgroundColor=function(e){return o.setColorToProperties(e,this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency),this},c.prototype.getCancelButtonIconColor=function(){var e=this._line.properties();return"buy"===this._direction?this._active?e.cancelButtonIconActiveBuyColor.value():e.cancelButtonIconInactiveBuyColor.value():this._active?e.cancelButtonIconActiveSellColor.value():e.cancelButtonIconInactiveSellColor.value()},c.prototype.setCancelButtonIconColor=function(e){return"buy"===this._direction?this._active?this.setCancelButtonIconActiveBuyColor(e):this.setCancelButtonIconInactiveBuyColor(e):this._active?this.setCancelButtonIconActiveSellColor(e):this.setCancelButtonIconInactiveSellColor(e),this},c.prototype.setCancelButtonIconActiveBuyColor=function(e){return this._line.properties().cancelButtonIconActiveBuyColor.setValue(e),this},c.prototype.setCancelButtonIconInactiveBuyColor=function(e){return this._line.properties().cancelButtonIconInactiveBuyColor.setValue(e),this},c.prototype.setCancelButtonIconActiveSellColor=function(e){
return this._line.properties().cancelButtonIconActiveSellColor.setValue(e),this},c.prototype.setCancelButtonIconInactiveSellColor=function(e){return this._line.properties().cancelButtonIconInactiveSellColor.setValue(e),this},c.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},c.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},c.prototype.isFunction=function(e){return"function"==typeof e},c.prototype.onCancel=function(e,t){return t?this.isFunction(t)&&(this._onCancelData=e,this._onCancelCallback=t):this.isFunction(e)&&(this._onCancelCallback=e),this},c.prototype.callOnCancel=function(){this.isFunction(this._onCancelCallback)&&this._onCancelCallback.call(this,this._onCancelData)},c.prototype.isOnCancelCallbackPresent=function(){return this.isFunction(this._onCancelCallback)},c.prototype.onModify=function(e,t){return t?this.isFunction(t)&&(this._onModifyData=e,this._onModifyCallback=t):this.isFunction(e)&&(this._onModifyCallback=e),this},c.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},c.prototype.onMove=function(e,t){return t?this.isFunction(t)&&(this._onMoveData=e,this._onMoveCallback=t):this.isFunction(e)&&(this._onMoveCallback=e),this},c.prototype.callOnMove=function(){this.isFunction(this._onMoveCallback)&&this._onMoveCallback.call(this,this._onMoveData)},c.prototype.onContextMenu=function(e,t){return t?this.isFunction(t)&&(this._onContextMenuData=e,this._onContextMenuCallback=t):this.isFunction(e)&&(this._onContextMenuCallback=e),this},c.prototype.shouldShowContextMenu=function(){return this.isFunction(this._onContextMenuCallback)},c.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},c.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(h,r),h.prototype.zorder=function(){return l},h.prototype.setPoint=function(e,t,i){this._points[e]=t,this.normalizePoints()},h.prototype.addPoint=function(e,t){return this._points.push(e),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},h.prototype.translatedType=function(){return"Order"},h.prototype.name=function(){return"Order"},h.prototype.endMoving=function(e){var t=this._startMovingPoint&&this._currentMovingPoint&&this._startMovingPoint.price!==this._currentMovingPoint.price;r.prototype.endMoving.call(this),!e&&t&&this._adapter.callOnMove()},h.prototype.createPriceAxisView=function(e){var t={pointIndex:e,backgroundPropertyGetter:this._adapter.getLineColor.bind(this._adapter)};return this._priceAxisView=new n(this,t),this._priceAxisView},h.prototype.paneViews=function(){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?s.prototype.paneViews.call(this):null},h.prototype.priceAxisViews=function(t,i){
return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?s.prototype.priceAxisViews.call(this,t,i):null},h.prototype.hasContextMenu=function(){return this._adapter.shouldShowContextMenu()},h.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},h.prototype.onlyYMoving=function(){return!0},h.prototype.movable=function(){return Boolean(this._adapter._onMoveCallback)},h.createProperties=function(e){var t=new a("linetoolorder",e,!1,!1);return h._configureProperties(t),t},h._configureProperties=function(e){r._configureProperties(e)},t.LineToolOrder=h}).call(this,i("Kxc7"))},B8p3:function(e,t,i){"use strict";i.r(t),i.d(t,"setHandler",(function(){return l}));var r=i("Eyy1"),n=i("JWMC"),o=null,s=-1/0,a="";function l(e){var t={capture:!0,passive:!0};null!==e?(null===o&&(document.addEventListener("keydown",u),document.addEventListener("mousedown",c,t),document.addEventListener("mouseup",c,t),document.addEventListener("mousewheel",c,t),document.addEventListener("wheel",c,t)),o=e):(o=null,document.removeEventListener("keydown",u),document.removeEventListener("mousedown",c,t),document.removeEventListener("mouseup",c,t),document.removeEventListener("mousewheel",c,t),document.removeEventListener("wheel",c,t))}function c(){a="",s=-1/0}function u(e){if(!e.defaultPrevented){var t=e.ctrlKey||e.metaKey||e.altKey;"Shift"!==e.key||t||e.repeat?c():e.timeStamp-s<350&&a===e.code?(e.preventDefault(),c(),Object(r.ensureNotNull)(o)(),Object(n.trackEvent)("Keyboard Shortcuts","Shift+Shift")):(s=e.timeStamp,a=e.code)}}},BBCR:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="square" d="M6.145 11.968L14 5.5l7.855 6.468a.3.3 0 0 1-.191.532H6.336a.3.3 0 0 1-.19-.532zm0 4.064L14 22.5l7.855-6.468a.3.3 0 0 0-.191-.532H6.336a.3.3 0 0 0-.19.532z"/></svg>'},BHQF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t||{},n(e)&&(t.headers?t.headers instanceof Headers||(t.headers=new Headers(t.headers)):t.headers=new Headers,window.locale&&t.headers.set("X-Language",window.locale),t.headers.set("X-Requested-With","XMLHttpRequest"));var o=window.fetch(e,t);return o.then((function(n){if(!n.ok){var o="";t.method&&(o+=t.method.toUpperCase()+" "),o+=e,o+=". Status "+n.status,n.statusText&&(o+=". "+n.statusText),n.headers.via&&(o+=". Via: "+n.headers.via),i.logBodyOnError&&"string"==typeof t.body&&(o+=". Body: "+t.body.slice(0,1024)),r.logError(o)}return n}),(function(i){var n="";t.method&&(n+=t.method.toUpperCase()+" "),n+=e,navigator.onLine?n+=". "+i:n+=". User is offline.",r.logError(n)})),o};var r=(0,i("txPx").getLogger)("Fetch");function n(e){var t=document.createElement("a");return t.href=e,t.hostname||(t.href=t.href),t.hostname===location.hostname&&!t.username}},BI5g:function(e,t,i){"use strict";i.r(t),
i.d(t,"breakpoints",(function(){return r})),i.d(t,"mobileFirstBreakpoints",(function(){return n}));var r={desktop:1/0,desktopHd:1919,phone:767,"phone-vertical":479,tablet:1019},n={base:0,"phone-vertical":330,phone:480,tablet:768,notebook:1020,desktop:1540,"desktop-hd":1920}},BOPY:function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("f6yo").pointInCircle,o=i("VdBB").HitTestResult,s=i("zDbI").CHART_FONT_FAMILY,a=i("cPgM").ScaledPaneRenderer;function l(e,t){this.source=e,this._rendererFactory=t}function c(e,t){a.call(this),this._barWidth=e.barWidth,this._plates=e.plates,this._tooltip=e.tooltip,this._model=t}function u(){this._layout=[],this._currentId=void 0,this.tooltipHovered=!1}l.prototype.update=function(){},l.prototype.renderer=function(e,t){return this._rendererFactory(this.source)},inherit(c,a),c.prototype._drawImpl=function(e){e.save();for(var t=0;t<this._plates.length;t++)if(this._plates[t].highlightByAuthor){this._highlightByAuthor=!0;break}this._plates.forEach(this._drawItem.bind(this,e)),this._tooltip.draw(this._plates.map(function(e){return this._plateTransform(e)}.bind(this)),e),this._tooltip.endDraw(),e.restore()},c.prototype._drawItem=function(e,t){e.save(),this._highlightByAuthor&&!t.highlightByAuthor&&(e.globalAlpha=.4);var i=this._dotTransform(t);i.mine?this._drawTriangle(e,i):this._drawDot(e,i),e.restore()},c.prototype._commonTransform=function(e){var t=Math.max(1.4*e.minSize,this._barWidth+4),i={up:-1,down:1}[e.direction]*(e.yInverted?-1:1)*(t*(e.order+.6)+.25*t),r=e.y+i,n=TradingView.clone(e.overridedTheme||this.themes[e.theme]);return n.dotBorderWidth=e.hovered||e.highlightByAuthor?4:2,{id:e.id,theme:n,themeName:e.theme,x:Math.round(e.x+1),y:Math.round(r),yInverted:e.yInverted,pinned:e.pinned,hovered:e.hovered}},c.prototype._dotTransform=function(e){var t=this._commonTransform(e);return t.radius=Math.max(e.minSize/2,.4*this._barWidth),t.label=e.label,t.labelFontColor=e.labelFontColor,t.labelFontSize=Math.ceil(Math.max(10,Math.min(t.radius,20))),this._model.updateDotData(e,t)},c.prototype._plateTransform=function(e){var t=this._commonTransform(e);return this._model.updatePlateData(e,t)},c.THEMES=["green","red","neutral","yellow","blue"],c.prototype.themes={green:{border:"#78C143",background:"#8DDD54"},red:{border:"#CC4545",background:"#ED5A5A"},neutral:{border:"#EAC300",background:"#FFD400"},yellow:{border:"#EAC300",background:"#FFD400"},blue:{border:"#047ACE",background:"#0496FF"}},c.prototype._drawTriangle=function(e,t){e.strokeStyle=t.theme.border,e.fillStyle=t.theme.background,e.lineWidth=t.theme.dotBorderWidth;var i=t,r=t.radius,n=Math.cos(Math.PI/6)*r,o=Math.sin(Math.PI/6)*r;e.translate(i.x,i.y),"up"===t.direction!==t.yInverted&&e.rotate(Math.PI),t.public||(e.lineWidth/=2),e.beginPath(),e.moveTo(0,-r),e.lineTo(n,o),e.lineTo(-n,o),e.lineTo(0,-r),e.closePath(),e.stroke(),t.public&&e.fill()},c.prototype._drawDot=function(e,t){e.strokeStyle=t.theme.border,e.fillStyle=t.theme.background,e.lineWidth=t.theme.dotBorderWidth,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!0),e.closePath(),
e.stroke(),e.fill(),t.label&&t.radius>6&&(e.textAlign="center",e.textBaseline="middle",e.font="bold "+t.labelFontSize+"px "+s,e.fillStyle=t.labelFontColor,e.fillText(t.label,t.x,t.y))},c.prototype.hitTest=function(e){for(var t,i=this._plates.length-1;i>=0;--i)if(t=this._hitTestDot(this._plates[i],e))return t;return null},c.prototype._hitTestDot=function(e,t){var i=this._dotTransform(e),s=new r(i.x,i.y);return n(t,s,Math.max(i.radius,8))?new o(o.REGULAR,e):null},u.prototype._createLayout=function(){throw new Error("Child class must override this member")},u.prototype._updatePlate=function(e){throw new Error("Child class must override this member")},u.prototype._getContainer=function(e){return this._container&&this._context===e||(this._context=e,this._container=$(e.canvas).parent()),this._container},u.prototype._plateArrowSize=14,u.prototype.showPlate=function(e,t){if(this._currentId!==e.id||!this._layout||0===this._layout.length||null==this._layout[0].parentNode){this._currentId=e.id,this._createLayout(),this._getContainer(t).append(this._layout);var i=this;this._layout.hover((function(){i.tooltipHovered=!0,$(this).stop(!0).fadeTo(0,1)}),(function(){i.tooltipHovered=!1}))}var r=Math.round(e.barWidth/2);r>15&&(r=15),r<10&&(r=10),this._updatePlate(e);var n=t.canvas.getBoundingClientRect(),o=e.x-this._layout.outerWidth()<this._plateArrowSize,s=n.width-e.x+Math.round(e.barWidth/2+r);o&&(s-=this._layout.outerWidth()+2*this._plateArrowSize);var a=n.height;this._layout.toggleClass("right",o),this._layout.css({top:Math.min(Math.max(e.y,20),a-this._layout.outerHeight()-10),right:s,fontSize:r+"px",display:"block"})},u.prototype._removeLayout=function(){this.tooltipHovered||(this._layout.stop(!0),this._layout.remove())},u.prototype._toggleLayout=function(e){this._layout.toggle(e)},u.prototype.hide=function(e){this.tooltipHovered?this._layout.stop(!0).fadeTo(0,1):this._layout.fadeOut(400,(function(){$(this).remove(),e()}))},u.prototype.setSource=function(e){this.source=e},t.BarsMarksContainerPaneView=l,t.BarsMarksContainerRenderer=c,t.BarMarkTooltip=u},Bdgc:function(e,t,i){"use strict";var r,n;i.r(t),i.d(t,"ParentEvents",(function(){return r})),i.d(t,"IFrameEvents",(function(){return n})),function(e){!function(e){e.SetSymbol="set-symbol",e.SetInterval="set-interval"}(e.Names||(e.Names={}))}(r||(r={})),function(e){!function(e){e.SymbolClick="tv-widget-symbol-click",e.WidgetLoad="tv-widget-load",e.ResizeIframe="tv-widget-resize-iframe",e.NoData="tv-widget-no-data"}(e.Names||(e.Names={}))}(n||(n={}))},BlPY:function(e,t){e.exports=[{name:window.t("All"),value:""},{name:window.t("Stock"),value:"stock"},{name:window.t("Futures"),value:"futures"},{name:window.t("Forex"),value:"forex"},{name:window.t("CFD"),value:"cfd"},{name:window.t("Cryptocurrency"),value:"bitcoin,crypto"},{name:window.t("Index"),value:"index"},{name:window.t("Economy"),value:"economic"}]},Bt3k:function(e,t,i){"use strict";function r(e,t){this.tooltips={},this.tooltipFactory=e,this.source=t}function n(e,t){this.renderer=e,this._tooltip=t,this.visible=!1}
r.prototype.findOrCreateTooltip=function(e){var t=this.tooltips[e.id];return null==t&&(e.hovered||e.pinned)&&(t=this._createTooltip(),this.tooltips[e.id]=t),t},r.prototype.showPlate=function(e,t){var i=this.findOrCreateTooltip(e);null!=i&&(i._drawPlate(e,t),i.plateData=e)},r.prototype.draw=function(e,t){this.hoveredId=null;for(var i=0;i<e.length;i++)e[i].hovered&&(this.hoveredId=e[i].id);e.forEach(function(e){this.showPlate(e,t)}.bind(this))},r.prototype.endDraw=function(){for(var e in this.tooltips)if(this.tooltips.hasOwnProperty(e)){var t=this.tooltips[e];t.toggleVisibility(),this.hoveredId&&t.plateData.id!==this.hoveredId&&!t.plateData.pinned&&(t.remove(),delete this.tooltips[e])}},r.prototype.removeAll=function(){for(var e in this.tooltips){if(this.tooltips.hasOwnProperty(e))this.tooltips[e].remove()}this.tooltips={}},r.prototype.removeTooltip=function(e){delete this.tooltips[e]},r.prototype._createTooltip=function(){return new n(this,this.tooltipFactory())},n.prototype._drawPlate=function(e,t){var i=this;this.visible=!0,this._tooltip.setSource(this.renderer.source),this._tooltip.showPlate(e,t),e.hovered||e.pinned||this._tooltip.hide((function(){i.renderer.removeTooltip(e.id)}))},n.prototype.remove=function(){this._tooltip._removeLayout()},n.prototype.toggleVisibility=function(){this._tooltip._toggleLayout(this.visible),this.visible=!1},t.TooltipRenderer=r},BxxN:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("24R9"),n=["mobileapp","mobileapp_new"];function o(e,t,i){void 0===e&&(e={}),void 0===t&&(t=""),void 0===i&&(i=!0);var o="/chart/";e.chartId&&(o=""+o+e.chartId+"/",delete e.chartId),i&&(e=function(e){if(0===location.search.length)return e;var t=Object(r.getUrlParams)();return n.forEach((function(i){void 0!==t[i]&&(e[i]=t[i])})),e}(e));var s=Object(r.createUrlParams)(e);return 0===t.length&&0===s.length||(o=o+"?"+t+s),o}},C85F:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#f7f8fa" d="M0 18h18V0H0z"/><circle fill="#ed5565" cx="9" cy="9" r="4"/></svg>'},CHw2:function(e,t,i){"use strict";var r=i("WPQD").LineToolTrendLine,n=i("Ocx9").DefaultProperty,o=window.t("Extended Line");function s(e,t){var i=t||s.createProperties();r.call(this,e,i),this._constructor="LineToolExtended"}inherit(s,r),s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Extended Line"},s.createProperties=function(e){var t=new n("linetoolextended",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolExtended=s},CJIV:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("p1SQ").LineToolHorzLinePriceAxisView,o=i("tc+8"),s=i("Ocx9").DefaultProperty,a=window.t("Horizontal Ray");function l(e,t){this._constructor="LineToolHorzRay";var o=t||l.createProperties();this._priceAxisView=new n(this),r.call(this,e,o),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("1oDZ").HorzRayPaneView;this._setPaneViews([new t(this,this._model)])
}.bind(this).bind(null,i)).catch(i.oe)}inherit(l,r),l.prototype.pointsCount=function(){return 1},l.prototype.translatedType=function(){return a},l.prototype.name=function(){return"Horizontal Ray"},l.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},l.prototype.updateAllViews=function(){r.prototype.updateAllViews.call(this),this._priceAxisView.update()},l.prototype.canHasAlert=function(){return!0},l.prototype._getAlertPlots=function(){var e=this._points[0],t={index:e.index+1,price:e.price};return[this._linePointsToAlertPlot([e,t],null,!1,!0)]},l.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("e0H+").HorizontalRayDefinitionsViewModel}.bind(null,i)).catch(i.oe)},l.prototype.template=function(){var e=r.prototype.template.call(this);return e.text=this.properties().childs().text.value(),e},l.prototype._applyTemplateImpl=function(e){r.prototype._applyTemplateImpl.call(this,e),this.properties().childs().text.setValue(e.text)},l.createProperties=function(e){var t=new s("linetoolhorzray",e);return l._configureProperties(t),t},l._configureProperties=function(e){r._configureProperties(e),e.hasChild("text")||e.addChild("text",new o("")),e.addExclusion("text")},t.LineToolHorzRay=l},CLNU:function(e,t,i){(function(e){TradingView.cleanButAmpersand=function(e,t){var i=t?["&amp;"]:["&"];return TradingView.clean(e,t,i)},TradingView.strip_tags=function(e){return e&&e.replace?e.replace(/(<([^>]+)>)/gi,""):e},TradingView.encodeSpread=function(e){return encodeURIComponent(e)},TradingView.clean=function(e,t,i){var r=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["'","&#39;"]],n=e;if(!e||!e.replace)return n;for(var o=0;o<r.length;o++){var s=r[o][0],a=r[o][1];i&&i.indexOf&&-1!==i.indexOf(t?a:s)||(n=t?n.replace(new RegExp(a,"g"),s):n.replace(new RegExp(s,"g"),a))}return n},e&&e.exports&&(e.exports={clean:TradingView.clean,cleanButAmpersand:TradingView.cleanButAmpersand,stripTags:TradingView.strip_tags})}).call(this,i("YuTi")(e))},CPmC:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));var r=new WeakMap;function n(e,t){var i=r.get(e);return i instanceof Function?i(t):i&&i[t]}function o(e,t,i){if(i instanceof Function)r.set(e,i);else{var n=r.get(e),o=void 0===n||n instanceof Function?{}:n;o[t]=i,r.set(e,o)}}},CW80:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("aO4+"),s=i("MSvv"),a=i("Ss5c"),l=i("OH2X"),c=i("gf4d"),u=i("USzt"),h=i("ogJP"),d=i("tc+8"),p=i.n(d),f=i("cBZt"),_=i("I9zs"),m=i("GVHu"),v=i("Qb4w"),g=i("k9/m"),y=i("ytGH"),b=function(e){function t(t){var i=e.call(this)||this;return i._model=t.model(),i._source=t,i}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1;var r=this._source.model(),n=this._source.priceScale()
;if(null!==n&&r.isPriceScaleVisible(n)){var o=this._source.lastValueData(!1);o.noData||(i.background=o.color,i.color=this.generateTextColor(o.color),i.coordinate=o.coordinate,i.floatCoordinate=o.floatCoordinate,this._showAxisLabel()&&(e.text=o.text,e.visible=!0))}},t.prototype._showAxisLabel=function(){return this._source.properties().childs().axisLabelVisible.value()},t}(i("KcY8").a),S=Object(f.studyIdString)("AnchoredVWAP","tv-basicstudies"),w=window.t("Anchored VWAP"),P=function(e){function t(i,r,o){var s=this;o=o||Object(n.ensureNotNull)(i.studyMetaInfoRepository().findByIdSync({type:"java",studyId:S}));var a=r||t._createPropertiesFromStudyMetaInfo(o,i.studyVersioning());(s=e.call(this,i,o,"anchoredvwap",a)||this)._constructor="LineToolAnchoredVWAP";var l=s.metaInfo().plots[0],c=[new _.StudyPaneView(s,s.model().mainSeries(),s.model(),l.id)];s._lastValuePriceAxisView=new b(s),s._anchorPriceCalculated=!1,s._setPaneViews(c),i.properties().scalesProperties.showStudyLastValue.subscribe(s,s._onShowStudyLastValueChanged);var u=s.properties().childs().styles.childs().VWAP.childs().linewidth;return s._widthsProperty=new y.LineToolWidthsProperty([u]),s.properties().onRestoreFactoryDefaults().subscribe(s,s._onRestoreFactoryDefaults),s}return Object(r.__extends)(t,e),t.prototype.destroy=function(){this.properties().onRestoreFactoryDefaults().unsubscribeAll(this),this.model().properties().scalesProperties.showStudyLastValue.unsubscribeAll(this),e.prototype.destroy.call(this)},t.prototype.pointsCount=function(){return 1},t.prototype.priceAxisViews=function(t,i){if(i!==this.priceScale()||this.isSourceHidden())return null;var n=e.prototype.priceAxisViews.call(this,t,i);return null===n?[this._lastValuePriceAxisView]:Object(r.__spreadArrays)(n,[this._lastValuePriceAxisView])},t.prototype.updateAllViews=function(){e.prototype.updateAllViews.call(this),this._lastValuePriceAxisView.update()},t.prototype.offset=function(e){return 0},t.prototype.firstValue=function(){return this._model.mainSeries().firstValue()},t.prototype.getMinFirstBarIndexForPlot=function(){return-1/0},t.prototype.isSelfColorerPlot=function(e){return!1},t.prototype.translatedType=function(){return w},t.prototype.priceRange=function(e,t){if(!this._isReady()||this.isSourceHidden())return null;var i=this.plots().minMaxOnRangeCached(e,t,[{name:this.metaInfo().plots[0].id,offset:0}]);if(null===i)return null;var r=Object(n.ensureNotNull)(this.priceScale());return r.isLog()?new v.PriceRange(r.priceToLogical(i.min),r.priceToLogical(i.max)):new v.PriceRange(i.min,i.max)},t.prototype.isIncludedInAutoScale=function(){return!0},t.prototype.lastValueData=function(e,t){var i={noData:!0},r=this.priceScale();if(this._model.timeScale().isEmpty()||null===this.priceScale()||null===r||r.isEmpty()||this.plots().isEmpty())return i;var o=this._model.timeScale().visibleBarsStrictRange();if(null===o)return i;if(!this.properties().childs().visible.value())return i;var s=this.plots().search(o.lastBar(),g.PlotRowSearchMode.NearestLeft,1);if(null===s)return i
;var a=o.contains(s.index),l=!e&&a?s:Object(n.ensureNotNull)(this.plots().last());if(!l||!Object(h.isNumber)(l.value[1]))return i;var c=l.value[1],u=this.properties().childs().styles.childs().VWAP,d=Object(n.ensureNotNull)(this.firstValue()),p=r.priceToCoordinate(c,d);return{noData:!1,price:c,color:u.childs().color.value(),coordinate:p,floatCoordinate:p,index:l.index,text:r.formatPrice(c,d),formattedPriceAbsolute:r.formatPriceAbsolute(c),formattedPricePercentage:r.formatPricePercentage(c,d)}},t.prototype.restoreData=function(t){e.prototype.restoreData.call(this,t),void 0!==t.data&&(this._anchorPriceCalculated=!0)},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.createProperties=function(e){return s.StudyLineDataSource._createPropertiesFromStudyIdAndState(S,e)},t.studyId=function(){return S},t.createPropertiesFromStudyMetaInfoAndState=function(e,i,r,n){var o=Object(m.prepareStudyPropertiesForLoadChart)(e,i,r,null,n);return t._configureProperties(o),o},t.prototype._studyInputs=function(e){Object(n.assert)(1===e.length,"all the line tool points should be defined");var t=e[0].index,i=this._model.mainSeries().bars().valueAt(t);return null===i?(this._subscribeApplyInputsOnSeriesCompleted(),null):{start_time:1e3*Object(n.ensure)(i[0]),source:this.properties().childs().inputs.childs().source.value()}},t.prototype._isReady=function(){return e.prototype._isReady.call(this)&&this._anchorPriceCalculated&&this.model().lineBeingEdited()!==this},t.prototype._onDataUpdated=function(t,i,r){e.prototype._onDataUpdated.call(this,t,i,r),!this._anchorPriceCalculated&&this.isActualSymbol()&&this._updateAnchorPrice()},t.prototype._onDataCleared=function(){e.prototype._onDataCleared.call(this),this._anchorPriceCalculated=!1},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"Pd5h")).then((function(e){return e.AnchoredVWAPDefinitionsViewModel}))},t._createPropertiesFromStudyMetaInfo=function(e,i){var r=Object(m.prepareStudyProperties)(e,null,null,i);return t._configureProperties(r),r},t._configureProperties=function(e){s.StudyLineDataSource._configureProperties(e),e.hasChild("axisLabelVisible")||e.addChild("axisLabelVisible",new p.a(!0))},t.prototype._onShowStudyLastValueChanged=function(){this._lastValuePriceAxisView.update(),this.model().updateSource(this)},t.prototype._updateAnchorPrice=function(){if(null!==this.firstValue()){var e=this.points()[0].index,t=this.plots().valueAt(e);if(null!==t){var i=t[1];null!=i&&(this._points[0].price=i,this._anchorPriceCalculated=!0)}}},t.prototype._onRestoreFactoryDefaults=function(){this.properties().childs().axisLabelVisible.setValue(!0)},t}(s.StudyLineDataSource),C=i("rwPJ"),T=i("e92V"),x=i("QIuV");function I(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var r=i[t];TradingView[r]=e[r]}}function E(e,t,i,r){return Object(n.assert)(Object(T.a)(e),"Unknown line tool: "+e),
"LineToolVbPFixed"===e?new u.a(t,i,Object(n.ensureDefined)(r),t.mainSeries()):"LineToolRegressionTrend"===e?new c.LineToolRegressionTrend(t,i,Object(n.ensureDefined)(r)):"LineToolAnchoredVWAP"===e?new P(t,i,Object(n.ensureDefined)(r)):e in C?new(Object(n.ensureDefined)(C[e]))(t,i,Object(n.ensureDefined)(r)):new(Object(n.ensureDefined)(l[e]))(t,i)}function L(e,t){return Object(n.assert)(Object(T.a)(e),e+" should be name of the line tool"),"LineToolVbPFixed"===e?u.a.createProperties(t):"LineToolRegressionTrend"===e?c.LineToolRegressionTrend.createProperties(t):"LineToolAnchoredVWAP"===e?P.createProperties(t):e in C?Object(n.ensureDefined)(C[e]).createProperties(t):Object(n.ensureDefined)(l[e]).createProperties(t)}function O(e,t,i,r,o){if(Object(n.assert)(Object(T.b)(e),e+" should be name of the study line tool"),"LineToolVbPFixed"===e)return u.a.createPropertiesFromStudyMetaInfoAndState(t,i,r,o);if("LineToolRegressionTrend"===e)return c.LineToolRegressionTrend.createPropertiesFromStudyMetaInfoAndState(t,i,r,o);if("LineToolAnchoredVWAP"===e)return P.createPropertiesFromStudyMetaInfoAndState(t,i,r,o);if(e in C)return Object(n.ensureDefined)(C[e]).createPropertiesFromStudyMetaInfoAndState(t,i,r,o);throw new Error("Property creation is not implemented for study line tool "+e)}function A(e){return e instanceof a.LineDataSource}function M(e){return e instanceof s.StudyLineDataSource}function k(e){return e instanceof x.LineToolTrading}function D(e){var t=null;if(e===u.a.studyId())t="LineToolVbPFixed";else if(e===c.LineToolRegressionTrend.studyId())t="LineToolRegressionTrend";else for(var i in C)if(C[i].studyId()===e)return i;return t}function R(e){for(var t in l)if(l[t]===e)return t;if(e===u.a)return"LineToolVbPFixed";if(e===c.LineToolRegressionTrend)return"LineToolRegressionTrend";if(e===P)return"LineToolAnchoredVWAP";for(var i in C)if(C[i]===e)return i;return Object(n.assert)(!1,"Trying to get classname of unknown line tool"),null}function V(e,t){var i=Object(n.ensureNotNull)(t.priceScale()),o=Object(n.ensureNotNull)(t.firstValue());return e.map((function(e){var t=e.price,n=i.priceToCoordinate(t,o)-40,s=i.coordinateToPrice(n,o);return Object(r.__assign)(Object(r.__assign)({},e),{price:s})}))}function B(e,t,i,r){var s=Object(n.ensureNotNull)(R(t.constructor)),a=t.properties().clone();a.visible.setValue(!0);var l=Object(n.ensureNotNull)(t.ownerSource()),c=E(s,e,a);void 0!==r&&c.setId(r),c.setOwnerSource(l);var u=t.fixedPoints();(i?u.map((function(e){return e.add(new o.Point(20,20))})):u).forEach((function(e){return c.addFixedPoint(e)}));var h=t.normalizedPoints(),d=i?V(h,l):h,p=t.points();return c.restorePoints(d,p),c.cloneData&&c.cloneData(t),c.checkAlert&&c.checkAlert(),c}function N(e){return e.getType()in C}i.d(t,"createLineTool",(function(){return E})),i.d(t,"createLineToolProperties",(function(){return L})),i.d(t,"createStudyLineToolProperties",(function(){return O})),i.d(t,"isLineTool",(function(){return A})),i.d(t,"isStudyLineTool",(function(){return M})),i.d(t,"isTrading",(function(){return k})),
i.d(t,"tryFindStudyLineToolNameByStudyId",(function(){return D})),i.d(t,"lineToolClassName",(function(){return R})),i.d(t,"shiftLineToolOnClone",(function(){return V})),i.d(t,"cloneLineTool",(function(){return B})),i.d(t,"isMTPredictionTool",(function(){return N})),i.d(t,"isLineToolName",(function(){return T.a})),i.d(t,"isStudyLineToolName",(function(){return T.b})),I(l),I({LineToolRegressionTrend:c.LineToolRegressionTrend,LineToolVbPFixed:u.a,LineToolAnchoredVWAP:P}),I(C)},Cf1E:function(e,t,i){"use strict";function r(e){if(void 0===e)return"";if(e instanceof Error){var t=e.message;return e.stack&&(t+=" "+e.stack),t}return"string"==typeof e?e.toString():JSON.stringify(e)}i.r(t),i.d(t,"errorToString",(function(){return r}))},Cu4q:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 108 108" width="108" height="108"><path fill="#2196F3" stroke="#2196F3" stroke-linejoin="round" stroke-width="2" d="m57.29 54a15.43 15.43 0 1 1 0-30.86 15.43 15.43 0 0 1 0 30.86zm5.06 10.3C66.2 64.3 83 69.74 83 85.5v3.47H31.57V85.9a21.6 21.6 0 0 1 21.6-21.6l9.18.02z"/><path fill="#4a4a4a" d="m48.71 50.86a17.43 17.43 0 1 1 0-34.86 17.43 17.43 0 0 1 0 34.86zm0-4a13.43 13.43 0 1 0 0-26.86 13.43 13.43 0 0 0 0 26.86zM25 81.83v-1.09a19.6 19.6 0 0 1 19.6-19.6 5627.07 5627.07 0 0 1 9.09.02 2 2 0 0 0 .17-4l-4.67-.01H44.6A23.6 23.6 0 0 0 21 80.74v3.08c0 1.1.9 2 2 2h51.43a2 2 0 1 0 0-4H25zM64.14 70h20.57a2 2 0 1 0 0-4H64.14a2 2 0 1 0 0 4z"/></svg>'},CwKc:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path stroke-linecap="square" d="M11.5 21.5v-7m3 7v-5m3 5v-3m-9 3v-5"/><path d="M5.5 22v-3"/><path stroke-linecap="square" d="M5.5 13.5l4.297-4.297a2.406 2.406 0 0 1 3.406 0l2.594 2.594c.94.94 2.463.943 3.406 0L23.5 7.5M22.5 12.5v6m-3-3h6"/></g></svg>'},CxTi:function(e,t,i){e.exports={css_value_currency_label_top:"6",css_value_currency_label_radius:"4",css_value_border_color_light:"#D1D4DC",css_value_border_color_dark:"#363A45","price-axis-currency-label-wrapper":"price-axis-currency-label-wrapper-opoVZ91E","price-axis-currency-label":"price-axis-currency-label-1aGvtcW9",readonly:"readonly-OYsh-rpT","price-axis-currency-label-text":"price-axis-currency-label-text-1o_xgUrU","price-axis-currency-label-arrow-down":"price-axis-currency-label-arrow-down-243KKK5C"}},DYI2:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor" transform="translate(3 5)"><path d="M.964 9C3 5 6.679 1.5 11 1.5c4.32 0 8 3.5 10.036 7.5C19 13 15.32 16.5 11 16.5 6.679 16.5 3 13 .964 9z"/><circle cx="11" cy="9" r="3.5"/><path stroke-linecap="square" d="M2.5 17.5l17-17"/></g></svg>'},Daqx:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=["Z","Y","X","W","V","U","T","S"],n=["A","B","C","D","E","F","G","H"],o=function(){function e(e){this.label=e}return e.prototype.equals=function(e){return null!==e&&this.label===e.label},e}();function s(e,t){
var i="left"===e?r:n;return new o(t<i.length?i[t]:"")}},DcGp:function(e,t,i){"use strict";function r(e,t,i){var r={name:e,frameElementId:t,data:i};window.parent.postMessage(r,"*")}function n(e,t){function i(i){i.data&&i.data.name&&i.data.name===e&&t(i.data.data)}return window.addEventListener("message",i,!1),function(){window.removeEventListener("message",i,!1)}}i.r(t),i.d(t,"dispatchEventToParent",(function(){return r})),i.d(t,"listenEventFromParent",(function(){return n}))},Dq3s:function(e){e.exports=JSON.parse('{"4":["v",["h",0,2],["h",1,3]],"6":["v",["h",0,2,4],["h",1,3,5]],"8":["v",["h",0,2,4,6],["h",1,3,5,7]],"2h":["h",0,1],"2v":["v",0,1],"2-1":["v",["h",0,2],1],"3s":["h",0,["v",1,2]],"3h":["h",0,1,2],"3v":["v",0,1,2],"1-2":["v",0,["h",1,2]],"3r":["h",["v",0,1],2],"4h":["h",0,1,2,3],"4v":["v",0,1,2,3],"4s":["h",0,["v",1,2,3]],"1-3":["v",0,["h",1,2,3]],"2-2":["v",["h",0,1],["v",2,3]],"1-4":["v",0,["h",1,2,3,4]],"5s":["h",0,["v",1,2,3,4]],"6c":["v",["h",0,1],["h",2,3],["h",4,5]],"8c":["v",["h",0,1],["h",2,3],["h",4,5],["h",6,7]],"s":0}')},DsEq:function(e,t,i){"use strict";i.r(t),i.d(t,"DataProblemModel",(function(){return o}));var r=i("QfUd"),n=i("ogJP"),o=function(){function e(e,t){this._dataProblem=new r.a(null),this._quotesProvider=e,this._quotesProvider.quotesUpdate().subscribe(this,this._update.bind(this)),this._resetSubscription=t,this._resetSubscription.subscribe(this,this._resetStatus)}return e.prototype.destroy=function(){this._quotesProvider.quotesUpdate().unsubscribeAll(this),this._resetSubscription.unsubscribeAll(this)},e.prototype.status=function(){return this._dataProblem},e.prototype._resetStatus=function(){this._dataProblem.setValue(null)},e.prototype._update=function(e){void 0===e.values||void 0===e.values.data_problem?this._resetStatus():this._dataProblem.setValue(Object(n.clone)(e.values.data_problem))},e}()},E3Wt:function(e,t,i){"use strict";i.r(t),i.d(t,"applyIndicatorsToAllChartsImpl",(function(){return n})),i.d(t,"applyIndicatorToAllChartsImpl",(function(){return o}));var r=i("Eyy1");function n(e,t){var i=t.model().model().studyTemplate();e.undoHistory.beginUndoMacro("Apply Indicators to Entire Layout");for(var r=0;r<e.chartWidgetsDefs.length;r++){var n=e.chartWidgetsDefs[r].chartWidget;if(n!==t){var o=n.model();o&&o.applyStudyTemplate(i,"")}}e.undoHistory.endUndoMacro()}function o(e,t,i,n,o){e.undoHistory.beginUndoMacro(o);for(var s=0;s<e.chartWidgetsDefs.length;s++){var a=e.chartWidgetsDefs[s].chartWidget;if(a!==t){var l=a.model();if(l){var c=n.isOnMainPane?Object(r.ensureNotNull)(l.model().paneForSource(a.model().model().mainSeries())):l.model().createPane(n.paneIndex),u=l.pasteSourceFromClip(c,i,!0);if(u&&1===u.length){var h=u[0];if(n.asCompare){var d=Object(r.ensureNotNull)(l.mainSeries().priceScale());l.moveToScale(h,Object(r.ensureDefined)(c),d,o),l.setPriceScaleMode({percentage:!0},d,"")}}l.model().lightUpdate()}}}e.undoHistory.endUndoMacro()}},E6p6:function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.PRE_SESSION=-1]="PRE_SESSION",
e[e.POST_SESSION=-2]="POST_SESSION",e[e.LASTBAR_SESSION=-3]="LASTBAR_SESSION"}(r||(r={}))},EEWc:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#ed5565" d="M0 0h18v18H0z"/><path fill="#fc0" d="M6.6 5.9l-4.1 3L4 4l1.6 5-4.2-3h5.1zm1.5-2.7l1.6.7-1.7.4L9.1 3 9 4.7zM10 5l1.2 1.2L9.5 6l1.5-.7-.8 1.5zm.3 2.5l.6 1.6-1.4-1h1.7l-1.3 1zm-1.2 2L9 11.2 8 9.8l1.7.6-1.7.4z"/></svg>'},EQCO:function(e,t,i){"use strict";(function(t){var r=i("23IT"),n=i("tF8J").generateTitleForGui,o=i("txPx").getLogger("Alerts.Band"),s=i("n5al"),a=i("Ialn");TradingView="object"==typeof t?t.TradingView:TradingView||{};var l={create:function(e){var t,i=e||{},r=i.type;if("MainSeries"===r)t=u;else if("Study"===r||/^study_\w+/.test(r)||"StudyStrategy"===r)t=h;else if("Value"===r)t=d;else{if(!/^LineTool.*/i.test(r))return o.logError("Unknown alert band type "+r),null;t=p}return new t(i)}};function c(e){this._band=e||{}}function u(){c.apply(this,arguments)}function h(){c.apply(this,arguments)}function d(){c.apply(this,arguments)}function p(){c.apply(this,arguments)}c.prototype.id=function(){return this._band.id},c.prototype.type=function(){return this._band.type},c.prototype.title=function(){return this._band.title},c.prototype.hasPlots=function(){return this._band.plots&&this._band.plots.length},c.prototype.getActualSymbol=function(){return this._band.actualSymbol},c.prototype.getSymbolString=function(){return this._band.symbolString},c.prototype.getPlotTitle=function(e){return e.title?e.title:r.isOhlcOpenPlot(e)?e.ohlcTitle+" "+$.t("Open"):r.isOhlcHighPlot(e)?e.ohlcTitle+" "+$.t("High"):r.isOhlcLowPlot(e)?e.ohlcTitle+" "+$.t("Low"):r.isOhlcClosePlot(e)?e.ohlcTitle+" "+$.t("Close"):"vol"===e.id?$.t("Volume"):"vol_ma"===e.id?$.t("Volume MA"):"open"===e.id?$.t("Open"):"high"===e.id?$.t("High"):"low"===e.id?$.t("Low"):"close"===e.id?$.t("Close"):e.id},c.prototype.getPlots=function(e){var t=e||{};if(!this._band.plots||!this._band.plots.length)return this._band.plots;if("inputSelect"===t.format){var i=-1;return this._band.plots.map((function(e){return{value:++i,title:this.getPlotTitle(e)}}),this)}return this._band.plots},c.prototype.hasUsualPlots=function(){var e=this._band.plots;return!e||e.filter(r.isAlertConditionPlot).length<e.length},c.prototype.getInputs=function(){return{}},inherit(u,c),u.prototype.title=function(e){var t=i("8woN"),r=e||{},o=!!r.withInterval,s=this._band.actualSymbol;return t&&(s=t.shortName(s)),n({symbol:s,interval:o?this._band.interval:null,style:this._band.style,inputs:this._band.styleInputs||{},boxSize:this._band.boxSize,reversalAmount:this._band.reversalAmount,extended:r.extended})},u.prototype.getInterval=function(){return this._band.interval},u.prototype.getStyle=function(){return this._band.style},u.prototype.getStyleInputs=function(){return this._band.styleInputs},u.prototype.isRangeBasedStyle=function(){return s.isRangeBasedStyle(this._band.style)},u.prototype.isSpread=function(){return this._band.isSpread},u.prototype.isExtended=function(){
return this._band.extendedHours},u.prototype.getDividendsAdjustment=function(){return this._band.dividendsAdjustment},inherit(h,c),h.prototype.title=function(e){var t,i,r,n=e||{},o=n.withPlotTitle,s=this._band;return n.short&&s.shortTitle?t=s.shortTitle:s.title?t=s.title:(t=s.shortDescription||"Study",i=[],Object.keys(s.inputs).forEach((function(e){var t=s.inputs[e]&&s.inputs[e].id;t&&!s.inputs[e].isHidden&&void 0!==s.inputs[t]&&i.push(s.inputs[t])})),i.length&&(t+=" ("+i.join(", ")+")")),o&&(r=this.selectedPlot())&&(t+=" "+(r.title||$.t("Untitled Plot"))),a.isRtl()&&(t=a.forceLTRStr(t)),t},h.prototype.selectedPlot=function(){var e=this._band;return void 0===e.plotIndex?null:this.getPlots().filter((function(t){return t.value===e.plotIndex}))[0]||null},h.prototype.getInputs=function(){return this._band.inputs||{}},inherit(d,c),d.prototype.title=function(e){var t=this._band.value||0;return e.formatter?e.formatter.format(parseFloat(t)):parseFloat(t).toString()},inherit(p,c),e.exports.AlertBandAbstract=c,e.exports.AlertBandValue=d,e.exports.alertBandFactory=l}).call(this,i("yLpj"))},Ecpn:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r={LinearRegression:!0,PivotPointsHighLow:!0,VbPSessions:!0,VbPVisible:!0,VbPFixed:!0,ZigZag:!0,PivotPointsStandard:!0};function n(e){return e in r}},EqoR:function(e,t,i){"use strict";var r=i("5rJj"),n=i("aDyP").LineToolPitchfork,o=window.t("Inside Pitchfork");function s(e,t){var i=t||s.createProperties();n.call(this,e,i),this._constructor="LineToolInsidePitchfork"}inherit(s,n),s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Inside Pitchfork"},s.createProperties=function(e){var t=new r("linetoolinsidepitchfork",e,!1,{range:[0,8]});return s._configureProperties(t),t},s._configureProperties=function(e){n._configureProperties(e)},t.LineToolInsidePitchfork=s},EsvI:function(e,t,i){"use strict";i.r(t);i("bSeV");var r=i("eJTA"),n=i("wZIs"),o=i("Vdly"),s=i("BHQF"),a=i("txPx"),l=Object(a.getLogger)("Themes.Provider"),c=null;function u(e){return Object(s.fetch)("/theme/?themeName="+encodeURIComponent(e),{credentials:"include",method:"GET"}).then((function(e){return e.json()})).then((function(e){var t={};return e.content&&(t.content=JSON.parse(e.content)),t}))}var h=i("zM7N"),d=i("oiZD"),p=i("R5LG"),f=i("wfKj");function _(e){return!e.isPrivate}function m(){return f.a[d.watchedTheme.value()]||f.a[p.a]}function v(e){return m().getThemedColor(e)}function g(e,t,i,r,o,s,a){void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===a&&(a=!1);var l=t?Promise.resolve(x(e)):w(e);return l.then((function(l){if(void 0!==l.content){var c=!t;a&&(void 0!==(u=l.content).chartProperties&&Object(n.applyDefaultsOverrides)(u.chartProperties),void 0!==u.mainSourceProperties&&Object(n.applyDefaultsOverrides)(u.mainSourceProperties,void 0,!0,"mainSeriesProperties")),r.applyTheme(l.content,c,i,e,t,o,s)}var u})),l}i.d(t,"isPublicTheme",(function(){return _})),i.d(t,"getCurrentTheme",(function(){return m})),i.d(t,"getThemedColor",(function(){return v})),i.d(t,"loadTheme",(function(){
return g})),i.d(t,"restoreTheme",(function(){return y})),i.d(t,"savedThemeName",(function(){return b})),i.d(t,"syncTheme",(function(){return S})),i.d(t,"getTheme",(function(){return w})),i.d(t,"getThemeNames",(function(){return P})),i.d(t,"getStdThemeNames",(function(){return C})),i.d(t,"isStdThemeName",(function(){return T})),i.d(t,"getStdTheme",(function(){return x})),i.d(t,"getStdThemedValue",(function(){return I})),i.d(t,"isStdThemedDefaultValue",(function(){return E})),i.d(t,"saveTheme",(function(){return L})),i.d(t,"removeTheme",(function(){return O})),i.d(t,"isThemeExist",(function(){return A})),i.d(t,"translateStdThemeName",(function(){return M})),i.d(t,"isStdTheme",(function(){return k})),i.d(t,"extractThemeFromModel",(function(){return D})),i.d(t,"DEFAULT_THEME",(function(){return p.a})),i.d(t,"themes",(function(){return f.a}));function y(){Object(d.setTheme)(Object(o.getValue)("current_theme.name")||p.a)}function b(){return Object(o.getValue)("current_theme.name")||null}function S(){Object(o.setValue)("current_theme.name",m().name,{forceFlush:!0})}function w(e){return u(e)}function P(){return c||Object(s.fetch)("/themes/",{credentials:"include",method:"GET"}).then((function(e){return c=e.json()}))}function C(){return h.getStdThemeNames()}function T(e){return C().includes(e)}function x(e){return h.getStdChartTheme(e)||{content:void 0}}function I(e,t){var i=t||m().name,r=h.getStdChartTheme(i),n=0!==e.length&&e.split(".");return r&&r.content&&n?n.reduce((function(e,t){return e[t]}),r.content):null}function E(e,t,i){var n=I(e,i);return null!==n&&Object(r.areEqualRgba)(Object(r.parseRgba)(n),Object(r.parseRgba)(String(t)))}function L(e,t){return function(e,t){var i=new FormData;return i.append("content",JSON.stringify(t)),i.append("name",e),c=null,Object(s.fetch)("/save-theme/",{credentials:"include",method:"POST",body:i}).then((function(e){return e.json()}),(function(e){return l.logError(e)}))}(e,t)}function O(e){return function(e){var t=new FormData;return t.append("name",e),c=null,Object(s.fetch)("/remove-theme/",{credentials:"include",method:"POST",body:t}).then((function(e){return e.json()}),(function(e){return l.logError(e)}))}(e)}function A(e){return function(e){return u(e).then((function(e){return Boolean(e.content)}))}(e)}function M(e){return h.translateThemeName(e)}function k(e){return h.isStdTheme(e)}function D(e){return{content:{chartProperties:{paneProperties:e.model().properties().paneProperties.state(),scalesProperties:e.model().properties().scalesProperties.state()},sessions:e.model().sessions().properties().state(),mainSourceProperties:e.model().mainSeries().properties().state()}}}},EyEd:function(e,t,i){"use strict";var r=i("lCO3").Version,n=i("txPx").getLogger("Chart.StudyMigration");function o(e){this._studyId=e,this._maxToVers=r.ZERO,this._maxFromVers=r.ZERO,this._migrs=[]}o.prototype.addMigration=function(e,t,i){var n=r.parse(e),o=r.parse(t);n.isGreater(this._maxFromVers)&&(this._maxFromVers=n),o.isGreater(this._maxToVers)&&(this._maxToVers=o),this._migrs.push({fromVers:n,toVers:o,rules:i})
},o.prototype.updateInputs=function(e,t,i){if(!i)return i;for(var r=TradingView.clone(i),o=e;o.isLess(t);){var s=this._findMigration(o);if(null==s)break;if(n.logNormal("Migrating study inputs from "+s.fromVers+" to "+s.toVers+" version, studyId: "+this._studyId+", migration: "+JSON.stringify(s)+", inputs: "+JSON.stringify(i)),r=this._applyMigration(r,s),!o.isLess(s.toVers))throw new Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");o=s.toVers}return o>e&&n.logNormal("Study inputs migration is done, studyId: "+this._studyId+", inputs: "+JSON.stringify(r)),r},o.prototype._findMigration=function(e){for(var t=-1,i=this._maxFromVers,r=0;r<this._migrs.length;r++){var n=this._migrs[r];n.fromVers.isLess(e)||n.fromVers.isLessOrEqual(i)&&(i=n.fromVers,t=r)}return t<0?null:this._migrs[t]},o.prototype._applyMigration=function(e,t){for(var i=e,r=0;r<t.rules.length;r++){var n=t.rules[r];i=this._getApplyRuleFun(n.type)(i,n)}return i},o.prototype._getApplyRuleFun=function(e){if("inputRemoved"===e)return o._applyInputRemovedRule;if("inputChangedType"===e)return o._applyInputChangedTypeRule;if("inputChangedMinMax"===e)return o._applyInputChangedMinMaxRule;if("inputChangedOptions"===e)return o._applyInputChangedOptionsRule;throw new Error("Unknown migration rule type: "+e)},o._applyInputRemovedRule=function(e,t){if(!(t.inputId in e))return e;if("removeVal"!==t.action)throw new Error("Unexpected rule.action="+t.action+" in rule.type="+t.type);var i=e[t.inputId];return delete e[t.inputId],n.logNormal("Input "+t.inputId+"="+i+" removed"),e},o._applyInputChangedTypeRule=function(e,t){var i=e[t.inputId];if("resetToDefVal"===t.action)return e[t.inputId]=t.defVal,n.logNormal("Input "+t.inputId+"="+i+" reset to default value "+t.defVal),e;if("convertVal"===t.action){if(null==i)return e;if("float"===t.inputTypeFrom&&"integer"===t.inputType)return e[t.inputId]=Math.round(e[t.inputId]),n.logNormal("Input "+t.inputId+"="+i+" converted to value "+e[t.inputId]),e;if("integer"===t.inputTypeFrom&&"float"===t.inputType)return e;if("text"===t.inputTypeFrom&&"source"===t.inputType)return o._isValidSource(i,t.options)||(e[t.inputId]=t.defVal),e;throw new Error("Cannot convertVal from "+t.inputTypeFrom+" to "+t.inputType)}throw new Error("Unknown action "+t.action+" for rule with type "+t.type)},o._isValidSource=function(e,t){return e.indexOf("$")>=0||t.indexOf(e)>=0},o._applyInputChangedMinMaxRule=function(e,t){if("adjustValIfNeeded"!==t.action)throw new Error("Unknown action "+t.action+" for rule with type "+t.type);var i=e[t.inputId];return i<t.minVal?e[t.inputId]=t.minVal:i>t.maxVal&&(e[t.inputId]=t.maxVal),n.logNormal("Input "+t.inputId+"="+i+" adjusted to value "+e[t.inputId]),e},o._applyInputChangedOptionsRule=function(e,t){if(!(["text"].indexOf(t.inputType)>=0&&"resetToDefValIfNeeded"===t.action))throw new Error("Unexpected rule.inputType="+t.inputType+" in rule.action="+t.action);var i=e[t.inputId];return t.options.indexOf(i)<0&&(e[t.inputId]=t.defVal,
n.logNormal("Input "+t.inputId+"="+i+" reset to default value "+t.defVal)),e},e.exports=o},Eyy1:function(e,t,i){"use strict";function r(e){if(void 0===e)throw new Error("Value is undefined");return e}function n(e){if(null===e)throw new Error("Value is null");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("Assertion failed"+(t?": "+t:""))},t.ensureDefined=r,t.ensureNotNull=n,t.ensure=function(e){return n(r(e))},t.ensureNever=function(e){}},FA0h:function(e,t,i){"use strict";function r(){return Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(12),i.e(14),i.e(15),i.e(18),i.e(20),i.e(21),i.e(22),i.e(29),i.e(51),i.e(52),i.e(61),i.e(62),i.e(72),i.e(81),i.e(0),i.e(9),i.e(10),i.e(13),i.e(28),i.e(33),i.e(32),i.e(38),i.e(43),i.e(47),i.e(56),i.e(65),i.e(79),i.e(86),i.e("symbol-search-dialog")]).then(i.bind(null,"p04v"))}i.d(t,"a",(function(){return r}))},FBsw:function(e,t,i){"use strict";i.r(t),i.d(t,"OverlayPriceAxisView",(function(){return s}));var r=i("mrSG"),n=i("KcY8"),o=i("oXaB"),s=function(e){function t(t){var i=e.call(this)||this;return i._source=t,i}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1;var r=this._source.lastValueData("close",!1);if(!r.noData){var n=this._source.model(),s=this._source.priceScale();if(null!==s&&n.isPriceScaleVisible(s)){i.background=r.color,i.color=this.generateTextColor(r.color),i.coordinate=r.coordinate,i.floatCoordinate=r.floatCoordinate;var a=this._source.model().properties().scalesProperties;a.showSeriesLastValue.value()&&(e.text=this._text(r),e.visible=!0),t.text="",(a.showSymbolLabels.value()||a.seriesLastValueMode.value()===o.PriceAxisLastValueMode.LastPriceAndPercentageValue)&&(t.text=this._paneText(r),t.visible=t.text.length>0)}}},t.prototype._paneText=function(e){var t="",i=this._source.model().properties().scalesProperties;i.showSymbolLabels.value()&&(t+=this._source.symbol()+" ");var r=this._source.priceScale();return null!==r&&i.showSeriesLastValue.value()&&i.seriesLastValueMode.value()===o.PriceAxisLastValueMode.LastPriceAndPercentageValue&&(t+=r.isPercentage()?e.formattedPriceAbsolute:e.formattedPricePercentage),t.trim()},t.prototype._text=function(e){var t=this._source.model().properties().scalesProperties,i=this._source.priceScale();return t.seriesLastValueMode.value()!==o.PriceAxisLastValueMode.LastPriceAndPercentageValue||null===i?e.text:i.isPercentage()?e.formattedPricePercentage:e.formattedPriceAbsolute},t}(n.a)},FBuY:function(e,t,i){"use strict";i.r(t),i.d(t,"TVXWindowEvents",(function(){return r}));i("HbRj");var r,n=i("txPx"),o=i("VVxS"),s=Object(n.getLogger)("XWindowEvents");!function(e){var t,i="tvxwevents.",r={};window.BroadcastChannel?((t=new BroadcastChannel("tvxwevents")).addEventListener("message",(function(e){var t=e.data,i=t.event,n=t.value;r[i]&&r[i].forEach((function(e){e(n)}))})),function(){for(var e=[],t=performance.now(),r=0;r<o.TVLocalStorage.length;r++){(c=o.TVLocalStorage.key(r)).startsWith(i)&&e.push(c)}
for(var n=o.TVLocalStorage.length,a=0,l=e;a<l.length;a++){var c=l[a];o.TVLocalStorage.removeItem(c)}var u=performance.now()-t;s.logNormal("Total keys amount in local storage on operation start: "+n),s.logNormal("Keys amount in local storage to be deleted: "+e.length),s.logNormal("Keys to be deleted from local storage: "+JSON.stringify(e)),s.logNormal("Removing keys from local storage took "+u+" ms")}()):window.addEventListener("storage",(function(e){var t=e.newValue,n=e.key;if(null===t||!n||!n.startsWith(i))return;var s=n.substr(i.length);r[s]&&r[s].forEach((function(t){t(e.newValue)}));o.TVLocalStorage.removeItem(n)})),e.on=function(e,t){r[e]||(r[e]=[]),r[e].push(t)},e.off=function(e,t){if(r[e]){var i=r[e].indexOf(t);-1!==i&&(1===r[e].length?delete r[e]:r[e].splice(i,1))}},e.emit=function(e,r){void 0===r&&(r=Date.now());try{t?t.postMessage({event:e,value:r}):o.TVLocalStorage.setItem(i+e,r.toString())}catch(n){s.logError(n.message)}}}(r||(r={}))},FIi8:function(e,t,i){"use strict";function r(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return e&&"object"==typeof e?(0===t.length||t.forEach((function(t){null!=t&&"object"==typeof t&&Object.keys(t).forEach((function(i){var o=e[i],s=t[i];if(!(s===e)){var a=Array.isArray(s);if(s&&(n(s)||a)){var l=void 0;l=a?o&&Array.isArray(o)?o:[]:o&&n(o)?o:{},e[i]=r(l,s)}else void 0!==s&&(e[i]=s)}}))})),e):e}function n(e){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(!t)return!0;var i=Object.hasOwnProperty.toString,r=t.hasOwnProperty("constructor")&&t.constructor;return"function"==typeof r&&i.call(r)===i.call(Object)}i.r(t),i.d(t,"deepExtend",(function(){return r}))},FKaq:function(e,t,i){"use strict";i.r(t),i.d(t,"SetPriceScaleSelectionStrategyCommand",(function(){return l}));var r=i("mrSG"),n=i("Eyy1"),o=i("RDU5"),s=i("MWAT"),a=function(){function e(e){this._leftScales=e.leftPriceScales().map((function(e){return e.id()})),this._rightScales=e.rightPriceScales().map((function(e){return e.id()}))}return e.prototype.restorePane=function(e){this._leftScales.reverse().map((function(t){return Object(n.ensureNotNull)(e.getPriceScaleById(t))})).forEach((function(t){return e.movePriceScale(t,"left")})),this._rightScales.reverse().map((function(t){return Object(n.ensureNotNull)(e.getPriceScaleById(t))})).forEach((function(t){return e.movePriceScale(t,"right")}))},e}(),l=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n._chartModel=t,n._targetStrategy=Object(s.createPriceScaleSelectionStrategy)(i),n._initialState=t.panes().map((function(e){return new a(e)})),n}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this;this._chartModel.panes().forEach((function(t){return t.setPriceScaleSelectionStrategy(e._targetStrategy)})),this._chartModel.fullUpdate()},t.prototype.undo=function(){for(var e=this._chartModel.panes(),t=0;t<e.length;t++)this._initialState[t].restorePane(e[t]);this._chartModel.fullUpdate()},t}(o.UndoCommand)},FKlR:function(e,t,i){"use strict";i.r(t),
i.d(t,"determineBaseUrl",(function(){return r}));i("bSeV");function r(e,t){var i=t||window.locale||"en",r=e[i]?e[i]:e.en;return(r="tradingview.com"===r?"www.tradingview.com":r)?document.location.protocol+"//"+r:""}},FQhm:function(e,t,i){"use strict";i.r(t),i.d(t,"unsubscribe",(function(){return l})),i.d(t,"on",(function(){return c})),i.d(t,"subscribe",(function(){return u})),i.d(t,"subscribeToAll",(function(){return h})),i.d(t,"emit",(function(){return d})),i.d(t,"emitOnce",(function(){return p}));var r=i("aIyQ"),n=i.n(r),o={},s=[],a={};function l(e,t,i){o[e].unsubscribe(i,t)}function c(e,t,i){u(e,t,i)}function u(e,t,i,r){o.hasOwnProperty(e)||(o[e]=new n.a),a[e]?t.call(i):o[e].subscribe(i,t,r)}function h(e){s.push(e)}function d(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var r=[e].concat(t);s.forEach((function(e){e.apply(null,r)})),o.hasOwnProperty(e)&&o[e].fire.apply(o[e],t)}function p(e){a[e]&&console.warn("Something went wrong: emitOnce called multiple times with same event ("+e+")"),a[e]=!0,d.apply(null,arguments)}},FZIs:function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e.Light="light",e.Dark="dark"}(r||(r={}))},FaJS:function(e,t,i){"use strict";i.r(t),i.d(t,"scaleRatio",(function(){return n})),i.d(t,"priceRangeByScaleRatio",(function(){return o})),i.d(t,"barSpacingByScaleRatio",(function(){return s}));var r=i("Qb4w");function n(e,t){if(t.isLog()||e.isEmpty()||t.isEmpty())return null;var i=function(e){if(e.isEmpty())return null;var t=e.priceRange();if(null===t)return null;var i=t.length();return e.internalHeight()/i}(t);return null===i?null:e.getValidBarSpacing()/Math.max(1e-10,i)}function o(e,t,i){if(e.isLog()||null===i||e.isEmpty())return null;var n=e.priceRange();if(null===n||n.isEmpty())return null;var o=e.internalHeight()/(t/i),s=n.length();if(o===s)return n;var a=(o-s)/2;return new r.PriceRange(n.minValue()-a,n.maxValue()+a)}function s(e,t){if(e.isLog()||null===t||e.isEmpty())return null;var i=e.priceRange();if(null===i)return null;var r=i.length();return e.internalHeight()/r*t}},Fdrt:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererStandardPivotLabel",(function(){return n}));var r=i("VdBB"),n=function(){function e(e,t,i){this._drawRects=[],this._cacheProvider=e,this._point=t,this._label=i}return e.prototype.draw=function(e,t){var i=this,r=this._cacheProvider(t);e.save(),e.setTransform(1,0,0,1,0,0);var n=t.pixelRatio;this._drawRects=[];for(var o=function(t){var o=r.labelRectByIndex(t),s={left:Math.round(i._point.x-o.width+a),top:Math.round(i._point.y-o.height/2),width:o.width,height:o.height};return e.drawImage(r.canvas(),Math.round(o.left*n),Math.round(o.top*n),o.width*n,o.height*n,Math.round(s.left*n),Math.round(s.top*n),s.width*n,s.height*n),i._drawRects.push(s),o.width},s=this._label.split("/"),a=0,l=0;l<s.length;l++){var c=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(s[l]);l>0&&(a+=o(c+11)/2),a+=o(c)/2}e.restore()},e.prototype.hitTest=function(e){for(var t=0,i=this._drawRects;t<i.length;t++){var n=i[t]
;if(e.x>=n.left&&e.x<=n.left+n.width&&e.y>=n.top&&e.y<=n.top+n.height)return new r.HitTestResult(r.HitTestResult.REGULAR)}return null},e}()},FfBj:function(e,t,i){"use strict";i.r(t),i.d(t,"TRIAL_SUFFIX",(function(){return s})),i.d(t,"EA_SUFFIX",(function(){return a})),i.d(t,"UNSUBSCRIBE_SUFFIX",(function(){return l})),i.d(t,"UPSELL_SUFFIX",(function(){return c})),i.d(t,"CUSTOM_SUFFIX",(function(){return u})),i.d(t,"billingCycleToTimeUnit",(function(){return h})),i.d(t,"getReadableCycle",(function(){return d})),i.d(t,"isEarlyAccess",(function(){return p})),i.d(t,"isTrialProduct",(function(){return f})),i.d(t,"getProductForTrial",(function(){return _})),i.d(t,"getDiscountFromEarlyAccess",(function(){return m})),i.d(t,"humanizeProPlan",(function(){return v})),i.d(t,"humanizeCardPlan",(function(){return g})),i.d(t,"getAmountOfDaysForBillingCycle",(function(){return y})),i.d(t,"countDiscountByBillingCycle",(function(){return b})),i.d(t,"billingCycleToMonth",(function(){return S})),i.d(t,"round2",(function(){return w})),i.d(t,"round0",(function(){return P})),i.d(t,"floor0",(function(){return C})),i.d(t,"round2or0",(function(){return T})),i.d(t,"roundMinimal",(function(){return x})),i.d(t,"getPlanName",(function(){return I}));i("HbRj");var r=i("YFKU"),n=i("KuNA"),o=i("T7XC"),s="_trial",a="_discount",l="_unsubscribe",c="_year_6_months_free",u="_custom";function h(e){return{y:r.t("year",{plural:"years",count:1}),m:r.t("month",{plural:"months",count:1}),"3m":r.t("three months"),"2y":r.t("two years")}[e]}function d(e){return{m:r.t("monthly"),y:r.t("annual"),"3m":r.t("3 months"),"2y":r.t("2-year")}[e]||""}function p(e){return/\d{0,2}_discount$/.test(e)}function f(e){return new RegExp(s+"$").test(e)}function _(e){return e.split(s)[0]}function m(e){var t=e.match(new RegExp("^(d{0,2})"+a+"$"));return t?+t[1]||50:0}function v(e,t){var i=e;switch(e){case n.ProPlans.Pro:i="Pro";break;case n.ProPlans.ProRealtime:i="Pro+";break;case n.ProPlans.ProPremium:i="Premium";break;case n.ProPlans.ProMiniAds:case n.ProPlans.ProMiniLayouts:case n.ProPlans.ProMiniAlerts:i=r.t("1-feature");break;case n.ProPlans.ProEdu:i=r.t("Rookie")}return t&&(i+=" "+r.t("trial")),i}function g(e){var t=e;switch(e){case n.ProPlans.Pro:t="Pro";break;case n.ProPlans.ProRealtime:t="Pro+";break;case n.ProPlans.ProPremium:t="Premium";break;case n.ProPlans.Free:t="Basic"}return t}function y(e){switch(e){case o.BillingCycle.TwoYears:return 730;case o.BillingCycle.OneYear:return 365;case o.BillingCycle.ThreeMonths:return 90;case o.BillingCycle.Monthly:return 30;default:return 1}}function b(e,t,i){return Math.round((t-e)*S(i))}function S(e){switch(e){case o.BillingCycle.TwoYears:return 24;case o.BillingCycle.OneYear:return 12;default:return 1}}function w(e){return(Math.round(100*e)/100).toFixed(2)}function P(e){var t=Math.round(100*e)/100;return Math.round(t).toFixed(0)}function C(e){return Math.floor(e).toString()}function T(e){var t=Math.round(100*e)/100,i=Math.round(t);return Math.abs(t-i)>0?t.toFixed(2):i.toFixed(0)}function x(e){
var t=Math.round(100*e)/100,i=Math.round(10*e)/10,r=Math.round(t);return Math.abs(t-r)>0?Math.abs(t-i)>0?t.toFixed(2):i.toFixed(1):r.toFixed(0)}function I(e){var t=r.t("{proPlanName} Trial");if(f(e)){var i=v(_(e));return t.format({proPlanName:i})}return v(e)}},Fixu:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return u}));var r=i("0UyP"),n=i("Eyy1"),o=i("dfhE");function s(e,t){Object(r.getTracker)().then((function(i){if(null!==i){var r=Object(n.ensureNotNull)(e.model().mainSeries().symbolInfo()),o=r.pro_name||r.name;i.trackDrawingsAnalytics(o,e.name(),t)}}))}function a(e){s(e,"create")}function l(e){s(e,"paste")}function c(e){s(e,"clone")}function u(e){Object(r.getTracker)().then((function(t){if(null!==t){var i=o.STYLE_SHORT_NAMES[e];t.trackChartStyle(i)}}))}},FsE7:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Fib Time Zone");function a(e,t){this._constructor="LineToolFibTimeZone";var n=t||a.createProperties();r.call(this,e,n),this.version=a.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("wgWl").FibTimeZonePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);for(var s=[],l=1;l<=a.LevelsCount;l++)s.push(this._properties.child("level"+l).child("linewidth"));this._widthsProperty=new o(s)}inherit(a,r),a.version=2,a.LevelsCount=11,a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.migrateVersion=function(e,t,i){if(1===e){i.properties.level1.color.setValue(i.properties.baselinecolor.value());for(var r=2;r<=11;r++)i.properties["level"+r].color.setValue(i.properties.linecolor.value());for(r=1;r<=11;r++)i.properties["level"+r].linewidth.setValue(i.properties.linewidth.value()),i.properties["level"+r].linestyle.setValue(i.properties.linestyle.value())}},a.prototype.pointsCount=function(){return 2},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Fib Time Zone"},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("SMr9").FibTimezoneDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a.createProperties=function(e){var t=new n("linetoolfibtimezone",e,!1,{range:[1,11]});return a._configureProperties(t),t},a._configureProperties=function(e){r._configureProperties(e)},t.LineToolFibTimeZone=a},Fty4:function(e,t,i){"use strict";i.r(t),i.d(t,"ActionCreators",(function(){return u}));i("bSeV"),i("YFKU");var r=i("7KDR"),n=i("JUY+"),o=i("bIzq"),s=i("+HSM"),a=i("MXV9"),l=i("K8V9"),c=i("PgQx"),u={stopAlert:function(e){return new r.Action({label:window.t("Stop",{context:"alert"}),icon:s,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(t){return t.stopAlert(e)}))}})},
restartAlert:function(e,t){return new r.Action({label:window.t("Restart"),icon:o,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(i){return i.restartAlert(e,{actionSource:t})}))}})},editAlert:function(e,t){return new r.Action({label:window.t("Edit..."),icon:a,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(i){return i.openEditDialog(e,{actionSource:t})}))}})},cloneAlert:function(e,t,i){return new r.Action({label:window.t("Clone"),icon:l,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(r){return r.cloneAlert(e,{actionSource:t,eventLabel:i})}))}})},deleteAlert:function(e){return new r.Action({label:window.t("Remove"),icon:c,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(t){return t.deleteAlert(e,{showConfirm:!0})}))}})},restartAllAlerts:function(e,t){var i=e||t?window.t("Restart as per filter"):window.t("Restart all inactive");return new r.Action({label:i,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(i){return i.restartAllAlerts({showConfirm:!0,symbol:e,resolution:t,active:!1})}))}})},stopAllAlerts:function(e,t){var i=e||t?window.t("Stop as per filter"):window.t("Stop all");return new r.Action({label:i,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(i){return i.stopAllAlerts({showConfirm:!0,symbol:e,resolution:t})}))}})},deleteAllInactiveAlerts:function(){return new r.Action({label:window.t("Remove all inactive"),onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(e){return e.deleteAllAlerts({active:!1,showConfirm:!0,symbol:null,resolution:null})}))}})},deleteAllAlerts:function(e,t,i){var o=e||t||i?window.t("Remove as per filter"):window.t("Remove all");return new r.Action({label:o,onExecute:function(){return Object(n.getPriceAlertsDispatcher)().then((function(r){return r.deleteAllAlerts({showConfirm:!0,symbol:e,resolution:t,active:!!i||null})}))}})},deleteAllEvents:function(){return new r.Action({label:window.t("Clear Log"),onExecute:function(e){return Object(n.getPriceAlertsDispatcher)().then((function(e){return e.deleteEvents()}))}})}}},FwoV:function(e){e.exports=JSON.parse('{"cme":{"INDICATORS_ON_CHART":{"limit":99999}},"bovespa":{"INDICATORS_ON_CHART":{"limit":99999}}}')},G2LI:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},G3Rl:function(e,t,i){"use strict";function r(e,t){var i=new Map;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=""+(t?t.apply(null,r):r[0]);if(!i.has(o)){var s=e.apply(this,r);return i.set(o,s),s}return i.get(o)}}i.r(t),i.d(t,"memoize",(function(){return r}))},GEp6:function(e,t,i){"use strict";function r(e,t,i){var r=t.subtract(e),n=i.subtract(e).dotProduct(r)/r.dotProduct(r);return{coeff:n,distance:e.addScaled(r,n).subtract(i).length()}}
Object.defineProperty(t,"__esModule",{value:!0}),t.distanceToLine=r,t.distanceToSegment=function(e,t,i){var n=r(e,t,i);if(0<=n.coeff&&n.coeff<=1)return n;var o=e.subtract(i).length(),s=t.subtract(i).length();return o<s?{coeff:0,distance:o}:{coeff:1,distance:s}}},GH0z:function(e,t,i){"use strict";i.r(t),i.d(t,"PercentageFormatter",(function(){return s}));var r=i("mrSG"),n=i("kcTO"),o=i("Ialn"),s=function(e){function t(t){void 0===t&&(t=100);var i=e.call(this,t)||this;return i.type="percentage",i}return Object(r.__extends)(t,e),t.prototype.state=function(){var e=n.PriceFormatter.prototype.state.call(this);return e.percent=!0,e},t.prototype.parse=function(t){return t=t.replace("%",""),e.prototype.parse.call(this,t)},t.prototype.format=function(t,i,r,n,s){void 0===s&&(s=!0);var a=e.prototype.format.call(this,t,i,r,n,!1)+"%";return s?Object(o.forceLTRStr)(a):a},t.serialize=function(e){return e.state()},t.deserialize=function(e){return new t(e.priceScale)},t}(n.PriceFormatter)},GK7n:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Branding=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i("aO4+"),s=i("f6yo"),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i("Kxc7")),l=i("VdBB"),c=i("9uLv"),u=i("Tmoa"),h=i("//lZ"),d=i("jFln"),p=i("ikwP"),f=i("eJTA"),_=i("vhe3"),m=i("eYFQ");function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=i("JOqt").debounce,y=i("/b+7"),b=i("zDbI").CHART_FONT_FAMILY,S=("Ch{0}ar{1}t{2}by{3}{4}".format("",""," "," ","TradingView"),"po{0}wer{1}ed{2}by{3}{4}".format("",""," "," ","TradingView"),"by{3}{4}".format("",""," "," ","TradingView"),navigator.userAgent.toLowerCase().indexOf("firefox")>-1),w=S&&navigator.userAgent.toLowerCase().indexOf("windows")>-1,P=navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("edge"),C=window.urlParams||{},T=window.initData||{};function x(e,t,i){var r=(0,p.createDisconnectedBoundCanvas)(document,new p.Size(t,i));return(0,p.getPrescaledContext2D)(r.canvas).drawImage(e,0,0,t,i),r}(C.referral_id||C.no_referral_id)&&(0,_.enable)(C.referral_id||"","aggressive");var I=function(){function e(t){var i=t.layout,r=void 0===i?"site_branding":i,n=t.symbol,o=void 0===n?"":n,s=t.model,l=t.onReadyCallback;v(this,e),this._model=s,this._image=null,
this._imageReady=!1,this._needDisplayImage=!1,this._imageWidth=22,this._imageHeight=13,this._layout=r,this._symbol=o,this.showAnimatedBranding=a.enabled("show_animated_logo")||"widget_branding"===this._layout,this.show=!0,this.width=100,this.height=14,this._bottomShift=0,this._brandCircleSize=32,this._animatedWidth=this._brandCircleSize,this._animatedOpacity=0,this.width=this.showAnimatedBranding?this._brandCircleSize:100,this.height=14,this._fillColor=c.color.brandNew,this._colorOldBlue=c.color.brandNew2,this._colorOldGray=c.color.black30,this._strokeColor=c.color.black255,this._brandCircleShadowColor=c.color.black0,this._strokeWidth=4,this._fontSize=this.showAnimatedBranding?11:14,this._font="px "+b,this._txt="TradingView",this._onReadyCallback=l,this._upscaleRatio=P?1:2,this._verticalTextShift=S?this.showAnimatedBranding?2:4:0,this._strokeCanv=null,this._fillCanv=null,this._init()}return n(e,[{key:"_init",value:function(){this._checkLayout(),this.show&&(this._updateStrokeColor(),this.showAnimatedBranding&&(this._loadImage(y,"tvLogo"),this._createFillText()),this._model.properties().paneProperties.background.subscribe(this,this._updateStrokeColor),this._model.onChartThemeLoaded().subscribe(this,this._updateStrokeColor))}},{key:"_updateStrokeColor",value:function(){var e=(0,u.getLuminance)(this._model.properties().paneProperties.background.value());this._strokeCanv=null,this._fillCanv=null,e>.2?(this._brandCircleColor=c.color.black255,this._animatedColorBg=c.color.black255,this._brandCircleShadowOpacity=.09,this._strokeOpacity=.8):(this._brandCircleColor=c.color.black27,this._animatedColorBg=c.color.black27,this._brandCircleShadowOpacity=.09,this._strokeOpacity=.1)}},{key:"_loadImage",value:function(e,t){var i=this;if(this._needDisplayImage){this._image={canvas:new Image},this.showAnimatedBranding&&(this._imageWhite={canvas:new Image});var r=e.replace(/fill="#[\da-f]{6}"/i,'fill="#FFFFFF"');this._image.canvas.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e),this.showAnimatedBranding&&(this._imageWhite.canvas.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)),this._image.canvas.addEventListener("load",(function(){w&&(i._image=x(i._image.canvas,i._imageWidth,i._imageHeight)),i._imageReady=!0,"function"==typeof i._onReadyCallback&&i._onReadyCallback()}))}}},{key:"_checkLayout",value:function(){switch(this._layout){case"widget_branding":case"widget_referral_branding":case"widget_custom_branding":case"fundamental_branding":case"fundamental_custom_branding":case"library_custom_branding":case"library_branding":case"site_branding":this.show=!0;break;case"widget_custom_no_powered_branding":case"fundamental_custom_no_powered_branding":case"library_custom_no_powered_branding":this.show=!1}switch(this._layout){case"widget_branding":this._needDisplayImage=!0,this._txt=window.t("By TradingView");break;case"fundamental_branding":this._txt=window.t("{0} financials by TradingView").format(this._symbol);break;case"widget_referral_branding":this._txt=window.t("More features on tradingview.com");break
;case"widget_custom_branding":case"fundamental_custom_branding":this._txt=window.t("powered by ");break;case"site_branding":this._needDisplayImage=!0}}},{key:"_drawTextStroke",value:function(e){if(!this._strokeCanv){this._strokeCanv=(0,p.createDisconnectedBoundCanvas)(document,new p.Size(0,0));var t=(0,p.getPretransformedContext2D)(this._strokeCanv),i=Math.round(this._strokeWidth*this._upscaleRatio);t.font=this._fontSize*this._upscaleRatio+this._font,this._textWidth=t.measureText(this._txt).width+2;var r=this._textWidth+2*i,n=(this._fontSize+2*i)*this._upscaleRatio;r%2==0&&(r+=1,n+=1),this._strokeCanv.resizeCanvas({width:r,height:n}),(t=(0,p.getPretransformedContext2D)(this._strokeCanv)).textBaseline="top",t.textAlign="start",t.font=this._fontSize*this._upscaleRatio+this._font,t.strokeStyle=this._strokeColor,t.lineWidth=this._strokeWidth*this._upscaleRatio,t.lineJoin="round",t.strokeText(this._txt,i,this._verticalTextShift)}e.save(),e.globalAlpha=this._strokeOpacity,e.drawImage(this._strokeCanv.canvas,0,0,this._strokeCanv.canvas.width,this._strokeCanv.canvas.height,0,0,this._strokeCanv.canvas.width/this._upscaleRatio/this._strokeCanv.pixelRatio,this._strokeCanv.canvas.height/this._upscaleRatio/this._strokeCanv.pixelRatio),e.restore()}},{key:"_drawTextFill",value:function(e){this._createFillText(),e.save(),e.drawImage(this._fillCanv.canvas,0,0,this._fillCanv.canvas.width,this._fillCanv.canvas.height,0,0,this._fillCanv.canvas.width/this._upscaleRatio/this._fillCanv.pixelRatio,this._fillCanv.canvas.height/this._upscaleRatio/this._fillCanv.pixelRatio),e.restore()}},{key:"_createFillText",value:function(){if(null===this._fillCanv){this._fillCanv=(0,p.createDisconnectedBoundCanvas)(document,new p.Size(0,0));var e=(0,p.getPretransformedContext2D)(this._fillCanv),t=Math.round(this._strokeWidth*this._upscaleRatio);e.font=this._fontSize*this._upscaleRatio+this._font,void 0===this._textWidth&&(this._textWidth=Math.round(e.measureText(this._txt).width)+2),this._setSizeFillTextCanvas(t),(e=(0,p.getPretransformedContext2D)(this._fillCanv)).textBaseline="top",e.textAlign="start",e.font=this._fontSize*this._upscaleRatio+this._font,e.fillStyle=this._fillColor,e.fillText(this._txt,t,this._verticalTextShift)}}},{key:"_updateFillTextWithColor",value:function(e){var t=Math.round(this._strokeWidth*this._upscaleRatio);this._setSizeFillTextCanvas(t);var i=(0,p.getPretransformedContext2D)(this._fillCanv);i.clearRect(0,0,this._fillCanv.canvas.width,this._fillCanv.canvas.height),i.textBaseline="top",i.textAlign="start",i.font=this._fontSize*this._upscaleRatio+this._font,i.fillStyle=e,i.fillText(this._txt,t,this._verticalTextShift)}},{key:"_setSizeFillTextCanvas",value:function(e){var t=this._textWidth+2*e,i=(this._fontSize+2*e)*this._upscaleRatio;t%2==0&&(t+=1,i+=1),this._fillCanv.resizeCanvas({width:t,height:i})}},{key:"_drawFillTextCropWidth",value:function(e,t,i){this._fillCanv?this._updateFillTextWithColor(i):this._createFillText(),e.save(),
e.drawImage(this._fillCanv.canvas,0,0,t*this._upscaleRatio*this._fillCanv.pixelRatio,this._fillCanv.canvas.height,0,0,t,this._fillCanv.canvas.height/this._upscaleRatio/this._fillCanv.pixelRatio),e.restore()}},{key:"_drawBgCircle",value:function(e){e.save(),e.beginPath(),e.fillStyle=this._brandCircleShadowColor,e.globalAlpha=this._brandCircleShadowOpacity,e.arc(this._imageWidth/2,this._imageHeight/2,this._brandCircleSize/2+1,0,2*Math.PI),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.fillStyle=this._brandCircleColor,e.arc(this._imageWidth/2,this._imageHeight/2,this._brandCircleSize/2,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore()}},{key:"_drawFillRectWithRoundedCorner",value:function(e,t,i,r,n,o,s){e.save(),(0,d.drawRoundRect)(e,t-1,i-1,r+2,n+2,o),e.globalAlpha=this._brandCircleShadowOpacity,e.fillStyle=this._brandCircleShadowColor,e.fill(),e.closePath(),e.restore(),e.save(),(0,d.drawRoundRect)(e,t,i,r,n,o),e.fillStyle=s,e.fill(),e.closePath(),e.restore()}},{key:"_drawImageWithColor",value:function(e){e.save(),e.globalAlpha=this._animatedOpacity,e.drawImage(this._imageWhite.canvas,0,-.5,this._imageWidth,this._imageHeight),e.restore(),e.save(),e.globalAlpha=1-this._animatedOpacity,e.drawImage(this._image.canvas,0,-.5,this._imageWidth,this._imageHeight),e.restore()}},{key:"bottomShift",value:function(){return this._bottomShift}},{key:"hasAnimation",value:function(){return this.showAnimatedBranding}},{key:"minimizedAnimationWidth",value:function(){return this._brandCircleSize}},{key:"maximizedAnimationWidth",value:function(){return this._createFillText(),this._fillCanv.canvas.width/this._upscaleRatio/this._fillCanv.pixelRatio+this._brandCircleSize-3}},{key:"animatedDrawStep",value:function(e,t){this._animatedWidth=t;var i=this._animatedWidth<this._brandCircleSize+20?0:this._animatedWidth/this.maximizedAnimationWidth(),n=(0,f.parseRgb)(this._brandCircleColor),o=r(n,3),s=o[0],a=o[1],l=o[2],c=(0,f.parseRgb)(this._fillColor),u=r(c,3),h=u[0],d=u[1],p=u[2],_=(0,f.parseRgb)(this._strokeColor),m=r(_,3),v=m[0],g=m[1],y=m[2];this._animatedColorBg=(0,f.rgbaToString)((0,f.blendRgba)([s,a,l,(0,f.normalizeAlphaComponent)(1)],[h,d,p,(0,f.normalizeAlphaComponent)(i)])),this._animatedColorText=(0,f.rgbaToString)((0,f.blendRgba)([h,d,p,(0,f.normalizeAlphaComponent)(1)],[v,g,y,(0,f.normalizeAlphaComponent)(i)])),this._animatedOpacity=i}},{key:"draw",value:function(e,t){if(this.showAnimatedBranding){if(this._needDisplayImage&&this._imageReady){e.save();var i=(this._brandCircleSize-this._imageWidth)/2,r=(this._brandCircleSize-this._imageHeight)/2;e.translate(-i,-r),this._drawFillRectWithRoundedCorner(e,0,0,this._animatedWidth,this._brandCircleSize,this._brandCircleSize/2,this._animatedColorBg),e.translate(i,r),this._drawImageWithColor(e);var n=12+(P?-.5:0),o=this._imageWidth+n;this._animatedWidth>o&&(e.translate(this._imageWidth/2+n,.5),this._drawFillTextCropWidth(e,this._animatedWidth-o,this._animatedColorText)),e.restore(),this.width=this._animatedWidth,this.height=this._brandCircleSize,
this._bottomShift=this._brandCircleSize-this._imageHeight}}else if("widget_custom_branding"===this._layout||"fundamental_custom_branding"===this._layout){var s="12px "+b;e.font=s;var a=e.measureText(this._txt).width+2;this.width=a+e.measureText("TradingView").width+2,e.save(),e.globalAlpha=.7,e.fillStyle=this._colorOldGray,e.fillText(this._txt,0,12),e.fillStyle=this._colorOldBlue,e.fillText("TradingView",a,12),e.restore()}else if(this._needDisplayImage&&this._imageReady){e.save();var l=(this._brandCircleSize-this._imageWidth)/2;e.translate(l,0),this._drawBgCircle(e),e.drawImage(this._image,0,-.5,this._imageWidth,this._imageHeight);var c=12+(P?-.5:0);e.translate(this._imageWidth+c,-.5);this._drawTextStroke(e),this._drawTextFill(e),e.restore(),this.width=this._imageWidth+l,this.width+=c+this._strokeCanv.canvas.width/this._upscaleRatio/this._strokeCanv.pixelRatio,this.height=this._brandCircleSize,this._bottomShift=this._brandCircleSize-this._imageHeight}else{e.save(),e.translate(P?-.5:0,-.5);this._drawTextStroke(e),this._drawTextFill(e),e.restore(),this.width=this._strokeCanv.canvas.width/this._upscaleRatio/this._strokeCanv.pixelRatio}}}]),e}(),E=function(){function e(t){var i=t.layout,r=void 0===i?"site_branding":i,n=t.src,o=t.onReadyCallback;v(this,e),this._img=new Image,this._ready=!1,this.show=!1,this.width=0,this.height=0,this._layout=r,this._src=n,this._onReadyCallback=o,this._init()}return n(e,[{key:"_init",value:function(){var e=this;this._checkLayout(),this.show&&(this._img.src=this._src,this._img.addEventListener("load",(function(){e.width=Math.round(e._img.width),e.height=Math.round(e._img.height),w&&(e._img=x(e._img,e.width,e.height).canvas),e._ready=!0,"function"==typeof e._onReadyCallback&&e._onReadyCallback()})))}},{key:"_checkLayout",value:function(){switch(this._layout){case"widget_custom_branding":case"widget_custom_no_powered_branding":case"fundamental_custom_branding":case"fundamental_custom_no_powered_branding":case"library_custom_branding":case"library_custom_no_powered_branding":this.show=!0;break;case"site_branding":case"widget_branding":case"widget_referral_branding":case"fundamental_branding":case"library_branding":this.show=!1}}},{key:"draw",value:function(e){this._ready&&e.drawImage(this._img,0,0,this.width,this.height)}}]),e}();t.Branding=function(){function e(t,i,r){var n=this;v(this,e),this._model=t,this._mainSeries=this._model.mainSeries(),this._canvasWidth=0,this._showAllowance=i,this._showForPro=r,this._paneHeight=0,this._left=13,this._bottom=16,this._layout="site_branding",this._needToShow=!0,this._customLogoSrc="",this._customLogoLink="",this._checkLayout(),"widget_custom_branding"!==this._layout&&"fundamental_custom_branding"!==this._layout||(this._left=8,this._bottom=5);var o=function(){n._needToShow?n._showBranding=!0:n._showBranding=!1};this._resizeHandlerDelayed=g(o,200),o(),window.addEventListener("resize",this._resizeHandlerDelayed),this._monitorCanvas=(0,p.createDisconnectedBoundCanvas)(document,new p.Size(0,0)),this._monitorCanvas.subscribeCanvasConfigured((function(){
n._init()})),this._model.isSnapshot()?this._init():(this._mainSeries.dataEvents().symbolResolved().subscribe(this,this._init),null!==this._mainSeries.symbolInfo()&&this._init()),this._cubicBezier=new c.CubicBezier(.4,.01,.22,1)}return n(e,[{key:"destroy",value:function(){window.removeEventListener("resize",this._resizeHandlerDelayed)}},{key:"_init",value:function(){var e=this,t=this._mainSeries.symbolInfo()||{};this._powBy=new I({layout:this._layout,symbol:t.name,model:this._model,onReadyCallback:function(){return e._model.fullUpdate()}}),this._custom=new E({layout:this._layout,src:this._customLogoSrc,onReadyCallback:function(){return e._model.fullUpdate()}}),this._openAnimation=null,this._closeAnimation=null}},{key:"_checkLayout",value:function(){if(a.enabled("widget")){var e=T.logo||{},t=a.enabled("fundamental_widget");this._needToShow=!(T.whitelabel||C.whitelabel||e.whitelabel),e.image?(this._customLogoSrc="/static/images/widget-embed-logo/"+e.image,e.no_powered_by?this._layout=t?"fundamental_custom_no_powered_branding":"widget_custom_no_powered_branding":this._layout=t?"fundamental_custom_branding":"widget_custom_branding"):C.referral_id||C.no_referral_id?this._layout="widget_referral_branding":this._layout=t?"fundamental_branding":"widget_branding"}else if(a.enabled("charting_library")||a.enabled("amp_terminal")||a.enabled("cqg_terminal")||a.enabled("trading_terminal")){var i=JSON.parse(C.logo)||{};i.image?(this._customLogoSrc=i.image,this._customLogoLink=i.link,this._needToShow=a.enabled("widget_logo"),a.enabled("link_to_tradingview")?this._layout="library_custom_branding":this._layout="library_custom_no_powered_branding"):(this._layout="library_branding",this._needToShow=a.enabled("widget_logo"))}else this._layout="site_branding"}},{key:"_startOpenAnimation",value:function(){null===this._openAnimation&&(null!==this._closeAnimation&&(this._closeAnimation.stop(),this._closeAnimation=null),this._openAnimation=(0,h.doAnimate)({from:this._currentStateForAnimation(),to:this._openedStateForAnimation(),duration:200,easing:this._cubicBezier.easingFunc,onStep:this._animatedDrawStep.bind(this)}))}},{key:"_openLink",value:function(){return"site_branding"!==this._layout&&(window.open(this.tvUrl(),"_blank").opener=null,!0)}},{key:"_toggleOpenAnimatedOrOpenLink",value:function(){null!==this._openAnimation&&this._openAnimation.completed()?this._openLink()||this._startCloseAnimation():this._startOpenAnimation()}},{key:"_startCloseAnimation",value:function(){null===this._closeAnimation&&(null!==this._openAnimation&&(this._openAnimation.stop(),this._openAnimation=null),this._closeAnimation=(0,h.doAnimate)({from:this._currentStateForAnimation(),to:this._closedStateForAnimation(),duration:200,easing:this._cubicBezier.easingFunc,onStep:this._animatedDrawStep.bind(this)}))}},{key:"onClickOutside",value:function(){this._hasAnimation()&&this._startCloseAnimation()}},{key:"_currentStateForAnimation",value:function(){return this._powBy.width}},{key:"_closedStateForAnimation",value:function(){return this._powBy.minimizedAnimationWidth()}
},{key:"_openedStateForAnimation",value:function(){return this._powBy.maximizedAnimationWidth()}},{key:"_animatedDrawStep",value:function(e,t){this._powBy.animatedDrawStep(e,t),this._model.lightUpdate()}},{key:"_hasAnimation",value:function(){return this._powBy.hasAnimation()}},{key:"updateAllViews",value:function(){}},{key:"priceScale",value:function(){return null}},{key:"priceAxisViews",value:function(){return[]}},{key:"hasContextMenu",value:function(){return!1}},{key:"hitTest",value:function(e){var t=this;return!this._showBranding||a.enabled("logo_without_link")?null:this._powBy&&"widget_custom_no_powered_branding"!==this._layout&&"fundamental_custom_no_powered_branding"!==this._layout&&(0,s.pointInBox)(e,(0,o.box)(new o.Point(this._left,this._paneHeight-Math.max(this._powBy.height,void 0!==this._custom?this._custom.height:0)-this._bottom),new o.Point(this._left+Math.max(this._powBy.width,void 0!==this._custom?this._custom.width:0),this._paneHeight-this._bottom)))?new l.HitTestResult(l.HitTestResult.CUSTOM,{clickHandler:function(){t._openLink()},tapHandler:function(){t._hasAnimation()?t._toggleOpenAnimatedOrOpenLink():t._openLink()},mouseEnterHandler:function(){t._hasAnimation()&&t._startOpenAnimation()},mouseLeaveHandler:function(){t._hasAnimation()&&t._startCloseAnimation()}}):null}},{key:"tvUrl",value:function(){var e="https://www.tradingview.com/",t=this._mainSeries.symbolInfo().pro_name||"";if(a.enabled("referral_program_for_widget_owners")){var i=(0,_.referenceToTradingView)();return-1===i.indexOf("utm_source")?(e+="/"===e[e.length-1]?"?":"&",e+="utm_source="+(C.utm_source||"")+"&utm_medium="+(C.utm_medium||"")+"&utm_campaign="+(C.utm_campaign||"")+"&utm_term="+t):(i=i.slice(0,i.indexOf("utm_source")),i+="utm_source="+(C.utm_source||"")+"&utm_medium="+(C.utm_medium||"")+"&utm_campaign="+(C.utm_campaign||"")+"&utm_term="+t)}var r=this._mainSeries.symbolInfo().name||"APPL",n=this._mainSeries.symbolInfo().listed_exchange||"";return T.customer||r&&(e=e.replace(/\/$/,""),e+=(0,m.getSymbolPagePath)({shortName:r,exchange:n})),e+="/"===e[e.length-1]?"?":"&",e+="utm_source="+(C.utm_source||"")+"&utm_medium="+(C.utm_medium||"")+"&utm_campaign="+(C.utm_campaign||"")+"&utm_term="+t}},{key:"draw",value:function(e,t){var i=this;if(this._showBranding){var r=0;C.utm=!0,(0,p.drawScaled)(e,t.pixelRatio,(function(){e.translate(-.5,-.5),i._powBy&&i._powBy.show&&(r=i._powBy.height-i._powBy.bottomShift(),e.save(),e.translate(i._left,i._paneHeight-i._bottom-r),i._powBy.draw(e,t,i._canvasWidth),e.restore()),i._custom&&i._custom.show&&(e.save(),e.translate(i._left,i._paneHeight-i._bottom-r-i._custom.height),i._custom.draw(e,t),e.restore())}))}}},{key:"renderer",value:function(e,t){return this._paneHeight=e,this._canvasWidth=t,{draw:this.draw.bind(this),hitTest:this.hitTest.bind(this)}}},{key:"paneViews",value:function(e){if(TradingView.printing)return[];if(!this._showAllowance())return[];if("site_branding"===this._layout&&!this._showForPro&&window.user&&window.user.is_pro)return[];var t=a.enabled("move_logo_to_main_pane")
;return t&&e.isMainPane()||!t&&e.isLast()||e.isMaximized()?[{renderer:this.renderer.bind(this)}]:[]}},{key:"labelPaneViews",value:function(e){return[]}}]),e}()},GLdp:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("hY0g"),n=i.n(r),o=function(){return function(e){var t,i=this;this.isVisible=new n.a(!0);for(var r=null,o=function(n){var o=n?n+"Hidden":"hidden";if(o in e)return t=n+"visibilitychange",(r=function(){i.isVisible.setValue(!e[o])})(),e.addEventListener(t,r,!1),"break"},s=0,a=["","moz","ms","webkit"];s<a.length;s++){if("break"===o(a[s]))break}this.destroy=function(){r&&(e.removeEventListener(t,r,!1),r=null)}}}()},GUQs:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return s}));var r=i("qFKp");function n(e){e.cancelable&&e.preventDefault()}function o(e){return function(t){n(t),e()}}function s(e){r.isChrome&&e.addEventListener("mousedown",(function(e){if(1===e.button)return e.preventDefault(),!1}))}},GVHu:function(e,t,i){"use strict";(function(e,r,n){var o=i("Eyy1"),s=o.assert,a=o.ensureNotNull,l=i("hsV8").unpackNonSeriesData,c=i("38az").StudyBarColorer,u=i("bGI9").StudyTrackPricePaneView,h=i("AXy7"),d=h.BandPaneView,p=h.BandBackgroundPaneView,f=h.HlineFillPaneView,_=i("hezA").StudyPriceAxisView,m=i("KtbP").PanePriceAxisView,v=i("I9zs"),g=v.StudyPaneView,y=v.StudyBackgroundPaneView,b=v.StudyPlotShapesPaneView,S=v.StudyPlotCharsPaneView,w=v.StudyPlotArrowsPaneView,P=v.StudyPlotBarsPaneView,C=v.StudyPlotCandlesPaneView,T=i("x40+"),x=T.PlotFillPaneView,I=T.AreaBackgroundPaneView,E=i("it7y").StudyDataWindowView,L=i("8qoI").StudyLegendView,O=i("TG9i").HHistDataWindowView,A=i("Kdr6").HHistLegendView,M=i("2kV1").StudyStatusView,k=i("jenN"),D=k.emptyStudyGraphics,R=k.loadStudyGraphics,V=k.saveStudyGraphics,B=k.LiveStudyGraphics,N=k.createGraphicsPaneViews,F=k.createGraphicsPriceAxisViews,j=i("XzZr").ChartApiInterface,W=i("xlbu").telemetry,H=i("nmnj"),U=i("oOPW").createGoProDialog,z=i("xD5v").formatCallstudyArg,G=i("nXyu"),q=i("EQCO").alertBandFactory,Y=i("OKab").FormattersSerializer,X=i("WqyU"),K=i("+wtf").getStudyDangerReason,J=i("Ocx9").DefaultProperty,Q=i("kcTO").PriceFormatter,Z=i("nEwK").VolumeFormatter,$=i("zXvd").NumericFormatter,ee=i("GH0z").PercentageFormatter,te=i("k9/m"),ie=te.PlotList,re=te.PlotRowSearchMode,ne=te.mergeMinMax,oe=i("972a").MarkLocation,se=i("0YCj"),ae=i("cBZt").extractStudyId,le=i("TcSq").extractPineId,ce=i("FQhm"),ue=i("23IT"),he=ue.LineStudyPlotStyle,de=i("hayr").propertyPages,pe=i("TmNs").StudyPriceLineAxisView,fe=i("w4Ji").studyPlotFunctionMap,_e=i("w4Ji").studyEmptyPlotValuePredicate,me=i("jy4L").makeNextStudyId,ve=i("Kxc7"),ge=i("IcDj").StudyBase,ye=i("sugt"),be=ye.studyGraphicsPriceRange,Se=ye.studyGraphicsFirstValue,we=i("txPx").getLogger("Chart.Study"),Pe=Number(window.TELEMETRY_SERVER_TIME_DIFF_THRESHOLD)||3e3,Ce=ve.enabled("datasource_copypaste"),Te=window.t("loading...");function xe(e,t,i){var r=new J(t,i,!0);r.addExclusion("visible"),r.addExclusion("precision"),r.addExclusion("minTick")
;for(var n=0;n<e.inputs.length;++n){var o=e.inputs[n];o.isHidden&&(r.addExclusion("inputs."+n.toString()),r.addExclusion("inputs."+o.id))}return r}function Ie(e,t){if(t.plots)for(var i=0;i<t.plots.length;i++){var r=t.plots[i],n=r.id;if(!ue.isColorerPlot(r)){var o={visible:!0,color:"#0496FF",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,plottype:he.Line,histogramBase:0,transparency:50,trackPrice:!1,joinPoints:!1};ue.isBarColorerPlot(r)&&(o.transparency=0),o.plottype=r.type,o.title=n,e.styles&&n in e.styles&&TradingView.merge(o,e.styles[n]),e.styles[n]=o}}}function Ee(e,t,i,n){this._titleStrCache={},this._titleInPartsCache={},this._resolvedSymbols={},this._priceAxisViewsBase=[],this._priceLinesAxisViews=[],this._hlinesPriceAsisViews=[],this._horizlinesPriceAsisViews=[],ge.call(this,e,t,i,n),this._chartApi=e._chartApi,this._numericFormatter=new $,this._properties.listeners().subscribe(this,this._onPropertiesChanged),this._properties.visible.listeners().subscribe(this,this.visibleChanged),this._properties.visible.listeners().subscribe(this,this.processHibernate);for(var o=0;o<this._metaInfo.plots.length;o++){var s=this._metaInfo.plots[o].id,a=this.properties().styles[s];null!=a&&null!=a.visible&&a.visible.listeners().subscribe(this,this.processHibernate)}for(var l in this._metaInfo.graphics)for(var c in this._metaInfo.graphics[l]){var u=this._properties.graphics[l][c];u.visible&&u.visible.listeners().subscribe(this,this.processHibernate)}this._showStudyArgumentsProperty=this.model().properties().paneProperties.legendProperties.showStudyArguments,this._turnaroundCounter=0,this._turnaround="st"+this._turnaroundCounter,this._plotFields=[];var h=this.metaInfo().plots;if(h){o=0;for(var d=h.length;o<d;o++){c=h[o].id;this._plotFields.push(c)}}this._invalidateLastNonEmptyPlotRowCache(),this.m_data=new ie(fe(this._metaInfo),_e),this._graphics=new B,this._plotOffsets={},this._plotOffsetsMetaInfoOverride={},this._studyModified=!1,this._tagsChanged=new r,this._labelPaneViews=[],this.createViews();var p=this;this._handler=function(e){p.onData(e)},this._handler.isTVScriptStrategy=this._metaInfo.isTVScriptStrategy,this._recreatePriceFormattingDependencies();p=this;this._properties.precision.listeners().subscribe(this,this._precisionChanged),this._showStudyArgumentsProperty.listeners().subscribe(this,this.invalidateTitleCache),this._properties.description.listeners().subscribe(this,this.invalidateTitleCache),this._properties.inputs.listeners().subscribe(this,this.invalidateTitleCache),this._properties.shortDescription&&this._properties.shortDescription.listeners().subscribe(this,this.invalidateTitleCache),ve.enabled("update_study_formatter_on_symbol_resolve")&&e.mainSeries().dataEvents().symbolResolved().subscribe(this,this._recreatePriceFormattingDependencies),e.mainSeries().dataEvents().symbolResolved().subscribe(this,this.invalidateTitleCache);p=this;var f={};this._simplePlotsCount=n.plots.filter((function(e,t){if(p.isLinePlot(t))return!0;if(p.isOHLCSeriesPlot(t)){var i=p.metaInfo().plots[t].target;return!f[i]&&(f[i]=i,!0)}return!1
})).length,this._properties.showInDataWindow.listeners().subscribe(e,e.fullUpdate),this.hasBarColorer()&&this._properties.visible.listeners().subscribe(e.mainSeries(),e.mainSeries().invalidateBarStylesCache),this._childStudyByRebind=new r,this._formatterChanged=new r,this._priceStepChanged=new r,this.parentSource().formatterChanged().subscribe(this,this._onSourceFormatterChanged),this.parentSource().priceStepChanged().subscribe(this,this._onSourcePriceStepChanged),this._ongoingDataUpdate=Promise.resolve(),this._isDestroyed=!1,this._definitionsViewModel=null}function Le(e,t){return e&&e[t]&&e[t].hasOwnProperty("showLast")?e[t].showLast.value():null}inherit(Ee,ge),TradingView.Study=Ee,Ee.prototype.lastValueData=function(e,t,i){var r={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return r;var n=this._model.timeScale().visibleBarsStrictRange();if(null===n)return r;if(!this.properties().visible.value())return r;var o,s,a=this.properties().styles,l=this.properties().ohlcPlots;if(a&&a[e]&&(o=a[e]),l&&l[e]&&(o=l[e]),!o||!o.visible.value())return r;var c=this.metaInfo().plots;for(s=0;s<c.length&&!(c[s].id===e||this.isOHLCClosePlot(s)&&c[s].target===e);s++);var u=s+1,h=this.offset(e),d=this.nearestIndex(n.lastBar()-h,re.NearestLeft,u);if(null==d)return r;var p=this._lastNonEmptyPlotRow(u),f=null!==p&&n.contains(p.index),_=null!==p?p.value:null,m=t||f?_:this.data().valueAt(d);if(!m||!isNumber(m[u]))return r;for(var v,g={noData:!1},y=null,b=null,S=0;S<c.length;S++)c[S].target===e&&(this.isSelfColorerPlot(S)||this.isOHLCColorerPlot(S))&&(y=S,b=this.metaInfo().palettes[c[S].palette],v=this.properties().palettes[c[S].palette]);var w=m[u];i&&(g.price=w);var P=this.firstValue(!0);if(!isNumber(P))return r;g.text=this.priceScale().formatPrice(w,P),g.formattedPriceAbsolute=this.priceScale().formatPriceAbsolute(w),g.formattedPricePercentage=this.priceScale().formatPricePercentage(w,P);var C=o.color.value();if(y&&m.length>y+1){var T=m[y+1];if(null!=T){var x=b.valToIndex?b.valToIndex[T]:T;g.color=v.colors[x].color.value()}else g.color=C}else g.color=C;return g.floatCoordinate=this.priceScale().priceToCoordinate(w,P),g.coordinate=g.floatCoordinate,g.item=m,g},Ee.prototype.isFailed=function(){return this._failed},Ee.prototype.isLoading=function(){return this._loading},Ee.prototype.series=function(){return this._series},Ee.prototype.model=function(){return this._model},Ee.prototype.currency=function(){var e=this.metaInfo();return Boolean(e)&&e.is_price_study?this.parentSource().currency():null},Ee.prototype._invalidateLastNonEmptyPlotRowCache=function(){this._lastNonEmptyPlotRowCache={}},Ee.prototype.clearData=function(){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.clear(),this._graphics.clear&&this._graphics.clear(),this._plotOffsets={}},Ee.prototype.onTagsChanged=function(){return this._tagsChanged},Ee.prototype.properties=function(){return this._properties},Ee.prototype.state=function(e,t){var i,r={type:TradingView.className(this.constructor),
id:this.id(),state:this.properties().state(),zorder:this.zorder()};this.metaInfo()instanceof se?r.metaInfo=TradingView.clone(this.metaInfo().state()):(r.metaInfo=TradingView.clone(this.metaInfo()),r.metaInfo.id=se.parseIdString(r.metaInfo.id+(r.metaInfo.version?"-"+r.metaInfo.version:"")).fullId),e&&(r.data=this.data().state(),r.data.symbols=this._resolvedSymbols,r.data.graphics=V(this.graphics()),r.data.plotOffsets=this._plotOffsets),this.ownerSource()&&(r.ownerSource=this.ownerSource().id());for(var n=0;n<this._metaInfo.inputs.length;n++)if("bar_time"===this._metaInfo.inputs[n].type){var o=this._metaInfo.inputs[n].id,s=r.state.inputs[o];if(s<0){var a=this._rightOffsetToUnixTime(-s);r.state.inputs[o]=a&&a>=0?a:0}}return this._isChildStudy&&se.patchChildStudyMetaInfoState(r),t&&(i=r).metaInfo&&"string"==typeof i.metaInfo.scriptIdPart&&i.metaInfo.scriptIdPart.startsWith("USER;")&&(function(e){if(e.metaInfo){var t=e.metaInfo.scriptIdPart;if(t){var i=t.split(";")[0];e.metaInfo.id=(e.metaInfo.id||"").replace(t,i),e.metaInfo.fullId=(e.metaInfo.fullId||"").replace(t,i),e.metaInfo.name=(e.metaInfo.name||"").replace(t,i),e.metaInfo.shortId=(e.metaInfo.shortId||"").replace(t,i),e.metaInfo.scriptIdPart=(e.metaInfo.scriptIdPart||"").replace(t,i),e.state&&(e.state.id=(e.state.id||"").replace(t,i),e.state.fullId=(e.state.fullId||"").replace(t,i),e.state.name=(e.state.name||"").replace(t,i),e.state.shortId=(e.state.shortId||"").replace(t,i),e.state.scriptIdPart=(e.state.scriptIdPart||"").replace(t,i))}}}(i),function(e){var t=(e.metaInfo&&e.metaInfo.inputs||[]).find((function(e){return"ILScript"===e.name}));t&&(t.defval="",e.state&&e.state.inputs&&(e.state.inputs[t.id]=""),e.metaInfo.defaults.inputs&&(e.metaInfo.defaults.inputs[t.id]=""))}(i)),r},Ee.prototype._plotsForAlert=function(){var e=this,t=this._metaInfo,i=[ue.isLinePlot,ue.isShapesPlot,ue.isCharsPlot,ue.isArrowsPlot,ue.isOhlcPlot,ue.isAlertConditionPlot];return t.plots.map((function(e,t){return e.pinePlotIndex=t,e})).filter((function(e){return i.some((function(t){return t(e)}))})).map((function(i){var r={id:i.id,type:i.type,pinePlotIndex:i.pinePlotIndex,offset:e.offset(i.id)};return t.styles&&void 0!==t.styles[i.id]&&(r.title=t.styles[i.id].title||"",r.text=t.styles[i.id].text||""),i.target&&t.ohlcPlots&&t.ohlcPlots[i.target]&&(r.ohlcTitle=t.ohlcPlots[i.target].title),r}))},Ee.prototype._collectDepsForAlert=function(){for(var e=[this].concat(this.getAllOwnerSources()).filter((function(e){return e instanceof TradingView.Study})),t=[],i=void 0,r=void 0,n=e.length-1;n>=0;n--){var o=e[n],s=ae(o._metaInfo.id),a=o._getStudyIdWithLatestVersion();r=o.inputsForAlertState();var l=o._metaInfo.inputs.filter((function(e){return"source"===e.type})).map((function(e){return e.id}));G.patchChildIdInInputs(r,i,l);var c=G.idForAlert(s,r);t.push({id:c,study:a,inputs:r}),i=c}return{idForAlert:i,inputsForAlert:r,studyDependencies:t.reverse()}},Ee.prototype.idForAlert=function(){return this._collectDepsForAlert().idForAlert},Ee.prototype.dependenciesForAlerts=function(){var e=this
;return this.getAllOwnerSources().filter((function(e){return e instanceof TradingView.Study})).map((function(t){var i=t.inputs(),r=TradingView.StudyMetaInfo.cutDollarHash(t._metaInfo.fullId);"tv-scripting"===t._metaInfo.productId&&(r=e._model.studyMetaInfoRepository().findByIdSync({type:"java",studyId:"Script@tv-scripting"}).fullId);var n={id:t._studyId,study:r,inputs:i};return null!=t._metaInfo.pine&&(n.scriptIdPart=t._metaInfo.scriptIdPart,n.scriptVersion=t._metaInfo.pine.version),n}))},Ee.prototype._hasAvailableAlertPlots=function(){var e=this.stateForAlert(),t=q.create(e).getPlots();return null!=t&&t.length>0},Ee.prototype._hasAlertablePlots=function(){return(this.metaInfo().plots||[]).some((function(e){return"line"===e.type}))},Ee.prototype._hasAlertConditions=function(){if(this.metaInfo().plots.some(ue.isAlertConditionPlot))return!0;var e=this.stateForAlert();return!(!e.alerts||!e.alerts.conditions)},Ee.prototype._isAlertFeatureEnabled=function(){return ve.enabled("alerts")},Ee.prototype.hasStateForAlert=function(){return this._isAlertFeatureEnabled()&&(this.metaInfo().isTVScript?this._hasAlertConditions()||this._hasAvailableAlertPlots()&&!this.isFailed():this._hasAlertablePlots()&&!this.isFailed())},Ee.prototype.stateForAlert=function(){var e=this._metaInfo,t=this._plotsForAlert(),i=this._collectDepsForAlert(),r=i.idForAlert,n=i.studyDependencies,o=i.inputsForAlert,s=(this.priceScale()||this.model().mainSeries().priceScale()).formatter();s=s?Y.serialize(s):null;var a={id:r,uniqueId:r,type:TradingView.className(this.constructor),title:TradingView.clean(this._title(!1,null,!1),!0),shortTitle:TradingView.clean(this._title(!0,null,!1),!0),shortDescription:TradingView.clean(e.shortDescription||"Study",!0),fullId:e.fullId,isTVScript:e.isTVScript,isTVScriptStrategy:e.isTVScriptStrategy,plots:t,inputs:o,alerts:e.alerts,scriptIdPart:e.scriptIdPart,scriptVersion:e.pine?e.pine.version:"-1",callStudyDependencies:z(this.dependenciesForAlerts()),studyDependencies:n,formatter:s},l=K(this);return l&&(a.dangerReason=l),a},Ee.prototype.isSavedInStudyTemplates=function(){for(var e=0;e<this._metaInfo.inputs.length;e++)if("bar_time"===this._metaInfo.inputs[e].type)return!1;return!0},Ee.prototype.restoreData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.restoreState(e),this._resolvedSymbols=e.symbols,this._graphics=e.graphics?R(e.graphics):D(),this._postProcessGraphics(),this._plotOffsets=e.plotOffsets,this._loading=!1},Ee.prototype.restart=function(e){this._restarting=!0,this.clearData(),(e||ve.enabled("stop_study_on_restart"))&&this.stop(),setTimeout(this.start.bind(this),0)},Ee.prototype.stop=function(e){if(!0===e&&this._children)for(var t=0;t<this._children.length;++t)this._children[t].stop(!0);this._chartApi&&this._chartApi.connected()&&this._studyId&&this._chartApi.removeStudy(this._studyId,this._handler,this._isChildStudy),this._studyId=null,this.clearData(),this._unsubscribeExtendedHours(),this.recalculate()},Ee.prototype.resolvedSymbolInfoBySymbol=function(e){
return this._resolvedSymbols&&e&&this._resolvedSymbols[this._resolvedSymbolKey(e)]||null},Ee.prototype._allInputsAreValid=function(){for(var e=0;e<this._metaInfo.inputs.length;e++)if("bar_time"===this._metaInfo.inputs[e].type){var t=this._metaInfo.inputs[e].id,i=this._properties.inputs[t].value();if(void 0===i||null==i)return!1}return!0},Ee.prototype.sourceId=function(){return this._studyId},Ee.prototype.parentSource=function(){return this._source||this._series},Ee.prototype.symbolSource=function(){return this.parentSource().symbolSource()},Ee.prototype.source=function(){return this.parentSource()},Ee.prototype.ownerSource=function(){return this._isChildStudy?this._source:ge.prototype.ownerSource.call(this)},Ee.prototype.getAllOwnerSources=function(){for(var e=[],t=this.ownerSource();null!=t;)e.push(t),t=t.ownerSource();return e},Ee.prototype.isChildStudy=function(){return!!this._isChildStudy},Ee.prototype.setChild=function(e){e instanceof Ee&&e.source()===this&&(this._children||(this._children=[]),-1===this._children.indexOf(e)&&this._children.push(e))},Ee.prototype.unsetChild=function(e){if(e instanceof Ee&&e.source()===this&&this._children){var t=this._children.indexOf(e);~t&&this._children.splice(t,1)}},Ee.prototype.hasChildren=function(){return!(!this._children||!this._children.length)},Ee.prototype.getAllChildren=function(){if(!Array.isArray(this._children))return[];for(var e=this._children.slice(),t=0;t<e.length;++t)for(var i=e[t].getAllChildren(),r=0;r<i.length;++r)~e.indexOf(i[r])||e.push(i[r]);return e},Ee.prototype._debugId=function(){var e=[];return this._studyId&&e.push(this._studyId),e.push(this._metaInfo.fullId),e.push(this._metaInfo.description),JSON.stringify({study:e})},Ee.prototype.isStarted=function(){return!!this._studyId},Ee.prototype._isStopped=function(){return!this.isStarted()},Ee.prototype.isRestarting=function(){return!!this._restarting},Ee.prototype.isVisible=function(){if(!this.properties().visible.value())return!1;if(this._metaInfo.plots.length>0)return!0;for(var e in this._metaInfo.graphics)for(var t in this._metaInfo.graphics[e]){var i=this.properties().graphics[e][t];if(!i.visible||i.visible.value())return!0}return!!this._metaInfo.isTVScriptStrategy},Ee.prototype.start=function(e,t){var i=this._model.mainSeries();if(i.isStarted()){this._isChildStudy&&this._source.isHibernated()&&this._source.start();var r=!this._isChildStudy&&!this.hasChildren()&&!this.isVisible();!this._chartApi||!this._chartApi.connected()||r&&!0!==t||this._allSymbolsAreResolved().then(function(){this._startAfterSymbolsResolved(e,t)}.bind(this)).catch(function(e){we.logError("ERROR: "+this._debugId()+" start failed, "+e),delete this._restarting}.bind(this))}else i.dataEvents().completed().subscribe(this,(function(){this.start(e,t)}),!0)},Ee.prototype._getStudyIdWithLatestVersion=function(){var e=se.cutDollarHash(this._metaInfo.id),t=e;return e.indexOf("@tv-scripting")>=0?t+="-101!":t+="-"+this._metaInfo.version,t},Ee.prototype._startAfterSymbolsResolved=function(e,t){if(!this.isStarted()||this._restarting){
if(this._isChildStudy){if(!this._source.isStarted()||this._source.isRestarting())return void this._source.onStart.subscribe(this,this._startAfterSymbolsResolved,!0);se.setChildStudyMetaInfoPropertiesSourceId(this._metaInfo,this._source.sourceId(),this._properties)}if(this._studyId=me(),delete this._restarting,this._allInputsAreValid()){this._inputs=this.inputs({keepOptionalSymbolsEmpty:!0});var i=this._getStudyIdWithLatestVersion();if(this._incrementTurnaround(),this._chartApi.createStudy(this._studyId,this._turnaround,this._isChildStudy?this._source.sourceId():this._series._seriesId,i,this._inputs,this._handler,this._isChildStudy),this._studyName=i,this._subscribeExtendedHours(),this.onStart.fire(),!0===e&&this._children)for(var r=0;r<this._children.length;++r)this._children[r].start(!0,t)}}},Ee.prototype._rightOffsetToUnixTime=function(e){var t=null;if(this._series.bars().size()>=e){var i=a(this._series.bars().lastIndex())-e;t=a(this._series.bars().valueAt(i))[TradingView.TIME_PLOT]}return t},Ee.prototype._titleInputs=function(e,t){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1,fakeInputsForDisplay:!0,asObject:!1,skippedGroups:[],noExchanges:e,noResolution:t})},Ee.prototype.inputsForAlert=function(){var e=this.offset(),t=this.inputs();return e&&t.push(e),t},Ee.prototype.inputs=function(e){var t={symbolsForDisplay:!1,symbolsForChartApi:!0,skipHiddenInputs:!1,skipFakeInputs:!1,skipBooleanInputs:ve.enabled("dont_show_boolean_study_arguments"),asObject:!0,skippedGroups:[],skippedInputs:[],noExchanges:!1,noResolution:!1,keepOptionalSymbolsEmpty:!1};return TradingView.merge(t,e),this._buildInputs(t)},Ee.prototype.inputsForAlertState=function(){return this.inputs()},Ee.prototype._buildInputs=function(e){s(!!e,"options not set");var t={};try{t=this._prepareInputs(e)}catch(r){we.logWarn("Failed to prepare study inputs: "+r)}if(e.asObject){var i={};return Object.keys(t).forEach((function(e){null!=t[e]&&(i[e]=t[e])})),i}i=[];return Object.keys(t).forEach((function(e){null!=t[e]&&i.push(t[e])})),i},Ee.prototype._prepareInputs=function(e){s(!!e,"options not set");for(var t={},i=0;i<this._metaInfo.inputs.length;i++){var r=this._metaInfo.inputs[i];if((!r.isFake||!e.skipFakeInputs)&&!(r.isMTFResolution&&e.noResolution||r.isHidden&&e.skipHiddenInputs||"bool"===r.type&&e.skipHiddenInputs&&e.skipBooleanInputs||-1!==e.skippedGroups.indexOf(r.groupId)||void 0!==e.skippedInputs&&-1!==e.skippedInputs.indexOf(r.id))){var n=this._prepareInput(r,e);t[r.id]=TradingView.clone(n)}}return t},Ee.prototype._prepareInput=function(e,t){var i=this._prepareInputValue(e,t);return!e.isFake||t.fakeInputsForDisplay||t.onlyAtomValues?i:{v:i,f:!0,t:e.type}},Ee.prototype._prepareInputValue=function(e,t){var i=e.id;if("symbol"===e.type){var r=this._properties.inputs[i].value(),n=this._resolvedSymbols&&this._resolvedSymbols[this._resolvedSymbolKey(r)];if(""===r&&e.optional){if(t&&t.keepOptionalSymbolsEmpty)return r;r=this._model.mainSeries().symbol(),n=this._model.mainSeries().symbolInfo()}if(t&&t.symbolsForDisplay){if(n){
var o=n.exchange;r=n.name,o&&!t.noExchanges&&(r+=", "+o)}}else n&&(r=n.ticker||n.full_name),!this.isPine()&&t&&t.symbolsForChartApi&&(r=this.getSymbolString(r));return r}if("bar_time"===e.type){var s=this._properties.inputs[i].value();if(s<0){var a=this._rightOffsetToUnixTime(-s);s=a&&a>=0?a:s}return s}return this._metaInfo.isTVScript||this._metaInfo.pine?"text"===i?this._metaInfo.defaults.inputs.text:"pineId"===i?this._metaInfo.scriptIdPart:"pineVersion"===i?this._metaInfo.pine?this._metaInfo.pine.version:"-1":this._properties.inputs[i].value():this._properties.inputs[i].value()},Ee.prototype._rebindToSource=function(e,t){var i=this.parentSource();if(this._isChildStudy){var r;this._source.unsetChild(this),delete this._nonPriceParent;var n=null;if(e===this._model.mainSeries())this._source.currencyChanged().unsubscribeAll(this),delete this._source,delete this._isChildStudy,delete this._ownerSource,r=this._series._seriesId,n=j.REBIND_STUDY_CHILD_TO_STANDALONE,this._series.currencyChanged().subscribe(this,this._onSourceCurrencyChanged);else{if(!(e instanceof Ee))return we.logError("Unable to rebind study to source of this type"),!1;this._ownerSource=e,this._source.currencyChanged().unsubscribeAll(this),this._source=e,this._source.currencyChanged().subscribe(this,this._onSourceCurrencyChanged),r=this._source.sourceId(),this._source.setChild(this),this._source.isHibernated()&&this._source.start()}this._incrementTurnaround(),this._chartApi.rebindStudy(this._studyId,this._turnaround,r,this._studyName,t,this._handler,n)}else{if(!(e instanceof Ee))return we.logError("Unable to rebind study to source of this type"),!1;var o=e.isHibernated();o&&e.start();var s=!1;if(this._canCreateStudyWithRebindType(j.REBIND_STUDY_STANDALONE_TO_CHILD)?(this._incrementTurnaround(),s=this._chartApi.rebindStudy(this._studyId,this._turnaround,e.sourceId(),this._studyName,t,this._handler,j.REBIND_STUDY_STANDALONE_TO_CHILD)):U({feature:"studyOnStudy"}),!s)return o&&e.stop(),!1;this._isChildStudy=!0,this._ownerSource=e,this._source=e,this._source.setChild(this),this._childStudyByRebind.fire(),this._series.currencyChanged().unsubscribeAll(this),this._source.currencyChanged().subscribe(this,this._onSourceCurrencyChanged)}var a=this.m_priceScale,l=e.priceScale();if(a!==l){var c=this._model.paneForSource(this),u=this._model.paneForSource(e);c===u&&u.move(this,l,!0)}return i.formatterChanged().unsubscribe(this,this._onSourceFormatterChanged),this.parentSource().formatterChanged().subscribe(this,this._onSourceFormatterChanged),i.priceStepChanged().unsubscribe(this,this._onSourcePriceStepChanged),this.parentSource().priceStepChanged().subscribe(this,this._onSourcePriceStepChanged),i.currencyChanged().unsubscribeAll(this),this._recreatePriceFormattingDependencies(),!0},Ee.prototype.childStudyByRebind=function(){return this._childStudyByRebind},Ee.prototype._changeInputsImpl=function(e,t){var i=this.source(),r=this._properties.inputs&&this._properties.inputs.state(),n=se.getSourceIdByInputs(this._metaInfo.inputs,r),o=!0
;if(n)if("high"===n||"open"===n||"low"===n||"close"===n||"hl2"===n||"ohl3"===n||"ohlc4"===n)i=this._model.mainSeries();else for(var s=this._model.dataSources(),a=0;a<s.length;++a)if(s[a]instanceof Ee&&s[a].sourceId()===n){i=s[a];break}if(i!==this.source()){if(!this._rebindToSource(i,e)&&r)for(var l in t)if(t.hasOwnProperty(l)&&t[l]!==e[l]&&0===e[l].indexOf(n)){var c=this._properties.inputs[l],u=t[l];c.setValue(u),o=!1;break}}else this._incrementTurnaround(),this._chartApi.modifyStudy(this._studyId,this._turnaround,e,this._handler);this.invalidateTitleCache(),o&&(this._studyModified=o)},Ee.prototype._incrementTurnaround=function(){this._turnaround="st"+ ++this._turnaroundCounter},Ee.prototype._tryChangeInputs=function(){var e=TradingView.clone(this._inputs);this.isStarted()&&this._chartApi.connected()?this._allInputsAreValid()?this._allSymbolsAreResolved().then(function(){if(!this._isStopped()){var t=this.inputs({keepOptionalSymbolsEmpty:!0});JSON.stringify(t)!==JSON.stringify(this._inputs)&&(this._changeInputsImpl(t,e),this._inputs=t,this.model().alertsWatcher().syncSourceAlertLabels(this))}}.bind(this)).catch(function(e){we.logError("ERROR: "+this._debugId()+" _tryChangeInputs: cannot modify study, "+e)}.bind(this)):this.stop():(this.stop(!0),this.start(!0)),this._tagsChanged.fire()},Ee.prototype.testInputValue=function(e,t){if(!se.canBeChild(this._metaInfo)||!se.isSourceInput(e))return!0;var i=this._properties.inputs&&this._properties.inputs[e.id];if(!i)return!0;var r=Ee.getInputRebindType(e,i.value(),t);return!!this._canCreateStudyWithRebindType(r)||(U({feature:"studyOnStudy"}),!1)},Ee.prototype._canCreateStudyWithRebindType=function(e){return e!==j.REBIND_STUDY_STANDALONE_TO_CHILD||this._chartApi.isCanCreateStudy(!0)},Ee.prototype.changeStyles=function(){var e=void 0!==this._metaInfo.inputs.find((function(e){return"symbol"===e.type}));!this.isStarted()&&!e||this._restarting||(this._inputs?this._tryChangeInputs():this._chartApi&&this._chartApi.connected()&&this.restart(),this._metaInfo.isTVScript&&this._metaInfo.TVScriptMetaInfoExprs&&(this._pinePatchProps(),this.invalidateTitleCache()),this.hasBarColorer()&&this._model.mainSeries().invalidateBarStylesCache(),this.createViews(),this.recalculate(!0),this.updateAllViews())},Ee.prototype._onPropertiesChanged=function(){this.changeStyles(),ce.emit("study_properties_changed",this._id)},Ee.prototype._isModifiedStudyInputs=function(e){if(void 0===this._oldStudyInputs)return this._oldStudyInputs=e,!0;var t=Object.keys(this._oldStudyInputs);return s(t.length===Object.keys(e).length,"keys quantity should be equal"),t.forEach((function(t){s(e.hasOwnProperty(t),"key '"+t+"' should existing in studyInputs"),this._oldStudyInputs[t]!==e[t]&&(this._oldStudyInputs=e)}),this),this._oldStudyInputs===e},Ee.prototype._pinePatchProps=function(){var e=this._prepareInputs({symbolsForDisplay:!1,symbolsForChartApi:!0,skipHiddenInputs:!0,skipFakeInputs:!1,onlyAtomValues:!0,skipBooleanInputs:!1,skippedGroups:[]});if(this._isModifiedStudyInputs(e)){
var t=H.patchPropertiesAsync(this._properties,this._metaInfo,e),i=this._allSymbolsAreResolved();Promise.all([t,i]).then(function(){this.createViews(),this.recalculate(!0),this.updateAllViews()}.bind(this)).catch(function(e){we.logError("ERROR: "+this._debugId()+" _pinePatchProps failed, reason: "+e)}.bind(this))}},Ee.prototype.visibleChanged=function(){this._series instanceof TradingView.Series&&this._series.invalidateBarColorerCache()},Ee.prototype.processHibernate=function(){this.isHibernateAllowed()&&(!this._studyId&&this.isVisible()&&this.start(),this._studyId&&!this.isVisible()&&this.stop())},Ee.prototype.isHibernated=function(){return!this.isVisible()&&!this._studyId},Ee.prototype.isHibernateAllowed=function(){return!this.hasChildren()},Ee.prototype.lastPriceLabelFixedCoordinate=function(e){return this._priceAxisViewsCache[e]._fixedCoordinate},Ee.prototype.priceLabelText=function(e){var t,i=this._metaInfo.styles,r=this._metaInfo.ohlcPlots;i&&i[e]&&(t=i[e]),r&&r[e]&&(t=r[e]);var n=t.title;return 1!==this._simplePlotsCount||ue.isPlotTitleDefined(n)?this._metaInfo.is_price_study&&n!==this._metaInfo.shortDescription?""===n?this._metaInfo.shortDescription:this._metaInfo.shortDescription+":"+n:n:this._metaInfo.shortDescription},Ee.prototype.createPriceAxisView=function(e){return new _(this,{plotIndex:e})},Ee.prototype.createPriceLineAxisView=function(e){return new pe(this,e)},Ee.prototype.createViews=function(){this._priceAxisViewsBase=[],this._priceLinesAxisViews=[],this._paneViews=[],this._labelPaneViews=[];var e={};if(this._priceAxisViewsCache={},this.metaInfo().plots)for(var t=0;t<this.metaInfo().plots.length;t++)if(!(this.isSelfColorerPlot(t)||this.isTextColorerPlot(t)||this.isBarColorerPlot(t)||this.isOHLCColorerPlot(t)||this.isAlertConditionPlot(t))){var i=this.metaInfo().plots[t].id;if(this.isBgColorerPlot(t))this._paneViews.push(new y(this,this._series,this._model,i));else if(this.isPlotShapesPlot(t))this._paneViews.push(new b(this,this._series,this._model,i));else if(this.isPlotCharsPlot(t))this._paneViews.push(new S(this,this._series,this._model,i));else if(this.isPlotArrowsPlot(t))this._paneViews.push(new w(this,this._series,this._model,i));else if(this.isOHLCSeriesPlot(t)){var r=this.metaInfo().plots[t].target;if(e[r])continue;e[r]=r,this.isOHLCBarsPlot(t)?this._paneViews.push(new P(this,this._series,this._model,r)):this.isOHLCCandlesPlot(t)&&this._paneViews.push(new C(this,this._series,this._model,r));var n=this.createPriceAxisView(r);this._priceAxisViewsCache[r]=n,this._priceAxisViewsBase.push(n),this._labelPaneViews.push(new m(n,this,this._model))}else{n=this.createPriceAxisView(i);this._priceAxisViewsCache[i]=n,this._priceAxisViewsBase.push(n),this._priceLinesAxisViews.push(this.createPriceLineAxisView(i)),this._paneViews.push(new g(this,this._series,this._model,i)),this.properties().styles[i].trackPrice.value()&&this._paneViews.push(new u(this,i)),this._labelPaneViews.push(new m(n,this,this._model))}}
if(this._properties.bands)for(t=0;t<this._properties.bands.childCount();t++)this._properties.bands[t].visible.value()&&this._paneViews.push(new d(this._properties.bands[t],this));this._properties.bandsBackground&&this._paneViews.push(new p(this));var o=this._paneViews;if(N(this,this.model()).then(function(e){for(var t=0;t<e.length;t++)o.push(e[t]);this._model.lightUpdate()}.bind(this)),this._properties.areaBackground&&this._paneViews.push(new I(this)),this._properties.filledAreas&&this._metaInfo.filledAreas)for(t=0;t<this._metaInfo.filledAreas.length;++t){var s=this._metaInfo.filledAreas[t],a=this._properties.filledAreasStyle[s.id];s.type===se.FilledArea.TYPE_PLOTS||s.palette?this._paneViews.push(new x(this,s,a)):s.type===se.FilledArea.TYPE_HLINES?this._paneViews.push(new f(this,s,a)):we.logWarn("Unsupported filledArea type: "+s.type)}this._dataWindowView||(this._dataWindowView=this.metaInfo().graphics&&"hhists"in this.metaInfo().graphics?new O(this,this._model):new E(this,this._model)),this._legendView||(this._legendView=this.metaInfo().graphics&&"hhists"in this.metaInfo().graphics?new A(this,this._model):new L(this,this._model)),this._statusView||(this._statusView=new M(this,this._model.properties().scalesProperties.textColor)),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},Ee.prototype.recalculate=function(e){var t=this._model.paneForSource(this);this._model.recalculatePane(t,e),this._model.updateSource(this)},Ee.prototype.data=function(){return this.m_data},Ee.prototype.metaInfo=function(){return this._metaInfo},Ee.prototype.graphicsInfo=function(){return this._metaInfo.graphics},Ee.prototype.status=function(){return this._status},Ee.prototype.title=function(e,t,i,r){i=void 0===i?!this._showStudyArgumentsProperty.value():i;var n=JSON.stringify([e,t,i,r]);if(this._titleStrCache[n])return this._titleStrCache[n];if(this._titleInPartsCache[n])return this._joinTitlesParts(this._titleInPartsCache[n]);var o=this._title(e,t,i,r);return this._titleStrCache[n]=o,o},Ee.prototype.titleInParts=function(e,t,i,r){i=void 0===i?!this._showStudyArgumentsProperty.value():i;var n=JSON.stringify([e,t,i,r]);if(this._titleInPartsCache[n])return this._titleInPartsCache[n];var o=this._titleInParts(e,t,i,r);return this._titleInPartsCache[n]=o,o},Ee.prototype._title=function(e,t,i,r){var n=this._titleInParts(e,t,i,r);return this._joinTitlesParts(n)},Ee.prototype._joinTitlesParts=function(e){var t=e[1]?e[1].join(", "):"";return e[0]+(t.length>0?" ("+t+")":"")},Ee.prototype._titleInParts=function(e,t,i,r){var n="";n=e?this._metaInfo.shortDescription||this._properties.shortDescription&&this._properties.shortDescription.value()||"Study":this._metaInfo.description||this._properties.description&&this._properties.description.value()||"Study",t=t||{};var o=[window.t(n)],s=[];if(!i){var a=this._getMTFResolutionInputTitle();if(null!==a&&a.length>0&&o.push(a),(s=this._titleInputs(r,!0)||[]).length>0){var l={};if(this._isChildStudy)for(var c=0;c<this._metaInfo.inputs.length;++c){
var u=this._metaInfo.inputs[c];if(se.isSourceInput(u)){var h=u.id,d=this._properties.inputs[h].value();if(d.indexOf("$")>=0&&this._source){var p=this._source.metaInfo(),f=this._source.title(e,null,!0,r);if(1===p.plots.length)l[d]=f;else{var _=d.split("$")[1],m=p.plots[_].id,v=p.styles&&p.styles[m]&&p.styles[m].title||m;l[d]=f+": "+v}}break}}var g=this;s=s.map((function(e){var i=isNumber(e)?g._numericFormatter.format(e):l&&l[e]||e;return t[i]&&(i=t[i]),i}))}}return[o.join(" · "),s]},Ee.prototype._getMTFResolutionInputTitle=function(){for(var e=0;e<this._metaInfo.inputs.length;e++){var t=this._metaInfo.inputs[e];if(t.isMTFResolution)return this._properties.inputs[t.id].value()}return null},Ee.prototype.invalidateTitleCache=function(e){if(this._titleStrCache={},this._titleInPartsCache={},!0===e&&this._children)for(var t=0;t<this._children.length;++t)this._children[t].invalidateTitleCache(e)},Ee.prototype.graphics=function(){return this._graphics},Ee.prototype.turnaround=function(e){return!0===e?this.source().turnaround(!0)+"_"+this._turnaround:this._turnaround},Ee.prototype._checkTurnaround=function(e){return e===this._turnaround||e===this._model.mainSeries().turnaround()||e===this.turnaround(!0)},Ee.prototype._getStatusTextOnStudyError=function(e){var t=le(this._metaInfo.fullId);if(this._metaInfo.scriptIdPart&&this._metaInfo.scriptIdPart.startsWith(X.PinePrefix.EDGR)||t&&t.startsWith(X.PinePrefix.EDGR))return window.t("Fundamental studies are no longer available on charts");var i=e.split(":",2)[0];return i.length>0?window.t(i):""},Ee.prototype._handleStudyError=function(e){delete this._loadingStartTime,this._failed=!0,this._loading=!1,this.clearData();var t=e.params[2];if(this._setStatus(this._getStatusTextOnStudyError(e.params[2])),-1===["Sessions"].indexOf(this._metaInfo.description)){var i=this._getTelemetryAdditionalData();if(void 0!==t){var r=t.indexOf("Command info");i.reason=r>=0?t.slice(0,r).trim():t}if(!/study in error state|no volume is provided by the data vendor|error in series|unsupported resolution/gi.test(i.reason.toLowerCase())){var n=this._getTelemetryObjectName();this._sendTelemetryCounter(n+"_error",i)}}this._statusView.update(),this._model.updateSource(this)},Ee.prototype.onData=function(e){switch(e.method){case"study_loading":this._failed=!1,this._loading=!0,this._setStatus(Te),this._statusView.update(),this._model.updateSource(this),this._loadingStartTime=(new Date).getTime();break;case"study_error":this._handleStudyError(e);break;case"study_completed":if(!this._checkTurnaround(e.params[1]))return;this._studyModified&&(this.clearData(),this._studyModified=!1);var t="chartSession:"+this._chartApi._sessionid,i=(new Date).getTime()-this._loadingStartTime;we.logDebug(t+", Study "+this._metaInfo.description+" loading took "+i+" ms");var r=this._getTelemetryObjectName(),n=e.params[e.params.length-1];if(n){var o=Math.round(1e3*(n-this._chartApi.serverTimeOffset()))-this._loadingStartTime,a=o>0&&i-o>=Pe;this._sendTelemetryTiming(r+"_server_time_frame",a?o:i)}this._sendTelemetryCounter(r+"_loaded"),
this._sendTelemetryTiming(r+"_time_frame",i),delete this._loadingStartTime,this._loading=!1,this._setStatus(""),this._statusView.update();var l=this._model.paneForSource(this);this._model.recalculatePane(l),this._updateSources(),this._model.fullUpdate();break;case"study_deleted":break;case"data_update":if(e.params.customId!==this.sourceId()||!this._checkTurnaround(e.params.turnaround))return;s(!!e.params.nonseries,"data.params.nonseries is missing"),this._onDataUpdate(e.params.plots,e.params.nonseries)}},Ee.prototype._onDataUpdate=function(e,t){this._studyModified&&(this.clearData(),this._studyModified=!1);var i=l(t.d);return this._ongoingDataUpdate=this._ongoingDataUpdate.then((function(){return i}),(function(){return i})).then(this._onDataUnpacked.bind(this,e,t.indexes)),this._ongoingDataUpdate},Ee.prototype._onDataUnpacked=function(e,t,i){this._isDestroyed||("nochange"!==t&&this._processPlotOffsets(i),this.transformData(e),this._mergeData(e),null!==i&&(i.indexes_replace?(s("nochange"!==t),this._graphics.replaceIndexesTo(t)):("nochange"!==t&&this._graphics.replaceIndexesTo(t),void 0!==i.graphicsCmds&&this._graphics.processCommands(i.graphicsCmds,this._metaInfo.graphics))),this._onDataUpdated(e,i,t))},Ee.prototype._onDataUpdated=function(e,t,i){if(this.hasBarColorer()&&e.length>0){var r=this.barColorer().firstColoredBar(e[0].index);this._model.mainSeries().invalidateBarStylesCache(r)}null!==t&&this._postProcessGraphics();var n=this._model.paneForSource(this);this._model.recalculatePane(n),this._updateSources()},Ee.prototype.transformData=function(e){},Ee.prototype.moveData=function(e){this._ongoingDataUpdate=this._ongoingDataUpdate.then(function(){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.move(e)}.bind(this))},Ee.prototype.replaceData=function(e,t,i){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.remove(e+1),this.m_data.addTail(i,t)},Ee.prototype._updateSources=function(){this._model.updateSource(this),this.hasBarColorer()&&this._model.updateSource(this._model.mainSeries())},Ee.processPlotOffsets=function(e,t){t&&t.indexes_replace||(e._plotOffsets=t&&t.offsets||{})},Ee.prototype._processPlotOffsets=function(e){Ee.processPlotOffsets(this,e)},Ee.prototype._mergeData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.merge(e)},Ee.prototype._postProcessGraphics=function(){this._priceAxisViews=[].concat(this._priceAxisViewsBase,F(this))},Ee.prototype._getNonPriceParent=function(){if(this._nonPriceParent)return this._nonPriceParent;for(var e=this.source();e instanceof Ee;){var t=e.metaInfo();if(!t.is_price_study||"Compare@tv-basicstudies"===t.id)return this._nonPriceParent=e,e;e=e.source()}},Ee.prototype.firstValue=function(e){if(!this._isChildStudy&&"Compare@tv-basicstudies"===this._metaInfo.id||!this._metaInfo.is_price_study){var t=this._model.timeScale().visibleBarsStrictRange();if(null===t)return null;var i=t.firstBar(),r=t.lastBar(),n=Se(this),o=this,s=o._metaInfo.plots;return null===n&&this.data().range(i,r).each((function(t,i){
for(var r=0;r<s.length;++r)if(!o.isSelfColorerPlot(r)){var a=i[r+1];if(null!=a){var l=s[r].id,c=o.properties().styles[l];if(c.visible&&c.visible.value()&&!(e&&Math.abs(a)<1e-10))return n=a,!0}}return!1})),this._nonPriceFirstValue=n,n}if(this._isChildStudy){var a=this._getNonPriceParent();if(a&&this.priceScale()===a.priceScale())return void 0!==a._nonPriceFirstValue?a._nonPriceFirstValue:a.firstValue()}return this._series.firstValue()},Ee.offset=function(e,t){var i=0;return e._plotOffsets&&void 0!==e._plotOffsets[t]&&(i+=e._plotOffsets[t]),void 0!==e._plotOffsetsMetaInfoOverride[t]?i+=e._plotOffsetsMetaInfoOverride[t]:e.properties().offsets&&void 0!==e.properties().offsets[t]&&(i+=e.properties().offsets[t].val.value()),e.properties().offset&&(i+=e.properties().offset.val.value()),i},Ee.prototype.offset=function(e){return Ee.offset(this,e)},Ee.prototype.priceRange=function(e,t){if(TradingView.isInteger(e)){if(TradingView.isInteger(t)){for(var i,r,o=null,s=this._metaInfo,a=[],l=null,c=0;c<s.plots.length;++c)if(!(this.isSelfColorerPlot(c)||this.isTextColorerPlot(c)||this.isBarColorerPlot(c)||this.isBgColorerPlot(c)||this.isOHLCColorerPlot(c)||this.isAlertConditionPlot(c))){var u,h=s.plots[c].id;if(this.isOHLCSeriesPlot(c)){var d=s.plots[c].target;u=this.properties().ohlcPlots[d]}else u=this.properties().styles[h];if(u.visible.value()){if(r=null,u.location&&(r=u.location.value()),!i){var p=[oe.Absolute,oe.Top,oe.Bottom].indexOf(r)<0;i=(this.isPlotShapesPlot(c)||this.isPlotCharsPlot(c))&&p||this.isPlotArrowsPlot(c)}if(this.isLinePlot(c)||(this.isPlotShapesPlot(c)||this.isPlotCharsPlot(c))&&u.location.value()===oe.Absolute||this.isOHLCSeriesPlot(c)){var f={name:h,offset:this.offset(h)},_=this.properties().styles[h].plottype.value();if(!this.properties().skipHistogramBaseOnAutoScale&&[he.Histogram,he.Columns,he.Area].indexOf(_)>=0){var m=this.properties().styles[h].histogramBase.value(),v=this.m_data.minMaxOnRangeCached(e,t,[f]);isNumber(m)&&null!==v&&(l=ne(l,{min:m,max:m}),l=ne(l,v))}else a.push(f)}}}var g=this.m_data.minMaxOnRangeCached(e,t,a);if(g=ne(l,g),i){a=[{name:"low",offset:0},{name:"high",offset:0}];var y=this.series().data().bars().minMaxOnRangeCached(e,t,a);g=ne(g,y)}if(null!==g&&(o=new n(g.min,g.max)),s.bands)for(c=0;c<s.bands.length;c++)if(this.properties().bands[c].visible.value()){m=this.properties().bands[c].value.value();if(!isNumber(m))continue;o?o.apply(m,m):o=new n(m,m)}var b=be(this,e,t);return b&&(o=o?o.merge(b):b),this._postProcessPriceRange(o)}we.logDebug("priceRange: incorrect endBar")}else we.logDebug("priceRange: incorrect startBar")},Ee.prototype._postProcessPriceRange=function(e){if(e&&e.minValue()===e.maxValue()&&!this.metaInfo().is_price_study){var t=.005*e.minValue();e=new n(e.minValue()-t,e.maxValue()+t)}var i=this.priceScale();return i&&i.isLog()&&e?new n(this.priceScale().priceToLogical(e.minValue()),this.priceScale().priceToLogical(e.maxValue())):e},Ee.prototype.paneViews=function(){return this.properties().visible.value()?this._paneViews:null},Ee.prototype.labelPaneViews=function(){
return this.properties().visible.value()?this._labelPaneViews:null},Ee.prototype.dataWindowView=function(){return this._dataWindowView},Ee.prototype.legendView=function(){return this._legendView},Ee.prototype.statusView=function(){return this._statusView},Ee.prototype.priceAxisViews=function(e,t){return this.properties().oldShowLastValue&&!this.properties().oldShowLastValue.value()?null:e.findTargetPriceAxisViews(this,t,this._priceAxisViews,this._priceLinesAxisViews)},Ee.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showStudyLastValue.value()},Ee.prototype.isLinePlot=function(e){var t=this._metaInfo.plots[e];return ue.isLinePlot(t)},Ee.prototype.isSelfColorerPlot=function(e){var t=this._metaInfo.plots[e];return ue.isColorerPlot(t)},Ee.prototype.isTextColorerPlot=function(e){var t=this._metaInfo.plots[e];return ue.isTextColorerPlot(t)},Ee.prototype.isBarColorerPlot=function(e){var t=this._metaInfo.plots[e];return ue.isBarColorerPlot(t)},Ee.prototype.isBgColorerPlot=function(e){var t=this._metaInfo.plots[e];return ue.isBgColorerPlot(t)},Ee.prototype.isPlotShapesPlot=function(e){var t=this._metaInfo.plots[e];return ue.isShapesPlot(t)},Ee.prototype.isPlotCharsPlot=function(e){var t=this._metaInfo.plots[e];return ue.isCharsPlot(t)},Ee.prototype.isPlotArrowsPlot=function(e){var t=this._metaInfo.plots[e];return ue.isArrowsPlot(t)},Ee.prototype.isOHLCBarsPlot=function(e){var t=this._metaInfo.plots[e].target,i=this.metaInfo().defaults.ohlcPlots[t];return i&&this.isOHLCSeriesPlot(e)&&ue.isOhlcPlotStyleBars(i)},Ee.prototype.isOHLCCandlesPlot=function(e){var t=this._metaInfo.plots[e].target,i=this.metaInfo().defaults.ohlcPlots[t];return i&&this.isOHLCSeriesPlot(e)&&ue.isOhlcPlotStyleCandles(i)},Ee.prototype.isOHLCSeriesPlot=function(e){var t=this._metaInfo.plots[e];return ue.isOhlcPlot(t)},Ee.prototype.isOHLCOpenPlot=function(e){var t=this._metaInfo.plots[e];return ue.isOhlcOpenPlot(t)},Ee.prototype.isOHLCHighPlot=function(e){var t=this._metaInfo.plots[e];return ue.isOhlcHighPlot(t)},Ee.prototype.isOHLCLowPlot=function(e){var t=this._metaInfo.plots[e];return ue.isOhlcLowPlot(t)},Ee.prototype.isOHLCClosePlot=function(e){var t=this._metaInfo.plots[e];return ue.isOhlcClosePlot(t)},Ee.prototype.isOHLCColorerPlot=function(e){var t=this._metaInfo.plots[e];return ue.isOhlcColorerPlot(t)},Ee.prototype.isDataOffsetPlot=function(e){var t=this._metaInfo.plots[e];return ue.isDataOffsetPlot(t)},Ee.prototype.isAlertConditionPlot=function(e){var t=this._metaInfo.plots[e];return ue.isAlertConditionPlot(t)},Ee.prototype.hasBarColorer=function(){for(var e=0;e<this._metaInfo.plots.length;++e)if(this.isBarColorerPlot(e))return!0;return!1},Ee.prototype.barColorer=function(){for(var e=null,t=0;t<this._metaInfo.plots.length;++t)if(this.isBarColorerPlot(t)){var i=new c(this,t);null==e?e=i:e.pushBackBarColorer(i)}if(null==e)throw new Error("Cannot create BarColorer: study doesn't have a bar_colorer plot!");return e},Ee.prototype.base=function(){return 0},Ee.prototype._priceScaleByProperties=function(){
if("default"===this.properties().precision.value())return null;var e=parseInt(this.properties().precision.value());return isFinite(e)?Math.pow(10,e):null},Ee.prototype._formatterByProperties=function(){var e=this._priceScaleByProperties();return null!==e?new Q(e):null},Ee.prototype._priceScaleByMetaInfo=function(){var e=this.metaInfo().format,t=isNumber(e.precision)?Math.pow(10,e.precision):void 0;if("price"===e.type||"percent"===e.type)return t||100;if("volume"===e.type){if(void 0===e.precision){var i=this.series().symbolInfo();if(null!==i&&isNumber(i.volume_precision))return Math.pow(10,i.volume_precision)}return 1}return"inherit"===e.type||we.logWarn("Unsupported format type: "+e.type),null},Ee.prototype._formatterByMetaInfo=function(){var e=this.metaInfo().format,t=isNumber(e.precision)?Math.pow(10,e.precision):void 0;switch(e.type){case"price":return new Q(t);case"volume":var i=e.precision;if(void 0===i){var r=this.series().symbolInfo();i=r&&isNumber(r.volume_precision)?r.volume_precision:0}return new Z(i);case"percent":return new ee(t);case"inherit":return null;default:return we.logWarn("Unsupported format type: "+e.type),null}},Ee.prototype._onSourceFormatterChanged=function(){null===this._formatter&&(null!==this.priceScale()&&this.priceScale().updateFormatter(),this._formatterChanged.fire())},Ee.prototype._onSourcePriceStepChanged=function(){null===this._priceStep&&this._priceStepChanged.fire()},Ee.prototype._precisionChanged=function(){this._recreatePriceFormattingDependencies()},Ee.prototype._recreatePriceFormattingDependencies=function(){this._recreateFormatter(),this._recreatePriceStep()},Ee.prototype._recreateFormatter=function(){this._formatter=this._tryCreateFormatter(),this._formatterChanged.fire(),null!==this.priceScale()&&this.priceScale().updateFormatter(),this._model.fullUpdate()},Ee.prototype._recreatePriceStep=function(){var e=null,t=this._tryToGetPriceScale();null!==t&&(e=1/t),this._priceStep!==e&&(this._priceStep=e,this._priceStepChanged.fire())},Ee.prototype._tryToGetPriceScale=function(){var e=this._priceScaleByProperties();return null===e&&(e=this._priceScaleByMetaInfo()),e},Ee.prototype._tryCreateFormatter=function(){var e=this._formatterByProperties();return null===e&&(e=this._formatterByMetaInfo()),e},Ee.prototype.formatter=function(){return this._formatter||this.parentSource().formatter(!1)},Ee.prototype.priceStep=function(){return this._priceStep||this.parentSource().priceStep(!1)},Ee.prototype.setOwnerSource=function(e){ge.prototype.setOwnerSource.call(this,e),this._recreatePriceFormattingDependencies()},Ee.prototype.nearestIndex=function(e,t,i){if(TradingView.isInteger(e)){var r=this.data().search(e,t,i);return null!==r?r.index:void 0}we.logDebug("nearestIndex: incorrect logicalPoint")},Ee.prototype._lastNonEmptyPlotRow=function(e){if(!TradingView.isInteger(e))return we.logDebug("_lastNonEmptyPlotRow: incorrect plotIndex"),null;if(void 0!==this._lastNonEmptyPlotRowCache[e])return this._lastNonEmptyPlotRowCache[e];var t=this.data().findLast((function(t,i){return void 0!==i[e]}),1e3)
;return null===t?null:(this._lastNonEmptyPlotRowCache[e]=t,this._lastNonEmptyPlotRowCache[e])},Ee.prototype.updateAllViews=function(){for(var e=0;e<this._paneViews.length;e++)this._paneViews[e].update();for(e=0;e<this._labelPaneViews.length;e++)this._labelPaneViews[e].update();this._dataWindowView.update(),null!==this._legendView&&this._legendView.update(),this._statusView.update();for(e=0;e<this._priceAxisViews.length;e++)this._priceAxisViews[e].update();this._priceLinesAxisViews.forEach((function(e){e.update()}))},Ee.prototype.tags=function(){return!this._metaInfo||!this._metaInfo.description||this._metaInfo.isTVScriptStub||this._metaInfo.is_hidden_study||this._metaInfo.isTVScript&&"tv-scripting"===this._metaInfo.productId?[]:[this._metaInfo.description]},Ee.prototype.onExtendedHoursChanged=function(){this.restart(!0)},Ee.prototype.hasSymbolInputs=function(){for(var e=this._metaInfo.inputs.length;e--;)if("symbol"===this._metaInfo.inputs[e].type)return!0;return!1},Ee.prototype.canOverrideMinTick=function(){return!1},Ee.prototype._subscribeExtendedHours=function(){!this._isSubscribedToExtendedHours&&this.hasSymbolInputs()&&(this._series.onExtendedHoursChanged().subscribe(this,this.onExtendedHoursChanged),this._isSubscribedToExtendedHours=!0)},Ee.prototype._unsubscribeExtendedHours=function(){this._isSubscribedToExtendedHours&&(this._series.onExtendedHoursChanged().unsubscribe(this,this.onExtendedHoursChanged),delete this._isSubscribedToExtendedHours)},Ee.prototype.removeByRemoveAllStudies=function(){return!0},Ee.prototype.canHaveChildren=function(){return void 0===this._canHaveChildren&&(this._canHaveChildren=!!se.canHaveChildren(this._metaInfo)),this._canHaveChildren},Ee.getInputRebindType=function(e,t,i){var r=se.isSourceInput(e);return r&&!~t.indexOf("$")&&~i.indexOf("$")?j.REBIND_STUDY_STANDALONE_TO_CHILD:r&&~t.indexOf("$")&&!~i.indexOf("$")?j.REBIND_STUDY_CHILD_TO_STANDALONE:0},Ee.prototype.getPlotFields=function(){return this._plotFields},Ee.prototype.getMinFirstBarIndexForPlot=function(e){var t=Le(this._properties.styles,e)||Le(this._properties.ohlcPlots,e)||Le(this._properties.filledAreasStyle,e);if(null===t)return-1/0;var i=this.data().lastIndex();return null===i?-1/0:i-t+1},Ee.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.resolve(null)},Ee.prototype.getPropertyDefinitionsViewModel=function(){if(null===this._definitionsViewModel){var e=this;return e._getPropertyDefinitionsViewModelClass().then((function(t){return null===t||e._isDestroyed?null:(null===e._definitionsViewModel&&(e._definitionsViewModel=new t(e._model.undoModel(),e)),e._definitionsViewModel)}))}return Promise.resolve(this._definitionsViewModel)},Ee.prototype.getInputsPropertyPage=function(){return de.StudyInputsPropertyPage},Ee.prototype.getStylesPropertyPage=function(){return de.StudyStylesPropertyPage},Ee.prototype.getDisplayPropertyPage=function(){return de.StudyDisplayPropertyPage},Ee.prototype.isPine=function(){return void 0!==this._metaInfo.pine},Ee.prototype.isStandardPine=function(){
return this.isPine()&&se.isStandardPine(this._metaInfo.id)},Ee.prototype.isLinkedToSeries=function(){return!0===this._metaInfo.linkedToSeries},Ee.prototype._getTelemetryObjectName=function(){return"study"},Ee.prototype._getTelemetryAdditionalData=function(){var e="";return this._metaInfo.pine&&this._metaInfo.pine.version&&this._metaInfo.shortId.indexOf("USER")>=0&&(e="_v"+this._metaInfo.pine.version),{symbol:this.series().actualSymbol(),resolution:this.series().interval(),study:this._metaInfo.shortId+e}},Ee.prototype._sendTelemetryReport=function(e,t,i){void 0===i&&(i=this._getTelemetryAdditionalData());var r=Object.assign(t,{additional:i});W.sendChartReport(e,r)},Ee.prototype._sendTelemetryCounter=function(e,t){this._sendTelemetryReport(e,{count:1},t)},Ee.prototype._sendTelemetryTiming=function(e,t,i){this._sendTelemetryReport(e,{value:t},i)},Ee.prototype.destroy=function(){this._isDestroyed=!0,this._legendView&&this._legendView.destroy(),null!==this._definitionsViewModel&&(this._definitionsViewModel.destroy(),this._definitionsViewModel=null),this.parentSource().formatterChanged().unsubscribe(this,this._onSourceFormatterChanged),this.parentSource().priceStepChanged().unsubscribe(this,this._onSourcePriceStepChanged),this._properties.listeners().unsubscribe(this,this.changeStyles),this._properties.visible.listeners().unsubscribe(this,this.visibleChanged),this._properties.visible.listeners().unsubscribe(this,this.processHibernate);for(var e=0;e<this._metaInfo.plots.length;e++){var t=this._metaInfo.plots[e].id,i=this.properties().styles[t];null!=i&&null!=i.visible&&i.visible.listeners().unsubscribe(this,this.processHibernate)}for(var r in this._metaInfo.graphics)for(var n in this._metaInfo.graphics[r]){var o=this._properties.graphics[r][n];o.visible&&o.visible.listeners().unsubscribe(this,this.processHibernate)}this._properties.precision.listeners().unsubscribe(this,this._precisionChanged),this._showStudyArgumentsProperty.listeners().unsubscribe(this,this.invalidateTitleCache),this._properties.description.listeners().unsubscribe(this,this.invalidateTitleCache),this._properties.shortDescription&&this._properties.shortDescription.listeners().unsubscribe(this,this.invalidateTitleCache),this._model.mainSeries().dataEvents().symbolResolved().unsubscribeAll(this),this._properties.showInDataWindow.listeners().unsubscribe(this._model,this._model.fullUpdate),this.hasBarColorer()&&this._properties.visible.listeners().unsubscribe(this._model.mainSeries(),this._model.mainSeries().invalidateBarStylesCache),this._model.mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._recreatePriceFormattingDependencies),ge.prototype.destroy.call(this)},Ee.prototype.desiredPriceScalePosition=function(){return this.metaInfo().isTVScriptStub?"overlay":this.metaInfo().linkedToSeries?"as-series":void 0===this.metaInfo().priceScale?null:["right","left","overlay"][this.metaInfo().priceScale]},Ee.prototype.guiPlotName=function(e){var t=this.properties().styles;return t&&t[e]&&t[e].title?t[e].title.value():this.title()},
Ee.prototype.defaultPlotIdForAlert=function(){return this._metaInfo.plots.length?this._metaInfo.plots[0].id:null},Ee.prototype.formatterChanged=function(){return this._formatterChanged},Ee.prototype.copiable=function(){return Ce&&!this.isChildStudy()},Ee.prototype.setPriceScale=function(e){ge.prototype.setPriceScale.call(this,e),ce.emit("study_event",this.id(),"price_scale_changed")},Ee.prototype.disconnect=function(){this._studyId=null},t.Study=Ee,t.studyLoadingStatus=Te,t.prepareStudyProperties=function(t,r,n,o,a){return function(t,r,n,o,a,l){var c=function(t,r,n,o){var a=i("K4L1");if(se.versionOf(t)<1)throw new Error("This function cannot work with metainfo of the old format version. Required format version >= 1");var l=TradingView.clone(defaults("study"));Ie(l,t);var c=se.getStudyPropertyRootName(t),u=TradingView.clone(defaults(c,o));t.isTVScript&&t.TVScriptSourceCode!==u.TVScriptSourceCode&&(u=TradingView.clone(TradingView.factoryDefaults(c,o)));TradingView.merge(l,u),r&&(s(!(r instanceof e),"propsState should not be an instance of Property"),TradingView.merge(l,r));var h=TradingView.clone(t),d={};a.mergeInputsObjPart(d,h.defaults.inputs),a.mergeInputsObjPart(d,l.inputs),l.inputs=d,delete h.inputs,delete h.defaults.inputs;var p={};if(TradingView.merge(p,h.defaults),TradingView.merge(p,TradingView.factoryDefaults(c)),TradingView.merge(p,l),TradingView.merge(p,h),delete p.defaults,l=p,null!==n){var f=n.model().studiesColorRotatorFactory().getColorRotator(t);"Overlay@tv-basicstudies"===t.id?l.lineStyle.color=f.getColor(l.lineStyle.color,t):TradingView.merge(l,function(e,t){for(var i in e.styles){var r=e.styles[i].color;r&&(e.styles[i].color=t.getColor(r))}return e}(l,f))}r&&TradingView.merge(l.styles,r.styles);return l}(t,r,n,o),u=se.getSourceInputIds(t);if(u.length>0){var h=u[0];l instanceof Ee?c.inputs[h]="{pid}$0":void 0!==c.inputs[h]&&-1!==c.inputs[h].indexOf("$")&&(c.inputs[h]="close")}return xe(t,a,c)}(t,r,n,o,se.getStudyPropertyRootName(t),a)},t.prepareStudyPropertiesForLoadChart=function(e,t,r,n,o,s){return function(e,t,r,n,o,s,a){var l=function(e,t,r,n,o){var s=i("K4L1");e.version&&r.version&&e.version!==r.version&&we.logWarn("Serialized metaInfo version "+e.version+" is not equal to the saved state version "+r.version);var a=TradingView.clone(defaults("study"));TradingView.merge(a,TradingView.factoryDefaults(se.getStudyPropertyRootName(e))),Ie(a,e),TradingView.merge(a,r),a=o.updateStudyState(a,e,t);var l=TradingView.clone(t||e);if(l&&se.versionOf(l)>=1){var c={};s.mergeInputsObjPart(c,(l.defaults||{}).inputs),s.mergeInputsObjPart(c,a.inputs),a.inputs=c,delete l.inputs,l.defaults&&delete l.defaults.inputs;var u={};TradingView.merge(u,l.defaults),TradingView.merge(u,TradingView.factoryDefaults(se.getStudyPropertyRootName(l))),TradingView.merge(u,a),delete l.defaults,TradingView.merge(u,l),a=u}return a}(e,t,r,0,o);return xe(t||e,s,l)}(e,t,r,0,o,se.getStudyPropertyRootName(e))}}).call(this,i("tc+8"),i("aIyQ"),i("Qb4w").PriceRange)},GVQo:function(e,t,i){"use strict";i.r(t),
i.d(t,"clipboardDataForSources",(function(){return l})),i.d(t,"get",(function(){return c})),i.d(t,"set",(function(){return u}));var r=i("mrSG"),n=i("Eyy1"),o=i("VVxS"),s=i("3ClC"),a=i("CW80");function l(e,t){if(1===t.length&&Object(s.isStudy)(t[0])){var i=t[0];return{title:i.title(),sources:[{source:Object(n.ensureNotNull)(i.state()),type:"study"}]}}var o={sources:[],title:""};return o.sources=t.filter((function(e){return e.copiable()&&Object(a.isLineTool)(e)})).filter(a.isLineTool).map((function(t){var i={type:"drawing",geometry:t.geometry(),source:Object(r.__assign)(Object(r.__assign)({},t.state(!1)),{points:t.normalizedPoints()}),modelId:e};return delete i.source.alertId,i})),0===o.sources.length?null:(o.sources.length&&(1===o.sources.length?o.title=t[0].title&&t[0].title():o.title="Drawings"),o)}function c(){try{return JSON.parse(o.TVLocalStorage.getItem("application-clipboard"))}catch(e){return null}}function u(e){try{o.TVLocalStorage.setItem("application-clipboard",JSON.stringify(e))}catch(t){}}},GhVi:function(e,t,i){"use strict";(function(t){function i(){this._marksByIndex={},this._marksBySpan=[],this.changed=new t}i.prototype.reset=function(){this._marksByIndex={},this._marksBySpan=[],delete this.minIndex,delete this.maxIndex,delete this._cache,this.changed.fire()},i.prototype.minIndex=void 0,i.prototype.maxIndex=void 0,i.prototype.merge=function(e){for(var t=this._marksBySpan,i={},r=0;r<e.length;r++){var n=e[r],o=n.index,s=n.span,a=this._marksByIndex[n.index];if(a){if(a.index===n.index&&a.span===n.span){a.time=n.time;continue}this._removeTickmark(a)}this._marksByIndex[o]=n,this.minIndex<=o||(this.minIndex=o),this.maxIndex>=o||(this.maxIndex=o),t[s]||(t[s]=[]),t[s].push(n),i[s]=!0}for(s=t.length;s--;)t[s]&&(t[s].length||delete t[s],i[s]&&t[s].sort(this._sortByIndexAsc));delete this._cache,this.changed.fire()},i.prototype._removeTickmark=function(e){var t=e.index;if(this._marksByIndex[t]===e){delete this._marksByIndex[t],t<=this.minIndex&&this.minIndex++,t>=this.maxIndex&&this.maxIndex--,this.maxIndex<this.minIndex&&(delete this.minIndex,delete this.maxIndex);var i=this._marksBySpan[e.span],r=i.indexOf(e);-1!==r&&i.splice(r,1)}},i.prototype._sortByIndexAsc=function(e,t){return e.index-t.index},i.prototype.removeTail=function(e){var t={};for(var i in this.maxIndex=0,this._marksByIndex)this._marksByIndex[i].time<e&&(t[i]=this._marksByIndex[i],this.maxIndex=Math.max(this.maxIndex,i));this._marksByIndex=t},i.prototype.addTail=function(e){for(var t=0;t<e.length;t++)e[t].index=this.maxIndex+t+1;this.merge(e)},i.prototype.indexToTime=function(e){var t=this._marksByIndex[e];return t?new Date(1e3*t.time):null},i.prototype.density=function(){var e=this.maxIndex-this.minIndex;if(0!==e)return 1e3*(this._marksByIndex[this.maxIndex].time-this._marksByIndex[this.minIndex].time)/e},i.prototype.estimateLeft=function(e){var t=this.density();if(t)return(1e3*this._marksByIndex[this.minIndex].time-e)/t},i.prototype.nearestIndex=function(e){for(var t=this.minIndex,i=this.maxIndex;i-t>2;){
if(1e3*this._marksByIndex[t].time===e)return t;if(1e3*this._marksByIndex[i].time===e)return i;var r=Math.round((t+i)/2);1e3*this._marksByIndex[r].time>e?i=r:t=r}return t},i.prototype.build=function(e,t){var i=Math.ceil(t/e);if(this._maxbar===i&&this._cache)return this._cache;this._maxbar=i;for(var r=[],n=this._marksBySpan.length;n--;)if(this._marksBySpan[n]){var o=r;r=[];for(var s=o.length,a=0,l=this._marksBySpan[n],c=l.length,u=1/0,h=-1/0,d=0;d<c;d++){for(var p=l[d],f=p.index;a<s;){var _=o[a],m=_.index;if(!(m<f)){u=m;break}a++,r.push(_),h=m,u=1/0}u-f>=i&&f-h>=i&&(r.push(p),h=f)}for(;a<s;a++)r.push(o[a])}return this._cache=r,this._cache},i.prototype.state=function(){for(var e=[],t=this._marksBySpan.length;t--;)this._marksBySpan[t]&&(e=e.concat(this._marksBySpan[t]));return{marks:e=e.map((function(e){return[e.span,e.time,e.index]})),version:2}},i.prototype.restoreState=function(e){if(this._marksByIndex={},this._marksBySpan=[],delete this.maxIndex,delete this.minIndex,e&&e.marks&&e.marks.length)if(2===e.version){var t=e.marks.map((function(e){return{span:e[0],time:e[1],index:e[2]}}));this.merge(t)}else this.merge(e.marks)},e.exports.Tickmarks=i}).call(this,i("aIyQ"))},GmZZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t){return e.call(this,t,0)||this}return Object(r.__extends)(t,e),t.prototype._getBgColor=function(){return this._source.properties().linecolor.value()},t.prototype._getIndex=function(){var e=this._source.points();return 0===e.length?null:e[0].index},t}(i("fJhV").LineDataSourceTimeAxisView)},"Gp/h":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'},Gvuy:function(e,t,i){"use strict";i.r(t),i.d(t,"createErrorDialog",(function(){return s})),i.d(t,"showErrorDialog",(function(){return a}));var r=i("mrSG"),n=i("YFKU"),o=i("Q1r3");function s(e){return new Promise((function(t){Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(14),i.e(26),i.e(17),i.e(24),i.e(203),i.e("create-dialog")]).then(function(s){var a,l,c,u,h,d,p=i("YDhE").createDialog;t(p(Object(r.__assign)(Object(r.__assign)({},(l=(a=e).title,c=a.content,u=a.actions,h=a.btnTitle,d=a.btnType,{title:l||Object(n.t)("Error"),content:c,addClass:o.errorDialog,destroyOnClose:!0,width:500,dataset:{"dialog-type":"error-dialog"},actions:u||[{key:[13,32],method:"close",name:"ok",text:h||Object(n.t)("OK"),type:d||"primary"}]})),{type:"modal"})))}.bind(null,i)).catch(void 0)}))}function a(e){s(e).then((function(e){return e.open()}))}},GxN8:function(e,t,i){"use strict";function r(e){return Boolean(e.showInObjectTree)}i.d(t,"a",(function(){return r}))},H0vP:function(e,t,i){"use strict";i.r(t);var r,n=i("Eyy1"),o=function(){
function e(e){void 0===e&&(e=s),this._paneInvalidationLevel=s,this._leftPriceScalesInvalidationMap=new Map,this._rightPriceScalesInvalidationMap=new Map,this._invalidationLevel=e}return e.prototype.fullInvalidation=function(){return this._invalidationLevel},e.prototype.invalidateAll=function(e){this._invalidationLevel=Math.max(this._invalidationLevel,e)},e.prototype.invalidatePane=function(e){this._paneInvalidationLevel=Math.max(this._invalidationLevel,e)},e.prototype.invalidatePriceScale=function(e,t,i){var r="left"===e?this._leftPriceScalesInvalidationMap:this._rightPriceScalesInvalidationMap,n=r.get(t)||s;r.set(t,Math.max(n,i))},e.prototype.invalidationLevelForPane=function(){return Math.max(this._paneInvalidationLevel,this._invalidationLevel)},e.prototype.getterForPriceScaleInvalidationLevelBySide=function(e){var t=this,i="left"===e?this._leftPriceScalesInvalidationMap:this._rightPriceScalesInvalidationMap;return function(e){return Math.max(i.get(e)||s,t._invalidationLevel)}},e.prototype.priceScaleSideMaxLevel=function(e){var t="left"===e?this._leftPriceScalesInvalidationMap:this._rightPriceScalesInvalidationMap,i=this._invalidationLevel;return t.size>0&&t.forEach((function(e){e>i&&(i=e)})),i},e.prototype.merge=function(e){var t=this;this._invalidationLevel=Math.max(this._invalidationLevel,e._invalidationLevel),this._paneInvalidationLevel=Math.max(this._paneInvalidationLevel,e._paneInvalidationLevel),e._leftPriceScalesInvalidationMap.forEach((function(e,i){var r=t._leftPriceScalesInvalidationMap.get(i)||s;t._leftPriceScalesInvalidationMap.set(i,Math.max(r,e))})),e._rightPriceScalesInvalidationMap.forEach((function(e,i){var r=t._rightPriceScalesInvalidationMap.get(i)||s;t._rightPriceScalesInvalidationMap.set(i,Math.max(r,e))}))},e}();i.d(t,"InvalidationLevel",(function(){return r})),i.d(t,"defaultInvalidationLevel",(function(){return s})),i.d(t,"InvalidationMask",(function(){return a})),function(e){e[e.None=0]="None",e[e.Cursor=1]="Cursor",e[e.Light=2]="Light",e[e.Full=3]="Full"}(r||(r={}));var s=r.None,a=function(){function e(e){void 0===e&&(e=s),this._panesOrderChanged=!1,this._timeAxisInvalidationLevel=s,this._invalidatedPanes=new Map,this._invalidationLevel=e}return e.prototype.invalidateAll=function(e){var t=this;this._invalidationLevel!==e&&(this._invalidationLevel=Math.max(this._invalidationLevel,e),this._invalidatedPanes.forEach((function(e){e.invalidateAll(t._invalidationLevel)})))},e.prototype.invalidateAllPane=function(e,t){this._invalidatedPanes.has(e)||this._invalidatedPanes.set(e,new o(this._invalidationLevel)),Object(n.ensureDefined)(this._invalidatedPanes.get(e)).invalidateAll(t)},e.prototype.invalidatePriceScale=function(e,t,i,r){this._invalidatedPanes.has(e)||this._invalidatedPanes.set(e,new o(this._invalidationLevel)),Object(n.ensureDefined)(this._invalidatedPanes.get(e)).invalidatePriceScale(t,i,r)},e.prototype.invalidateTimeScale=function(e){this._timeAxisInvalidationLevel=Math.max(this._timeAxisInvalidationLevel,e)},e.prototype.invalidatePanesOrder=function(){this._panesOrderChanged=!0},
e.prototype.fullInvalidation=function(){return this._invalidationLevel},e.prototype.invalidateForPane=function(e){return this._invalidatedPanes.get(e)||new o(this._invalidationLevel)},e.prototype.invalidateForTimeScale=function(){return Math.max(this._timeAxisInvalidationLevel,this._invalidationLevel)},e.prototype.merge=function(e){var t=this;this._invalidationLevel=Math.max(this._invalidationLevel,e._invalidationLevel),this._panesOrderChanged=this._panesOrderChanged||e._panesOrderChanged,e._invalidatedPanes.forEach((function(e,i){t._invalidatedPanes.has(i)||t._invalidatedPanes.set(i,new o(t._invalidationLevel)),Object(n.ensureDefined)(t._invalidatedPanes.get(i)).merge(e)})),this._timeAxisInvalidationLevel=Math.max(this._timeAxisInvalidationLevel,e._timeAxisInvalidationLevel)},e.prototype.panesOrderInvalidated=function(){return this._panesOrderChanged},e.cursor=function(){return new e(r.Cursor)},e.light=function(){return new e(r.Light)},e.full=function(){return new e(r.Full)},e.panesOrder=function(){var t=e.full();return t.invalidatePanesOrder(),t},e}()},HGP3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i("mrSG").__exportStar(i("YTCC"),t)},HL4j:function(e,t,i){"use strict";i.r(t),i.d(t,"PriceLineAxisRenderer",(function(){return a}));var r=i("Eyy1"),n=i("jFln"),o=i("8Uy/"),s=i("gAom"),a=function(){function e(e,t){this.setData(e,t)}return e.prototype.setData=function(e,t){this._data=e,this._commonData=t},e.prototype.draw=function(e,t,i,a,l,c){if(this._data.visible){var u=this._commonData.coordinate;void 0!==this._commonData.fixedCoordinate&&(u=this._commonData.fixedCoordinate),e.lineWidth=Math.max(1,Math.floor(Object(r.ensureDefined)(this._data.linewidth)*c)),e.lineCap="butt",Object(n.setLineStyle)(e,void 0===this._data.linestyle?o.LINESTYLE_DOTTED:this._data.linestyle),e.strokeStyle=this._commonData.color,Object(s.drawHorizontalLine)(e,Math.round(u*c),0,Math.ceil(a*c))}},e.prototype.height=function(e,t){return 0},e}()},HLXm:function(e,t,i){"use strict";function r(e){"LineToolGannComplex"!==e.type||void 0!==e.version&&1!==e.version||(e.type="LineToolGannFixed")}i.r(t),i.d(t,"migrateState",(function(){return r}))},"HV/F":function(e,t,i){"use strict";function r(e){var t={};return{promise:new Promise((function(i,r){e.subscribe(t,i,!0)})),destroy:function(){e.unsubscribeAll(t)}}}i.r(t),i.d(t,"delegateToPromise",(function(){return r}))},HWna:function(e,t,i){"use strict";i.r(t),i.d(t,"reconnectChartApi",(function(){return r}));i("dJ3D");function r(e){var t=window.ChartApiInstance;window.is_authenticated&&(t.disconnect(),e&&t.authTokenManager().reset(),setTimeout((function(){return t.connect()}),500))}},HZKX:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("txPx"),s=i("ogJP"),a=i("Kxc7"),l=i("7KDR"),c=i("YmeR"),u=i("Daqx"),h=i("3ClC"),d=i("QloM"),p=i("JWMC"),f=i("oR7+"),_=i("2O5g"),m=i("Qq0B"),v=i("z61+"),g=i("N22A"),y=i("YFkB")
;var b=i("mMWL"),S=i("B4/o"),w=i("ziJ5"),P=i("Fty4"),C=i("nmnj"),T=i("LBej"),x=i.n(T),I=i("hPwr"),E=i("1gmO"),L=i("Ktlt"),O=i("Ai40"),A=i("rzvv"),M=i("vKju"),k=i("+slJ"),D=i("k5SP"),R=i("PlrB"),V=i("/3z9"),B=i("L/Ed"),N=i("cKqi"),F=i("0gbU"),j=i("pvsv"),W=i("GVQo"),H=i("CW80"),U=i("/tGj");i.d(t,"createActionAddAlert",(function(){return Pt})),i.d(t,"createActionTrade",(function(){return Ct})),i.d(t,"createActionOrder",(function(){return Tt})),i.d(t,"createMTPredictorActions",(function(){return xt})),i.d(t,"createLinesAction",(function(){return It})),i.d(t,"ActionsProvider",(function(){return Lt}))
;var z=Object(o.getLogger)("Chart.ActionsProvider"),G=window.t("Add Alert"),q=window.t("Add Alert on {series}"),Y=window.t("Add Alert on {drawing}"),X=window.t("Edit {0} Alert..."),K=window.t("Extend Alert Lines"),J=window.t("Show alert label lines"),Q=window.t("Hide alert label lines"),Z=window.t("Trade"),$=window.t("Create Limit Order..."),ee=window.t("Show"),te=window.t("Hide"),ie=window.t("MTPredictor"),re=window.t("Apply Manual Risk/Reward"),ne=window.t("Apply Manual Decision Point"),oe=window.t("Analyze Trade Setup"),se=window.t("Apply Elliott Wave"),ae=window.t("Apply Elliott Wave Intermediate"),le=window.t("Apply Elliott Wave Major"),ce=window.t("Apply Elliott Wave Minor"),ue=window.t("Apply WPT Up Wave"),he=window.t("Up Wave 1 or A"),de=window.t("Up Wave 2 or B"),pe=window.t("Up Wave C"),fe=window.t("Up Wave 3"),_e=window.t("Up Wave 4"),me=window.t("Up Wave 5"),ve=window.t("Apply WPT Down Wave"),ge=window.t("Down Wave 1 or A"),ye=window.t("Down Wave 2 or B"),be=window.t("Down Wave C"),Se=window.t("Down Wave 3"),we=window.t("Down Wave 4"),Pe=window.t("Down Wave 5"),Ce=window.t("Pinned To Scale {label} (Hidden)"),Te=window.t("Pinned To Right Scale (Hidden)"),xe=window.t("Pin To Scale {label} (Hidden)"),Ie=window.t("Pin To Right Scale (Hidden)"),Ee=window.t("Pinned To Scale {label}"),Le=window.t("Pinned To Right Scale"),Oe=window.t("Pin To Scale {label}"),Ae=window.t("Pin To Right Scale"),Me=window.t("Pinned To Left Scale (Hidden)"),ke=window.t("Pin To Left Scale (Hidden)"),De=window.t("Pinned To Left Scale"),Re=window.t("Pin To Left Scale"),Ve=window.t("Pin To New Left Scale"),Be=window.t("Pin To New Right Scale"),Ne=window.t("Pin To Scale (Now {label})"),Fe=window.t("Pin To Scale (Now No Scale)"),je=window.t("Pin To Scale (Now Left)"),We=window.t("Pin To Scale (Now Right)"),He=window.t("No Scale (Fullscreen)"),Ue=window.t("Move To"),ze=window.t("Existing Pane Above"),Ge=window.t("New Pane Above"),qe=window.t("Existing Pane Below"),Ye=window.t("New Pane Below"),Xe=window.t("Bring to Front"),Ke=window.t("Send to Back"),Je=window.t("Bring Forward"),Qe=window.t("Send Backward"),Ze=window.t("Visual Order"),$e=window.t("Lines"),et=window.t("Add Indicator/Strategy on {studyTitle}..."),tt=window.t("Add Financial metric for {instrumentName}..."),it=window.t("Settings..."),rt=window.t("Apply Default"),nt=window.t("Save As..."),ot=window.t("Copy"),st=window.t("Clone"),at=window.t("Template"),lt=window.t("Sync To All Charts"),ct=window.t("Unlock"),ut=window.t("Lock"),ht=window.t("Show Earnings"),dt=window.t("Show Dividends"),pt=window.t("Show Splits"),ft=window.t("Show All Ideas"),_t=window.t("Show Ideas of Followed Users"),mt=window.t("Show My Ideas Only"),vt=window.t("Settings..."),gt=window.t("Hide Events on Chart"),yt=window.t("Add this Symbol to Entire Layout"),bt=window.t("Add this Indicator to Entire Layout"),St=window.t("Add this Strategy to Entire Layout"),wt=window.t("Add this Financial Metric to Entire Layout");function Pt(e,t){var i,o=e.model().model(),a={},c=G,u=null,d=function(e){a.series=e
},f=function(e,t){null==e||Object(s.isNaN)(e)||(c+=" ("+t.format(e)+")",a.value=e)},m=function(e){e===o.mainSeries()?u="ContextMenuSeries":Object(h.isStudy)(e)&&(u="ContextMenuStudy")};if(void 0!==t.series){var v=Object(n.ensureNotNull)(o.paneForSource(t.series));if(t.series===o.mainSeries()){var g=o.mainSeries().lastValueData(4,!0,!0);if(g&&void 0!==g.price){var y=(t.series.priceScale()||Object(n.ensureNotNull)(v.mainDataSource()).priceScale()||e.model().mainSeries().priceScale()).formatter();f(g.price,y)}}else if(Object(h.isStudy)(t.series)){c=q.format({series:t.series.title(!0)});var b=t.series.defaultPlotIdForAlert();if(null!==b){var S=t.series.lastValueData(b,!0,!0);if(S&&void 0!==S.price){y=(t.series.priceScale()||Object(n.ensureNotNull)(v.mainDataSource()).priceScale()||e.model().mainSeries().priceScale()).formatter();f(S.price,y)}}}d(t.series),m(t.series)}else if(t.e){var w=(v=Object(n.ensureDefined)(t.pane)).defaultPriceScale(),P=Object(n.ensureNotNull)(v.mainDataSource()),C=P.firstValue();if(null===C)return null;f(w.coordinateToPrice(t.e.localY,C),y=P.formatter()),d(P),m(P)}else t.drawing&&(c=Y.format({drawing:t.drawing.title()}),i=t.drawing,a={drawing:i},u="ContextMenuDrawing");return c+="…",new l.ActionAsync((function(){return(a.series?Object(k.b)(a.series):Promise.resolve(!0)).then((function(e){var t={label:c,icon:A,statName:"AddAlert"};return e?Object(r.__assign)(Object(r.__assign)({},t),{shortcutHint:Object(V.humanReadableHash)(V.Modifiers.Alt+65),onExecute:function(){null!==u&&(Object(p.trackEvent)("GUI","CreateAlert",u),u=null),window.runOrSignIn((function(){Object(_.invokeAlertEditorWithOnlineSeries)(Object(r.__assign)(Object(r.__assign)({},a),{dataSourceHub:o,actionSource:"pane_context_menu_add_alert"}))}),{source:"Alert add from pane context menu",sourceMeta:"Chart"})}}):Object(r.__assign)(Object(r.__assign)({},t),{disabled:!0})}))}))}function Ct(e,t,i){return new l.ActionAsync((function(){return function(e,t,i){return void 0===i&&(i="promise rejected by time-out"),new Promise((function(r,n){var o=setTimeout((function(){return n(i)}),t);e.then((function(e){clearTimeout(o),r(e)})),e.catch((function(e){clearTimeout(o),n(e)}))}))}(new Promise((function(t,r){var n=Object(g.tradingService)();if(null!==n&&0!==n.brokersList().length){var o,s=e.model().mainSeries();i&&(o=i.localY),Object(y.a)(s,o).then((function(e){try{return n.chartContextMenuActions(e)}catch(i){return z.logError(i.message),[]}})).then((function(e){0!==e.length?t({name:"trade",label:Z,subItems:e,statName:"Trading"}):t({label:Z,disabled:!0})})).catch((function(){r("Unable to get Trade Context")}))}else t({label:Z,disabled:!0})})),2e3,"Action trade not received")}))}function Tt(e){var t=Object(n.ensureNotNull)(Object(g.tradingService)());return new l.Action({label:$,statName:"CreateLimitOrder",onExecute:function(){t.trackEvent("Chart Context Menu","RiskRewardCreateLimitOrder"),Object(n.ensureNotNull)(t.brokerCommandsUI()).placeOrder(e)}})}function xt(e,t,i,r){var o=function(o,s,a){return new l.Action({label:o,onExecute:function(){
var o=e.model(),l=o.model().timeScale(),c=t.defaultPriceScale();if(!l.isEmpty()&&!c.isEmpty())if(a&&void 0!==i&&void 0!==r){var u=Object(n.ensureNotNull)(Object(n.ensureNotNull)(t.mainDataSource()).firstValue()),h=c.coordinateToPrice(i,u),d=Math.round(l.coordinateToIndex(r));o.createLineTool(t,{index:d,price:h},s,void 0)}else b.tool.setValue(s)}})};return new l.Action({label:ie,subItems:[o(re,"LineStudyMtpRiskReward",!1),o(ne,"LineStudyMtpDecisionPoint",!0),o(oe,"LineStudyMtpAnalysis",!0),new l.Action({label:se,subItems:[o(ae,"LineStudyMtpElliotWaveMain",!0),o(le,"LineStudyMtpElliotWaveMajor",!0),o(ce,"LineStudyMtpElliotWaveMinor",!0)]}),new l.Action({label:ue,subItems:[o(he,"LineStudyMtpUpWave1OrA",!1),o(de,"LineStudyMtpUpWave2OrB",!1),o(pe,"LineStudyMtpUpWaveC",!1),o(fe,"LineStudyMtpUpWave3",!1),o(_e,"LineStudyMtpUpWave4",!1),o(me,"LineStudyMtpUpWave5",!1)]}),new l.Action({label:ve,subItems:[o(ge,"LineStudyMtpDownWave1OrA",!1),o(ye,"LineStudyMtpDownWave2OrB",!1),o(be,"LineStudyMtpDownWaveC",!1),o(Se,"LineStudyMtpDownWave3",!1),o(we,"LineStudyMtpDownWave4",!1),o(Pe,"LineStudyMtpDownWave5",!1)]})]})}function It(e){var t=e.actions(),i=[t.showPriceLine];return i.push(t.showSeriesPrevCloseLine),i.push(t.showPrePostMarketPriceLine),e.model().model().hasCustomSource("bidask")&&i.push(t.showBidAskLines),new l.Action({label:$e,statName:"Lines",subItems:i})}function Et(e,t){return void 0===e||e[t]}var Lt=function(){function e(e,t){this._chartWidget=e,this._options=t}return e.prototype.contextMenuActionsForSources=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,i,n;return Object(r.__generator)(this,(function(r){return t=e[0],i=this._options,t===this._chartWidget.model().mainSeries()&&Et(i,"mainSeries")?[2,this._contextMenuActionsForSeries(t)]:t instanceof O.ESDStudyBase&&Et(i,"esdStudies")?[2,this._contextMenuActionsForESD()]:Object(h.isStudy)(t)&&Et(i,"studies")?[2,this._contextMenuActionsForStudy(t)]:t instanceof x.a&&Et(i,"publishedCharts")?[2,this._contextMenuActionsForPublishedTimeline(t)]:(t instanceof S.LineToolOrder||t instanceof w.LineToolPosition)&&Et(i,"ordersAndPositions")?[2,this._contextMenuActionsForTradingDrawings(t)]:t instanceof E.AlertLabel&&t.alert().id&&Et(i,"alerts")?[2,this._contextMenuActionsForAlertLabel(t)]:Object(H.isLineTool)(t)&&Et(i,"lineTools")?(n=e.filter(H.isLineTool),[2,this._contextMenuActionsForLineTool(n)]):t instanceof L.ChartEventsSource&&Et(i,"chartEvents")?[2,this._contextMenuActionsForChartEvents(t)]:[2,[]]}))}))},e.prototype._isReadOnly=function(){return this._chartWidget.readOnly()},e.prototype._createActionHide=function(e){return new l.Action({label:te,icon:i("DYI2"),statName:"HideSelectedObject",onExecute:this._chartWidget.hideDataSources.bind(this._chartWidget,[e])})},e.prototype._createActionShow=function(e){var t=new l.Action({checkable:!0,label:ee,icon:i("6ctS"),statName:"ToggleShow"}),r=new c.ActionBinder(t,e.properties().visible,this._chartWidget.model(),ee);return t.setBinding(r),r.setValue(e.properties().visible.value()),t},
e.prototype._createActionScale=function(e){var t=Object(n.ensureNotNull)(e.priceScale()),r=this._chartWidget.model().model(),o=Object(n.ensureNotNull)(r.paneForSource(e)),s=o.priceScalePosition(t),a=("left"===s?o.leftPriceScales():o.rightPriceScales()).indexOf(t),c=r.priceScaleSlotsCount().totallySlots<2?"dontneedname":"needname",h="overlay"===s?"":Object(u.a)(s,a).label,d=Ne.format({label:h}),p={"left-needname":d,"left-dontneedname":je,"right-needname":d,"right-dontneedname":We,"overlay-needname":Fe,"overlay-dontneedname":Fe}[s+"-"+c];return new l.Action({label:p,icon:i("/kal"),subItems:this._createActionScaleItems(e)})},e.prototype._createActionScaleDetach=function(e,t,i,r){var o=this._chartWidget.model().model(),s=Object(n.ensureNotNull)(o.paneForSource(e));if(!s.canCreateNewPriceScale())return null;var a=Object(n.ensureNotNull)(e.priceScale()),c=a.canDetachSource(e),h=s.priceScalePosition(a),d=c||h!==t;if(!d)return null;var p=o.priceScaleSlotsCount(),f={left:{labelled:Oe,sided:Ve},right:{labelled:Oe,sided:Be}},_="left"===t?s.leftPriceScales().length:s.rightPriceScales().length,m=p[t]>_?"labelled":"sided",v=Object(u.a)(t,_).label,g=f[t][m].format({label:v});return new l.Action({checkable:!1,disabled:!d,label:g,statName:r,payload:e,onExecute:i})},e.prototype._onDetachLeft=function(e){var t=e.getPayload(),i=this._chartWidget.model().model(),r=Object(n.ensureNotNull)(i.paneForSource(t));this._chartWidget.model().detachToLeft(t,r)},e.prototype._onDetachRight=function(e){var t=e.getPayload(),i=this._chartWidget.model().model(),r=Object(n.ensureNotNull)(i.paneForSource(t));this._chartWidget.model().detachToRight(t,r)},e.prototype._createActionScaleDetachLeft=function(e){return this._createActionScaleDetach(e,"left",this._onDetachLeft.bind(this),"ToggleScaleLeft")},e.prototype._createActionScaleDetachRight=function(e){return this._createActionScaleDetach(e,"right",this._onDetachRight.bind(this),"ToggleScaleRight")},e.prototype._onMoveToScale=function(e){var t=e.getPayload();if(t.datasource.priceScale()!==t.priceScale){var i=this._chartWidget.model().model(),r=Object(n.ensureNotNull)(i.paneForSource(t.datasource));this._chartWidget.model().moveToScale(t.datasource,r,t.priceScale,t.undoText)}},e.prototype._createMoveToScaleAction=function(e,t,i,r){var n=e.priceScale()===t;return new l.Action({checkable:!0,checked:n,label:i,statName:"ToggleScale",payload:{datasource:e,priceScale:t,undoText:r},onExecute:this._onMoveToScale.bind(this)})},e.prototype._onNoScale=function(e){var t=e.getPayload().datasource,i=this._chartWidget.model().model(),r=Object(n.ensureNotNull)(i.paneForSource(t));r.isOverlay(t)||this._chartWidget.model().detachNoScale(t,r)},e.prototype._createActionNoScale=function(e){var t=this._chartWidget.model().model(),i=Object(n.ensureNotNull)(t.paneForSource(e)),r=i.actionNoScaleIsEnabled(e);return new l.Action({checkable:!0,checked:i.isOverlay(e),label:He,disabled:!r,statName:"ToggleNoScale",payload:{datasource:e},onExecute:this._onNoScale.bind(this)})},e.prototype._createActionScaleItems=function(e){
var t=this,i=[],r=this._chartWidget.model().model(),o=Object(n.ensureNotNull)(r.paneForSource(e)),s=r.priceScaleSlotsCount().totallySlots>1,a=o.rightPriceScales(),c=o.leftPriceScales(),h=this._createActionScaleDetachRight(e),d=this._createActionScaleDetachLeft(e),p=a.length+c.length+(null===h?0:1)+(null===d?0:1)>2,f={right:{hidden:{checked:{labelled:Ce,sided:Te},unchecked:{labelled:xe,sided:Ie}},visible:{checked:{labelled:Ee,sided:Le},unchecked:{labelled:Oe,sided:Ae}}},left:{hidden:{checked:{labelled:Ce,sided:Me},unchecked:{labelled:xe,sided:ke}},visible:{checked:{labelled:Ee,sided:De},unchecked:{labelled:Oe,sided:Re}}}},_={left:o.visibleLeftPriceScales(),right:o.visibleRightPriceScales()},m=function(t,i){var r=("right"===i?a:c)[t],n=_[i].includes(r)?"visible":"hidden",o=e.priceScale()===r?"checked":"unchecked",l=s?"labelled":"sided",h=f[i],d={labelled:h.visible.unchecked.labelled,sided:h.visible.unchecked.sided},p=Object(u.a)(i,t).label;return{actionText:h[n][o][l].format({label:p}),undoText:d[l].format({label:p})}};return i.push.apply(i,a.map((function(i,r){var n=m(r,"right");return t._createMoveToScaleAction(e,i,n.actionText,n.undoText)}))),null!==h&&i.push(h),p&&(a.length>0||null!==h)&&i.push(new l.Separator),i.push.apply(i,c.map((function(i,r){var n=m(r,"left");return t._createMoveToScaleAction(e,i,n.actionText,n.undoText)}))),null!==d&&i.push(d),p&&(c.length>0||null!==d)&&i.push(new l.Separator),i.push(this._createActionNoScale(e)),i},e.prototype._createVisualOrderAction=function(e){var t=this._chartWidget.model(),r=t.availableZOrderOperations(e),n=[new l.Action({label:Xe,statName:"BringToFront",disabled:!r.bringToFrontEnabled,onExecute:function(){return t.bringToFront(e)}}),new l.Action({label:Ke,statName:"SendToBack",disabled:!r.sendToBackEnabled,onExecute:function(){return t.sendToBack(e)}}),new l.Action({label:Je,statName:"BringForward",disabled:!r.bringForwardEnabled,onExecute:function(){return t.bringForward(e)}}),new l.Action({label:Qe,statName:"SendBackward",disabled:!r.sendBackwardEnabled,onExecute:function(){return t.sendBackward(e)}})];return new l.Action({label:Ze,icon:i("9dnG"),statName:"VisualOrder",subItems:n})},e.prototype._createActionMergeUp=function(e){var t=this._chartWidget.model();return t.model().isMergeUpAvailableForSource(e)?new l.Action({label:ze,statName:"MergeUp",onExecute:function(){return t.mergeSourceUp(e)}}):null},e.prototype._createActionUnmergeUp=function(e){var t=this._chartWidget.model();return t.model().isUnmergeAvailableForSource(e)?new l.Action({label:Ge,statName:"UnmergeUp",onExecute:function(){return t.unmergeSourceUp(e)}}):null},e.prototype._createActionMergeDown=function(e){var t=this._chartWidget.model();return t.model().isMergeDownAvailableForSource(e)?new l.Action({label:qe,statName:"MergeDown",onExecute:function(){return t.mergeSourceDown(e)}}):null},e.prototype._createActionUnmergeDown=function(e){var t=this._chartWidget.model();return t.model().isUnmergeAvailableForSource(e)?new l.Action({label:Ye,statName:"UnmergeDown",onExecute:function(){
return t.unmergeSourceDown(e)}}):null},e.prototype._mergeContentMenuItems=function(e){return[this._createActionMergeUp(e),this._createActionUnmergeUp(e),this._createActionMergeDown(e),this._createActionUnmergeDown(e)].filter(s.notNull)},e.prototype._createActionMove=function(e){var t=this._mergeContentMenuItems(e);return t.length>0?new l.Action({label:Ue,icon:i("BBCR"),subItems:t}):null},e.prototype._contextMenuActionsForSeries=function(e){var t=[],i=e.properties().visible.value(),r=this._chartWidget.model().model(),o=Object(n.ensureNotNull)(r.paneForSource(e)),s=this._chartWidget.actions();if(this._isReadOnly())t.push(i?this._createActionHide(e):this._createActionShow(e)),t.push(new l.Separator),t.push(this._createActionScale(e));else{if(e.hasStateForAlert()){var c=Pt(this._chartWidget,{series:e});null!==c&&t.push(c)}if(t.push(this._createActionAddChildStudy(e)),Et(this._options,"fundamentals")){var u=this._createActionAddFundamentals(e);null!==u&&t.push(u)}Et(this._options,"mainSeriesTrade")&&t.push(Object(n.ensureNotNull)(Ct(this._chartWidget))),t.length>0&&!(t[t.length-1]instanceof l.Separator)&&t.push(new l.Separator),a.enabled("symbol_info")&&t.push(s.showSymbolInfoDialog),t.length>0&&!(t[t.length-1]instanceof l.Separator)&&t.push(new l.Separator),t.push(this._createVisualOrderAction([e]));var h=this._createActionMove(e);null!==h&&t.push(h),t.push(this._createActionScale(e)),t.push(i?this._createActionHide(e):this._createActionShow(e)),t.push(new l.Separator),t.push(It(this._chartWidget)),t.push(new l.Separator),window.widgetbar&&(!window.widgetbar._customization||window.widgetbar._customization.watchlist)&&s.addToWatchlist&&t.push(s.addToWatchlist),a.enabled("text_notes")&&t.push(s.addToTextNotes),t[t.length-1]instanceof l.Separator||t.push(new l.Separator),window.pro&&window.pro.hasPackage("mtp-mtpredictor")&&t.push(Object(n.ensureNotNull)(xt(this._chartWidget,o)),new l.Separator),a.enabled("show_chart_property_page")&&!this._chartWidget.onWidget()&&t.push(s.mainSeriesPropertiesAction),t[t.length-1]instanceof l.Separator&&t.pop()}return t},e.prototype._createActionAddChildStudy=function(e){var t=this,r=this._chartWidget.model().model();return new l.Action({label:et.format({studyTitle:e.title(!0)}),icon:i("CwKc"),statName:"ApplyIndicator",onExecute:function(){var i=t._chartWidget.showIndicators(Object(h.isStudy)(e)?e:void 0);if(i&&Object(h.isStudy)(e)){var n=function(){Object(p.trackEvent)("SOS","Apply SOS","Apply by RC menu")},o=r.studyInserted();o.subscribe(t,n),i.visibilityChanged.subscribe(t,(function(e){e||o.unsubscribe(t,n)}),!0)}}})},e.prototype._createActionAddFundamentals=function(e){var t=this,r=e.symbolInfo();return null===r||"forex"===r.type||"crypto"===r.type||"bitcoin"===r.type?null:new l.Action({label:tt.format({instrumentName:e.title(!0)}),icon:i("35Sq"),statName:"ApplyFundamental",onExecute:function(){t._chartWidget.showFundamentals(e!==t._chartWidget.model().mainSeries()?e:void 0)}})},e.prototype._createActionShowSymbolInfoDialog=function(e){return new l.Action({
label:window.t("Symbol Info..."),icon:i("1pHB"),checkable:!1,statName:"SymbolInfo",onExecute:function(){var t=e.symbol(),i=e.symbolInfo();Object(j.showSymbolInfoDialog)(t,{symbolInfo:i})}})},e.prototype._createActionShowProperties=function(e){var t=this;return new l.Action({label:it,icon:i("MXV9"),statName:"EditSelectedObject",onExecute:function(){return t._chartWidget.showSourceProperties(e)}})},e.prototype._contextMenuActionsForStudy=function(e){var t=this,i=this._chartWidget.actions(),r=e.properties().visible.value(),n=[];if(!e.userEditEnabled())return n;if(this._chartWidget.readOnly())n.push(r?this._createActionHide(e):this._createActionShow(e)),n.push(new l.Separator),e.constructor instanceof m.NonSeriesStudy||n.push(this._createActionScale(e));else{if(e.hasStateForAlert()){var o=Pt(this._chartWidget,{series:e});null!==o&&n.push(o)}if(a.enabled("study_on_study")&&e.canHaveChildren()&&n.push(this._createActionAddChildStudy(e)),(e instanceof F.study_Compare||e instanceof N.study_Overlay)&&Et(this._options,"fundamentals")){var s=this._createActionAddFundamentals(e);null!==s&&n.push(s)}var c=this._createApplyToEntireLayoutCommand(e);if(null!==c&&n.push(c),n.length>0&&!(n[n.length-1]instanceof l.Separator)&&n.push(new l.Separator),a.enabled("symbol_info")&&(e instanceof F.study_Compare||e instanceof N.study_Overlay)&&null!==e.symbolInfo()&&(n.push(this._createActionShowSymbolInfoDialog(e)),n.push(new l.Separator)),n.push(this._createVisualOrderAction([e])),!(e.constructor instanceof m.NonSeriesStudy)){var u=this._createActionMove(e);null!==u&&n.push(u),n.push(this._createActionScale(e))}n.push(new l.Separator);var h=e.metaInfo();if(h.pine&&i.viewSourceCode&&(n.push(i.viewSourceCode),i.viewSourceCode.update({disabled:!1}),Object(C.isAuthToGetPineSourceCode)(h.scriptIdPart,h.pine.version).done((function(e){e||i.viewSourceCode.update({disabled:!0})})).fail((function(e){z.logError("Failed isAuthToGetPineSourceCode, reason: "+e)}))),n[n.length-1]instanceof l.Separator||n.push(new l.Separator),e.copiable()){var d=new l.Action({label:ot,shortcutHint:Object(V.humanReadableHash)(V.Modifiers.Mod+67),statName:"Copy",onExecute:function(){t._chartWidget.onAppClipboardCopy([e])}});n.push(d)}n.push(r?this._createActionHide(e):this._createActionShow(e)),n.push(i.studyRemove),this._chartWidget.onWidget()||(n.push(new l.Separator),Et(this._options,"objectTree")&&i.paneObjectTree&&n.push(i.paneObjectTree)),n.push(new l.Separator),a.enabled("property_pages")&&new v.a(h).hasUserEditableOptions()&&n.push(this._createActionShowProperties(e)),n[n.length-1]instanceof l.Separator&&n.pop()}return n},e.prototype._createEditAlertDrawingAction=function(e){return new l.Action({label:X.format(e.title()),icon:M,statName:"EditAlert",onExecute:function(){window.runOrSignIn((function(){e.editAlert("pane_context_menu_edit_alert")}),{source:"Alert edit from pane context menu"})}})},e.prototype._createLineToolTemplateAction=function(e){var t=this;if(!window.lineToolPropertiesToolbar)return null;var i=window.lineToolPropertiesToolbar.templatesList()
;return void 0===i?null:new l.ActionAsync((function(){var r=[],n=new l.Action({label:nt,statName:"SaveAs",onExecute:function(){i.showSaveDialog((function(t){var r=JSON.stringify(e.template());i.saveTemplate(t,r)}))}});r.push(n);var o=new l.Action({label:rt,statName:"ApplyDefault",onExecute:function(){t._chartWidget.model().restorePropertiesForSource(e),window.lineToolPropertiesToolbar.onSourceChanged(e)}});return r.push(o),new Promise((function(e){i.templatesLoaded().then((function(){var e=i.getData();e.length>0&&r.push(new l.Separator),e.forEach((function(e,t){var n=new l.Action({label:e,statName:"ApplyTemplate",onExecute:function(){return i.loadTemplate(e)},toolbox:{type:B.ToolboxType.Delete,action:function(){i.deleteAction(e)}},showToolboxOnHover:!0});r.push(n)}))}),(function(e){z.logWarn(e)})).then((function(){e({label:at,statName:"Template",subItems:r})}))}))}))},e.prototype._createActionToggleLockObject=function(e){var t=this,r=e.properties().frozen.value();return new l.Action({label:r?ct:ut,statName:"ToggleLockSelectedObject",checkable:!0,icon:i(r?"fs3R":"qckB"),onExecute:function(){return t._chartWidget.toggleLockSelectedObject()}})},e.prototype._contextMenuActionsForLineTool=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,o,s,c,u,h,d,p,f,_,m,v,y,b=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=[],n=this._chartWidget.actions(),o=this._chartWidget.model().model(),s=function(){t.push(b._createVisualOrderAction(e))},c=function(){var r=e.filter((function(e){return e.cloneable()}));if(r.length>0){var n=new l.Action({label:st,icon:i("K8V9"),shortcutHint:Object(V.humanReadableModifiers)(V.Modifiers.Mod)+"Drag",doNotBindShortcut:!0,statName:"Clone",onExecute:function(){return b._chartWidget.model().cloneLineTools(r,!1)}},"Clone");t.push(n)}return!!r.length},u=function(){var i=e.filter((function(e){return e.copiable()}));if(i.length>0){var r=new l.Action({label:ot,shortcutHint:Object(V.humanReadableHash)(V.Modifiers.Mod+67),statName:"Copy",onExecute:function(){return b._chartWidget.onAppClipboardCopy(i)}},"Copy");t.push(r)}return!!i.length},h=function(){if(a.enabled("support_multicharts")&&b._chartWidget.isMultipleLayout()&&e.some((function(e){return e.isSynchronizable()}))){var i=new l.Action({label:lt,statName:"SyncDrawingToAllCharts",checkable:!0,checked:e.some((function(e){return!!e.getLinkKey()})),onExecute:function(e){var t;b._chartWidget.chartWidgetCollection()&&(t=b._chartWidget.chartWidgetCollection().activeChartWidget.value()),t||(t=b._chartWidget),e.isChecked()?t.copyLineToOtherCharts():t.unlinkSelectedLine()}});return t.push(i),!0}return!1},d=function(e){var i=Object(g.tradingService)();if(null!==i){var r=i.activeBroker();if(null!==r&&1===r.connectionStatus()&&r.metainfo().configFlags.supportLimitOrders){var n=e.getOrderTemplate();if(null!==n){var s=o.mainSeries();n.symbol=s.proSymbol(),t.push(new l.Separator),t.push(Tt(n))}}}},1!==e.length?[3,4]:(p=e[0],this._chartWidget.readOnly()?(t.push(n.lineHide),[3,3]):[3,1]);case 1:
return p.userEditEnabled()?(a.enabled("alerts")&&!this._chartWidget.onWidget()&&(p.hasAlert&&p.hasAlert.value()?(t.push(this._createEditAlertDrawingAction(p)),t.push(new l.Separator)):p.canHasAlert()&&(null!==(f=Pt(this._chartWidget,{drawing:p}))&&t.push(f),t.push(new l.Separator))),a.enabled("charting_library_base")||null!==(_=this._createLineToolTemplateAction(p))&&t.push(_),s(),Et(this._options,"objectTree")&&n.paneObjectTree&&t.push(n.paneObjectTree),d(p),t.push(new l.Separator),m=c(),m=u()||m,(m=h()||m)&&t.push(new l.Separator),t.push(this._createActionToggleLockObject(p)),t.push(n.lineHide),t.push(n.lineRemove),t.push(new l.Separator),[4,this._chartWidget.propertiesDefinitionsForSource(p)]):[3,3];case 2:v=r.sent(),a.enabled("property_pages")&&(null!==v||Object(H.isMTPredictionTool)(p))&&t.push(n.format),p.additionalActions&&(t.push(new l.Separator),y=p.additionalActions(this._chartWidget.model()),t.push.apply(t,y)),r.label=3;case 3:return[3,5];case 4:Et(this._options,"objectTree")&&n.paneObjectTree&&t.push(n.paneObjectTree),s(),t.push(new l.Separator),c(),u(),h(),t.push(new l.Separator),t.push(n.lineHide),t.push(n.lineRemove),r.label=5;case 5:return[2,t]}}))}))},e.prototype._createEarningsShow=function(){var e=this;var t=this._chartWidget.model().mainSeries().properties().esdShowEarnings;return new l.Action({label:ht,checkable:!0,checked:t.value(),statName:"ToggleShowEarnings",onExecute:function(i){return e._chartWidget.model().setProperty(t,i.isChecked(),ht)}})},e.prototype._createDividendsShow=function(){var e=this;var t=this._chartWidget.model().mainSeries().properties().esdShowDividends;return new l.Action({label:dt,checkable:!0,checked:t.value(),statName:"ToggleShowDividends",onExecute:function(i){return e._chartWidget.model().setProperty(t,i.isChecked(),dt)}})},e.prototype._createSplitsShow=function(){var e=this;var t=this._chartWidget.model().mainSeries().properties().esdShowSplits;return new l.Action({checkable:!0,label:pt,checked:t.value(),statName:"ToggleShowSplits",onExecute:function(i){return e._chartWidget.model().setProperty(t,i.isChecked(),pt)}})},e.prototype._contextMenuActionsForESD=function(){var e=[];return this._chartWidget.readOnly()||e.push(Object(n.ensureNotNull)(this._createDividendsShow()),Object(n.ensureNotNull)(this._createSplitsShow()),Object(n.ensureNotNull)(this._createEarningsShow())),e},e.prototype._contextMenuActionsForPublishedTimeline=function(e){var t=this,i=this._chartWidget.actions(),r=[];if(r.push(i.lineHide),window.is_authenticated){var n=e.properties().filter,o=new l.Action({checked:n.value()===I.PublishedChartsFilter.None,checkable:!0,label:ft,statName:"ToggleAllIdeas",onExecute:function(){return t._chartWidget.model().setProperty(n,I.PublishedChartsFilter.None,ft)}}),s=new l.Action({checked:n.value()===I.PublishedChartsFilter.Following,checkable:!0,label:_t,statName:"ToggleIdeasOfPeopleAndUser",onExecute:function(){return t._chartWidget.model().setProperty(n,I.PublishedChartsFilter.Following,_t)}}),a=new l.Action({checked:n.value()===I.PublishedChartsFilter.Private,
checkable:!0,label:mt,statName:"ToggleUserIdeas",onExecute:function(){return t._chartWidget.model().setProperty(n,I.PublishedChartsFilter.Private,mt)}});r.push(new l.Separator,o,s,a)}return r},e.prototype._contextMenuActionsForTradingDrawings=function(e){return e.contextMenuItems()},e.prototype._createAlertToggleHorzLineLabelAction=function(e){var t=this,i=Object(f.getSettingsProperty)().childs().line.childs().visible,r=i.value()?Q:J;return new l.Action({checkable:!0,label:K,checked:i.value(),statName:"ToggleExtendAlertLine",onExecute:function(){return t._chartWidget.model().setProperty(i,!i.value(),r)}})},e.prototype._contextMenuActionsForAlertLabel=function(e){var t=e.alert(),i=[];return t.get("active")?i.push(P.ActionCreators.stopAlert(t)):i.push(P.ActionCreators.restartAlert(t,"alert_label_context_menu_restart")),i.push(P.ActionCreators.editAlert(t,"alert_label_context_menu_edit")),i.push(P.ActionCreators.deleteAlert(t)),i.push(new l.Separator),i.push(this._createAlertToggleHorzLineLabelAction(e)),i},e.prototype._contextMenuActionsForChartEvents=function(e){var t=this,i=[];if(a.enabled("property_pages")){var r=new l.Action({label:vt,statName:"Format",onExecute:function(){return t._chartWidget.showGeneralChartProperties(d.TabNames.eventsAndAlerts)}});i.push(r)}var n=new l.Action({label:gt,statName:"HideEvents",onExecute:function(){return t._chartWidget.model().setProperty(e.properties().visible,!1,gt)}});return i.push(n),i},e.prototype._createApplyToEntireLayoutCommand=function(e){var t=this;if(!this._chartWidget.chartWidgetCollection().applyIndicatorsToAllChartsAvailable())return null;var i=this._chartWidget.model().model();if(e.parentSource()!==i.mainSeries())return null;var r=Object(n.ensureNotNull)(i.paneForSource(e)),o=i.paneForSource(i.mainSeries())===r,s=e instanceof F.study_Compare&&e.priceScale()===i.mainSeries().priceScale()&&Object(n.ensureNotNull)(e.priceScale()).isPercentage(),a=o?void 0:i.panes().indexOf(r),c=bt,u="AddStudyToEntireLayout";return Object(U.isSymbolSource)(e)&&(c=yt,u="AddSymbolToEntireLayout"),e instanceof D.StudyStrategy&&(c=St,u="AddStrategyToEntireLayout"),e instanceof R.a&&(c=wt,u="AddFundamentalToEntireLayout"),new l.Action({label:c,statName:u,onExecute:function(){var r=Object(n.ensureNotNull)(Object(W.clipboardDataForSources)(i.id(),[e])),l=t._chartWidget.chartWidgetCollection(),u={isOnMainPane:o,asCompare:s,paneIndex:a};l.applyIndicatorToAllCharts(t._chartWidget,r,u,c)}},"applyStudyToEntireLayout")},e}()},HbRj:function(e,t,i){"use strict";i.r(t);var r=i("ogJP"),n=/{(\w+)}/g,o=/{(\d+)}/g;String.prototype.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Object(r.isObject)(e[0]),s=i?n:o,a=i?function(t,i){var r=e[0];return void 0!==r[i]?r[i]:t}:function(t,i){var r=parseInt(i,10),n=e[r];return void 0!==n?n:t};return this.replace(s,a)}},Hm6r:function(e,t,i){"use strict";i.r(t),i.d(t,"CrosshairTimeAxisView",(function(){return o}));var r=i("mrSG"),n=i("cgFQ"),o=function(e){function t(t,i,r){void 0===r&&(r=!1);var n=e.call(this,t)||this
;return n._indexProvider=i,n._highlighted=r,n}return Object(r.__extends)(t,e),t.prototype._getBgColor=function(){return this._highlighted?this._model.isDark()?"#1E88E5":"#2196F3":"#4c525e"},t.prototype._getIndex=function(){return this._model.crossHairSource().visible?this._indexProvider():null},t}(n.a)},Hpjb:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r=new(function(){function e(){this._invokedAlertEditors=new Set}return e.prototype.isAllowedToInvoke=function(e){return e.silent||!this._invokedAlertEditors.has(n(e))},e.prototype.lockInvocation=function(e){var t=this;if(e.silent)return function(){};var i=n(e);return this._invokedAlertEditors.add(i),function(){t._invokedAlertEditors.delete(i)}},e}());function n(e){var t;return(null===(t=e.alert)||void 0===t?void 0:t.id)||-1}},Hr11:function(e,t,i){"use strict";function r(e,t){return e<=t}function n(e,t){return e>=t}function o(e,t,i){return Math.min(Math.max(e,t),i)}function s(e){return e<0?-1:e>0?1:0}function a(e){if(e<0)return!1;for(var t=e;t>1;t/=10)if(t%10!=0)return!1;return!0}function l(e,t,i){return t-e<=i}function c(e,t,i){return Math.abs(e-t)<i}function u(e){return e<=0?NaN:Math.log(e)/Math.log(10)}function h(e,t){return e<t?-1:e>t?1:0}function d(e,t){if(void 0===t&&(t=h),e.length<1)throw Error("array is empty");for(var i=e[0],r=0;r<e.length;++r)t(e[r],i)<0&&(i=e[r]);return i}function p(e,t){if(void 0===t&&(t=h),e.length<1)throw Error("array is empty");for(var i=e[0],r=0;r<e.length;++r)t(e[r],i)>0&&(i=e[r]);return i}function f(e){var t=Math.ceil(e);return t%2!=0?t-1:t}i.r(t),i.d(t,"lessThan",(function(){return r})),i.d(t,"greaterThan",(function(){return n})),i.d(t,"clamp",(function(){return o})),i.d(t,"sign",(function(){return s})),i.d(t,"isBaseDecimal",(function(){return a})),i.d(t,"greaterOrEqual",(function(){return l})),i.d(t,"equal",(function(){return c})),i.d(t,"log10",(function(){return u})),i.d(t,"defComparator",(function(){return h})),i.d(t,"min",(function(){return d})),i.d(t,"max",(function(){return p})),i.d(t,"ceiledEven",(function(){return f}))},HwbS:function(e,t,i){"use strict";var r=i("BHQF").fetch,n=i("fsuG").visitPaymentPage,o=i("T7XC").BillingCycle,s=i("aIyQ");function a(e){if(this._freeProductIds=["tv-scripting","tv-basicstudies","tv-prostudies","Script$USER","Script$EDGR","ESD$TV"],this.packagesUpdated=new s,!e)return this._products=this._discounts={},void(this._offers=this._order=[]);this._products={},this._discounts={},this._offers=e.offers,this._order=[],this._invalidShopConf=!0,"undefined"!=typeof window&&window.loginStateChange.subscribe(this,this.onLoginStateChange)}i("NhhI"),a.prototype.PRODUCT_TYPES={pro_plan:1,study_package:2,news_feed:3,exchange:4,connection:6,coins:8},a.prototype.updateShopConf=function(e){return this._shopConfPromise||(this._shopConfPromise=r("/market/shopconf/",{credentials:"include"}).then((function(e){return e.json()})).then(function(t){this._products=t.all_products&&JSON.parse(t.all_products)||{},this._discounts=t.discounts&&JSON.parse(t.discounts)||{},
this._offers=t.offers&&JSON.parse(t.offers)||[],this._order=t.order&&JSON.parse(t.order)||[],this._invalidShopConf=!1,delete this._shopConfPromise,e||this.packagesUpdated.fire()}.bind(this)).catch(function(){delete this._shopConfPromise}.bind(this))),this._shopConfPromise},a.prototype.invalidateShopConf=function(){this._invalidShopConf=!0},a.prototype.isInvalidShopConf=function(){return!!this._invalidShopConf},a.prototype.ensureValidShopConf=function(){return new Promise(function(e){return this.runOrUpdate(e)}.bind(this))},a.prototype.onLoginStateChange=function(e){e||this.updateShopConf()},a.prototype.runOrUpdate=function(e,t){this.isInvalidShopConf()?this.updateShopConf(t).then(e):e()},a.prototype.getIDCExchanges=function(e){var t=this._products,i=window.initData;if(i)if(e){if(i.idc_delay_exchanges_list)return window.initData.idc_delay_exchanges_list}else if(i.idc_exchanges_list)return window.initData.idc_exchanges_list;return Object.keys(t).filter((function(i){return e?t[i].idc_service_codes_delay:t[i].idc_service_codes})).map((function(e){return t[e].exchange}))},a.prototype.getProduct=function(e){if(e in this._products)return this._products[e];if(this.isDiscountProductId(e)){var t=this._discounts[e],i=Object.assign({discount_text_id:e},this._products[t.product]);return t.cost&&(i.cost=t.cost),t.cost_annual&&(i.cost_annual=t.cost_annual),t.cost_biennial&&(i.cost_biennial=t.cost_biennial),void 0!==t.free_months&&(i.free_months=t.free_months),void 0!==t.upgrade_from_m&&(i.upgrade_from_m=t.upgrade_from_m),void 0!==t.fixed_cost&&(i.fixed_cost=t.fixed_cost),i}return{}},a.prototype.findProduct=function(e){return new Promise(function(t){var i=function(){t(this.getProduct(e))}.bind(this);if(!this.isInvalidShopConf())return i();this.updateShopConf().then(i).catch(i)}.bind(this))},a.prototype.isProductDefined=function(e){return!(!e||!Object.keys(e).length)},a.prototype.getDiscountProduct=function(e){return this._discounts[e]||{}},a.prototype.getProductId=function(e){return e&&(e.discount_text_id||e.text_id)||""},a.prototype.isDiscountProductId=function(e){return e in this._discounts},a.prototype.isExchange=function(e){return e.type===this.PRODUCT_TYPES.exchange},a.prototype.getActiveExchanges=function(){return this.getProductsByType(this.PRODUCT_TYPES.exchange).filter((function(e){return!e.disabled&&Boolean(e.cost)}))},a.prototype.getExchange=function(e){for(var t,i=this.getProductsByType(this.PRODUCT_TYPES.exchange),r=0;r<i.length;r+=1)if((t=i[r]).exchange===e||t.included_exchanges&&t.included_exchanges.includes(e))return t;return{}},a.prototype.getCost=function(e,t){var i=0,r=1,n=1;if(e.free_months&&t===o.OneYear&&(i=e.free_months),o.TwoYears===t){if(e.fixed_cost||(r=24),e.cost_biennial)return e.cost_biennial*r;if(e.cost_annual)return e.cost_annual*r}else if(o.OneYear===t){if(e.fixed_cost||(n=12),r=n-i,e.cost_annual)return e.cost_annual*r}else o.ThreeMonths===t&&(e.fixed_cost||(r=3));return e.cost,e.cost*r},a.prototype.getProductsByType=function(e){return Object.keys(this._products).filter((function(t){
return this._products[t].type===e}),this).map((function(e){return this.getProduct(e)}),this).sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))},a.prototype.getProPlans=function(e){return this.getProductsByType(this.PRODUCT_TYPES.pro_plan).filter((function(t){return!e||!t.is_limited})).map((function(e){return e.text_id}))},a.prototype.getStudies=function(){for(var e={},t=0;t<this._order.length;t++){var i=this._order[t];this._products[i]&&this._products[i].type===this.PRODUCT_TYPES.study_package&&(e[i]=this._products[i])}return e},a.prototype.getSuperProduct=function(e){for(var t in this._products){var i=this._products[t];if(i.subproduct_ids&&i.subproduct_ids.indexOf(e)>=0)return i.id}},a.prototype.getStudiesOrder=function(){return this._order.filter((function(e){return this._products[e]&&this._products[e].type===this.PRODUCT_TYPES.study_package}),this)},a.prototype.hasPackage=function(e){return this._offers.includes(e)||this._freeProductIds.includes(e)},a.prototype._getUser=function(){return window.user},a.prototype.isPro=function(){return!!this._getUser().pro_plan},a.prototype.isTrial=function(){return!!this._getUser().is_trial},a.prototype.isPaidPro=function(){return this.isPro()&&!this.isTrial()},a.prototype.userHasRealtimeForExchange=function(e){e=(e||"").toLowerCase().replace("exchange-","");var t=this.getExchange(e);if(!this.isProductDefined(t))return!1;if(this._offers.includes("exchange-"+t.exchange))return!0;if(t.included_exchanges)for(var i=0;i<t.included_exchanges.length;i+=1)if(this._offers.includes("exchange-"+t.included_exchanges[i]))return!0;return!1},a.prototype._exHasRealtimeForType=function(e,t){return!("stock"===t&&!e.is_stocks)&&(!("index"===t&&!e.is_indices)&&!("futures"===t&&!e.is_futures))},a.prototype.hasRealtimeForExchange=function(e,t){var i,r,n=pro.getProductsByType(pro.PRODUCT_TYPES.exchange);e=(e||"").toLowerCase();for(var o=0;o<n.length;o+=1)if((i=n[o]).exchange===e||(i.included_exchanges||[]).includes(e)){if(i.disabled&&!i.included_exchanges)return!1;if(!t)return!0;if(i.included_exchanges){for(var s,a=0;a<i.included_exchanges.length;a+=1)if(r=this.getProduct("exchange-"+i.included_exchanges[a]),this.isProductDefined(r)&&this._exHasRealtimeForType(r,t)){s=!0;break}if(!s)return!1}else if(!this._exHasRealtimeForType(i,t))return!1;return!0}return!1},a.prototype.visitExchangesPage=function(e){var t=o.Monthly,i=!0,r=this._getUser();r.is_trial||(t=r.pro_plan_billing_cycle||o.OneYear,i=!1),n("pro",t,{exchangesOnly:!0,newWindow:(e=e||{}).newWindow,paymentMethod:e.paymentMethod,fixedCycle:i})},a.prototype.offerLogoSrc=function(e){return e.has_logo?"/static/images/indicators/logos/"+e.text_id+".png":null},a.prototype.offers=function(){return this._offers},a.prototype.hasActivePackages=function(){return this._offers.some((function(e){return!(["tv-prostudies","tv-volumebyprice"].includes(e)||e.endsWith("_dly"))}))},a.prototype.isSupportAvailable=function(){const e=this;return Promise.resolve().then(i.t.bind(null,"+GxX",7)).then((function(t){
return e.isPaidPro()||e._getUser().had_pro||e.isTrial()&&(t.isFeatureEnabled("trial-users-support")||e.hasActivePackages())}))},a.prototype.discounts=function(){return this._discounts},a.prototype.hash=function(){var e=this._offers.slice(0);e.sort();var t={offers:e};return JSON.stringify(t)},"undefined"!=typeof window&&window.TradingView&&(window.TradingView.Pro=a),e.exports=a},HySD:function(e,t,i){"use strict";i.r(t),i.d(t,"ResizerDetacherState",(function(){return s}));var r=i("Eyy1"),n=i("hY0g"),o=i.n(n),s=function(){function e(e){var t=this;this._alive=new o.a,this._container=new o.a,this._width=new o.a,this._height=new o.a,this._fullscreen=new o.a,this._detachable=new o.a,this._fullscreenable=new o.a,this._visible=new o.a,this._availWidth=new o.a,this._availHeight=new o.a,this._owner=new o.a,this._ownersStack=[],this.owner=this._owner.readonly(),this._bridge={alive:this._alive.readonly(),container:this._container.readonly(),width:this._width.readonly(),height:this._height.readonly(),fullscreen:this._fullscreen.readonly(),detachable:this._detachable.readonly(),fullscreenable:this._fullscreenable.readonly(),visible:this._visible.readonly(),availWidth:this._availWidth.readonly(),availHeight:this._availHeight.readonly(),remove:function(){var e=t._owner.value();e&&e.remove&&e.remove()},negotiateWidth:function(e){var i=t._owner.value();i&&i.negotiateWidth&&i.negotiateWidth(e)},negotiateHeight:function(e){var i=t._owner.value();i&&i.negotiateHeight&&i.negotiateHeight(e)},requestFullscreen:function(){var e=t._owner.value();e&&e.requestFullscreen&&e.requestFullscreen()},exitFullscreen:function(){var e=t._owner.value();e&&e.exitFullscreen&&e.exitFullscreen()},detach:function(e){var i=t._owner.value();i&&i.detach&&i.detach(e)},attach:function(){var e=t._owner.value();e&&e.attach&&e.attach()}},e&&this.pushOwner(e)}return e.prototype.bridge=function(){return this._bridge},e.prototype.pushOwner=function(e){if(e.alive.value()){for(var t=0,i=this._ownersStack;t<i.length;t++){var r=i[t];this._unsubscribeOwner(r)}var n={owner:e};this._ownersStack.push(n),this._subscribeOwner(n)}},e.prototype._subscribeOwner=function(e){var t=this,i=e.owner;if(e.deathWatcher||(this._alive.setValue(!0),e.deathWatcher=i.alive.spawn(),e.deathWatcher.subscribe((function(i){i||t._deadHandler(e)}))),this._owner.setValue(i),!e.subscriptions){var r=e.subscriptions=[];this._visible.setValue(!1);var n=function(e,t){if(e){var i=e.spawn();r.push(i),i.subscribe((function(e){t.setValue(e)}),{callWithLast:!0})}else t.deleteValue()};n(i.container,this._container),n(i.width,this._width),n(i.height,this._height),n(i.fullscreen,this._fullscreen),n(i.detachable,this._detachable),n(i.fullscreenable,this._fullscreenable),n(i.availWidth,this._availWidth),n(i.availHeight,this._availHeight),n(i.visible,this._visible)}},e.prototype._unsubscribeOwner=function(e,t){if(e.subscriptions){for(var i=0,r=e.subscriptions;i<r.length;i++){r[i].unsubscribe()}e.subscriptions=null}t&&e.deathWatcher&&(e.deathWatcher.unsubscribe(),e.deathWatcher=null)},e.prototype._deadHandler=function(e){
var t=this._ownersStack.indexOf(e);Object(r.assert)(-1!==t,"sanitized owner should be in stack");for(var i=this._ownersStack.length-1;i>=t;i--)this._unsubscribeOwner(this._ownersStack[i],!0);this._ownersStack.length=t,t>0?this._subscribeOwner(this._ownersStack[t-1]):(this._alive.setValue(!1),this._owner.deleteValue())},e}()},"I92+":function(e,t,i){var r=i("rjQZ");e.exports=function(e){return e=r(e^=e>>>16,2246822507),e=r(e^=e>>>13,3266489909),(e^=e>>>16)>>>0}},I9zs:function(e,t,i){"use strict";var r=i("Eyy1").assert,n=i("aO4+").Point,o=i("eJTA"),s=o.rgbToHsl,a=o.hslToRgb,l=o.rgbToHexString,c=o.parseRgb,u=o.parseRgba,h=i("VdBB").HitTestResult,d=i("vq8G").SelectionRenderer,p=i("29fS").PaneRendererBars,f=i("cO0S").PaneRendererHistogram,_=i("Ndyb").PaneRendererColumns,m=i("gyZD").PaneRendererLine,v=i("u0yd").PaneRendererArea,g=i("/hKg").PaneRendererCandles,y=i("dBsn").PaneRendererCross,b=i("OYox").PaneRendererCircles,S=i("6Fc/").PaneRendererArrowsUpDownItem,w=i("6Fc/").PaneRendererArrowsUpDown,P=i("gTEF").SelectionRendererArrowsUpDown,C=i("f3xO").PaneRendererUnicodeChar,T=i("gVWb").PaneRendererBackground,x=i("Zp8I").PaneRendererStepLine,I=i("Zy3/").CompositeRenderer,E=i("ga+R"),L=i("Hr11").clamp,O=i("Nu4p"),A=i("23IT"),M=A.LineStudyPlotStyle,k=A.PlotSymbolSize,D=i("972a").MarkLocation,R=i("G3Rl").memoize,V=i("Tmoa"),B=i("k9/m").PlotRowSearchMode,N=i("Kxc7"),F=i("Zp/P"),j=i("Kmdw"),W=i("akof"),H=i("+q2u"),U=i("fxzW"),z=i("P+Pi"),G=i("IOzl"),q=i("6ptY"),Y=i("PF2b"),X=i("V0al");function K(e,t,i,r){this.m_study=e,this.m_series=t,this.m_model=i,this._plotName=r,this.m_items=[],this._invalidated=!0,this._isMarkersEnabled=N.enabled("source_selection_markers");var n=this.m_study.metaInfo().plots;this._colorer=null,this._palette=null,this._paletterProps=null,this._plotIndex=0;for(var o=0;o<n.length;o++)n[o].id===this._plotName&&(this._plotIndex=o),this.m_study.isSelfColorerPlot(o)&&n[o].target===this._plotName&&(this._colorer=o,this._palette=this.m_study.metaInfo().palettes[n[o].palette],this._paletterProps=this.m_study.properties().palettes[n[o].palette])}function J(e,t,i,n){this._study=e,this._series=t,this._model=i,this._plotName=n,this._items=[],this._invalidated=!0,this._isMarkersEnabled=N.enabled("source_selection_markers");for(var o=this._study.metaInfo().plots,s=0;s<o.length;s++)o[s].id===this._plotName&&(this._plotIndex=s,r(this._study.isBgColorerPlot(s),"Plot '"+this._plotName+"' is not a background colorer!"))}function Q(e,t,i,r){this.m_study=e,this.m_series=t,this.m_model=i,this.m_plotName=r,this.m_items=[],this.m_invalidated=!0,this.m_renderer=null,this._isMarkersEnabled=N.enabled("source_selection_markers"),this.m_selectionData=null,this.m_plotIndex=null;for(var n=this.m_study.metaInfo().plots,o=0;o<n.length;o++)if(n[o].id===this.m_plotName){this.m_plotIndex=o;break}n=this.m_study.metaInfo().plots;this._colorer=null,this._textColorer=null,this._palette=null,this._textPalette=null,this._paletterProps=null,this._textPaletterProps=null,this._plotIndex=0
;for(o=0;o<n.length;o++)n[o].id===this.m_plotName&&(this._plotIndex=o),this.m_study.isSelfColorerPlot(o)&&n[o].target===this.m_plotName&&(this._colorer=o,this._palette=this.m_study.metaInfo().palettes[n[o].palette],this._paletterProps=this.m_study.properties().palettes[n[o].palette]),this.m_study.isTextColorerPlot(o)&&n[o].target===this.m_plotName&&(this._textColorer=o,this._textPalette=this.m_study.metaInfo().palettes[n[o].palette],this._textPaletterProps=this.m_study.properties().palettes[n[o].palette])}function Z(e,t,i,r){Q.call(this,e,t,i,r)}function $(e,t,i,r){Z.call(this,e,t,i,r)}function ee(e,t,i,r){Q.call(this,e,t,i,r),this._maxAbsValue=0}function te(e,t,i,r){this.m_study=e,this.m_series=t,this.m_model=i,this.m_plotName=r,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=N.enabled("source_selection_markers");var n=this.m_study.metaInfo().plots;this._colorer=null,this._palette=null,this._paletterProps=null,this._ohlcPlotIndexes={};for(var o=0;o<n.length;o++)n[o].target===this.m_plotName&&(this.m_study.isOHLCOpenPlot(o)&&(this._ohlcPlotIndexes[TradingView.OPEN_PLOT]=o),this.m_study.isOHLCHighPlot(o)&&(this._ohlcPlotIndexes[TradingView.HIGH_PLOT]=o),this.m_study.isOHLCLowPlot(o)&&(this._ohlcPlotIndexes[TradingView.LOW_PLOT]=o),this.m_study.isOHLCClosePlot(o)&&(this._ohlcPlotIndexes[TradingView.CLOSE_PLOT]=o),this.m_study.isOHLCColorerPlot(o)&&(this._colorer=o,this._palette=this.m_study.metaInfo().palettes[n[o].palette],this._paletterProps=this.m_study.properties().palettes[n[o].palette]))}function ie(e,t,i,r){te.call(this,e,t,i,r)}function re(e,t,i,r){te.call(this,e,t,i,r)}TradingView.PaneRendererArrowUp=j.PaneRendererArrowUp,TradingView.PaneRendererArrowDown=j.PaneRendererArrowDown,TradingView.PaneRendererCircleShape=W.PaneRendererCircleShape,TradingView.PaneRendererCrossShape=H.PaneRendererCrossShape,TradingView.PaneRendererDiamond=U.PaneRendererDiamond,TradingView.PaneRendererFlagShape=z.PaneRendererFlagShape,TradingView.PaneRendererLabelUp=G.PaneRendererLabelUp,TradingView.PaneRendererLabelDown=G.PaneRendererLabelDown,TradingView.PaneRendererSquare=q.PaneRendererSquare,TradingView.PaneRendererTriangleApexUp=Y.PaneRendererTriangleApexUp,TradingView.PaneRendererTriangleApexDown=Y.PaneRendererTriangleApexDown,TradingView.PaneRendererXCross=X.PaneRendererXCross,K.isIndexValid=function(e,t){return null!==e&&e>=0&&e<t._length()},K.prototype.items=function(){return this.m_items},K.prototype.update=function(){this._invalidated=!0},K.prototype._updateImpl=function(){if(this._histogramBase=null,this.m_items=[],!this.m_model.timeScale().isEmpty()&&!this.m_study.priceScale().isEmpty()){var e=this.m_model.timeScale().visibleBarsStrictRange();if(null!==e){var t=this.m_series.nearestIndex(e.firstBar(),B.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),B.NearestLeft),r=this.m_study.offset(this._plotName);r>0?(t-=r,i+=r):(t+=r,i-=r);var o=this.m_study.getMinFirstBarIndexForPlot(this._plotName);if(!(o>i)){t=Math.max(o,t)
;var s=this.m_study.properties().styles[this._plotName],a=s.plottype.value(),l=[M.Line,M.Area,M.Circles,M.Cross].indexOf(a)>=0,c=this.m_study.data(),u=this.m_study.firstValue();if(l&&c._length()>0){for(var d=c._bsearch(t);K.isIndexValid(d,c)&&void 0===c._valueAt(d)[this._plotIndex+1];)d-=1;t=K.isIndexValid(d,c)?c._indexAt(d):t;for(var p=c._bsearch(i);K.isIndexValid(p,c)&&void 0===c._valueAt(p)[this._plotIndex+1];)p+=1;i=K.isIndexValid(p,c)?c._indexAt(p):i}var f=c.range(t,i),_=this.m_study.priceScale(),m=L(this._getTranspValue(),0,100),v={},g=function(e,t){var i=e+"@"+t;return v[i]||(this._plotName&&"vol"===this._plotName?v[i]=V.generateColor(e,t):v[i]=V.generateColor(e,t,!0)),v[i]}.bind(this);if(f.each(function(e,t){e+=r,e=Math.floor(e);var i=null==(h=t[this._plotIndex+1]);if(l&&i)return!1;var o=new n(e,h=i?NaN:h);o.timePointIndex=e;var a=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor;if(this._colorer&&a){var c,u,h=t[this._colorer+1];if(o.style={},null!=h){c=this._palette.valToIndex?this._palette.valToIndex[h]:h;var d=(u=this._paletterProps.colors[c]).color.value();o.style.color=V.isHexColor(d)?g(d,m):d}else{d=s.color.value();o.style.color=g(d,100)}var p=void 0!==c?u.width.value():s.linewidth.value(),f=void 0!==c?u.style.value():s.linestyle.value();o.style.width=p,o.style.style=f}return this.m_items.push(o),!1}.bind(this)),_.pointsArrayToCoordinates(this.m_items,u),this.m_model.timeScale().indexesToCoordinates(this.m_items),s.histogramBase&&(this._histogramBase=this.m_study.priceScale().priceToCoordinate(s.histogramBase.value(),u)),this.m_model.selection().isSelected(this.m_study)){var y=E(t,i);this._selectionData={points:[],bgColors:[],visible:!0};var b=this.m_model.paneForSource(this.m_study).height();this._selectionData.hittestResult=h.REGULAR;for(var S=0;S<y.length;S++){var w=y[S],P=this.m_study.data().valueAt(w);if(w+=r,null!==P){var C=P[this._plotIndex+1],T=this.m_model.timeScale().indexToCoordinate(Math.floor(w)),x=this.m_study.priceScale().priceToCoordinate(C,u);this._selectionData.points.push(new n(T,x)),this._selectionData.bgColors.push(this.m_model.backgroundColorAtYPercentFromTop(x/b))}}}var I=s;this._lineColor=V.generateColor(I.color.value(),m),this._lineWidth=I.linewidth.value();var O=I.color.value();if(this._colorer)null!=(C=this._paletterProps.colors[0])&&(O=C.color.value(),this._lineWidth=C.width.value(),this._lineColor=V.generateColor(C.color.value(),m));this._color2=V.generateColor(O,m),this._color1=V.generateColor(K.addHueForColor(O),m)}}}},K.addHueForColor=R((function(e){var t=s(c(e)),i=t[0]+.05;return t[0]=i-Math.floor(i),l(a(t))})),K.prototype._getTranspValue=function(){var e=this.m_study.properties(),t=e.styles[this._plotName],i=0,r=this.m_study.metaInfo();return"Volume@tv-basicstudies"===r.id&&r.version<=46&&"transparency"in e?(i=e.transparency.value(),i=isNumber(i)?i:0):(t.transparency&&(i=t.transparency.value(),i=isNumber(i)?i:0),i)},K.prototype.renderer=function(){var e=this.m_study.properties().styles[this._plotName];if(!e.visible.value())return null
;if(!this.m_study.priceScale())return null;this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};t.barSpacing=this.m_model.timeScale().barSpacing(),t.items=this.m_items,t.histogramBase=this._histogramBase?this._histogramBase:this.m_study.priceScale().height(),t.lineIndex=0,t.lineStyle=e.linestyle.value(),t.lineColor=this._lineColor,t.lineWidth=this._lineWidth,t.lineWidth=isNumber(t.lineWidth)?t.lineWidth:1,t.color1=this._color1,t.color2=this._color2,t.bottom=t.histogramBase,this._colorer||(t.simpleMode=!0);var i=new I,r=!!e.joinPoints&&e.joinPoints.value();switch(e.plottype.value()){case M.Line:case M.LineWithBreaks:i.append(new m(t));break;case M.Area:case M.AreaWithBreaks:i.append(new v(t));break;case M.Histogram:i.append(new f(t));break;case M.Columns:i.append(new _(t));break;case M.Cross:if(i.append(new y(t)),r)(n=TradingView.merge({},t)).lineWidth=1,n.forceLineWidth=!0,i.append(new m(n));break;case M.Circles:var n;if(i.append(new b(t)),r)(n=TradingView.merge({},t)).lineWidth=1,n.ignorePaletteLineWidth=!0,i.append(new m(n));break;case M.StepLine:var o=new x;o.setData(t),i.append(o);break;default:i.append(new m(t))}return this.m_model.selection().isSelected(this.m_study)&&this._isMarkersEnabled&&i.append(new d(this._selectionData)),i},J.prototype.items=function(){return this._items},J.prototype.update=function(){this._invalidated=!0},J.prototype._scalesReady=function(){var e=this._model.timeScale(),t=this._study.priceScale();return e&&t&&!e.isEmpty()&&!t.isEmpty()},J.prototype._getTranspValue=function(){var e=this._study.properties().styles[this._plotName],t=0;return e.transparency&&(t=e.transparency.value(),t=isNumber(t)?t:40),t},J.prototype._updateImpl=function(){this._items=[],r(this._scalesReady(),"Scales must be ready!");var e=this._model.timeScale().visibleBarsStrictRange();if(null!==e){var t=this._study.metaInfo().plots[this._plotIndex].palette,i=this._study.properties().palettes[t].colors,o=this._study.metaInfo().palettes[t],s=this._getTranspValue(),a=this._series.nearestIndex(e.firstBar(),B.NearestRight),l=this._series.nearestIndex(e.lastBar(),B.NearestLeft),c=this._study.offset(this._plotName);c>0?(a-=c,l+=c):(a+=c,l-=c);var u=this._study.getMinFirstBarIndexForPlot(this._plotName);if(!(u>l))a=Math.max(u,a),this._study.data().range(a,l).each(function(e,t){e+=c;var r=t[this._plotIndex+1],a=new n(Math.floor(e)-.5),l=isNumber(s)?s:50;l=Math.min(l,100),l=Math.max(l,0);if(null!=r){var u=o.valToIndex?o.valToIndex[r]:r;a.color=V.generateColor(i[u].color.value(),l)}else a.color=null;return this._items.push(a),!1}.bind(this)),this._model.timeScale().indexesToCoordinates(this._items)}},J.prototype.renderer=function(){if(this._study.properties().styles[this._plotName].visible&&this._study.properties().styles[this._plotName].visible.value()&&this._scalesReady()){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={items:this._items,y:0,h:this._study.priceScale().height(),w:this._model.timeScale().barSpacing()},t=new I;return t.append(new T(e)),t}},Q.prototype.items=function(){
return this.m_items},Q.prototype.update=function(){this.m_invalidated=!0},Q.prototype._scalesReady=function(){var e=this.m_model.timeScale(),t=this.m_study.priceScale();return e&&t&&!e.isEmpty()&&!t.isEmpty()},Q.prototype._updateImpl=function(){if(this.m_items=[],this._scalesReady()){var e=this.m_model.timeScale(),t=this.m_study.priceScale(),i=e.visibleBarsStrictRange();if(null!==i){var r=this.m_series.nearestIndex(i.firstBar(),B.NearestRight),n=this.m_series.nearestIndex(i.lastBar(),B.NearestLeft),o=this.m_study.offset(this.m_plotName);o>0?(r-=o,n+=o):(r+=o,n-=o);var s=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName);if(!(s>n)){r=Math.max(s,r);var a=this.m_study.data(),l=this.m_study.firstValue(),c=a.range(r,n),u=this._getTranspValue(),d=E(r,n),p=this.m_model.selection().isSelected(this.m_study);this.m_selectionData=p?{points:[],hittestResult:h.REGULAR,vertOffset:0,isDark:this.m_model.isDark(),bgColors:[],visible:!0}:null;var f,_,m=this.m_series.properties().style.value(),v=m===TradingView.Series.STYLE_LINE?"lineStyle":m===TradingView.Series.STYLE_AREA?"areaStyle":null;v?(f=this.m_series.properties()[v].priceSource.value(),_=f):(f="high",_="low");var g=this.m_study.priceScale().isInverted(),y=t.coordinateToPrice(t.height()*t.topMargin(),l),b=t.coordinateToPrice(t.height()*(1-t.bottomMargin()),l);this._topCoord=g?b:y,this._bottomCoord=g?y:b;var S=this.m_model.paneForSource(this.m_study).height();c.each(function(e,t){var i=Math.floor(e+o);if(null==(l=t[this.m_plotIndex+1]))return!1;var r=this._createItem(i,l,f,_);if(null!=r){var n=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor;if(this._colorer&&n){var s,a,l=t[this._colorer+1];if(r.style={},null!=l){var c=this._palette.valToIndex?this._palette.valToIndex[l]:l;s=this._paletterProps.colors[c].color.value(),a=u>9?u-10:0,r.style.color=V.generateColor(s,u)}else s=this.m_study.properties().styles[this.m_plotName].color.value(),a=100,r.style.color=V.generateColor(s,100);r.style.borderColor=V.generateColor(s,a)}var h=void 0!==t[this._textColorer+1]||this._textPalette&&this._textPalette.addDefaultColor;if(this._textColorer&&h){var m;l=t[this._textColorer+1];if(r.style||(r.style={}),null!=l){c=this._textPalette.valToIndex?this._textPalette.valToIndex[l]:l;m=this._textPaletterProps.colors[c].color.value(),r.style.textColor=V.generateColor(m,u)}else m=this.m_study.properties().styles[this.m_plotName].textColor.value(),r.style.textColor=V.generateColor(m,100)}return p&&-1!==d.indexOf(e)&&(this.m_selectionData.points.push(r),this.m_selectionData.bgColors.push(this.m_model.backgroundColorAtYPercentFromTop(r.y/S))),this.m_items.push(r),!1}}.bind(this)),this._convertItemsToCoordinates()}}}},Q.prototype._updateRenderer=function(){this._updateImpl();var e=this.m_model.timeScale(),t={},i=this._getTranspValue(),r=e.barSpacing(),n=this._calculateShapeHeight(r),o=this.m_study.properties().styles[this.m_plotName].location.value(),s=this._calculateVerticalOffset(o,n+n/2);t.barSpacing=r,t.items=this.m_items,
t.color=V.generateColor(this.m_study.properties().styles[this.m_plotName].color.value(),i),t.height=n,t.vertOffset=s;var a=this.m_study.properties().styles[this.m_plotName].plottype.value(),l=O.plotShapesData[a],c=new I;l&&c.append(new TradingView[l.paneRendererClass](t)),this.m_model.selection().isSelected(this.m_study)&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=s,c.append(new d(this.m_selectionData))),this.m_renderer=c},Q.prototype._getSeriesVal=function(e,t){e=e||"close";var i=null;try{i=this.m_series[e](t)}catch(r){}return i},Q.prototype._getTranspValue=function(){var e=0;this.m_study.properties().transparency&&(e=this.m_study.properties().transparency.value(),e=isNumber(e)?e:50);var t=this.m_study.properties().styles[this.m_plotName];return t.transparency&&(e=t.transparency.value(),e=isNumber(e)?e:50),L(e,0,100)},Q.prototype._createItem=function(e,t,i,r){var o=this.m_study.properties().styles[this.m_plotName].location.value();if(!t&&o!==D.Absolute)return null;switch(o){case D.AboveBar:var s=this._getSeriesVal(i,e);if(void 0===s||null==s)return null;var a=s;break;case D.BelowBar:var l=this._getSeriesVal(r,e);if(void 0===l||null==l)return null;a=l;break;case D.Top:a=this._topCoord;break;case D.Bottom:a=this._bottomCoord;break;case D.Absolute:a=t;break;default:throw new Error("Bad value: "+o)}return new n(e,a)},Q.prototype._convertItemsToCoordinates=function(){var e=this.m_model.timeScale(),t=this.m_study.priceScale();e.indexesToCoordinates(this.m_items),t.pointsArrayToCoordinates(this.m_items,this.m_study.firstValue())},Q.prototype._calculateVerticalOffset=function(e,t){var i=0;switch(e){case D.AboveBar:case D.Bottom:i=-t;break;case D.BelowBar:case D.Top:i=t}return this.m_study.priceScale().isInverted()&&(i*=-1),i},Q.prototype._calculateShapeHeight=function(e,t){var i=e;switch(t){case k.Tiny:i=.3*e;break;case k.Small:i=.6*e;break;case k.Normal:i=e;break;case k.Large:i=1.5*e;break;case k.Huge:i=2*e}return i},Q.prototype.renderer=function(){if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return this.m_invalidated&&(this._updateRenderer(),this.m_invalidated=!1),this.m_renderer},inherit(Z,Q),Z.prototype._updateRenderer=function(e){this._updateImpl();var t,i=this.m_model.timeScale(),r={},n=this._getTranspValue(),o=i.barSpacing();if(e.size){var s=e.size.value();t=this._calculateShapeHeight(25,s)}else t=Math.round(o/2);var a=e.location.value(),l=V.generateColor(e.color.value(),n),c=n>19?n-10:0,u=this._calculateVerticalOffset(a,Math.round(1.5*t));r.barSpacing=o,r.items=this.items(),r.color=l,r.borderColor=V.generateColor(e.color.value(),c),r.height=t,r.vertOffset=u;var h=e.plottype.value(),p=O.plotShapesData[h],f=new I,_=e.text?e.text.value():void 0;if(void 0!==_&&""!==_.trim()){var m=_.trim().replace(/\\n/gm,"\n");m=TradingView.cleanButAmpersand(m,!0),r.text=m,r.fontSize=12;var v=e.textColor?e.textColor.value():void 0;r.textColor=v?V.generateColor(v,n):l}
null!=p&&f.append(new TradingView[p.paneRendererClass](r)),this.m_model.selection().isSelected(this.m_study)&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=u,f.append(new d(this.m_selectionData))),this.m_renderer=f},Z.prototype.renderer=function(){var e=this.m_study.properties().styles[this.m_plotName];if(e.visible&&e.visible.value()&&this._scalesReady())return this.m_invalidated&&(this._updateRenderer(e),this.m_invalidated=!1),this.m_renderer},inherit($,Z),$.prototype.renderer=function(){var e=this.m_study.properties().styles[this.m_plotName];if(e.visible&&e.visible.value()&&this._scalesReady()){var t=this.m_model.timeScale();this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1);var i,r={},n=this._getTranspValue(),o=t.barSpacing();if(e.size){var s=e.size.value();i=this._calculateShapeHeight(50,s)}else i=Math.round(o);var a=e.location.value(),l=V.generateColor(e.color.value(),n),c=this._calculateVerticalOffset(a,i);r.items=this.items(),r.barSpacing=o,r.char=e.char.value(),r.height=i,r.vertOffset=c,r.color=l;var u=new I,h=e.text?e.text.value():void 0;if(void 0!==h&&""!==h.trim()){var p=h.trim().replace(/\\n/gm,"\n");p=TradingView.cleanButAmpersand(p,!0),r.text=p,r.fontSize=12;var f=e.textColor?e.textColor.value():void 0;r.textColor=f?V.generateColor(f,n):l}return u.append(new C(r)),this.m_model.selection().isSelected(this.m_study)&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=c,u.append(new d(this.m_selectionData))),u}},inherit(ee,Q),ee.prototype.renderer=function(){if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady()){this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1);var e={},t=L(this._getTranspValue(),0,100),i=this.m_model.timeScale().barSpacing();e.items=this.m_items,e.barSpacing=i,e.colorup=V.generateColor(this.m_study.properties().styles[this.m_plotName].colorup.value(),t),e.colordown=V.generateColor(this.m_study.properties().styles[this.m_plotName].colordown.value(),t);var r=u(e.colorup),n=r?100*(1-r[3]):0,o=u(e.colordown),s=o?100*(1-o[3]):0;e.colorBorderUp=V.generateColor("#000000",n),e.colorBorderDown=V.generateColor("#000000",s),e.minHeight=this.m_study.properties().styles[this.m_plotName].minHeight.value(),e.maxHeight=this.m_study.properties().styles[this.m_plotName].maxHeight.value();var a=new I;if(a.append(new w(e)),this.m_model.selection().isSelected(this.m_study)&&null!==this.m_selectionData){var l=this.m_selectionData;l.barSpacing=i,a.append(new P(l))}return a}},ee.prototype._createItem=function(e,t,i,r){if(0!==t){Math.abs(t)>this._maxAbsValue&&(this._maxAbsValue=Math.abs(t));var n,o=t>0;if(o){var s=this._getSeriesVal(r,e);if(void 0===s||null==s)return null;n=s}else{var a=this._getSeriesVal(i,e);if(void 0===a||null==a)return null;n=a}return new S(e,n,t,o)}},ee.prototype._convertItemsToCoordinates=function(){var e=this.m_model.timeScale(),t=this.m_study.priceScale();e.indexesToCoordinates(this.m_items),
t.pointsArrayToCoordinates(this.m_items,this.m_study.firstValue());var i=Math.abs(this.m_study.properties().styles[this.m_plotName].minHeight.value()),r=Math.abs(this.m_study.properties().styles[this.m_plotName].maxHeight.value());if(i>r){var n=i;i=r,r=n}for(var o=(r-i)/this._maxAbsValue,s=this.m_items,a=0;a<s.length;a++){var l=s[a],c=Math.abs(l.height);l.height=c*o+i}},te.prototype.update=function(){this._invalidated=!0},te.prototype._updateImpl=function(){if(this.m_bars.length=0,!this.m_model.timeScale().isEmpty()&&!this.m_study.priceScale().isEmpty()){var e=this.m_model.timeScale().visibleBarsStrictRange();if(null!==e){var t=this.m_series.nearestIndex(e.firstBar(),B.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),B.NearestLeft),r=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName);if(!(r>i)){t=Math.max(r,t);var o=this.m_study.data(),s=this.m_study.firstValue(),a=o.range(t,i),l=this.m_study.properties().ohlcPlots[this.m_plotName],c={};if(a.each(function(e,t){e=Math.floor(e);for(var i=!0,r={},n=TradingView.OPEN_PLOT;n<=TradingView.CLOSE_PLOT;++n){var o=t[this._ohlcPlotIndexes[n]+1];if(null==o){i=!1;break}r[n]=o}if(!i)return!1;var s=r[TradingView.OPEN_PLOT],a=r[TradingView.CLOSE_PLOT],u=Math.max(s,r[TradingView.HIGH_PLOT],r[TradingView.LOW_PLOT],a),h=Math.min(s,r[TradingView.HIGH_PLOT],r[TradingView.LOW_PLOT],a),d={};d.time=Math.round(e),d.open=s,d.high=u,d.low=h,d.close=a;var p=this._colorer?null!=t[this._colorer+1]?this._plotValueToPaletteColor(t[this._colorer+1]):"rgba(0, 0, 0, 0)":l.color.value();return d.color=function(e,t){var i=e+"@"+t;return c[i]||(c[i]=V.generateColor(e,t)),c[i]}(p,0),d.hollow=null,this.m_bars.push(d),!1}.bind(this)),this.m_study.priceScale().barPricesToCoordinates(this.m_bars,s),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_model.selection().isSelected(this.m_study)){var u=E(t,i);this._selectionData={points:[],hittestResult:h.REGULAR,isDark:this.m_model.isDark(),bgColors:[],visible:!0};for(var d=this.m_model.paneForSource(this.m_study).height(),p=0;p<u.length;p++){var f=u[p],_=this.m_study.data().valueAt(f);if(null!==_){var m=_[this._plotIndex+1],v=this.m_model.timeScale().indexToCoordinate(Math.floor(f)),g=this.m_study.priceScale().priceToCoordinate(m,s);this._selectionData.points.push(new n(v,g)),this._selectionData.bgColors.push(this.m_model.backgroundColorAtYPercentFromTop(g/d))}}}}}}},te.prototype.items=function(){return this.m_bars},te.prototype._plotValueToPaletteColor=function(e){var t=this._palette.valToIndex?this._palette.valToIndex[e]:e;return this._paletterProps.colors[t].color.value()},inherit(ie,te),ie.prototype.renderer=function(){if(this.m_study.properties().ohlcPlots[this.m_plotName].visible.value()){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value();var t=new I;return t.append(new p(e)),
this.m_model.selection().isSelected(this.m_study)&&this._isMarkersEnabled&&t.append(new d(this._selectionData)),t}},inherit(re,te),re.prototype.renderer=function(){var e=this.m_study.properties().ohlcPlots[this.m_plotName];if(e.visible.value()){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.wickVisible=e.drawWick.value(),t.bodyVisible=!0,t.borderVisible=e.drawBorder.value(),t.barWidth=F.optimalBarWidth(t.barSpacing),t.borderColor=e.borderColor.value(),t.wickColor=e.wickColor.value();var i=new I;return i.append(new g(t)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&i.append(new d(this._selectionData)),i}},t.StudyPaneView=K,t.StudyBackgroundPaneView=J,t.StudyPlotShapesPaneView=Z,t.StudyPlotCharsPaneView=$,t.StudyPlotArrowsPaneView=ee,t.StudyPlotCandlesPaneView=re,t.StudyPlotBarsPaneView=ie},IERO:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#ed5565" d="M0 0h18v18H0z"/><path fill="#fff" d="M3 7h12v4H3zm4-4h4v12H7z"/></svg>'},IHm8:function(e,t,i){"use strict";i.r(t),i.d(t,"SingleSymbolList",(function(){return a})),i.d(t,"registerSingleSymbolListBackend",(function(){return l}));var r=i("mrSG"),n=i("YFKU"),o=i("pA52"),s=i("eqEH"),a=function(){function e(e){void 0===e&&(e=[]),this._list={id:"DEFAULT_SINGLE_WATCHLIST",type:"custom",isHotlist:!1,color:null,title:Object(n.t)("Watchlist"),symbols:Object(r.__spreadArrays)(e)}}return e.prototype.getAllWatchLists=function(){return this.getCustomWatchLists()},e.prototype.getCustomWatchLists=function(){return Promise.resolve([this._list])},e.prototype.getSymbols=function(e){return Promise.resolve(this._list.symbols)},e.prototype.createWatchList=function(e){throw new Error("not implemented")},e.prototype.putWatchList=function(e){throw new Error("not implemented")},e.prototype.removeWatchList=function(e){throw new Error("not implemented")},e.prototype.renameWatchList=function(e,t){return Promise.resolve(t)},e.prototype.replaceSymbols=function(e,t){return this._list.symbols=Object(r.__spreadArrays)(t),Promise.resolve(this._list)},e.prototype.addSymbols=function(e,t){var i;return(i=this._list.symbols).push.apply(i,t),Promise.resolve(this._list.symbols)},e.prototype.removeSymbols=function(e,t){return this._list.symbols=this._list.symbols.filter((function(e){return!t.includes(e)})),Promise.resolve(this._list.symbols)},e.prototype.setActive=function(e){return Promise.resolve(this._list)},e.prototype.getActive=function(){return Promise.resolve(this._list)},e}();function l(e){var t=new a(e);return Object(s.b)(o.a,t),function(){Object(s.d)(o.a)}}},IMMp:function(e){
e.exports=JSON.parse('{"color-bg-primary":"color-cold-gray-850","color-bg-primary-hover":"color-cold-gray-800","color-bg-secondary":"color-cold-gray-900","color-bg-highlight":"color-cold-gray-900","color-bg-scroll-buttons":"color-cold-gray-800","color-legacy-bg-scroll-buttons":"color-cold-gray-550","color-legacy-bg-widget":"color-cold-gray-900","color-text-primary":"color-cold-gray-200","color-text-secondary":"color-cold-gray-500","color-text-tertiary":"color-cold-gray-400","color-text-disabled":"color-cold-gray-650","color-divider":"color-cold-gray-700","color-divider-hover":"color-cold-gray-800","color-box-shadow":"color-black","color-active-hover-text":"color-gull-gray","color-alert-text":"color-loblolly","color-border":"color-bright-gray","color-border-chat-fields":"color-bright-gray","color-border-hover":"color-trout-1","color-border-table":"color-cold-gray-800","color-brand":"color-tv-blue-700","color-brand-active":"color-tv-blue-600","color-brand-hover":"color-tv-blue-600","color-button-hover-bg":"color-mirage-3","color-chart-page-bg":"color-cold-gray-800","color-common-tooltip-bg":"color-cold-gray-650","color-danger":"color-ripe-red-600","color-depthrenderer-fill-style":"color-catskill-white","color-depthrenderer-stroke-style":"color-trout-1","color-disabled-border-and-color":"color-ebony-clay","color-disabled-input":"color-bright-gray","color-empty-container-message":"color-slate-gray","color-highlight-new":"color-dark-slate-blue","color-icons":"color-slate-gray","color-input-bg":"color-charade","color-input-textarea-readonly":"color-trout-1","color-input-placeholder-text":"color-cold-gray-700","color-input-publish-bg":"color-mirage-1","color-item-active-blue":"color-blue-dianne","color-item-hover-active-bg":"color-charade","color-item-hover-bg":"color-ebony-clay","color-item-hover-blue":"color-blue-dianne","color-item-selected-blue":"color-blue-dianne","color-item-active-text":"color-cold-gray-200","color-item-active-bg":"color-tv-blue-700","color-link":"color-tv-blue-700","color-link-hover":"color-tv-blue-600","color-link-active":"color-tv-blue-800","color-list-item":"color-slate-gray","color-list-nth-child-bg":"color-mirage-3","color-news-highlight":"color-charade","color-pane-bg":"color-mirage-1","color-pane-secondary-bg":"color-cold-gray-850","color-placeholder":"color-trout-2","color-popup-menu-item-hover-bg":"color-cold-gray-800","color-popup-menu-separator":"color-cold-gray-700","color-row-hover-active-bg":"color-ebony-clay","color-sb-scrollbar-body-bg":"color-trout-2","color-screener-description":"color-loblolly","color-section-separator-border":"color-bright-gray","color-separator-table-chat":"color-bright-gray","color-success":"color-minty-green-700","color-success-hover":"color-minty-green-600","color-success-active":"color-minty-green-500","color-tag-active-bg":"color-bright-gray","color-tag-hover-bg":"color-charade","color-text-regular":"color-loblolly","color-toolbar-button-text":"color-cold-gray-500","color-toolbar-button-text-hover":"color-cold-gray-450","color-toolbar-button-text-active":"color-tv-blue-700","color-toolbar-button-text-active-hover":"color-tv-blue-600","color-toolbar-button-background-hover":"color-cold-gray-800","color-toolbar-button-background-secondary-hover":"color-cold-gray-750","color-toolbar-toggle-button-background-active":"color-tv-blue-700","color-toolbar-toggle-button-background-active-hover":"color-tv-blue-600","color-toolbar-interactive-element-text-normal":"color-cold-gray-300","color-toolbar-interactive-element-text-hover":"color-cold-gray-250","color-toolbar-opened-element-bg":"color-cold-gray-800","color-tooltip-bg":"color-bright-gray","color-tv-button-checked":"color-slate-gray","color-tv-dialog-caption":"color-athens-gray-2","color-tv-dropdown-item-hover-bg":"color-charade","color-underlined-text":"color-gull-gray","color-widget-pages-bg":"color-cold-gray-900","color-warning":"color-tan-orange-700","color-forex-icon":"color-white","color-list-item-active-bg":"color-medium-blue","color-list-item-hover-bg":"color-ebony-clay","color-list-item-text":"color-loblolly","color-price-axis-label-back":"color-cold-gray-800","color-price-axis-label-text":"color-cold-gray-500","color-price-axis-gear":"color-cold-gray-500","color-price-axis-gear-hover":"color-cold-gray-400","color-price-axis-highlight":"color-cold-gray-800","color-bid":"color-tv-blue-700","color-scroll-bg":"color-cold-gray-750","color-scroll-border":"color-cold-gray-850","color-widget-border":"color-cold-gray-800","color-scroll-buttons-arrow":"color-white","color-control-intent-default":"color-cold-gray-650","color-control-intent-success":"color-minty-green-600","color-control-intent-primary":"color-tv-blue-700","color-control-intent-warning":"color-tan-orange-500","color-control-intent-danger":"color-ripe-red-700","color-growing":"color-minty-green-600","color-falling":"color-ripe-red-600","color-pre-market":"color-tan-orange-600","color-pre-market-bg":"color-tan-orange-400","color-post-market":"color-tv-blue-500","color-post-market-bg":"color-tv-blue-400","color-market-open":"color-minty-green-500","color-market-open-bg":"color-minty-green-400","color-market-closed":"color-cold-gray-400","color-market-holiday":"color-cold-gray-400","color-invalid-symbol":"color-ripe-red-400","color-invalid-symbol-hover":"color-ripe-red-500","color-replay-mode":"color-tv-blue-700","color-replay-mode-icon":"color-tv-blue-50","color-replay-mode-hover":"color-tv-blue-600","color-notaccurate-mode":"color-berry-pink-600","color-notaccurate-mode-bg":"color-berry-pink-400","color-delay-mode":"color-tan-orange-600","color-delay-mode-bg":"color-tan-orange-400","color-eod-mode":"color-grapes-purple-400","color-eod-mode-bg":"color-grapes-purple-400","color-data-problem":"color-ripe-red-600","color-data-problem-bg":"color-ripe-red-400","color-data-problem-hover":"color-ripe-red-500","color-list-item-bg-highlighted":"color-tv-blue-a900","color-list-item-bg-selected":"color-tv-blue-a800","color-list-item-bg-highlighted-hover":"color-tv-blue-a800","color-list-item-bg-selected-hover":"color-tv-blue-a700","color-screener-header-bg":"color-cold-gray-850","color-screener-header-bg-hover":"color-cold-gray-800"}')
},IOzl:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererLabelUp",(function(){return s})),i.d(t,"PaneRendererLabelDown",(function(){return a})),i.d(t,"PaneRendererLabelLeft",(function(){return l})),i.d(t,"PaneRendererLabelRight",(function(){return c})),i.d(t,"PaneRendererLabelCenter",(function(){return u}));var r=i("mrSG"),n=i("aO4+"),o=i("jlDR"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._calcBoundingBox=function(e){var t=e.x-e.shapeWidth/2,i=e.x+e.shapeWidth/2,r=e.y+e.vertOffset,o=e.y+e.shapeHeight+e.vertOffset,s=new n.Point(t,r),a=new n.Point(i,o);return Object(n.box)(s,a)},t.prototype._drawItemShape=function(e,t,i){var r=t.pixelRatio,n=this._lineWidth(t)%2?.5:0,s=Math.max(1,Math.floor(r))%2?.5:0,a=this._getArrowSize(i),l=Math.round(a*r);(s+l)%1!=n%1&&(l+=.5);var c=Math.round(i.shapeWidth/2*r);(s+c)%1!=n%1&&(c+=.5);var u=Math.round(i.x*r)+s,h=Math.round((i.y+i.vertOffset)*r)+n,d=u-l,p=Math.round((i.y+i.vertOffset+a)*r)+n,f=u+l,_=u+c,m=Math.round((i.y+i.vertOffset+i.shapeHeight)*r)+n,v=u-c;e.moveTo(d,p),e.lineTo(u,h),e.lineTo(f,p),i.shapeWidth<=2*a?(e.lineTo(_,p),this._drawCorner(e,_,m,o.a.rightDown,r),this._drawCorner(e,v,m,o.a.leftDown,r),e.lineTo(v,p)):(this._drawCorner(e,_,p,o.a.rightUp,r),this._drawCorner(e,_,m,o.a.rightDown,r),this._drawCorner(e,v,m,o.a.leftDown,r),this._drawCorner(e,v,p,o.a.leftUp,r)),e.lineTo(d,p)},t.prototype._getVerticalTextOffset=function(e){return e.shapeHeight/2+this._getArrowSize(e)/2},t.prototype._calcVertOffset=function(e){return Math.sign(e.vertOffset)>=0?e.vertOffset:e.vertOffset-e.shapeHeight},t}(o.b),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._calcBoundingBox=function(e){var t=e.x-e.shapeWidth/2,i=e.x+e.shapeWidth/2,r=e.y-e.shapeHeight+e.vertOffset,o=e.y+e.vertOffset,s=new n.Point(t,r),a=new n.Point(i,o);return Object(n.box)(s,a)},t.prototype._drawItemShape=function(e,t,i){var r=t.pixelRatio,n=this._lineWidth(t)%2?.5:0,s=Math.max(1,Math.floor(r))%2?.5:0,a=this._getArrowSize(i),l=Math.round(a*r);(s+l)%1!=n%1&&(l+=.5);var c=Math.round(i.shapeWidth/2*r);(s+c)%1!=n%1&&(c+=.5);var u=Math.round(i.x*r)+s,h=Math.round((i.y+i.vertOffset)*r)+n,d=u+l,p=Math.round((i.y+i.vertOffset-a)*r)+n,f=u-l,_=u+c,m=Math.round((i.y+i.vertOffset-i.shapeHeight)*r)+n,v=u-c;e.moveTo(d,p),e.lineTo(u,h),e.lineTo(f,p),i.shapeWidth<=2*a?(e.lineTo(v,p),this._drawCorner(e,v,m,o.a.leftUp,r),this._drawCorner(e,_,m,o.a.rightUp,r),e.lineTo(_,p)):(this._drawCorner(e,v,p,o.a.leftDown,r),this._drawCorner(e,v,m,o.a.leftUp,r),this._drawCorner(e,_,m,o.a.rightUp,r),this._drawCorner(e,_,p,o.a.rightDown,r)),e.lineTo(d,p)},t.prototype._getVerticalTextOffset=function(e){return-e.shapeHeight/2-this._getArrowSize(e)/2},t.prototype._calcVertOffset=function(e){return Math.sign(e.vertOffset)<=0?e.vertOffset:e.vertOffset+e.shapeHeight},t}(o.b),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),
t.prototype._calcBoundingBox=function(e){var t=e.x,i=e.x+e.shapeWidth,r=e.y-e.shapeHeight/2+e.vertOffset,o=e.y+e.shapeHeight/2+e.vertOffset,s=new n.Point(t,r),a=new n.Point(i,o);return Object(n.box)(s,a)},t.prototype._drawItemShape=function(e,t,i){var r=t.pixelRatio,n=this._lineWidth(t)%2?.5:0,s=this._getArrowSize(i),a=this._hasText(i),l=a?i.shapeHeight/2:s,c=Math.round(i.x*r)+n,u=Math.round((i.y+i.vertOffset)*r)+n,h=Math.round((i.x+s)*r)+n,d=Math.round((i.y+i.vertOffset+s)*r)+n,p=Math.round((i.y+i.vertOffset-s)*r)+n,f=Math.round((i.y+i.vertOffset-l)*r)+n,_=Math.round((i.x+i.shapeWidth)*r)+n,m=Math.round((i.y+i.vertOffset+l)*r)+n;e.moveTo(h,d),e.lineTo(c,u),e.lineTo(h,p),a?this._drawCorner(e,h,f,o.a.leftUp,r):e.lineTo(h,f),this._drawCorner(e,_,f,o.a.rightUp,r),this._drawCorner(e,_,m,o.a.rightDown,r),a?this._drawCorner(e,h,m,o.a.leftDown,r):e.lineTo(h,m),e.lineTo(h,d)},t.prototype._getHorizontalTextOffset=function(e){return e.shapeWidth/2+this._getArrowSize(e)/2},t}(o.b),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._calcBoundingBox=function(e){var t=e.x-e.shapeWidth,i=e.x,r=e.y-e.shapeHeight/2+e.vertOffset,o=e.y+e.shapeHeight/2+e.vertOffset,s=new n.Point(t,r),a=new n.Point(i,o);return Object(n.box)(s,a)},t.prototype._drawItemShape=function(e,t,i){var r=t.pixelRatio,n=this._lineWidth(t)%2?.5:0,s=this._getArrowSize(i),a=this._hasText(i),l=a?i.shapeHeight/2:s,c=Math.round(i.x*r)+n,u=Math.round((i.y+i.vertOffset)*r)+n,h=Math.round((i.x-s)*r)+n,d=Math.round((i.y+i.vertOffset-s)*r)+n,p=Math.round((i.y+i.vertOffset+s)*r)+n,f=Math.round((i.y+i.vertOffset-l)*r)+n,_=Math.round((i.x-i.shapeWidth)*r)+n,m=Math.round((i.y+i.vertOffset+l)*r)+n;e.moveTo(h,d),e.lineTo(c,u),e.lineTo(h,p),a?this._drawCorner(e,h,m,o.a.rightDown,r):e.lineTo(h,m),this._drawCorner(e,_,m,o.a.leftDown,r),this._drawCorner(e,_,f,o.a.leftUp,r),a?this._drawCorner(e,h,f,o.a.rightUp,r):e.lineTo(h,f),e.lineTo(h,d)},t.prototype._getHorizontalTextOffset=function(e){return-e.shapeWidth/2-this._getArrowSize(e)/2},t}(o.b),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._calcBoundingBox=function(e){var t=e.x-e.shapeWidth/2,i=e.x+e.shapeWidth/2,r=e.y-e.shapeHeight/2+e.vertOffset,o=e.y+e.shapeHeight/2+e.vertOffset,s=new n.Point(t,r),a=new n.Point(i,o);return Object(n.box)(s,a)},t.prototype._drawItemShape=function(e,t,i){var r=t.pixelRatio,n=this._lineWidth(t)%2?.5:0,s=i.shapeHeight/2,a=i.shapeWidth/2,l=Math.round(i.x*r)+n,c=Math.round((i.x-a)*r)+n,u=Math.round((i.x+a)*r)+n,h=Math.round((i.y+i.vertOffset-s)*r)+n,d=Math.round((i.y+i.vertOffset+s)*r)+n;e.moveTo(l,h),this._drawCorner(e,u,h,o.a.rightUp,r),this._drawCorner(e,u,d,o.a.rightDown,r),this._drawCorner(e,c,d,o.a.leftDown,r),this._drawCorner(e,c,h,o.a.leftUp,r),e.lineTo(l,h)},t}(o.b)},IVMC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.reduce((function(e,t,i){return~e.indexOf(t)||e.push(t),e}),[])},e.exports=t.default},
IWXC:function(e,t,i){"use strict";i.r(t),i.d(t,"getQuoteSessionInstance",(function(){return s})),i.d(t,"setQuoteSessionInstance",(function(){return a})),i.d(t,"getQuoteSessionNoEnsure",(function(){return l})),i.d(t,"destroyQuoteSessions",(function(){return c}));var r=i("hGf4"),n=i.n(r),o={};function s(e){return void 0===e&&(e="full"),o[e]||a(e,new n.a(e)),o[e]}function a(e,t){void 0===e&&(e="full"),o[e]=t}function l(e){return void 0===e&&(e="full"),o[e]}function c(){for(var e in o)if(o.hasOwnProperty(e)){var t=o[e];void 0!==t&&t.destroy(),delete o[e]}}},Ialn:function(e,t,i){"use strict";i.r(t),i.d(t,"isRtl",(function(){return n})),i.d(t,"stripLTRMarks",(function(){return s})),i.d(t,"startWithLTR",(function(){return a})),i.d(t,"forceLTRStr",(function(){return l})),i.d(t,"forceLTRStrSsr",(function(){return c})),i.d(t,"forceRTLStr",(function(){return u})),i.d(t,"getLTRScrollLeft",(function(){return h})),i.d(t,"getLTRScrollLeftOffset",(function(){return d})),i.d(t,"detectAutoDirection",(function(){return _}));var r=i("oYVD"),n=function(){return"rtl"===window.document.dir},o=new RegExp("‎|‪|‫|‬","g");function s(e){return""!==e&&n()&&null!=e?e.replace(o,""):e}function a(e){return""!==e&&n()&&null!=e?"‎"+e:e}function l(e){return""!==e&&n()&&null!=e?"‪"+e+"‬":e}function c(e){return"‪"+e+"‬"}function u(e){return""!==e&&n()&&null!=e?"‫"+e+"‬":e}function h(e){return Object(r.getNormalizedScrollLeft)(e,"rtl")}function d(e,t){var i=Object(r.detectScrollType)();if("indeterminate"===i)return 0;switch(i){case"negative":t=e.clientWidth-e.scrollWidth+t;break;case"reverse":t=e.scrollWidth-e.clientWidth-t}return t}var p=/[^\u0000-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u02B9-\u02FF\u2000-\u200E\u2010-\u2029\u202C\u202F-\u2BFF]/,f=/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/;function _(e){var t=p.exec(e);return t?f.test(t[0])?"rtl":"ltr":""}},IcDj:function(e,t,i){"use strict";i.r(t),i.d(t,"StudyBase",(function(){return p}));var r=i("mrSG"),n=i("Eyy1"),o=i("aIyQ"),s=i.n(o),a=i("7ktv"),l=i("5fI3"),c=i("jy4L"),u=i("YWnQ"),h=i("/tGj"),d=window.t("Invalid Symbol"),p=function(e){function t(i,r,n,o){var a=e.call(this,i)||this;return a.onStart=new s.a,a._symbolsResolved=new s.a,a._statusChanged=new s.a,a._paneViews=[],a._resolvedSymbols={},a._isChildStudy=!1,a._loading=!0,a._failed=!1,a._status="",a._studyId=null,a._chartApi=i.chartApi(),a._properties=r,a._metaInfo=o,a._series=a._model.mainSeries(),n instanceof t?(a._source=n,a._isChildStudy=!0,a._source.setChild(a),a._source.currencyChanged().subscribe(a,a._onSourceCurrencyChanged)):a._series.currencyChanged().subscribe(a,a._onSourceCurrencyChanged),a}return Object(r.__extends)(t,e),t.prototype.destroy=function(){this._source&&this._source.currencyChanged().unsubscribeAll(this),this._series&&this._series.currencyChanged().unsubscribeAll(this)},t.prototype.isSymbolInvalid=function(){return this._status===d},t.prototype.getSymbolString=function(e){return Object(l.encodeExtendedSymbol)(this._getSymbolObject(e))},t.prototype.onStatusChanged=function(){
return this._statusChanged},t.prototype.symbolsResolved=function(){return this._symbolsResolved},t.prototype._allSymbolsAreResolved=function(){for(var e=this,t=[],i=this.metaInfo(),r=0;r<i.inputs.length;r++)if("symbol"===i.inputs[r].type){var n=i.inputs[r].id,o=this._properties.inputs[n].value();if(""!==o&&!this._resolvedSymbols[this._resolvedSymbolKey(o)]){var s=this._resolveSymbol(o);t.push(s)}}return 0===t.length?Promise.resolve():Promise.all(t).catch((function(t){return e._setStatus(d),e.stop(!0),e._model.updateSource(e),Promise.reject("Invalid symbol, "+t)})).then((function(){null!==e._studyId&&e.stop(!0),e.start(!0),e._symbolsResolved.fire()}))},t.prototype._resolveSymbol=function(e){var t=this;if(""===e)return Promise.resolve(e);var i=e;return new Promise((function(r,n){t._chartApi.resolveSymbol(Object(c.makeNextSymbolId)(),t.getSymbolString(i),(function(i){switch(i.method){case"symbol_resolved":t._loading=!1,t._failed=!1,t._resolvedSymbols[t._resolvedSymbolKey(e)]=i.params[1],t._onSymbolResolved(e),t.invalidateTitleCache(!0),r(e);break;case"symbol_error":if(t._loading=!1,t._failed=!0,i.params[1]===u.permissionDenied&&i.params[2])switch(i.params[2]){case u.SymbolErrorPermissionDeniedReason.ExtendedHours:break;case u.SymbolErrorPermissionDeniedReason.Symbol:if(i.params[3])return void t._resolveSymbol(i.params[3]).then(r);break;default:return void t._resolveSymbol(i.params[2]).then(r)}t._sendTelemetryCounter("symbol_error",Object.assign(t._getTelemetryAdditionalData(),{symbol:e,reason:i.params[1]})),n(e)}}))}))},t.prototype._getSymbolObject=function(e){var t={symbol:e};return this._series&&this._series.extendedHours.value()&&(t.session="extended"),t},t.prototype._onSymbolResolved=function(e){var t=Object(n.ensureNotNull)(this._model.alertsWatcher());t.syncSourceAlertLabels(this);for(var i=0,r=this.getAllChildren();i<r.length;i++){var o=r[i];t.syncSourceAlertLabels(o)}},t.prototype._resolvedSymbolKey=function(e){return e},t.prototype._setStatus=function(e){this._status=e,this._statusView&&this._statusView.update(),this._model.updateSource(this),this._statusChanged.fire()},t.prototype._onSourceCurrencyChanged=function(){Object(h.isSymbolSource)(this)||this._currencyChanged.fire()},t}(a.PriceDataSource)},IiTo:function(e,t,i){"use strict";var r=i("jCNj"),n=(i("Kxc7"),i("LxhU"));var o=i("mrSG"),s=i("E6p6"),a=i("5mo2");function l(e){return 0|e}var c=function(){function e(e,t,i,r){this.init(e,t,i,r)}return e.prototype.init=function(e,t,i,n){this.timezone=r.get_timezone(e),this.spec=new a.SessionSpec(e,t,i,n)},e}(),u=function(){function e(){}return e.prototype.alignTime=function(e){if(isNaN(e))return NaN;var t=this.indexOfBar(e);return t===s.a.POST_SESSION&&(this.moveTo(e),t=this.indexOfBar(e)),t<0?NaN:this.startOfBar(t)},e}(),h=function(e){function t(t,i){var r=e.call(this)||this;return r._sessionStartMs=Number.MIN_VALUE,r._sessionEndMs=Number.MIN_VALUE,r._periodSec=t,r._session=i,r}return Object(o.__extends)(t,e),t.prototype.alignTimeIfPossible=function(e){var t=this.alignTime(e);return isNaN(t)?e:t},
t.prototype.indexOfBar=function(e){return e<this._sessionStartMs?s.a.PRE_SESSION:e>=this._sessionEndMs?s.a.POST_SESSION:l(r.time_seconds_diff(e,this._sessionStartMs)/this._periodSec)},t.prototype.startOfBar=function(e){if(e===s.a.PRE_SESSION){var t=r.get_cal_from_unix_timestamp_ms(this._session.timezone,this._sessionStartMs-1),i=this._session.spec.alignToNearestSessionEnd(t,-1);return r.cal_to_utc(this._session.timezone,i)}if(e===s.a.POST_SESSION)return this._sessionEndMs;if(e<0)throw new Error("Negative offset is not supported");return this._sessionStartMs+r.time_seconds(this._periodSec*e)},t.prototype.endOfBar=function(e){if(e<0)throw new Error("Index cannot be negative");var t=this.startOfBar(e)+1e3*this._periodSec;return t>this._sessionEndMs?this._sessionEndMs:t},t.prototype.isLastBar=function(e,t){return t>=this._sessionStartMs+r.time_seconds(this._periodSec*(e+1)-1)},t.prototype.moveTo=function(e){var t=this._session.timezone,i=r.utc_to_cal(t,e),n=this._session.spec.alignToSessionStart(i);this._sessionStartMs=r.cal_to_utc(t,i),r.add_minutes(i,n),this._sessionEndMs=r.cal_to_utc(t,i)},t.prototype.moveNext=function(){this.moveTo(this._sessionEndMs)},t}(u),d=i("OBgQ");function p(e,t){var i=r.clone(t),n=e.businessDaysToCalendarDays(i,1);n>1&&r.add_date(i,n-1);var o=e.leftBorderOfDailyBar(i);if(null===o)throw new Error("Cannot calculate left border of daily bar");return r.cal_to_utc(r.get_timezone(e.timezone()),o)}var f=function(e){function t(t,i,r,n,o){void 0===o&&(o=!1);var s=e.call(this)||this;return s._periodStart=-Number.MAX_VALUE,s._periodEnd=-Number.MAX_VALUE,s._periodLastBarStart=-Number.MAX_VALUE,s._periodStartDay=new d.a(0,0,0),s._periodEndDay=new d.a(0,0,0),s._period=r,s._sessionTgt=t,s._builder=n,s._useBusinessDays=o,s._sessionSrc=o?new c("Etc/UTC","24x7"):i||t,s}return Object(o.__extends)(t,e),t.prototype.builder=function(){return this._builder},t.prototype.alignTimeIfPossible=function(e){return this.tradingDayToSessionStart(e)},t.prototype.tradingDayToSessionStart=function(e){return this.moveTo(e),this.startOfBar(0)},t.prototype.indexOfBar=function(e){if(this._useBusinessDays){var t=d.a.fromCalendar(r.get_cal_from_unix_timestamp_ms(this._sessionSrc.timezone,e));return t.before(this._periodStartDay)?s.a.PRE_SESSION:this._periodEndDay.before(t)?s.a.POST_SESSION:0}return e<this._periodStart?s.a.PRE_SESSION:e>=this._periodEnd?s.a.POST_SESSION:0},t.prototype.startOfBar=function(e){if(e===s.a.PRE_SESSION){var t=r.get_cal_from_unix_timestamp_ms(this._sessionTgt.timezone,this._periodStart-1),i=this._sessionTgt.spec.alignToNearestSessionEnd(t,-1);return r.cal_to_utc(this._sessionTgt.timezone,i)-1}return e===s.a.POST_SESSION||e>0?this._periodEnd:e===s.a.LASTBAR_SESSION?this._periodLastBarStart:this._periodStart},t.prototype.moveTo=function(e){var t=r.get_cal_from_unix_timestamp_ms(this._sessionSrc.timezone,e);this._sessionSrc.spec.correctTradingDay(t);var i=r.get_year(t),n=this._indexOfPeriodInYear(t),o=n+this._period,s=this._sessionTgt.spec,a=this._sessionTgt.timezone,l=this._builder.startOfPeriod(a,n,i)
;this._periodStart=p(s,l);var c=r.clone(l),u=s.businessDaysToCalendarDays(c,1);u>1&&r.add_date(c,u-1),this._periodStartDay=d.a.fromCalendar(c);var h=this._builder.startOfPeriod(a,o,i);this._periodEnd=p(s,h);var f=r.clone(h);for(r.add_date(f,-1);s.isCalWeekEnd(f);)r.add_date(f,-1);this._periodEndDay=d.a.fromCalendar(f),r.add_date(h,-1),function(e,t){for(;e.isCalWeekEnd(t);)r.add_date(t,-1)}(this._sessionTgt.spec,h),this._periodLastBarStart=p(s,h),(this._periodLastBarStart<this._periodStart||this._periodLastBarStart===this._periodEnd)&&(this._periodLastBarStart=this._periodStart)},t.prototype.endOfBar=function(e){if(0!==e)throw new Error("index should be 0");return this._periodEnd},t.prototype.isLastBar=function(e,t){if(0!==e)throw new Error("index should be 0");return t>=this._periodLastBarStart},t.prototype.currentRange=function(){return{from:this._periodStartDay,to:this._periodEndDay}},t.prototype.indexOfBarInYear=function(e){var t=r.get_cal_from_unix_timestamp_ms(this._sessionSrc.timezone,e),i=r.get_year(t),n=this._builder.indexOfPeriod(t),o=this._sessionTgt.timezone,s=this._builder.startOfPeriod(o,n,i),a=p(this._sessionTgt.spec,s);return s=r.get_cal_from_unix_timestamp_ms(r.get_timezone("Etc/UTC"),a),i<r.get_year(s)?(s=this._builder.startOfPeriod(o,n-1,i),a=p(this._sessionTgt.spec,s),{index:(n-1)/this._period,time:a}):{index:n/this._period,time:a}},t.prototype._indexOfPeriodInYear=function(e){var t=this._builder.indexOfPeriod(e),i=l(t/this._period)*this._period;return-1===t&&(i=-this._period),i},t}(u);function _(e,t){var i=r.get_day_of_week(t)-e.firstDayOfWeek();return i<0?i+7:i}function m(e,t){var i=r.get_day_of_year(t)-1,n=_(e,t)-i%7;return 0===n?l(i/7):(n>=0&&(n-=7),l((n+i)/7))}var v=function(){function e(){}return e.prototype.indexOfPeriod=function(e){return r.get_day_of_year(e)-1},e.prototype.startOfPeriod=function(e,t,i){var n=r.days_per_year(i);return r.get_cal(r.get_timezone("Etc/UTC"),i,r.JANUARY,1+Math.min(t,n))},e}(),g=function(e){function t(t){var i=e.call(this)||this;return i._sessionsSpec=t,i}return Object(o.__extends)(t,e),t.prototype.indexOfPeriod=function(t){return e.prototype.indexOfPeriod.call(this,t)-function(e,t){var i=m(e,t),n=r.get_cal(r.get_timezone("Etc/UTC"),r.get_year(t),r.JANUARY,1);r.add_date(n,7*i);var o=i*e.weekEndsCount()+e.holidaysFromYearStart(n),s=r.get_day_of_year(t)-r.get_day_of_year(n);return o+s-e.calendarDaysToBusinessDays(n,s)}(this._sessionsSpec,t)},t.prototype.startOfPeriod=function(t,i,n){var o=7-this._sessionsSpec.weekEndsCount(),s=Math.max(0,l(i/o)-1),a=r.get_cal(r.get_timezone("Etc/UTC"),n,r.JANUARY,1),c=r.get_days_per_year(a);if(r.add_date(a,7*s),(i-=o*s-this._sessionsSpec.holidaysFromYearStart(a))>0){var u=this._sessionsSpec.businessDaysToCalendarDays(a,i);r.add_date(a,u)}var h=r.get_day_of_year(a)-1;return n<r.get_year(a)&&(h+=c),e.prototype.startOfPeriod.call(this,t,h,n)},t}(v),y=function(){function e(e){this._builder=null,this._initialized=!1,this._session=e}return e.prototype.indexOfPeriod=function(e){return this._getBuilder().indexOfPeriod(e)},
e.prototype.startOfPeriod=function(e,t,i){return this._getBuilder().startOfPeriod(e,t,i)},e.prototype._getBuilder=function(){return null!==this._builder&&this._initialized||(this._builder=this._session.spec.hasWeekEnds()?new g(this._session.spec):new v,this._initialized=!0),this._builder},e}(),b=function(){function e(e){this._session=e}return e.prototype.indexOfPeriod=function(e){var t=m(this._session.spec,e);if(0===t){var i=r.get_timezone(this._session.spec.timezone());e<this.startOfPeriod(i,0,r.get_year(e))&&(t=-1)}return t},e.prototype.startOfPeriod=function(e,t,i){var n=r.get_cal(r.get_timezone("Etc/UTC"),i,r.JANUARY,1),o=_(this._session.spec,n),s=0===o?7*t:7*(t+1)-o;return s>r.get_days_per_year(n)?this.startOfPeriod(e,0,i+1):(r.add_date(n,s),n)},e}(),S=function(){function e(){}return e.prototype.indexOfPeriod=function(e){return r.get_month(e)},e.prototype.startOfPeriod=function(e,t,i){if(t<0){var n=l((11-t)/12);i-=n,t+=12*n}else t>r.DECEMBER&&(i++,t=r.JANUARY);return r.get_cal(r.get_timezone("Etc/UTC"),i,t,1)},e}();function w(e,t,i,r){void 0===r&&(r=!1);var o=n.Interval.parse(e),s=o.multiplier();return o.kind()===n.ResolutionKind.Minutes?new h(60*s,t):o.kind()===n.ResolutionKind.Seconds?new h(s,t):o.kind()===n.ResolutionKind.Range?new h(60*s,t):new f(t,i,s,function(e,t){switch(e){case n.ResolutionKind.Days:return new y(t);case n.ResolutionKind.Weeks:return new b(t);case n.ResolutionKind.Months:return new S}throw new Error("Unknown dwm resolution: "+e)}(o.kind(),t),r)}i.d(t,"b",(function(){return w})),i.d(t,"a",(function(){return c}));new c("Etc/UTC","0000-0000:1234567")},IjC5:function(e,t,i){"use strict";i.r(t),i.d(t,"RectangleRenderer",(function(){return h}));var r=i("Eyy1"),n=i("aO4+"),o=i("f6yo"),s=i("GEp6"),a=i("VdBB"),l=i("Tmoa"),c=i("jFln"),u=i("8Uy/"),h=function(){function e(e,t,i){this._data=null,this._hitTestResult=e||new a.HitTestResult(a.HitTestResult.MOVEPOINT),this._backHitTestResult=t||new a.HitTestResult(a.HitTestResult.MOVEPOINT_BACKGROUND),this._forceOverrideTransparency=Boolean(i)}return e.prototype.setData=function(e){this._data=e},e.prototype.hitTest=function(e,t){if(null===this._data||this._data.points.length<2||this._data.nohittest)return null;var i=this._getPointsInPhysicalSpace(t),r=i[0],o=i[1],a=new n.Point(o.x,r.y),l=new n.Point(r.x,o.y),c=new n.Point(e.x*t.pixelRatio,e.y*t.pixelRatio),u=this._extendAndHitTestLineSegment(c,r,a,t);if(null!==u)return u;var h=this._extendAndHitTestLineSegment(c,l,o,t);if(null!==h)return h;var d=Object(s.distanceToSegment)(a,o,c);return d.distance<=3||(d=Object(s.distanceToSegment)(r,l,c)).distance<=3?this._hitTestResult:this._data.fillBackground?this._hitTestBackground(c,r,o,t):null},e.prototype.getColor=function(){var e=Object(r.ensure)(this._data);return void 0===e.transparency?e.backcolor:Object(l.generateColor)(e.backcolor,e.transparency,this._forceOverrideTransparency)},e.prototype.draw=function(e,t){if(!(null===this._data||this._data.points.length<2||this._data.linewidth<=0&&!this._data.fillBackground)){
var i=Math.max(1,Math.floor(this._data.linewidth*t.pixelRatio)),r=i%2?.5:0,o=this._getPointsInPhysicalSpace(t,r),s=o[0],a=o[1],l=new n.Point(a.x,s.y),h=new n.Point(s.x,a.y);e.save(),this._data.fillBackground&&this._drawBackground(e,s,a,t),this._data.linewidth>0&&(e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=i,Object(c.setLineStyle)(e,u.LINESTYLE_SOLID),this._extendAndDrawLineSegment(e,s,l,t),this._extendAndDrawLineSegment(e,h,a,t),Object(c.drawLine)(e,s.x,s.y,h.x,h.y),Object(c.drawLine)(e,l.x,l.y,a.x,a.y)),e.restore()}},e.prototype._getPointsInPhysicalSpace=function(e,t){void 0===t&&(t=0);var i=Object(r.ensureNotNull)(this._data).points,o=i[0],s=i[1],a=e.pixelRatio,l=Math.round(o.x*a)+t,c=Math.round(s.x*a)+t,u=Math.round(o.y*a)+t,h=Math.round(s.y*a)+t;return[new n.Point(l,u),new n.Point(c,h)]},e.prototype._extendAndHitTestLineSegment=function(e,t,i,r){var n=this._extendAndClipLineSegment(t,i,r);if(null!==n&&Object(s.distanceToSegment)(n[0],n[1],e).distance<=3)return this._hitTestResult;return null},e.prototype._extendAndDrawLineSegment=function(e,t,i,r){var n=this._extendAndClipLineSegment(t,i,r);null!==n&&Object(c.drawLine)(e,n[0].x,n[0].y,n[1].x,n[1].y)},e.prototype._extendAndClipLineSegment=function(e,t,i){var o=Object(r.ensureNotNull)(this._data);if(Object(n.equalPoints)(e,t))return null;var s=i.physicalWidth,a=Math.min(e.x,t.x),l=Math.max(e.x,t.x),c=o.extendLeft?0:Math.max(a,0),u=o.extendRight?s:Math.min(l,s);return c>u||u<=0||c>=s?null:[new n.Point(c,e.y),new n.Point(u,t.y)]},e.prototype._drawBackground=function(e,t,i,r){if(!(r.cssWidth<=0||r.cssHeight<=0)){var n=this._extendAndClipLineSegment(t,i,r);if(null!==n){var o=n[0],s=n[1];e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(s.x,o.y),e.lineTo(s.x,s.y),e.lineTo(o.x,s.y),e.lineTo(o.x,o.y),e.fillStyle=this.getColor(),e.fill()}}},e.prototype._hitTestBackground=function(e,t,i,r){var s=this._extendAndClipLineSegment(t,i,r);return null!==s&&Object(o.pointInBox)(e,Object(n.box)(s[0],s[1]))?this._backHitTestResult:null},e}()},InMJ:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Flat Bottom");function s(e,t){this._constructor="LineToolFlatBottom";var n=t||s.createProperties();r.call(this,e,n),this.version=s.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("gr7S").FlatBottomPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.version=1,s.prototype.pointsCount=function(){return 3},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Flat Bottom"},s.prototype.hasEditableCoordinates=function(){return!1},s.prototype.addPoint=function(e,t){return t&&t.shift()&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),r.prototype.addPoint.call(this,e)},s.prototype.setLastPoint=function(e,t){return t&&t.shift()&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),r.prototype.setLastPoint.call(this,e)},
s.prototype.setPoint=function(e,t,i){if(i&&i.shift()&&1===e){this._snapPoint45Degree(t,this.points()[0])}if(2===e)this._points[1].index=t.index;else if(3===e)return this._points[0].index=t.index,void(this._points[2].price=t.price);r.prototype.setPoint.call(this,e,t)},s.prototype.canHasAlert=function(){return!0},s.prototype._getAlertPlots=function(){var e=this._points[0],t=this._points[1],i=[];e.index<=t.index?(i.push(e),i.push(t)):(i.push(t),i.push(e));var r=this._points[2];r.time=t.time,r.index=t.index;var n,o,s,a,l={price:r.price,time:e.time,index:e.index},c=[];r.index<=l.index?(c.push(r),c.push(l)):(c.push(l),c.push(r)),i[0].price>c[0].price?(n=i,o=c):c[0].price>i[0].price||c[1].price>i[1].price?(n=c,o=i):(n=i,o=c);var u=this.properties().extendLeft.value(),h=this.properties().extendRight.value();return e.index<=t.index?(s=u,a=h):(s=h,a=u),[this._linePointsToAlertPlot(n,"Upper",s,a),this._linePointsToAlertPlot(o,"Lower",u,a)]},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("vm8R").GeneralTrendFiguresDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolflatbottom",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolFlatBottom=s},JOqt:function(e,t,i){"use strict";i.r(t),i.d(t,"debounce",(function(){return r}));var r=function(e,t){var i,r,n=0;function o(){e.apply(r,i)}return function(){r=this,i=arguments,clearTimeout(n),n=setTimeout(o,t)}}},JT5O:function(e,t,i){"use strict";i.r(t),i.d(t,"StudyMarket",(function(){return o}));var r=i("aIyQ"),n=i.n(r),o=function(){function e(e,t){this.visibilityChanged=new n.a,this._dialogPromise=null,this._dialog=null,this._chartWidgetCollection=e,this._options=t}return e.prototype.isVisible=function(){return null!==this._dialog&&this._dialog.isVisible()},e.prototype.show=function(e){var t;null===this._dialog&&this._requestDialog(e),null===(t=this._dialog)||void 0===t||t.open(e)},e.prototype.hide=function(){var e;null===(e=this._dialog)||void 0===e||e.hide()},e.prototype.onCustomScriptModified=function(){var e;null===(e=this._dialog)||void 0===e||e.updateUserStudies()},e.prototype.resetAllPages=function(){var e;null===(e=this._dialog)||void 0===e||e.resetAllStudies()},e.prototype._requestDialog=function(e){var t,r=this;if(null===this._dialogPromise){var n=void 0;n=(null===(t=this._options)||void 0===t?void 0:t.onWidget)?Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(12),i.e(20),i.e(21),i.e(22),i.e(52),i.e(53),i.e(62),i.e(129),i.e(232),i.e(234),i.e(261),i.e(0),i.e(9),i.e(16),i.e(43),i.e(196),i.e("study-market")]).then(i.bind(null,"zbLM")).then((function(e){return new e.IndicatorsLibraryContainer(r._chartWidgetCollection,r._options)
})):Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(12),i.e(20),i.e(21),i.e(22),i.e(52),i.e(53),i.e(62),i.e(129),i.e(232),i.e(234),i.e(261),i.e(0),i.e(9),i.e(16),i.e(43),i.e(196),i.e("study-market")]).then(i.bind(null,"Sr30")).then((function(e){return new e.IndicatorsContainer(r._chartWidgetCollection)})),this._dialogPromise=n.then((function(t){r._dialog=t,r._dialog.getVisibilityChanged().subscribe(null,(function(e){r.visibilityChanged.fire(e)})),r._dialog.open(e)}))}return this._dialogPromise},e}()},JUKA:function(e,t){e.exports=[{value:"",name:"All Exchanges",desc:window.t("All Exchanges"),flag:"",country:"",group:"AllExchanges",providerId:""},{value:"BITHUMB",name:"Bithumb",desc:window.t("Bithumb"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bithumb"},{value:"BITKUB",name:"BITKUB",desc:window.t("BITKUB"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitkub"},{value:"796",name:"796",desc:window.t("796"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"COINFLOOR",name:"Coinfloor",desc:window.t("Coinfloor"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"coinfloor"},{value:"DERIBIT",name:"Deribit",desc:window.t("Deribit"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"deribit"},{value:"BITBAY",name:"BitBay",desc:window.t("BitBay"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitbay"},{value:"CURRENCYCOM",name:"Currencycom",desc:window.t("Currencycom"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"currencycom"},{value:"OKEX",name:"OKEx",desc:window.t("OKEx"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"okex"},{value:"DFM",name:"DFM",desc:window.t("DFM — Dubai Financial Market"),flag:"ae",group:"Middle East / Africa",country:"ae",providerId:""},{value:"LSE",name:"LSE",desc:window.t("LSE — London Stock Exchange (UK Companies)"),flag:"uk",group:"Europe",country:"uk",providerId:""},{value:"LSIN",name:"LSIN",desc:window.t("LSIN — London Stock Exchange (International Companies)"),flag:"uk",group:"Europe",country:"uk",providerId:""},{value:"EUREX",name:"EUREX",desc:window.t("EUREX — Eurex Exchange"),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"MGEX",name:"MGEX",desc:window.t("MGEX — Futures"),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:""},{value:"NASDAQ",name:"NASDAQ",desc:window.t("NASDAQ — NASDAQ Stock Market"),flag:"usa",group:"North America",country:"us",priorityInGroup:1,providerId:""},{value:"NYSE",name:"NYSE",desc:window.t("NYSE — New York Stock Exchange"),flag:"usa",group:"North America",country:"us",priorityInGroup:2,providerId:""},{value:"AMEX",name:"ARCA",desc:window.t("ARCA — ARCA & MKT"),flag:"usa",group:"North America",country:"us",priorityInGroup:3,providerId:""},{value:"OTC",name:"OTC",desc:window.t("OTC — OTC Markets"),flag:"usa",group:"North America",country:"us",priorityInGroup:4,providerId:""},{value:"DJ",name:"DJ",desc:window.t("DJ — Dow Jones Indices"),flag:"usa",
group:"North America",country:"us",priorityInGroup:5,providerId:""},{value:"SP",name:"SP",desc:window.t("SP — S&P Indices"),flag:"usa",group:"North America",country:"us",priorityInGroup:6,providerId:""},{value:"CBOE",name:"CBOE",desc:window.t("CBOE — Chicago Board Options Exchange"),flag:"usa",group:"North America",country:"us",priorityInGroup:7,providerId:""},{value:"CBOT",name:"CBOT",desc:window.t("CBOT — Chicago Board of Trade"),flag:"usa",group:"North America",country:"us",priorityInGroup:8,providerId:""},{value:"CME",name:"CME GLOBEX",desc:window.t("CME GLOBEX — Chicago Mercantile Exchange Globex"),flag:"usa",group:"North America",country:"us",priorityInGroup:9,providerId:""},{value:"COMEX",name:"COMEX",desc:window.t("COMEX — Commodity Exchange"),flag:"usa",group:"North America",country:"us",priorityInGroup:10,providerId:""},{value:"NYMEX",name:"NYMEX",desc:window.t("NYMEX — New York Mercantile Exchange"),flag:"usa",group:"North America",country:"us",priorityInGroup:11,providerId:""},{value:"ICEUS",name:"ICEUS",desc:window.t("ICEUS — ICE Futures U.S."),flag:"usa",group:"North America",country:"us",priorityInGroup:12,providerId:""},{value:"CSE",name:"CSE",desc:window.t("CSE — Canadian Securities Exchange"),flag:"canada",group:"North America",country:"ca",priorityInGroup:13,providerId:""},{value:"NEO",name:"NEO",desc:window.t("NEO — NEO Exchange"),flag:"canada",group:"North America",country:"ca",priorityInGroup:14,providerId:""},{value:"TSX",name:"TSX",desc:window.t("TSX — Toronto Stock Exchange"),flag:"canada",group:"North America",country:"ca",priorityInGroup:15,providerId:""},{value:"TSXV",name:"TSXV",desc:window.t("TSXV — TSX Venture Exchange"),flag:"canada",group:"North America",country:"ca",priorityInGroup:16,providerId:""},{value:"MOEX",name:"MOEX",desc:window.t("MOEX — Moscow Exchange"),flag:"russia",group:"Europe",country:"ru",providerId:""},{value:"MYX",name:"MYX",desc:window.t("MYX — Bursa Malaysia Berhad"),flag:"malaysia",group:"Asia / Pacific",country:"my",providerId:""},{value:"FTSEMYX",name:"FTSE",desc:window.t("FTSE — Bursa Malaysia FTSE Indices"),flag:"malaysia",group:"Asia / Pacific",country:"my",providerId:""},{value:"HOSE",name:"HOSE",desc:window.t("HOSE — Ho Chi Minh City Stock Exchange"),flag:"vietnam",group:"Asia / Pacific",country:"vn",providerId:""},{value:"HNX",name:"HNX",desc:window.t("HNX — Hanoi Stock Exchange"),flag:"vietnam",group:"Asia / Pacific",country:"vn"},{value:"UPCOM",name:"HNX",desc:window.t("HNX — Hanoi Stock Exchange (UPCoM)"),flag:"vietnam",group:"Asia / Pacific",country:"vn"},{value:"BITSTAMP",name:"Bitstamp",desc:window.t("Bitstamp"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitstamp"},{value:"FX",name:"FXCM",desc:window.t("FXCM"),flag:"forex",group:"Forex",country:"",providerId:"fxcm"},{value:"MERCADO",name:"Mercado",desc:window.t("Mercado"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"mercado"},{value:"BTCE",name:"BTC-e",desc:window.t("BTC-E"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{
value:"BTCYOU",name:"BTCYou",desc:window.t("BTCYou"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"btcyou"},{value:"HITBTC",name:"HitBTC",desc:window.t("HitBTC"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"hitbtc"},{value:"BSE",name:"BSE",desc:window.t("BSE — Bombay Stock Exchange"),flag:"india",group:"Asia / Pacific",country:"in",providerId:""},{value:"NYMEX_MINI",name:"NYMEX E-mini",desc:window.t("NYMEX E-mini — New York Mercantile Exchange"),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:""},{value:"COMEX_MINI",name:"COMEX E-mini",desc:window.t("COMEX E-mini — Commodity Exchange"),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:""},{value:"ICEEUR",name:"ICEEUR",desc:window.t("ICEEUR — ICE Futures Europe"),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"NSE",name:"NSE",desc:window.t("NSE — National Stock Exchange of India"),flag:"india",group:"Asia / Pacific",country:"in",providerId:""},{value:"MCX",name:"MCX",desc:window.t("MCX — Multi Commodity Exchange"),flag:"india",group:"Asia / Pacific",country:"in",providerId:""},{value:"KCBT",name:"KCBT",desc:window.t("KCBT Futures"),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:""},{value:"OKCOIN",name:"OKCoin",desc:window.t("OKCoin"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"okcoin"},{value:"CBOT_MINI",name:"CBOT E-mini",desc:window.t("CBOT E-mini — Chicago Board of Trade"),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:""},{value:"KRAKEN",name:"Kraken",desc:window.t("Kraken"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"kraken"},{value:"KUCOIN",name:"KuCoin",desc:window.t("KuCoin"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"kucoin"},{value:"CME_MINI",name:"CME E-mini",desc:window.t("CME GLOBEX E-mini — Chicago Mercantile Exchange Globex"),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:""},{value:"DJ",name:"DJ",desc:window.t("DJ — Dow Jones Indexes"),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:""},{value:"SP",name:"SP",desc:window.t("SP — S&P Indexes"),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:""},{value:"BTCCHINA",name:"BTC China",desc:window.t("BTC China"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"HUOBI",name:"Huobi",desc:window.t("Huobi"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"huobi"},{value:"KORBIT",name:"Korbit",desc:window.t("Korbit"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"korbit"},{value:"THEROCKTRADING",name:"The Rock Trading",desc:window.t("The Rock Trading"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"therocktrading"},{value:"ANX",name:"ANX",desc:window.t("ANX"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"MEXBT",name:"meXBT",desc:window.t("meXBT"),flag:"bitcoin",
group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"FTX",name:"FTX",desc:window.t("FTX"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"ftx"},{value:"GEMINI",name:"Gemini",desc:window.t("Gemini"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"gemini"},{value:"BITVC",name:"BitVC",desc:window.t("BitVC"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"BITYES",name:"BitYes",desc:window.t("BitYes"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"BNC",name:"BNC",desc:window.t("BNC"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"BITFLYER",name:"bitFlyer",desc:window.t("bitFlyer"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitflyer"},{value:"BYBIT",name:"Bybit",desc:window.t("Bybit"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bybit"},{value:"BITMEX",name:"BitMEX",desc:window.t("BitMEX"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitmex"},{value:"BITPANDAPRO",name:"Bitpanda Pro",desc:window.t("Bitpanda Pro"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitpanda"},{value:"FOREXCOM",name:"FOREX.com",desc:window.t("FOREX.com"),flag:"forex",group:"Forex",country:"",providerId:"gain"},{value:"FX_IDC",name:"ICE",desc:window.t("ICE Data Services"),flag:"forex",group:"Forex",country:"",providerId:"ice"},{value:"CEXIO",name:"CEX.IO",desc:window.t("CEX.IO"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"cexio"},{value:"BITSO",name:"Bitso",desc:window.t("Bitso"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitso"},{value:"BITFINEX",name:"Bitfinex",desc:window.t("Bitfinex"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitfinex"},{value:"MTGOX",name:"Mt.Gox",desc:window.t("Mt.Gox"),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:"mtgox"},{value:"PHEMEX",name:"Phemex",desc:window.t("Phemex"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"phemex"},{value:"POLONIEX",name:"Poloniex",desc:window.t("Poloniex"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"poloniex"},{value:"TRADESTATION",name:"TradeStation",desc:window.t("TradeStation"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"tradestation"},{value:"BINGBON",name:"Bingbon",desc:window.t("Bingbon"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bingbon"},{value:"BTSE",name:"BTSE",desc:window.t("BTSE"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"btse"},{value:"BITCOKE",name:"BitCoke",desc:window.t("BitCoke"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitcoke"},{value:"BITTREX",name:"Bittrex",desc:window.t("Bittrex"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bittrex"},{value:"BINANCE",name:"Binance",desc:window.t("Binance"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"binance"},{value:"BCBA",name:"BYMA",
desc:window.t("BYMA — Argentine Stock Exchanges and Markets"),flag:"argentina",group:"Mexico and South America",country:"ar",providerId:""},{value:"BMFBOVESPA",name:"B3",desc:window.t("B3 — Brasil Bolsa Balcao S.A."),flag:"brasil",group:"Mexico and South America",country:"br",providerId:""},{value:"BMV",name:"BMV",desc:window.t("BMV — Mexican Stock Exchange"),flag:"mexico",group:"Mexico and South America",country:"mx",providerId:""},{value:"BVL",name:"BVL",desc:window.t("BVL — Bolsa de Valores de Lima"),flag:"peru",group:"Mexico and South America",country:"pe",providerId:""},{value:"BCS",name:"SSE",desc:window.t("SSE — Santiago Stock Exchange"),flag:"chile",group:"Mexico and South America",country:"cl",providerId:""},{value:"BVC",name:"BVC",desc:window.t("BVC — Bolsa de Valores de Colombia"),flag:"colombia",group:"Mexico and South America",country:"co",providerId:""},{value:"NAG",name:"NSE",desc:window.t("NSE — Nagoya Stock Exchange"),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:""},{value:"TSE",name:"TSE",desc:window.t("TSE — Tokyo Stock Exchange"),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:""},{value:"TFEX",name:"TFEX",desc:window.t("TFEX — Thailand Futures Exchange"),flag:"thailand",group:"Asia / Pacific",country:"th",providerId:""},{value:"TFX",name:"TFX",desc:window.t("TFX — Tokyo Financial Exchange"),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:""},{value:"TOCOM",name:"TOCOM",desc:window.t("TOCOM — Tokyo Commodity Exchange"),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:""},{value:"OSE",name:"OSE",desc:window.t("OSE — Osaka Exchange"),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:""},{value:"SGX",name:"SGX",desc:window.t("SGX — Singapore Stock Exchange"),flag:"singapore",group:"Asia / Pacific",country:"sg",providerId:""},{value:"SAPSE",name:"SSE",desc:window.t("SSE — Sapporo Securities Exchange"),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:""},{value:"FSE",name:"FSE",desc:window.t("FSE — Fukuoka Stock Exchange"),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:""},{value:"TWSE",name:"TWSE",desc:window.t("TWSE — Taiwan Stock Exchange"),flag:"taiwan",group:"Asia / Pacific",country:"tw",providerId:""},{value:"SET",name:"SET",desc:window.t("SET — Stock Exchange of Thailand"),flag:"thailand",group:"Asia / Pacific",country:"th",providerId:""},{value:"KRX",name:"KRX",desc:window.t("KRX — Korea Stock Exchange"),flag:"south_korea",group:"Asia / Pacific",country:"kr",providerId:""},{value:"BAHRAIN",name:"BSE",desc:window.t("BSE — Bahrain Stock Exchange"),flag:"bahrain",group:"Middle East / Africa",country:"bh",providerId:""},{value:"BELEX",name:"BELEX",desc:window.t("BELEX — Belgrade Stock Exchange"),flag:"serbia",group:"Europe",country:"rs",providerId:""},{value:"EGX",name:"EGX",desc:window.t("EGX — Egyptian Exchange"),flag:"egypt",group:"Middle East / Africa",country:"eg",providerId:""},{value:"TADAWUL",name:"Tadawul",desc:window.t("Tadawul — Saudi Stock Exchange"),flag:"saudi_arabia",group:"Middle East / Africa",
country:"sa",providerId:""},{value:"IDX",name:"IDX",desc:window.t("IDX — Indonesia Stock Exchange"),flag:"indonesia",group:"Asia / Pacific",country:"id",providerId:""},{value:"HSI",name:"HSI",desc:window.t("HSI — Hang Seng Indices"),flag:"hong_kong",group:"Asia / Pacific",country:"hk",providerId:""},{value:"QSE",name:"QSE",desc:window.t("QSE — Qatar Stock Exchange"),flag:"qatar",group:"Middle East / Africa",country:"qa",providerId:""},{value:"OANDA",name:"OANDA",desc:window.t("OANDA"),flag:"forex",group:"Forex",country:"",providerId:"oanda"},{value:"SAXO",name:"Saxo",desc:window.t("Saxo"),flag:"forex",group:"Forex",country:"",providerId:"saxobank"},{value:"EURONEXT",name:"Euronext",desc:window.t("Euronext — Euronext NV"),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"EURONEXTAMS",name:"EURONEXTAMS",desc:window.t("Euronext — Euronext Amsterdam"),flag:"netherlands",group:"Europe",country:"nl",providerId:""},{value:"EURONEXTBRU",name:"EURONEXTBRU",desc:window.t("Euronext — Euronext Brussels"),flag:"belgium",group:"Europe",country:"be",providerId:""},{value:"EURONEXTLIS",name:"EURONEXTLIS",desc:window.t("Euronext — Euronext Lisbon"),flag:"portugal",group:"Europe",country:"pt",providerId:""},{value:"EURONEXTPAR",name:"EURONEXTPAR",desc:window.t("Euronext — Euronext Paris"),flag:"france",group:"Europe",country:"fr",providerId:""},{value:"OMX",name:"OMX",desc:window.t("OMX — Nasdaq OMX Group"),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"FWB",name:"FWB",desc:window.t("FWB — Frankfurt Stock Exchange"),flag:"germany",group:"Europe",country:"de",providerId:""},{value:"FRA",name:"FRA",desc:window.t("FRA — Frankfurt Stock Exchange"),flag:"germany",hideInSymbolSearch:!0,group:"Europe",country:"de",providerId:""},{value:"SWB",name:"SWB",desc:window.t("SWB — Stuttgart Stock Exchange"),flag:"germany",group:"Europe",country:"de",providerId:""},{value:"XETR",name:"XETR",desc:window.t("XETR — Xetra"),flag:"germany",group:"Europe",country:"de",providerId:""},{value:"BME",name:"BME",desc:window.t("BME — Bolsa de Madrid"),flag:"spain",group:"Europe",country:"es",providerId:""},{value:"GPW",name:"GPW",desc:window.t("GPW — Warsaw Stock Exchange"),flag:"poland",group:"Europe",country:"pl",providerId:""},{value:"NEWCONNECT",name:"GPW — NewConnect",desc:window.t(" GPW — NewConnect"),flag:"poland",group:"Europe",country:"pl"},{value:"MIL",name:"MIL",desc:window.t("MIL — Milan Stock Exchange"),flag:"italy",group:"Europe",country:"it",providerId:""},{value:"MILSEDEX",name:"MILSEDEX",desc:window.t("MILSEDEX — Milan Stock Exchange"),flag:"italy",group:"Europe",hideInSymbolSearch:!0,country:"it",providerId:""},{value:"OSL",name:"OSE",desc:window.t("OSE — Oslo Stock Exchange"),flag:"norway",group:"Europe",country:"no",providerId:""},{value:"IST",name:"IST",desc:window.t("IST — Istanbul Stock Exchange"),flag:"turkey",hideInSymbolSearch:!0,group:"Europe",country:"tr",providerId:""},{value:"BIST",name:"BIST",desc:window.t("BIST — Borsa Istanbul"),flag:"turkey",group:"Europe",country:"tr",providerId:""},{
value:"TASE",name:"TASE",desc:window.t("TASE — Tel Aviv Stock Exchange"),flag:"israel",group:"Middle East / Africa",country:"il",providerId:""},{value:"SIX",name:"SIX",desc:window.t("SIX — Swiss Stock Exchange"),flag:"switzerland",hideInSymbolSearch:!0,group:"Europe",country:"ch",providerId:""},{value:"SIX",name:"SIX",desc:window.t("SIX — SIX Swiss Exchange"),flag:"switzerland",group:"Europe",country:"ch",providerId:""},{value:"ASX",name:"ASX",desc:window.t("ASX — Australian Securities Exchange"),flag:"australia",group:"Asia / Pacific",country:"au",providerId:""},{value:"NZX",name:"NZX",desc:window.t("NZX — New Zealand Stock Exchange"),flag:"new_zealand",group:"Asia / Pacific",country:"nz",providerId:""},{value:"SSE",name:"SSE",desc:window.t("SSE — Shanghai Stock Exchange"),flag:"china",group:"Asia / Pacific",country:"cn",providerId:""},{value:"SZSE",name:"SZSE",desc:window.t("SZSE — Shenzhen Stock Exchange"),flag:"china",group:"Asia / Pacific",country:"cn",providerId:""},{value:"HKEX",name:"HKEX",desc:window.t("HKEX — Hong Kong Exchange"),flag:"hong_kong",group:"Asia / Pacific",country:"hk",providerId:""},{value:"NSENG",name:"NSE",desc:window.t("NSE — Nigerian Stock Exchange"),flag:"nigeria",group:"Middle East / Africa",country:"ng",providerId:""},{value:"JSE",name:"JSE",desc:window.t("JSE — Johannesburg Stock Exchange"),flag:"south_africa",group:"Middle East / Africa",country:"za",providerId:""},{value:"COINBASE",name:"Coinbase",desc:window.t("Coinbase"),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"coinbase"},{value:"USI",name:"USI",desc:window.t("USI"),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:""},{value:"OMXHEX",name:"HEX",desc:window.t("HEX — Nasdaq Helsinki"),flag:"finland",group:"Europe",country:"fi",providerId:""},{value:"OMXICE",name:"ICEX",desc:window.t("ICEX — Nasdaq Iceland"),flag:"iceland",group:"Europe",country:"is",providerId:""},{value:"OMXCOP",name:"CSE",desc:window.t("CSE — Nasdaq Copenhagen"),flag:"denmark",group:"Europe",country:"dk",providerId:""},{value:"OMXSTO",name:"STO",desc:window.t("STO — Nasdaq Stockholm"),flag:"sweden",group:"Europe",country:"se",providerId:""},{value:"OMXVSE",name:"VSE",desc:window.t("VSE — Nasdaq Vilnius"),flag:"lithuania",group:"Europe",country:"lt",providerId:""},{value:"OMXTSE",name:"TALSE",desc:window.t("TALSE — Nasdaq Tallinn"),flag:"estonia",group:"Europe",country:"ee",providerId:""},{value:"OMXRSE",name:"OMXR",desc:window.t("OMXR — Nasdaq Riga"),flag:"latvia",group:"Europe",country:"lv",providerId:""},{value:"OMXNORDIC",name:"OMXNORDIC",desc:window.t("OMXNORDIC"),flag:"europe",hideInSymbolSearch:!0,group:"Europe",country:"eu",providerId:""},{value:"OMXBALTIC",name:"OMXBALTIC",desc:window.t("OMXBALTIC"),flag:"europe",hideInSymbolSearch:!0,group:"Europe",country:"eu",providerId:""}]},"JUY+":function(e,t,i){"use strict";i.r(t),i.d(t,"getPriceAlertsDispatcher",(function(){return n})),i.d(t,"getPriceAlertsDispatcherIfExists",(function(){return o})),i.d(t,"setPriceAlertsDispatcherIfNotExists",(function(){return s}))
;i("NNtz");var r=null;function n(){return new Promise((function(e){null===r?Promise.all([i.e("vendors_embed"),i.e(38),i.e(55),i.e(64),i.e(88),i.e(84),i.e(102),i.e(154),i.e(147),i.e(188),i.e(200),i.e(220),i.e("price-alerts-dispatcher")]).then(i.t.bind(null,"3Tqy",7)).then((function(t){null===r&&(r=new t.AlertsDispatcher),e(r)})):e(r)}))}function o(){return r}function s(e){return null===r&&(r=e,!0)}},JWMC:function(e,t,i){"use strict";i.r(t),i.d(t,"trackEvent",(function(){return l}));i("bSeV");var r=i("FQhm"),n=i("Kxc7"),o=i("txPx"),s=Object(o.getLogger)("Common.TrackEvent"),a=[/Study_(Drawing)_(.*)/,/(Study)_(.*)@tv-basicstudies/,/(Study)_(.*)/,/(Chart Style) (.*)/],l=function(e,t,i){if(n.enabled("charting_library_base"))!function(e,t,i){t=t||e||i||"";for(var n="",o=0;o<a.length;o++){var s=t.match(a[o]);if(s&&3===s.length){t=s[1],n=s[2];break}}Object(r.emit)(t.toLowerCase().replace(" ","_"),{category:e,label:i,value:n})}(e,t,i);else{var o=(e?e+":":"")+t;i&&(o+=" "+i),s.logNormal(o),n.enabled("widget")||!window._UNIT_TESTS&&window.gtag&&window.gtag("event",t,{event_category:e,event_label:i})}};"undefined"!=typeof window&&(window.TradingView=window.TradingView||{},window.TradingView.trackEvent=l)},"JWp+":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=(i("P5fv"),i("BxxN")),o=i("gOE2"),s=i("txPx"),a=Object(s.getLogger)("Lib.AsyncGzip"),l=[];var c=i("BHQF");function u(e){if(e.ok)return e.json();throw new Error("not ok")}var h=i("mNbo");i.d(t,"getGlobalNotifications",(function(){return d})),i.d(t,"getCharts",(function(){return p})),i.d(t,"getChartsCount",(function(){return f})),i.d(t,"loadChart",(function(){return _})),i.d(t,"saveChart",(function(){return m})),i.d(t,"removeChart",(function(){return v})),i.d(t,"getStudyTemplatesList",(function(){return y})),i.d(t,"invalidateStudyTemplatesList",(function(){return b})),i.d(t,"saveStudyTemplate",(function(){return S})),i.d(t,"getStudyTemplateContent",(function(){return w})),i.d(t,"removeStudyTemplate",(function(){return P})),i.d(t,"getStudyTemplateContentById",(function(){return C})),i.d(t,"getStandardStudyTemplateContentById",(function(){return T})),i.d(t,"removeStudyTemplateById",(function(){return x})),i.d(t,"renameStudyTemplate",(function(){return I})),i.d(t,"replaceStudyTemplate",(function(){return E}));function d(e,t){var i={count:t};return e&&(i.lastId=e),$.ajax({url:"/global-notifications/",cache:!1,dataType:"json",type:"GET",data:i})}function p(e,t,i){$.getJSON("/my-charts/",{limit:i},e).fail(t)}function f(e,t){$.getJSON("/api/v1/charts/count/",void 0,e).fail(t)}function _(e){var t=Object(n.a)({chartId:e.url}),i=document.createElement("a");i.href=t,!Object(h.isOnMobileAppPage)("new")&&/^\/chart(\/|$)/.test(location.pathname)&&(i.target="_blank",i.rel="noopener"),i.click()}function m(e,t,i,r,n,s,c){var u,h,d;(u=r.content,d=new Promise((function(e,t){var i=setTimeout(t,5e3,new Error("Loading timed out"));(h=l.pop()||new o).onerror=t,h.onmessageerror=t,h.onmessage=function(r){clearTimeout(i),
"done"===r.data.type?e(r.data.payload):i=setTimeout(t,3e4,new Error("Processing timed out"))},h.postMessage({type:"do",payload:u})})),d.then((function(){l.length<1?(delete h.onerror,delete h.onmessage,delete h.onmessageerror,l.push(h)):h.terminate()}),(function(e){a.logError("Worker request failed: "+e.message),h.terminate()})),d).catch((function(){return null})).then((function(e){var t=new FormData;for(var i in r)"content"===i&&e?t.append(i,new Blob([e],{type:"application/gzip"}),"blob.gz"):t.append(i,String(r[i]));return fetch("/savechart/",{method:"POST",credentials:"same-origin",body:t})})).then((function(e){if(!e.ok)throw e;return e.text()})).then(s,c)}function v(e,t){$.post("/deletechart/",{uid:[e]},(function(e){e.error||("string"==typeof t?document.location.href=t:"function"==typeof t?t():window.location.reload())}))}var g=null;function y(e){null===g&&(g=Object(c.fetch)("/api/v1/study-templates",{credentials:"same-origin"}).then(u).then((function(e){for(var t=new Set((e.standard||[]).map((function(e){return e.name}))),i=(e.custom||[]).map((function(e){return Object(r.__assign)(Object(r.__assign)({},e),{is_default:!1})})),n=0,o=i;n<o.length;n++){var s=o[n];t.delete(s.name)}var a=(e.standard||[]).filter((function(e){return t.has(e.name)})).map((function(e){return Object(r.__assign)(Object(r.__assign)({},e),{is_default:!0})}));return Object(r.__spreadArrays)(i,a)}))),g.then(e)}function b(){g=null}function S(e,t){var i;(i={name:e.name,content:e.content,meta_info:e.meta_info||{indicators:[]}},Object(c.fetch)("/api/v1/study-templates",{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){if(e.ok)return e.json().then((function(e){return{result:e}}));switch(e.status){case 403:return e.json().then((function(e){return{error:e.code}}));case 422:return e.json().then((function(e){return{error:e.code,id:e.id}}));default:throw new Error("not ok")}}))).then(t)}function w(e,t){$.get("/study-template/?templateName="+encodeURIComponent(e),t)}function P(e,t){$.post("/remove-study-template/",{name:e},t)}function C(e,t){(function(e){return Object(c.fetch)("/api/v1/study-templates/"+e,{credentials:"same-origin"}).then(u)})(e).then(t)}function T(e,t){(function(e){return Object(c.fetch)("/api/v1/study-templates/standard/"+e,{credentials:"same-origin"}).then(u)})(e).then(t)}function x(e,t){(function(e){return Object(c.fetch)("/api/v1/study-templates/"+e,{credentials:"same-origin",method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("not ok")}))})(e).then(t)}function I(e,t,i){(function(e,t){return Object(c.fetch)("/api/v1/study-templates/"+e+"/rename/",{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(u)})(e,{name:t}).then(i)}function E(e,t,i){(function(e,t){return Object(c.fetch)("/api/v1/study-templates/"+e,{credentials:"same-origin",method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(u)})(e,{name:t.name,content:t.content,meta_info:t.meta_info||{
indicators:[]}}).then(i)}},JX7q:function(e,t,i){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,"a",(function(){return r}))},Ji7U:function(e,t,i){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}i.d(t,"a",(function(){return n}))},JjUe:function(e,t,i){"use strict";i.r(t),i.d(t,"OverlayDataWindowView",(function(){return b}));var r=i("mrSG"),n=i("ivNn"),o=i("4miz"),s=i("GH0z"),a=i("k9/m"),l=i("7qT/"),c=i("Ialn"),u=i("qFKp"),h=i("38az"),d=i("e92V"),p=i("mMWL"),f=i("Tmoa"),_=u.CheckMobile.any(),m=_&&!1,v=new s.PercentageFormatter,g=window.t("n/a"),y=g+" ("+g+"%)",b=function(e){function t(t,i){var r=e.call(this)||this;return r._invalidated=!0,r._study=t,r._model=i,r._items.push(new o.DataWindowItem(window.t("Open"),"")),r._items.push(new o.DataWindowItem(window.t("High"),"")),r._items.push(new o.DataWindowItem(window.t("Low"),"")),r._items.push(new o.DataWindowItem(window.t("Close"),"")),r._items.push(new o.DataWindowItem("","")),r._items.push(new o.DataWindowItem("","")),r._items.push(new o.DataWindowItem(window.t("Change"),"")),r.update(),r}return Object(r.__extends)(t,e),t.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},t.prototype.update=function(){this._invalidated=!0},t.prototype._updateImpl=function(){if(this._header=this._study.title(),this._items[0].setValue(g),this._items[1].setValue(g),this._items[2].setValue(g),this._items[3].setValue(g),this._items[6].setValue(y),!this._model.timeScale().isEmpty()&&0!==this._study.data().size()){for(var e=this._showLastPriceAndChangeOnly(),t=0,i=this._items;t<i.length;t++){i[t].setVisible(!e)}var r,o=this._items[4];if(o.setVisible(!1),e?r=this._study.data().lastIndex():(r=this._model.crossHairSource().appliedIndex(),Object(n.isNumber)(r)||(r=this._study.data().lastIndex())),null!==r&&Object(n.isNumber)(r)){var s=this._study.data().search(r,a.PlotRowSearchMode.NearestLeft,1);if(null!==s){var l=s.index,u=s.value,h=u[1],d=u[2],p=u[3],f=u[4];if(null!=h&&null!=d&&null!=p&&null!=f){var _=this._study.formatter(),m=this._changesData(f,h,l,e);if(void 0!==m.values){var b=Object(c.forceLTRStr)(_.format(m.values.change,!0)+" ("+v.format(m.values.percentChange,!0)+")");this._items[6].setValue(b)}e?(this._items[5].setValue(_.format(f)),this._items[5].setVisible(!0),this._items[6].setVisible(!0)):(this._items[0].setValue(_.format(h)),this._items[1].setValue(_.format(d)),this._items[2].setValue(_.format(p)),this._items[3].setValue(_.format(f)),o.setValue(_.format(this._study.barFunction()(u))),this._items[5].setVisible(!1));for(var S=this._color(l,m,e),w=0,P=this._items;w<P.length;w++){P[w].setColor(S)}}}}}},t.prototype._showLastPriceAndChangeOnly=function(){
return _&&(null===this._model.crossHairSource().pane||Object(d.a)(p.tool.value())||null!==this._model.lineBeingEdited())},t.prototype._changesData=function(e,t,i,r){if(r&&!m){var n=this._study.quotes();if(null!==n)return{values:{change:n.change,percentChange:n.change_percent},priceDirection:{basedOnCurrentBar:n.change>=0?0:1,basedOnPrevClose:n.change>=0?0:1}}}else{var o=this._study.data().search(i-1,a.PlotRowSearchMode.NearestLeft,1),s=o&&o.value[4]||null;if(null!==s)return{values:{change:e-s,percentChange:Object(l.a)(s,e)},priceDirection:{basedOnCurrentBar:e>=t?0:1,basedOnPrevClose:e>=s?0:1}}}return{priceDirection:{basedOnCurrentBar:e>=t?0:1,basedOnPrevClose:e>=t?0:1}}},t.prototype._color=function(e,t,i){var r=Object(f.resetTransparency)(h.SeriesBarColorer.upColor(this._study.properties())),n=Object(f.resetTransparency)(h.SeriesBarColorer.downColor(this._study.properties()));if(i&&!m)return t.priceDirection?r:n;var o=this._study.properties().childs().style.value();if(10===o){var s=this._study.barColorer().barStyle(e,!1);return null!=s.barBorderColor?Object(f.resetTransparency)(s.barBorderColor):Object(f.resetTransparency)(s.barColor)}var a=!1;return 0===o?a=this._study.properties().childs().barStyle.childs().barColorsOnPrevClose.value():1===o?a=this._study.properties().childs().candleStyle.childs().barColorsOnPrevClose.value():9===o&&(a=!0),a?0===t.priceDirection.basedOnPrevClose?r:n:0===t.priceDirection.basedOnCurrentBar?r:n},t}(o.DataWindowView)},JmuD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)},t.hasProperty=function(e,t){return t in e}},K4L1:function(e,t,i){"use strict";var r=i("Eyy1").assert,n=i("ijIX").patchSourceState,o=i("nmnj"),s=i("lCO3").Version,a=i("txPx").getLogger("Chart.Study.Versioning"),l=i("Wt0y"),c=i("0YCj"),u=i("TcSq").extractPineId,h=i("Si3H").migrateMetaInfoAndPropState;function d(e,t){if(!e)throw new Error("No studies metainfo");var r=i("EyEd");if(this._studiesMetainfo=e,!t)throw new Error("No studies migrations");this._studiesMigrations=t,this._migrations={};for(var n=0;n<this._studiesMigrations.length;n++)for(var o=this._studiesMigrations[n],s=o.versFrom,l=o.versTo,c=0;c<o.studyMigrations.length;c++){var u=o.studyMigrations[c],h=u.studyId;if(0!==u.rules.length){var d=h in this._migrations?this._migrations[h]:new r(h);d.addMigration(s,l,u.rules),this._migrations[h]=d}else a.logError("Study Migration should have at least one convertion rule")}this._clientMigrations=[function(e,t){if(0===this._studiesMetainfo.length||!e.isTVScript||e.version>=22)return t;for(var i={},r=0,n=0;;){var o=t[n];if(void 0===o)break;var s=t[o.id];o.isFake&&(o.id="in_"+r++),i[n]=o,i[o.id]=s,n++}return i}]}d.prototype.updateMetaInfo=function(e){if(!e)return e;r(!e.isTVScript,"This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync");for(var t=null,i=this._studiesMetainfo,n=0;n<i.length;n++)if(i[n].id===e.id){t=i[n];break}return TradingView.clone(t)},
d.prototype.updateMetaInfoAsync=function(e){if(!e)return{sync:!1,result:Promise.reject("No old metaInfo was given")};var t=new c(e),i=c.versionOf(e);if(e.isTVScript&&!e.pine&&i<c.VERSION_PINE_PROTECT_TV_4164){r(TradingView.isExistent(e.scriptIdPart),"scriptIdPart is missing, study "+JSON.stringify(e));var n=e.scriptIdPart;return{sync:!1,result:new Promise((function(i,r){o.processLegacy(n,e.TVScriptSourceCode).done((function(e){t.removeDefaults();var r=new c(e);r.createDefaults(),h(r),i(r)})).fail((function(e,t){r(e)}))}))}}if(e.isTVScript&&e.pine)return(e._serverMetaInfoVersion||i)!==c.CURRENT_METAINFO_FORMAT_VERSION?{sync:!1,result:new Promise((function(i,r){o.translateScriptAsync2(e.scriptIdPart,e.pine.version).done((function(e){t.removeDefaults();var r=new c(e);r.createDefaults(),h(r),i(r)})).fail((function(e,t){r(e)}))}))}:(t.createDefaults(),{sync:!0,result:t});for(var s=null,a=this._studiesMetainfo,l=0;l<a.length;l++)if(a[l].id===e.id){s=a[l];break}return{sync:!0,result:s?TradingView.clone(s):null}},d.prototype.lastVersionOfStudy=function(e){return this._studiesMetainfo.find((function(t){return t.id===e})).version},d.prototype.updateStudyInputs=function(e,t,i,r,n){var o=TradingView.clone(r);if(e in this._migrations){var l,c=s.parse(t);if("last"===i){var u=this.lastVersionOfStudy(e);l=s.parse(u)}else l=s.parse(i);o=this._migrations[e].updateInputs(c,l,o)}if(null==n)return o;for(var h in n)h in o||(o[h]=n[h]);for(var h in o)if(!(h in n)){var d=o[h];a.logWarn("Extra input detected, studyId="+e+", versionFrom="+t+", inputId="+h+", inputValue="+d+", removing it and continue..."),delete o[h]}return o},d.prototype.updateStudyState=function(e,t,i){if(null==e||null==t||null==i)return e;if(e=TradingView.clone(e),!(t.isTVScript||!!t.pine)&&t.version!==i.version){var r=i&&i.defaults.inputs,n=this.updateStudyInputs(t.id,t.version,i.version,e.inputs,r);e.inputs=n}for(var o=0;o<this._clientMigrations.length;++o){n=this._clientMigrations[o].call(this,t,e.inputs);Object.keys(n).length===Object.keys(e.inputs).length?e.inputs=n:a.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...")}var s=c.versionOf(t);if(t.isTVScript&&t.TVScriptSourceCode&&s>=12&&s<=26){var l={};for(o=0;o<t.plots.length;++o){var u=t.plots[o],h=i.plots[o];l[u.id]=h.id}var d=Object.keys(e.styles);for(o=0;o<d.length;++o){var p=d[o],f=e.styles[p];delete e.styles[p];var _=l[p];e.styles[_]=f}var m=Object.keys(e.plots);for(o=0;o<m.length;++o){var v=m[o];p=e.plots[v].id;e.plots[v].id=l[p]}}return e},d.prototype.patchPointsBasedStudyState=function(e){return d._fixInputsMaxValue(e.state,e.metaInfo),"LineToolRegressionTrend"===e.type&&(e=n(e)),e},d.prototype.patchPointsBasedStudyData=function(e,t){if(!l.isProd())return t;if(!e||!t)return t;var i=TradingView.clone(t);return"VbPFixed@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&d._patchOldVolumeProfiles(0,i),i},d.prototype.patchStudyData=function(e,t,i,r){if(!l.isProd())return{data:t,nsData:i,indexes:r};var n=TradingView.clone(t),o=TradingView.clone(i),s=TradingView.clone(r)
;"VbPVisible@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&d._patchOldVolumeProfiles(0,n.graphics),"VbPSessions@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&d._patchOldVolumeProfiles(0,n.graphics);var a=c.versionOf(e);if(e.isTVScript&&e.TVScriptSourceCode&&a>=12&&a<=26){var u=n.columns;n.columns=[];for(var h=0;h<u.length;++h){var p="plot_"+h;n.columns.push(p)}}return{data:n,nsData:o,indexes:s}},d._patchOldVolumeProfiles=function(e,t){var i=t.hhists[e].data,r=[];for(var n in i)r=r.concat(i[n]);t.hhists[0].data=r},d._fixInputsOrder=function(e,t){for(var i=c.getOrderedInputIds(t),r=d.splitInputs(e.inputs),n=r.arr,o=r.obj,s=TradingView.merge({},o),a=0;a<i.length;++a){var l=i[a],u=d.findInputKeyById(n,l);if(null!==u){var h=n[u];s[a]=h}}e.inputs=s},d.INPUT_MAX_VALUE=1e12,d._verifyInputsMaxValue=function(e){var t=d.INPUT_MAX_VALUE;if(e.inputs)for(var i=0;i<e.inputs.length;i++){var r=e.inputs[i];"integer"===r.type&&(r.max&&r.max>t&&a.logWarn("Bad integer input max value in metaInfo id="+e.id+" title="+e.description))}},d._fixInputsMaxValue=function(e,t){if(!TradingView.isAbsent(t)){var i=d.INPUT_MAX_VALUE;if(t.inputs)for(var r=0;r<t.inputs.length;r++){"integer"===(a=t.inputs[r]).type&&(a.max&&a.max>i&&(a.max=i))}if(e&&e.inputs){var n=d.splitInputs(e.inputs),o=n.arr;for(var s in o){var a;"integer"===(a=o[s]).type&&(a.max&&a.max>i&&(a.max=i))}e.inputs=TradingView.merge(n.obj,n.arr)}}},d.prototype.patchPropsStateAndMetaInfo=function(e,t,i){"Script$BOOKER"!==t.productId||t.alerts||delete e.alerts,d._fixInputsOrder(e,t),d._fixInputsMaxValue(e,t);var r=d.splitInputs(e.inputs);e.inputs=r.obj;var n=c.versionOf(t);n<c.METAINFO_FORMAT_VERSION_SOS_V2&&t.isChildStudy&&(e.isChildStudy=t.isChildStudy);if(t.isTVScript&&t.version<60&&("Script$TV_EARNINGS@tv-scripting"!==t.id&&"Script$TV_DIVIDENDS@tv-scripting"!==t.id&&"Script$TV_SPLITS@tv-scripting"!==t.id||delete t.TVScriptSourceCode),"Volume"!==t.id&&"Volume@tv-basicstudies"!==t.id||0!==t.inputs.length||(t.inputs=[{id:"length",type:"integer",defval:20,min:1,max:1e3}],t.plots.push({id:"vol_ma",type:"line"})),"Volume@tv-basicstudies"===t.id&&t.version&&t.version<=46&&(e.styles.vol.transparency=e.transparency||87),"PivotPointsStandard@tv-basicstudies"===t.id&&(0===t.inputs.length?(e.inputs={kind:"Traditional",showHistoricalPivots:!0},t.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]):1===t.inputs.length&&(e.inputs={kind:"Traditional"},t.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]),void 0===e._hardCodedDefaultsVersion)){e._hardCodedDefaultsVersion=1;var o=e.color;delete e.color,e.levelsStyle={colors:{P:o,"S1/R1":o,"S2/R2":o,"S3/R3":o,"S4/R4":o,"S5/R5":o}}}"CMF"===t.shortId&&2===t.inputs.length&&(e.inputs={length:e.inputs["length fast"]},t.inputs=t.inputs.splice(0,1),t.inputs[0].id="length"),
t.defaults&&void 0===t.defaults.precision&&n<c.VERSION_NEW_STUDY_PRECISION_FORMAT&&(-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(t.id)?t.defaults.precision=0:t.defaults.precision=4);if(t.version<60)for(var s=["TV_DIVIDENDS","TV_SPLITS","TV_EARNINGS"],a="Script".length,l=0;l<s.length;l++)t.id.startsWith("Script$"+s[l]+"@tv-scripting")&&(t.fullId="ESD"+t.fullId.substring(a),t.id="ESD"+t.id.substring(a),t.name="ESD"+t.name.substring(a),t.shortId="ESD"+t.shortId.substring(a),t.productId="ESD"+t.productId.substring(a));if(n<c.VERSION_PINE_PROTECT_TV_4164){var p={"StrategyScript$STD;Consecutive%1Ups/Downs%1Strategy":{pineId:"STD;Consecutive%1Ups%1Downs%1Strategy",className:"StrategyScript"},Script$EDGR_NET_INCOME_FROM_CONTINUING_OPERATIONS_APPLICABLE_TO_COMMON_V2:{pineId:"Script$EDGR_NET_INCOME_FROM_CONTINUING_OPS_APPLICABLE_TO_COMMON_V2",className:"Script"}};if(t.shortId in p){var f=p[t.shortId].className+"$"+p[t.shortId].pineId,_={scriptIdPart:p[t.shortId].pineId,fullId:t.fullId.replace(t.shortId,f),id:t.id.replace(t.shortId,f),name:t.name.replace(t.shortId,f),shortId:f};TradingView.merge(t,_),TradingView.merge(e,_)}var m=u(t.fullId),v=m&&m.match(/^(USER)(_\d+)(;)(.*)$/);if(v){var g=v[0],y=v[1]+v[3]+v[2]+v[4];_={scriptIdPart:y,fullId:t.fullId.replace(g,y),id:t.id.replace(g,y),name:t.name.replace(g,y),shortId:t.shortId.replace(g,y)};TradingView.merge(t,_),TradingView.merge(e,_)}}if("MA"===t.id){var b=new c({id:"MAExp",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgExp",type:"line"}],palettes:{}}),S=new c({id:"MASimple",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgSimple",type:"line"}],palettes:{}}),w=new c({id:"MAVolumeWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgVolumeWeighted",type:"line"}],palettes:{}}),P=new c({id:"MAWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgWeighted",type:"line"}],palettes:{}});switch(e.inputs.type){case"exp":t=b;break;case"simple":t=S;break;case"weighted":t=P;break;case"volume weighted":t=w}e.styles[t.plots[0].id]=e.styles.MovAvg,delete e.styles.MovAvg,delete e.inputs.type}return i.oldShowStudyLastValueProperty&&(e.oldShowLastValue=e.showLastValue),delete e.showLastValue,delete e.showStudyArguments,h(t,e),{propsState:e,metaInfo:t}},d.mergeInputs=function(e,t){d.mergeInputsArrPart(e,t),d.mergeInputsObjPart(e,t)},
d.mergeInputsArrPart=function(e,t){var i=d.splitInputs(t);for(var r in i.arr){var n=d.findInputKeyById(e,i.arr[r].id);n?TradingView.merge(e[n],i.arr[r]):d.appendInputInfoToArr(e,i.arr[r])}},d.mergeInputsObjPart=function(e,t){var i=d.splitInputs(t);TradingView.merge(e,i.obj)},d.appendInputInfoToArr=function(e,t){var i=-1;for(var r in e){var n=parseInt(r,10);isNumber(n)&&(n>i&&(i=n))}e[i+1]=t},d.splitInputs=function(e){var t={},i={};for(var r in e)isNumber(parseInt(r,10))?t[r]=e[r]:i[r]=e[r];return{arr:t,obj:i}},d.findInputKeyById=function(e,t){var i=null;for(var r in e)if(isNumber(parseInt(r,10))&&e[r].id===t){i=r;break}return i},d.getInputKeyById=function(e,t){var i=d.findInputKeyById(e,t);if(!i)throw new Error("Cannot find input with id: "+t);return i},e.exports=d},K55a:function(e,t,i){"use strict";i.r(t),i.d(t,"marketStatusText",(function(){return n}));var r=i("kxJy");function n(e){var t=e.value();if(null!==t){var i=r.f.get(t);if(void 0!==i)return i}return""}},K8V9:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path d="M13.111 18.5H10.5a1 1 0 0 1-1-1v-11a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-8.389z"/><path d="M18.5 20v1.5a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1v-11a1 1 0 0 1 1-1H8"/></g></svg>'},K9GE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.color=t.CubicBezier=t.easingFunc=t.dur=void 0,t.dur=350,t.easingFunc={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var r=function(){function e(e,t,i,r){this._mX1=e,this._mY1=t,this._mX2=i,this._mY2=r}return e.prototype.easingFunc=function(e){return this._mX1===this._mY1&&this._mX2===this._mY2?e:this._calcBezier(this._getTForX(e))},e.prototype._a=function(e,t){return 1-3*t+3*e},e.prototype._b=function(e,t){return 3*t-6*e},e.prototype._c=function(e){return 3*e},e.prototype._calcBezier=function(e){return((this._a(this._mY1,this._mY2)*e+this._b(this._mY1,this._mY2))*e+this._c(this._mY1))*e},e.prototype._getSlope=function(e){return 3*this._a(this._mX1,this._mX2)*e*e+2*this._b(this._mX1,this._mX2)*e+this._c(this._mX1)},e.prototype._getTForX=function(e){for(var t=e,i=0;i<4;++i){var r=this._getSlope(t);if(0===r)return t;t-=(this._calcBezier(t)-e)/r}return t},e}();t.CubicBezier=r,t.color={black0:"#000",black20:"#2b2d36",black25:"#2b2e37",black27:"#2f3241",black30:"#212121",black70:"#4A4A4A",black80:"#535353",black100:"#646464",black110:"#757575",black140:"#8A8A8A",
black170:"#ADAEB0",black180:"#b4b4b4",black200:"#C8C8C8",black220:"#DADDE0",black230:"#ECECEC",black240:"#F2F2F2",black248:"#F8F8F8",black255:"#FFF",brand:"#3BB3E4",brandHover:"#3BABD8",brandActive:"#3898C2",brandDown:"#049DDC",brand220:"#3BB3E0",brand255:"#3BB3FF",brandNew:"#37A6EF",brandNew2:"#2196F3",spinner:"#00A2E2",brandMedium80:"#3C4650",brandMedium90:"#465a6e",brandMedium100:"#627384",brandMedium120:"#758696",brandMedium150:"#94959C",brandMedium190:"#9DB2BD",brandMedium220:"#E9EFF2",brandMedium230:"#EAECEF",brandMedium240:"#F1F3F6",brandDark:"#2A2C39",brandDark50:"#252733",brandDark45:"#20222D",brandDarkText:"#6A6B74",danger:"#FF4A68",dangerHover:"#F24965",dangerDown:"#FF173E",success:"#3CBC98",success55:"#37BC9B",success250:"#00FFC0",successHover:"#38B395",successDown:"#00A97F",attention:"#FFC84A",attention50:"#F89E30",growing:"#37bc9b",falling:"#ff4a68"}},"KG+6":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return c})),i.d(t,"c",(function(){return u}));var r,n,o=i("mrSG"),s=i("Eyy1"),a=i("tqok"),l=i("hsV8");function c(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;var i=t[e.firstBarTime],r=t[e.lastBarTime];return i===a.INVALID_TIME_POINT_INDEX||r===a.INVALID_TIME_POINT_INDEX?null:(Object(s.assert)(i<=r,"firstBarTime should not exceed lastBarTime"),Object(s.assert)(e.priceLow<=e.priceHigh,"priceLow should not exceed priceHigh"),{firstBarTime:i,lastBarTime:r,rate:e.rate,priceHigh:e.priceHigh,priceLow:e.priceLow})}function u(e,t,i){var r=Object(l.ensureTimePointIndexIndex)(i.indexOf(e.firstBarTime)),n=Object(l.ensureTimePointIndexIndex)(i.indexOf(e.lastBarTime));return Object(o.__assign)(Object(o.__assign)({id:t},e),{firstBarTime:r,lastBarTime:n})}!function(e){e.LeftToRight="left_to_right",e.RightToLeft="right_to_left"}(r||(r={})),function(e){e.Relative="relative",e.Absolute="absolute"}(n||(n={}))},KUek:function(e,t,i){"use strict";i.r(t),i.d(t,"sessionsPreferencesDefault",(function(){return h})),i.d(t,"Sessions",(function(){return d}));var r=i("mrSG"),n=i("Eyy1"),o=i("gvrv"),s=i("jenN"),a=i("kcTO"),l=i("Ocx9"),c=i("Kxc7"),u=new a.PriceFormatter,h={graphics:{backgrounds:{outOfSession:{color:"#2196F3",transparency:92,visible:!1},preMarket:{color:"#FF9800",transparency:92,visible:!1},postMarket:{color:"#2196F3",transparency:92,visible:!1}},vertlines:{sessBreaks:{color:"#4985e7",style:2,visible:!1,width:1}}}},d=function(){function e(e,t){var i=this;this._studySource=null,this._paneViews=[],this._metaInfo=null,this._destroyed=!1,this._isStarted=!1,this._loadedGraphics=null,this._model=e,this._doubleClickHandler=t;var r=e.mainSeries();this._properties=new l.DefaultProperty("sessions"),this._removeDuplicateProperties(),this._properties.subscribe(this,this._onPropertiesChanged),e.studyMetaInfoRepository().findById({type:"java",studyId:"Sessions@tv-basicstudies"}).then((function(t){i._destroyed||null===i._loadedGraphics&&(i._setMetaInfo(t),null!==i._metaInfo&&(i._studySource=new o.a(e.chartApi(),r,"sessions_",i._metaInfo),
i._createPaneViews(),i._studySource.dataCleared().subscribe(i,i.updateAllViews),i._studySource.dataUpdated().subscribe(i,i.updateAllViews),i._studySource.setInputs({}),i._processHibernate()))})),e.timeScale().onReset().subscribe(this,this._clearData),e.timeScale().logicalRangeChanged().subscribe(this,this.updateAllViews),e.mainSeries().properties().extendedHours.subscribe(this,this._updateVisibleOfPreAndPostMarketBackground),e.mainSeries().properties().interval.subscribe(this,this._processHibernate),this._updateVisibleOfPreAndPostMarketBackground(e.mainSeries().properties().extendedHours)}return e.prototype.start=function(){this._isStarted=!0,this._processHibernate()},e.prototype.restart=function(){this._clearData(),c.enabled("stop_study_on_restart")&&this.stop(),this.start()},e.prototype.isStarted=function(){return this._isStarted},e.prototype.stop=function(){this._isStarted=!1,null!==this._studySource&&this._studySource.stop()},e.prototype.paneViews=function(e){return this._paneViews},e.prototype.labelPaneViews=function(e){return[]},e.prototype.priceAxisViews=function(e,t){return[]},e.prototype.updateAllViews=function(){this._paneViews.forEach((function(e){return e.update()}))},e.prototype.destroy=function(){this._destroyed=!0,null!==this._studySource&&(this._studySource.dataCleared().unsubscribe(this,this.updateAllViews),this._studySource.dataUpdated().unsubscribe(this,this.updateAllViews),this._studySource.destroy(),this._studySource=null),this._model.timeScale().logicalRangeChanged().unsubscribe(this,this.updateAllViews),this._model.timeScale().onReset().unsubscribe(this,this._clearData),this._model.mainSeries().properties().extendedHours.unsubscribe(this,this._updateVisibleOfPreAndPostMarketBackground),this._model.mainSeries().properties().interval.unsubscribe(this,this._processHibernate),this._properties.unsubscribe(this,this._onPropertiesChanged)},e.prototype.series=function(){return this._model.mainSeries()},e.prototype.priceScale=function(){return this.series().priceScale()},e.prototype.graphics=function(){return this._loadedGraphics||Object(n.ensureNotNull)(this._studySource).graphics()},e.prototype.properties=function(){return this._properties},e.prototype.graphicsInfo=function(){return Object(n.ensureNotNull)(this._metaInfo).graphics},e.prototype.firstValue=function(e){return this._model.mainSeries().firstValue()},e.prototype.formatter=function(){return u},e.prototype.state=function(e){var t={properties:this._properties.state()};return e&&null!==this._metaInfo&&(t.data={graphics:Object(s.saveStudyGraphics)(this.graphics()),metaInfo:this._metaInfo}),t},e.prototype.restoreState=function(e,t){var i=e.properties;this._migrateOutOfSessionProperty(i),this._properties.mergeAndFire(i),this._removeDuplicateProperties(),this._updateVisibleOfPreAndPostMarketBackground(this._model.mainSeries().properties().extendedHours),void 0!==e.data&&t&&(this._loadStudyGraphics(e.data.graphics),this._setMetaInfo(e.data.metaInfo),this._createPaneViews())},e.prototype.restoreOldState=function(e,t){var i={properties:{
graphics:e.state.graphics}};void 0!==e.data&&void 0!==e.metaInfo&&t&&(i.data={metaInfo:e.metaInfo,graphics:e.data.graphics}),this.restoreState(i,t)},e.prototype.applyPreferences=function(e){this._properties.mergePreferences(e)},e.prototype.metaInfo=function(){return Object(n.ensureNotNull)(this._metaInfo)},e.prototype._loadStudyGraphics=function(e){var t=e.backgrounds;if(void 0!==t){var i=t.findIndex((function(e){return"inSession"===e.styleId}));-1!==i&&t.splice(i,1)}this._loadedGraphics=Object(s.loadStudyGraphics)(e)},e.prototype._setMetaInfo=function(e){var t=e.graphics.backgrounds;void 0!==t&&void 0!==t.inSession&&delete t.inSession,this._metaInfo=e},e.prototype._updateVisibleOfPreAndPostMarketBackground=function(e){var t=e.value();this._outOfSessionVisibilityProperty().setValue(t),this._preMarketVisibilityProperty().setValue(t),this._postMarketVisibilityProperty().setValue(t)},e.prototype._clearData=function(){null!==this._studySource&&this._studySource.clearData()},e.prototype._createPaneViews=function(){var e=this,t={doubleClickHandler:this._doubleClickHandler};Object(s.createGraphicsPaneViews)(this,this._model,t).then((function(t){e._paneViews=t,e._model.lightUpdate()}))},e.prototype._onPropertiesChanged=function(){this._processHibernate(),this.updateAllViews()},e.prototype._processHibernate=function(){if(null!==this._studySource){var e=this._canBeHibernated(),t=this._isHibernated(),i=this._studySource.isStarted();!t&&e&&i?this._studySource.stop():!t||e||i||this._studySource.start()}},e.prototype._canBeHibernated=function(){var e=this._model.mainSeries(),t=this._preMarketVisibilityProperty().value()&&this._postMarketVisibilityProperty().value()&&this._outOfSessionVisibilityProperty().value();return e.isDWM()||!t&&!this._vertLinesVisibleProperty().value()},e.prototype._isHibernated=function(){return this._isStarted&&(null===this._studySource||!this._studySource.isStarted())},e.prototype._outOfSessionVisibilityProperty=function(){return this._properties.childs().graphics.childs().backgrounds.childs().outOfSession.childs().visible},e.prototype._preMarketVisibilityProperty=function(){return this._properties.childs().graphics.childs().backgrounds.childs().preMarket.childs().visible},e.prototype._postMarketVisibilityProperty=function(){return this._properties.childs().graphics.childs().backgrounds.childs().postMarket.childs().visible},e.prototype._vertLinesVisibleProperty=function(){return this._properties.childs().graphics.childs().vertlines.childs().sessBreaks.childs().visible},e.prototype._removeDuplicateProperties=function(){this._properties.hasChild("properties")&&(this._properties.removeProperty("properties"),Object(l.saveDefaultProperties)(!0),this._properties.childChanged("",null),Object(l.saveDefaultProperties)(!1))},e.prototype._migrateOutOfSessionProperty=function(e){var t=e.graphics.backgrounds,i=t.outOfSession;i.color===h.graphics.backgrounds.outOfSession.color||"postMarket"in t||(e.graphics.backgrounds=Object(r.__assign)(Object(r.__assign)({},t),{postMarket:{color:i.color,transparency:i.transparency,
visible:i.visible},preMarket:{color:i.color,transparency:i.transparency,visible:i.visible}}))},e}()},KcY8:function(e,t,i){"use strict";var r=i("mrSG"),n=i("aO4+"),o=i("f6yo"),s=i("VaSN"),a=i("Tmoa"),l=i("Ialn"),c=i("8Uy/"),u=i("jFln"),h=i("ikwP"),d=i("VdBB"),p=function(){function e(e,t){this.setData(e,t)}return e.prototype.setData=function(e,t){this._data=Object(r.__assign)({},e),this._commonData=Object(r.__assign)({},t)},e.prototype.draw=function(e,t,i,r,n,o){if(this._data.visible){e.font=t.font;var s,d=Math.floor((this._data.tickVisible?t.tickLength:0)*o),p=Math.floor((this._data.borderVisible?t.borderSize:0)*o),f=Math.floor(t.paddingTop*o),_=Math.floor(t.paddingBottom*o),m=Math.floor(t.paddingInner*o),v=Math.floor(t.paddingOuter*o),g=this._data.text,y=Math.round(t.baselineOffset*o),b=void 0!==this._data.labelIcon,S=Math.max(1,Math.floor(o)),w=Math.floor(t.fontSize*o)+f+_;if(w%2!=S%2&&(w+=1),b)s=w;else{var P=Math.ceil(i.measureText(e,g));s=Math.round(P*o)+d+p+m+v}var C=this._commonData.coordinate;this._commonData.fixedCoordinate&&(C=this._commonData.fixedCoordinate);var T,x,I="right"===n,E=this._getOffsetScaled(I,r,o),L=Math.ceil(r*o),O=I?L:0,A=O;e.fillStyle=Object(a.resetTransparency)(this._commonData.background),e.lineWidth=1,Object(u.setLineStyle)(e,c.LINESTYLE_SOLID),e.lineCap="butt";var M=Math.round(C*o)-Math.floor(.5*o),k=Math.floor(M+S/2-w/2),D=k+w;if(g||b){if(I?(T=O-d,x=(A=O-s)+v):(A=O+s,T=O+d,x=O+p+d+m),O+=E,A+=E,T+=E,e.beginPath(),e.moveTo(O,k),e.lineTo(A,k),e.lineTo(A,D),e.lineTo(O,D),e.fill(),0!==E&&this._data.fillOffset){e.fillStyle=t.paneBackgroundColor;var R=I?Math.ceil(r*o)+1:0;e.beginPath(),e.moveTo(O,k),e.lineTo(R,k),e.lineTo(R,D),e.lineTo(O,D),e.fill()}if(b){switch(this._data.labelIcon){case 0:this._drawPlusIcon(e,O,A,k,M,D,S)}return}this._data.tickVisible&&(e.fillStyle=this._commonData.color,e.fillRect(O,M,T-O,S)),e.textAlign="left",e.fillStyle=this._commonData.color,Object(h.drawScaled)(e,o,(function(){e.fillText(g,(x+E)/o,(D-_-y)/o)}))}if(this._data.secondLine){var V=Math.ceil(i.measureText(e,this._data.secondLine)*o)+m+v;e.fillStyle=Object(a.resetTransparency)(this._commonData.background),this._data.text&&(k+=w+S,D+=w+S),I?(O=(A=Math.min(A,L-V))+V,x=A+v):(A=(O=Math.max(A-V,p))+V,x=O+m),O+=E,A+=E,e.beginPath(),e.moveTo(O,k),e.lineTo(A,k),e.lineTo(A,D),e.lineTo(O,D),e.fill(),e.textAlign="left",e.fillStyle=this._commonData.color;var B=this._data.secondLine;Object(h.drawScaled)(e,o,(function(){e.fillText(Object(l.startWithLTR)(B),(x+E)/o,(D-_-y)/o)}))}}},e.prototype.height=function(e,t){if(!this._data.visible)return 0;var i=e.fontSize+e.paddingTop+e.paddingBottom;return this._data.secondLine&&t?2*i+1:i},e.prototype.hitTest=function(e){var t=this._data.hitTestData;if(void 0===t)return null
;var i=this._data.offset,r=Object(s.lastEventIsTouch)()?10:0,a=Object(n.box)(new n.Point(t.xl+i-r,t.y-r),new n.Point(t.xl+i+t.containerWidth+r,t.y+t.containerHeight+r)),l=t.left&&Object(o.pointInBox)(e,a),c=Object(n.box)(new n.Point(t.xr-i-r,t.y-r),new n.Point(t.xr-i+t.containerWidth+r,t.y+t.containerHeight+r)),u=t.right&&Object(o.pointInBox)(e,c);if(l||u){var h=l?"left":"right";return new d.HitTestResult(d.HitTestResult.CUSTOM,{clickHandler:void 0===t.clickHandler?void 0:t.clickHandler.bind(this,e,h),tapHandler:void 0===t.clickHandler?void 0:t.clickHandler.bind(this,e,h),tooltip:t.tooltip})}return null},e.prototype._getOffsetScaled=function(e,t,i){var r=e?-1:1,n=0===this._data.offset?0:r*this._data.offset,o=0===n?0:r*Math.max(1,Math.round(Math.abs(n)*i));return e&&t*i%1!=0&&(o=r*(Math.abs(o)+1)),o},e.prototype._drawPlusIcon=function(e,t,i,r,n,o,s){e.fillStyle=this._commonData.color;var a=Math.abs(t-i),l=Math.round(.5*a);l%2!=s%2&&(l+=1);var c=Math.floor((a-l)/2),u=Math.min(t,i),h=u+Math.floor(a/2-s/2);e.fillRect(u+c,n,l,s),e.fillRect(h,r+c,s,l)},e}();i.d(t,"a",(function(){return f}));var f=function(){function e(e){this._commonRendererData={coordinate:0,color:"#FFF",background:"#000"},this._axisRendererData={text:"",visible:!1,tickVisible:!0,borderVisible:!0,offset:0},this._paneRendererData={text:"",visible:!1,tickVisible:!1,borderVisible:!1,offset:1,fillOffset:!0},this._invalidated=!0,this._axisRenderer=new(e||p)(this._axisRendererData,this._commonRendererData),this._paneRenderer=new(e||p)(this._paneRendererData,this._commonRendererData)}return e.prototype.text=function(){return this._axisRendererData.text},e.prototype.secondLineText=function(){return this._axisRendererData.secondLine},e.prototype.background=function(){return this._commonRendererData.background},e.prototype.color=function(){return this.generateTextColor(this.background())},e.prototype.generateTextColor=function(e){return Object(a.colorFromBackground)(e)},e.prototype.coordinate=function(){return this._updateRendererDataIfNeeded(),this._commonRendererData.coordinate},e.prototype.floatCoordinate=function(){return this._updateRendererDataIfNeeded(),this._commonRendererData.floatCoordinate||this._commonRendererData.coordinate},e.prototype.update=function(){this._invalidated=!0},e.prototype.height=function(e,t){return void 0===t&&(t=!1),Math.max(this._axisRenderer.height(e,t),this._paneRenderer.height(e,t))},e.prototype.getFixedCoordinate=function(){return this._commonRendererData.fixedCoordinate||0},e.prototype.setFixedCoordinate=function(e){this._commonRendererData.fixedCoordinate=e},e.prototype.isVisible=function(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible||this._paneRendererData.visible},e.prototype.isAxisLabelVisible=function(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible},e.prototype.isPaneLabelVisible=function(){return this._updateRendererDataIfNeeded(),this._paneRendererData.visible},e.prototype.renderer=function(){return this._updateRendererDataIfNeeded(),
this._axisRenderer.setData(this._axisRendererData,this._commonRendererData),this._paneRenderer.setData(this._paneRendererData,this._commonRendererData),this._axisRenderer},e.prototype.paneRenderer=function(){return this._updateRendererDataIfNeeded(),this._axisRenderer.setData(this._axisRendererData,this._commonRendererData),this._paneRenderer.setData(this._paneRendererData,this._commonRendererData),this._paneRenderer},e.prototype.setPaneRendererLabelIcon=function(e){this._paneRendererData.labelIcon=e},e.prototype._updateRendererDataIfNeeded=function(){this._invalidated&&(this._updateRendererData(this._axisRendererData,this._paneRendererData,this._commonRendererData),this._invalidated=!1)},e}()},Kdr6:function(e,t,i){"use strict";i.r(t),i.d(t,"HHistLegendView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._showStudyValues=i.properties().paneProperties.legendProperties.showStudyValues,r}return Object(r.__extends)(t,e),t.prototype.isValuesVisible=function(){return this._showStudyValues.value()},t.prototype.additional=function(){return null},t.prototype.destroy=function(){},t}(i("TG9i").HHistDataWindowView)},Kmdw:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererArrowUp",(function(){return l})),i.d(t,"PaneRendererArrowDown",(function(){return c}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=i("Hr11"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sign=0,t._thinArrow=!1,t._thinArrowLineWidth=0,t._headHeight=0,t._arrowWidth=0,t}return Object(r.__extends)(t,e),t.prototype.setData=function(e,t){this._setBaseData(e,t)},t.prototype._drawItemShape=function(e,t,i){var r=t.pixelRatio,n=this._lineWidth(t)%2?.5:0,o=this._sign,a=this._arrowWidth,l=this._headHeight,c=Math.abs(i.height),u=Math.round(i.x*r)+n,h=i.vertOffset,d=Math.round((i.y+h+o*c/2)*r)+n,p=Object(s.ceiledEven)(a*r),f=p/2,_=Math.round(c*r),m=Math.round(l*r);e.translate(u,d),this._thinArrow?(e.moveTo(0,0),e.lineTo(-f,-f*o),e.moveTo(0,0),e.lineTo(f,-f*o),e.moveTo(0,0),e.lineTo(0,-_*o),e.moveTo(-f,-_*o),e.lineTo(f,-_*o)):(e.moveTo(0,0),_<m?(e.lineTo(p,-_*o),e.lineTo(-p,-_*o)):(e.lineTo(p,-m*o),e.lineTo(f,-m*o),e.lineTo(f,-_*o),e.lineTo(-f,-_*o),e.lineTo(-f,-m*o),e.lineTo(-p,-m*o)),e.lineTo(0,0)),e.translate(-u,-d)},t.prototype._preDrawInit=function(){var e=this._calculateWidth();this._arrowWidth=e,this._sign=this._isUp()?-1:1,this._thinArrow=e<4,this._thinArrowLineWidth=Math.max(e/2,1),this._headHeight=Math.round(e)},t.prototype._startPath=function(e,t,i,r){e.beginPath(),e.fillStyle=i,e.strokeStyle=r,e.lineWidth=this._lineWidth(t)},t.prototype._lineWidth=function(t){return this._thinArrow?this._thinArrowLineWidth:e.prototype._lineWidth.call(this,t)},t.prototype._calcBoundingBox=function(t){var i=t.vertOffset,r=this._sign,n=this._arrowWidth,s=this._headHeight,a=Math.abs(t.height),l=t.x-n,c=l+2*n,u=t.y+i+r*Math.round(a/2),h=u+(-a-s)*r,d=new o.Point(l,u),p=new o.Point(c,h),f=Object(o.box)(d,p),_=e.prototype._calcBoundingBox.call(this,t);return _&&(f=this._unionBox(f,_)),f},
t.prototype._calculateWidth=function(){return Math.round(this._barSpacing/4)},t}(n.a),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._isUp=function(){return!0},t}(a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._isUp=function(){return!1},t}(a)},KnF9:function(e,t,i){"use strict";i.r(t),i.d(t,"EnvironmentState",(function(){return n}));var r=i("qFKp"),n=function(){function e(e){this._shift=!1,this._control=!1,this._alt=!1,void 0!==e&&(this._shift=Boolean(e.shiftKey),this._control=Boolean(Object(r.isMac)()?e.metaKey:e.ctrlKey),this._alt=Boolean(e.altKey))}return e.prototype.shift=function(){return this._shift},e.prototype.control=function(){return this._control},e.prototype.alt=function(){return this._alt},e.prototype.shiftOnly=function(){return this._shift&&!this._control&&!this._alt},e.prototype.controlOnly=function(){return this._control&&!this._shift&&!this._alt},e.prototype.altOnly=function(){return this._alt&&!this._shift&&!this._control},e.prototype.controlShift=function(){return this._shift&&this._control&&!this._alt},e.create=function(t,i,r){return void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),new e({shiftKey:t,ctrlKey:i,metaKey:i,altKey:r})},e}()},KtbP:function(e,t,i){"use strict";i.r(t),i.d(t,"PanePriceAxisView",(function(){return o}));var r=i("u+0B"),n=function(){function e(e){this._priceAxisViewRenderer=null,this._rendererOptions=null,this._align="right",this._width=0,this._textWidthCache=e}return e.prototype.setParams=function(e,t,i,r){this._priceAxisViewRenderer=e,this._rendererOptions=t,this._width=i,this._align=r},e.prototype.draw=function(e,t){null!==this._rendererOptions&&null!==this._priceAxisViewRenderer&&this._priceAxisViewRenderer.draw(e,this._rendererOptions,this._textWidthCache,this._width,this._align,t.pixelRatio)},e.prototype.hitTest=function(e){var t,i;return void 0===(null===(t=this._priceAxisViewRenderer)||void 0===t?void 0:t.hitTest)?null:null===(i=this._priceAxisViewRenderer)||void 0===i?void 0:i.hitTest(e)},e}(),o=function(){function e(e,t,i){this._priceAxisView=e,this._textWidthCache=new r.TextWidthCache(50),this._dataSource=t,this._chartModel=i,this._fontSize=-1,this._renderer=new n(this._textWidthCache)}return e.prototype.update=function(){this._priceAxisView.update()},e.prototype.renderer=function(e,t){var i=this._chartModel.crossHairSource(),r=this._dataSource===i?i.pane:this._chartModel.paneForSource(this._dataSource);if(null===r)return null;var n=this._priceScale();if(null===n)return null;var o=r.priceScalePosition(n);if("overlay"===o&&(o=r.priceScalePosition(r.defaultPriceScale())),"overlay"===o)return null;var s=this._chartModel.priceAxisRendererOptions();return s.fontSize!==this._fontSize&&(this._fontSize=s.fontSize,this._textWidthCache.reset()),this._renderer.setParams(this._priceAxisView.paneRenderer(),s,t,o),this._renderer},e.prototype._priceScale=function(){return this._dataSource.priceScale()},e}()},Ktlt:function(e,t,i){
"use strict";(function(e){var r=i("fgLi").DataSource,n=i("0h28"),o=i("LxhU").Interval,s=i("LxhU").ResolutionKind,a=i("VdBB").HitTestResult,l=i("jCNj"),c=i("9uLv"),u=i("6xeX").Tooltip,h=i("s1Gx").sortSourcesPreOrdered,d=i("ikwP").createDisconnectedCanvas,p=i("ikwP").getPrescaledContext2D,f=i("ikwP").drawScaled,_=i("ikwP").Size,m=i("gAom").drawVerticalLine,v=["EUR","USD","JPY","GBP","CHF","AUD","CAD","NZD","CNY"],g=h.ChartEventsSource;function y(t,i){var o=this;if(r.call(this),this._series=t,this._clickedId=null,this._clickedHoverItemIndex=null,i&&i.fixedData){this._distribution=i.fixedData;var s=t.model().properties().chartEventsSourceProperties.state();s.visible=!0,this._properties=new e(s)}else this._chartEvents=new n({minImportance:1}),this._properties=t.model().properties().chartEventsSourceProperties;this.setOwnerSource(t);var l=function(e,t){o._coordinates||o._recalcCoordinates();var i=o._coordinates;if(i&&i.length){o._series.model().hoveredSource()!==o&&(o._hoverGroupIndex=void 0),o._createTemplates();var r=o._paneHeight,n=null,s=o._LOLLIPOP_LINE_WIDTH,a=s/2,l=o._LOLLIPOP_LINE_HEIGHT,c=o._LOLLIPOP_CIRCLE_DIAMETER,u=-c/2,h=o._LOLLIPOP_COUNTER_SIZE,d=o._LOLLIPOP_COUNTER_OFFSET,p=o.properties().breaks,_=p.visible.value();if(_){e.strokeStyle=p.color.value(),e.lineWidth=Math.max(1,Math.floor(p.width.value()*t.pixelRatio)),CanvasEx.setLineStyle(e,p.style.value());for(var v=0;v<i.length;v++){var g=Math.round(i[v].x*t.pixelRatio),y=Math.round((r-l-c*i[v].items.length)*t.pixelRatio);m(e,g,0,y)}}o._importanceByIndex||(o._importanceByIndex={});var b,S=o._importanceByIndex;if(f(e,t.pixelRatio,(function(){for(var t=i.length;t--;){e.drawImage(o._templatesCache.line,i[t].x-a+.5,r-l-.5,s,l);var p=i[t].index;S[p]||(S[p]=[]);for(var f=i[t].items.length;f--;){var _=i[t].items[f];if(f in S[p])b=S[p][f];else{b=-1;for(var m=_.length;m--;)_[m].importance>b&&(b=_[m].importance);S[p][f]=b}var v=r-l-c*(f+1)-.5,g=i[t].x,y=_.length,w=_[0].currency,P=o._hoverGroupIndex===i[t].index&&o._hoverItemIndex===f;if(o._clickedId!==i[t].index||o._clickedHoverItemIndex!==f){var C;C=P?"hovered":b<-.5?"low":b<.5?"mid":"hi";var T=o._templatesCache[C][w];if(e.drawImage(T,g+u,v,c,c),y>1){var x=o._amountImage(y);e.drawImage(x,0,0,x.width,x.height,g+d,v-d,h,h)}}else n={y:v,x:g,count:y,currency:w,currencyGroup:_,maxImportance:b,hovered:!0}}}})),!_&&n){e.strokeStyle=o.color,e.lineWidth=Math.max(1,Math.floor(t.pixelRatio)),CanvasEx.setLineStyle(e,CanvasEx.LINESTYLE_DASHED);g=Math.round(n.x*t.pixelRatio),y=Math.round((r-l-c*(n.count-1))*t.pixelRatio);m(e,g,0,y)}f(e,t.pixelRatio,(function(){if(n){var t,i=(t=n.hovered?o._templatesCache.hovered:o._templatesCache[b]||o._templatesCache[-1])[n.currency]||t[""];if(e.drawImage(i,n.x+u,n.y,c,c),n.count>1){var r=o._amountImage(n.count);e.drawImage(r,0,0,r.width,r.height,n.x+d,n.y-d,h,h)}}})),n?o._showTooltip(n.currencyGroup,n.x,n.y,e):o._hideTooltip()}else o._hideTooltip()},c=function(e){o._hoverGroupIndex=void 0,o._hoverItemIndex=void 0;var t=e.x,i=e.y;o._coordinates||o._recalcCoordinates();var r=o._coordinates
;if(!r||!r.length)return null;var n=o._paneHeight,s=o._LOLLIPOP_CIRCLE_DIAMETER,l=o._LOLLIPOP_LINE_HEIGHT,c=Math.floor((n-l-i)/s),u=n-c*s-l-s/2-i,h=Math.sqrt(s*s/4-u*u);if(!isFinite(h))return null;for(var d=t-h,p=0,f=r.length-1;f-p>1;){var _=p+f>>1;r[_].x>=d&&(f=_),r[_].x<=d&&(p=_)}for(var m=p;m<r.length;m++){var v=r[m].x-t;if(v>h)break;if(!(v<-h)&&r[m].items[c])return o._hoverGroupIndex===r[m].index&&o._hoverItemIndex===c||(o._hoverGroupIndex=r[m].index,o._hoverItemIndex=c,o._invalidate()),new a(a.CUSTOM,{clickHandler:o._lollipopMouseClickHandler.bind(o,r[m].index),tapHandler:o._lollipopMouseClickHandler.bind(o,r[m].index)})}return null};this._paneView={renderer:function(e,t){return o._paneHeight=e,{hitTest:c,draw:l}}},this._series.model().timeScale().tickMarks().changed.subscribe(this,this._recalcDistribution),this._chartEvents&&this._chartEvents.changed.subscribe(this,this._recalcDistribution),this._properties.subscribe(this,this._recalcDistribution),this._recalcDistribution()}inherit(y,r),y.prototype.color=c.color.black80,y.prototype.bgcolor="white",y.prototype._tooltipShown=!1,y.prototype._$tooltip=null,y.prototype._$content=null,y.prototype._tooltipX=void 0,y.prototype._tooltipY=void 0,y.prototype._tooltipItems=null,y.prototype._distribution=null,y.prototype._colorsByIndex=null,y.prototype._coordinates=null,y.prototype._hoverGroupIndex=void 0,y.prototype._hoverItemIndex=void 0,y.prototype._LOLLIPOP_LINE_WIDTH=2,y.prototype._LOLLIPOP_LINE_HEIGHT=2,y.prototype._LOLLIPOP_CIRCLE_DIAMETER=24,y.prototype._LOLLIPOP_COUNTER_OFFSET=2,y.prototype._LOLLIPOP_COUNTER_SIZE=14,y.prototype.zorder=function(){return g},y.prototype.title=function(){return"Chart Events"},y.prototype.showInObjectTree=function(){return!1},y.prototype.onClickOutside=function(){this._clickedId=null},y.prototype._constructor="ChartEventsSource",y.prototype.properties=function(){return this._properties},y.prototype.updateAllViews=function(){var e=this._series.model().timeScale();if(e&&this._coordinates){var t={width:e.width(),barSpacing:e.barSpacing(),rightOffset:e.rightOffset()};this._cachedTimescaleState&&this._cachedTimescaleState.width===t.width&&this._cachedTimescaleState.barSpacing===t.barSpacing&&this._cachedTimescaleState.rightOffset===t.rightOffset||(this._cachedTimescaleState=t,this._coordinates=null)}},y.prototype.paneViews=function(){if(!this._properties.visible.value())return null;var e=this._series.symbolInfo();return!e||"bitcoin"!==e.type&&"crypto"!==e.type?[this._paneView]:null},y.prototype._recalcDistribution=function(){var e=this._series.model().timezone();e&&"exchange"!==e||(e=(t=this._series.symbolInfo())&&t.timezone);if(e&&(this._timeOffset=l.get_timezone(e).offset_utc(new Date)),isFinite(this._timeOffset))if(this._chartEvents){if(this._coordinates=null,this._distribution=null,this._importanceByIndex=null,!this._properties.visible.value())return this._hideTooltip(),void(this._clickedId=null);var t;if((t=this._series.symbolInfo())&&t.name&&!(t.name.length<6)&&("forex"===t.type||"cfd"===t.type||"bitcoin"===t.type||"crypto"===t.type)){
for(var i=null,r=t.name,n=0,a=0;a<2;a++){var c;"bitcoin"!==t.type&&"crypto"!==t.type||"DOGE"!==r.substr(n,4).toUpperCase()?(c=r.substr(n,3).toUpperCase(),n+=3):(c="DOGE",n+=4),-1!==v.indexOf(c)&&(i||(i={}),i[c]=!0)}if(i){var u,h=o.parse(this._series.interval());if(h.isValid()){var d=NaN;switch(h.kind()){case s.Weeks:d=168*h.multiplier();break;case s.Days:d=24*h.multiplier();break;case s.Minutes:d=h.multiplier()/60;break;case s.Seconds:d=h.multiplier()/3600;break;default:return}if(d<4)u=-1;else if(d<48)u=0;else{if(!(d<672))return;u=1}this._minImportance===u&&this._symbolName===r||(this._chartEvents.reset({minImportance:u,currencyFilter:Object.keys(i)}),this._minImportance=u,this._symbolName=r),this._createTemplates();var p=this._chartEvents.items(),f=this._series.model().timeScale(),_=f.tickMarks(),m={};this._distribution=m;var g=+_.minIndex;if(this._properties.futureOnly.value()&&(g=Math.max(g,f.baseIndex())),isFinite(g)){var y=+_.maxIndex,b=p.length,S=0;if(C=_.indexToTime(y))for(var w=+C-this._timeOffset;S<p.length&&!(p[S].timestamp<=w);S++);for(var P=y;P>=g;P--){var C;if(C=_.indexToTime(P))for(w=+C-this._timeOffset;;S++){if(S>=b)return void(this._chartEvents.minObtainedTimestamp>_.indexToTime(g)&&this._chartEvents.requestMore({from:_.indexToTime(g)}));var T=p[S];if(!i||i[T.currency]){if(T.timestamp<w)break;m[P]||(m[P]=[]);for(var x=m[P].length;x--;)if(m[P][x][0].currency===T.currency){m[P][x].push(T);break}x<0&&m[P].push([T])}}}}}}}}else this.distibution&&this._createTemplates()},y.prototype._recalcCoordinates=function(){this._distribution||this._recalcDistribution();var e=[];this._coordinates=e;var t=this._distribution;if(t){var i=this._series.model().timeScale(),r=i.visibleBarsStrictRange();if(null!==r){var n=r.lastBar(),o=r.firstBar();this._coordinates=e;for(var s=o;s<=n;s++)t[s]&&e.push({x:i.indexToCoordinate(s),items:t[s],index:s})}}},y.prototype._onNewItems=function(){this._recalcDistribution(),this._series.model().updateSource(this)},y.prototype._createTemplates=function(){if(!this._templatesCache){this._templatesCache={line:null,hovered:{},numbers:{}},this._createTemplateLine();for(var e=0;e<v.length;e++){var t=v[e];this._createTemplateCircle(t,"low",c.color.attention),this._createTemplateCircle(t,"mid",c.color.attention50),this._createTemplateCircle(t,"hi",c.color.danger),this._createTemplateCircle(t,"hovered",c.color.brandHover)}}},y.prototype._createTemplateLine=function(){var e=d(document,new _(this._LOLLIPOP_LINE_WIDTH,this._LOLLIPOP_LINE_HEIGHT)),t=p(e);t.strokeStyle=this.color,CanvasEx.setLineStyle(t,CanvasEx.LINESTYLE_DASHED);var i=this._templatesCache;i.line=e;var r=new Image;r.onload=function(){i.line=r},r.src=e.toDataURL()},y.prototype._createTemplateCircle=function(e,t,r){var n=this,o=2*n._LOLLIPOP_CIRCLE_DIAMETER,s=d(document,new _(o,o)),a=p(s),l=this._templatesCache;function c(){var i=new Image;i.onload=function(){l[t][e]=i},i.src=s.toDataURL()}l[t]||(l[t]={}),l[t][e]=s;var u=Math.floor(o/2),h=o-6-10,f=this.bgcolor;function m(){a.beginPath(),a.arc(u,u,o/2-1.5,0,2*Math.PI),a.closePath(),
a.lineWidth=3,a.strokeStyle=r,a.stroke()}var v="";switch(e){case"EUR":v=i("YUej");break;case"USD":v=i("9RhJ");break;case"JPY":v=i("C85F");break;case"GBP":v=i("Ngz3");break;case"CHF":v=i("IERO");break;case"AUD":v=i("tHq3");break;case"CAD":v=i("koRH");break;case"NZD":v=i("r4gg");break;case"CNY":v=i("EEWc")}if(v){var g=new Image;g.onload=function(){!function(e){e.width=h,e.height=h,a.drawImage(e,u-h/2,u-h/2,h,h),a.globalCompositeOperation="destination-in",a.beginPath(),a.arc(u,u,h/2,0,2*Math.PI),a.closePath(),a.fillStyle=f,a.fill(),a.globalCompositeOperation="source-over"}(g),m(),c(),n._invalidate()},/\b(MSIE|Trident)\b/.test(navigator&&navigator.appVersion)?g.src=this._fallbackImages[e]:g.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(v)}else m(),c()},y.prototype._amountImage=function(e){if(e=String(e),this._templatesCache.numbers[e])return this._templatesCache.numbers[e];var t=2*this._LOLLIPOP_COUNTER_SIZE,i=d(document,new _(t,t)),r=p(i),n=t/2;return r.font="20px sans-serif",r.textBaseline="middle",r.textAlign="center",r.fillStyle="white",r.arc(n,n,t/2,0,2*Math.PI),r.fill(),r.fillStyle="black",r.fillText(e,n,n),this._templatesCache.numbers[e]=i,i},y.prototype._createTooltipLayout=function(){this._$tooltip=new u({width:220})},y.prototype._showTooltip=function(e,t,i,r){var n=r.canvas.parentNode;n&&(this._$tooltip||this._createTooltipLayout(),this._$tooltip.show({items:e,x:t,y:i,wrapElement:n,timeOffset:this._timeOffset}))},y.prototype._hideTooltip=function(){this._$tooltip&&this._$tooltip.hide()},y.prototype._invalidate=function(){this._series.model().updateSource(this)},y.prototype._dateStr=function(e){var t=new Date(e+this._timeOffset),i=Math.round(Math.abs(this._timeOffset)/6e4),r="UTC";return 0!==i&&(this._timeOffset>0?r+="+":r+="-",r+=Math.floor(i/60),i%60&&(r+=":"+i%60)),t.getUTCFullYear()+"-"+("0"+(t.getUTCMonth()+1)).slice(-2)+"-"+("0"+t.getUTCDate()).slice(-2)+" "+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+" ("+r+")"},y.prototype._fallbackImages={AUD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAtFBMVEUAAABHV6hGV6hIWKdGV6lGV6mjrNVba6/MoLvXrcJdarOGg7man8+dptF4hcDhtsXhtsRndbhHWKn0lJ5SYq74v8X2qbG3vt6Ml8mXoc+AjMT1z9bd4O9pd7nGy+ROX63///9ebbP1pK3vY3HpnKrbt8mutdnc3+/yipXuXm339/vl6PPyprCjrNTfmKv09fqOmcp9icLZscTxdIGvttnglqitia/o6vTl5/Ogk771nKXR1uok/dPkAAAAEnRSTlMAkNAgz4/kQ/D0l1Q146P+/tdT9Ek9AAAAl0lEQVQYGU3ABRLCMAAEwEtS3C9CCxR3d/3/vwhMkcVLJl1dM0gpJLJXq+v0UngbOqtbHTIe9wJ4uenssDydyUbXMA8Umv3BvTm6kYaGjyJKVjtrJx0aemEZFT13C2vrpr2iF0Bvtm7Xcnu2I76A/46GkPwT9iQEGfNHQDG6RPxSgGh0Q34IeDUTMyHxJpgQSCghSSkUvCcoxxGR2DVB1AAAAABJRU5ErkJggg==",
CAD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAWlBMVEUAAADyna7wnqf19/v19/n09/rvipX09vr09/ruXm3udYPte4fue4j09/rvj5nwkJv0+vr39//tVWXtXm307PD04uf02N7uaHf19/rzztTxpq/udIHuX27uc4Cmg02WAAAAEnRSTlMAPFd/gL/A7/D+8OfmwK+tMCDHCHMKAAAAfElEQVR4AWWPRQLEIAwAU6GuBFL//ze3kfU5wcSBmTJXli6bwBhWpRxBaP1q+E7i/i38AJD6T1GnUIgI+x5Y+AIaEdF7EtEAsjgP74+TRa1i8TcXC9SScJslSIk1pW0ja5qijI1RxmLyv9jX6q0dV+m/GsCY8r6q+nzm9wN3vQ/0RJj4yQAAAABJRU5ErkJggg==",CHF:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxElEQVR4AWNAB+9DUw3ehqTUvwlJ2Q+k34MwlF0PkmPAB4CKCt6Gpv7HhUGGAel8rJqBtmyAKCSM34SmrifKZgKuKYD7GZuCD6VN/6EAxMbqHZBekO0N2Az4WN8N0w9i43JFAwPQPwfQbAZr+DJvOUw/iA0Sw3AJSC8DkPEBWZAAwPAGRQaA9OL2wvwVMD0gNk4vUByIsGj8QGo0gvS8D8hQoCghkZ2UQWrxZaYPeDR/QLcZV3ZugMbOBxAGsUFiYD+jAQBm1lU4Y8LtqgAAAABJRU5ErkJggg==",CNY:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAbFBMVEUAAADvVGTtVGTsVWXtVGTvUGDvUGjtVGTtVWXsU2PtVWXsVGTsVWXtVGTsVGTvWmHuWmLtVWXwhVDtVWXuW2L2u0LylE7yjlHxgVXzmkzvdVn1tUT0p0fvaF7vblvxe1jxiFP1rUb0oUr0m0w7gi5vAAAAE3RSTlMAQIDA7xAg4JBQ8L9gf7CT4N95YlMWdQAAAIZJREFUGBlVwAcSgjAURdGX0LF7A0q37H+PfjOMg0df+WGXprtDrtU+hQlIK0UnIDQzppRx9x7oQ8A4KTs/uwCEcQEuma6NaYF5wjj5sWnemMeM8Upew3DDtAvmqOQWwp2pm4iO8kRtIPKq+OOUFWwUmeTYcDIlP6WifU1UV1rlPqmLxOcyH/tmDpsy+r2pAAAAAElFTkSuQmCC",EUR:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAYFBMVEUAAABIWKdFVapHV6hHV6hGWKlGWKlGV6lHV6hHWKhGWKlGV6lGV6lHWKlSX6JeZpxpbZd1dJCAe4uMgoWXiX+ikHqjkHmvl3LFpGfGpWfcslzds1voulXoulbzwFD/yEoW9yMBAAAADXRSTlMAIDBvcH+Ar7C/wO/wuFJj1gAAAJdJREFUeAE9z4UBxDAIQFHqxk+pe9l/y/N7cSfyEmdV01RZLF8pH00ibyVA1wEU//XhPAeA9Hke+mnEnXHqaWLJYfDTnk4fIJcahm2Ab1OLEgIBILx6jShcBy8cJ6jULH4bgN0+U0sOS9sGCG27QC6xQlj3ed7XABq9AsMuN/PLIP2GvvRm/QLl93PKC5rKV5zXqnUevfoPfJIMWKgHm2UAAAAASUVORK5CYII=",JPY:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAP1BMVEUAAAD39//0+vr2+Pr2+Pr19/v19/n19vn19vn09/r09/r09vr09/rxpa/yw8r19/rxpq/zxMvvh5PtVWXviJT5Un0aAAAADXRSTlMAIDBvcH+Ar7C/wO/wuFJj1gAAAGpJREFUeAFljoMBRDEMQFMrxcf+s16D8ytiAGFDaa0EC4qfQnNi5/kiafyN3/WsjLUOrrIQSZ7X5iYtQqX4xYytVsD9d3F0qvl14H/Ju+kpTS2SHL0Pkmj+FvtePQPjUUz0oNhYEWs0pD8AMW8Lpf/OkoMAAAAASUVORK5CYII=",NZD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAn1BMVEUAAABGV6lHV6hGWKlGWKlFVaqQgrRGV6lIWKfmmaimqdFHV6hGWKlGV6nTqb/e2ed1gb/TqL50gb/d2OZHWKhRVqRHV6j2qbH+9PX83+Lxf4tHWKn1o6v0maJmV5yFV49RV6TuXWxod7n0mqOMl8lcV6DOVXG5VXn2qrJGWKnuXm2vVn7yiZR6VpOPVouZVoelVoKkqNCDe7KaVobuX26RZHfdAAAAF3RSTlMA8HDAgDBq7yD++29/r/D90/DT/b/wsEIK9MUAAACcSURBVBgZTcAFEsIwAATAixR3S5MrLTXc4f9vI80wDItGazY/9xaDCF9TEztbkO0+gm6SOFsd6A3hjcr3sdzvn2xIoGWSPE+MebLRjjCJ3Xrt4uqQZvQ0xs4aY11c7LYkawVnK2Mq6x7phjxtlxD8c8kEFIPrjYGCZnDfMdCIBBsbelktOoDkzyuV8Fb8kQikYCAkviKthFC6A+8Dc4QUp0+PRNwAAAAASUVORK5CYII=",
GBP:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABsElEQVR4AaVTA6+dURA8P6Fx+i/6D2rbttu4tm3HtS6fbdv2u7ated+W15zkaHd2ksVh4Zi3Tjxr6dYfa3M+1uQP33hrokV3srFEWLyZN2fJ1p+dS7f9xFB+E/SbD9P6dScb+YgTPXgbbx+RaEUVCPIRlwWDlzWw9eaTOiQr8OV7J3786NnMCHfu1MweaBm1mbsG0d48iVW7+DEFjp4pgkqih62hHZMTOjsjLNnyc93xc8XQyIywN3bA6/biybvmCAFRVj8sU0qYOwfR3TaNNXsEWLbt+zxWz29oIAItdV0X3F0DcLV2wZFb+k/AlVcKV3MnvP3DkFZ14C+/XtjQwNRn7niJFLE2HYp6D14Um7lAcAq0zM09cLV1w5VT8pfI3Yvh7uyHhksxmEuxjIpIFb7zogGBAGCra4VJY8F0Wds/ATmXt9/v54rcDq3CiJMXSqgrv4tIqCgf0Zu46lqmlRBy1Y7WxmXbf6K1YRzmnhGYxuXg8bqV7C++va7YouT6e+R0YcJBuvqwFh6nB19flW/OfJSjf6YfXbEEyEcclghU2OwPtQWjN9+aaNGdbNG4M6B0Sa2MTP3yAAAAAElFTkSuQmCC",USD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAn1BMVEUAAAD19/n2+Prte4f09/rvipXuXm3wnqf0+vrvj5nudYOtlb5+jsu81PLwipbwkJvAutjue4judIKSib99i8d5hMPvkJusyu339/+GsOZznNv09vr00dfyna5KidztVWWCrudVkN7tXm319/q70/Jsn+KlxO6wy/Bgl+DS4veOtel3puWZvevvfYrM2/Pzz9XH2vRUhtVyhsfp8fvd6fm1RKu9AAAAHnRSTlMAgHDn8MD+VzCv8Hb7cr6t4ubv3vb45NIgr/PvyzyfYTeeAAAAkElEQVR4XlXLVQ7DMBBF0ReGMvMYwlDu/tfW2I6q9Gh+7pMGymg1ftJyGqA3r8UnJcb8melN3RDPiHUWqg9UkrpEsYFJLd45VYUZTiF2JbUNtZwSzcKRFEF01864cVFx8ciJaT7SjAquXswgsX71rtoWVvLHQugO290D9nCw0XHYjwMtkiZlhF7gxVLG3kXFF0FcGmdRqkNIAAAAAElFTkSuQmCC"},y.prototype.isSavedInChart=function(e){return!!e},y.prototype.state=function(e){if(this._distribution||this._recalcDistribution(),!this._distribution)return null;var t={type:"ChartEventsSource",id:this.id(),state:null,zorder:this.zorder()};if(e){var i={},r=Object.keys(this._distribution).map(Number).filter(isFinite).sort((function(e,t){return t-e})),n=1/0,o=this._series.model().timeScale().visibleBarsStrictRange();null!==o&&(n=o.firstBar());for(var s=0,a=0;a<r.length&&!(s>300);a++){var l=r[a];if(l<n)break;i[l]=[];for(var c=this._distribution[l],u=0;u<c.length&&!(s>400);u++){i[l][u]=[];for(var h=this._distribution[l][u],d=0;d<h.length&&!(s>400);d++){var p=h[d],f={timestamp:p.timestamp,currency:p.currency};p.actual&&(f.actual=p.actual),p.forecast&&(f.forecast=p.forecast),p.previous&&(f.previous=p.previous),p.title&&(f.title=p.title),isFinite(p.importance)&&(f.importance=p.importance),i[l][u][d]=f,s++}}}t.state={distribution:i}}return t},y.createFromState=function(e,t,i){if(!t)return null;var r=i.mainSeries();if(!r)return null;var n=e&&e.state&&e.state.distribution;return n?new y(r,{fixedData:n}):null},y.prototype._lollipopMouseClickHandler=function(e){this._clickedId=this._clickedId===e?null:e,this._clickedHoverItemIndex=this._hoverItemIndex},TradingView.ChartEventsSource=y,t.ChartEventsSource=y}).call(this,i("tc+8"))},KuNA:function(e,t,i){"use strict";var r,n,o;i.r(t),i.d(t,"ProPlans",(function(){return r})),i.d(t,"BrokerPlans",(function(){return n})),i.d(t,"BrokerPlansIds",(function(){return o})),function(e){e.Free="free",e.Pro="pro",e.ProTrial="pro_trial",e.ProRealtime="pro_realtime",e.ProRealtimeTrial="pro_realtime_trial",e.ProPremium="pro_premium",e.ProPremiumTrial="pro_premium_trial",e.ProMiniAlerts="pro_mini_alerts",e.ProMiniAds="pro_mini_ads",
e.ProMiniLayouts="pro_mini_layouts",e.ProEdu="pro_edu"}(r||(r={})),function(e){e.Platinum="platinum",e.Gold="gold",e.Silver="silver",e.Free="free"}(n||(n={})),function(e){e[e.Platinum=3]="Platinum",e[e.Gold=2]="Gold",e[e.Silver=1]="Silver",e[e.Free=0]="Free"}(o||(o={}))},Kxc7:function(e,t,i){var r=i("qlfx"),n={},o={},s={},a={init:function(){var e,t;Object.keys(r).forEach((function(i){e=r[i],t=e.subsets,Array.isArray(t)?t.forEach((function(e){n[e]=1})):t&&Object.keys(t).forEach((function(e){n[e]=1})),n[i]=1}));var i,l=Object.keys(n);l.forEach((function(e){l.forEach((function(n){if(void 0!==(i=r[n])){if(!(t=i.subsets))return;o.hasOwnProperty(e)||(o[e]=[]),(Array.isArray(t)&&~t.indexOf(e)||e in t)&&o[e].push(n)}}))})),"undefined"!=typeof __initialDisabledFeaturesets&&__initialDisabledFeaturesets&&__initialDisabledFeaturesets.forEach((function(e){a.disable(e)})),"undefined"!=typeof __initialEnabledFeaturesets&&__initialEnabledFeaturesets&&__initialEnabledFeaturesets.forEach((function(e){a.enable(e)})),"undefined"!=typeof window&&(window.Featuresets=a),this.meta={_uniqueSetsNames:n,_setsReverseDependencies:o,_setsStates:s}},enabled:function(e){var t=function(e){var i=o.hasOwnProperty(e)?o[e]:[];if(!1===s[e])return!1;for(var r=s[e],n=0;n<i.length;++n)r|=t(i[n]);return r};return!!t(e)},enable:function(e){s[e]=!0},disable:function(e){s[e]=!1},setEnabled:function(e,t){s[e]=!!t},getAllFeatures:function(){var e={};return Object.keys(n).forEach((function(t){e[t]=s[t]})),e}};a.init(),e.exports=a},"L/Ed":function(e,t,i){"use strict";var r;i.r(t),i.d(t,"ToolboxType",(function(){return r})),function(e){e[e.Delete=0]="Delete"}(r||(r={}))},L7u7:function(e,t,i){"use strict";e.exports.pushChartPage=function(e){Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(26),i.e(24),i.e(82),i.e("history-manager")]).then(function(t){var r=new(i("OBKv").ChartPage)(e);TradingView.historyManager.push(r)}.bind(null,i)).catch(i.oe)}},LAp3:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("mrSG"),n=i("ogJP"),o=i("5rJj"),s=function(e){function t(t,i){return e.call(this,t,i,!1,{names:["width","color","visible"]})||this}return Object(r.__extends)(t,e),t.prototype._iterateLevels=function(e,t){for(var i in e.levels)if(e.levels[i]&&Object(n.isSameType)(e.levels[i],t.typecheck())){var r=t.tpl();for(var o in this._map.names)this._map.names.hasOwnProperty(o)&&(r=t.fill(o,this._map.names[o],e.levels[i],r));e.levels[i]=r}return e},t}(i.n(o).a);function a(e,t){return new s(e,t)}},LBej:function(e,t,i){"use strict";(function(t){var r=i("fTGZ").BarsMarksContainer,n=i("BOPY").BarsMarksContainerRenderer,o=i("BOPY").BarMarkTooltip,s=i("hPwr").PublishedChartsFilter,a=i("TxTq"),l=i("IVMC"),c=i("JWMC").trackEvent,u=i("txPx").getLogger("Chart.PublishedChartsTimeLine"),h=i("BHQF").fetch;function d(e,i){var n=TVSettings.getValue("PublishedChartsTimeline.filter",s.None);is_authenticated||(n=s.None);var o=new t({filter:n});r.call(this,e,o),this._currentRange=null,this._properties.visible.listeners().subscribe(this,(function(e){
this._getData(this._currentRange)})),this._properties.filter.listeners().subscribe(this,(function(e){TVSettings.setValue("PublishedChartsTimeline.filter",e.value()),this.clearMarks(),this._getData(this._currentRange)}));var a=e._undoModel._chartWidget;this._containsData=a._containsData,this._containsData&&this._properties.visible.setValue(!0),this.setUserEditEnabled(!1),this._onIdeaClickedHandler=i}function p(e){o.call(this)}inherit(d,r),d.prototype._initialize=function(e){a&&(this._boundOnMessage=this._onMessage.bind(this),a.on("ideas",this._boundOnMessage),a.on("ideas.post",this._boundOnMessage))},d.prototype._constructor="PublishedChartsTimeline",d.prototype._plateViewData=function(e){return{title:e.title,user_id:e.user__id,username:e.username,suggested:e.is_hot,mine:null!=window.user&&e.user__id===window.user.id,public:e.is_public}},d.prototype.paneViews=function(){return this._model.isInReplay()?[]:r.prototype.paneViews.call(this)},d.prototype.showIdea=function(e,t){var i=this._marks[e];if(i){if(c("GUI","View published idea"),t&&c("GUI","Ideas navigation arrow"),TradingView.onWidget()||this._containsData){var r=i.published_chart_url||"/v/"+i.image_url+"/";return r=this._getBaseUrl()+r,void window.open(r)}this._onIdeaClickedHandler({chartId:i.image_url,chartName:i.name,publishedUrl:i.published_chart_url,shortSymbol:i.short_name})}else u.logDebug("PublishedChartsTimeline.showIdea: unexpected published chart id")},d.prototype._getBaseUrl=function(){if(TradingView.onWidget()&&window.locale_domains){var e=window.locale||"en",t=window.locale_domains[e]?window.locale_domains[e]:window.locale_domains.en;return t?document.location.protocol+"//"+t:""}return""},d.prototype.onClicked=function(e){this.showIdea(e.id)},d.prototype.state=function(e){var t={type:"BarsMarksContainer",id:this.id(),zorder:this._zOrder,pinnedTooltips:this.pinnedTooltips};return e&&(t.marks=this.getPublishedPlates()),t},d.prototype.asyncState=function(){var e=this;return new Promise((function(t){e._properties.visible.value()?t(e.state(!0)):e._getData(e._currentRange,!0).then((function(){t(e.state(!0))}))}))},d.prototype.restoreData=function(e,t){null!=this.pinnedTooltips&&(this.pinnedTooltips=e.pinnedTooltips),t&&null!=e.marks&&(this._marks=e.marks)},d.prototype._getData=function(e,t){var i=this._model.mainSeries().properties(),r=this._model.mainSeries().symbolInfo();if(this._currentRange=e,r&&(this._properties.visible.value()||t)){var n=r.base_name.length>1?r.base_name:[r.pro_name],o=this.roundRange(this._rangeDifference(e));n=(n=l(n)).sort((function(e,t){return e-t}));var s={interval:i.interval.value(),legs:JSON.stringify(n),startTickmark:o.start,endTickmark:o.end,filter:this._properties.filter.value()},a=$.ajax("/charttimeline/",{type:"POST",data:s,dataType:"json"}).done(function(t){t.forEach((function(e){this._marks[e.id]=e}),this),this._loadedRange=this._rangeUnion(e,this._loadedRange);var i=this._requests.indexOf(a);~i&&this._requests.splice(i,1),this.onNeedRepaint.fire()}.bind(this));return this._requests.push(a),a}},
d.prototype._onMessage=function(e){if(!this._containsData){var t=this._model.mainSeries(),i=t.symbolInfo(),r=i&&i.base_name;if(r){var n=t.properties();e.interval===n.interval.value()&&~r.indexOf(e.pro_symbol)&&(this._marks[e.id]=e,this.onNeedRepaint.fire())}}},d.prototype._createTooltip=function(){return new p},d.prototype.updateDotData=function(e,t){return t.mine=e.mine,t.public=e.public,t.direction=e.direction,t},d.prototype.updatePlateData=function(e,t){return t.title=e.title,t.user_id=e.user_id,t.username=e.username,t.barWidth=this.barWidth(),t},d.prototype.destroy=function(){this._onIdeaClickedHandler=null,this._boundOnMessage&&(a.off("ideas",this._boundOnMessage),a.off("ideas.post",this._boundOnMessage),this._boundOnMessage=void 0),r.prototype.destroy.call(this)},inherit(p,o),p.prototype._createLayout=function(){this._layout=$('<div class="published-charts-tooltip"></div>'),this._layout_avatar=$('<div class="avatar"><img></div>').appendTo(this._layout),this._layout_text=$('<div class="text"></div>').appendTo(this._layout),this._layout_username=$('<div class="username">'+$.t("by __username__",{username:"<b></b>"})+"</div>").appendTo(this._layout),this._layout_pin=$('<div class="pin"></div>').appendTo(this._layout),this._picture_fetched=!1;var e=this;this._layout_pin.click((function(){e.plateData.pinned=!e.plateData.pinned,e.source.pinTooltip(e.plateData.id,e.plateData.pinned),e._layout_pin.toggleClass("pinned",e.plateData.pinned)})),this._layout_text.click((function(){e.source.showIdea(e.plateData.id)}))},p.prototype._updatePlate=function(e){this.plateData=e,this._layout.removeClass(n.THEMES.join(" ")).addClass(e.themeName),this._layout_text.text(e.title),this._layout_username.find("b").text(e.username),this._layout_pin.toggleClass("pinned",e.pinned),this._picture_fetched||(this._picture_fetched=!0,h("/api/v1/user/profile/{0}/?avatars_fallback=true".format(e.user_id)).then((function(e){return e.json()})).then(function(t){this._layout_avatar.find("img").attr("alt",e.username),this._layout_avatar.find("img").attr("src",t.avatars.mid)}.bind(this)))},e.exports=d}).call(this,i("tc+8"))},LdoW:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path d="M6.5 15A8.5 8.5 0 1 0 15 6.5H8.5"/><path d="M12 10L8.5 6.5 12 3"/></g></svg>'},Ltzl:function(e,t,i){"use strict";i.r(t),i.d(t,"SaveLineToolStateUndoCommand",(function(){return o}));var r=i("mrSG"),n=i("Eyy1"),o=function(e){function t(t,i,r,n){void 0===n&&(n=!0);var o=e.call(this,r,n)||this;return o._newStates=[],o._model=t,o._savedStates=i.map((function(e){return e.state(!1)})),o}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._applyState(this._newStates)},t.prototype.undo=function(){0===this._newStates.length&&this.saveNewState(),this._applyState(this._savedStates)},t.prototype.saveNewState=function(){var e=this,t=this._savedStates.map((function(t){return Object(n.ensureNotNull)(e._model.dataSourceForId(t.id))}));this._newStates=t.map((function(e){
return e.state(!1)}))},t.prototype._applyState=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t],o=Object(n.ensureNotNull)(this._model.dataSourceForId(r.id));this._model.restoreLineToolState(o,r)}},t}(i("RDU5").UndoCommand)},LxhU:function(e,t,i){"use strict";i.r(t),i.d(t,"ResolutionKind",(function(){return r})),i.d(t,"SpecialResolutionKind",(function(){return n})),i.d(t,"Interval",(function(){return u})),i.d(t,"isHour",(function(){return d}));var r,n,o=/^(\d*)([SHDWMR])$/,s=/^(\d+)$/;!function(e){e.Seconds="seconds",e.Minutes="minutes",e.Days="days",e.Weeks="weeks",e.Months="months",e.Range="range",e.Invalid="invalid"}(r||(r={})),function(e){e.Hours="hours"}(n||(n={}));var a={};a[r.Seconds]=1e3,a[r.Minutes]=60*a[r.Seconds],a[r.Days]=1440*a[r.Minutes],a[r.Weeks]=7*a[r.Days];var l={S:r.Seconds,D:r.Days,W:r.Weeks,M:r.Months,R:r.Range},c=new Set([r.Seconds,r.Minutes]),u=function(){function e(e,t){this._kind=r.Invalid,this._multiplier=0,e!==r.Invalid&&t>0&&(this._kind=e,this._multiplier=t)}return e.prototype.kind=function(){return this._kind},e.prototype.multiplier=function(){return this._multiplier},e.prototype.isValid=function(){return this.kind()!==r.Invalid&&this.multiplier()>0},e.prototype.isDWM=function(){return this.isValid()&&!this.isRange()&&!this.isIntraday()},e.prototype.isIntraday=function(){var e=c.has(this.kind());return this.isValid()&&!this.isRange()&&e},e.prototype.isSeconds=function(){return this.kind()===r.Seconds},e.prototype.isMinutes=function(){return this.kind()===r.Minutes},e.prototype.isMinuteHours=function(){return this.kind()===r.Minutes&&d(this.multiplier())},e.prototype.isDays=function(){return this.kind()===r.Days},e.prototype.isWeeks=function(){return this.kind()===r.Weeks},e.prototype.isMonths=function(){return this.kind()===r.Months},e.prototype.isRange=function(){return this.kind()===r.Range},e.prototype.isTimeBased=function(){return!this.isRange()},e.prototype.letter=function(){return this.isValid()&&this.kind()!==r.Minutes?this.kind()[0].toUpperCase():""},e.prototype.value=function(){return this.isValid()?this.kind()===r.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""},e.prototype.isEqualTo=function(t){if(!(t instanceof e))throw new Error("Argument is not an Interval");return!(!this.isValid()||!t.isValid())&&(this.kind()===t.kind()&&this.multiplier()===t.multiplier())},e.prototype.inMilliseconds=function(e){if(void 0===e&&(e=Date.now()),!this.isValid()||this.isRange())return NaN;if(this.isMonths()){var t=new Date(e);return t.setUTCMonth(t.getUTCMonth()+(this.multiplier()||1)),+t-e}var i=this.multiplier();return a[this.kind()]*i},e.isEqual=function(t,i){return e.parse(t).isEqualTo(e.parse(i))},e.parse=function(t){t=(t+"").toUpperCase().split(",")[0];var i=o.exec(t);return null!==i?"H"===i[2]?new e(r.Minutes,60*h(i[1])):new e(l[i[2]],h(i[1])):null!==(i=s.exec(t))?new e(r.Minutes,h(i[1])):new e(r.Invalid,0)},e.kind=function(t){return e.parse(t).kind()},e.isValid=function(t){return e.parse(t).isValid()},e.isDWM=function(t){return e.parse(t).isDWM()},
e.isIntraday=function(t){return e.parse(t).isIntraday()},e.isSeconds=function(t){return e.parse(t).isSeconds()},e.isMinutes=function(t){return e.parse(t).isMinutes()},e.isMinuteHours=function(t){return e.parse(t).isMinuteHours()},e.isDays=function(t){return e.parse(t).isDays()},e.isWeeks=function(t){return e.parse(t).isWeeks()},e.isMonths=function(t){return e.parse(t).isMonths()},e.isRange=function(t){return e.parse(t).isRange()},e.isTimeBased=function(t){return e.parse(t).isTimeBased()},e.normalize=function(t){var i=e.parse(t);return i.isValid()?i.value():null},e}();function h(e){return 0===e.length?1:parseInt(e,10)}function d(e){return e>=60&&!(e%60)}},"M7/j":function(e,t,i){"use strict";i.r(t),i.d(t,"itemsRangeIsValid",(function(){return h})),i.d(t,"splitItems",(function(){return d})),i.d(t,"PaneRendererBaseline",(function(){return p}));var r=i("mrSG"),n=i("aO4+"),o=i("hBTJ"),s=i("GEp6"),a=i("Zp/P"),l=i("Y7w9"),c=i("cPgM"),u=i("VdBB");function h(e){if(0===e.length)return!1;var t=e.findIndex((function(e){return Object(a.coordinateIsValid)(e.y)}));if(-1===t)return!1;for(var i=e.length-1;i>t&&!Object(a.coordinateIsValid)(e[i].y);)i--;return!(t>=i)}function d(e,t){for(var i=[],r=[],s=null,l=0;l<e.length;l++){var c=e[l],u=e[l+1]||{};if(Object(a.coordinateIsValid)(c.y))c.y<=t&&i.push(c),c.y>=t&&r.push(c),s=c;else{if(null===s)continue;c=s}if(Object(a.coordinateIsValid)(u.y)&&(c.y>t&&u.y<t||c.y<t&&u.y>t))if(Math.abs(c.x-u.x)<1){var h=new n.Point(c.x,t);i.push(h),r.push(h)}else{var d=Object(o.intersectLineSegments)(c,u,new n.Point(c.x,t),new n.Point(u.x,t));if(null!==d){h=c.add(u.subtract(c).scaled(d));i.push(h),r.push(h)}}}return{topItems:i,bottomItems:r}}var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._data=null,t}return Object(r.__extends)(t,e),t.prototype.setData=function(e){this._data=e},t.prototype.hitTest=function(e){if(null===this._data)return null;for(var t=this._data,i=t.items,r=t.topLineWidth,o=t.bottomLineWidth,c=Object(a.selectionTolerance)((r+o)/2),h=Object(l.lowerbound)(i,e,(function(e,t){return e.x<=t.x})),d=Math.max(1,h-1),p=Math.min(i.length-1,h+1),f=d;f<=p;++f){var _=i[f-1],m=i[f];if(Object(s.distanceToSegment)(new n.Point(_.x,_.y),new n.Point(m.x,m.y),new n.Point(e.x,e.y)).distance<=c)return new u.HitTestResult(u.HitTestResult.REGULAR)}return null},t.prototype._drawImpl=function(e){if(null!==this._data){var t=this._data,i=t.items,r=t.baseLevelCoordinate,n=t.bottom,o=t.bottomFillColor1,s=t.bottomFillColor2,a=t.topFillColor1,l=t.topFillColor2,c=t.topLineColor,u=t.bottomLineColor,p=t.topLineWidth,f=t.bottomLineWidth;if(h(i)){var _=d(i,r),m=_.topItems,v=_.bottomItems;e.lineCap="round",e.lineJoin="round",e.translate(.5,.5),0!==m.length&&(e.beginPath(),e.moveTo(m[0].x,r),this._makeLine(e,m,!0,0),e.closePath(),e.fillStyle=this._makeLinearGradient(e,a,l,r-n,r),e.fill(),e.beginPath(),this._makeLine(e,m,!1,0),e.lineWidth=p,e.strokeStyle=c,e.stroke()),0!==v.length&&(e.beginPath(),e.moveTo(v[0].x,r),this._makeLine(e,v,!0,1),e.closePath(),
e.fillStyle=this._makeLinearGradient(e,o,s,r,r+n),e.fill(),e.beginPath(),this._makeLine(e,v,!1,1),e.lineWidth=f,e.strokeStyle=u,e.stroke())}}},t.prototype._makeLine=function(e,t,i,r){if(null!==this._data){var n=t.findIndex((function(e){return Object(a.coordinateIsValid)(e.y)}));if(-1!==n)for(var o,s=this._data,l=s.barSpacing,c=s.baseLevelCoordinate,u=.25*l,h=t.length,d=n;d<h;d++){var p=t[d],f=t[d+1]||{};if(Object(a.coordinateIsValid)(p.y)){if(0===r){if(o&&o.y>=c&&p.y>=c){e.moveTo(p.x,p.y);continue}}else if(o&&o.y<=c&&p.y<=c){e.moveTo(p.x,p.y);continue}if(o&&Object(a.coordinateIsValid)(o.y))e.lineTo(p.x,p.y),i&&!Object(a.coordinateIsValid)(f.y)&&e.lineTo(p.x,c);else if(f&&Object(a.coordinateIsValid)(f.y))i?(d!==n&&e.lineTo(p.x,c),e.lineTo(p.x,p.y)):e.moveTo(p.x,p.y);else if(i){if(0===d)continue;d!==n&&e.lineTo(p.x-u,c),e.lineTo(p.x-u,p.y),e.lineTo(p.x+u,p.y),e.lineTo(p.x+u,c)}else e.moveTo(p.x-u,p.y),e.lineTo(p.x+u,p.y);o=p}}}},t.prototype._makeLinearGradient=function(e,t,i,r,n){var o=e.createLinearGradient(0,r,0,n);return o.addColorStop(0,t),o.addColorStop(1,i),o},t}(c.ScaledPaneRenderer)},MA5A:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolCrossLine",(function(){return c}));var r=i("mrSG"),n=i("Ocx9"),o=i("p1SQ"),s=i("GmZZ"),a=i("Ss5c"),l=window.t("Cross Line"),c=function(e){function t(r,n){var a=e.call(this,r,n||t.createProperties())||this;return a._constructor="LineToolCrossLine",a._priceAxisView=new o.LineToolHorzLinePriceAxisView(a),a._timeAxisView=new s.a(a),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("amUF").CrossLinePaneView;a._setPaneViews([new t(a,a._model)])}.bind(null,i)).catch(void 0),a}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 1},t.prototype.translatedType=function(){return l},t.prototype.name=function(){return"Cross Line"},t.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},t.prototype.timeAxisViews=function(){return this.isSourceHidden()?null:this.properties().showTime.value()?[this._timeAxisView]:null},t.prototype.updateAllViews=function(){e.prototype.updateAllViews.call(this),this._priceAxisView.update(),this._timeAxisView.update()},t.prototype.canHasAlert=function(){return!1},t.prototype.lineColor=function(){return this.properties().linecolor.value()},t.prototype.lineWidth=function(){return this.properties().linewidth.value()},t.prototype.lineStyle=function(){return this.properties().linestyle.value()},t.createProperties=function(e){var i=new n.DefaultProperty("linetoolcrossline",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"xrdl")).then((function(e){return e.CrossLineDefinitionsViewModel}))},t._configureProperties=function(e){a.LineDataSource._configureProperties(e)},t}(a.LineDataSource)},MROS:function(e,t,i){"use strict";i.r(t),
i.d(t,"ModelSelection",(function(){return o}));var r=i("Y7w9"),n=i("CW80"),o=function(){function e(){this._items=[],this._set=new Set}return e.prototype.isEmpty=function(){return 0===this._items.length},e.prototype.add=function(e){this._items.length>0&&!Object(n.isLineTool)(this._items[0])&&this.clear(),Object(n.isLineTool)(e)||this.clear();var t=Object(r.lowerbound)(this._items,e,(function(e,t){return e.zorder()<t.zorder()}));this._items.splice(t,0,e),this._set.add(e)},e.prototype.canBeAddedToSelection=function(e){return 0===this._items.length||Object(n.isLineTool)(this._items[0])&&Object(n.isLineTool)(e)},e.prototype.isSelected=function(e){return this._set.has(e)},e.prototype.sources=function(){return this._items.slice(0)},e.prototype.checkLineToolSelection=function(){this._items.forEach((function(e){return Object(n.isLineTool)(e)&&e.calcIsActualSymbol()})),this._items=this._items.filter((function(e){return!Object(n.isLineTool)(e)||e.isActualSymbol()}))},e.prototype.remove=function(e){this._items=this._items.filter((function(t){return t!==e})),this._set.delete(e)},e.prototype.clear=function(){this._items=[],this._set.clear()},e.prototype.notFixedSources=function(){return this._items.filter((function(e){return!Object(n.isLineTool)(e)||!e.isFixed()}))},e}()},MSvv:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("ogJP"),s=i("k9/m"),a=i("Ss5c"),l=i("Ocx9"),c=i("0YCj"),u=i.n(c),h=i("jenN"),d=i("aB9a"),p=i("8Uy/"),f=i("a7Ha"),_=i("Zy3/"),m=i("z+cS"),v=i("pJOz"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lineRenderer1=new m.VerticalLineRenderer,t._lineRenderer2=new m.VerticalLineRenderer,t._medianRenderer=new v.TrendLineRenderer,t._renderer=null,t}return Object(r.__extends)(t,e),t.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer},t.prototype._updateImpl=function(){e.prototype._updateImpl.call(this),this._renderer=null;var t=this._getPoints();if(!(t.length<1)){this._renderer=new _.CompositeRenderer;var i=t[0],r=t[1];this._lineRenderer1.setData({x:i.x,color:"#808080",linewidth:1,linestyle:p.LINESTYLE_SOLID}),this._renderer.append(this._lineRenderer1),t.length>1&&(this._lineRenderer2.setData({x:r.x,color:"#808080",linewidth:1,linestyle:p.LINESTYLE_SOLID}),this._medianRenderer.setData({points:[i,r],color:"#808080",linewidth:1,linestyle:p.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:f.LineEnd.Normal,rightend:f.LineEnd.Normal}),this._renderer.append(this._lineRenderer2),this._renderer.append(this._medianRenderer))}},t}(d.LineSourcePaneView),y=i("hayr"),b=i("ZAxB"),S=i("gvrv"),w=i("w4Ji"),P=i("GVHu");i.d(t,"StudyLineDataSource",(function(){return C})),i.d(t,"StudyLineDataSourceAnchorsPaneView",(function(){return T}));var C=function(e){function t(t,i,r,n){var o=e.call(this,t,n)||this;return o._indexes=null,o._inputs=null,o._pointsetPoints=null,o._loadedPlots=null,o._loadedGraphics=null,o._definitionsViewModel=null,o._beingCreatedPaneView=new g(o,t),o._anchorsPaneView=new T(o,o.model()),o._metaInfo=i,
o._dataSource=new S.a(t.chartApi(),t.mainSeries(),r,i),o._dataSource.dataCleared().subscribe(o,o._onDataCleared),o._dataSource.dataUpdated().subscribe(o,o._onDataUpdated),o}return Object(r.__extends)(t,e),t.prototype.destroy=function(){this._dataSource.dataUpdated().unsubscribe(this,this._onDataUpdated),this._dataSource.dataCleared().unsubscribe(this,this._onDataCleared),this._dataSource.destroy(),null!==this._definitionsViewModel&&(this._definitionsViewModel.destroy(),this._definitionsViewModel=null),this._unsubscribeApplyInputsOnSeriesCompleted(),this._isDestroyed=!0,e.prototype.destroy.call(this)},t.prototype.stop=function(){e.prototype.stop.call(this),this._isDestroyed||(this._dataSource.stop(),this.clearData())},t.prototype.start=function(){e.prototype.start.call(this),this._isDestroyed||null===this._inputs||this._dataSource.start()},t.prototype.metaInfo=function(){return this._metaInfo},t.prototype.graphicsInfo=function(){return this._metaInfo.graphics},t.prototype.series=function(){return this._model.mainSeries()},t.prototype.translatedType=function(){return this._metaInfo.description},t.prototype.name=function(){return this._metaInfo.description},t.prototype.studyId=function(){return this._metaInfo.id},t.prototype.setPoint=function(t,i,r){this.clearData(),e.prototype.setPoint.call(this,t,this._preparePoint(i,r))},t.prototype.move=function(e){},t.prototype.clearData=function(){this._clearAllDataExceptPointsetPoints(),this._pointsetPoints=null,this.updateAllViews()},t.prototype.data=function(){return this.plots()},t.prototype.plots=function(){return this._loadedPlots||this._dataSource.plots()},t.prototype.graphics=function(){return this._loadedGraphics||this._dataSource.graphics()},t.prototype.firstValue=function(){return this._model.mainSeries().firstValue()},t.prototype.state=function(t){var i,n=e.prototype.state.call(this,t);this.metaInfo()instanceof u.a?i=this.metaInfo().state():(i=Object(o.clone)(this.metaInfo())).id=u.a.parseIdString(i.id+(i.version?"-"+i.version:"")).fullId;var s=Object(r.__assign)(Object(r.__assign)({},n),{metaInfo:i});return t&&(s.data=this.plots().state(),s.nonseriesindexes=this._indexes,s.graphics=Object(h.saveStudyGraphics)(this.graphics())),s},t.prototype.restoreData=function(e){void 0!==e.data&&(this._loadedPlots=new s.PlotList(Object(w.studyPlotFunctionMap)(this._metaInfo),w.studyEmptyPlotValuePredicate),this._loadedPlots.restoreState(e.data)),this._indexes=e.nonseriesindexes?e.nonseriesindexes:null,this._loadedGraphics=e.graphics?Object(h.loadStudyGraphics)(e.graphics):null},t.prototype.getInputsPropertyPage=function(){return y.propertyPages.StudyLineDataSourcePropertyPage},t.prototype.getStylesPropertyPage=function(){return y.propertyPages.StudyStylesPropertyPage},t.prototype.getPropertyDefinitionsViewModel=function(){var e=this;return null===this._definitionsViewModel?this._getPropertyDefinitionsViewModelClass().then((function(t){return null===t||e._isDestroyed?null:(null===e._definitionsViewModel&&(e._definitionsViewModel=new t(e._model.undoModel(),e)),
e._definitionsViewModel)})):Promise.resolve(this._definitionsViewModel)},t.prototype.paneViews=function(t){var i=[];if(this.isSourceHidden())return i;if(this._isReady()){var r=e.prototype.paneViews.call(this,t);null!==r&&(i=i.concat(r))}else i.push(this._beingCreatedPaneView);return i.push(this._anchorsPaneView),i},t.prototype.propertiesChanged=function(t){e.prototype.propertiesChanged.call(this,t),this._onStudyInputsMayChange()},t.createPropertiesFromStudyMetaInfoAndState=function(e,i,r,n){var o=Object(P.prepareStudyPropertiesForLoadChart)(e,i,r,null,n);return t._configureProperties(o),o},t.prototype._isReady=function(){return!0},t.prototype._updateAllPaneViews=function(){e.prototype._updateAllPaneViews.call(this),this._beingCreatedPaneView.update(),this._anchorsPaneView.update()},t.prototype._onPointsetUpdated=function(t){e.prototype._onPointsetUpdated.call(this,t),this._pointsetPoints=this._points.map((function(e){return{price:e.price,index:e.index}})),this._onStudyInputsMayChange()},t.prototype._onDataCleared=function(){this.updateAllViews(),this._model.updateSource(this)},t.prototype._onDataUpdated=function(e,t,i){this.updateAllViews(),this._model.updateSource(this)},t.prototype._onStudyInputsMayChange=function(){var e=null;null!==this._pointsetPoints&&this._pointsetPoints.length===this.pointsCount()&&null===(e=this._studyInputs(this._pointsetPoints))&&(this._clearAllDataExceptPointsetPoints(),this.updateAllViews()),this._areInputsEqual(this._inputs,e)||this._applyStudyInputs(e)},t.prototype._preparePoint=function(t,i){var r=Object(n.ensureNotNull)(this._model.mainSeries().bars().firstIndex()),o=Object(n.ensureNotNull)(this._model.mainSeries().bars().lastIndex());return t.index=Math.max(t.index,r),t.index=Math.min(t.index,o),e.prototype._preparePoint.call(this,t,i)},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.resolve(null)},t.prototype._subscribeApplyInputsOnSeriesCompleted=function(){var e=this;this._unsubscribeApplyInputsOnSeriesCompleted(),this._model.mainSeries().dataEvents().completed().subscribe(this,(function(){return e._onStudyInputsMayChange()}),!0)},t.prototype._unsubscribeApplyInputsOnSeriesCompleted=function(){this._model.mainSeries().dataEvents().completed().unsubscribeAll(this)},t._createPropertiesFromStudyIdAndState=function(e,i){var r=u.a.getStudyPropertyRootNameById(e),n=new l.DefaultProperty(r,i);return t._configureProperties(n),n},t._createPropertiesFromStudyMetaInfo=function(e,i){var r=Object(P.prepareStudyProperties)(e,null,null,i);return t._configureProperties(r),r},t._configureProperties=function(e){a.LineDataSource._configureProperties(e)},t.prototype._areInputsEqual=function(e,t){return null===t?null===e:null!==e&&Object(b.a)(this._metaInfo.inputs,e,t)},t.prototype._applyStudyInputs=function(e){var t=this._inputs;this._inputs=e,null!==e&&(this._unsubscribeApplyInputsOnSeriesCompleted(),this._dataSource.setInputs(e),null===t&&this.isStarted()&&!this._dataSource.isStarted()&&this._dataSource.start()),
this.properties().lastUpdateTime.setValue((new Date).valueOf())},t.prototype._clearAllDataExceptPointsetPoints=function(){this._inputs=null,this._dataSource.clearData(),this._loadedPlots=null,this._indexes=null,this._loadedGraphics=null},t}(a.LineDataSource),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e=new _.CompositeRenderer;return e.append(this.createLineAnchor({points:this._getPoints()})),e},t}(d.LineSourcePaneView)},MWAT:function(e,t,i){"use strict";i.r(t),i.d(t,"PriceScaleSelectionStrategyEvenly",(function(){return a})),i.d(t,"PriceScaleSelectionStrategyAllRight",(function(){return l})),i.d(t,"PriceScaleSelectionStrategyAllLeft",(function(){return c})),i.d(t,"createPriceScaleSelectionStrategy",(function(){return h})),i.d(t,"allPriceScaleSelectionStrategyInfo",(function(){return d}));var r=i("mrSG"),n=i("Eyy1"),o=i("3ClC"),s=function(){function e(e){this._priceScalesLimit=8,this._metaInfo=e}return e.prototype.metaInfo=function(){return this._metaInfo},e.prototype.findSuitableScale=function(e,t,i,r){if(void 0!==r)return this._tryToGetDesiredPriceScale(e,t,r,i);if(Object(o.isStudy)(t)){var n=t.metaInfo();if("Volume@tv-basicstudies"===n.id)return(l=e.createPriceScaleAtPosition("overlay")).setTopMargin(.75),l.setBottomMargin(0),l;var s=t.desiredPriceScalePosition();if(null!==s)return this._tryToGetDesiredPriceScale(e,t,s,i);if(void 0!==i&&(Object(o.isStudy)(i)||e.isMainPane())&&n.is_price_study)return this._getPriceScaleTheSameAsForSource(i,e)}var a=!1;if(Object(o.isStudy)(t)){var l,c=t.metaInfo().groupingKey;if(void 0!==c)if(null!==(l=e.model().findNonOverlayStudyWithGroupingKey(c,e)))return this._getPriceScaleTheSameAsForSource(l.study,l.pane);a=Boolean(t.metaInfo().is_price_study)}else t===e.model().mainSeries()&&(a=!0);if(a&&null!==(l=this._findFirstScaleForPriceStudy(e)))return l;return this.createNewPriceScaleIfPossible(e)},e.prototype.canCreateNewPriceScale=function(e){return e.leftPriceScales().length+e.rightPriceScales().length<this._priceScalesLimit},e.prototype._getPriceScaleTheSameAsForSource=function(e,t){return t.isOverlay(e)?t.createPriceScaleAtPosition("overlay"):Object(n.ensureNotNull)(e.priceScale())},e.prototype._priceScaleIsPrice=function(e,t){var i=e.mainSource();return!!i&&(i===t.mainSeries()||!!Object(o.isStudy)(i)&&Boolean(i.metaInfo().is_price_study))},e.prototype._findFirstScaleForPriceStudy=function(e){for(var t=e.model(),i=0;i<this._priceScalesLimit;i++){if(e.rightPriceScales().length>i&&this._priceScaleIsPrice(e.rightPriceScales()[i],t))return e.rightPriceScales()[i];if(e.leftPriceScales().length>i&&this._priceScaleIsPrice(e.leftPriceScales()[i],t))return e.leftPriceScales()[i]}return null},e.prototype._targetPriceScaleIndex=function(e,t){if(e.mainSource()===t.mainSeries())return 0},e.prototype._tryToGetDesiredPriceScale=function(e,t,i,r){switch(i){case"left":
return this.canCreateNewPriceScale(e)?e.createPriceScaleAtPosition("left"):e.createPriceScaleAtPosition("overlay");case"right":return this.canCreateNewPriceScale(e)?e.createPriceScaleAtPosition("right"):e.createPriceScaleAtPosition("overlay");case"as-series":return void 0!==r?Object(n.ensureNotNull)(r.priceScale()):e.isMainPane()?Object(n.ensureNotNull)(Object(n.ensureNotNull)(e.mainDataSource()).priceScale()):this.createNewPriceScaleIfPossible(e);case"overlay":return e.createPriceScaleAtPosition("overlay")}},e}(),a=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),t.prototype.apply=function(e){if(e.containsMainSeries()){var t=Object(n.ensureNotNull)(Object(n.ensureNotNull)(e.mainDataSource()).priceScale());e.movePriceScale(t,"right",0)}for(var i=e.model();e.leftPriceScales().length>e.rightPriceScales().length;){t=e.leftPriceScales()[e.leftPriceScales().length-1];e.movePriceScale(t,"right",this._targetPriceScaleIndex(t,i))}for(;e.rightPriceScales().length-e.leftPriceScales().length>1;){t=e.rightPriceScales()[e.rightPriceScales().length-1];e.movePriceScale(t,"left",this._targetPriceScaleIndex(t,i))}},t.prototype.createNewPriceScaleIfPossible=function(e){if(!this.canCreateNewPriceScale(e))return e.createPriceScaleAtPosition("overlay");var t=e.leftPriceScales().length<e.rightPriceScales().length?"left":"right";return e.createPriceScaleAtPosition(t)},t}(s),l=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),t.prototype.apply=function(e){var t=this,i=e.model();e.leftPriceScales().slice(0).forEach((function(r){return e.movePriceScale(r,"right",t._targetPriceScaleIndex(r,i))}))},t.prototype.createNewPriceScaleIfPossible=function(e){return this.canCreateNewPriceScale(e)?e.createPriceScaleAtPosition("right"):e.createPriceScaleAtPosition("overlay")},t}(s),c=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),t.prototype.apply=function(e){var t=this,i=e.model();e.rightPriceScales().slice(0).forEach((function(r){return e.movePriceScale(r,"left",t._targetPriceScaleIndex(r,i))}))},t.prototype.createNewPriceScaleIfPossible=function(e){return this.canCreateNewPriceScale(e)?e.createPriceScaleAtPosition("left"):e.createPriceScaleAtPosition("overlay")},t}(s),u=[{name:"left",title:window.t("Stack On The Left"),ctor:c},{name:"right",title:window.t("Stack On The Right"),ctor:l},{name:"auto",title:window.t("Auto"),ctor:a}];function h(e){var t=Object(n.ensureDefined)(u.find((function(t){return t.name===e})));return new t.ctor(t)}function d(){return u}},MXV9:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor" transform="translate(4 4)"><path d="M.5 10.992c0 .287.226.508.505.508H2.65c.19.93.55 1.82 1.09 2.63L2.577 15.3a.5.5 0 0 0-.007.71l1.42 1.42a.5.5 0 0 0 .71-.007l1.17-1.163c.81.54 1.71.9 2.63 1.09v1.645c0 .284.227.505.508.505h1.984c.28 0 .508-.221.508-.505V17.35a7.46 7.46 0 0 0 2.63-1.09l1.17 1.163a.5.5 0 0 0 .71.007l1.42-1.42a.5.5 0 0 0-.007-.71l-1.163-1.17c.54-.81.9-1.7 1.09-2.63h1.645a.502.502 0 0 0 .505-.508V9.008a.503.503 0 0 0-.505-.508H17.35c-.19-.93-.55-1.82-1.09-2.63l1.163-1.17a.5.5 0 0 0 .007-.71l-1.42-1.42a.5.5 0 0 0-.71.007L14.13 3.74a7.46 7.46 0 0 0-2.63-1.09V1.005A.504.504 0 0 0 10.992.5H9.008a.504.504 0 0 0-.508.505V2.65c-.92.19-1.82.55-2.63 1.09L4.7 2.577a.5.5 0 0 0-.71-.007L2.57 3.99a.5.5 0 0 0 .007.71L3.74 5.87c-.54.81-.9 1.7-1.09 2.63H1.005a.503.503 0 0 0-.505.508v1.984z"/><circle cx="10" cy="10" r="2.5"/></g></svg>'},MY2c:function(e,t,i){"use strict";i.r(t),i.d(t,"UndoStack",(function(){return l}));var r=i("RDU5"),n=i("aIyQ"),o=i.n(n),s=i("txPx"),a=Object(s.getLogger)("Common.UndoStack"),l=function(){function e(){this._commands=[],this._onChange=new o.a}return e.prototype.onChange=function(){return this._onChange},e.prototype.isEmpty=function(){return 0===this._commands.length},e.prototype.clear=function(){this.isEmpty()||(this._commands.length=0,this._onChange.fire())},e.prototype.push=function(e){if(!(e instanceof r.UndoCommand))throw new TypeError("argument must be an instance of UndoCommand");this._commands.push(e),this._onChange.fire(e)},e.prototype.pop=function(){if(!this.isEmpty()){var e=this._commands.pop();return this._onChange.fire(e),e}a.logDebug("pop: undo stack is empty")},e.prototype.head=function(){if(!this.isEmpty())return this._commands[this._commands.length-1]},e}()},MbIA:function(e,t,i){"use strict";i.r(t),i.d(t,"DateTimeFormatter",(function(){return s}));var r=i("4kQX"),n=i("gQ5K"),o={dateFormat:"yyyy-MM-dd",timeFormat:"%h:%m:%s",dateTimeSeparator:" "},s=function(){function e(e){void 0===e&&(e={});var t=Object.assign({},o,e);this._dateFormatter=new n.DateFormatter(t.dateFormat),this._timeFormatter=new r.TimeFormatter(t.timeFormat),this._separator=t.dateTimeSeparator}return e.prototype.format=function(e){return""+this._dateFormatter.format(e)+this._separator+this._timeFormatter.format(e)},e.prototype.formatLocal=function(e){return""+this._dateFormatter.formatLocal(e)+this._separator+this._timeFormatter.formatLocal(e)},e}()},"MyT/":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><circle fill="currentColor" cx="9" cy="9" r="4"/></svg>'},"N+BX":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Double Curve");function s(e,t){this._constructor="LineToolBezierCubic";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("a6on").BezierCubicPaneView
;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Double Curve"},s.prototype.controlPoints=function(){var e=this.pointToScreenPoint(this.points()[0])[0],t=this.pointToScreenPoint(this.points()[1])[0],i=t.subtract(e).scaled(.5).transposed().scaled(.3),r=e.add(t).scaled(.33),n=e.add(t).scaled(.67),o=r.add(i),s=n.subtract(i);return[this.screenPointToPoint(o),this.screenPointToPoint(s)]},s.prototype.setLastPoint=function(e,t){r.prototype.setLastPoint.call(this,e,t),this._controlPoints=this.controlPoints()},s.prototype.addPoint=function(e,t,i){var n=r.prototype.addPoint.call(this,e,t,!0);if(n){var o=this.controlPoints();delete this._controlPoints,this._points.push(o[0]),this._points.push(o[1]),i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2),this._createPointProperty(3)}return n},s.prototype.restorePoints=function(e,t,i){r.prototype.restorePoints.call(this,e,t,i),this._createPointProperty(2),this._createPointProperty(3)},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("b4fl").GeneralBezierDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolbeziercubic",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolBezierCubic=s},N22A:function(e,t,i){"use strict";i.r(t),i.d(t,"TRADING_SERVICE",(function(){return n})),i.d(t,"tradingService",(function(){return o})),i.d(t,"waitTradingService",(function(){return s}));var r=i("eqEH"),n={id:"TradingService"};function o(){return Object(r.a)(n)?Object(r.c)(n):null}function s(){return Object(r.e)(n)}},NA7W:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("kcTO"),n=function(){function e(e){this.type="quoteSessionPrice",this.reset(e)}return e.prototype.state=function(){return this._priceFormatter.state()},e.prototype.reset=function(e){this._priceFormatter=e||new r.PriceFormatter(100,1,!1)},e.prototype.update=function(e,t){var i=null!=t.pricescale||null!=t.minmov||null!=t.fractional||null!=t.minmove2,n=null!=e.pricescale&&null!=e.minmov&&null!=e.fractional&&null!=e.minmove2;i&&n&&(this._priceFormatter=new r.PriceFormatter(e.pricescale,e.minmov,e.fractional||!1,e.minmove2))},e.prototype.format=function(e,t,i){return this._priceFormatter.format(e,t,i)},e.prototype.hasForexAdditionalPrecision=function(){return this._priceFormatter.hasForexAdditionalPrecision()},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(new r.PriceFormatter(t.priceScale,t.minMove,t.fractional,t.minMove2))},e}()},NJRZ:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("XABCD Pattern");function s(e,t){this._constructor="LineTool5PointsPattern";var n=t||s.createProperties()
;r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("6MfG").Pattern5PaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 5},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"XABCD Pattern"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("EFc4").Points5PatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetool5pointspattern",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineTool5PointsPattern=s},NNtz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=new(function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._test=t[i]={}}return r(e,[{key:"provide",value:function(e,t){this._test[e]=t}}]),e}())(window,"qaGlobals");t.default=n,e.exports=t.default},NP3r:function(e,t,i){"use strict";i.r(t),i.d(t,"getProductId",(function(){return l})),i.d(t,"enabled",(function(){return c})),i.d(t,"getConfig",(function(){return u}));i("bSeV");var r=i("+lbv"),n=i("FwoV"),o=i("bKsZ"),s=i("KuNA"),a=i("FfBj");function l(){var e,t=(null===(e=window.user)||void 0===e?void 0:e.pro_plan)||s.ProPlans.Free,i=t!==s.ProPlans.Free&&!Object(a.isTrialProduct)(t);return i||(t=Object(a.getProductForTrial)(t)),i&&window.user&&!window.user.is_pro_limited&&!window.user.new_pro_product_line&&(t="__legacy_"+t),t}function c(e,t){var i=u(e,t);return!!i&&!(i[o.ProductFeatures.DISABLE_ON_TRIAL]&&(!window.user||window.user.is_trial))}function u(e,t){var i=function e(t){var i=r[t];return i?i.extends?Object.assign({},e(i.extends),i):i:null}(t||l());if(!i)return null;var o=window.TradingView.widgetCustomer;return o&&n[o]&&(i=Object.assign({},i,n[o])),i&&i[e]||null}},NWKS:function(e){e.exports=JSON.parse('{"color-toolbar-button-text-active":"color-seeking-alpha-brand"}')},Ndyb:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererColumns",(function(){return n}));var r=i("VdBB"),n=function(){function e(e){this._data=null,this._precalculatedCache=[],this.setData(e)}return e.prototype.setData=function(e){this._data=e,this._precalculatedCache=[]},e.prototype.draw=function(e,t){if(null!==this._data&&0!==this._data.items.length){var i=t.pixelRatio;this._precalculatedCache.length||this._fillPrecalculatedCache(i);for(var r=Math.max(1,Math.floor(i)),n=Math.round(this._data.histogramBase*i)-Math.floor(r/2),o=n+r,s=this._data.lineColor,a=0;a<this._data.items.length;a++){
var l=this._data.items[a],c=this._precalculatedCache[a],u=Math.round(l.y*i),h=l.style?l.style.color:s;e.fillStyle=h;var d=void 0,p=void 0;u<=n?(d=u,p=o):(d=n,p=u-Math.floor(r/2)+r),e.fillRect(c.left,d,c.right-c.left+1,p-d)}}},e.prototype.hitTest=function(e){if(null===this._data)return null;for(var t=.5*this._data.barSpacing,i=e.x-t,n=e.x+t,o=0,s=this._data.items;o<s.length;o++){var a=s[o],l=a.x;if(l>=i&&l<=n){var c=a.y;if(e.y>=Math.min(c,this._data.histogramBase)&&e.y<=Math.max(c,this._data.histogramBase))return new r.HitTestResult(r.HitTestResult.REGULAR)}}return null},e.prototype._fillPrecalculatedCache=function(e){if(null!==this._data&&0!==this._data.items.length){var t=Math.ceil(this._data.barSpacing*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this._data.barSpacing*e)-t;this._precalculatedCache=new Array(this._data.items.length);for(var r=0;r<this._data.items.length;r++){var n,o=this._data.items[r],s=Math.round(o.x*e),a=void 0,l=void 0;if(i%2)a=s-(n=(i-1)/2),l=s+n;else a=s-(n=i/2),l=s+n-1;this._precalculatedCache[r]={left:a,right:l,roundedCenter:s,center:o.x*e,time:o.timePointIndex}}for(r=1;r<this._data.items.length;r++){var c=this._precalculatedCache[r],u=this._precalculatedCache[r-1];c.time===u.time+1&&(c.left-u.right!==t+1&&(u.roundedCenter>u.center?u.right=c.left-t-1:c.left=u.right+t+1))}var h=Math.ceil(this._data.barSpacing*e);for(r=0;r<this._data.items.length;r++){(c=this._precalculatedCache[r]).right<c.left&&(c.right=c.left);var d=c.right-c.left+1;h=Math.min(d,h)}if(t>0&&h<4)for(r=0;r<this._data.items.length;r++){(d=(c=this._precalculatedCache[r]).right-c.left+1)>h&&(c.roundedCenter>c.center?c.right-=1:c.left+=1)}}else this._precalculatedCache=[]},e}()},Ngz3:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 0h18v18H0z"/><path fill="#fff" d="M0 0v3.5L4 7H0v4h3l-3 2.5V18h.5L7 12v6h4v-5.5l6 5.5h1v-3.5L14 11h4V7h-3l3-2.5V0h-.5L11 6V0H7v5.5L1 0H0z"/><path fill="#ed5565" d="M8 0v8H0v2h8v8h2v-8h8V8h-8V0H8zm10 .6L11 7h2l5-4.5v-2zM0 .8v2L5 7h2L0 .8zM5 11l-5 4.3v2L7 11H5zm6 0l7 6v-1.8L13 11h-2z"/></svg>'},NhhI:function(e,t,i){},NhkU:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Pitchfan");function a(e,t){this._constructor="LineToolPitchfan";var n=t||a.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("l5Au").PitchfanLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);for(var s=[this._properties.child("median").child("linewidth")],l=0;l<=a.LevelsCount;l++)s.push(this._properties.child("level"+l).child("linewidth"));this._widthsProperty=new o(s)}inherit(a,r),a.LevelsCount=8,a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.pointsCount=function(){return 3},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Pitchfan"},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible
;e.setProperty(r,!1,"Erase level line")},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("D+Nk").PitchBaseDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a.createProperties=function(e){var t=new n("linetoolpitchfan",e,!1,{range:[0,8]});return a._configureProperties(t),t},a._configureProperties=function(e){r._configureProperties(e)},t.LineToolPitchfan=a},Nkvk:function(e,t,i){"use strict";i.r(t);var r,n=i("mrSG"),o=i("4O8T"),s=i.n(o),a=i("qocr"),l=i("BI5g"),c=function(){var e;if(void 0===r){var t=document.createElement("div"),i=t.style;i.visibility="hidden",i.width="100px",i.msOverflowStyle="scrollbar",document.body.appendChild(t);var n=t.offsetWidth;t.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",t.appendChild(o);var s=o.offsetWidth;null===(e=t.parentNode)||void 0===e||e.removeChild(t),r=n-s}return r};function u(e,t,i){null!==e&&e.style.setProperty(t,i)}function h(e,t){return getComputedStyle(e,null).getPropertyValue(t)}function d(e,t){return parseInt(h(e,t))}i.d(t,"setFixedBodyState",(function(){return m})),i.d(t,"mediaState",(function(){return v}));var p=function(e){function t(){var t=e.call(this)||this;return t.width=0,t.height=0,t.device=null,t.breakpoints=l.breakpoints,t._checkDevice(),window.addEventListener("resize",t._checkDevice),Object.entries(l.breakpoints).sort((function(e,t){e[0];var i=e[1];t[0];return i-t[1]})).forEach((function(e,i,r){var n,o=e[0],s=e[1];0!==i?n=r[i-1][1]+1:n=0;var a,l,c=(a=n,(l=s)===1/0?window.matchMedia("(min-width: "+a+"px)"):window.matchMedia("(min-width: "+a+"px) and (max-width: "+l+"px)"));c.matches&&t._setNewDevice(o),c.addListener((function(e){e.matches&&(t._checkDevice(),t._setNewDevice(o))}))})),Object(a.whenDocumentReady)(t._checkDevice.bind(t)),t.isPhoneSizeDevice.bind(t),t}return Object(n.__extends)(t,e),t.prototype.isPhoneSizeDevice=function(){return"phone"===this.device||"phone-vertical"===this.device},t.prototype._checkDevice=function(){this.width=window.innerWidth,this.height=window.innerHeight},t.prototype._setNewDevice=function(e){var t=this.device;this.device=e,this.trigger("changeDevice",[e,t])},t}(s.a),f=0,_=!1;function m(e){var t=document.body,i=t.querySelector(".widgetbar-wrap");if(e&&1==++f){var r=h(t,"overflow"),n=d(t,"padding-right");"hidden"!==r.toLowerCase()&&t.scrollHeight>t.offsetHeight&&(u(i,"right",c()+"px"),t.style.paddingRight=n+c()+"px",_=!0),t.classList.add("i-no-scroll")}else if(!e&&f>0&&0==--f&&(t.classList.remove("i-no-scroll"),_)){u(i,"right","0px");var o=Boolean(window.widgetbar&&window.widgetbar.resizerBridge.fullscreen.value())?0:function(e){if(null!==e)return d(e,"width")-d(e,"padding-left")-d(e,"padding-right")}(i)||0;t.scrollHeight<=t.clientHeight&&(o-=c()),t.style.paddingRight=(o<0?0:o)+"px",_=!1}}var v=new p},NsVT:function(e,t,i){"use strict";i.r(t),i.d(t,"ChartPage",(function(){return u}))
;var r=i("hY0g"),n=i.n(r),o=i("HySD"),s=i("t7cu"),a=i("+GxX"),l=i("Kxc7"),c=l.enabled("no_min_chart_width"),u=function(){function e(e){var t=this;this._processVisibility=function(e){var i=e.container.value();return t._affectsLayout(e.name)?(i&&i.classList.toggle("js-hidden",!1),!0):(i&&i.classList.toggle("js-hidden",!0),!1)},this._setWidth=function(e,i){var r=i;t._fullscreenArea!==e.name&&(e.availWidth.setValue(i),e.canNegotiate.width&&(r=Object(s.a)(i,e.negotiations.width)));var n=e.container.value();return n&&(n.style.width=r+"px"),e.width.setValue(r),r},this._setHeight=function(e,i){var r=i;t._fullscreenArea!==e.name&&(e.availHeight.setValue(i),e.canNegotiate.height&&(r=Object(s.a)(i,e.negotiations.height)));var n=e.container.value();return n&&(n.style.height=r+"px"),e.height.setValue(r),r};var i=e.container.value();if(!i)throw new Error("bridge.container.value() must be an element");this._container=i,this._availableAreas=["left","tradingpanel","right","top","bottom","center","topleft","extratop"],this._areas={},this._bridge=e,this._width=e.width,this._height=e.height,this._width.subscribe((function(){return t.recalculate()})),this._height.subscribe((function(){return t.recalculate()})),this._bridge.visible.subscribe((function(){return t._updateVisibility()})),this._bridge.fullscreen.subscribe((function(){return t._onParentFullscreenChange()})),this.recalculate()}return e.prototype.allocate=function(e){var t=this,i=e&&e.areaName;if(-1===this._availableAreas.indexOf(i))throw new Error("unknown options.areaName");this.free(i);var r=this._createDOM(i),a={name:i,canNegotiate:{width:"left"===i||"right"===i||"tradingpanel"===i||"topleft"===i,height:"top"===i||"bottom"===i||"topleft"===i||"extratop"===i},negotiations:{width:[],height:[]},remove:function(){for(var e in t._areas)t._areas[e]===a&&t.free(e)},negotiateWidth:function(e){if(a.canNegotiate.width){var i=Object(s.c)(e);Object(s.b)(a.negotiations.width,i)||(a.negotiations.width=i,t.recalculate())}},negotiateHeight:function(e){if(a.canNegotiate.height){var i=Object(s.c)(e);Object(s.b)(a.negotiations.height,i)||(a.negotiations.height=i,t.recalculate())}},requestFullscreen:function(){t._fullscreenArea||("right"!==i&&"center"!==i||(t._fullscreenArea=i),"center"===i&&t._bridge.requestFullscreen(),t._updateFullscreen())},exitFullscreen:function(){i===t._fullscreenArea&&(t._fullscreenArea=void 0,"center"===i&&t._bridge.exitFullscreen(),t._updateFullscreen())},width:new n.a,height:new n.a,availWidth:new n.a,availHeight:new n.a,alive:new n.a(!0),container:new n.a(r),visible:new n.a(!0),fullscreen:new n.a(!0),rdState:new o.ResizerDetacherState};return a.rdState.pushOwner(a),this._areas[i]=a,a.rdState.owner.subscribe((function(e){var r=a.container.value();if(e!==a)r&&(r.innerHTML="",r.parentElement&&r.parentElement.removeChild(r));else{for(var n=null,o=t._availableAreas.indexOf(i);o--;){var s=t._availableAreas[o];if(t._affectsLayout(s)){n=t._areas[s].container.value();break}}r&&(n&&r.parentElement?r.insertAdjacentElement("afterend",n):t._container.appendChild(r))}
t.recalculate()}),{callWithLast:!0}),a.rdState.bridge()},e.prototype.free=function(e){var t=this._areas[e];if(t){this._areas[e]=void 0;var i=t.container.value();i&&i.parentElement&&i.parentElement.removeChild(i),t.alive.setValue(!1)}},e.prototype.recalculate=function(){var e={};this._recalcSingleRunToken=e;var t=this._areas.topleft,i=this._areas.left,r=this._areas.tradingpanel,n=this._areas.right,o=this._areas.top,s=this._areas.bottom,a=this._areas.center,l=this._areas.extratop,u=this._width.value(),h=this._height.value(),d=0,p=0,f=0,_=0,m=0,v=0,g=0,y=0;(e===this._recalcSingleRunToken&&l&&this._processVisibility(l)&&(y=this._setHeight(l,h),this._setWidth(l,u)),e===this._recalcSingleRunToken&&t&&this._processVisibility(t))&&(g=this._setHeight(t,h),(v=this._setWidth(t,u))&&(v+=4),(I=t.container.value())&&(I.style.top=y+"px"));e===this._recalcSingleRunToken&&i&&this._processVisibility(i)&&((I=i.container.value())&&(I.style.top=g+y+"px"),this._setHeight(i,h-g-y),(f=this._setWidth(i,u))&&(f+=4));if(e===this._recalcSingleRunToken&&r&&this._processVisibility(r)){this._setHeight(r,h);var b=u-f;c||(b-=300),m=this._setWidth(r,b)}if(e===this._recalcSingleRunToken&&n&&this._processVisibility(n)){this._setHeight(n,h-y);b=u-f-m;c||(b-=300),_=this._setWidth(n,b),(I=n.container.value())&&(I.style.top=y+"px")}var S=m+_,w=S?4:0;if(e===this._recalcSingleRunToken&&o&&this._processVisibility(o)){var P=Math.max(v,f);(I=o.container.value())&&(I.style.left=P+"px",I.style.top=y+"px");b=u-P-m-_-w;this._setWidth(o,b),d=this._setHeight(o,h)}var C=0,T=u-f-m-_-w;if(e===this._recalcSingleRunToken&&s&&this._processVisibility(s)){(I=s.container.value())&&(I.style.left=f+"px",I.classList.toggle("no-border-top-left-radius",!f),I.classList.toggle("no-border-top-right-radius",!S)),this._setWidth(s,T);var x=h-d-y;C=Math.min(300,x-0),p=this._setHeight(s,x)+4}if(e===this._recalcSingleRunToken&&a&&this._processVisibility(a)){var I;(I=a.container.value())&&(I.style.left=f+"px",I.style.top=d+y+"px",I.classList.toggle("no-border-bottom-left-radius",!p||!f),I.classList.toggle("no-border-bottom-right-radius",!S||!p)),this._setWidth(a,T);x=h-d-p-y;this._setHeight(a,Math.max(x,C))}e===this._recalcSingleRunToken&&r&&this._affectsLayout("tradingpanel")&&((I=r.container.value())&&(I.style.right=_+"px",I.style.top=y+"px"));e===this._recalcSingleRunToken&&this._updateVisibility()},e.prototype._affectsLayout=function(e){var t=this._areas[e];if(!t)return!1;if(t.rdState.owner.value()!==t)return!1;if(this._fullscreenArea&&this._fullscreenArea!==e)return h(e);if(this._width.value()<=567||this._height.value()<=445){var i=["center","top","left","topleft","extratop"];if(Object(a.isFeatureEnabled)("mobile_show_bottom_panel")&&i.push("bottom"),!i.includes(e))return!1}return!0},e.prototype._updateVisibility=function(){for(var e=this._bridge.visible.value(),t=0;t<this._availableAreas.length;t++){var i=this._availableAreas[t],r=this._areas[i];r&&(e&&this._affectsLayout(i)?r.visible.setValue(!0):r.visible.setValue(!1))}},e.prototype._onParentFullscreenChange=function(){
this._bridge.fullscreen.value()||(this._fullscreenArea=void 0,this._updateFullscreen())},e.prototype._updateFullscreen=function(){for(var e=void 0!==this._fullscreenArea,t=0;t<this._availableAreas.length;t++){var i=this._availableAreas[t],r=this._areas[i];if(r)if(i!==this._fullscreenArea){var n=r.container.value();n&&n.classList.toggle("js-hidden",e&&!h(i))}else r.fullscreen.setValue(!0)}this._updateVisibility(),this.recalculate()},e.prototype._createDOM=function(e){var t=document.createElement("div");return t.classList.add("layout__area--"+e),t.style.position="absolute","bottom"===e?t.style.bottom="0":t.style.top="0","right"===e||"tradingpanel"===e?t.style.right="0":t.style.left="0",t},e}();function h(e){var t=l.enabled("side_toolbar_in_fullscreen_mode"),i=l.enabled("header_in_fullscreen_mode");return"center"===e||"left"===e&&t||"top"===e&&i}},Nu4p:function(e,t,i){"use strict";i.r(t),i.d(t,"plotShapesData",(function(){return r}));i("YFKU");var r={shape_arrow_down:{guiName:window.t("Arrow Down"),id:"shape_arrow_down",paneRendererClass:"PaneRendererArrowDown",pineName:"shape.arrowdown",icon:"arrow_down"},shape_arrow_up:{guiName:window.t("Arrow Up"),id:"shape_arrow_up",paneRendererClass:"PaneRendererArrowUp",pineName:"shape.arrowup",icon:"arrow_up"},shape_circle:{guiName:window.t("Circle"),id:"shape_circle",paneRendererClass:"PaneRendererCircleShape",pineName:"shape.circle",icon:"circle"},shape_cross:{guiName:window.t("Cross"),id:"shape_cross",paneRendererClass:"PaneRendererCrossShape",pineName:"shape.cross",icon:"cross"},shape_diamond:{guiName:window.t("Diamond"),id:"shape_diamond",paneRendererClass:"PaneRendererDiamond",pineName:"shape.diamond",icon:"diamond"},shape_flag:{guiName:window.t("Flag"),id:"shape_flag",paneRendererClass:"PaneRendererFlagShape",pineName:"shape.flag",icon:"flag"},shape_label_down:{guiName:window.t("Label Down"),id:"shape_label_down",paneRendererClass:"PaneRendererLabelDown",pineName:"shape.labeldown",icon:"label_down"},shape_label_up:{guiName:window.t("Label Up"),id:"shape_label_up",paneRendererClass:"PaneRendererLabelUp",pineName:"shape.labelup",icon:"label_up"},shape_square:{guiName:window.t("Square"),id:"shape_square",paneRendererClass:"PaneRendererSquare",pineName:"shape.square",icon:"square"},shape_triangle_down:{guiName:window.t("Triangle Down"),id:"shape_triangle_down",paneRendererClass:"PaneRendererTriangleApexDown",pineName:"shape.triangledown",icon:"triangle_down"},shape_triangle_up:{guiName:window.t("Triangle Up"),id:"shape_triangle_up",paneRendererClass:"PaneRendererTriangleApexUp",pineName:"shape.triangleup",icon:"triangle_up"},shape_xcross:{guiName:window.t("X Cross"),id:"shape_xcross",paneRendererClass:"PaneRendererXCross",pineName:"shape.xcross",icon:"x_cross"}}},OBgQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("jCNj"),n=function(){function e(e,t,i){this.year=e,this.month=t,this.day=i}return e.prototype.toString=function(){return this.year+"-"+this.month+"-"+this.day},e.prototype.compareTo=function(e){
return this.year>e.year||this.year===e.year&&this.month>e.month||this.year===e.year&&this.month===e.month&&this.day>e.day?1:this.year===e.year&&this.month===e.month&&this.day===e.day?0:-1},e.prototype.before=function(e){return-1===this.compareTo(e)},e.prototype.toCalendar=function(e){return r.get_cal(r.get_timezone("Etc/UTC"),this.year,this.month-1,this.day)},e.prototype.addDays=function(t){var i=this.toCalendar(r.get_timezone("Etc/UTC"));return r.add_date(i,t),e.fromCalendar(i)},e.fromCalendar=function(t){return new e(r.get_year(t),r.get_month(t)+1,r.get_day_of_month(t))},e}()},OH2X:function(e,t,i){"use strict";t.LineToolFibRetracement=i("t2ex").LineToolFibRetracement,t.LineToolFibChannel=i("xnA2").LineToolFibChannel,t.LineToolFibSpeedResistanceArcs=i("Yjuu").LineToolFibSpeedResistanceArcs,t.LineToolProjection=i("68at").LineToolProjection,t.LineToolTrendBasedFibExtension=i("ZtA1").LineToolTrendBasedFibExtension,t.LineToolElliott=i("xz+e").LineToolElliott,t.LineToolFibCircles=i("4bfY").LineToolFibCircles,t.LineToolVertLine=i("n40Z").LineToolVertLine,t.LineToolCrossLine=i("MA5A").LineToolCrossLine,t.LineToolBarsPattern=i("2bPF").LineToolBarsPattern,t.LineToolTrendBasedFibTime=i("yUly").LineToolTrendBasedFibTime,t.LineToolFibTimeZone=i("FsE7").LineToolFibTimeZone,t.LineToolCircleLines=i("tG6Q").LineToolCircleLines,t.LineToolDateRange=i("WkYF").LineToolDateRange,t.LineToolPriceRange=i("RDDl").LineToolPriceRange,t.LineToolDateAndPriceRange=i("UCMi").LineToolDateAndPriceRange,t.LineToolParallelChannel=i("qcGP").LineToolParallelChannel,t.LineToolTrendAngle=i("nW7S").LineToolTrendAngle,t.LineToolTrendLine=i("WPQD").LineToolTrendLine,t.LineToolInfoLine=i("yi8X").LineToolInfoLine,t.LineToolArrowMark=i("TohL").LineToolArrowMark,t.LineToolPitchfan=i("NhkU").LineToolPitchfan,t.LineToolGannSquare=i("Z0Sh").LineToolGannSquare,t.LineToolFibSpeedResistanceFan=i("zZ5f").LineToolFibSpeedResistanceFan,t.LineToolGannComplex=i("nd9+").LineToolGannComplex,t.LineToolGannFixed=i("TBaH").LineToolGannFixed,t.LineToolGannFan=i("4u8j").LineToolGannFan,t.LineToolFibWedge=i("9QkW").LineToolFibWedge,t.LineToolPitchfork=i("aDyP").LineToolPitchfork,t.LineToolDisjointAngle=i("oIoN").LineToolDisjointChannel,t.LineToolFlatBottom=i("InMJ").LineToolFlatBottom,t.LineToolIcon=i("icPo").LineToolIcon,t.LineToolRotatedRectangle=i("Az04").LineToolRotatedRectangle,t.LineToolFibSpiral=i("i80N").LineToolFibSpiral,t.LineToolHeadAndShoulders=i("aILO").LineToolHeadAndShoulders,t.LineToolTriangle=i("isVH").LineToolTriangle,t.LineToolTrianglePattern=i("lNN+").LineToolTrianglePattern,t.LineTool5PointsPattern=i("NJRZ").LineTool5PointsPattern,t.LineToolThreeDrivers=i("PYn8").LineToolThreeDrivers,t.LineToolABCD=i("pKDv").LineToolABCD,t.LineToolPolyline=i("hP9j").LineToolPolyline,t.LineToolPath=i("YdVo").LineToolPath,t.LineToolPrediction=i("Wh6B").LineToolPrediction,t.LineToolPriceLabel=i("zqZp").LineToolPriceLabel,t.LineToolArrowMarker=i("wiuq").LineToolArrowMarker,t.LineToolNote=i("gLxC").LineToolNote,t.LineToolNoteAbsolute=i("gLxC").LineToolNoteAbsolute,
t.LineToolBrush=i("+hLl").LineToolBrush,t.LineToolArc=i("0Pxc").LineToolArc,t.LineToolCallout=i("odCa").LineToolCallout,t.LineToolBalloon=i("me8f").LineToolBalloon,t.LineToolText=i("V3Oj").LineToolText,t.LineToolHorzLine=i("/DxK").LineToolHorzLine,t.LineToolHorzRay=i("CJIV").LineToolHorzRay,t.LineToolRectangle=i("7qI1").LineToolRectangle,t.LineToolEllipse=i("V086").LineToolEllipse,t.LineToolTimeCycles=i("kIXa").LineToolTimeCycles,t.LineToolSineLine=i("bv/X").LineToolSineLine,t.LineToolGhostFeed=i("XUCF").LineToolGhostFeed,t.LineToolBezierQuadro=i("Xyly").LineToolBezierQuadro,t.LineToolBezierCubic=i("N+BX").LineToolBezierCubic,t.LineToolArrow=i("QQu0").LineToolArrow,t.LineToolRay=i("5ZUI").LineToolRay,t.LineToolExtended=i("CHw2").LineToolExtended,t.LineToolSchiffPitchfork=i("v5F8").LineToolSchiffPitchfork,t.LineToolSchiffPitchfork2=i("XFad").LineToolSchiffPitchfork2,t.LineToolInsidePitchfork=i("EqoR").LineToolInsidePitchfork,t.LineToolTextAbsolute=i("V3Oj").LineToolTextAbsolute,t.LineToolArrowMarkLeft=i("TohL").LineToolArrowMarkLeft,t.LineToolArrowMarkRight=i("TohL").LineToolArrowMarkRight,t.LineToolArrowMarkUp=i("TohL").LineToolArrowMarkUp,t.LineToolArrowMarkDown=i("TohL").LineToolArrowMarkDown,t.LineToolFlagMark=i("aIha").LineToolFlagMark,t.LineToolCypherPattern=i("bTqm").LineToolCypherPattern,t.LineToolElliottImpulse=i("xz+e").LineToolElliottImpulse,t.LineToolElliottTriangle=i("xz+e").LineToolElliottTriangle,t.LineToolElliottTripleCombo=i("xz+e").LineToolElliottTripleCombo,t.LineToolElliottCorrection=i("xz+e").LineToolElliottCorrection,t.LineToolElliottDoubleCombo=i("xz+e").LineToolElliottDoubleCombo,t.LineToolRiskRewardLong=i("tDUI").LineToolRiskRewardLong,t.LineToolRiskRewardShort=i("tDUI").LineToolRiskRewardShort,t.LineToolPosition=i("ziJ5").LineToolPosition,t.LineToolOrder=i("B4/o").LineToolOrder},"OK+B":function(e,t,i){"use strict";var r=i("Eyy1").assert,n=i("eJTA"),o=n.rgba,s=n.rgbaToString,a=n.parseRgb,l=i("+GxX").isFeatureEnabled,c=i("cWHH"),u=i("1Wlv").PriceScale,h=i("8sOK").StudyStub,d=i("CW80"),p=d.createLineTool,f=d.createLineToolProperties,_=d.createStudyLineToolProperties,m=d.isLineToolName,v=d.isStudyLineToolName,g=i("Ss5c").LineDataSource,y=i("OH2X").LineToolBarsPattern,b=i("OH2X").LineToolCallout,S=i("HLXm"),w=i("GVHu"),P=w.Study,C=w.prepareStudyPropertiesForLoadChart,T=i("3ClC").createStudy,x=i("qJq3").Series,I=i("dfhE"),E=i("n5al"),L=i("0YCj"),O=i("Kxc7"),A=i("txPx").getLogger("Chart.Serialization"),M=i("1gmO").AlertLabel,k=i("NP3r").getConfig,D=i("bKsZ").ProductFeatures,R=i("oOPW").createGoProDialog,V=i("OH2X").LineToolParallelChannel,B=i("OH2X").LineToolTrendAngle,N=i("OH2X").LineToolGhostFeed,F=i("OH2X").LineToolElliott,j=i("7ktv").PriceDataSource,W=i("iDOr").Pane,H=i("Tmoa"),U=i("jofe").createDeferredPromise,z=i("ApcL").preferencesByWhiteList,G=(A=i("txPx").getLogger("Chart.Serialization"),i("mPvX").LineToolsGroupModel);c.version=2,c.prototype.state=function(e,t,i){for(var r={panes:[]},n=0;n<this.panes().length;n++)r.panes.push(this.panes()[n].state(!0,e,!1,t,i))
;r.timeScale=this._timeScale.state(e);var o=this.publishedChartsTimelineSource(),s=this.properties();return r.chartProperties={paneProperties:s.paneProperties.state(),scalesProperties:s.scalesProperties.state(),publishedChartsTimelineProperties:o?o.state(e):void 0,chartEventsSourceProperties:s.chartEventsSourceProperties.state(),priceScaleSelectionStrategyName:s.priceScaleSelectionStrategyName.value()},s.chartEventsSourceProperties&&(r.chartProperties.chartEventsSourceProperties=s.chartEventsSourceProperties.state()),r.lineToolsGroups=this.lineToolsGroupModel().state(t),r.version=c.version,r.timezone=this.timezone(),r.sessions=this.sessions().state(e),r.shouldBeSavedEvenIfHidden=this._shouldBeSavedEvenIfHidden,r},c.prototype.asyncState=function(){var e=this.publishedChartsTimelineSource();return e?e.asyncState().then((function(e){var t={};return t.chartProperties={publishedChartsTimelineProperties:e},t})):Promise.resolve({})},c.prototype.chartPropertiesTransparencyMigrate=function(e){var t,i,r;e.chartProperties.paneProperties.crossHairProperties&&(r=e.chartProperties.paneProperties.crossHairProperties,H.isHexColor(r.color)&&(i=r.transparency/100,t=a(r.color),r.color=s(o(t,i)))),e.chartProperties.paneProperties.dataWindowProperties&&(r=e.chartProperties.paneProperties.dataWindowProperties,H.isHexColor(r.color)&&(i=r.transparency/100,t=a(r.color),r.color=s(o(t,i))))},c.prototype.resetDeferredStudies=function(){new q(this).reset()},c.prototype._getExceedingChildStudies=function(e){for(var t=[],i=0;i<e.length;++i)t=t.concat(e[i].sources||[]);var r=0,n=1;n=k(D.STUDY_ON_STUDY).child_limit;for(var o=[],s={},a=0,l=1e6;t.length&&--l;){var c=t[a];(c.ownerSource&&s[c.ownerSource]||!c.ownerSource)&&(s[c.id]=c,t.splice(t.indexOf(c),1),c.ownerSource&&"Study"===c.type&&c.state&&c.state.isChildStudy&&++r>n&&o.push(c)),a=(a+1)%t.length}return o},c.prototype.restoreState=function(e,t,i){new q(this).reset();var r={};if(e.panes)if(Array.isArray(e.panes)){if(!(e.panes.length<1)){if(this._shouldBeSavedEvenIfHidden=void 0===e.shouldBeSavedEvenIfHidden||e.shouldBeSavedEvenIfHidden,e.chartProperties&&!e.chartProperties.timezone&&(e.chartProperties.timezone=e.timezone),e.chartProperties){var n=TradingView.factoryDefaults("chartproperties").scalesProperties;TradingView.merge(n,e.chartProperties.scalesProperties),!("showLastValue"in n)||"showSeriesLastValue"in n||"showStudyLastValue"in n||(n.showSeriesLastValueProperty=n.showLastValue,n.showStudyLastValueProperty=n.showLastValue),"showSeriesLastValue"in n&&(r.showSeriesLastValueProperty=!0),"showStudyLastValue"in n&&(r.showStudyLastValueProperty=!0),e.chartProperties.paneProperties.vertGridProperties=e.chartProperties.paneProperties.vertGridProperties||TradingView.clone(e.chartProperties.paneProperties.gridProperties),e.chartProperties.paneProperties.horzGridProperties=e.chartProperties.paneProperties.horzGridProperties||TradingView.clone(e.chartProperties.paneProperties.gridProperties),
"backgroundType"in e.chartProperties.paneProperties||(e.chartProperties.paneProperties.backgroundType="solid"),this._properties.paneProperties.mergeAndFire(e.chartProperties.paneProperties),this._properties.scalesProperties.mergeAndFire(n),e.chartProperties.timezone&&this._properties.timezone.setValue(e.chartProperties.timezone),e.chartProperties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties.mergeAndFire(e.chartProperties.chartEventsSourceProperties),this._timeScale.restoreState(e.timeScale,t),this._updateDateTimeFormatter()}if(e.timeScale&&this._timeScale.restoreState(e.timeScale,t),!this.readOnly()){var o=this._getExceedingChildStudies(e.panes);if(o.length){for(var s=e.panes.length-1;s>=0;--s){for(var a=(h=e.panes[s]).sources.length-1;a>=0;--a){var l=h.sources[a];~o.indexOf(l)&&h.sources.splice(a,1)}h.sources.length||e.panes.splice(s,1)}setTimeout((function(){R({feature:"studyOnStudy"})}),500)}}var c=e.panes;this.panes()[0].restoreState(c[0],t,e.version,r,i,!0);var u=1;for(s=1;s<e.panes.length;s++){var h,d=e.panes[s];if(0!==d.sources.length)(h=this.panes()[u]||this.createPane()).restoreState(d,t,e.version,r,i,!0),h.mainDataSource()?u+=1:this.removePane(h);else A.logWarn("Empty pane detected - restoring is skipped. idx="+s+", state="+JSON.stringify(d))}if(e.chartProperties&&e.chartProperties.publishedChartsTimelineProperties)(l=this.publishedChartsTimelineSource())&&l.restoreData(e.chartProperties.publishedChartsTimelineProperties,t);this._invalidateBarColorerCaches();var p=this.dataSources(),f=0;for(s=0;s<p.length;s++){var _=p[s];TradingView.isInherited(_.constructor,g)&&(f++,_.calcIsActualSymbol())}this._version=e.version,this.updateTimeScaleBaseIndex(),this.recalculateAllPanes(),this.fullUpdate(),this.syncESD();var m=TVLocalStorage.getItem("linetools_limit")||1e3;return window.is_authenticated&&window.user&&window.user.settings&&(m=window.user.settings.linetools_limit||m),e.sessions&&this.sessions().restoreState(e.sessions,t),e.lineToolsGroups&&(this._lineToolsGroupModel=G.fromState(this,e.lineToolsGroups)),f>m&&f%100==0?{lines_limit_exceeded:!0,line_tools_count:f}:(this._dataSourceCollectionChanged.fire(),{})}A.logDebug("ChartModel.restoreState: invalid state")}else A.logDebug("ChartModel.restoreState: invalid state");else A.logDebug("ChartModel.restoreState: invalid state")},W.prototype.state=function(e,t,i,r,n){var o={},s=new Map;function a(e){if(s.has(e))return s.get(e);var o=null,a=i&&!e.isSavedInStudyTemplates()||e instanceof M||!e.state||!(o=e.state(t,n))||!e.isSavedInChart(t)||r&&e.isActualSymbol&&!e.isActualSymbol()?null:o;return s.set(e,a),a}if(e){o.sources=[];for(var l=0;l<this.m_dataSources.length;l++){var c=a(this.m_dataSources[l]);null!==c&&o.sources.push(c)}}function u(e){return null!==s.get(e)}o.leftAxisesState=this._leftPriceScales.map((function(e){var t={};return t.state=e.state(),t.sources=e.dataSources().filter(u).map((function(e){return e.id()})),t})),o.rightAxisesState=this._rightPriceScales.map((function(e){var t={}
;return t.state=e.state(),t.sources=e.dataSources().filter(u).map((function(e){return e.id()})),t})),o.overlayPriceScales={};for(l=0;l<this.m_dataSources.length;l++){var h=this.m_dataSources[l];this.isOverlay(h)&&h.isSavedInChart(t)&&(o.overlayPriceScales[h.id()]=h.priceScale().state())}return o.stretchFactor=this._stretchFactor,this.m_mainDataSource&&(o.mainSourceId=this.m_mainDataSource.id()),o.priceScaleRatio=this._currentPriceScaleRatio,o},W.prototype.sourceById=function(e){for(var t=0;t<this.m_dataSources.length;t++)if(this.m_dataSources[t].id()===e)return this.m_dataSources[t];return null},W.prototype.isESDStudy=function(e){return"Script$TV_EARNINGS@tv-scripting"===e.id||"Script$TV_DIVIDENDS@tv-scripting"===e.id||"Script$TV_SPLITS@tv-scripting"===e.id||"ESD$TV_EARNINGS@tv-scripting"===e.id||"ESD$TV_DIVIDENDS@tv-scripting"===e.id||"ESD$TV_SPLITS@tv-scripting"===e.id},W.prototype.isStudyToSkip=function(e){return!!this.isESDStudy(e)},W.prototype.restoreState=function(e,t,i,r,n,o){r=r||{},e.stretchFactor&&(this._stretchFactor=e.stretchFactor);var s={};if(e.sources){var a=e.sources.filter((function(e){return!!e&&("MainSeries"===e.type||(!e.points||!e.points.some((function(e){return null===e.time_t||!isFinite(e.time_t)}))||(A.logNormal("Dropped invalid "+e.type+". Reason: non-numeric point time"),!1)))}),this),l=-1!==this.m_dataSources.indexOf(this._model.mainSeries());this.clearSeries(o),this.m_mainDataSource=null,l&&this._addSourceToCollections(this._model.mainSeries(),o);var c=this.getZOrderMinMax(),h=c.minZOrder,d=c.maxZOrder;!function(){var t=a.find((function(t){return t.id===e.mainSourceId}));if(void 0!==t)if(TradingView[t.type]&&TradingView.isInherited(TradingView[t.type],g)){for(var i=null,r=0;r<a.length;r++){var n=a[r];if(!TradingView[t.type]||!TradingView.isInherited(TradingView[n.type],g)){if(null!==i)return void A.logWarn("Pane contains more than 1 possibly main sources - auto fix cannot be applied");i=n}}if(null!==i){var o=e.mainSourceId,s=0;e.mainSourceId=i.id,a.forEach((function(e){e.ownerSource===o&&(e.ownerSource=i.id,s+=1)})),A.logNormal("Auto fix broken pane is applied, changed line tools="+s+", changed from="+o+" to="+i.id)}else A.logWarn("Pane contains only line tools - possible we need to remove this pane?")}else A.logNormal("The type of main source is not line tool - fix is unnecessary");else A.logWarn("There is no main source with id "+e.mainSourceId+", total sources="+a.length)}();for(var p=0;p<a.length;p++){if("study_Sessions"===(_=(f=a[p]).type)){this.model().sessions().restoreOldState(f,t);break}}for(p=0;p<a.length;p++){var f,_;if("study_Sessions"!==(_=(f=a[p]).type)){if(Math.abs(f.zorder)>1e200){var m=h-1;A.logWarn("Datasource zorder has bad value: "+f.zorder+" Resetting it to "+m),f.zorder=m}else if(!this.isZOrderAvailable(f.zorder)){l&&"MainSeries"===_&&this._model.mainSeries().zorder()===f.zorder||(f.zorder=d+1)}var v=f.id;null===this._model.dataSourceForId(f.id)||"MainSeries"===_?(s[v]=f.ownerSource,
_&&("MainSeries"===_?this._restoreMainSeries(f,t,l,r,n,o):_.toLowerCase().startsWith("study")?this.restoreStudy(f,t,r,o):TradingView.isInherited(TradingView[_],g)?this.restoreLineTool(f,t,void 0,o):TradingView[_]&&TradingView[_].createFromState&&this._restoreSpecialSource(f,t,o)),h=Math.min(h,f.zorder),d=Math.max(d,f.zorder)):A.logError("Duplicate id while restoring pane: "+f.type+","+f.id)}}}var y,b,S=new Set,w=this;function C(e){var t=defaults("chartproperties").paneProperties.axisProperties,i=new u(w.model().properties().scalesProperties,t);return i.restoreState(e.state),e.sources.forEach((function(e){var r=w.dataSourceForId(e);r&&function(e,t,i){S.add(e),void 0!==i.m_showSymbolLabels&&e instanceof x&&w.model().properties().scalesProperties.showSymbolLabels.setValue(i.m_showSymbolLabels),e.setPriceScale(t),t.addDataSource(e)}(r,i,t)})),0===i.dataSources().length?null:i}if(e.leftAxisesState)y=e.leftAxisesState.map(C).filter((function(e){return null!==e}));else{var T=C({state:e.leftAxisState,sources:e.leftAxisSources});y=null!==T?[T]:[]}if(this._leftPriceScales.slice().forEach(function(e){this.removePriceScale(e)}.bind(this)),this._leftPriceScales=[],y.forEach((function(e){w._placePriceScale(e,"left")})),e.rightAxisesState)b=e.rightAxisesState.map(C).filter((function(e){return null!==e}));else{var I=C({state:e.rightAxisState,sources:e.rightAxisSources});b=null!==I?[I]:[]}this._rightPriceScales.forEach(function(e){this.removePriceScale(e)}.bind(this)),this._rightPriceScales=[],b.forEach((function(e){w._placePriceScale(e,"right")})),this._currentPriceScaleRatio=e.priceScaleRatio||e.leftPriceScaleRatio||e.rightPriceScaleRatio||null;for(p=0;p<this.m_dataSources.length;p++){var E=this.m_dataSources[p];if(!S.has(E)){var L=new u(this._model.properties().scalesProperties);if(L.setHeight(this.m_height),L.addDataSource(E),e.overlayPriceScales&&e.overlayPriceScales[E.id()]){var O=e.overlayPriceScales[E.id()];O.m_isAutoScale=!0,O.m_isLog=!1,O.m_isPercentage=!1,O.m_isLockScale=!1,L.restoreState(O)}E.setPriceScale(L)}}for(var v in s){var M=s[v];if(M)(E=this.dataSourceForId(v))&&this.dataSourceForId(v).setOwnerSource(this.dataSourceForId(M))}if(e.mainSourceId&&!this.containsMainSeries()&&(this.m_mainDataSource=this.dataSourceForId(e.mainSourceId)),!this.m_mainDataSource)for(p=0;p<this.m_dataSources.length;p++){E=this.m_dataSources[p];if(TradingView.isInherited(E.constructor,j)){this.m_mainDataSource=E;break}}for(p=0;p<this.m_dataSources.length;p++){E=this.m_dataSources[p];if(TradingView.isInherited(E.constructor,g))E.ownerSource()||E.setOwnerSource(this.mainDataSource()),E.isFixed()&&E.restoreFixedPoints(),E.fixAfterRestorePriceAxis&&E.fixAfterRestorePriceAxis();else if(TradingView.isInherited(E.constructor,P)){var k=E.properties();k.linkedToSeries&&k.linkedToSeries.value()&&(E.ownerSource()||E.setOwnerSource(this.model().mainSeries()))}}this._updateMargins(),this._cachedOrderedSources.clear()},W.prototype._restoreMainSeries=function(e,t,i,r,n,o){var s=e.id,a=e.state,c=e.zorder;if(a&&n&&(a.style=n.style||a.style,
a.interval=n.interval||a.interval,a.symbol=n.symbol||a.symbol),a&&a.style===I.STYLE_HILO&&!l("chart_style_hilo")&&(a.style=I.STYLE_CANDLES),a&&["candleStyle","hollowCandleStyle","haStyle"].forEach((function(e){a[e]&&(a[e].wickUpColor=a[e].wickUpColor||a[e].wickColor,a[e].wickDownColor=a[e].wickDownColor||a[e].wickColor)})),a&&(a.statusViewStyle=a.statusViewStyle||{},!a.statusViewStyle.symbolTextSource)){var u=!!a.statusViewStyle.showSymbolAsDescription;a.statusViewStyle.symbolTextSource=u?"ticker":"description"}if(!i){var h=this._model.mainSeries();this._model.paneForSource(h).removeDataSource(h,!1,o),this._addSourceToCollections(h,o)}if(this.m_mainDataSource=this._model.mainSeries(),(v=a&&a.style?a.style:void 0)===x.STYLE_PNF&&"ATR"===this._model.mainSeries().properties().pnfStyle.inputs.style.value()?this._model.mainSeries().properties().pnfStyle.inputs.style._value="Traditional":v===x.STYLE_RENKO&&"ATR"===this._model.mainSeries().properties().renkoStyle.inputs.style.value()&&(this._model.mainSeries().properties().renkoStyle.inputs.style._value="Traditional"),a&&!a.hasOwnProperty("showSessions")&&(a.showSessions=!1),a&&!a.extendedHours&&(a.extendedHours=!1),a&&t&&(a.showCountdown=!1),a&&(t&&!("showSeriesLastValueProperty"in r)&&"showLastValue"in a&&this._model.properties().scalesProperties.showSeriesLastValue.setValue(a.showLastValue),delete a.showLastValue),a)for(var d={haStyle:E.chartStyleStudyId(x.STYLE_HEIKEN_ASHI,!0),renkoStyle:E.chartStyleStudyId(x.STYLE_RENKO,!0),pbStyle:E.chartStyleStudyId(x.STYLE_PB,!0),kagiStyle:E.chartStyleStudyId(x.STYLE_KAGI,!0),pnfStyle:E.chartStyleStudyId(x.STYLE_PNF,!0),rangeStyle:E.chartStyleStudyId(x.STYLE_RANGE,!0)},p=this._model.studyVersioning(),f=this._model.mainSeries().styleStudyInfos(),_=Object.keys(I.SYMBOL_STRING_DATA),m=0;m<_.length;m++){var v=_[m],g=I.STYLE_SHORT_NAMES[v]+"Style",y=g in e?e[g].studyId:d[g];if(null!=(v=a[g])){var b=v.inputs,S=L.parseIdString(y),w=f[g].studyId,P=L.parseIdString(w),C=p.updateStudyInputs(S.id,S.version,P.version,b,null);v.inputs=C}}this._model.mainSeries().restoreState(e,t),this._sourcesById.delete(this._model.mainSeries().id()),this._model.mainSeries().setId(s),this._sourcesById.set(s,this._model.mainSeries()),void 0!==c&&this._model.mainSeries().setZorder(c),this._model.mainSeries().properties().extendedHours.listeners().fire(this._model.mainSeries().properties().extendedHours),this._model.mainSeries().symbolInfo()&&this._model.mainSeries().dataEvents().fireSymbolResolved(this._model.mainSeries().symbolInfo())},W.prototype.restoreStudy=function(e,t,i,r){if(t&&void 0===e.data&&void 0===e.nonSeriesData&&void 0===e.indexes)A.logError("Cannot restore (skipping) study without data "+e.id+", "+e.metaInfo.id);else{var n=e.id,o=e.state,s=e.zorder,a=e.ownerSource,l=TradingView.clone(e.metaInfo);if(Object.assign(l,L.parseIdString(l.id)),!this.isStudyToSkip(l)||t){var c=o,u=this._model.studyVersioning(),d=u.patchPropsStateAndMetaInfo(c,l,{oldShowStudyLastValueProperty:t&&!i.showStudyLastValueProperty});c=d.propsState,l=d.metaInfo
;var p=new h(this._model,e,l.shortDescription);p.setId(n);var f=this;if(t)m(null);else{var _=u.updateMetaInfoAsync(l);_.sync?m(_.result):_.result.then((function(e){m(e)})).catch((function(e){p.setStatus("error: "+e),p.setFailed(!0)}))}return p&&(this._addSourceToCollections(p,r),this._processMainSourceChange()),this._cachedOrderedSources.clear(),p&&void 0!==s&&p.setZorder(s),p}A.logNormal("Skipping study "+l.id)}function m(i){p.setStatus("");var r=i||new L(l),o=new q(f._model);function s(s){var a=C(l,i,c,null,u,s),h=T(f._model,a,s||f._model.mainSeries(),r);if(h.setId(n),t){var d=u.patchStudyData(l,e.data,e.nonSeriesData,e.indexes);h.restoreData(d.data,d.nsData,d.indexes)}f._model.replaceStudyStub(p,h)||(p=h),o.add(n,h)}a&&e.state.isChildStudy?o.get(a).then(s):s()}},W.prototype.restoreLineTool=function(e,t,i,n){i=void 0===i||i,F.migrateState(e),S.migrateState(e);var o=e.type,s=e.id,a=e.state,l=i?e.zorder:this._newZOrderForLineTool();r(m(o),"invalid data source type:"+o+" (expected to be a Line Tool)");var c,u,d=null;if(v(o)){var g=(e=(d=this._model.studyVersioning()).patchPointsBasedStudyState(e)).metaInfo;if(Object.assign(g,L.parseIdString(g.fullId)),!t){var w=g.productId;if(!pro.hasPackage(w)){var P=new h(this._model,e,g.shortDescription);return P.setId(s),this._addSourceToCollections(P,n),void 0!==l&&P.setZorder(l),P.setStatus(window.t("not authorized")),void P.setFailed(!0)}}var C=d.updateMetaInfo(g)||g;u=_(o,g,C,a,d),t?u.merge({fixedSize:!1}):u.merge({fixedSize:!0}),c=p(o,this._model,u,C)}else u=f(o,a),t?u.merge({fixedSize:!1}):u.merge({fixedSize:!0}),c=new TradingView[o](this._model,u,!0);c.setId(s),c.linkKey=e.linkKey;var T=e.alertId;T&&c.canHasAlert()&&"function"==typeof c.setAlert&&O.enabled("alerts")&&!this._model.readOnly()&&!this._model.isJustClonedChart()&&c.setAlert(T,{noChartSave:!0});var x=e.indexes?e.indexes:[];if(x=x.slice(0,e.points.length),c.isFixed()?c.restorePositionPercents(e.positionPercents):c.restorePoints(e.points,x,t),c instanceof y||c instanceof b||c instanceof B||c instanceof N||c instanceof V)c.restoreData(e);else if(t&&c.restoreData){var I=e;d&&(I.graphics=d.patchPointsBasedStudyData(I.metaInfo,I.graphics)),c.restoreData(I)}var E=null==e.version?1:e.version,A=null==c.version?1:c.version;return E!==A&&"function"==typeof c.migrateVersion&&c.migrateVersion(E,A,{pane:this,model:this._model,properties:u}),this._addSourceToCollections(c,n),this._cachedOrderedSources.clear(),void 0!==l&&c.setZorder(l),c},W.prototype._restoreSpecialSource=function(e,t,i){var r=TradingView[e.type];if(r&&r.createFromState){var n=r.createFromState(e,t,this._model);n&&(n.setId(e.id),this._addSourceToCollections(n,i),n.zorder&&n.setZorder(n.zorder))}},c.prototype.studyTemplate=function(e,t){for(var i={panes:[]},r=0;r<this.panes().length;r++){i.panes.push(this.panes()[r].state(!0,!1,!0))}return e&&(i.symbol=this.mainSeries().symbol()),t&&(i.interval=this.mainSeries().interval()),i.version=c.version,i},c.prototype.theme=function(){var e={};return e.chartProperties={
paneProperties:this.properties().paneProperties.state(),scalesProperties:this.properties().scalesProperties.state()},e.mainSourceProperties=this.mainSeries().state().state,delete e.mainSourceProperties.symbol,delete e.mainSourceProperties.interval,delete e.chartProperties.paneProperties.topMargin,delete e.chartProperties.paneProperties.bottomMargin,e.version=c.version,e},c.prototype.restoreTheme=function(e,t,i){var r={hollowCandle:{related:"candle"}};for(var n in r)if(!e.mainSourceProperties[n+"Style"]){var o=e.mainSourceProperties[r[n].related+"Style"];e.mainSourceProperties[n+"Style"]=TradingView.clone(o)}this._undoModel.chartLoadTheme(this,e,t,i)},c.prototype.preferences=function(){return z(this,this.mainSeries())};var q=function(){var e=[],t=[];function i(r){var n=e.indexOf(r);return~n?t[n]:this instanceof i?(this._source=r,this._studies={},this._deferreds={},e.push(r),void t.push(this)):new i(r)}return i.prototype.add=function(e,t){this._deferreds[e]&&(this._deferreds[e].resolve(t),delete this._deferreds[e]),this._studies[e]=t},i.prototype.get=function(e){return this._studies[e]?Promise.resolve(this._studies[e]):(this._deferreds[e]||(this._deferreds[e]=U()),this._deferreds[e].promise)},i.prototype.reset=function(){var i=e.indexOf(this._source);~i&&(e.splice(i,1),t.splice(i,1))},i}();e.exports=c},OKab:function(e,t,i){"use strict";i.r(t),i.d(t,"FormattersSerializer",(function(){return r}));var r,n=i("kcTO"),o=i("nEwK"),s=i("GH0z"),a=i("NA7W"),l=i("Eyy1"),c={price:n.PriceFormatter,volume:o.VolumeFormatter,percentage:s.PercentageFormatter,quoteSessionPrice:a.a};!function(e){e.serialize=function(e){var t=Object(l.ensureDefined)(c[e.type]);return{type:e.type,state:t.serialize(e)}},e.deserialize=function(e){return Object(l.ensureDefined)(c[e.type]).deserialize(e.state)}}(r||(r={}))},ONPi:function(e){
e.exports=JSON.parse('{"abrilcombr":"widget_user_token-abrilcombr","agencialbmcombr":"widget_user_token-agencialbmcombr","bbvach":"widget_user_token-bbvach","belugagroupru":"widget_user_token-belugagroupru","bovespa":"widget_user_token-bmfbovespacombr","elespanolcom":"widget_user_token-elespanolcom","euqueroinvestir":"widget_user_token-euqueroinvestircom","europapresses":"widget_user_token-europapresses","healthitalia":"widget_user_token-healthitalia","hegnarno":"widget_user_token-hegnarno","hipotecariocomar":"widget_user_token-hipotecariocomar","investopedia":"widget_user_token-investopedia","ivsgroup":"widget_user_token-ivsgroup","lainformacioncom":"widget_user_token-lainformacioncom","marcopolocombr":"widget_user_token-marcopolocombr","mercadofinancierocom":"widget_user_token-mercadofinancierocom","moneytimescombr":"widget_user_token-moneytimescombr","qecomqa":"widget_user_token-qecomqa","recrusulcombr":"widget_user_token-recrusulcombr","seekingalpha":"widget_user_token-seekingalpha","seudinheiro":"widget_user_token-seudinheiro","sgcompanyit":"widget_user_token-sgcompanyit","sharejunction":"widget_user_token-sharejunction","smartlab-custom":"widget_user_token-smartlab","smartlab":"widget_user_token-smartlab","spacemoneycombr":"widget_user_token-spacemoneycombr","thetradersnet":"widget_user_token-thetradersnet","toroinvestimentoscombr":"widget_user_token-toroinvestimentoscombr","xpicombr":"widget_user_token-xpicombr"}')},OYox:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererCircles",(function(){return a}));var r=i("aO4+"),n=i("ogJP"),o=i("Zp/P"),s=i("VdBB"),a=function(){function e(e){this._data=e}return e.prototype.draw=function(e,t){for(var i=this._data,r=t.pixelRatio,o=Math.max(1,Math.floor(r))%2?.5:0,s=i.vertOffset||0,a=i.lineColor||i.color,l=i.lineWidth||i.height/2,c="",u=!1,h=0,d=i.items;h<d.length;h++){var p=d[h],f=p.x,_=p.y+s;if(!Object(n.isNaN)(f)&&!Object(n.isNaN)(_)){var m=void 0,v=void 0;null!=p.style?(m=p.style.color,v=p.style.width):(m=a,v=l),m!==c&&(c=m,u&&e.fill(),e.beginPath(),e.fillStyle=m);var g=Math.round(f*r)+o,y=Math.round(_*r)+o,b=Math.round(v*r)+o;e.moveTo(g+b,y),e.arc(g,y,b,0,2*Math.PI,!1),u=!0}}u&&e.fill()},e.prototype.hitTest=function(e){for(var t=this._data,i=t.lineWidth||t.height/2,n=2*i,a=t.vertOffset||0,l=Object(o.selectionTolerance)(n),c=0,u=t.items;c<u.length;c++){var h=u[c];if(h)if(new r.Point(h.x,h.y+a).subtract(e).length()+i<=l)return new s.HitTestResult(s.HitTestResult.REGULAR)}return null},e}()},Ob86:function(e,t,i){"use strict";(function(e){i("fPdn"),i("i8AX"),e.enabled("use_localstorage_for_settings")&&TVSettings.sync();var t=i("wZIs"),r=i("/Y2c");i("OK+B")
;var n,o=i("RXmj").ChartSaver,s=i("4QoS").takeChartSnapshot,a=i("HwbS"),l=i("RZo+"),c=i("PT1i").linking,u=i("8woN"),h=i("IWXC").getQuoteSessionInstance,d=i("k83o"),p=i("dfhE"),f=i("n5al"),_=f.isRangeStyle,m=f.getDefaultStyle,v=i("LxhU").Interval,g=i("pPtI").getDefaultResolution,y=i("z3gQ"),b=i("Tmoa"),S=i("kNhM").EmbedFooterWidget,w=i("JT5O").StudyMarket,P=i("OiSa").isDrawingToolbarVisible,C=i("EsvI"),T=i("oiZD").setTheme,x=i("ZekX").availableTimeFrames,I=i("DcGp").dispatchEventToParent,E=i("DcGp").listenEventFromParent,L=i("Bdgc").IFrameEvents,O=i("Bdgc").ParentEvents,A=i("pOdx").resolveByCustomer,M=i("qE4g").addBrandingSource,k=i("x5Tw").setupChartEventHint,D=i("qocr").whenDocumentReadyPromise,R=i("dB5d").initGA,V=i("IHm8").registerSingleSymbolListBackend,B=i("7G8O").registerSettingsSymbolListBackend,N=window.initData,F=window.urlParams,j=N.defSymbol,W=N.def_extended_hours,H=N.hide_ideas,U=N.hide_ideas_button,z=N.def_interval,G=N.def_style,q=N.def_timezone,Y=N.customer,X=F.range||N.def_range,K=F.enablepublishing||N.def_enable_publishing,J=F.withdateranges||N.def_withdateranges,Q=N.def_save_image,Z=!(F.hideIdeas||F.hideideasbutton||H||U);void 0!==F.saveimage&&(Q="0"!==F.saveimage),e.setEnabled("header_screenshot",Q?1:0),F.fundamental&&(e.setEnabled("create_volume_indicator_by_default",0),e.setEnabled("header_chart_type",0),e.setEnabled("header_compare",0),e.setEnabled("display_market_status",0),e.setEnabled("delete_button_in_legend",0),e.setEnabled("study_buttons_in_legend",0),e.setEnabled("format_button_in_legend",0),e.setEnabled("show_hide_button_in_legend",0),e.setEnabled("fundamental_widget",1),e.setEnabled("legend_context_menu",0),U=!0,H=!0,J=!0,z="D","seekingalpha"===Y&&(J=!1,e.setEnabled("header_resolutions",0),e.setEnabled("header_fullscreen_button",0))),"bovespa"===Y&&(e.disable("header_settings"),n=[{symbol:"IBOV",title:"Bovespa Index"},{symbol:"IBXX",title:"Brazil 100 Index"},{symbol:"IBXL",title:"Brazil 50 Index"},{symbol:"IBRA",title:"Brazil Broad-Based Index"},{symbol:"IGCX",title:"Special Corporate Governance Stock Index"},{symbol:"ITAG",title:"Special Tag-Along Stock Index"},{symbol:"IGNM",title:"Novo Mercado Corporate Governance Equity Index"}]),(void 0===F.symboledit?N.def_hide_symbol_edit:!parseInt(F.symboledit))&&e.setEnabled("header_symbol_search",0),window.pro=new a(window.shopConf);j=F.symbol||j;"cme"===F.symbology&&(j=function(e){var t=new u.SymbolToken(e);if(!t.root())return e;var i=l.convertSymbolDataToTV(t.root(),t.exchange(),F.venue);return"ok"!==i.status?e:(i.data.symbol&&t.root(i.data.symbol),i.data.exchange&&t.exchange(i.data.exchange),t.toString())}(j));var ee=W;"1"===F.extended_hours&&(ee=!0),"0"===F.extended_hours&&(ee=!1);var te=d(parent),ie=i("lW/c").Root,re=new(0,i("NsVT").ChartPage)(new ie(window).allocate());if(X){var ne=x(null,p.STATUS_READY).find((function(e){return e.value.value===X}));ne&&(F.range=X,F.interval=ne.targetResolution)}var oe,se,ae=H;function le(e,t){return void 0===e?t:"1"===e}oe=void 0===F.interval?void 0===F.style?z:g(_(parseInt(F.style))):F.interval,
se=void 0===F.style?void 0===F.interval?parseInt(G):m(v.isRange(F.interval)):parseInt(F.style);var ce,ue=window.chartWidgetCollection=new r({resizerBridge:re.allocate({areaName:"center"}),topOffset:F.hidetoptoolbar?0:1,padding:5,edge:F.padding||0,widgetOptions:{onWidget:!0,addToWatchlistEnabled:!0,propertyPagesEnabled:!1,chartEventsEnabled:!0,esdEnabled:!F.fundamental,sourceStatusesWidget:{errorSolution:!1},marketStatusWidgetEnabled:!F.fundamental,marketStatusWidget:{preMarketSolution:!1,postMarketSolution:!1},chartWarningWidget:{subscriptionFullInfo:!1},widgetCustomer:Y,hideIdeas:ae,controlBarEnabled:!0,addVolume:!F.hidevolume,handleSessionErrors:!0,muteSessionErrors:!e.enabled("referral_program_for_widget_owners"),defSymbol:j,defInterval:oe,defStyle:se,defExtendedHours:ee,timezone:F.timezone||q,defTimeframe:X,isDrawingToolbarVisible:P,watermarkEnabled:!F.fundamental,crossHairMenuEnabled:!1,paneContextMenuEnabled:!1,compareSymbols:n,timeScaleWidget:{contextMenuEnabled:!1,timezoneMenuEnabled:!1},timeScale:{preserveBarSpacing:!0,lockVisibleTimeRangeOnResize:!1},legendWidgetEnabled:!F.hidelegend,legendWidget:{contextMenuEnabled:!F.fundamental,contextMenu:{settings:!1,fundamentals:!1,showOpenMarketStatus:!F.fundamental},alertWidgetEnabled:!1},goToDateEnabled:!1,handleScroll:{vertTouchDrag:le(F.verttouchdrag,!1),horzTouchDrag:le(F.horztouchdrag,!0)},handleScale:{mouseWheel:le(F.mousewheelscale,"investopedia"!==Y)}},seriesControlBarEnabled:!!J,seriesControlBar:{timeFramesWidgetEnabled:!0,timeFramesWidget:{goToDateEnabled:!1,availableTimeFrames:x},timeWidgetEnabled:!F.fundamental,timeWidget:{timezoneMenuEnabled:!1},adjustForDividendsButtonEnabled:!1,extendedHoursButtonEnabled:W,percentageScaleButtonEnabled:!0,logScaleButtonEnabled:!F.fundamental,autoScaleButtonEnabled:!F.fundamental,fullscreenButtonEnabled:!0,mobileChangeLayoutEnabled:!1},mobileForceChartMaximizeEnabled:!1});if(M(ue),window.chartWidget=ue.activeChartWidget.value(),ue.readOnly()||(window.studyMarket=new w(ue,{onWidget:!0})),c.bindToChartWidgetCollection(ue),I(L.Names.WidgetLoad,F.frameElementId||null,void 0),F.theme){var he=F.theme.toLowerCase(),de=C.themes[he];if(de&&(T(he),!de.noChartTheme)){var pe=F.theme&&F.theme.toLowerCase(),fe=C.getStdTheme(pe);fe&&fe.content&&(ce=fe.content,F.style&&(ce.mainSourceProperties.style=parseInt(F.style)),F.fundamental&&(ce.mainSourceProperties.visible=!1),t.applyDefaultsOverrides(ce,{mainSeriesProperties:"mainSourceProperties"},!0))}}chartWidget.withModel(null,(function(){var e=chartWidget.model().mainSeries();ce&&chartWidget.model().model().restoreTheme(ce),e.dataEvents().symbolResolved().subscribe(e,(function(){!function(e,t){if(!t)return;var i=e.model().model();try{JSON.parse(decodeURIComponent(t)).forEach((function(e){var t=i.createStudyInserter({type:"java",studyId:e.id});t.setForceOverlay(e.overlay),t.insert((function(){return Promise.resolve(e.inputs)}))}))}catch(r){(t.split(/\x1f/)||[]).forEach((function(e){i.createStudyInserter({type:"java",studyId:e}).insert()}))}}(chartWidget,F.studies)}),!0),
e.dataEvents().completed().subscribe(this,(function(){ce&&$(".loading-indicator").hide(),k&&(k(ue,!0),k=null)})),e.dataEvents().symbolError().subscribe(null,(function(){I(L.Names.NoData,F.frameElementId||null,void 0)}))})),K&&(new S({resizerBridge:re.allocate({areaName:"bottom"}),publishOptions:{onWidget:!0,publishSource:F.publishsource}}),$.get("/accounts/status_full/",{},(function(e){e.is_authenticated&&(window.is_authenticated=!0,window.user=e.user_data)})));var _e=window.saver=new o(ue);if(TradingView.setWidgetLogoOverlayVisibility=function(e){te.post(parent,"setLogoOverlayVisibility",{visible:!!e})},void 0===F.hidesidetoolbar||+F.hidesidetoolbar?$(".tv-side-toolbar").addClass("js-hidden"):Promise.all([i.e("vendors_embed"),i.e(1),i.e(6),i.e(8),i.e(15),i.e(20),i.e(23),i.e(27),i.e(53),i.e(92),i.e(121),i.e(122),i.e(130),i.e(155),i.e(224),i.e(225),i.e(250),i.e(0),i.e(7),i.e(16),i.e(44),i.e(48),i.e(105),i.e(107),i.e(99),i.e(143),i.e("line-tools-icons"),i.e(197),i.e("widget-sidetoolbar")]).then(function(e){var t=i("q1tI"),r=i("i8i4"),n=i("mgFB").DrawingToolbar,o=i("tPkB"),s=re.allocate({areaName:"left"});r.render(t.createElement(n,{chartWidgetCollection:ue,forceVisible:!(void 0===F.hidesidetoolbar||+F.hidesidetoolbar),resizerBridge:s,screenshotButton:"cme"===Y}),s.container.value()),window.lineToolPropertiesToolbar=new o(ue)}.bind(null,i)).catch(i.oe),!F.hidetoptoolbar){var me=A(Y);Promise.all([i.e("vendors_embed"),i.e(15),i.e(51),i.e(128),i.e(225),i.e(264),i.e(0),i.e(16),i.e(113),i.e("widget-toptoolbar")]).then(function(t){var r=i("q1tI"),n=i("i8i4"),o=i("EA1V").HeaderToolbar,s=i("/5ju").SaveChartService,a=i("lA7n").LoadChartService,l=re.allocate({areaName:"top"});me.then((function(e){return e.getToolSet()})).then((function(t){var i;i=Modernizr.mobiletouch?["full"]:e.enabled("caption_buttons_text_if_possible")?void 0:["medium"],n.render(r.createElement(o,{tools:t,chartSaver:_e,chartApiInstance:ChartApiInstance,availableTimeFrames:x,chartWidgetCollection:ue,defaultIntervals:ChartApiInstance.defaultResolutions(),ideas:Z,hideProperties:!0,hideStudyTemplates:!0,resizerBridge:l,popupButton:F.showpopupbutton,studyMarket:window.studyMarket,windowMessageService:te,isFundamental:Boolean(F.fundamental),allowedModes:i,saveChartService:new s(ue,_e),loadChartService:new a(ue)}),l.container.value())}))}.bind(null,i)).catch(i.oe)}if(F.toolbarbg){var ve=b.isHexColor(F.toolbarbg)?"#"+F.toolbarbg:F.toolbarbg;$("#widget-container").css("background-color",ve)}var ge,ye=[],be=[];if(F.watchlist&&(be=F.watchlist.split(/\x1f/).map((function(e){return e.trim()})).filter(Boolean)),be.length||F.editablewatchlist){var Se={type:"watchlist",properties:{list:be}};F.editablewatchlist?(Se.readonly=!1,Se.data={hideTitleButton:!0},Se.settingsKey="onwidget.watchlist",Se.unAuthEditable=!0,B(be)):V(be),ye.push(Se)}"details"in F&&ye.push({type:"detail"}),"widgetbarwidth"in F&&(ge=+F.widgetbarwidth),(!isFinite(ge)||ge<200)&&(ge=200);var we,Pe,Ce=ye.length?[{name:"base",title:window.t("Widgets"),icon:"base",widgets:ye.map((function(e){return e}))}]:[]
;F.hotlist&&Ce.push({name:"hotlist",title:window.t("Hotlists"),icon:"hotlists",widgets:[{type:"hotlist",properties:{exchangeByLocale:{default:window.COUNTRY_CODE_TO_DEFAULT_EXCHANGE.en},groupByLocale:{default:"volume_gainers"}}},{type:"hotlist",properties:{exchangeByLocale:{default:window.COUNTRY_CODE_TO_DEFAULT_EXCHANGE.en},groupByLocale:{default:"percent_change_gainers"}}},{type:"hotlist",properties:{exchangeByLocale:{default:window.COUNTRY_CODE_TO_DEFAULT_EXCHANGE.en},groupByLocale:{default:"percent_change_loosers"}}}]}),F.calendar&&Ce.push({name:"calendar",title:window.t("Calendar"),icon:"calendar",widgets:[{type:"reuters_calendar",properties:{}},{type:"earnings_calendar",properties:{}}]}),Ce.length&&Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(3),i.e(5),i.e(11),i.e(14),i.e(26),i.e(51),i.e(60),i.e(76),i.e(91),i.e(92),i.e(94),i.e(119),i.e(121),i.e(156),i.e(118),i.e(160),i.e(163),i.e(189),i.e(193),i.e(221),i.e(224),i.e(240),i.e(0),i.e(10),i.e(13),i.e(16),i.e(24),i.e(38),i.e(36),i.e(47),i.e(57),i.e(64),i.e(83),i.e(82),i.e(107),i.e(108),i.e(133),i.e(168),i.e(171),i.e("widgetbar")]).then(function(e){i("Q8Ag").loadWidgetBarModules=function(e){var t=i("zpSA").widgetBarWidgets;t.Watchlist=i("MVPm").configure({chartApiInstance:ChartApiInstance}),e(t)};var t=i("BH4H").WidgetBar;Ce.forEach((function(e){e.widgets=e.widgets.filter((function(e){return!(void 0!==e.isEnabled&&!e.isEnabled)}))})),window.widgetbar=new t({resizerBridge:re.allocate({areaName:"right"}),readonly:!0,state:{width:ge,pages:Ce},overlayThreshold:640,showCloseButton:!0})}.bind(null,i)).catch(i.oe),chartWidget.onDisconnected().subscribe(null,(function(e){$(".loading-indicator").hide(),e&&y.showCriticalErrorMessage((function(){ChartApiInstance.disconnect(),setTimeout((function(){ChartApiInstance.connect(),chartWidget.reconnect()}),500)}))})),chartWidget.onReconnectBailout().subscribe(null,(function(){y.showDisconnectedMessage((function(){setTimeout((function(){ChartApiInstance.connect()}),0)}))})),$(".tv-content").bind("contextmenu",(function(e){var t=$(e.originalEvent.target);if(!t.is("input")&&!t.is("textarea"))return!1})),F.whotrades&&e.setEnabled("whotrades_auth_only",!0),$(window).resize(),$(".loading-indicator").remove(),Pe=function(e){void 0!==we&&h("simple").unsubscribe("widgetQuoteListener",we),we=e,h("simple").subscribe("widgetQuoteListener",e,(function(e){for(var t=e.values,i=["change","change_percent","last_price","original_name","short_name","exchange","description","volume"],r={},n=0;n<i.length;n++){var o=i[n];if(!t.hasOwnProperty(o))return;r[o]=t[o]}r.volume=1e100===t.volume?void 0:t.volume,te.post(parent,"quoteUpdate",r)}))},chartWidget.withModel(null,(function(){var e=chartWidget.model().mainSeries();e.properties().symbol.subscribe(e,(function(e){Pe(e.value())}))})),te.on("quoteSubscribe",(function(){var e=chartWidget.model().mainSeries().properties().symbol.value();Pe(e)})),te.on("imageURL",(function(e,t){s(ue,(function(e){t(e)}),(function(){t("")}),{wl:"1"===F.whitelabel},N.cme_widget?{cme:!0}:void 0)})),
te.on("symbolInfo",(function(e,t){var i=chartWidget.model().mainSeries().symbolInfo(),r=chartWidget.model().mainSeries().properties().interval.value();t({name:i.name,exchange:i.exchange,description:i.description,type:i.type,interval:r})})),te.on("widgetReady",(function(e,t){chartWidget.withModel(null,(function(){var e;chartWidget.model().mainSeries().symbolInfo()?t():(e=function(){t(),chartWidget.model().mainSeries().dataEvents().symbolResolved().unsubscribe(null,e)},chartWidget.model().mainSeries().dataEvents().symbolResolved().subscribe(null,e))}))})),E(O.Names.SetSymbol,(function(e){e&&e.symbol&&ue.setSymbol(e.symbol)})),E(O.Names.SetInterval,(function(e){e&&e.interval&&ue.setResolution(e.interval)})),window.applyStudiesOverrides=function(e){e&&window.chartWidgetCollection.applyStudiesOverrides(e)},Promise.all([new Promise((function(e){chartWidget.withModel(null,(function(){chartWidget.model().mainSeries().dataEvents().completed().subscribe(null,e,{once:!0})}))})),D]).then(R)}).call(this,i("Kxc7"))},Ocx9:function(e,t,i){"use strict";(function(e){var r=i("wZIs"),n=i("tc+8");function o(e,t,i,n){var o=e?r.defaults:r.factoryDefaults,a=t.startsWith("study_")?TradingView.clone(o("study")):{},l=TradingView.clone(o(t,n));return t.startsWith("study_")&&l.inputs&&delete l.inputs.symbol,"linetoolicon"===t&&e&&(l.icon=r.defaults(t).icon),l=s(l,i),TradingView.merge(a,l),a}function s(e,t){var i={};for(var r in e)t.indexOf(r)<0&&(i[r]=e[r]);return i}function a(t,i,r,s){var l;void 0===s&&(s=!0),this._defaultName=t,r?l=i:(l=o(s,t,[],null),i&&TradingView.merge(l,i)),n.call(this,l),this._defaultName=t,this._useUserPreferences=s,this.listeners().subscribe(this,a.prototype.onPropertyChanged),this._exclusions=[],this._restoreFactoryDefaultsEvent=new e}inherit(a,n),a._saveDefaults=!1,a.prototype.preferences=function(){return this.state(this._exclusions)},a.prototype.mergePreferences=function(e){this.mergeAndFire(s(e,this._exclusions))},a.prototype.addExclusion=function(e){this._exclusions.indexOf(e)<0&&this._exclusions.push(e)},a.prototype.restoreFactoryDefaults=function(){var e=o(!1,this._defaultName,this._exclusions,null);this.mergeAndFire(e),this._defaultName.startsWith("study_")||this.saveDefaults(),this._restoreFactoryDefaultsEvent.fire()},a.prototype.onRestoreFactoryDefaults=function(){return this._restoreFactoryDefaultsEvent},a.prototype.onPropertyChanged=function(){a._saveDefaults&&!this._defaultName.startsWith("study_")&&this.saveDefaults()},a.prototype.saveDefaults=function(){this._useUserPreferences&&r.saveDefaults(this._defaultName,this.preferences())},a.prototype.clone=function(e){for(var t=new a(this._defaultName,this.state(),e&&e.replaceByState,this._useUserPreferences),i=0;i<this._exclusions.length;++i)t.addExclusion(this._exclusions[i]);return t},t.DefaultProperty=a,t.saveDefaultProperties=function(e){a._saveDefaults=e}}).call(this,i("aIyQ"))},OekH:function(e,t,i){"use strict";var r,n,o,s,a,l,c,u,h,d,p;i.r(t),i.d(t,"CONNECTSTATUSES",(function(){return r})),i.d(t,"ORDERTYPE",(function(){return n})),
i.d(t,"SIDE",(function(){return o})),i.d(t,"ORDERSTATUS",(function(){return s})),i.d(t,"ORDERSTATUSFILTER",(function(){return a})),i.d(t,"PARENTTYPE",(function(){return l})),i.d(t,"TICKETFOCUS",(function(){return c})),i.d(t,"NOTIFICATION",(function(){return u})),i.d(t,"OrderOrPositionMessageType",(function(){return h})),i.d(t,"AccountType",(function(){return d})),i.d(t,"DisconnectType",(function(){return p})),function(e){e[e.CONNECTED=1]="CONNECTED",e[e.CONNECTING=2]="CONNECTING",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.ERROR=4]="ERROR"}(r||(r={})),function(e){e[e.LIMIT=1]="LIMIT",e[e.MARKET=2]="MARKET",e[e.STOP=3]="STOP",e[e.STOPLIMIT=4]="STOPLIMIT"}(n||(n={})),function(e){e[e.BUY=1]="BUY",e[e.SELL=-1]="SELL"}(o||(o={})),function(e){e[e.CANCELED=1]="CANCELED",e[e.FILLED=2]="FILLED",e[e.INACTIVE=3]="INACTIVE",e[e.PLACING=4]="PLACING",e[e.REJECTED=5]="REJECTED",e[e.WORKING=6]="WORKING"}(s||(s={})),function(e){e[e.ALL=0]="ALL",e[e.CANCELED=1]="CANCELED",e[e.FILLED=2]="FILLED",e[e.INACTIVE=3]="INACTIVE",e[e.REJECTED=5]="REJECTED",e[e.WORKING=6]="WORKING"}(a||(a={})),function(e){e[e.ORDER=1]="ORDER",e[e.POSITION=2]="POSITION"}(l||(l={})),function(e){e[e.LIMITPRICE=1]="LIMITPRICE",e[e.STOPPRICE=2]="STOPPRICE",e[e.TAKEPROFIT=3]="TAKEPROFIT",e[e.STOPLOSS=4]="STOPLOSS"}(c||(c={})),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS"}(u||(u={})),function(e){e.Information="information",e.Warning="warning",e.Error="error"}(h||(h={})),function(e){e.Demo="demo",e.Live="live"}(d||(d={})),function(e){e[e.LogOut=0]="LogOut",e[e.FailedRestoring=1]="FailedRestoring",e[e.Offline=2]="Offline"}(p||(p={}))},OiSa:function(e,t,i){"use strict";i.r(t),i.d(t,"isDrawingToolbarVisible",(function(){return c}));var r=i("Vdly"),n=i("Kxc7"),o=i("hY0g"),s=i.n(o),a=!n.enabled("hide_left_toolbar_by_default"),l=r.getBool("ChartDrawingToolbarWidget.visible",a),c=new s.a(l)},OsWk:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15" fill="none"><path d="M3.00004 7.50008C3.00004 6.25729 3.50318 5.13298 4.31807 4.31809L3.61097 3.61098C2.6162 4.60574 2.00004 5.98143 2.00004 7.50008H3.00004ZM4.31807 4.31809C5.13296 3.50321 6.25727 3.00008 7.50004 3.00008V2.00008C5.98141 2.00008 4.60572 2.61623 3.61097 3.61098L4.31807 4.31809ZM4.31808 3.61098L2.55033 1.84323L1.84322 2.55033L3.61097 4.31809L4.31808 3.61098ZM7.50004 3.00008C8.74283 3.00008 9.86715 3.50321 10.682 4.31811L11.3891 3.611C10.3944 2.61624 9.01869 2.00008 7.50004 2.00008V3.00008ZM10.682 4.31811C11.4969 5.13299 12 6.2573 12 7.50008H13C13 5.98144 12.3839 4.60576 11.3891 3.611L10.682 4.31811ZM11.3891 4.31811L13.1569 2.55033L12.4498 1.84322L10.682 3.611L11.3891 4.31811ZM12 7.50008C12 8.74285 11.4969 9.86716 10.682 10.682L11.3891 11.3892C12.3839 10.3944 13 9.01872 13 7.50008H12ZM10.682 10.682C9.86715 11.4969 8.74283 12.0001 7.50004 12.0001V13.0001C9.01869 13.0001 10.3944 12.3839 11.3891 11.3892L10.682 10.682ZM10.682 11.3892L12.4498 13.1569L13.1569 12.4498L11.3891 10.682L10.682 11.3892ZM7.50004 12.0001C6.25727 12.0001 5.13296 11.497 4.31807 10.6821L3.61097 11.3892C4.60572 12.3839 5.98141 13.0001 7.50004 13.0001V12.0001ZM4.31807 10.6821C3.50318 9.86718 3.00004 8.74286 3.00004 7.50008H2.00004C2.00004 9.01873 2.6162 10.3944 3.61097 11.3892L4.31807 10.6821ZM2.55033 13.1569L4.31808 11.3892L3.61097 10.6821L1.84322 12.4498L2.55033 13.1569ZM8.00004 2.50007L8 -8.77353e-06L7 8.77353e-06L7.00004 2.50009L8.00004 2.50007ZM12.5001 8.00008L15 8L15 7L12.5 7.00008L12.5001 8.00008ZM2.50006 7.00008L1.564e-05 7L-1.564e-05 8L2.50003 8.00008L2.50006 7.00008ZM7.00004 12.5001L7 15L8 15L8.00004 12.5001L7.00004 12.5001Z"/></svg>'},OwDf:function(e,t,i){"use strict";i.r(t),i.d(t,"PivotPointsStandardLastPricesView",(function(){return s}));var r=i("k9/m"),n=["p","s1","r1","s2","r2","s3","r3","s4","r4","s5","r5"],o={P:"P",S1:"S1/R1",S2:"S2/R2",S3:"S3/R3",S4:"S4/R4",S5:"S5/R5",R1:"S1/R1",R2:"S2/R2",R3:"S3/R3",R4:"S4/R4",R5:"S5/R5"},s=function(){function e(e){this._visiblePivots=new Set,this._invidated=!0,this._prices=[],this._source=e}return e.prototype.visiblePivots=function(){return this._visiblePivots},e.prototype.update=function(){this._invidated=!0},e.prototype.prices=function(){return this._invidated&&(this._updateImpl(),this._invidated=!1),this._prices},e.prototype._updateImpl=function(){this._visiblePivots.clear();var e=this._source.model(),t=this._source.priceScale();if(null!==t&&!e.timeScale().isEmpty()&&!t.isEmpty()){var i=e.timeScale().visibleBarsStrictRange();if(null!==i&&this._source.customData()&&this._source.customData().pivots){var s=e.mainSeries().bars().search(i.lastBar(),r.PlotRowSearchMode.NearestLeft);if(null!==s)for(var a=s.index,l=this._source.customData().pivots,c=this._source.indexes(),u=this._source.properties(),h=this._source.firstValue(),d=0;d<l.length;d++)if(l[d]){var p=c[l[d].startIndex],f=c[l[d].endIndex],_=u.inputs.showHistoricalPivots.value();if(p<=a&&(f>=a||_)){this._visiblePivots.add(l[d]),
this._prices=[];for(var m=0;m<n.length;m++){var v=n[m],g=l[d][v];if(void 0!==g&&null!==h){var y=t.priceToCoordinate(g,h),b=v.toUpperCase(),S=o[b],w=u.levelsStyle.colors[S].value();this._prices.push({formatted:t.formatPrice(g,h),price:g,coordinate:y,color:w})}}}}}}},e}()},Owlf:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r="large"},"P+Pi":function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererFlagShape",(function(){return s}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShapeUsingCSSPixels=function(e,t){var i=t.width,r=t.height,n=r/2,o=(i-3)/3,s=t.x-i/2,a=t.vertOffset,l=t.y-n+a;e.moveTo(s,l),e.lineTo(s+3,l),e.bezierCurveTo(s+o,l-o,s+2*o,l+o,s+i,l),e.lineTo(s+i,l+n),e.bezierCurveTo(s+i-o,l+n+o,s+i-2*o,l+n-o,s+3,l+n),e.lineTo(s+3,l+r),e.lineTo(s,l+r),e.lineTo(s,l)},t.prototype._calcBoundingBox=function(t){var i=t.width,r=t.height,n=r/2,s=t.x-i/2,a=t.vertOffset,l=t.y-n+a,c=s,u=s+i,h=l,d=l+r,p=new o.Point(c,h),f=new o.Point(u,d),_=Object(o.box)(p,f),m=e.prototype._calcBoundingBox.call(this,t);return m&&(_=this._unionBox(_,m)),_},t}(n.a)},PADO:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a}));var r=i("bkxW"),n=i("+GxX");function o(e,t){void 0===t&&(t=!0);var i=document.createElement("script");i.async=t,i.src=e;var n=Object(r.a)();return n&&i.setAttribute("nonce",n),document.head.appendChild(i),i}function s(e){var t=document.createElement("img");return t.src=e,t}function a(){return Object(n.isFeatureEnabled)("marketing-analytics")}},PAcw:function(e,t,i){"use strict";i.r(t),i.d(t,"GridRenderer",(function(){return o}));var r=i("jFln"),n=i("gAom"),o=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e,t){if(null!==this._data){var i=t.pixelRatio,o=Math.max(1,Math.floor(i));e.lineWidth=o;var s=Math.ceil(this._data.h*i),a=Math.ceil(this._data.w*i);if(e.save(),e.lineCap="butt",this._data.vertLinesVisible){e.strokeStyle=this._data.vertLinesColor,Object(r.setLineStyle)(e,this._data.vertLineStyle),e.beginPath();for(var l=0,c=this._data.timeMarks;l<c.length;l++){var u=c[l],h=Math.round(u.coord*i);Object(n.drawVerticalLine)(e,h,0,s)}e.stroke()}if(this._data.horzLinesVisible){e.strokeStyle=this._data.horzLinesColor,Object(r.setLineStyle)(e,this._data.horzLineStyle),e.beginPath();for(var d=0,p=this._data.priceMarks;d<p.length;d++){var f=p[d],_=Math.round(f.coord*i);Object(n.drawHorizontalLine)(e,_,0,a)}e.stroke()}e.restore()}},e.prototype.hitTest=function(e){return null},e}()},PF2b:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererTriangleApexUp",(function(){return a})),i.d(t,"PaneRendererTriangleApexDown",(function(){return l}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._calcBoundingBox=function(t){
var i=t.width,r=t.height,n=i/2,s=Math.round(r/3),a=t.x,l=t.vertOffset-2*s,c=t.y+l,u=a-n,h=a+n,d=c,p=c+r,f=new o.Point(u,d),_=new o.Point(h,p),m=Object(o.box)(f,_),v=e.prototype._calcBoundingBox.call(this,t);return v&&(m=this._unionBox(m,v)),m},t}(n.a),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShape=function(e,t,i){var r=i.width,n=i.height,o=Math.round(n/3),s=i.vertOffset-2*o,a=t.pixelRatio,l=this._lineWidth(t)%2?.5:0,c=Math.max(1,Math.floor(a)),u=c%2?.5:0,h=Math.round(r*a);h%2!=c%2&&(h+=1);var d=Math.round(i.x*a)+u,p=Math.round((i.y+s)*a),f=d+h/2,_=Math.round((i.y+s+n)*a)+l,m=d-h/2;e.moveTo(d,p),e.lineTo(f,_),e.lineTo(m,_),e.lineTo(d,p)},t}(s),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShape=function(e,t,i){var r=i.width,n=i.height,o=Math.round(n/3),s=i.vertOffset-o,a=t.pixelRatio,l=this._lineWidth(t)%2?.5:0,c=Math.max(1,Math.floor(a)),u=c%2?.5:0,h=Math.round(r*a);h%2!=c%2&&(h+=1);var d=Math.round(i.x*a)+u,p=Math.round((i.y+s)*a)+l,f=d+h/2,_=Math.round((i.y+s+n)*a),m=d-h/2;e.moveTo(m,p),e.lineTo(f,p),e.lineTo(d,_),e.lineTo(m,p)},t}(s)},PL0c:function(e,t,i){"use strict";(function(e){var r=i("aO4+").Point,n=i("2kV1").StudyStatusView,o=i("it7y").StudyDataWindowView,s=i("Qq0B").NonSeriesStudy,a=i("UHyS").StandardPivotPointsPriceAxisView,l=i("KtbP").PanePriceAxisView,c=i("VdBB").HitTestResult,u=i("Zy3/").CompositeRenderer,h=i("c44N").areEqualPaneRenderParams,d=i("2EnG").StandardPivotPointsImageCache,p=i("OwDf").PivotPointsStandardLastPricesView,f=i("Fdrt").PaneRendererStandardPivotLabel,_=i("l4sv").HorizontalLineRenderer;function m(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={}}function v(e,t,i,r){s.call(this,e,t,i,r);for(var n=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],o=this.properties().levelsStyle.visibility,a=0;a<n.length;a++)o[n[a]].listeners().subscribe(this,TradingView.Study.prototype.processHibernate);this._cacheDrawParams=null,this._cache=null}m.prototype.setCache=function(e){this._cache=e},m.prototype.priceAxisViews=function(e,t){return this._priceAxisViews},m.prototype.mergeLabel=function(e,t,i){var r=""+t;void 0===e[r]?(e[r]={},e[r].text=i,e[r].ids=[this.complete(i)]):(e[r].text+="/"+i,e[r].ids.push(this.complete(i)))},m.prototype.complete=function(e){return"P"===e?e:"S"+e[1]+"/R"+e[1]},m.prototype.update=function(){this._invalidated=!0},m.prototype._updateImpl=function(){if(this._source.pricesView().prices(),this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()){var e=this._source.customData().pivots,t=this._source._indexes,i=this._model.timeScale(),r=this._source.priceScale();if(r&&!r.isEmpty()&&!i.isEmpty()&&e){var n=i.visibleBarsStrictRange(),o=n.firstBar(),s=n.lastBar();if(this._source.ownerSource())for(var a=this._source.ownerSource().firstValue(),l=0;l<e.length;l++)if(e[l]){var c=t[e[l].startIndex],u=t[e[l].endIndex];if(!(u<o||c>s)){
var h={},d=this._source.properties().levelsStyle.visibility;d.P.value()&&this.mergeLabel(h,e[l].p,"P"),d["S1/R1"].value()&&(this.mergeLabel(h,e[l].s1,"S1"),this.mergeLabel(h,e[l].r1,"R1")),d["S2/R2"].value()&&(this.mergeLabel(h,e[l].s2,"S2"),this.mergeLabel(h,e[l].r2,"R2")),d["S3/R3"].value()&&(this.mergeLabel(h,e[l].s3,"S3"),this.mergeLabel(h,e[l].r3,"R3")),d["S4/R4"].value()&&(this.mergeLabel(h,e[l].s4,"S4"),this.mergeLabel(h,e[l].r4,"R4")),d["S5/R5"].value()&&(this.mergeLabel(h,e[l].s5,"S5"),this.mergeLabel(h,e[l].r5,"R5"));var p=i.indexToCoordinate(c),f=i.indexToCoordinate(u);for(var _ in h){var m=parseFloat(_),v=r.priceToCoordinate(m,a);this._pivots.push({x1:p,x2:f,y:v,label:h[_].text,labelIds:h[_].ids,src:e[l]})}}}}}},m.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);for(var e=new u,t=this._source.properties().levelsStyle.colors,i=this._source.properties().levelsStyle.widths,n=this._source.visiblePivots(),o=0;o<this._pivots.length;o++){var s=this._pivots[o];if(n.has(s.src)){var a={width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:t[s.labelIds[0]].value(),linewidth:i[s.labelIds[0]].value(),linestyle:CanvasEx.LINESTYLE_SOLID,y:s.y,left:s.x1,right:s.x2},l=new _;if(l.setData(a),l.setHitTest(new c(c.REGULAR)),e.append(l),this._source.properties().levelsStyle.showLabels.value()){var h=function(e){return this._source.getCache(e)}.bind(this);e.append(new f(h,new r(s.x1,s.y),s.label))}}}return e},inherit(v,s),v.prototype.indexes=function(){return this._indexes},v.prototype.getCache=function(e){return this.createCacheIfRequred(e),this._cache},v.prototype.createCacheIfRequred=function(e){if(null===this._cache||null==this._cacheDrawParams||!h(e,this._cacheDrawParams)){this._cache&&this._cache.destroy();var t=this._getActualCacheParams();this._cache=new d(e,t.font,t.fontSize,t.backColors),this._cache.setPrices(this._pricesView.prices()),this._cacheDrawParams=e,this._cacheInvalidated=!1,this._cache.reset(t),this._cache.setPrices(this._pricesView.prices())}},v.prototype.lastValueData=function(e,t,i){var r=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(e.toUpperCase()),n=this._pricesView.prices()[r];return null!=n?n:{noData:!0}},v.prototype.lastPriceLabelFixedCoordinate=function(e){var t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(e.toUpperCase());return this._priceAxisViews[t]._fixedCoordinate},v.prototype.priceLabelText=function(e){return this._metaInfo.shortDescription+":"+e.toUpperCase()},v.prototype.pricesView=function(){return this._pricesView},v.prototype._getActualCacheParams=function(){var e={};return e.font=this.properties().font.value(),e.fontSize=this.properties().fontsize.value(),
e.backColors=[this.properties().levelsStyle.colors.P.value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S5/R5"].value(),this.properties().levelsStyle.colors["S5/R5"].value()],e},v.prototype.updateAllViews=function(){s.prototype.updateAllViews.call(this),this._pricesView.update()},v.prototype.createViews=function(){this._cache&&(this._cache.destroy(),this._cache=null),this._priceAxisViews=[];var e=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"];this._paneViews.length=0,this._labelPaneViews=[];var t=new m(this._model,this);t.setCache(this._cache),this._paneViews.push(t),this._mainPaneView=t;for(var i=0;i<e.length;i++){var r=new a(this,{name:e[i],cache:this._cache});this._priceAxisViews.push(r),this._labelPaneViews.push(new l(r,this,this._model))}this._dataWindowView||(this._dataWindowView=new o(this,this._model)),this._statusView||(this._statusView=new n(this,this._model.properties().scalesProperties.textColor)),this._legendView=null,this._pricesView=new p(this)},v.prototype.visiblePivots=function(){return this._pricesView.visiblePivots()},v.prototype._postProcessGraphics=function(){},v.prototype.isVisible=function(){if(!this.properties().visible.value())return!1;for(var e=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],t=this.properties().levelsStyle.visibility,i=0;i<e.length;i++)if(t[e[i]].value())return!0;return!1},v.prototype.stop=function(){TradingView.Study.prototype.stop.call(this),this._cache&&(this._cache.destroy(),this._cache=null)},v.prototype.priceRange=function(t,i){if(!this.customData()||!this.customData().pivots||!this._indexes)return null;if(!this.priceScale())return null;for(var r=this.customData().pivots,n=this._indexes,o=null,s=0;s<r.length;s++)if(r[s]){var a=n[r[s].startIndex];if(!(n[r[s].endIndex]<t||a>i)){var l=[],c=this._properties.levelsStyle.visibility;c.P.value()&&l.push(r[s].p),c["S1/R1"].value()&&l.push(r[s].s1,r[s].r1),c["S2/R2"].value()&&l.push(r[s].s2,r[s].r2),c["S3/R3"].value()&&l.push(r[s].s3,r[s].r3),c["S4/R4"].value()&&l.push(r[s].s4,r[s].r4),c["S5/R5"].value()&&l.push(r[s].s5,r[s].r5);for(var u=0;u<l.length;u++)l[u]&&(null===o?o=new e(l[u],l[u]):o.apply(l[u],l[u]))}}return this.priceScale().isLog()&&o?new e(this.priceScale().priceToLogical(o.minValue()),this.priceScale().priceToLogical(o.maxValue())):o},t.study_PivotPointsStandard=v}).call(this,i("Qb4w").PriceRange)},PT1i:function(e,t,i){"use strict";i.r(t),i.d(t,"Linking",(function(){return h})),i.d(t,"linking",(function(){return d}));var r,n=i("hY0g"),o=i.n(n),s=i("Kxc7"),a=i("JOqt"),l=i("txPx"),c=i("0UyP"),u=Object(l.getLogger)("Linking");!function(e){e[e.NotBound=0]="NotBound",
e[e.BoundToWidget=1]="BoundToWidget",e[e.BoundToModel=2]="BoundToModel"}(r||(r={}));var h=function(){function e(){this._watchedSymbol=new o.a,this._seriesShortSymbol=new o.a,this._proSymbol=new o.a,this._watchedInterval=new o.a,this._watchedIntraday=new o.a,this._watchedSupportedResolutions=new o.a,this._symbolNamesList=new o.a,this._chartWidgetBindingState=r.NotBound,this._activeChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._searchChartsLoadDebounced=null,this._selfEmit=!1,this._preventFeedBySymbol=!1,this._feedBySymbolDebounceCounter=0}return Object.defineProperty(e.prototype,"symbol",{get:function(){return this._watchedSymbol},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proSymbol",{get:function(){return this._proSymbol},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"symbolNamesList",{get:function(){return this._symbolNamesList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seriesShortSymbol",{get:function(){return this._seriesShortSymbol.readonly()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._watchedInterval},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"intraday",{get:function(){return this._watchedIntraday.readonly()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportedResolutions",{get:function(){return this._watchedSupportedResolutions.readonly()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preventFeedBySymbol",{get:function(){return this._preventFeedBySymbol},enumerable:!1,configurable:!0}),e.prototype.bindToChartWidget=function(e){this.unbindFromChartWidget(),this._activeChartWidget=e;var t=e.model();if(t)this._onChartModelCreated(t);else{e.modelCreated().subscribe(this,this._onChartModelCreated),this._chartWidgetBindingState=r.BoundToWidget;var i=e.properties().childs().mainSeriesProperties.childs();this._watchedSymbol.setValue(i.symbol.value()),this._watchedInterval.setValue(i.interval.value())}},e.prototype.unbindFromChartWidget=function(){switch(this._chartWidgetBindingState){case r.BoundToWidget:if(!this._activeChartWidget)throw new Error("ChartWidget is undefined");this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated);break;case r.BoundToModel:this._symbolProperty().unsubscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.unsubscribe(this._watchedSymbolListenerBound),this._mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._updateSeriesSymbolInfo),this._mainSeries().dataEvents().symbolError().unsubscribe(this,this._updateSeriesSymbolInfo),this._intervalProperty().unsubscribe(this,this._onIntervalPropertyChange),this._watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this._watchedSymbol.hook,delete this._watchedSymbol.writeLock}
this._activeChartWidget=null,this._chartWidgetBindingState=r.NotBound},e.prototype.getChartWidget=function(){return this._activeChartWidget},e.prototype.bindToChartWidgetCollection=function(e){var t=this;this._chartWidgetCollection=e,this.unbindFromChartWidget(),e.activeChartWidget.subscribe((function(e){t.unbindFromChartWidget(),t.bindToChartWidget(e)}),{callWithLast:!0})},e.prototype.bindToSearchCharts=function(e){var t=this;this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),e.loadingSymbol.subscribe((function(e){!1===e&&(t._feedBySymbolDebounceCounter=0)})),this._watchedSymbol.subscribe(this._onSymbolLinkBound)},e.prototype.unbindFromSearchCharts=function(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)},e.prototype.setPreventFeedBySymbol=function(e){this._preventFeedBySymbol=e},e.prototype._onSearchBySymbol=function(e){if(!e.resolved_symbol)throw new Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1},e.prototype._onSymbolLink=function(e){if(!this._selfEmit){if(!this._searchCharts){var t="No search charts defined";throw u.logError(t),new Error(t)}this._preventFeedBySymbol||this._loadSearchCharts(e)}},e.prototype._loadSearchCharts=function(e){var t=this;if(!this._searchCharts){var i="No search charts defined";throw u.logError(i),new Error(i)}if(this._searchChartsLoadDebounced)this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced(e));else{var r=function(e){return t._searchCharts?(!0===t._searchCharts.loadingSymbol.value()?t._feedBySymbolDebounceCounter<100&&(t._feedBySymbolDebounceCounter++,t._searchChartsLoadDebounced=Object(a.debounce)(r,2e3),t._searchChartsLoadDebounced(e)):t._searchChartsLoadDebounced=null,t._searchCharts.feedBySymbol.call(t._searchCharts,e)):function(){}};!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=Object(a.debounce)(r,2e3),this._searchChartsLoadDebounced(e)):this._searchCharts.feedBySymbol(e)}},e.prototype._mainSeries=function(){if(!this._activeChartWidget)throw new Error("ChartWidget is undefined");return this._activeChartWidget.model().mainSeries()},e.prototype._properties=function(){return this._mainSeries().properties()},e.prototype._symbolProperty=function(){return this._properties().symbol},e.prototype._intervalProperty=function(){return this._properties().interval},e.prototype._watchedSymbolListener=function(e){this._symbolProperty().value()!==e&&(this._chartWidgetCollection.setSymbol(e),this._sendSnowplowAnalytics())},e.prototype._sendSnowplowAnalytics=function(){var e=this;if(!window.user.do_not_track){0;var t=this._mainSeries(),i=function(){t.dataEvents().symbolResolved().unsubscribe(e,r)},r=function(r){Object(c.getTracker)().then((function(t){if(null!==t){
var i=e._chartWidgetCollection.layout.value(),n=e._chartWidgetCollection.metaInfo.uid.value()||"";t.trackChartSymbols(r.pro_name,r.type,i,n)}})),t.dataEvents().symbolError().unsubscribe(e,i)};t.dataEvents().symbolResolved().subscribe(this,r,!0),t.dataEvents().symbolError().subscribe(this,i,!0)}},e.prototype._onSymbolPropertyChange=function(){var e=this._symbolProperty().value()!==this._watchedSymbol.value();this._watchedSymbol.setValue(this._symbolProperty().value()),e&&this._chartWidgetCollection.setSymbol(this._symbolProperty().value())},e.prototype._onSymbolResolved=function(e){var t=this._mainSeries().symbolInfo();t&&this._applyValuesFromSymbolInfo(t)},e.prototype._applyValuesFromSymbolInfo=function(e){var t=e.pro_name||s.enabled("trading_terminal")&&(e.full_name||e.name)||"";this._proSymbol.setValue(t),e.aliases&&this._symbolNamesList.setValue(e.aliases)},e.prototype._updateSeriesSymbolInfo=function(){this._seriesShortSymbol.setValue(this._properties().shortName.value());var e=this._mainSeries().symbolInfo();e?(this._applyValuesFromSymbolInfo(e),e.hasOwnProperty("supported_resolutions")?this._watchedSupportedResolutions.setValue(e.supported_resolutions):this._watchedSupportedResolutions.setValue(void 0),this._watchedIntraday.setValue(!!e.has_intraday)):(this._watchedIntraday.deleteValue(),this._proSymbol.deleteValue())},e.prototype._watchedIntervalListener=function(e){this._intervalProperty().value()!==e&&this._chartWidgetCollection.setResolution(e)},e.prototype._onIntervalPropertyChange=function(){var e=this._intervalProperty().value()!==this._watchedInterval.value();this._watchedInterval.setValue(this._intervalProperty().value()),e&&this._chartWidgetCollection.setResolution(this._intervalProperty().value())},e.prototype._onChartModelCreated=function(e){if(!this._activeChartWidget)throw new Error("ChartWidget is undefined");this._chartWidgetBindingState=r.BoundToModel,this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated);var t=this._symbolProperty();t.subscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.setValue(t.value()),this._watchedSymbol.subscribe(this._watchedSymbolListenerBound);var i=this._mainSeries();i.dataEvents().symbolResolved().subscribe(this,this._onSymbolResolved),this._watchedSymbol.hook=function(e){return i.symbolSameAsCurrent(e)&&(e=i.symbol()),e},i.dataEvents().symbolResolved().subscribe(this,this._updateSeriesSymbolInfo),i.dataEvents().symbolError().subscribe(this,this._updateSeriesSymbolInfo),i.dataEvents().symbolNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.dataEvents().symbolGroupNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.dataEvents().extendedHoursNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo();var n=this._intervalProperty();n.subscribe(this,this._onIntervalPropertyChange),this._watchedInterval.setValue(n.value()),this._watchedInterval.subscribe(this._watchedIntervalListenerBound),this._activeChartWidget.readOnly()&&(this._watchedSymbol.writeLock=!0)},e}()
;window.TradingView=window.TradingView||{};var d=new h;window.TradingView.Linking=d},PYn8:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Three Drives Pattern");function s(e,t){this._constructor="LineToolThreeDrivers";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("S6aM").LineToolThreeDrivesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 7},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Three Drives Pattern"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("y4pE").AbcdPatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolthreedrivers",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolThreeDrivers=s},Pb0m:function(e,t,i){"use strict";var r=i("Eyy1").ensureNotNull,n=i("aO4+").Point,o=i("qgcf").TextRenderer,s=i("Qq0B").NonSeriesStudy,a=i("pJOz").TrendLineRenderer,l=i("VdBB").HitTestResult,c=i("Zy3/").CompositeRenderer,u=i("Tmoa"),h=i("a7Ha").LineEnd,d=i("zDbI").CHART_FONT_FAMILY;function p(e,t){this._model=e,this._source=t,this._waves=[],this._highlights=[],this._retracements=[],this._invalidated=!0}function f(e,t,i,r){s.call(this,e,t,i,r)}p._wave5Labels=[["i","ii","iii","iv","v"],["(i)","(ii)","(iii)","(iv)","(v)"],["((i))","((ii))","((iii))","((iv))","((v))"],["1","2","3","4","5"],["(1)","(2)","(3)","(4)","(5)"],["((1))","((2))","((3))","((4))","((5))"],["I","II","III","IV","V"],["(I)","(II)","(III)","(IV)","(V)"],["((I))","((II))","((III))","((IV))","((V))"]],p._wave3Labels=[["a","b","c"],["A","B","C"]],p._fontSizes=[10,10,10,11,11,11,12,12,12],p.prototype.update=function(){this._invalidated=!0},p.prototype.updateImpl=function(){if(this._waves=[],this._highlights=[],this._retracements=[],this._source.customData()&&this._source.properties().visible.value()){var e=this._source.customData().waves,t=this._source._indexes,i=this._model.timeScale(),o=this._source.priceScale(),s=this._model.mainSeries(),a=s.firstBar();if(o&&!o.isEmpty()&&!i.isEmpty()&&a&&e){for(var l=i.visibleBarsStrictRange(),c=l.lastBar(),u=l.firstBar(),h=["m0StartIndex","startIndex","endIndex","m2EndIndex","m3EndIndex"],d=s.firstValue(),f=0;f<e.length;f++)if(e[f]){for(var _=[],m=0;m<5;m++){var v=t[e[f][h[m]]];if(!isFinite(v))break;_.push(v)}if(0!==_.length&&!(_[0]>c||_[_.length-1]<u)){var g=+e[f].size;if(isFinite(g)){var y="level"+g,b=this._source.properties()[y];if(b.visible.value()){var S=parseInt(e[f].direction,10),w=[];w.dir=S,w.prices=[],w.orig_prices=[];for(var P=0;P<_.length;P++){if(void 0!==_[P]){var C={};if((A=_[P])<(a=r(s.bars().first())).index)continue;if(C.x=i.indexToCoordinate(A),null===(O=s.bars().valueAt(A))){w.push(void 0),w.prices.push(void 0),
w.orig_prices.push(void 0),S=-S;continue}var T,x=1===S?O[TradingView.HIGH_PLOT]:O[TradingView.LOW_PLOT];if(w.orig_prices.push(x),w.prices.push(x),C.y=o.priceToCoordinate(x,d),C.label=p._wave5Labels[g][P],C.align=-1===S?"top":"bottom",C.color=b.color.value(),delete C.backgroundColor,w.id="wave_"+f,this._source===this._model.hoveredSource())(T=this._model.lastHittestData())&&T.wave&&T.wave.id===w.id&&(C.color="#FFFFFF",C.backgroundColor=b.color.value());C.fontsize=p._fontSizes[g],C._textCache={widths:[]},C.wave=w,w.push(C)}else w.push(void 0),w.prices.push(void 0);S=-S}w.inds=_,w.dir=S,w.color=b.color.value(),this._waves.push(w)}}}}if(this._source===this._model.hoveredSource())if(T=this._model.lastHittestData()){_=T.wave.inds,S=-T.wave.dir;var I=T.backgroundColor?T.backgroundColor:T.color,E=T.wave.orig_prices,L=null;for(P=0;P<_.length;P++){if(void 0!==_[P]){var O,A=_[P],M=i.indexToCoordinate(A);if(null===(O=s.bars().valueAt(A))){S=-S;continue}x=E[P];var k=o.priceToCoordinate(x,d),D=new n(M,k);L&&this._highlights.push({points:[L,D],color:I}),L=D}S=-S}if(void 0!==E[1]&&void 0!==E[2]){var R=E[1],V=E[2],B=E[3],N=E[0];this._retracements.push({y:o.priceToCoordinate(R,d),x:0,extendLeft:!0,extendRight:!0,color:I,text:"",style:CanvasEx.LINESTYLE_SOLID}),this._retracements.push({y:o.priceToCoordinate(R,d),x:0,extendLeft:!0,extendRight:!0,color:I,text:"",style:CanvasEx.LINESTYLE_SOLID});S=V-R;if(void 0!==E[0]){x=R+(F=(N-R)/S)*S,M=i.indexToCoordinate(_[0]);this._retracements.push({y:o.priceToCoordinate(x,d),x:M,extendLeft:!1,extendRight:!0,color:I,text:""+F.toFixed(3),style:CanvasEx.LINESTYLE_DASHED})}if(void 0!==B){var F;x=V-(F=(V-B)/S)*S,M=i.indexToCoordinate(_[3]);this._retracements.push({y:o.priceToCoordinate(x,d),x:M,extendLeft:!0,extendRight:!1,color:I,text:""+F.toFixed(3),style:CanvasEx.LINESTYLE_DASHED})}}}}}},p.prototype.CIRCLE_SIZE=16,p.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);for(var e=new c,t=this.CIRCLE_SIZE,i={},r=0;r<this._waves.length;r++)for(var s=this._waves[r],p=0;p<s.length;p++){var f=s[p];if(void 0!==f){var _,m;"top"===f.align?(_=f.y+4,i["top_"+f.x]?(_+=i["top_"+f.x]*t,i["top_"+f.x]=i["top_"+f.x]+1):i["top_"+f.x]=1,m=_+t):(_=f.y-t-4,i["bottom_"+f.x]?(_-=i["bottom_"+f.x]*t,i["bottom_"+f.x]=i["bottom_"+f.x]+1):i["bottom_"+f.x]=1,m=_+t);var v={};v.points=[new n(f.x,(_+m)/2)],v.text=f.label,v.color=f.color,v.backgroundColor=f.backgroundColor,v.font="Verdana",v.bold=!0,v.offsetX=0,v.offsetY=0,v.vertAlign="middle",v.horzAlign="center",v.fontsize=f.fontsize;var g=new l(l.REGULAR,f);e.append(new o(v,g))}}for(r=0;r<this._highlights.length;r++){var y=this._highlights[r],b={points:y.points,width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:u.generateColor(y.color,50),linewidth:3,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:h.Circle,rightend:h.Circle};(S=new a).setData(b),e.append(S)}for(r=0;r<this._retracements.length;r++){var S,w=this._retracements[r];b={points:[new n(w.x+1,w.y),new n(w.x,w.y)],
width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:u.generateColor(w.color,50),linewidth:1,linestyle:w.style,extendleft:w.extendLeft,extendright:w.extendRight,leftend:h.Normal,rightend:h.Normal};(S=new a).setData(b),e.append(S);var P={points:[new n(w.x,w.y)],text:this._retracements[r].text,backgroundColor:"#606060",color:"#FFFFFF",vertAlign:"middle",horzAlign:"center",font:d,offsetX:w.extendRight?-50:50,offsetY:2,fontsize:12};e.append(new o(P))}return e},inherit(f,s),f.prototype.margins=function(){return[.1,.1]},f.prototype.isVisible=function(){if(!this.properties().visible.value())return!1;for(var e=0;e<=8;e++)if(this.properties()["level"+e].visible.value())return!0;return!1},f.prototype.createViews=function(){s.prototype.createViews.call(this),this._setPaneViews([new p(this.model(),this)])},t.study_ElliottWave=f},PfBM:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"ConnectionStatus",(function(){return r})),function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Open=2]="Open"}(r||(r={}))},PgQx:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd"><path stroke="currentColor" d="M7.5 8.5h12v12a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3v-12z"/><path fill="currentColor" d="M17 6l-1-1h-5l-1 1H7v1h13V6z"/><path stroke="currentColor" stroke-linecap="square" d="M10.5 11.5v8m3-8v8m3-8v8"/></g></svg>'},PjMa:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"DataSourceDangerReason",(function(){return r})),function(e){e.Spread="spread",e.PineRepainting="pine-repainting",e.CryptoCap="cryptocap"}(r||(r={}))},PlME:function(e,t,i){"use strict";i.r(t),i.d(t,"getAlertDialogType",(function(){return d})),i.d(t,"shouldAbortAlertEditor",(function(){return p})),i.d(t,"showAbortExplainingDialog",(function(){return _})),i.d(t,"ensureSeriesIsNotOffline",(function(){return v}));var r=i("YFKU"),n=i("brCa"),o=i("1UCy"),s=i("dfhE"),a=i("+GxX"),l=i("PT1i"),c=i("Hpjb"),u=i("0dm4"),h=i("oOPW");function d(e){return e.alert?e.type||"edit_alert":"create_alert"}function p(e){var t;if(Object(a.isFeatureEnabled)("alerts-maintenance"))return o.AlertEditorAbortReason.AlertsMaintenance;if(!e.alert&&!e.dataSourceHub)return o.AlertEditorAbortReason.ChartModelNotFound;if(!c.a.isAllowedToInvoke(e))return o.AlertEditorAbortReason.IsAlreadyPresent;var i=null===(t=e.dataSourceHub)||void 0===t?void 0:t.mainSeries();if(i&&f(i))return o.AlertEditorAbortReason.MainSeriesIsOffline;if(i&&function(e){return e.status()===s.STATUS_INVALID_SYMBOL}(i))return o.AlertEditorAbortReason.SymbolIsInvalid;var r=d(e);if("create_alert"===r&&i&&function(e){var t;return"ATR"===(null===(t=e.stateForAlert().styleInputs)||void 0===t?void 0:t.style)}(i))return o.AlertEditorAbortReason.MainSeriesIsATR;if("create_alert"===r&&i&&function(e){return e.isInReplay()}(i))return o.AlertEditorAbortReason.MainSeriesIsInReplay;var n=i?i.interval():l.linking.interval.value();return"create_alert"!==r||Object(u.canPlaceAlertOnResolution)(n)?null:o.AlertEditorAbortReason.UnsupportedResolution}
function f(e){return e.status()===s.STATUS_OFFLINE}function _(e,t){if(!m.has(e)){m.add(e);var i=function(){return m.delete(e)},s=function(e){return new Map([[o.AlertEditorAbortReason.UnsupportedResolution,"alertsOnSeconds"]]).get(e)||null}(e);if(s)Object(h.createGoProDialog)({feature:s,actionAfterClose:i});else{var a=function(e,t){var i=r.t("Oops!"),n=r.t("Alert editor could not be initialized");return new Map([[o.AlertEditorAbortReason.AlertsMaintenance,{title:r.t("Alerts maintenance"),content:r.t("We are doing some brief daily maintenance. Alerts will be back really soon, thanks for your patience!")}],[o.AlertEditorAbortReason.MainSeriesIsOffline,{title:i,content:("create_alert"===t?r.t("Cannot create an alert while offline"):r.t("Cannot edit an alert while offline"))+". "+r.t("Please check your internet connection")+"."}],[o.AlertEditorAbortReason.SymbolIsInvalid,{title:i,content:"create_alert"===t?r.t("Can't create alert on invalid symbol"):r.t("Can't edit alert on invalid symbol")}],[o.AlertEditorAbortReason.MainSeriesIsATR,{title:r.t("Alert cannot be set on an ATR-based chart"),content:r.t("Your alert won't trigger the way you expect it to! Inputs for ATR-based charts are recalculated each time you open a chart and are generally dependent on time. Please use the traditional chart type to set an alert with a static box size.")}],[o.AlertEditorAbortReason.MainSeriesIsInReplay,{title:i,content:r.t("Alert creating is not available in replay mode.")}]]).get(e)||{title:i,content:n}}(e,t);Object(n.createNoticeDialog)(a).then((function(e){e.on("beforeClose",i),e.open()}))}}}var m=new Set;function v(e){return new Promise((function(t){if(f(e)){var i=function(){f(e)||(e.onStatusChanged().unsubscribe(null,i),t())};e.onStatusChanged().subscribe(null,i)}else t()}))}},PlrB:function(e,t,i){"use strict";var r=i("mrSG"),n=(i("YFKU"),i("GVHu")),o=i("c5ry"),s=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._fundamental=t,r}return Object(r.__extends)(t,e),t.prototype._showPaneLabel=function(){return this._model.properties().scalesProperties.showFundamentalNameLabel.value()},t.prototype._showAxisLabel=function(){return this._model.properties().scalesProperties.showFundamentalLastValue.value()},t.prototype._updatePaneRendererData=function(e){e.text="",this._showPaneLabel()&&(e.text=this._fundamental.labelTitle(),e.visible=!0)},t}(i("hezA").StudyPriceAxisView),a=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._model=t.model(),r}return Object(r.__extends)(t,e),t.prototype._isVisible=function(){return this._model.properties().scalesProperties.showFundamentalLastValue.value()&&this._study.properties().styles[this._plotname].trackPrice.value()},t}(i("TmNs").StudyPriceLineAxisView);i.d(t,"a",(function(){return l}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.labelTitle=function(){return this.title(!0)},t.prototype.createPriceAxisView=function(e){return new s(this,{plotIndex:e})},t.prototype.createPriceLineAxisView=function(e){
return new a(this,e)},t.prototype.hasStateForAlert=function(){return!1},t.prototype.titleInParts=function(e,t,i,r){return[this._title(!!e),void 0]},t.prototype._getStatusTextOnStudyError=function(t){return 0===t.indexOf("resolve_error ")?window.t("This fundamental metric is not available for this symbol"):e.prototype._getStatusTextOnStudyError.call(this,t)},t.prototype._title=function(e){var t,i=this.metaInfo();t=e?i.shortDescription:i.description,void 0!==i.financialPeriod&&(t=t+" · "+Object(o.a)(i.financialPeriod));var r=this._titleInputs(!0);return r.length>0&&(t=window.t(r[0],{context:"study"})+" · "+t),t},t}(n.Study)},PoSe:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var r,n,o,s=null,a=0;i=i||{};var l=function(){a=!1===i.leading?0:Date.now(),s=null,o=e.apply(r,n),s||(r=n=null)};return function(){var c=Date.now();a||!1!==i.leading||(a=c);var u=t-(c-a);return r=this,n=arguments,u<=0||u>t?(s&&(clearTimeout(s),s=null),a=c,o=e.apply(r,n),s||(r=n=null)):s||!1===i.trailing||(s=setTimeout(l,u)),o}},e.exports=t.default},Q1r3:function(e,t,i){e.exports={errorDialog:"errorDialog-1NguAJjj"}},QIuV:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("ivNn").fixComputationError;function o(e,t){this.customization={forcePriceAxisLabel:!0,disableSelection:!0,disableErasing:!0},r.call(this,e,t)}inherit(o,r),o.prototype.isSynchronizable=function(){return!1},o.POINTS_COUNT=1,o.prototype.pointsCount=function(){return o.POINTS_COUNT},o.prototype.hasContextMenu=function(){return!1},o.prototype.state=function(){return null},o.prototype.startMoving=function(){r.prototype.startMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.endMoving=function(){r.prototype.endMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.correctPoints=function(e){this._currentMovingPoint&&this._startMovingPoint?this._currentMovingPoint.price-this._startMovingPoint.price&&(this._cursorMoved=!0):this._cursorMoved=!1;for(var t=1/this.priceScale().mainSource().base(),i=0;i<e.length;i++){var r=e[i];this._cursorMoved&&(r.price=this._currentMovingPoint.price),r.price=n(t*Math.round(r.price/t)),e[i]=r}},o.prototype.userEditEnabled=function(){return!0},o.prototype.movable=function(){return!1},o.prototype.canBeHidden=function(){return!1},o.prototype.isUserDeletable=function(){return!1},o.prototype.showInObjectTree=function(){return!1},o.prototype.doesMovingAffectsUndo=function(){return!1},o.prototype.isAvailableInFloatingWidget=function(){return!1},o.prototype.timeAxisViews=function(){return null},o.prototype.cloneable=function(){return!1},o.prototype.copiable=function(){return!1},o._configureProperties=function(e){r._configureProperties(e)},e.exports.LineToolTrading=o},QQu0:function(e,t,i){"use strict";var r=i("WPQD").LineToolTrendLine,n=i("Ocx9").DefaultProperty,o=window.t("Arrow");function s(e,t){var i=t||s.createProperties();r.call(this,e,i),this._constructor="LineToolArrow"}inherit(s,r),s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Arrow"},
s.createProperties=function(e){var t=new n("linetoolarrow",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolArrow=s},QTwd:function(e,t,i){"use strict";i.r(t),i.d(t,"RestoreDefaultsPreferencesUndoCommand",(function(){return u}));var r=i("mrSG"),n=i("Eyy1"),o=i("RDU5"),s=i("ApcL"),a=i("ZZnO"),l=i("x2L+"),c=i("N22A"),u=function(e){function t(t){var i=e.call(this,"Apply All Chart Properties")||this;i._trading=null,i._oldShowSellBuyButtons=null,i._oldNoConfirmEnabled=null,i._oldShowOnlyRejectionNotifications=null,i._oldShowPricesWithZeroVolume=null,i._oldShowPricesWithSpread=null,i._oldOrderExecutedSoundEnabled=null,i._prevWatermarkPreferences=null,i._model=t,i._trading=Object(c.tradingService)(),null!==i._trading&&(i._oldShowSellBuyButtons=i._trading.showSellBuyButtons.value(),i._oldNoConfirmEnabled=i._trading.noConfirmEnabled.value(),i._oldShowOnlyRejectionNotifications=i._trading.showOnlyRejectionNotifications.value(),i._oldShowPricesWithZeroVolume=i._trading.showPricesWith().zeroVolume.value(),i._oldShowPricesWithSpread=i._trading.showPricesWith().spread.value(),i._oldOrderExecutedSoundEnabled=i._trading.orderExecutedSoundParams.enabled.value()),i._defaultsPreferences=Object(s.defaultsPreferencesByWhiteList)(i._model,i._model.mainSeries()),i._oldPreferences=t.preferences(),i._prevDateFormat=a.dateFormatProperty.value(),i._prevShowOpenMarkerStatus=l.b.value();var r=i._model.watermarkSource();return null!==r&&(i._prevWatermarkPreferences=r.properties().state()),i}return Object(r.__extends)(t,e),t.prototype.redo=function(){null!==this._trading&&(this._trading.showSellBuyButtons.setValue(!0),this._trading.noConfirmEnabled.setValue(!1),this._trading.showOnlyRejectionNotifications.setValue(!1),this._trading.showPricesWith().zeroVolume.setValue(!0),this._trading.showPricesWith().spread.setValue(!0),this._trading.orderExecutedSoundParams.enabled.setValue(!1)),this._model.applyPreferences(this._defaultsPreferences),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),Object(a.removeSettingsValue)(),Object(l.a)();var e=this._model.watermarkSource();null!==e&&e.restorePropertiesDefaults()},t.prototype.undo=function(){null!==this._trading&&(this._trading.showSellBuyButtons.setValue(Object(n.ensureNotNull)(this._oldShowSellBuyButtons)),this._trading.noConfirmEnabled.setValue(Object(n.ensureNotNull)(this._oldNoConfirmEnabled)),this._trading.showOnlyRejectionNotifications.setValue(Object(n.ensureNotNull)(this._oldShowOnlyRejectionNotifications)),this._trading.showPricesWith().zeroVolume.setValue(Object(n.ensureNotNull)(this._oldShowPricesWithZeroVolume)),this._trading.showPricesWith().spread.setValue(Object(n.ensureNotNull)(this._oldShowPricesWithSpread)),this._trading.orderExecutedSoundParams.enabled.setValue(Object(n.ensureNotNull)(this._oldOrderExecutedSoundEnabled))),this._model.applyPreferences(this._oldPreferences),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),a.dateFormatProperty.setValue(this._prevDateFormat),
l.b.setValue(this._prevShowOpenMarkerStatus);var e=this._model.watermarkSource();null!==e&&null!==this._prevWatermarkPreferences&&e.properties().mergeAndFire(this._prevWatermarkPreferences)},t}(o.UndoCommand)},QYoC:function(e,t,i){"use strict";!function(e){e.fn.contextMenu=function(t){e(this).bind("contextmenu",(function(e){return t(e),!1}))}}(jQuery)},Qb4w:function(e,t,i){"use strict";i.r(t),i.d(t,"PriceRange",(function(){return s}));var r=i("ogJP"),n=i("txPx"),o=Object(n.getLogger)("Chart.PriceRange"),s=function(){function e(e,t){if(null!==e&&"object"==typeof e){var i=e;this._minValue=i.m_minValue,this._maxValue=i.m_maxValue}else{var r=e;this._minValue=r,void 0!==t&&(this._maxValue=t)}}return e.prototype.equals=function(e){return this._minValue===e._minValue&&this._maxValue===e._maxValue},e.prototype.clone=function(){return new e(this._minValue,this._maxValue)},e.prototype.minValue=function(){return this._minValue},e.prototype.setMinValue=function(e){this._minValue=e},e.prototype.maxValue=function(){return this._maxValue},e.prototype.setMaxValue=function(e){this._maxValue=e},e.prototype.length=function(){return this._maxValue-this._minValue},e.prototype.isEmpty=function(){return this._maxValue===this._minValue||this._maxValue!=this._maxValue||this._minValue!=this._minValue},e.prototype.serialize=function(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}},e.prototype.state=function(){return{max:this._maxValue,min:this._minValue}},e.prototype.merge=function(t){return new e(Math.min(this.minValue(),t.minValue()),Math.max(this.maxValue(),t.maxValue()))},e.prototype.apply=function(e,t){this._minValue=Math.min(this._minValue,e),this._maxValue=Math.max(this._maxValue,t)},e.prototype.set=function(e,t){this._minValue=e,this._maxValue=t},e.prototype.scaleAroundCenter=function(e){if(Object(r.isNumber)(e)){if(0!==this._maxValue-this._minValue){var t=.5*(this._maxValue+this._minValue),i=this._maxValue-t,n=this._minValue-t;i*=e,n*=e,this._maxValue=t+i,this._minValue=t+n}}else o.logDebug("PriceRange.scaleAroundCenter: invalid coeff")},e.prototype.shift=function(e){Object(r.isNumber)(e)?(this._maxValue+=e,this._minValue+=e):o.logDebug("PriceRange.shift: invalid coeff")},e.prototype.containsStrictly=function(e){return e.minValue()>this._minValue&&e.maxValue()<this._maxValue},e}()},QfUd:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var r=i("mrSG"),n=i("hY0g"),o=i.n(n),s=i("ogJP");function a(e,t){return Object(s.deepEquals)(e,t)[0]}var l=function(e){function t(t,i){void 0===i&&(i=a);var r=e.call(this,t)||this;return r._comparator=i,r}return Object(r.__extends)(t,e),t.prototype.setValue=function(t,i){!1===this._comparator(this.value(),t)&&e.prototype.setValue.call(this,t,i)},t}(o.a)},QkND:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M13.29 4.8h-.09a4.2 4.2 0 1 0 .09 8.4 6 6 0 1 1 0-8.4z"/></svg>'},QloM:function(e,t,i){"use strict";var r,n,o;i.r(t),
i.d(t,"TabPriority",(function(){return r})),i.d(t,"TabNames",(function(){return n})),i.d(t,"TabOpenFrom",(function(){return o})),function(e){e[e.Coordinates=100]="Coordinates",e[e.Display=100]="Display",e[e.Style=200]="Style",e[e.Inputs=300]="Inputs",e[e.Properties=250]="Properties"}(r||(r={})),function(e){e.background="Background",e.coordinates="Coordinates",e.drawings="Drawings",e.events="Events",e.eventsAndAlerts="Events & Alerts",e.inputs="Inputs",e.properties="Properties",e.scales="Scales",e.legend="Legend",e.sourceCode="Source Code",e.style="Style",e.timezoneSessions="Timezone/Sessions",e.trading="Trading",e.visibility="Visibility",e.text="Text"}(n||(n={})),function(e){e[e.Default=100]="Default",e[e.UserSave=200]="UserSave",e[e.Override=300]="Override"}(o||(o={}))},Qq0B:function(e,t,i){"use strict";i.r(t),i.d(t,"NonSeriesStudy",(function(){return s}));var r=i("mrSG"),n=i("Eyy1"),o=i("GVHu"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.clearData=function(){this._customData=null,this._indexes=null},t.prototype.restoreData=function(e,t,i){o.Study.prototype.restoreData.call(this,e),this._customData=t,this._indexes=i},t.prototype.state=function(t){var i=e.prototype.state.call(this,t);return t&&(i.nonSeriesData=this._customData,i.indexes=this._indexes),i},t.prototype.customData=function(){return this._customData},t.prototype._setPaneViews=function(e){this._paneViews=e,this.model().lightUpdate()},t.prototype._onDataUpdated=function(t,i,r){null!==i&&(i.indexes_replace?(Object(n.assert)("nochange"!==r),this._indexes=r):(this._customData=i.data,"nochange"!==r&&(this._indexes=r))),e.prototype._onDataUpdated.call(this,t,i,r)},t}(o.Study)},Qtjj:function(e,t,i){"use strict";i.r(t),i.d(t,"TimeSynchronizer",(function(){return l}));var r=i("LxhU"),n=i("jCNj"),o=i.n(n),s=i("IiTo"),a=null;var l=function(){function e(e,t){var i,n;this._sourceTargetBarBuilder=null,this._cache=new Map,this._source=e,this._target=t,this._isResolutionTheSame=r.Interval.isEqual(e.getResolution(),t.getResolution()),this._isSessionTheSame=(i=e.getSymbolInfo(),n=t.getSymbolInfo(),i.timezone===n.timezone&&i.session===n.session),this._shouldCorrectTradingDay=r.Interval.isDWM(e.getResolution())&&!this._isSessionTheSame}return e.prototype.sourceTimeToTargetTime=function(e){if(this._isSessionTheSame&&this._isResolutionTheSame)return e;if(!this._source.isValid()||!this._target.isValid())return e;var t=this._cache.get(e);if(void 0===t){var i=1e3*e;if(this._shouldCorrectTradingDay){var r=o.a.utc_to_cal(this._source.getSession().timezone,i);r=this._source.getSession().spec.correctTradingDay(r);var n=new Date(r);o.a.set_hms(n,0,0,0,0,this._source.getSession().timezone),i=n.valueOf()}var s=this._sourceTargetBuilder();s.moveTo(i);var a=s.indexOfBar(i);t=s.startOfBar(Math.max(0,a))/1e3,this._cache.set(e,t)}return t},e.prototype._sourceTargetBuilder=function(){if(null===this._sourceTargetBarBuilder){var e=this._isSessionTheSame?this._target.getSession():(null===a&&(a=new s.a("Etc/UTC","24x7")),a)
;this._sourceTargetBarBuilder=Object(s.b)(this._target.getResolution(),this._target.getSession(),e)}return this._sourceTargetBarBuilder},e}()},R5LG:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r="light"},RDDl:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Price Range");function s(e,t){this._constructor="LineToolPriceRange";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("VghZ").PriceRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Price Range"},s.createProperties=function(e){var t=new n("linetoolpricerange",e);return s._configureProperties(t),t},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("Ax76").GeneralDatePriceRangeDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolPriceRange=s},RDU5:function(e,t,i){"use strict";i.r(t),i.d(t,"UndoCommand",(function(){return r}));var r=function(){function e(e,t){void 0===t&&(t=!0),this._customFlags={},this._text=e,this._executeOnPush=t}return e.prototype.text=function(){return this._text},e.prototype.executeOnPush=function(){return this._executeOnPush},e.prototype.customFlag=function(e){return this._customFlags[e]},e.prototype.setCustomFlag=function(e,t){this._customFlags[e]=t},e.prototype.canMerge=function(e){return!1},e.prototype.merge=function(e){throw new Error("Should be re-implemented in child classes")},e}()},RTYN:function(e,t,i){"use strict";i.r(t),i.d(t,"PositionAveragePriceAxisView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._formatPrice=function(e,t){return this._source.formatter().format(e)},t}(i("4TVt").LineToolPriceAxisView)},RXmj:function(e,t,i){"use strict";(function(e){var r=i("nmnj"),n=i("JWMC").trackEvent,o=i("oOPW").createGoProDialog,s=i("SNmj"),a=i("TxTq"),l=i("PfBM").ConnectionStatus,c=i("BHQF").fetch,u=i("txPx").getLogger("Chart.ChartSaver"),h=i("FQhm"),d=i("8GoI").getChartStorage,p=i("FIi8").deepExtend,f=i("ogJP").deepEquals,_=i("zUrt").backend,m=window.t("The publication preview could not be loaded. Please disable your browser extensions and try again.");function v(t){this._chartWidgetCollection=t,this._chartAboutToBeSavedDelegate=new e,this._chartSavedDelegate=new e,this._prevChartState=null,this._chartHasBeenModified=new e,this._chartSizeLimitExceededDelegate=new e,this._savingToken=null,this._lastPushStreamStatus=a.statusPrivate(),this._lastPushStreadConnectedTime=performance.now(),a.on("chart.storage",this._checkChartLastModified.bind(this)),a.onPrivateStatus(this._onPushstreamStatusChanged.bind(this))}
function g(e,t){e.content=JSON.stringify(t)}v.prototype.chartHasBeenModified=function(){return this._chartHasBeenModified},v.prototype.chartSizeLimitExceeded=function(){return this._chartSizeLimitExceededDelegate},v.prototype._checkChartLastModified=function(e){null!==this._savingToken&&this._savingToken===e.savingToken||this._chartWidgetCollection.metaInfo.id.value()===e.id&&this._checkChartIsChanged(e.lastModified,"chart.storage")},v.prototype._checkChartIsChanged=function(e,t){var i=this._chartWidgetCollection.metaInfo.lastModified.value();i!==e&&u.logNormal(t+", local lastModified "+i+", server lastModified "+e),i<e?this._chartHasBeenModified.fire():i>e&&u.logWarn("Emitting event about changed chart is skipped due to received the old version")},v.prototype._onPushstreamStatusChanged=function(e){var t=this._lastPushStreamStatus;if(this._lastPushStreamStatus=e,t===l.Open&&(this._lastPushStreadConnectedTime=performance.now()),e===l.Open){var i=performance.now()-this._lastPushStreadConnectedTime,r=(i/1e3).toFixed(3)+"s";if(i<5e3)return void u.logNormal("PushStream was disconnected "+r+", updating last modified time is not required");u.logNormal("PushStream is connected, last connected status was "+r+" ago, request last modified date to detect changes is required");var n=this._chartWidgetCollection.metaInfo.uid.value();if(!n)return;c("/api/v1/charts/"+n+"/",{method:"HEAD"}).then(function(e){if(e.ok){var t=new Date(e.headers.get("last-modified")).valueOf()/1e3;this._checkChartIsChanged(t,"Force request after PushStream is reconnected")}else u.logWarn("Cannot fetch last modified date for chart ("+n+"), status="+e.status)}.bind(this))}},v.prototype.chartAboutToBeSaved=function(){return this._chartAboutToBeSavedDelegate},v.prototype.chartSaved=function(){return this._chartSavedDelegate},v.prototype.whenReadyToSave=function(e){var t=this._chartWidgetCollection.activeChartWidget.value().model().mainSeries();if(t.symbolInfo()&&!t.hasDelayedSymbolIntervalChange())e();else{var i,r=null;i=function(){t.dataEvents().symbolError().unsubscribe(null,r,!0),e()},r=function(){t.dataEvents().symbolResolved().unsubscribe(null,i,!0)},t.dataEvents().symbolResolved().subscribe(null,i,!0),t.dataEvents().symbolError().subscribe(null,r,!0)}},v.prototype.saveToJSON=function(){var e=this._getCommonSavingInfo(!1);return g(e,this._getChartWidgetCollectionState(!1,!0)),e},v.prototype._fillAsyncInfo=function(e,t){var i=JSON.parse(e.content),r=this._chartWidgetCollection;return(t?r.asyncState():r.activeChartWidget.value().asyncState()).then((function(t){return e.content=JSON.stringify(p(i,t)),e}))},v.prototype._getChartWidgetCollectionState=function(e,t,i,r){return e||(t=!0,r=!1),t?this._chartWidgetCollection.state(!!e,i,r):this._chartWidgetCollection.activeChartWidget.value().state(!!e,i,r)},v.prototype._getCommonSavingInfo=function(e){var t={publish_request_id:Math.random().toString(36).substring(2)},i=this._chartWidgetCollection,r=i.activeChartWidget.value(),n=i.metaInfo,o=r.model().mainSeries(),s=o.properties(),a=o.symbolInfo()
;if(n.id.value()&&(t.id=n.id.value()),t.name=n.name.value()||"",t.description=n.description.value()||"",t.resolution=o.properties().interval.value(),t.symbol_type=null!==a&&a.type||"",t.exchange=null!==a&&a.exchange||"",t.listed_exchange=null!==a&&a.listed_exchange||"",null!==a&&o.isSpread()){var l=a.legs[0],c=a.base_name[0];c=c.split(":")[1],t.symbol=l,t.short_name=c,t.expression=a.full_name}else t.symbol=null!==a&&a.ticker||s.symbol.value(),t.short_name=s.shortName.value();if(null!==a){for(var u=[],h=0,d=a.legs.length;h<d;h++)u.push({symbol:a.legs[h],pro_symbol:a.base_name[h]});t.legs=JSON.stringify(u)}else t.legs=JSON.stringify([]);return t.is_realtime=e?"0":"1",t},v.prototype.publishChart=function(e){n("GUI","Publish Chart");var t=this,r={accessType:(e=e||{}).isPrivate||TVSettings.getBool("publishchart.private",!1)?0:1,publishSource:e.publishSource,videoFilename:e.videoFilename,videoDuration:e.videoDuration,videoCam:e.videoCam},o=$(".publish-dropdown-container"),s=$(".publish-chart-button"),a={savePrivacySetting:!e.doNotSavePrivacySetting,onWidget:e.onWidget},l=e.onPublishUrl,c=e.onPublishError;t._ideaPublisher?t._ideaPublisher.openPublication(r,a):Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(18),i.e(19),i.e(30),i.e(34),i.e(46),i.e(50),i.e(59),i.e(89),i.e(112),i.e(116),i.e(117),i.e(175),i.e(0),i.e(16),i.e(25),i.e(42),i.e(54),i.e(82),i.e(80),i.e(101),i.e(110),i.e(167),i.e(291)]).then(function(e){var n=i("M+sa").IdeaPublisher,u=i("MRHJ").IdeasProvider,h=i("4AJk").ChartInfoProvider,d=i("fT+7").CategoriesProvider,p=new h({chartWidgetCollection:t._chartWidgetCollection}),f=new u({publish:function(e,i){return new Promise((function(r,n){var o={closeForm:function(){r()},showError:function(e){n(e)},onPublishUrl:l,onPublishError:c};try{t.onPublish(e,Object.assign({},i,o))}catch(s){n(m)}}))}}),_=new d;t._ideaPublisher=new n({chartInfoProvider:p,ideasProvider:f,categoriesProvider:_,onOpenEditor:function(){o.addClass("disabled")},onMinimizeEditor:function(){o.removeClass("disabled"),s.addClass("inprogress")},onCloseEditor:function(){o.removeClass("disabled"),s.removeClass("inprogress")}}),t._ideaPublisher.openPublication(r,a)}.bind(null,i)).catch(i.oe)},v.prototype.publishScript=function(e,t,i){var r=this;if(r._scriptPublisher)r._scriptPublisher.openPublication(e,t);else{var n=i.ScriptPublisher,o=i.ScriptsProvider,a=i.CategoriesProvider,l=new o({publish:function(e){return new Promise((function(t,i){var n={closeForm:function(){if(e&&e.scriptPublication&&e.scriptPublication.updateScriptIdPart){var i=e.scriptPublication.updateScriptIdPart;s.invalidateCache([i]),window.studyMarket&&window.studyMarket.resetAllPages()}t()},showError:function(e){i(e)}};try{r.onPublish(e,n)}catch(o){i(m)}}))}});r._scriptPublisher=new n({scriptsProvider:l,categoriesProvider:new a}),r._scriptPublisher.openPublication(e,t)}},v.prototype.onPublish=function(e,t){var i=this;if(!i.publishInProgress){var o=t&&t.publishAllLayout,s=i._getCommonSavingInfo(!0),a=!1
;e.scriptPublication&&e.scriptPublication.scriptProtection===TVScript.Access.ACCESS_CLOSED_NEEDS_AUTH&&(a=!0),g(s,this._getChartWidgetCollectionState(!0,o,!0,a)),s.image=JSON.stringify(this._chartWidgetCollection.images({onlyActiveChart:!o})),i._fillAsyncInfo(s,t&&t.publishAllLayout).then((function(t){var i=e.scriptPublication,o=!(!i||!i.updateScriptIdPart),s=new Promise((function(e,t){var n;i?(o?(window.addEventListener("beforeunload",l),n=r.publishNext(i.scriptSource,i.updateScriptIdPart)):n=r.publishNew(i.scriptSource,i.scriptProtection),n.done((function(t){e(t.publishedstudyscript_id)})).fail(t)):e()}));o?s.then((function(i){var r={publishedstudyscript_id:i,description:e.description,tags:e.tags};$.ajax({url:"/script-update/",type:"post",dataType:"text",data:$.extend({},t,r),complete:c})}),c):s.then((function(i){i&&(e.publishedstudyscript_id=i);for(var r=e.tags.split(","),o=e.scriptPublication?"Script":"Idea",s=0;s<r.length;s++)n(o+" Publication",o+" Tag",r[s]);if(e.scriptPublication){var a=e.scriptPublication.scriptProtection;n("Script Publication","Script Visibility",{open_no_auth:"Open",closed_no_auth:"Protected",closed_needs_auth:"Invite Only"}[a])}else{var l=e.is_education?"Education":"Analysis",u=e.is_public?"Public":"Private";n("Idea Publication","Idea Type",l),n("Idea Publication","Idea Strategy",["Neutral","Long","Short"][e.direction]),n("Idea Publication","Idea Privacy",u)}$.ajax({url:"/publishchart/",type:"post",dataType:"text",data:$.extend({},t,e),complete:c})}),c)})),i.publishInProgress=!0,t.onWidget||""!==e.name&&""!==e.description&&e.description.length<=7e4&&e.name.length<=64&&($.cookie("publish_request_id",s.publish_request_id,{path:"/"}),i.hWnd=window.open("/loading/","_blank"))}function l(e){return e.returnValue=window.t("Script may be not updated if you leave the page."),e.returnValue}function c(r){window.removeEventListener("beforeunload",l),i.publishInProgress=!1;var n=r.responseText||r;if("ok:"===n.substr(0,3)){var o=!1;if(t.savePrivacySetting){o=!e.is_public;TVSettings.setValue("publishchart.private",o)}var s=n.substr(3),a=JSON.parse(s);i._chartWidgetCollection.metaInfo.id.value()||i._chartWidgetCollection.metaInfo.id.setValue(a.id),t.closeForm&&t.closeForm(),t.onPublishUrl&&t.onPublishUrl(a.publishUrl,a.uuid),h.emit("onPublishUrl",a.uuid),i._lastPublishUrl=a.publishUrl,i.hWnd&&(i.hWnd.location=a.publishUrl)}else{(413===r.status||/^[\d\s]*request.+large/i.test(n.trim()))&&(n=window.t("This Chart Layout has a lot of objects and can't be published. Please remove the unused objects (drawings/indicators) through the Object Tree to continue publishing."));var c=n||window.t("Error occurred while publishing");t.showError&&t.showError(c,{html:!0}),t.onPublishError&&t.onPublishError(c),i.hWnd&&(i.hWnd.close(),i.hWnd=null)}}},v.prototype._saveLineToolsToStorage=function(){var e=d(),t=this._chartWidgetCollection.lineToolsAndGroupsDTOs(),i=this._chartWidgetCollection.metaInfo.uid.value(),r=Array.from(t.entries()).filter((function(e){var t=e[1];return t.sources.size>0||t.groups.size>0
})).map((function(t){var r=t[0],n=t[1];return e.saveLineToolsAndGroups(i,r,n)}));Promise.all(r).then(()=>{this._chartWidgetCollection.resetLineToolsInvalidated()})},v.prototype._saveChart=function(e,t,i,r,n){this._saveLineToolsToStorage();var s=i,a=r;return this._savingToken=String(Math.random()),e.savingToken=this._savingToken,s=function(e){if(this._savingToken=null,"ok:"===e.substr(0,3)){var s=e.substr(3),a=JSON.parse(s);t.id.value()||(t.id.setValue(a.id),t.uid.setValue(a.uid)),t.lastModified.setValue(a.lastModified),"function"==typeof i&&i({uid:t.uid.value()},a.count||0)}else if("saved_chart_limit_reached"===e||""===e){if("function"==typeof r&&r(),n.noDefaultOnFail)return;o({feature:"savedChartsLimit"})}else"function"==typeof r&&r(),$("#error").html(e);$(window).off("beforeunload.savechart")},a=function(o){if(this._savingToken=null,o&&413===o.status)return this._chartSizeLimitExceededDelegate.fire(),void("function"==typeof r&&r.apply(null,arguments));n.retry?"function"==typeof r&&r.apply(null,arguments):(n.retry=!0,this._saveChart(e,t,i,r,n))},_.saveChart(e.name,e.short_name,e.resolution,e,t,s.bind(this),a.bind(this))},v.prototype.saveChartSilently=function(e,t,i){var r=this._getChartWidgetCollectionState(!1),n=this._chartWidgetCollection.metaInfo;if(f(this._prevChartState,r)[0]&&null!=n.id.value())return this._chartSavedDelegate.fire(!0),void(e&&e(n));var o=this._getCommonSavingInfo(!1);g(o,r),(i=i||{}).chartName&&(o.name=i.chartName),o.name&&0!==o.name.length||!i.defaultChartName||(o.name=i.defaultChartName),o.name?(i.autoSave&&(o.autoSave=!0),$(window).on("beforeunload.savechart",(function(){return window.t("Your chart is being saved, please wait a moment before you leave this page.")})),this._isSaveInProcess=!0,this._chartAboutToBeSavedDelegate.fire(),this._saveChart(o,n,function(){this._chartWidgetCollection.metaInfo.name.setValue(o.name),this._prevChartState=r,this._chartSavedDelegate.fire(!0),this._isSaveInProcess=!1,e&&e(n)}.bind(this),function(){this._chartSavedDelegate.fire(!1),this._isSaveInProcess=!1,t&&t.apply(null,arguments)}.bind(this),i),$(window).off("beforeunload.savechart")):console.warn("Saving chart with empty name is not allowed")},v.prototype.isSaveInProcess=function(){return this._isSaveInProcess},t.ChartSaver=v}).call(this,i("aIyQ"))},"RZo+":function(e,t,i){"use strict";var r={},n={XCBT:"CBOT",XNYM:"NYMEX",XCME:"CME",XCEC:"COMEX"};r.convertSymbolDataToTV=function(e,t,i){return i=2===i||"floor"===i||"pit"===i?"PIT":"GBX",t&&n[t]?{status:"ok",data:{symbol:e,exchange:n[t]+"_"+i}}:{status:"error",data:"Exchange `"+t+"` is not supported"}},e.exports=r},RjiR:function(e,t,i){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")
},n=i("FIi8"),o=i("txPx"),s=i("ogJP"),a=i("GH0z"),l=i("RoXi"),c=i("kcTO"),u=i("nEwK"),h=i("oNU6"),d=i("Wc1E"),p=i("hOqT"),f=i("IWXC"),_=i("kyOc"),m=i("y8Ih"),v=(0,o.getLogger)("QuoteTicker"),g={addDescriptionTitle:!0,changeDirectionDownClass:"down",changeDirectionUpClass:"up",changeDirectionNeutralClass:"neutral",changeInBrackets:!1,changePercentInBrackets:!1,lastPriceTimeInBrackets:!0,rtcTimeInBrackets:!0,clientName:"quote-ticker",dontDyePrice:!1,fallingBg:null,growingBg:null,lastFallingClass:"falling",lastGrowingClass:"growing",quoteSession:null,signNegative:!0,signPositive:!1,customPriceFormatter:null,customTimeFormatter:null,sessionStatusClassSuffix:"--for-ticker",dataModeClassSuffix:"--for-ticker",showInvalidSymbolStatus:!1,indicatorsTooltipType:"custom",lastPriceLastCharSup:!1,lastPriceHighlightDiffOnly:!1,initedHook:void 0,setStateHook:void 0,sfPermissionDeniedHook:void 0,noSuchSymbolHook:void 0},y=["aboard","about","above","abreast","abroad","absent","across","adjacent","after","against","along","alongside","amid","among","an","apropos","apud","around","as","astride","at","atop","bar","before","behind","below","beneath","beside","besides","between","beyond","but","by","chez","circa","come","despite","down","during","except","for","from","in","inside","into","less","like","minus","near","notwithstanding","of","off","on","onto","ontop","opposite","out","outside","over","pace","past","per","post","pre","pro","qua","re","sans","save","short","since","than","through","throughout","to","toward, towards","under","underneath","unlike","until","up","upon","upside","versus","via","vice","with","within","without","worth"];function b(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.enabled=!0,this._symbol=e,this._symbolOriginal=null,this._options=(0,n.deepExtend)({},g,i),!1!==this._options.signNegative&&!0!==this._options.signNegative&&delete this._options.signNegative,i.customPriceFormatter&&(this._customPriceFormatter=i.customPriceFormatter),i.customTimeFormatter&&(void 0!==i.customTimeFormatter.lastPrice||void 0!==i.customTimeFormatter.rtc?this._timeFormatter=i.customTimeFormatter:this._timeFormatter={lastPrice:i.customPriceFormatter,rtc:i.customPriceFormatter}),this._percentFormatter=new a.PercentageFormatter,this._priceFormatter=this._customPriceFormatter||new c.PriceFormatter(100),this._volumeFormatter=new u.VolumeFormatter,this._cache={},this._lastPrice=null,this._lastPriceFormatted="",this._elements={},this._textNodes={},this._setElements(t),this._highlighters={},this._initHighlighters(),this._options.setStateHook&&this.setStateHook(this._options.setStateHook),this.quoteSession=this._options.quoteSession||(0,f.getQuoteSessionInstance)("simple"),this._quoteSessionEventHandler=this.onData.bind(this),setTimeout(this.connect.bind(this),0)}function S(e,t,i,r,n){var o,s=null;function a(){if(o&&(clearTimeout(o),o=void 0),i||t)for(var s=0;s<e.length;s++)e[s].style.background="";if(!i||!t)for(s=0;s<e.length;s++)e[s].classList.remove(n,r)}return{show:function(l){var c=0;if(l!==s){
if(null!==s&&null!==l&&(c=l-s),a(),o=setTimeout(a,750),0<c)if(t)for(var u=0;u<e.length;u++)e[u].style.background=t;else for(u=0;u<e.length;u++)e[u].classList.add(r);else if(c<0)if(i)for(u=0;u<e.length;u++)e[u].style.background=i;else for(u=0;u<e.length;u++)e[u].classList.add(n);null!==l&&(s=l)}},hide:a}}b.prototype._setElements=function(e){var t=this;this._container=e,this._elements.change=this._findElements(e,["js-symbol-change","symbol-change"]),this._elements.changeDirection=this._findElements(e,["js-symbol-change-direction","symbol-change-direction"]),this._elements.extHrsChangeDirection=this._findElements(e,["js-symbol-ext-hrs-change-direction"]),this._elements.changePercent=this._findElements(e,["js-symbol-change-pt","symbol-change-pt"]),this._elements.description=this._findElements(e,["js-symbol-description-name","symbol-description-name"]),this._elements.extHrsChange=this._findElements(e,"js-symbol-ext-hrs-change"),this._elements.extHrsChangePercent=this._findElements(e,"js-symbol-ext-hrs-change-pt"),this._elements.extHrsClose=this._findElements(e,"js-symbol-ext-hrs-close"),this._elements.industry=this._findElements(e,["js-symbol-industry","symbol-industry"]),this._elements.last=this._findElements(e,["js-symbol-last","symbol-last"]),this._elements.sector=this._findElements(e,["js-symbol-sector","symbol-sector"]),this._elements.sessionStatus=this._findElements(e,"js-symbol-session-status"),this._elements.shortName=this._findElements(e,["js-symbol-short-name","symbol-short-name"]),this._elements.updateMode=this._findElements(e,"js-data-mode"),this._elements.updateMode.forEach((function(e){return e.classList.add("i-hidden")})),this._textNodes.change=this._getOrCreateTextNodes(this._elements.change),this._textNodes.changePercent=this._getOrCreateTextNodes(this._elements.changePercent),this._textNodes.extHrsChange=this._getOrCreateTextNodes(this._elements.extHrsChange),this._textNodes.extHrsChangePercent=this._getOrCreateTextNodes(this._elements.extHrsChangePercent),this._textNodes.extHrsClose=this._getOrCreateTextNodes(this._elements.extHrsClose),this._textNodes.last=this._getOrCreateTextNodes(this._elements.last),this._textNodes.open=this._findTextNodes(e,"js-symbol-open"),this._textNodes.eps=this._findTextNodes(e,"js-symbol-eps"),this._textNodes.marketCap=this._findTextNodes(e,"js-symbol-market-cap"),this._textNodes.prevClose=this._findTextNodes(e,"js-symbol-prev-close"),this._textNodes.dividends=this._findTextNodes(e,"js-symbol-dividends"),this._textNodes.priceEarnings=this._findTextNodes(e,"js-symbol-pe"),this._textNodes.volume=this._findTextNodes(e,"js-symbol-volume"),this._textNodes.high=this._findTextNodes(e,"js-symbol-high"),this._textNodes.low=this._findTextNodes(e,"js-symbol-low"),this._textNodes.currency=this._findTextNodes(e,"js-symbol-currency"),this._textNodes.lastPriceTime=this._findTextNodes(e,"js-symbol-lp-time"),this._textNodes.rtcTime=this._findTextNodes(e,"js-symbol-rtc-time"),this._elements.lastHighlight=this._options.lastPriceHighlightDiffOnly?this._elements.last.map((function(e){
return t._appendAndGetNewElement(e,"span")})):this._elements.last,this._textNodes.lastHighlight=this._getOrCreateTextNodes(this._elements.lastHighlight),this._elements.lastSup=this._options.lastPriceLastCharSup?this._elements.lastHighlight.map((function(e){return t._appendAndGetNewElement(e,"sup")})):[],this._textNodes.lastSup=this._getOrCreateTextNodes(this._elements.lastSup)},b.prototype._findElements=function(e,t){var i=(0,s.isArray)(t)?t:[t];return Array.prototype.concat.apply([],i.map((function(t){return Array.prototype.slice.call(e.getElementsByClassName(t))})))},b.prototype._findTextNodes=function(e,t){return this._getOrCreateTextNodes(this._findElements(e,t))},b.prototype._getOrCreateTextNodes=function(e){var t=this;return e.map((function(e){var i=t._getFirstTextNode(e);return i||(i=e.ownerDocument.createTextNode(""),e.appendChild(i)),i}))},b.prototype._appendAndGetNewElement=function(e,t){var i=document.createElement(t);return e.appendChild(i),i},b.prototype._getFirstTextNode=function(e){for(var t=e.childNodes,i=t.length-1;i>=0;i--)if(3===t.item(i).nodeType)return t.item(i);return null},b.prototype.connect=function(e){this._subscribed||(this._subscribedSymbol=e||this._symbol,this.quoteSession.subscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!0)},b.prototype.disconnect=function(){this._subscribed&&(this.quoteSession.unsubscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!1)},b.prototype.onData=function(e,t){this.enabled&&("ok"===e.status?this.successData(e,t):"permission_denied"===e.status?this.onPermissionDenied(e):"error"===e.status&&this.errorData(e))},b.prototype.successData=function(e,t){e.values&&this.setState(e.values,e,t)},b.prototype.onPermissionDenied=function(e){(0,m.isSfQuoteData)(e)?this._options.sfPermissionDeniedHook?this._options.sfPermissionDeniedHook(e,this._symbolOriginal||this._symbol):this.errorData(e):this.downgradeData(e)},b.prototype.errorData=function(e){var t=this;this._options.showInvalidSymbolStatus&&(this.setShortName(this._symbol),this._elements.sessionStatus.map((function(e){return new h.MarketStatusIndicator({classSuffix:t._options.sessionStatusClassSuffix,el:e,data:{values:{current_session:"invalid"}},tooltipType:t._options.indicatorsTooltipType})}))),this._options.noSuchSymbolHook?(this._symbolOriginal&&this.setShortName(this._symbolOriginal),this._options.noSuchSymbolHook.call(this,e,this._symbolOriginal||this._symbol)):v.logWarn("No data for: "+this._symbol)},b.prototype.downgradeData=function(e){var t=e&&e.values&&e.values.alternative,i=this._symbol===t;t&&-1!==t.indexOf(":")&&!i?(this._symbolOriginal=this._symbol,this._symbol=t,this._subscribed=!1,this.connect()):this.errorData(e)},b.prototype.setState=function(e,t,i){var r=this,n=i.values;null==n.pricescale&&null==n.minmov&&null==n.fractional&&null==n.minmove2||(this._priceFormatter=this._customPriceFormatter||new c.PriceFormatter(e.pricescale||100,e.minmov||1,e.fractional,e.minmove2))
;var o=this._options,s=this._percentFormatter,a=this._priceFormatter,l=this._volumeFormatter;n.timezone&&this._timeFormatter&&(this._timeFormatter.lastPrice&&this._timeFormatter.lastPrice.setTimezone(n.timezone),this._timeFormatter.rtc&&this._timeFormatter.rtc.setTimezone(n.timezone));var f=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?"("+e+")":e},_=void 0!==o.signPositiveChange?o.signPositiveChange:o.signPositive,m=function(e){var t=a.format(e,_,void 0,o.signNegative);return f(t,o.changeInBrackets)},g=function(e){var t=s.format(e,_,void 0,o.signNegative);return f(t,o.changePercentInBrackets)},y=a.format.bind(a),b=l.format.bind(l),S=function(e){return null==e?u.PLACE_HOLDER:y(e)};this._setNodesValue(this._textNodes.change,n.change,m),this._setNodesValue(this._textNodes.changePercent,n.change_percent,g),null!=n.change&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.change,this._elements.changePercent),n.change,o.changeUpFontColor,o.changeDownFontColor,o.changeNeutralFontColor),this._setChangeDirection(this._elements.changeDirection,n.change)),this._setNodesValue(this._textNodes.extHrsChange,n.rch,m),this._setNodesValue(this._textNodes.extHrsChangePercent,n.rchp,g),null!=n.rch&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.extHrsChange,this._elements.extHrsChangePercent),n.rch,o.changeUpFontColor,o.changeDownFontColor,o.changeNeutralFontColor),this._setChangeDirection(this._elements.extHrsChangeDirection,n.rch)),this._setNodesValue(this._textNodes.prevClose,n.prev_close_price,y),this._setNodesValue(this._textNodes.dividends,e.dividends_yield,(function(e){return null==e?u.PLACE_HOLDER:s.format(e,o.signPositive,void 0,o.signNegative)}),!0);var w=(0,p.getTranslatedSymbolDescription)(n);if(w&&(w=this._prepareSymbolDescription(w),this._setTextsContent(this._elements.description,w),this._options.addDescriptionTitle))for(var P=0;P<this._elements.description.length;P++)this._elements.description[P].setAttribute("title",w);if((null!=n.short_name||null!=n.exchange)&&e.short_name){var C=e.short_name;"QUANDL"===e.exchange&&void 0!==e.short_name.split("/")[1]&&(C=e.short_name.split("/")[1]+", "+e.short_name.split("/")[0]),this.setShortName(C)}if(this._setLastValue(n.last_price,y),this._setNodesValue(this._textNodes.extHrsClose,n.rtc,y),n.rtc&&this._highlighters.extHrsClose.show(n.rtc),n.industry&&this._setTextsContent(this._elements.industry,e.industry,(function(e){return e})),n.sector&&this._setTextsContent(this._elements.sector,e.sector),this._elements.sessionStatus&&n.current_session&&(this._sessionStatusInstances?this._sessionStatusInstances.forEach((function(e){return e.setStatus(n.current_session)})):this._sessionStatusInstances=this._elements.sessionStatus.map((function(t){return new h.MarketStatusIndicator({classSuffix:r._options.sessionStatusClassSuffix,el:t,short:!0,data:{values:n},quoteSession:r.quoteSession,symbol:e.original_name,manualUpdate:!0,tooltipType:r._options.indicatorsTooltipType})}))),
this._setNodesValue(this._textNodes.open,n.open_price,y),this._setNodesValue(this._textNodes.high,n.high_price,y),this._setNodesValue(this._textNodes.low,n.low_price,y),this._setNodesValue(this._textNodes.eps,e.earnings_per_share_basic_ttm,S,!0),this._setNodesValue(this._textNodes.priceEarnings,e.price_earnings_ttm,S,!0),this._setNodesValue(this._textNodes.marketCap,e.market_cap_basic,b,!0),this._setNodesValue(this._textNodes.volume,e.volume,b,!0),this._setNodesValue(this._textNodes.currency,e.currency_code,null,!0),(n.lp_time||n.timezone&&e.lp_time)&&this._textNodes.lastPriceTime.length&&(this._timeFormatter&&this._timeFormatter.lastPrice?this._setNodesValue(this._textNodes.lastPriceTime,f(this._timeFormatter.lastPrice.format(e.lp_time),this._options.lastPriceTimeInBrackets)):v.logError("last price time field requested with no formatter provided")),(n.rtc_time||n.timezone&&e.rtc_time)&&this._textNodes.rtcTime.length&&(this._timeFormatter&&this._timeFormatter.rtc?this._setNodesValue(this._textNodes.rtcTime,f(this._timeFormatter.rtc.format(e.rtc_time),this._options.rtcTimeInBrackets)):v.logError("rtc time field requested with no formatter provided")),null!=n.last_price)for(P=0;P<this._elements.updateMode.length;P++)this._elements.updateMode[P].classList.remove("i-hidden");this._elements.updateMode&&(n.update_mode||n.update_mode_seconds)&&(this._updateModeInstances?this._updateModeInstances.forEach((function(t){return t.update({values:e})})):this._updateModeInstances=this._elements.updateMode.map((function(t){return new d.DataModeIndicator({classSuffix:r._options.dataModeClassSuffix,el:t,data:{values:e},modeInterval:e.update_mode_seconds,short:!0,tooltipType:r._options.indicatorsTooltipType})}))),this._setStateHook&&this._setStateHook(t.values,i.values),this._lastPrice?this._highlighters.last.show(e.last_price):null===this._lastPrice&&(this._container.classList.add("quote-ticker-inited"),"function"==typeof this._options.initedHook&&this._options.initedHook("last_price"in e)),this._lastPrice=e.last_price},b.prototype._setNodesValue=function(e,t,i,r){if(null!=t||r)for(var n="function"==typeof i?i(t):t,o=0;o<e.length;o++)e[o].nodeValue=n},b.prototype._setTextsContent=function(e,t,i){if(e&&e.length&&t)for(var r="function"==typeof i?i(t):t,n=0;n<e.length;n++)e[n].textContent=r},b.prototype._setLastValue=function(e,t){if(null!=e){var i="function"==typeof t?t(e):String(e);if(i!==this._lastPriceFormatted){var n=this._options.lastPriceHighlightDiffOnly?this._getLastValueStringDiff(this._lastPriceFormatted,i):["",i],o=r(n,2),s=o[0],a=o[1],l=s,c=this._options.lastPriceLastCharSup?[a.slice(0,-1),a.slice(-1)]:[a,""],u=r(c,2),h=u[0],d=u[1];this._options.lastPriceHighlightDiffOnly&&this._setNodesValue(this._textNodes.last,l),this._setNodesValue(this._textNodes.lastHighlight,h),this._setNodesValue(this._textNodes.lastSup,d),this._lastPriceFormatted=i}}},b.prototype._getLastValueStringDiff=function(e,t){if(e===t)return[t,""];for(var i=0;e[i]===t[i];)i++;return[t.slice(0,i),t.slice(i)]},
b.prototype._setChangeFontColor=function(e,t,i,r,n){for(var o=l.PriceColorer.formatSign(t,{up:i,down:r,neutral:n}),s=0;s<e.length;s++)e[s].style.color=o},b.prototype._setChangeDirection=function(e,t){for(var i=0;i<e.length;i++){var r=e[i].classList;r.toggle(this._options.changeDirectionUpClass,t>0),r.toggle(this._options.changeDirectionDownClass,t<0),r.toggle(this._options.changeDirectionNeutralClass,0===t)}},b.prototype.setShortName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._setTextsContent(this._elements.shortName,e)},b.prototype._prepareSymbolDescription=function(e){var t,i=this._getCache("symbol-description:"+e);if(i)return i;return i=(i=(t=e)===t.toUpperCase()?e.toLowerCase():e).replace(/[^\s]\S*/g,(function(e){return function(e){return 1!==e.length&&!~y.indexOf(e)}(e)?(0,_.capitalizeFirstLetter)(e):e})),i=(0,_.capitalizeFirstLetter)(i),this._setCache("symbol-description:"+e,i),i},b.prototype._initHighlighters=function(){this._highlighters.last=new S(this._elements.lastHighlight,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass),this._highlighters.extHrsClose=new S(this._elements.extHrsClose,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass)},b.prototype.disable=function(){this.enabled=!1,this.disconnect()},b.prototype.enable=function(){this.enabled=!0,this.connect()},b.prototype.setStateHook=function(e){null===e&&this._setStateHook?delete this._setStateHook:"function"==typeof e&&(this._setStateHook=e)},b.prototype._setCache=function(e,t){null==t?delete this._cache[e]:this._cache[e]=t},b.prototype._getCache=function(e){return this._cache&&this._cache[e]},e.exports.QuoteTicker=b},RoXi:function(e,t,i){"use strict";i.r(t),i.d(t,"PriceColorer",(function(){return r}));i("P5fv");var r,n=i("9uLv");!function(e){function t(e,t){return 0===e?t&&void 0!==t.neutral?t.neutral:n.color.black70:e>0?t&&void 0!==t.up?t.up:n.color.success:t&&void 0!==t.down?t.down:n.color.danger}e.formatSign=t,e.formatDiff=function(e,i){return t(i-e)},e.domDifference=function(e,t,i,r,n){function o(e){var t=document.createElement("span");return t.innerHTML=e,t}if(void 0===i&&(i=0),void 0===r&&(r=""),void 0===n&&(n=""),!i)return $(o(e));var s=e+"",a=t+"",l=null;if(s.length===a.length){for(var c=0;c<s.length;c++)if(s.charAt(c)!==a.charAt(c)){l=c;break}}else l=Number("0");if(null===l)return $(o(s));var u=o(s.substr(0,l)),h=document.createElement("span");return h.className=i<0?r:n,h.appendChild(o(s.substr(l))),$(u).add(h)}}(r||(r={}))},S48P:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.58 12.1A3.86 3.86 0 0 0 9 6.75a3.87 3.87 0 0 0-3.58 5.33 7.74 7.74 0 0 1 7.16 0zM3.64 9.93l-2.3-.62.37-1.38 2.3.62-.37 1.38zM6.1 6.07L5.07 3.92l1.3-.6 1 2.15-1.29.6zM10.62 5.47l1-2.16 1.3.6-1.01 2.16-1.3-.6zM13.99 8.55l2.3-.62.36 1.38-2.3.62L14 8.55z"/></svg>'},S8xo:function(e,t,i){"use strict";i.r(t),
i.d(t,"MouseEventHandler",(function(){return l}));i("EsMY");var r=i("qFKp"),n=i("Eyy1"),o=i("GUQs"),s=i("VaSN"),a=r.isSafari?"click":"auxclick",l=function(){function e(e,t,i){var r=this;this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._touchMoveStartPosition=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddlePoint=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._onFirefoxOutsideMouseUp=function(e){r._mouseUpHandler(e)},this._onMobileSafariDoubleClick=function(e){if(r._firesTouchEvents(e)){var t=r._makeCompatEvent(e);if(++r._tapCount,r._tapTimeoutId&&r._tapCount>1)r._touchMouseMoveWithDownInfo(u(e),r._tapPosition).manhattanDistance<30&&!r._cancelTap&&r._processTouchEvent(t,r._handler.doubleTapEvent),r._resetTapTimeout()}else{t=r._makeCompatEvent(e);if(++r._clickCount,r._clickTimeoutId&&r._clickCount>1)r._touchMouseMoveWithDownInfo(u(e),r._clickPosition).manhattanDistance<5&&!r._cancelClick&&r._processMouseEvent(t,r._handler.mouseDoubleClickEvent),r._resetClickTimeout()}},this._target=e,this._handler=t,this._options=i,this._init()}return e.prototype.destroy=function(){null!==this._unsubscribeOutsideMouseEvents&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),null!==this._unsubscribeOutsideTouchEvents&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),null!==this._unsubscribeMobileSafariEvents&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},e.prototype._mouseEnterHandler=function(e){var t=this;this._unsubscribeMousemove&&this._unsubscribeMousemove();var i=this._mouseMoveHandler.bind(this);if(this._unsubscribeMousemove=function(){t._target.removeEventListener("mousemove",i)},this._target.addEventListener("mousemove",i),!this._firesTouchEvents(e)){var r=this._makeCompatEvent(e);this._processMouseEvent(r,this._handler.mouseEnterEvent)}},e.prototype._resetClickTimeout=function(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,
this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._resetTapTimeout=function(){null!==this._tapTimeoutId&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._mouseMoveHandler=function(e){if(!this._mousePressed&&null===this._touchMoveStartPosition&&!this._firesTouchEvents(e)){var t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handler.mouseMoveEvent)}},e.prototype._touchMoveHandler=function(e){if(this._lastTouchEventTimeStamp=d(e),null===this._startPinchMiddlePoint&&!this._preventTouchDragProcess){this._pinchPrevented=!0;var t=this._touchMouseMoveWithDownInfo(u(e),Object(n.ensureNotNull)(this._touchMoveStartPosition)),i=t.xOffset,r=t.yOffset,s=t.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(s<5)){if(!this._touchMoveExceededManhattanDistance){var a=.5*i,l=r>=a&&!this._options.treatVertTouchDragAsPageScroll,c=a>r&&!this._options.treatHorzTouchDragAsPageScroll;l||c||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}if(!this._preventTouchDragProcess){var h=this._makeCompatEvent(e);this._processTouchEvent(h,this._handler.touchMoveEvent),Object(o.a)(e)}}}},e.prototype._mouseMoveWithDownHandler=function(e){if(0===e.button&&(this._touchMouseMoveWithDownInfo(e,Object(n.ensureNotNull)(this._mouseMoveStartPosition)).manhattanDistance>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick)){var t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handler.pressedMouseMoveEvent)}},e.prototype._touchMouseMoveWithDownInfo=function(e,t){var i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return{xOffset:i,yOffset:r,manhattanDistance:i+r}},e.prototype._touchEndHandler=function(e){this._lastTouchEventTimeStamp=d(e),this._clearLongTapTimeout(),this._touchMoveStartPosition=null,this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var t=this._makeCompatEvent(e);(this._processTouchEvent(t,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId&&this._tapCount>1)?(this._touchMouseMoveWithDownInfo(u(e),this._tapPosition).manhattanDistance<30&&!this._cancelTap&&this._processTouchEvent(t,this._handler.doubleTapEvent),this._resetTapTimeout()):this._cancelTap||this._processTouchEvent(t,this._handler.tapEvent);0===this._tapCount&&Object(o.a)(e),0===e.touches.length&&this._longTapActive&&(this._longTapActive=!1,Object(o.a)(e))},e.prototype._mouseUpHandler=function(e){if(0===e.button){var t=this._makeCompatEvent(e);if(this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),r.isFF)this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp);if(!this._firesTouchEvents(e))if(this._processMouseEvent(t,this._handler.mouseUpEvent),++this._clickCount,
this._clickTimeoutId&&this._clickCount>1)this._touchMouseMoveWithDownInfo(u(e),this._clickPosition).manhattanDistance<5&&!this._cancelClick&&this._processMouseEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout();else this._cancelClick||this._processMouseEvent(t,this._handler.mouseClickEvent)}},e.prototype._clearLongTapTimeout=function(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},e.prototype._touchStartHandler=function(e){this._lastTouchEventTimeStamp=d(e);var t=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartPosition=u(e),this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._touchMoveHandler.bind(this),r=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){t.removeEventListener("touchmove",i),t.removeEventListener("touchend",r)},t.addEventListener("touchmove",i,{passive:!1}),t.addEventListener("touchend",r,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),240);var n=this._makeCompatEvent(e);this._processTouchEvent(n,this._handler.touchStartEvent),this._tapTimeoutId||(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapPosition=u(e))},e.prototype._wheelClickHandler=function(e){if(1===e.button&&!this._firesTouchEvents(e)){var t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handler.wheelClickEvent)}},e.prototype._mouseDownHandler=function(e){if(0===e.button){var t=this._target.ownerDocument.documentElement;r.isFF&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartPosition=u(e),this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);if(this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",n)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",n),this._mousePressed=!0,!this._firesTouchEvents(e)){var o=this._makeCompatEvent(e);this._processMouseEvent(o,this._handler.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickPosition=u(e))}}},e.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,i=function(t){e._handler.mouseDownOutsideEvent&&(t.target&&e._target.contains(t.target)||e._handler.mouseDownOutsideEvent())};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),
t.addEventListener("touchstart",i,{passive:!0}),r.CheckMobile.iOS()&&r.isSafari&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("contextmenu",this._contextMenuHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),Object(o.b)(this._target),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._target.addEventListener(a,this._wheelClickHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",(function(){}),{passive:!1})},e.prototype._initPinch=function(){var e=this;void 0===this._handler.pinchStartEvent&&void 0===this._handler.pinchEvent&&void 0===this._handler.pinchEndEvent||(this._target.addEventListener("touchstart",(function(t){return e._checkPinchState(t.touches)}),{passive:!0}),this._target.addEventListener("touchmove",(function(t){if(2===t.touches.length&&null!==e._startPinchMiddlePoint&&void 0!==e._handler.pinchEvent){var i=h(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(e._startPinchMiddlePoint,i),Object(o.a)(t)}}),{passive:!1}),this._target.addEventListener("touchend",(function(t){e._checkPinchState(t.touches)})))},e.prototype._checkPinchState=function(e){1===e.length&&(this._pinchPrevented=!1),2!==e.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},e.prototype._startPinch=function(e){var t=this._target.getBoundingClientRect()||{left:0,top:0};this._startPinchMiddlePoint={x:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,y:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this._startPinchDistance=h(e[0],e[1]),void 0!==this._handler.pinchStartEvent&&this._handler.pinchStartEvent(),this._clearLongTapTimeout()},e.prototype._stopPinch=function(){null!==this._startPinchMiddlePoint&&(this._startPinchMiddlePoint=null,void 0!==this._handler.pinchEndEvent&&this._handler.pinchEndEvent())},e.prototype._mouseLeaveHandler=function(e){if(this._unsubscribeMousemove&&this._unsubscribeMousemove(),!this._firesTouchEvents(e)){var t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handler.mouseLeaveEvent)}},e.prototype._longTapHandler=function(e){var t=this._makeCompatEvent(e);this._processTouchEvent(t,this._handler.longTapEvent),this._processTouchEvent(t,this._handler.touchContextMenuEvent),this._cancelTap=!0,this._longTapActive=!0},e.prototype._contextMenuHandler=function(e){if(Object(o.a)(e),null===this._touchMoveStartPosition&&!this._firesTouchEvents(e)){var t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handler.contextMenuEvent),this._cancelClick=!0}},e.prototype._firesTouchEvents=function(e){return e.sourceCapabilities&&void 0!==e.sourceCapabilities.firesTouchEvents?e.sourceCapabilities.firesTouchEvents:d(e)<this._lastTouchEventTimeStamp+500},e.prototype._processTouchEvent=function(e,t){
Object(s.setLastEventIsTouch)(!0),t&&t.call(this._handler,e)},e.prototype._processMouseEvent=function(e,t){"mouseleave"!==e.srcType&&Object(s.setLastEventIsTouch)(!1),t&&t.call(this._handler,e)},e.prototype._makeCompatEvent=function(e){var t=c(e),i=this._target.getBoundingClientRect()||{left:0,top:0};return{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,localX:t.clientX-i.left,localY:t.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,isTouch:!e.type.startsWith("mouse")&&"contextmenu"!==e.type&&"click"!==e.type,srcType:e.type,target:t.target,view:e.view,preventDefault:function(){"touchstart"!==e.type&&Object(o.a)(e)}}},e}();function c(e){return"touches"in e&&e.touches.length?e.touches[0]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0]:e}function u(e){var t=c(e);return{x:t.pageX,y:t.pageY}}function h(e,t){var i=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(i*i+r*r)}function d(e){return e.timeStamp||performance.now()}},SNmj:function(e,t,i){"use strict";var r,n=(r={},{suggest:function(e){var t=$.ajax({url:"/pubscripts-suggest-json/",type:"GET",data:{search:e},dataType:"json"});return t.done((function(e){if(e&&e.results)for(var t=0;t<e.results.length;t++)r[e.results[t].scriptIdPart]=TradingView.clone(e.results[t])})),t},isScriptStrategy:function(e){return e.extra&&"strategy"===e.extra.kind},info:function(e,t=!1){for(var i=$.Deferred(),n=[],o=[],s=0;s<e.length;s++){var a=e[s];r[a]?n.push(TradingView.clone(r[a])):o.push(a)}if(!o.length)return i.resolve(n).promise();var l={scriptIdPart:o.join(","),visible_only:!t||void 0};return $.ajax({url:"/pubscripts-get/",type:"POST",data:l,dataType:"json"}).done((function(e){for(var t in e=e||[]){var o=e[t];r[o.scriptIdPart]=TradingView.clone(o),n.push(o)}i.resolve(n)})).fail((function(){i.reject()})),i},invalidateCache:function(e){e.forEach((function(e){delete r[e]}))},cleanCache:function(){r=[]}});e.exports=n},Si3H:function(e,t,i){"use strict";i.r(t);var r=i("Eyy1"),n=i("0YCj"),o=i.n(n),s=i("ogJP"),a=function(){function e(){}return e.prototype.targetMetaInfoVersion=function(){return 47},e.prototype.migrateMetaInfo=function(e){var t=e,i=e;if(i._metainfoVersion=47,t.defaults&&void 0!==t.defaults.precision){var r=t.defaults&&t.defaults.precision,n=Object(s.isNumber)(r)?r:parseInt(r);0===n?i.format={type:"volume"}:isFinite(n)?i.format={type:"price",precision:n}:i.format={type:"inherit"},delete t.defaults.precision}else i.format={type:"inherit"}},e.prototype.migratePropState=function(e){},e}(),l=i("mrSG"),c=function(){function e(){}return e.prototype.targetMetaInfoVersion=function(){return 50},e.prototype.migrateMetaInfo=function(e){var t=e,i=e;if(i._metainfoVersion=50,void 0!==t.defaults&&void 0!==t.defaults.ohlcPlots&&void 0!==t.ohlcPlots)for(var n=t.ohlcPlots,o=t.defaults.ohlcPlots,s=Object(r.ensureDefined)(Object(r.ensureDefined)(i.defaults).ohlcPlots),a=0,c=Object.keys(o);a<c.length;a++){var u=c[a],h=o[u];if("ohlc_candles"===h.plottype){var d=!1,p=n[u]
;void 0!==p&&(d=!!p.drawBorder,delete p.drawBorder),s[u]=Object(l.__assign)({borderColor:"#000000",drawBorder:d},h)}}},e.prototype.migratePropState=function(e){},e}();i.d(t,"migrateMetaInfoAndPropState",(function(){return h}));var u=[new a,new c];function h(e,t){var i=o.a.versionOf(e),n=e;void 0===n._serverMetaInfoVersion&&(n._serverMetaInfoVersion=i),u.forEach((function(n){i<0||i>=n.targetMetaInfoVersion()||(n.migrateMetaInfo(e),void 0!==t&&n.migratePropState(t),Object(r.assert)(e._metainfoVersion===n.targetMetaInfoVersion()))}))}u.sort((function(e,t){return e.targetMetaInfoVersion()-t.targetMetaInfoVersion()}))},SqfW:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));var r=i("mrSG"),n=i("tqok"),o=i("hsV8");function s(e,t){if(e.index>=t.length)return null;var i=t[e.index];return i===n.INVALID_TIME_POINT_INDEX?null:{startPrice:e.startPrice,endPrice:e.endPrice,index:i,extendTop:e.extendTop,extendBottom:e.extendBottom}}function a(e,t,i){var n=Object(o.ensureTimePointIndexIndex)(i.indexOf(e.index));return Object(r.__assign)(Object(r.__assign)({id:t},e),{index:n})}},Ss5c:function(e,t,i){"use strict";var r=i("Eyy1").ensureDefined,n=i("aO4+").Point,o=i("4TVt").LineToolPriceAxisView,s=i("fJhV").LineDataSourceTimeAxisView,a=i("mMWL"),l=i("LxhU"),c=l.Interval,u=l.ResolutionKind,h=i("pPtI").getServerInterval,d=i("txPx").getLogger("Chart.LineDataSource"),p=i("FQhm"),f=i("aIyQ"),_=i("tc+8"),m=i("hayr").propertyPages,v=i("WkOR").areEqualSymbols,g=i("Kxc7"),y=i("oOPW").createGoProDialog,b=i("0dm4").canPlaceAlertOnResolution,S=i("ZF9k").showGoProAlertsOnSecondsDialog,w=i("JUY+").getPriceAlertsDispatcher,P=i("JUY+").getPriceAlertsDispatcherIfExists,C=i("ytGH").LineToolWidthsProperty,T=g.enabled("datasource_copypaste"),x=i("ng+v").LineDataSourceBase;function I(e,t){x.call(this,e),this._properties=t,this._pointAdded=new f,this._pointChanged=new f,this._onTemplateApplying=new f,this._onTemplateApplied=new f,this._onIsActualIntervalChange=new f,this._fixedPoints=[],this._currentPointsetId=null,this._properties.hasChild("symbol")||this._properties.addChild("symbol",new _(e.mainSeries().symbol())),this._properties.hasChild("interval")||this._properties.addChild("interval",new _(e.mainSeries().interval())),this._sourceHiddenPrevValue=!1,this._sourceHiddenChangedTimeoutId=null,this.calcIsActualSymbol(),this._properties.intervalsVisibilities.listeners().subscribe(this,I.prototype.calcIsActualSymbol);var i=this;if(this._properties.listeners().subscribe(this,(function(){i.propertiesChanged()})),this._createPointsProperties(),this.m_priceAxisViews=[],this.m_timeAxisViews=[],this.pointsCount()>0)for(var r=0;r<this.pointsCount();r++)this.m_priceAxisViews.push(this.createPriceAxisView(r)),this.m_timeAxisViews.push(new s(this,r));this._properties.visible.listeners().subscribe(this,(function(e){var t=!1===a.hideAllDrawings().value();e.value()?e.value()&&t&&p.emit("drawing_event",this._id,"show"):(i._model.selection().isSelected(this)&&i._model.selectionMacro((function(e){e.removeSourceFromSelection(i)
})),t&&p.emit("drawing_event",this._id,"hide")),i._onSourceHiddenMayChange()})),a.hideAllDrawings().subscribe(this,this._onSourceHiddenMayChange),this.customization=this.customization||{forcePriceAxisLabel:!1,disableSelection:!1,disableErasing:!1,disableSave:!1,showInObjectsTree:!0},this._syncStateExclusions=[],this._definitionsViewModel=null,this._isDestroyed=!1,this._properties.hasChild("linewidth")?this._widthsProperty=new C([this._properties.child("linewidth")]):this._widthsProperty=null,this._syncLineStyleMuted=!1}inherit(I,x),I.prototype.widthsProperty=function(){return this._widthsProperty},I.prototype.pointAdded=function(){return this._pointAdded},I.prototype.pointChanged=function(){return this._pointChanged},I.PointPriceProperty=function(e,t){_.call(this),this._lineSource=e,this._pointIndex=t,e.pointAdded().subscribe(this,(function(e){this._pointIndex===e&&this._listeners.fire(this)})),e.pointChanged().subscribe(this,(function(e){this._pointIndex===e&&this._listeners.fire(this)}))},inherit(I.PointPriceProperty,_),I.PointPriceProperty.prototype.value=function(){var e=this._lineSource.points()[this._pointIndex].price,t=this._lineSource.ownerSource().formatter();return t.parse(t.format(e)).value},I.PointPriceProperty.prototype.setValue=function(e){var t=this._lineSource.points()[this._pointIndex];t.price=parseFloat(e),this._lineSource.setPoint(this._pointIndex,t),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},I.prototype.enableCurrentIntervalVisibility=function(){var e=c.parse(this._model.mainSeries().interval());if(e.isSeconds())if(e.multiplier()<60){this.properties().intervalsVisibilities.seconds.setValue(!0);var t=Math.min(this.properties().intervalsVisibilities.secondsFrom.value(),e.multiplier());this.properties().intervalsVisibilities.secondsFrom.setValue(t);var i=Math.max(this.properties().intervalsVisibilities.secondsTo.value(),e.multiplier());this.properties().intervalsVisibilities.secondsTo.setValue(i)}else e=new c(u.Minutes,e.multiplier()/60);if(e.isMinutes())if(e.multiplier()<60){this.properties().intervalsVisibilities.minutes.setValue(!0);t=Math.min(this.properties().intervalsVisibilities.minutesFrom.value(),e.multiplier());this.properties().intervalsVisibilities.minutesFrom.setValue(t);i=Math.max(this.properties().intervalsVisibilities.minutesTo.value(),e.multiplier());this.properties().intervalsVisibilities.minutesTo.setValue(i)}else{var r=Math.floor(e.multiplier()/60);this.properties().intervalsVisibilities.hours.setValue(!0);var n=Math.min(this.properties().intervalsVisibilities.hoursFrom.value(),r);this.properties().intervalsVisibilities.hoursFrom.setValue(n);var o=Math.max(this.properties().intervalsVisibilities.hoursTo.value(),r);this.properties().intervalsVisibilities.hoursTo.setValue(o)}if(e.isDays()){this.properties().intervalsVisibilities.days.setValue(!0)
;var s=Math.min(this.properties().intervalsVisibilities.daysFrom.value(),e.multiplier());this.properties().intervalsVisibilities.daysFrom.setValue(s);var a=Math.max(this.properties().intervalsVisibilities.daysTo.value(),e.multiplier());this.properties().intervalsVisibilities.daysTo.setValue(a)}e.isWeeks()&&this.properties().intervalsVisibilities.weeks.setValue(!0),e.isMonths()&&this.properties().intervalsVisibilities.months.setValue(!0)},I.prototype.getType=function(){return TradingView.className(this.constructor)},I.prototype.getConstructor=function(){return this._constructor||null},I.prototype.isActualSymbol=function(){return this._isActualSymbol},I.prototype.isActualCurrency=function(){return this._isActualCurrency},I.prototype.isActualInterval=function(){return this._isActualInterval},I.prototype.onIsActualIntervalChange=function(){return this._onIsActualIntervalChange},I.prototype.isSavedInChart=function(e){return!this.customization.disableSave},I.prototype.setSavingInChartEnabled=function(e){this.customization.disableSave=!e},I.prototype.showInObjectTree=function(){return this.customization.showInObjectsTree},I.prototype.isAvailableInFloatingWidget=function(){return!0},I.prototype.setShowInObjectsTreeEnabled=function(e){this.customization.showInObjectsTree=e},I.prototype.isSelectionEnabled=function(){return!this.customization.disableSelection},I.prototype.setSelectionEnabled=function(e){this.customization.disableSelection=!e},I.prototype.visibilityKeyByInterval=function(e){var t,i=c.parse(e);return I.IntervalsVisibilities.forEach((function(e){e.kind===i.kind()&&e.from<=i.multiplier()&&e.to>=i.multiplier()&&(t=e.key)})),t},I.prototype.calcIsActualSymbol=function(){var e=this._properties.symbol,t=this._model.mainSeries(),i=e.value();if(this._isActualSymbol=t.symbolSameAsCurrent(i),this._isActualSymbol){var r=t.symbol();v(i,r)||(d.logWarn('Possible drawing "migrating" detected from "'+i+'" to "'+r+'"'),d.logWarn("Series symbolInfo: "+JSON.stringify(t.symbolInfo())),d.logWarn((new Error).stack)),e.setValue(r)}this.calcIsActualInterval(),this.calcIsActualCurrency(),this._onSourceHiddenMayChange()},I.prototype.calcIsActualCurrency=function(){this._isActualCurrency=!0,this._onSourceHiddenMayChange()},I.prototype.calcIsActualInterval=function(){var e=this._isActualInterval,t=this._properties,i=this._model.mainSeries(),r=c.parse(i.interval()),n=t.intervalsVisibilities;if(this._isActualInterval=!1,r.isSeconds()&&r.multiplier()<60){var o=n.seconds.value(),s=n.secondsFrom.value(),a=n.secondsTo.value();this._isActualInterval=o&&r.multiplier()>=s&&r.multiplier()<=a}if(r.isSeconds()&&r.multiplier()>=60){var l=Math.floor(r.multiplier()/60);o=n.minutes.value(),s=n.minutesFrom.value(),a=n.minutesTo.value();this._isActualInterval=o&&l>=s&&l<=a}if(r.isMinutes()&&r.multiplier()<60){o=n.minutes.value(),s=n.minutesFrom.value(),a=n.minutesTo.value();this._isActualInterval=o&&r.multiplier()>=s&&r.multiplier()<=a}if(r.isMinutes()&&r.multiplier()>=60){var u=Math.floor(r.multiplier()/60);o=n.hours.value(),s=n.hoursFrom.value(),
a=n.hoursTo.value();this._isActualInterval=o&&u>=s&&u<=a}if(r.isDays()){o=n.days.value(),s=n.daysFrom.value(),a=n.daysTo.value();this._isActualInterval=o&&r.multiplier()>=s&&r.multiplier()<=a}if(r.isWeeks()&&(this._isActualInterval=n.weeks.value()),r.isMonths()&&(this._isActualInterval=n.months.value()),r.isRange()&&(this._isActualInterval=n.ranges.value()),!this._isActualInterval&&this._model.selection().isSelected(this)){var h=this;this._model.selectionMacro((function(e){e.removeSourceFromSelection(h)}))}this._isActualInterval!==e&&this._onIsActualIntervalChange.fire(),this._onSourceHiddenMayChange()},I.PointIndexProperty=function(e,t){_.call(this),this._lineSource=e,this._pointIndex=t},inherit(I.PointIndexProperty,_),I.PointIndexProperty.prototype.value=function(){return this._lineSource.points()[this._pointIndex].index},I.PointIndexProperty.prototype.setValue=function(e){var t=this._lineSource.points()[this._pointIndex];t.index=e,this._lineSource.setPoint(this._pointIndex,t),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},I.prototype._syncMultichartState=function(){var e={points:this._timePoint,interval:this._model.mainSeries().interval()};this.linkKey&&this.isSynchronizable()&&a.finishChangingLineTool({model:this._model,linkKey:this.linkKey,symbol:this._model.mainSeries().symbol(),finalState:e})},I.prototype._createPointProperty=function(e){var t=this._pointsProperty.points;t.addProperty(e);var i=t[e];i.addChild("price",new I.PointPriceProperty(this,e)),i.addChild("bar",new I.PointIndexProperty(this,e))},I.prototype._createPointsProperties=function(){this._pointsProperty=new _,this._pointsProperty.addChild("points",new _);for(var e=0;e<this.pointsCount();e++)this._createPointProperty(e)},I.prototype.priceScale=function(){return this._ownerSource?this._ownerSource.m_priceScale:null},I.prototype.symbol=function(){return this._properties.symbol.value()},I.prototype.properties=function(){return this._properties},I.prototype.isSavedInStudyTemplates=function(){return!1},I.prototype.state=function(e){var t={type:TradingView.className(this.constructor),id:this.id(),state:this.properties().state(this._propertiesStateExclusions()),points:this._timePoint,zorder:this.zorder(),linkKey:this.linkKey};return delete t.state.points,e&&(t.indexes=this._points),this.ownerSource()&&(t.ownerSource=this.ownerSource().id()),this.isFixed()&&(t.positionPercents=this._positionPercents||this.calcPositionPercents()),"version"in this&&1!==this.version&&(t.version=this.version),this.hasAlert.value()&&(t.alertId=this._alertId),t},I.prototype._propertiesStateExclusions=function(){return null},I.prototype.template=function(){return this.properties().preferences()},I.prototype.applyTemplate=function(e){this._onTemplateApplying.fire(e),this._applyTemplateImpl(e),this.calcIsActualSymbol(),this.updateAllViews(),this.model().lightUpdate(),this._onTemplateApplied.fire()},
I.prototype._applyTemplateImpl=function(e){var t=this.properties();t.mergePreferences(e),t.saveDefaults(),this.propertiesChanged()},I.prototype.clearData=function(){this._points=[]},I.prototype.currentPointsetId=function(){return"pointset_"+this._currentPointsetId},I.prototype.stop=function(){this.clearServerPoints()},I.prototype.isStarted=function(){return null!==this._currentPointsetId},I.prototype.restart=function(){this.isFixed()||(this._currentPointsetId=null,this.createServerPoints())},I.prototype.finsih=function(){},I.prototype.tryCreateServerPoints=function(){this.isFixed()||this.isSourceHidden()||null===this._currentPointsetId&&this.createServerPoints()},I.prototype.denormalizeTimePoints=function(){for(var e=[],t=0;t<this._timePoint.length;t++){var i=this._model.timeScale().denormalizeTimePoint(this._timePoint[t]);if(void 0===i){e=[];break}e.push({index:i,price:this._timePoint[t].price})}e.length>0&&(this._points=e)},I.prototype.restorePoints=function(e,t,i){this._timePoint=e,this._points=t,i||this.denormalizeTimePoints()},I.prototype.restoreExternalPoints=function(e){this.properties().interval.setValue(e.interval),this._timePoint=e.points,this.isActualSymbol()?this.createServerPoints():this.clearServerPoints()},I.prototype.restoreExternalState=function(e){this.properties().merge(e)},I.prototype.restorePositionPercents=function(e){this._positionPercents=e},I.prototype.getLinkKey=function(){return this.linkKey||null},I.prototype.updateAllViewsAndRedraw=function(){this.updateAllViews(),this._model.updateSource(this)},I.prototype.propertiesChanged=function(e){this.calcIsActualInterval(),this.updateAllViewsAndRedraw(),e||this._syncLineStyleIfNeeded()},I.prototype._syncLineStyleIfNeeded=function(){if(!this._syncLineStyleMuted&&this.linkKey){var e=this.properties().state(this._syncStateExclusions);delete e.interval,a.changeLineStyle({linkKey:this.linkKey,state:e,model:this._model})}},I.prototype._muteSyncLineStyle=function(){this._syncLineStyleMuted=!0},I.prototype._unmuteSyncLineStyleWithoutApplyingChanges=function(){this.propertiesChanged(),this._syncLineStyleMuted=!1},I.prototype.points=function(){for(var e=[],t=0;t<this._points.length;t++){var i=this._points[t];e.push({index:i.index,price:i.price,time:i.time})}return this._lastPoint&&e.push({index:this._lastPoint.index,price:this._lastPoint.price,time:this._lastPoint.time}),this._currentMovingPoint&&this._startMovingPoint&&this.correctPoints(e),e},I.prototype.normalizedPoints=function(){return this._timePoint},I.prototype.axisPoints=function(){return this.points()},I.prototype.fixedPoints=function(){var e=[];if(this._positionPercents&&!this.priceScale().isEmpty())for(var t=0;t<this._positionPercents.length;t++){var i=this._positionPercents[t],r=this._model.timeScale().width()*i.x,o=this.priceScale().height()*i.y;e.push(new n(r,o))}else for(t=0;t<this._fixedPoints.length;t++)e.push(this._fixedPoints[t].clone());return this._lastPoint&&e.push(this._lastPoint.clone()),this._currentMovingPoint&&this._startMovingPoint&&this.correctFixedPoints(e),e},
I.prototype._preparePoint=function(e,t){var i=e;return t&&t.shift()&&this.points().length>=2&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(i,this.points()[this.points().length-2]),i},I.prototype.addPoint=function(e,t,i){var r=this._preparePoint(e,t);return this._addPointIntenal(r,t,i)},I.prototype._addPointIntenal=function(e,t,i){this._points.push(e);var r=this._points.length===this.pointsCount();return r?(this._lastPoint=null,i||(this.normalizePoints(),this.createServerPoints())):this._lastPoint=e,this._pointAdded.fire(this._points.length-1),r},I.prototype.addFixedPoint=function(e){this._fixedPoints.push(e);var t=this._fixedPoints.length===this.pointsCount();return t&&this.calcPositionPercents(),t},I.prototype.calcPositionPercents=function(){if(!this.priceScale()||this.priceScale().isEmpty())return[];this._positionPercents=[];for(var e=0;e<this._fixedPoints.length;e++){var t=this._fixedPoints[e],i=t.x/this._model.timeScale().width(),r=t.y/this.priceScale().height();this._positionPercents.push({x:i,y:r})}return this._positionPercents},I.prototype.calcMiddlePoint=function(e,t){return new n((e.x+t.x)/2,(e.y+t.y)/2)},I.prototype.getPointByPosition=function(e,t,i,r){return[t,i,r][e]},I.prototype.restoreFixedPoints=function(){this._fixedPoints=this.fixedPoints()},I.prototype.onData=function(e){e.params.customId===this.currentPointsetId()&&this._onPointsetUpdated(e.params.plots)},I.prototype._onPointsetUpdated=function(e){if(0!==e.length){for(var t=0;t<e.length;t++){var i=e[t],r=this._timePoint[i.index],n={index:i.value[0],time:new Date(1e3*i.value[1]),price:r.price};this._points.length<=i.index?(this._points.push(n),this._pointAdded.fire(this._points.length-1)):(this._points[i.index]=n,this._pointChanged.fire(i.index))}this.checkAlert&&this.checkAlert(),this.updateAllViewsAndRedraw()}},I.prototype.startChanging=function(e,t){e<this.m_priceAxisViews.length&&this.m_priceAxisViews[e].setActive(!0),e<this.m_timeAxisViews.length&&this.m_timeAxisViews[e].setActive(!0),this._properties.lastUpdateTime.setValue((new Date).valueOf())},I.prototype.setPoint=function(e,t,i){if(i&&i.shift()&&this._properties.snapTo45Degrees){var r=0===e?1:e-1;this._snapPoint45Degree(t,this.points()[r])}this._points[e]=t,this._pointChanged.fire(e),this.normalizePoints()},I.prototype.startMoving=function(e,t,i){this.isFixed()&&this.restoreFixedPoints(),this._startMovingPoint=this.isFixed()?e.screen:e.logical,this._properties.lastUpdateTime.setValue((new Date).valueOf())},I.prototype.move=function(e,t,i){var r;r=i&&(i.shiftOnly()||i.controlShift())?this.isFixed()?this._alignScreenPointHorizontallyOrVertically(e.screen):this._alignPointHorizontallyOrVertically(e.logical):this.isFixed()?e.screen:e.logical,this._currentMovingPoint=r,this.updateAllViews()},I.prototype._alignPointHorizontallyOrVertically=function(e){var t=this.pointToScreenPoint(e)[1],i=this.pointToScreenPoint(this._startMovingPoint)[1],r=Math.abs(i.x-t.x),n=Math.abs(i.y-t.y);return r<10&&n<10?e:{index:r<n?this._startMovingPoint.index:e.index,
price:r<n?e.price:this._startMovingPoint.price}},I.prototype._alignScreenPointHorizontallyOrVertically=function(e){var t=Math.abs(this._startMovingPoint.x-e.x),i=Math.abs(this._startMovingPoint.y-e.y);return t<10&&i<10?e:t<i?new n(this._startMovingPoint.x,e.y):new n(e.x,this._startMovingPoint.y)},I.prototype.startMovingPoint=function(){return this._startMovingPoint?TradingView.clone(this._startMovingPoint):null},I.prototype.currentMovingPoint=function(){return this._currentMovingPoint?TradingView.clone(this._currentMovingPoint):null},I.prototype.correctPoints=function(e){var t=this._currentMovingPoint.index-this._startMovingPoint.index,i=this._currentMovingPoint.price-this._startMovingPoint.price;if(0===t&&0===i)return!1;for(var r=0;r<e.length;r++){var n=e[r];n.index+=t,n.price+=i,e[r]=n}return!0},I.prototype.correctFixedPoints=function(e){for(var t=this._currentMovingPoint.subtract(this._startMovingPoint),i=0;i<e.length;i++)e[i]=e[i].add(t)},I.prototype.endMoving=function(e){this._properties.interval.setValue(this._model.mainSeries().interval());var t=!1,i=!1;if(this._currentMovingPoint&&this._startMovingPoint){if(t=this._currentMovingPoint.index!==this._startMovingPoint.index,i=this._currentMovingPoint.price!==this._startMovingPoint.price,this.isFixed())this.correctFixedPoints(this._fixedPoints);else if(this.correctPoints(this._points)){p.emit("drawing_event",this._id,"move");for(var r=0;r<this._points.length;r++)this._pointChanged.fire(r)}this._startMovingPoint=null,this._currentMovingPoint=null}if(this.isFixed())return this.calcPositionPercents(),void this.updateAllViews();this.normalizePoints(),this.updateAllViews(),t&&!e&&this.createServerPoints(),(i||t)&&this.synchronizeAlert(!this._alertUndoMode)},I.prototype.endChanging=function(e,t){this._properties.interval.setValue(this._model.mainSeries().interval()),t||(this.normalizePoints(),this.createServerPoints());for(var i=0;i<this.m_priceAxisViews.length;i++)this.m_priceAxisViews[i].setActive(!1);for(i=0;i<this.m_timeAxisViews.length;i++)this.m_timeAxisViews[i].setActive(!1);this.synchronizeAlert(!e)},I.prototype.dataWindowView=function(){return null},I.prototype.statusView=function(){return null},I.prototype.isSourceHidden=function(){return!this._properties.visible.value()||a.hideAllDrawings().value()&&this.canBeHidden()||!this._isActualInterval||!this._isActualSymbol||!this._isActualCurrency},I.prototype._onSourceHiddenMayChange=function(){var e=this.isSourceHidden();e!==this._sourceHiddenPrevValue&&null===this._sourceHiddenChangedTimeoutId?this._sourceHiddenChangedTimeoutId=setTimeout(this._processHibernate.bind(this),100):e===this._sourceHiddenPrevValue&&null!==this._sourceHiddenChangedTimeoutId&&(clearTimeout(this._sourceHiddenChangedTimeoutId),this._sourceHiddenChangedTimeoutId=null)},I.prototype._processHibernate=function(){var e=this.isSourceHidden();this._sourceHiddenChangedTimeoutId=null,this._sourceHiddenPrevValue=e,e?this.isStarted()&&this.stop():this.isStarted()||this.start()},I.prototype.isSynchronizable=function(){
return this.priceScale()===this._model.mainSeries().priceScale()},I.prototype.priceAxisViews=function(e,t){if(t!==this.priceScale()||this.isSourceHidden())return null;if(this._model.lineBeingEdited()===this){var i=this._model.linePointBeingEdited();if(i<this.m_priceAxisViews.length){var r=this.m_priceAxisViews.slice(),n=r[i];return r.splice(i,1),r.push(n),r}return this.m_priceAxisViews}return this.m_priceAxisViews},I.prototype.timeAxisViews=function(){if(this.isSourceHidden())return null;if(this._model.lineBeingEdited()===this){var e=this._model.linePointBeingEdited();if(e<this.m_timeAxisViews.length){var t=this.m_timeAxisViews.slice(),i=t[e];return t.splice(e,1),t.push(i),t}return this.m_timeAxisViews}return this.m_timeAxisViews},I.prototype.updateAllViews=function(){if(!this._isActualSymbol||!this._isActualCurrency)return null;if(!this._properties.visible.value())return null;this._updateAllPaneViews();for(var e=this.m_priceAxisViews,t=0;t<e.length;t++)e[t].update();for(e=this.m_timeAxisViews,t=0;t<e.length;t++)e[t].update()},I.prototype.setLastPoint=function(e,t){this._lastPoint=this._preparePoint(e,t),this.updateAllViews()},I.prototype.lastPoint=function(){return this._lastPoint},I.prototype.setLastFixedPoint=function(e){this._lastFixedPoint=e,this.updateAllViews()},I.prototype.title=function(){return this.translatedType()},I.prototype.translatedType=function(){return"Line Tool"},I.prototype.name=function(){return"Line Tool"},I._pointSetId=1,I.prototype.start=function(){this.createServerPoints()},I.prototype.createServerPoints=function(){if(!this._recursiveGuard&&this._isActualSymbol&&this._model.chartApi().connected()&&(this.clearServerPoints(),!this._model.timeScale().isEmpty()&&(0===this._timePoint.length&&this.normalizePoints(),0!==this._timePoint.length))){this._currentPointsetId=++I._pointSetId;for(var e=this._model.mainSeries().symbolId(),t=[],i=0;i<this._timePoint.length;i++){var r=this._timePoint[i];t.push([r.time_t,r.offset])}var n=h(this.properties().interval.value()),o=this;this._model.chartApi().createPointset(this.currentPointsetId(),"turnaround",e,n,t,(function(e){o.onData(e)}))}},I.prototype.clearServerPoints=function(){null!==this._currentPointsetId&&(this._model.chartApi().removePointset(this.currentPointsetId()),this._currentPointsetId=null)},I.prototype.isBeingEdited=function(){return this===this._model.lineBeingEdited()||this===this._model.sourceBeingMoved},I.prototype.isFixed=function(){return!1},I.prototype.isLocked=I.prototype.isFrozen=function(){return this.properties().frozen&&this.properties().frozen.value()},I.prototype.pointToScreenPoint=function(e){var t=this._model.timeScale(),i=this.priceScale(),r=this.ownerSource().firstValue();if(!i||i.isEmpty()||t.isEmpty()||null==r)return[new n(0,0),new n(0,0)];var o=t.indexToCoordinate(e.index,!0),s=e.price,a=i.priceToCoordinate(s,r),l=new n(o,a);o=t.indexToCoordinate(e.index,!1),a=i.priceToCoordinate(s,r);return[l,new n(o,a)]},I.prototype.screenPointToPoint=function(e){
var t=this._model.timeScale(),i=this.priceScale(),r=t.coordinateToIndex(e.x),n=this.ownerSource().firstValue();if(null!==n&&isFinite(n))return{price:i.coordinateToPrice(e.y,n),index:r}},I.prototype.tags=function(){return[this._constructor]},I.prototype._snapPoint45Degree=function(e,t,i){var r=this._model.timeScale(),n=r.indexToCoordinate(t.index),o=r.indexToCoordinate(e.index)-n,s=this.m_priceScale,a=t.price,l=e.price,c=this.ownerSource().firstValue(),u=s.priceToCoordinate(a,c),h=s.priceToCoordinate(l,c)-u,d=Math.round(Math.atan2(o,h)/Math.PI*4);if(2===Math.abs(d))i||(e.price=a);else if(0===Math.abs(d)||4===Math.abs(d))i||(e.index=t.index);else{var p=Math.sqrt(o*o+h*h),f=o<0?-1:1,_=h<0?-1:1,m=Math.max(Math.abs(h),Math.abs(o));m/=m*Math.sqrt(2)/p;var v=Math.round(r.coordinateToIndex(n+m*f)),g=Math.abs(r.indexToCoordinate(v)-n),y=s.coordinateToPrice(u+g*_,c);e.index=v,e.price=y}},I.prototype.createPriceAxisView=function(e){return new o(this,{pointIndex:e})},I.prototype.version=1,I.prototype.alertId=function(){return this._alertId},I.prototype.setAlert=function(e,t){var i=this;t=t||{};if(!this.canHasAlert())return Promise.reject("Line data source can not has alert");function r(){!t.noChartSave&&window.saver&&window.saver.saveChartSilently(null,(function(e){e&&413===e.status||y({feature:"savedChartsForAlertLimit"})}),{noDefaultOnFail:!0})}return i._alertId=parseInt(e),i.hasAlert.setValue(!0),i.getAlert().then((function(e){var t=i._model.hoveredSource()===i,n=i._model.selection().isSelected(i);return e?(i._processAlertHandlers("unsubscribe"),i._processAlertHandlers("subscribe"),e.set("hovered",t),e.set("selected",n),setTimeout(r,0),e):(d.logError("Failed to get alert, alert will not be saved with drawing in chart"),Promise.reject("got_no_alert"))})).catch((function(e){i._processAlertHandlers("unsubscribe"),"not_exists"===e&&i.removeAlert()}))},I.prototype.removeAlert=function(){delete this._alertId,delete this._alert,this.hasAlert.setValue(!1)},I.prototype._processAlertHandlers=function(e){var t,i,r=this;if("unsubscribe"!==(e="subscribe"===e?"subscribe":"unsubscribe")||r._alertCallbacks){i="subscribe"===e?"on":"off",t=r.properties();var n=r._alertCallbacks||{remove:r.removeAlert.bind(r),hovered:function(e,t){var i=r._model.hoveredSource()===r;t&&!i?r._model.setHoveredSource(r):!t&&i&&r._model.setHoveredSource(null)},selected:function(e,t){t&&r._model.selectionMacro((function(e){e.addSourceToSelection(r)}))},synchronizeSilently:function(e){r.synchronizeAlert(!1)}};r._alertCallbacks||(r._alertCallbacks=n),r.getAlert().then((function(o){o&&(o[i]("destroy",n.remove),o[i]("change:hovered",n.hovered),o[i]("change:selected",n.selected),t.extendLeft&&t.extendLeft[e](r,n.synchronizeSilently),t.extendRight&&t.extendRight[e](r,n.synchronizeSilently))}))}},I.prototype.editAlert=function(e){var t=this;t.hasAlert.value()&&w().then((function(i){i.openEditDialog(t._alertId,{actionSource:e,error:function(e){"not_exists"===e&&t.removeAlert()}})}))},I.prototype.getAlert=function(){var e=this;return new Promise((function(t,i){
w().then((function(r){r.requestAlert(e._alertId,{success:t,error:i})}))}))},I.prototype.getAlertSync=function(){if(!this._alertId)return null;var e=P();return e&&e.getAlertSync(this._alertId)||null},I.prototype.synchronizeAlert=function(e){var t=this;t.hasAlert.value()&&setTimeout((function(){var i=t._getUndoHistory();if(!t._undoCheckpointAlert&&!t._alertUndoMode){var r=i.undoStack().pop();t._undoCheckpointAlert=i.createUndoCheckpoint(),r&&i.undoStack().push(r)}function n(){t._alertUndoMode=!0,i.undoToCheckpoint(t._undoCheckpointAlert),setTimeout((function(){t._alertUndoMode=!1,t.localAndServerAlertsMismatch=!1}),0)}function o(e){"not_exists"!==e&&n()}b(t.stateForAlert().interval)?t.getAlert().then((function(i){i?(function(e){var i=e.get("description")!==e.defaultDescription(),r=e.get("extra"),n=r.alertSeries(),o=t._model.mainSeries().stateForAlert();"MainSeries"===n.type&&o.actualSymbol===n.actualSymbol&&(r.mainSeries(o),r.alertSeries(o));e.set("resolution",t.stateForAlert().interval),r.drawing(t),i||e.setDefaultDescription();t.localAndServerAlertsMismatch=!0}(i),e&&function(e){w().then((function(i){i.restartAlert(e,{success:function(){t.localAndServerAlertsMismatch=!1},error:o,complete:function(){delete t._undoCheckpointAlert},actionSource:"drawing_sync"})}))}(i)):d.logError("Failed to get alert, drawing and alert are not synchronized")})).catch(o):t._alertUndoMode||(S(),n(),delete t._undoCheckpointAlert)}),0)},I.prototype._getUndoHistory=function(){return this._model._undoModel.undoHistory()},I.prototype.stateForAlert=function(){if(!this.canHasAlert())return null;var e=this.state();e.id=this.idForAlert(),e.uniqueId=this.idForAlert(),e.title=this.title(),e.interval=this._model.mainSeries().interval();var t=this._getAlertPlots();return t&&(e.plots=t),e},I.prototype._getAlertPlots=function(){return null},I.prototype._linePointsToAlertPlot=function(e,t,i,r){if(2!==e.length)return d.logError("[Drawing Alert] Wrong points"),null;var n=this._model.timeScale();return!n||n.isEmpty()?null:{type:"LinePlot",title:t||this.title(),timestamp:n.indexToTimePoint(0),offset1:e[0].index,offset2:e[1].index,price1:e[0].price,price2:e[1].price,extendBackward:i||!1,extendForward:r||!1}},I.prototype.getAlertIsActive=function(){if(!this._alertId)return!1;var e=this.getAlertSync(this._alertId);return Boolean(e&&e.get("active"))},I.prototype.geometry=function(){var e=this;return this.points().map((function(t){return function(t){var i=t.x/e._model.timeScale().width(),r=t.y/e.priceScale().height();return new n(i,r)}(e.pointToScreenPoint(t)[0])}))},I.prototype.onlyYMoving=function(){return!1},I.prototype.model=function(){return this._model},I.prototype.isForcedDrawPriceAxisLabel=function(){return this.customization.forcePriceAxisLabel},I.prototype.getInputsPropertyPage=function(){return m.LineToolInputsPropertyPage},I.prototype.getVisibilitiesPropertyPage=function(){return m.LineToolVisibilitiesPropertyPage},I.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.resolve(null)},
I.prototype.getPropertyDefinitionsViewModel=function(){if(null===this._definitionsViewModel){var e=this;return e._getPropertyDefinitionsViewModelClass().then((function(t){return null===t||e._isDestroyed?null:(null===e._definitionsViewModel&&(e._definitionsViewModel=new t(e._model.undoModel(),e)),e._definitionsViewModel)}))}return Promise.resolve(this._definitionsViewModel)},I.prototype.hasEditableCoordinates=function(){return!0},I.prototype.getSourceIcon=function(){return{type:"loadSvg",svgId:"linetool."+this.getType()}},I.prototype.destroy=function(){if(x.prototype.destroy.call(this),this.stop(),null!==this._definitionsViewModel&&(this._definitionsViewModel.destroy(),this._definitionsViewModel=null),null!==this._ownerSource&&this.ownerSource().currencyChanged().unsubscribeAll(this),null!==this._sourceHiddenChangedTimeoutId&&clearTimeout(this._sourceHiddenChangedTimeoutId),a.hideAllDrawings().unsubscribeAll(this),this.hasAlert.value()){var e=P();e&&e.deleteAlert(this._alertId),this._isDestroyed=!0}},I.prototype.setOwnerSource=function(e){null!==this._ownerSource&&this._ownerSource.currencyChanged().unsubscribeAll(this),x.prototype.setOwnerSource.call(this,e),e&&(this.setPriceScale(e.priceScale()),e.currencyChanged().subscribe(this,this.calcIsActualCurrency),this.calcIsActualCurrency())},I.prototype.getOrderTemplate=function(){return null},I.prototype.copiable=function(){return T},I.prototype.cloneable=function(){return null!==this._ownerSource&&null!==this._ownerSource.firstValue()},I.prototype.movable=function(){return!0};var E={frozen:!1,visible:!0,intervalsVisibilities:{seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,months:!0,ranges:!0}};I._configureProperties=function(e){if(e.hasChild("visible")||e.addChild("visible",new _(E.visible)),e.hasChild("frozen")||e.addChild("frozen",new _(E.frozen)),e.hasChild("currencyId")||e.addChild("currencyId",new _(null)),e.addExclusion&&(e.addExclusion("visible"),e.addExclusion("frozen"),e.addExclusion("currencyId")),e.hasChild("intervalsVisibilities")){var t=r(e.child("intervalsVisibilities"));for(var i in E.intervalsVisibilities)t.hasChild(i)||t.addChild(i,new _(E.intervalsVisibilities[i]))}else e.addChild("intervalsVisibilities",new _(E.intervalsVisibilities));e.hasChild("title")||e.addChild("title",new _("")),e.addExclusion&&(e.addExclusion("symbol"),e.addExclusion("symbolInfo"),e.addExclusion("points"),e.addExclusion("interval"),e.addExclusion("title")),e.hasChild("lastUpdateTime")||(e.addChild("lastUpdateTime",new _(0)),e.addExclusion&&e.addExclusion("lastUpdateTime")),e.hasChild("singleChartOnly")&&e.removeProperty("singleChartOnly")},t.LineToolPriceAxisView=o,t.LineDataSource=I},SzKR:function(e,t,i){},T6Of:function(e,t,i){"use strict";i.r(t),i.d(t,"LimitedPrecisionNumericFormatter",(function(){return n}));var r=i("ogJP"),n=function(){function e(e){void 0===e&&(e=1),this._precision=e}return e.prototype.format=function(e){Object(r.isNumber)(e)||(e=parseFloat(e))
;var t=e.toFixed(this._precision),i=Math.pow(10,-this._precision);return Math.max(parseFloat(t),i)+""},e.prototype.parse=function(e){var t=parseFloat(e);return isNaN(t)?{res:!1}:{res:!0,value:t,suggest:this.format(t)}},e}()},T7XC:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"BillingCycle",(function(){return r})),function(e){e.Monthly="m",e.ThreeMonths="3m",e.OneYear="y",e.TwoYears="2y",e.ThreeYears="3y",e[1/0]="i"}(r||(r={}))},TBaH:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolGannFixed",(function(){return c}));var r=i("mrSG"),n=i("aO4+"),o=i("Ss5c"),s=i("LAp3"),a=i("ytGH"),l=window.t("Gann Square Fixed"),c=function(e){function t(r,n){var o=e.call(this,r,n||t.createProperties())||this;o._constructor="LineToolGannFixed",Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("wdUH").GannFixedPaneView;o._setPaneViews([new t(o,o.model())])}.bind(null,i)).catch(void 0),o.properties().childs().reverse.subscribe(o,o._reversePoints);for(var s=[],l=o.properties().childs(),c=l.levels.childCount(),u=0;u<c;u++){var h=l.levels.childs()[u].childs();s.push(h.width)}for(c=l.fanlines.childCount(),u=0;u<c;u++){h=l.fanlines.childs()[u].childs();s.push(h.width)}for(c=l.arcs.childCount(),u=0;u<c;u++){h=l.arcs.childs()[u].childs();s.push(h.width)}return o._widthsProperty=new a.LineToolWidthsProperty(s),o}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.prototype.translatedType=function(){return l},t.prototype.name=function(){return"Gann Square Fixed"},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.axisPoints=function(){var e=this.points(),t=this.getScreenPoints();return e.length<2||t.length<2?[]:[e[0],this.screenPointToPoint(t[1])]},t.prototype.getScreenPoints=function(){var e=this.points();if(e.length<2)return[];var t=this._calcAngle();if(null===t)return[];var i=e[0],r=e[1],o=this.pointToScreenPoint(i)[0],s=this.pointToScreenPoint(r)[0],a=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),l=new n.Point(Math.cos(t),-Math.sin(t)),c=l.normalized(),u=c.x<0?-1:1,h=c.y<0?-1:1;return[o.addScaled(l,a),o.add(new n.Point(5*a*u,5*a*h))]},t.prototype.levelsCount=function(){return this.properties().childs().levels.childCount()},t.prototype.levels=function(){for(var e=[],t=this.properties().childs(),i=t.levels.childCount(),r=0;r<i;r++){var n=t.levels.childs()[r].childs();e.push({index:r,visible:n.visible.value(),color:n.color.value(),width:n.width.value()})}return e},t.prototype.fanLinesCount=function(){return this.properties().childs().fanlines.childCount()},t.prototype.fanLines=function(){for(var e=[],t=this.properties().childs(),i=t.fanlines.childCount(),r=0;r<i;r++){var n=t.fanlines.childs()[r].childs();e.push({index:r,visible:n.visible.value(),x:n.x.value(),y:n.y.value(),color:n.color.value(),width:n.width.value()})}return e},t.prototype.arcsCount=function(){return this.properties().childs().arcs.childCount()},t.prototype.arcs=function(){for(var e=[],t=this.properties().childs(),i=t.arcs.childCount(),r=0;r<i;r++){var n=t.arcs.childs()[r].childs()
;e.push({index:r,visible:n.visible.value(),x:n.x.value(),y:n.y.value(),color:n.color.value(),width:n.width.value()})}return e},t.prototype.arcsBackgroundTransparency=function(){return this.properties().childs().arcsBackground.childs().transparency.value()},t.prototype.isArcsBackgroundFilled=function(){return this.properties().childs().arcsBackground.childs().fillBackground.value()},t.createProperties=function(e){var i=Object(s.a)("linetoolgannfixed",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"WfUZ")).then((function(e){return e.GannComplexAndFixedDefinitionsViewModel}))},t._configureProperties=function(e){o.LineDataSource._configureProperties(e)},t.prototype._calcAngle=function(){var e=this.points();if(e.length<2)return null;var t=e[0],i=e[1],r=this.pointToScreenPoint(t)[0],n=this.pointToScreenPoint(i)[0].subtract(r);if(n.length()<=0)return null;n=n.normalized();var o=Math.acos(n.x);return n.y>0&&(o=-o),o},t.prototype._reversePoints=function(){var e=this._points,t=e[0],i=e[1];this._points[0]=i,this._points[1]=t,this.normalizePoints(),this.restart()},t}(o.LineDataSource)},TFEc:function(e,t,i){"use strict";i.r(t),i.d(t,"AuthToken",(function(){return l}));var r=i("aIyQ"),n=i.n(r),o=i("txPx"),s=i("BHQF"),a=Object(o.getLogger)("ChartApi.AuthToken",{color:"#173"});var l=function(){function e(){var e=this;this.invalidated=new n.a,this._tid=0,window.loginStateChange||(window.loginStateChange=new n.a),window.loginStateChange.subscribe(this,(function(t){t||(e._set(window.user.auth_token),e.invalidated.fire())})),this._set(window.user.auth_token)}return e.prototype.get=function(e){var t=this;return window.is_authenticated?!e&&performance.now()<this._cache.validThru?(a.logInfo("Using cached token "+this._cache.token),Promise.resolve(this._cache.token)):this._fetch(Boolean(e),0).then((function(e){if(!window.is_authenticated)throw new Error("User logged out while the request was in flight");return t._set(e),e})).catch((function(e){return a.logError("Error fetching new token: "+(e&&e.message)),""})):Promise.resolve("")},e.prototype.reset=function(){this._set(void 0),this.invalidated.fire()},e.prototype._set=function(e){var t=this;if(window.is_authenticated&&void 0!==e){var i=function(e){if(""===e)return 144e5;try{var t=JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"))),i=1e3*(t.exp-t.iat);if(!isFinite(i))throw new Error("invalid expiration");return Math.max(i-3e5,3e5)}catch(r){return a.logError(e+" is invalid: "+r.message),144e5}}(e);this._cache={token:e,validThru:performance.now()+i},clearTimeout(this._tid),setTimeout((function(){return t.reset()}),i),a.logInfo("Cached for "+i+" ms: "+e)}else this._cache={token:"",validThru:-1/0},clearTimeout(this._tid),a.logInfo("Cache dropped")},e.prototype._fetch=function(e,t){var i=this;return a.logNormal("Fetching a new token, grabSession="+e),Object(s.fetch)("/quote_token/",{method:"POST",headers:{
"Content-Type":"application/x-www-form-urlencoded"},body:e?"grabSession=true":""}).then((function(e){if(!e.ok)throw new Error("Response status is not ok: "+e.status);return e.json().then(String)}),(function(r){if(t>=3)throw r;return a.logWarn("Request failed, will retry"),function(e){return new Promise((function(t){return setTimeout(t,1e3*e)}))}(t).then((function(){return i._fetch(e,t+1)}))}))},e}()},TG9i:function(e,t,i){"use strict";i.r(t),i.d(t,"HHistDataWindowView",(function(){return p}));var r=i("mrSG"),n=i("Eyy1"),o=i("ivNn"),s=i("4miz"),a=i("nEwK"),l=i("qFKp"),c=i("e92V"),u=i("mMWL"),h=l.CheckMobile.any(),d=window.t("n/a"),p=function(e){function t(t,i){var r=e.call(this)||this;r._invalidated=!0,r._study=t,r._model=i,r._header=r._study.title(!0);var o=r._study.metaInfo().graphics.hhists;if(void 0===o)return r;var a=0;for(var l in o)if(o.hasOwnProperty(l)){var c=Object(n.ensureDefined)(o[l]);c.titles.length>a&&(a=c.titles.length)}a>1&&a++;for(var u=r._na(),h=0;h<a;h++)r._items.push(new s.DataWindowItem("",u));return r.update(),r}return Object(r.__extends)(t,e),t.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},t.prototype.update=function(){this._invalidated=!0},t.prototype.study=function(){return this._study},t.prototype._hideValues=function(){return h&&(null===this._model.crossHairSource().pane||Object(c.a)(u.tool.value())||null!==this._model.lineBeingEdited())},t.prototype._na=function(){var e=this._hideValues();return this._study.isVisible()&&!e?d:""},t.prototype._setNa=function(){for(var e=this._hideValues(),t=this._na(),i=0,r=this._items;i<r.length;i++){var n=r[i];(""!==n.value()||e)&&(n.setTitle(""),n.setValue(t),n.setColor(void 0))}},t.prototype._updateImpl=function(){this._header=this._study.title(!0),this._title=this._study.title();var e=this._study.priceScale(),t=this._model.timeScale();if(null===e||e.isEmpty()||t.isEmpty())this._setNa();else{var i=this._model.crossHairSource(),r=i.appliedIndex(),n=i.price,s=function(e,t,i){if(0===e.size)return null;var r=function(e,t){var i=null;return e.forEach((function(e,r){r<=t&&(null===i||r>i)&&(i=r)})),i}(e,t);if(null===r)return null;var n=e.get(r);if(!n||0===n.size)return null;return o=n,s=i,a=null,o.forEach((function(e){e.priceLow<=s&&s<e.priceHigh&&(a=e)})),a;var o,s,a}(this._study.graphics().hhistsByTimePointIndex(),r,n);if(null!==s){var l=this._study.metaInfo().graphics.hhists;if(void 0!==l){var c=l[s.styleId];if(void 0!==c){var u=this._study.properties().child("graphics").child("hhists").child(s.styleId),h=new a.VolumeFormatter;this._items.forEach((function(e,t,i){if(t<u.colors.childCount())if(t<s.rate.length){var r=s.rate[t];e.setTitle(c.titles[t]),e.setValue(Object(o.isNumber)(r)?h.format(r):""),e.setColor(u.colors[t].value())}else e.setTitle(""),e.setValue(""),e.setColor(void 0);else{if(s.rate.length>1&&t===u.colors.childCount()){var n=s.rate.reduce((function(e,t){return e+t}),0);return e.setValue(h.format(n)),void e.setColor(u.valuesColor.value())}e.setValue("")}}))}}}}},t}(s.DataWindowView)},
TMWk:function(e,t,i){"use strict";var r=i("Eyy1").assert,n=i("ogJP").clone,o=i("GVHu").Study,s=i("k9/m").PlotList,a=i("w4Ji").studyPlotFunctionMap,l=i("w4Ji").studyEmptyPlotValuePredicate;function c(e,t,i,r){o.call(this,e,t,i,r),this._underlyingData=new s(a(r),l)}inherit(c,o),c.prototype.clearData=function(){o.prototype.clearData.call(this),this._underlyingData.clear()},c.prototype._mergeData=function(e){this._invalidateLastNonEmptyPlotRowCache();var t=this._underlyingData.firstIndex();this._underlyingData.merge(e),t!==this._underlyingData.firstIndex()&&(this.m_data=new s(a(this._metaInfo),l));var i=this.m_data.lastIndex();this._underlyingData.range(i,this._underlyingData.lastIndex()).each(function(e,t){return this.m_data.add(e,n(t)),!1}.bind(this)),this._plotsForStrategyProcessing().forEach((function(e){this._createStrategy(e.strategy,e.strategyIndex,e.targetIndex,i).rebuildData(this.m_data)}),this)},c.prototype._plotsForStrategyProcessing=function(){var e=["dataoffset"],t=[];return this._metaInfo.plots.forEach((function(i,n){if(e.indexOf(i.type)>-1){var o=null;this._metaInfo.plots.forEach((function(e,t){e.id===i.target&&(o=t)})),r(o>=0,"target plot not found for strategy plot "+i.id);var s={strategy:i.type,strategyIndex:n,targetIndex:o};t.push(s)}}),this),t},c.prototype._createStrategy=function(e,t,i,r){return new c["Strategy_"+e](t,i,r)},c.Strategy_dataoffset=function(e,t,i){this._strategyPlotIndex=e,this._targetPlotIndex=t,this._startIndex=i},c.Strategy_dataoffset.prototype.rebuildData=function(e){var t=this._targetPlotIndex+1,i=this._strategyPlotIndex+1,r=null,n=null;e.range(this._startIndex||e.firstIndex(),e.lastIndex()).each((function(o,s){var a=s[t],l=s[i]?Math.round(s[i]):null;if(s[t]=null,s[i]=null,!l||l>0)return!1;var c=o+l,u={pointIndex:c,value:a};if(n){if(n.pointIndex!==u.pointIndex){c>=0&&(e.valueAt(c)[t]=a);var h=!1;r&&(h=r.value<=n.value&&n.value<=a||r.value>=n.value&&n.value>=a),h?n.pointIndex>=0&&(e.valueAt(n.pointIndex)[t]=null):r=n,n=u}}else n=u;return!1}))},t.study_ScriptWithDataOffset=c},TTFo:function(e,t,i){"use strict";i.r(t),i.d(t,"fromPercent",(function(){return o})),i.d(t,"toPercent",(function(){return s})),i.d(t,"toPercentRange",(function(){return a})),i.d(t,"fromIndexedTo100",(function(){return l})),i.d(t,"toIndexedTo100",(function(){return c})),i.d(t,"toIndexedTo100Range",(function(){return u})),i.d(t,"toLog",(function(){return h})),i.d(t,"fromLog",(function(){return d}));var r=i("Qb4w"),n=i("Hr11");function o(e,t){return t<0&&(e=-e),e/100*t+t}function s(e,t){var i=100*(e-t)/t;return t<0?-i:i}function a(e,t){var i=s(e.minValue(),t),n=s(e.maxValue(),t);return new r.PriceRange(i,n)}function l(e,t){return t<0&&(e=-e),(e-=100)/100*t+t}function c(e,t){var i=100*(e-t)/t+100;return t<0?-i:i}function u(e,t){var i=c(e.minValue(),t),n=c(e.maxValue(),t);return new r.PriceRange(i,n)}function h(e){var t=Math.abs(e);if(t<1e-8)return 0;var i=Object(n.log10)(t+1e-4)+4;return e<0?-i:i}function d(e){var t=Math.abs(e);if(t<1e-8)return 0;var i=Math.pow(10,t-4)-1e-4;return e<0?-i:i}},TcSq:function(e,t,i){
"use strict";function r(e){return e===n(e)}function n(e){var t=e.indexOf("$"),i=e.indexOf("@");return t<0&&i>=0?null:e.substring(Math.max(t+1,0),i>=0?i:e.length)}function o(e){return e.startsWith("PUB;")}function s(e){return e.startsWith("USER;")}function a(e){return e.startsWith("STD;")}function l(e){return e.includes("Candlestick%1Pattern%1")}i.r(t),i.d(t,"isPineIdString",(function(){return r})),i.d(t,"extractPineId",(function(){return n})),i.d(t,"isPublishedPineId",(function(){return o})),i.d(t,"isCustomPineId",(function(){return s})),i.d(t,"isStandardPineId",(function(){return a})),i.d(t,"isCandleStickId",(function(){return l}))},TmNs:function(e,t,i){"use strict";i.r(t),i.d(t,"PriceLineAxisView",(function(){return a})),i.d(t,"SeriesPriceLineAxisView",(function(){return l})),i.d(t,"StudyPriceLineAxisView",(function(){return c}));var r=i("mrSG"),n=i("KcY8"),o=i("HL4j"),s=i("8Uy/"),a=function(e){function t(){return e.call(this,o.PriceLineAxisRenderer)||this}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){if(t.visible=!1,e.visible=!1,this._isVisible()){var r=this._value();r.noData||(i.background="",i.color=this._priceLineColor(r.color),i.coordinate=r.coordinate,i.floatCoordinate=r.floatCoordinate,e.linewidth=this._lineWidth(),e.linestyle=this._lineStyle(),e.visible=!0)}},t.prototype._lineStyle=function(){return s.LINESTYLE_DOTTED},t}(n.a),l=function(e){function t(t){var i=e.call(this)||this;return i._series=t,i}return Object(r.__extends)(t,e),t.prototype._value=function(){return this._series.lastValueData(void 0,!0)},t.prototype._priceLineColor=function(e){return this._series.priceLineColor(e)},t.prototype._lineWidth=function(){return this._series.properties().priceLineWidth.value()},t.prototype._isVisible=function(){var e=this._series.model().properties().scalesProperties.showSeriesLastValue.value();return this._series.properties().showPriceLine.value()&&e},t}(a),c=function(e){function t(t,i){var r=e.call(this)||this;return r._study=t,r._plotname=i,r}return Object(r.__extends)(t,e),t.prototype._value=function(){return this._study.lastValueData(this._plotname,!0)},t.prototype._lineWidth=function(){return this._study.properties().styles[this._plotname].linewidth.value()},t.prototype._lineStyle=function(){return s.LINESTYLE_DOTTED},t.prototype._priceLineColor=function(e){return e},t.prototype._isVisible=function(){var e=this._study.model().properties().scalesProperties.showStudyLastValue.value();return this._study.properties().styles[this._plotname].trackPrice.value()&&e},t}(a)},Tmoa:function(e,t,i){"use strict";i.r(t),i.d(t,"generateColor",(function(){return n})),i.d(t,"alphaToTransparency",(function(){return o})),i.d(t,"transparencyToAlpha",(function(){return s})),i.d(t,"resetTransparency",(function(){return a})),i.d(t,"getLuminance",(function(){return l})),i.d(t,"isHexColor",(function(){return c})),i.d(t,"colorFromBackground",(function(){return u})),i.d(t,"gradientColorAtPercent",(function(){return h})),i.d(t,"isColorDark",(function(){return d}));var r=i("eJTA");function n(e,t,i){
if(t=t||0,!c(e))return i?Object(r.rgbaToString)(Object(r.rgba)(Object(r.parseRgb)(e),Object(r.normalizeAlphaComponent)(s(t)))):e;var n=Object(r.parseRgb)(e),o=n[0],a=n[1],l=n[2],u=Object(r.normalizeAlphaComponent)(s(t));return Object(r.rgbaToString)([o,a,l,u])}function o(e){return 100*(1-e)}function s(e){if(e<0||e>100)throw new Error("invalid transparency");return 1-e/100}function a(e){return c(e)?e:Object(r.rgbaToString)(Object(r.rgba)(Object(r.parseRgb)(e),Object(r.normalizeAlphaComponent)(1)))}function l(e){var t=Object(r.parseRgb)(e).map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e){return 0===e.indexOf("#")}function u(e){return"black"===Object(r.rgbToBlackWhiteString)(Object(r.parseRgb)(e),150)?"white":"black"}function h(e,t,i){var n=Object(r.parseRgba)(e),o=n[0],s=n[1],a=n[2],l=n[3],c=Object(r.parseRgba)(t),u=c[0],h=c[1],d=c[2],p=c[3],f=Object(r.rgba)(Math.round(o+i*(u-o)),Math.round(s+i*(h-s)),Math.round(a+i*(d-a)),l+i*(p-l));return Object(r.rgbaToString)(f)}function d(e){return l(a(e))<.5}},TohL:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolArrowMark",(function(){return p})),i.d(t,"LineToolArrowMarkLeft",(function(){return f})),i.d(t,"LineToolArrowMarkUp",(function(){return _})),i.d(t,"LineToolArrowMarkRight",(function(){return m})),i.d(t,"LineToolArrowMarkDown",(function(){return v}));var r=i("mrSG"),n=i("YFKU"),o=i("Ocx9"),s=i("Ss5c"),a=i("tc+8"),l=i.n(a),c=Object(n.t)("Arrow Mark Left"),u=Object(n.t)("Arrow Mark Up"),h=Object(n.t)("Arrow Mark Right"),d=Object(n.t)("Arrow Mark Down"),p=function(e){function t(r,n,o){var s=this,a=n||t.createProperties(null,o);return(s=e.call(this,r,a)||this)._textPaneView=null,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=[new(0,i("ct+2").ArrowMarkPaneView)(s,r)];s._setPaneViews(t)}.bind(null,i)).catch(void 0),s}return Object(r.__extends)(t,e),t.prototype.paneViews=function(t){var i=e.prototype.paneViews.call(this);return null!==i&&this._textPaneView&&i.push(this._textPaneView),i},t.prototype.pointsCount=function(){return 1},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.template=function(){var t=e.prototype.template.call(this);return t.text=this.properties().childs().text.value(),t},t.createProperties=function(e,i){var r=new o.DefaultProperty(i,e);return t._configureProperties(r),r},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"5sLb")).then((function(e){return e.ArrowMarkDefinitionsViewModel}))},t.prototype._applyTemplateImpl=function(t){e.prototype._applyTemplateImpl.call(this,t),this.properties().childs().text.setValue(t.text)},t._configureProperties=function(e){s.LineDataSource._configureProperties(e),e.hasChild("text")||e.addChild("text",new l.a("")),e.addExclusion("text")},t.version=2,t}(s.LineDataSource),f=function(e){function t(t,i){
var r=e.call(this,t,i,"linetoolarrowmarkleft")||this;return r._constructor="LineToolArrowMarkLeft",r}return Object(r.__extends)(t,e),t.prototype.direction=function(){return"left"},t.prototype.translatedType=function(){return c},t.prototype.name=function(){return"Arrow Mark Left"},t.prototype.textAlignParams=function(){return{horzAlign:"left",vertAlign:"middle",offsetX:22,offsetY:3}},t.createProperties=function(e){return p.createProperties(e,"linetoolarrowmarkleft")},t}(p),_=function(e){function t(t,i){var r=e.call(this,t,i,"linetoolarrowmarkup")||this;return r._constructor="LineToolArrowMarkUp",r}return Object(r.__extends)(t,e),t.prototype.direction=function(){return"up"},t.prototype.translatedType=function(){return u},t.prototype.name=function(){return"Arrow Mark Up"},t.prototype.textAlignParams=function(){return{horzAlign:"center",vertAlign:"top",offsetX:0,offsetY:20}},t.createProperties=function(e){return p.createProperties(e,"linetoolarrowmarkup")},t}(p),m=function(e){function t(t,i){var r=e.call(this,t,i,"linetoolarrowmarkright")||this;return r._constructor="LineToolArrowMarkRight",r}return Object(r.__extends)(t,e),t.prototype.direction=function(){return"right"},t.prototype.translatedType=function(){return h},t.prototype.name=function(){return"Arrow Mark Right"},t.prototype.textAlignParams=function(){return{horzAlign:"right",vertAlign:"middle",offsetX:22,offsetY:3,forceTextAlign:!0}},t.createProperties=function(e){return p.createProperties(e,"linetoolarrowmarkright")},t}(p),v=function(e){function t(t,i){var r=e.call(this,t,i,"linetoolarrowmarkdown")||this;return r._constructor="LineToolArrowMarkDown",r}return Object(r.__extends)(t,e),t.prototype.direction=function(){return"down"},t.prototype.translatedType=function(){return d},t.prototype.name=function(){return"Arrow Mark Down"},t.prototype.textAlignParams=function(){return{horzAlign:"center",vertAlign:"bottom",offsetX:0,offsetY:20}},t.createProperties=function(e){return p.createProperties(e,"linetoolarrowmarkdown")},t}(p)},TrvT:function(e,t,i){"use strict";i.r(t),i.d(t,"CompareDataWindowView",(function(){return u}));var r=i("mrSG"),n=i("it7y"),o=i("e92V"),s=i("mMWL"),a=i("qFKp"),l=i("ogJP"),c=a.CheckMobile.any(),u=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._studyCompare=t,r}return Object(r.__extends)(t,e),t.prototype._updateImpl=function(){e.prototype._updateImpl.call(this),this._items[0].setTitle(this._studyCompare.guiPlotName(""))},t.prototype._hideValues=function(){return!1},t.prototype._currentIndex=function(){var e,t=this._model.crossHairSource().lockedIndex;return c&&(null===this._model.crossHairSource().pane&&void 0===t||Object(o.a)(s.tool.value())||null!==this._model.lineBeingEdited())?e=this._study.data().lastIndex():(e=this._model.crossHairSource().appliedIndex(),Object(l.isNumber)(e)||(e=this._study.data().lastIndex())),e},t}(n.StudyDataWindowView)},TxTq:function(e,t,i){"use strict"
;var r=i("e3/o"),n=i("FBuY").TVXWindowEvents,o=i("JWMC").trackEvent,s=i("VVxS").TVLocalStorage,a=i("a4Nd").PushStream,l=i("PfBM").ConnectionStatus,c=i("xlbu").telemetry,u=i("txPx"),h=u.getLogger,d=u.getRawLogHistory,p=h("PushStreamMultiplexer"),f=function(){var e,t=null,i=null,u={},h={},f=[],_=null,m="multiplexer-bc-",v="pushStreamMultiplexerState.",g=l.Closed,y=l.Closed,b=!1,S={_codeParams:function(e){return(e=Array.prototype.slice.call(e)).push((new Date).getTime()),JSON.stringify(e)},_decodeParams:function(e){var t=JSON.parse(e);return t.pop(),t},guid:r.guid(),_init:function(){if(this._needInstantiating())this._instantiatePushStream();else{var e=this._decodeConnectionStatus(s.getItem(this._connectionStatusKey));g=e[0],y=e[1]}setTimeout((function(){S.isConnected()||(p.logNormal("Not connected for a while after init..."),o("pushstream","not connected after init",navigator.userAgent))}),S._activityTimeout)},_instantiatePushStream:function(e){this._setMark(),t&&(o("PushstreamDoublePublic",window.user&&window.user.username||"Guest",navigator.userAgent),t.disconnect()),(t=new a(this._dispatchMessage.bind(this),{url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws"})).connectionStatus().subscribe(function(e){this._dispatchStatusChange(e,y)}.bind(this)),i&&(o("PushstreamDoublePrivate",window.user&&window.user.username||"Guest",navigator.userAgent),i.disconnect()),(i=new a(this._dispatchMessage.bind(this),{url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws"})).connectionStatus().subscribe(function(e){this._dispatchStatusChange(g,e)}.bind(this)),this.on("pushstream_set_user_channel",function(e){this._setUserChannel(e)}.bind(this)),this._connectChannels(e)},_destructPushStream:function(){var e=t;t=null,e.disconnect(),e=i,i=null,e.disconnect(),this._dispatchStatusChangeFromOther(s.getItem(this._connectionStatusKey))},_activityTimeout:5e3,_delayTimeout:2e4,_pulseActivity:function(){this.ownPushStream()?this._lostOwn()?(p.logNormal("Lost own pushstream connection"),c.sendReport("site","pushstream_lost_own"),this._destructPushStream()):this._setMark():this._needInstantiating()&&!b&&(p.logNormal("Creating pushstream connection, because other tab lost it"),c.sendReport("site","pushstream_pick_up"),this._instantiatePushStream(this.getChannels()))},_markName:v+"mark",_lostOwn:function(){var e=s.getItem(this._markName);return!!e&&(e=this._decodeParams(e))[0]!==this.guid},_getMark:function(){return this._decodeParams(s.getItem(this._markName))},_setMark:function(){s.setItem(this._markName,this._codeParams([this.guid,(new Date).getTime()]))},_unsetMark:function(){s.setItem(this._markName,"")},_needInstantiating:function(){var e=s.getItem(this._markName);if(e){var t=(e=this._decodeParams(e))[1];return(new Date).getTime()-t>this._delayTimeout}return!0},_onRequestRecreate:function(e){if(!this.ownPushStream()&&this._needInstantiating()){var t=this._decodeParams(e)[0];p.logNormal("Creating pushstream connection after recreate request"),this._instantiatePushStream(t)}},_onUnload:function(){this.ownPushStream()&&(this._unsetMark(),
this._sendRecreateRequest())},_getChannels:function(){return t.getChannels().concat(i.getChannels())},_channelsName:v+"channels",_getChannelsFromStorage:function(){var e=s.getItem(this._channelsName);return e?JSON.parse(e):[]},getChannels:function(){return this.ownPushStream()?this._getChannels():this._getChannelsFromStorage()},_storeChannels:function(){s.setItem(this._channelsName,JSON.stringify(this._getChannels()))},_sendRecreateRequest:function(){var e=this._getChannels();n.emit(this._xEventRecreate,this._codeParams([e]))},ownPushStream:function(){return!!t||!!i},pushStream:function(){if(!this.ownPushStream())throw new Error("Not own PushStream");return t},isConnected:function(){return g>0},status:function(){return g||l.Closed},statusPrivate:function(){return y||l.Closed},_userChannel:function(e){return"private_"+e},userChannel:function(){if(!_)throw new Error("No user channel");return this._userChannel(_)},_xEventRecreate:m+"recreate",_xEventSend:m+"send",_xEventChannelAdd:m+"channelAdd",_xEventChannelRemove:m+"channelRemove",_xEventRequiredChannels:m+"requirech",_xEventConnectionStatus:m+"connectionStatus",_xEventReconnectCommand:m+"reconnectCommand",_xEventRequestLogs:m+"requestLogs",_xEventShareLogs:m+"shareLogs",_shareLogsKey:v+"shareLogs",_connectionStatusKey:v+"connectionStatus",_addChannel:function(e){var r=e.startsWith("private_")?i:t;r.hasChannel(e)||(r.addChannel(e),this._storeChannels())},addChannel:function(e){this.ownPushStream()?this._addChannel(e):n.emit(this._xEventChannelAdd,this._codeParams([e]))},_addChannelFromOther:function(e){var t=this._decodeParams(e)[0];this.ownPushStream()&&this._addChannel(t)},_removeChannel:function(e){var r=e.startsWith("private_")?i:t;r.hasChannel(e)&&(r.removeChannel(e),this._storeChannels())},removeChannel:function(e){this.ownPushStream()?this._removeChannel(e):n.emit(this._xEventChannelRemove,this._codeParams([e]))},_removeChannelFromOther:function(e){var t=this._decodeParams(e)[0];this.ownPushStream()&&this._removeChannel(t)},_connectChannels:function(e){t.addChannel("public"),void 0!==e&&e.length>0&&e.forEach((function(e){e.startsWith("private_")||t.hasChannel(e)||t.addChannel(e)})),"is_authenticated"in window?this._connectUserChannelInitial(!0):window.loginStateChange&&loginStateChange.subscribe(this,this._connectUserChannelInitial),t.connect()},_connectUserChannelInitial:function(e){e&&(is_authenticated?(_=user.private_channel,i.addChannel(this.userChannel()),i.connect()):_=null)},_changeLoginState:function(e){e||(is_authenticated?(_=user.private_channel,this.ownPushStream()&&(this._addChannel(this.userChannel()),i.connect())):(this.ownPushStream()&&(this._removeChannel(this.userChannel()),i.disconnect()),_=null))},_setUserChannel:function(e){p.logNormal("Set user channel "+e),e!==_&&(this.ownPushStream()&&_&&this._removeChannel(this.userChannel()),_=e,this.ownPushStream()&&_&&this._addChannel(this.userChannel()))},_dispatchStatusChange:function(e,t){this._dispatchStatusChangeToOthers(e,t),this._dispatchStatusChangeToSelf(e,t)},
_dispatchStatusChangeToSelf:function(e,t){e!==g&&(g=e,this._callStatusHandlers(e,!1)),t!==y&&(y=t,this._callStatusHandlers(t,!0))},_callStatusHandlers:function(e,t){p.logNormal("Connection status change: "+e+", private "+t),c.sendReport("site","pushstream_status_change"),f.forEach((function(i){i.isPrivate===t&&i.handler(e)}))},_decodeConnectionStatus:function(e){var t=parseInt(e,10);return isNaN(t)?this._decodeParams(e):[t,t]},_dispatchStatusChangeFromOther:function(e){var t=this._decodeConnectionStatus(e),i=t[0],r=t[1];this.ownPushStream()||this._dispatchStatusChangeToSelf(i,r)},_dispatchStatusChangeToOthers:function(e,t){if(this.ownPushStream()){var i=this._codeParams([e,t]);s.setItem(this._connectionStatusKey,i),n.emit(this._xEventConnectionStatus,i)}},_dispatchMessage:function(e,t,i){this._dispatchMessageToOthers(e,t,i),this._dispatchMessageToSelf(e,t,i,!1)},_dispatchMessageToSelf:function(e,t,i,r){i=e.channel,e=e.content,this._emit(e,t,i,r)},_dispatchMessageToOthers:function(e,t,i){var r=[e,t,i,(new Date).getTime()];n.emit(this._xEventSend,this._codeParams(r))},_dispatchMessageFromOther:function(e){if(!this.ownPushStream()){var t=this._decodeParams(e),i=t[0],r=t[1],n=t[2];this._dispatchMessageToSelf(i,r,n,!0)}},_isSpecialChannel:function(e){return/\*/.test(e)},_emit:function(e,t,i,r){function n(n){n.call(this,e,t,i,r)}for(var o in u[i]&&u[i].forEach(n,this),h){var s="^"+o.replace(/\*/g,".*?")+"$";new RegExp(s).test(i)&&h[o].forEach(n,this)}},on:function(e,t){var i=this._isSpecialChannel(e)?h:u;i[e]||(i[e]=[]),i[e].push(t)},off:function(e,t){var i=this._isSpecialChannel(e)?h:u;switch(arguments.length){case 0:u={},h={};break;case 1:i[e]&&delete i[e];break;default:if(i[e]){var r=i[e].indexOf(t);~r&&i[e].splice(r,1)}}},onStatus:function(e){f.push({handler:e,isPrivate:!1}),setTimeout((function(){e(g)}),0)},onPrivateStatus:function(e){f.push({handler:e,isPrivate:!0}),setTimeout((function(){e(y)}),0)},offStatus:function(e){f=f.filter((function(t){return t.handler!==e}))},forceConnect:function(){b=!1,p.logNormal("Creating pushstream connection after force connect"),this.ownPushStream()?(t.disconnect(),i.disconnect(),this._instantiatePushStream(this.getChannels())):this._needInstantiating()?this._instantiatePushStream():n.emit(this._xEventReconnectCommand,{})},disconnect:function(){this.ownPushStream()&&(this._destructPushStream(),this._unsetMark(),b=!0)},_dispatchReconnectCommandFromOther:function(){this.ownPushStream()&&this.forceConnect()},_getOwnLogs:function(e){if(this.ownPushStream()){var t=d(e,"PushStreamMultiplexer"),i=this.pushStream().getLogs();return[].concat(t,i)}return[]},_onRequestLogs:function(e){if(this.ownPushStream()){var t=this._getOwnLogs(e),i=JSON.stringify(t);s.setItem(this._shareLogsKey,i),n.emit(this._xEventShareLogs,i)}},getLogs:function(e){return new Promise(function(t){var i=setTimeout(function(){var e=s.getItem(this._shareLogsKey);t(null!==e?JSON.parse(e):[])}.bind(this),1e3),r=function(e){var o;n.off(this._xEventShareLogs,r),n.emit(this._xEventShareLogs,""),clearTimeout(i);try{o=JSON.parse(e)
}catch(s){o=[],p.logError("Failed to parse logs received from master tab")}t(o)}.bind(this);this.ownPushStream()?t(this._getOwnLogs(e)):(n.on(this._xEventShareLogs,r),n.emit(this._xEventRequestLogs))}.bind(this))}};return S._init(),window.addEventListener("unload",S._onUnload.bind(S)),n.on(S._xEventRecreate,S._onRequestRecreate.bind(S)),n.on(S._xEventSend,S._dispatchMessageFromOther.bind(S)),n.on(S._xEventChannelAdd,S._addChannelFromOther.bind(S)),n.on(S._xEventChannelRemove,S._removeChannelFromOther.bind(S)),n.on(S._xEventConnectionStatus,S._dispatchStatusChangeFromOther.bind(S)),n.on(S._xEventReconnectCommand,S._dispatchReconnectCommandFromOther.bind(S)),n.on(S._xEventRequestLogs,S._onRequestLogs.bind(S)),e=function(){window.loginStateChange&&loginStateChange.subscribe(S,S._changeLoginState)},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e),setInterval(S._pulseActivity.bind(S),S._activityTimeout),S._pulseActivity(),S}();e.exports=f},"U0+/":function(e,t,i){"use strict";i.r(t),i.d(t,"StudyMetaInfoRepository",(function(){return p}));i("YFKU");var r=i("Eyy1"),n=i("0YCj"),o=i.n(n),s=i("Si3H"),a=i("lCO3"),l=i("nmnj"),c=i("K4L1"),u=i.n(c),h=i("txPx"),d=Object(h.getLogger)("Chart.Studies.StudyMetaInfoRepository",{color:"#606"}),p=function(){function e(e){this._nextRequestNumber=1,this._rawStudiesMetaInfo=[],this._isReady=!1,this._metaInfoQueryQueue=[],this._javaMetaInfoQueryQueue=[],this._javaStudiesMetaInfo=[],this._pineMetaInfoCache=[],this._studiesMigrations=[],this._gateway=e}return e.prototype.requestMetaInfo=function(){var e=this;this._requestStarted();var t=this._makeNextRequestId();return d.logNormal("Requesting metainfo #"+t),new Promise((function(i){d.logNormal("Requesting studies metadata #"+t),e._gateway.requestMetadata(t,(function(r){d.logNormal("Requesting studies metadata #"+t+" finished");var n=r.params[1].metainfo.slice(),o=r.params[1].migrations.slice();e._processSiteMetaInfo(n,o),e._requestFinished(),i()}))}))},e.prototype.findById=function(e){if(!this._isReady)return this._enqueueMetaInfoQuery(e);var t=this._findStudyMetaInfo(e);return null!==t?Promise.resolve(t):"pine"===e.type?this._compilePine(e):Promise.reject("unexpected study id="+e.studyId+" with type="+e.type)},e.prototype.findByIdSync=function(e){return this._findStudyMetaInfo(e)},e.prototype.isReady=function(){return this._isReady},e.prototype.findAllJavaStudies=function(){return this._isReady?Promise.resolve(this._javaStudiesMetaInfo):this._enqueueJavaMetaInfoQuery()},e.prototype.getInternalMetaInfoArray=function(){return this._javaStudiesMetaInfo},e.prototype.getMigrations=function(){return this._studiesMigrations},e.prototype.addPineMetaInfo=function(e){return _(this._pineMetaInfoCache,e)},e.prototype._processMigrations=function(e){this._studiesMigrations=[];for(var t=0;e&&t<e.length;t++)this._studiesMigrations.push(e[t])},e.prototype._processSiteMetaInfo=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];u.a._verifyInputsMaxValue(n),f(n)}this._rawStudiesMetaInfo=e,this._processMigrations(t)
;for(var s=0,a=this._rawStudiesMetaInfo;s<a.length;s++){var l=a[s];_(this._javaStudiesMetaInfo,l)}o.a.overrideDefaults(this._javaStudiesMetaInfo)},e.prototype._processLibraryMetaInfo=function(e){},e.prototype._requestStarted=function(){this._isReady=!1,this._javaStudiesMetaInfo=[],this._pineMetaInfoCache=[],this._studiesMigrations=[],this._rawStudiesMetaInfo=[]},e.prototype._requestFinished=function(){this._isReady=!0,this._processPendingMetaInfoQueries(),this._processPendingFullMetaInfoQueries()},e.prototype._enqueueMetaInfoQuery=function(e){var t=this;return new Promise((function(i){t._metaInfoQueryQueue.push({studyDescriptor:e,resolver:i})}))},e.prototype._enqueueJavaMetaInfoQuery=function(){var e=this;return new Promise((function(t){e._javaMetaInfoQueryQueue.push({resolver:t})}))},e.prototype._processPendingMetaInfoQueries=function(){for(;this._metaInfoQueryQueue.length;){var e=this._metaInfoQueryQueue.shift();this.findById(e.studyDescriptor).then(e.resolver)}},e.prototype._processPendingFullMetaInfoQueries=function(){for(;this._javaMetaInfoQueryQueue.length;){this._javaMetaInfoQueryQueue.shift().resolver(this._javaStudiesMetaInfo)}},e.prototype._findStudyMetaInfo=function(e){return"java"===e.type?this._javaStudiesMetaInfo.find((function(t){return t.id===e.studyId}))||null:this._pineMetaInfoCache.find((function(t){return t.scriptIdPart===e.pineId&&(void 0===e.pineVersion||Object(r.ensureDefined)(t.pine).version===e.pineVersion)}))||null},e.prototype._makeNextRequestId=function(){return"metadata_"+this._nextRequestNumber++},e.prototype._compilePine=function(e){var t=this;d.logNormal("Compiling "+e.pineId+" script");var i=Promise.resolve(Object(l.translateScriptAsync2)(e.pineId,e.pineVersion||"last")).then((function(i){return d.logNormal("Compiling "+e.pineId+" is successful"),t.addPineMetaInfo(Object(r.ensureDefined)(i))}));return i.catch((function(){d.logNormal("Compiling "+e.pineId+" is failed")})),i},e}();function f(e){e.description_localized=window.t(e.description,{context:"study"})}function _(e,t){var i=new o.a(t);Object(s.migrateMetaInfoAndPropState)(i);var r=!0,n=e.findIndex((function(e){return e.id===i.id}));if(-1===n)e.push(i);else{var l=e[n],c=void 0!==l.pine?a.Version.parse(l.pine.version):null,u=void 0!==i.pine?a.Version.parse(i.pine.version):null;null===u||null===c||u.isGreaterOrEqual(c)?(l.removeDefaults(),e[n]=i):r=!1}return r&&i.createDefaults(),i}},U8pU:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,"a",(function(){return r}))},UCMi:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Date and Price Range");function s(e,t){this._constructor="LineToolDateAndPriceRange";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("UcQu").DateAndPriceRangePaneView
;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Date and Price Range"},s.createProperties=function(e){var t=new n("linetooldateandpricerange",e);return s._configureProperties(t),t},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("Ax76").GeneralDatePriceRangeDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolDateAndPriceRange=s},UCjq:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("aO4+"),s=i("qFKp"),a=i("VaSN"),l=i("FQhm"),c=i("ogJP"),u=i("FIi8"),h=i("VdBB"),d=i("vTIA"),p=i("KnF9"),f=i("3ClC"),_=i("CW80"),m=i("mMWL"),v=i("bOGh"),g=i("fTGZ"),y=i("ikwP"),b=i("gAom"),S=i("mE5r"),w=i("1IXQ");function P(e,t){return e.position-t.position}function C(e,t,i){var r=(e.position-t.position)/(e.time-t.time);return Math.sign(r)*Math.min(Math.abs(r),i)}var T=function(){function e(e,t,i,r){this._position1=null,this._position2=null,this._position3=null,this._position4=null,this._animationStartPosition=null,this._duration=0,this._speed=0,this._terminated=!1,this._minSpeed=e,this._maxSpeed=t,this._acceleration=i,this._minMove=r}return e.prototype.addPosition=function(e,t){if(null!==this._position1){if(this._position1.time===t)return void(this._position1.position=e);if(Math.abs(this._position1.position-e)<this._minMove)return}this._position4=this._position3,this._position3=this._position2,this._position2=this._position1,this._position1={time:t,position:e}},e.prototype.start=function(e,t){if(null!==this._position1&&null!==this._position2&&!(t-this._position1.time>50)){var i=0,r=C(this._position1,this._position2,this._maxSpeed),n=P(this._position1,this._position2),o=[r],s=[n];if(i+=n,null!==this._position3){var a=C(this._position2,this._position3,this._maxSpeed);if(Math.sign(a)===Math.sign(r)){var l=P(this._position2,this._position3);if(o.push(a),s.push(l),i+=l,null!==this._position4){var c=C(this._position3,this._position4,this._maxSpeed);if(Math.sign(c)===Math.sign(r)){var u=P(this._position3,this._position4);o.push(c),s.push(u),i+=u}}}}for(var h,d,p=0,f=0;f<o.length;++f)p+=s[f]/i*o[f];if(!(Math.abs(p)<this._minSpeed))this._animationStartPosition={position:e,time:t},this._speed=p,this._duration=(h=p,d=this._acceleration,Math.abs(h/d))}},e.prototype.getPosition=function(e){var t,i,r;return Object(n.ensureNotNull)(this._animationStartPosition).position+(t=this._speed,i=this._progressDuration(e),r=this._acceleration,Math.sign(t)*(Math.abs(t*i)+.5*r*(i*i)))},e.prototype.finished=function(e){return null===this._animationStartPosition||this._progressDuration(e)===this._duration},e.prototype.terminated=function(){return this._terminated},e.prototype.terminate=function(){this._terminated=!0},e.prototype._progressDuration=function(e){
var t=e-Object(n.ensureNotNull)(this._animationStartPosition).time;return Math.min(t,this._duration)},e}(),x=i("hY0g"),I=i.n(x),E=i("1AAW"),L=i("XcdR"),O=i("dDSx"),A=i("HZKX"),M=i("5VQP"),k=i("7ktv"),D=i("JUY+"),R=i("1gmO"),V=i("Fixu"),B=i("e92V"),N=i("QloM"),F=i("Kxc7"),j=i("//lt"),W=i("JWMC"),H=i("7KDR"),U=i("ZBiT"),z=i("zL3Q"),G=i("lxNp"),q=i("H0vP"),Y=i("4vW/");i.d(t,"customizationSelectionEnabled",(function(){return Q})),i.d(t,"PaneWidgetBase",(function(){return se}));var X=parseInt(U["css-value-pane-controls-padding-left"]),K=parseInt(U["css-value-pane-controls-padding-right"]),J=["LineToolOrder","AlertLabel"];function Q(e){return!e||!e.customization||!e.customization.disableSelection}function Z(e){return!(null===e||!Object(f.isStudy)(e))&&"Volume@tv-basicstudies"===e.metaInfo().id}function $(e,t,i){e.drawBackground&&e.drawBackground(t,i)}function ee(e,t,i){e.draw(t,i)}function te(e,t){return e.paneViews(t)}function ie(e,t){return e.labelPaneViews(t)}function re(e,t){var i=e.strategyOrdersPaneView();return null===i?null:[i]}var ne={contextMenuEnabled:!0,contextMenu:{general:!0,studies:!0,fundamentals:!0,publishedCharts:!0,ordersAndPositions:!0,lineTools:!0,esdStudies:!0,alerts:!0,chartEvents:!0,mainSeries:!0,mainSeriesTrade:!1,objectTree:!0},priceScaleContextMenuEnabled:!0,legendWidgetEnabled:!0,controlsEnabled:!0,propertyPagesEnabled:!0,sourceSelectionEnabled:!0},oe=s.CheckMobile.any();var se=function(){function e(e,t,i){var r=this;this._legendWidget=null,this._paneControls=null,this._isDestroyed=!1,this._trackCrosshairOnlyAfterLongTap=Object(a.lastEventIsTouch)(),this._startTrackPoint=null,this._exitTrackingModeOnNextTry=!1,this._startMoveLineToolParams=null,this._startChangeLineToolParams=null,this._preventSourceChange=!1,this._clonningAtMoveLineTools=null,this._startCloningPoint=null,this._size=new y.Size(0,0),this._themedTopColor=null,this._themedBottomColor=null,this._initCrossHairPosition=null,this._lastDrawingPoint=null,this._firstZoomPoint=null,this._editDialog=null,this._processing=!1,this._touchMove=!1,this._startTouchPoint=null,this._isSelecting=!1,this._prevHoveredHittest=null,this._contextMenuX=0,this._contextMenuY=0,this._startScrollingPos=null,this._isScrolling=!1,this._scrollPriceScale=null,this._scrollXAnimation=null,this._scrollYAnimation=null,this._prevPinchScale=1,this._pinching=!1,this._wasPinched=!1,this._longTap=!1,this._contextMenuOpenedOnLastTap=!1,this._paneControlsResizeObserver=null,this._hideNotMainSourcesInLegendSpawn=null,this._lastClickedSource=null,this._customLegendWidgetsFactoryMap=new Map,this._initialCrosshairPositionBeforeAlign=null,this._onMagnetStateChangedListener=this._onMagnetStateChanged.bind(this),this._onShiftKeyStateChangedListener=this._onShiftKeyStateChanged.bind(this),this._currentCursorClassName="",this._lastFinishedToolId=null,this._canvasConfiguredHandler=function(){return r._state&&r._chartModel().lightUpdate()},this._topCanvasConfiguredHandler=function(){return r._state&&r._chartModel().lightUpdate()},this._chart=e,this._state=t,
this._options=Object(c.merge)(Object(c.clone)(ne),i),this._state&&(this._state.onDestroyed().subscribe(this,this._onStateDestroyed,!0),this._state.dataSourcesCollectionChanged().subscribe(this,this._onDataSourcesCollectionChanged));var n={contextMenuEnabled:this._options.priceScaleContextMenuEnabled,pressedMouseMoveScale:this._options.handleScale.axisPressedMouseMove,currencyLabelEnabled:this._options.currencyLabelEnabled,croppedTickMarks:this._options.croppedTickMarks};void 0!==this._options.priceScaleContextMenu&&(n.contextMenu=this._options.priceScaleContextMenu);var o=function(e,t,i,o,s){return new w.PriceAxisWidget(r,r._chartUndoModel(),i,t,e,n,o,s)},s=e.properties().childs().scalesProperties,l=this._chartModel().rendererOptionsProvider(),u={backgroundBasedTheme:e.backgroundBasedTheme(),rendererOptionsProvider:l,getBackgroundTopColor:function(){return r._chartModel().backgroundTopColor().value()},getBackgroundBottomColor:function(){return r._chartModel().backgroundColor().value()}},h={showLabels:!1};this._lhsPriceAxisesContainer=new S.PriceAxisesContainer(s,"left",o,u,h),this._rhsPriceAxisesContainer=new S.PriceAxisesContainer(s,"right",o,u,h),this._paneCell=document.createElement("td"),this._paneCell.classList.add("chart-markup-table","pane"),this._div=document.createElement("div"),this._div.classList.add("chart-gui-wrapper"),this._paneCell.appendChild(this._div),this._canvasBinding=Object(y.createBoundCanvas)(this._div,new y.Size(16,16)),this._canvasBinding.subscribeCanvasConfigured(this._canvasConfiguredHandler);var d=this._canvasBinding.canvas;d.style.position="absolute",d.style.left="0",d.style.top="0",this._topCanvasBinding=Object(y.createBoundCanvas)(this._div,new y.Size(16,16)),this._topCanvasBinding.subscribeCanvasConfigured(this._topCanvasConfiguredHandler);var p=this._topCanvasBinding.canvas;p.style.position="absolute",p.style.left="0",p.style.top="0",this._rowElement=document.createElement("tr"),this._rowElement.appendChild(this._lhsPriceAxisesContainer.getElement()),this._rowElement.appendChild(this._paneCell),this._rowElement.appendChild(this._rhsPriceAxisesContainer.getElement()),this._options.legendWidgetEnabled&&(this._options.customLegendWidgetFactories&&(this._customLegendWidgetsFactoryMap=this._options.customLegendWidgetFactories),this._loadAndCreateLegendWidget()),this._state&&!this._chart.readOnly()&&this._options.controlsEnabled&&this._loadAndCreatePaneControlsWidget(),Object(z.a)().subscribe(this._onMagnetStateChangedListener),G.pressedKeys.subscribe(this._onShiftKeyStateChangedListener)}return e.prototype.destroy=function(){this._customLegendWidgetsFactoryMap.clear(),this._topCanvasBinding.unsubscribeCanvasConfigured(this._topCanvasConfiguredHandler),this._topCanvasBinding.destroy(),this._canvasBinding.unsubscribeCanvasConfigured(this._canvasConfiguredHandler),this._canvasBinding.destroy(),null!==this._hideNotMainSourcesInLegendSpawn&&this._hideNotMainSourcesInLegendSpawn.destroy(),this._legendWidget&&(this._legendWidget.destroy(),this._legendWidget=null),
null!==this._paneControlsResizeObserver&&this._paneControlsResizeObserver.disconnect(),null!==this._paneControls&&(this._paneControls.destroy(),this._paneControls=null),this._lhsPriceAxisesContainer.destroy(),this._rhsPriceAxisesContainer.destroy(),this.hasState()&&(this.state().onDestroyed().unsubscribeAll(this),this.state().dataSourcesCollectionChanged().unsubscribeAll(this)),Object(z.a)().unsubscribe(this._onMagnetStateChangedListener),G.pressedKeys.unsubscribe(this._onShiftKeyStateChangedListener)},e.prototype.size=function(){return this._size},e.prototype.setSize=function(e){Object(n.assert)(e.w>=0&&e.h>=0,"Try to set invalid size to PaneWidget "+JSON.stringify(e)),this._size.equals(e)||(this._size=e,this._canvasBinding.resizeCanvas({width:e.w,height:e.h}),this._topCanvasBinding.resizeCanvas({width:e.w,height:e.h}),this._paneCell.style.width=e.w+"px",this._paneCell.style.height=e.h+"px",this._div.style.width=e.w+"px",this._div.style.height=e.h+"px",this._rowElement.classList.toggle("js-hidden",0===e.h),null!==this._legendWidget&&this._legendWidget.updateWidgetModeBySize(e),null!==this._paneControls&&this._paneControls.updateWidgetModeByWidth(e.w))},e.prototype.width=function(){return this._size.w},e.prototype.height=function(){return this._size.h},e.prototype.backgroundColor=function(){return this._chartModel().backgroundColor().value()},e.prototype.processDoubleClickOnSource=function(e){e instanceof R.AlertLabel?Object(D.getPriceAlertsDispatcher)().then((function(t){t.openEditDialog(e.alert(),{actionSource:"alert_label_double_click"})})):e.id()!==this._lastFinishedToolId&&this._showEditDialogForSource(e)},e.prototype.setCursorForTool=function(e,t,i){var r=m.tool.value();if(t&&t.control()&&e)this._setCursorClassName("pointer");else if(void 0===i){if(Object(m.toolIsCursor)(r)){if(this._chart.draggingSource||this._isScrolling||this._chartUndoModel()&&this._chartUndoModel().model().sourcesBeingMoved().length)return void this._setCursorClassName("grabbing");if(e&&this._options.sourceSelectionEnabled)return void this._setCursorClassName("pointer")}if("eraser"!==r)if("zoom"!==r){var n=m.cursorTool.value();"dot"!==n?"arrow"!==n?this._setCursorClassName(""):this._setCursorClassName("default"):this._setCursorClassName("dot")}else this._setCursorClassName("zoom-in");else this._setCursorClassName("eraser")}else switch(i){case j.PaneCursorType.VerticalResize:this._setCursorClassName("ns-resize");break;case j.PaneCursorType.HorizontalResize:this._setCursorClassName("ew-resize");break;case j.PaneCursorType.DiagonalNeSwResize:this._setCursorClassName("nesw-resize");break;case j.PaneCursorType.DiagonalNwSeResize:this._setCursorClassName("nwse-resize");break;case j.PaneCursorType.Default:this._setCursorClassName("default");break;case j.PaneCursorType.Pointer:this._setCursorClassName("pointer")}},e.prototype.showContextMenuForSelection=function(e){var t=this._chartUndoModel().selection();if(!t.isEmpty()){var i=t.sources().filter((function(e){return e.hasContextMenu()}));this.showContextMenuForSources(i,e)}},
e.prototype.showContextMenuForSources=function(e,t,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return e.length?(n=e[0],o=Object(c.merge)(Object(c.clone)(this._options.contextMenu),i||{}),s=new A.ActionsProvider(this._chart,o),n!==this._chartUndoModel().crossHairSource()?[3,1]:(n.handleContextMenuEvent(t),[2,Promise.resolve(null)])):[2,Promise.resolve(null)];case 1:return[4,s.contextMenuActionsForSources(e)];case 2:return 0===(a=r.sent()).length?[2,Promise.resolve(null)]:[2,M.ContextMenuManager.createMenu(a).then((function(e){return e.show(t),e}))];case 3:return[2]}}))}))},e.prototype.leftPriceAxisesContainer=function(){return this._lhsPriceAxisesContainer},e.prototype.rightPriceAxisesContainer=function(){return this._rhsPriceAxisesContainer},e.prototype.state=function(){return Object(n.ensureNotNull)(this._state)},e.prototype.hasState=function(){return null!==this._state},e.prototype.setState=function(e){this._state!==e&&(this.hasState()&&(this.state().onDestroyed().unsubscribeAll(this),this.state().dataSourcesCollectionChanged().unsubscribeAll(this)),this._state=e,this.hasState()&&(this.state().onDestroyed().subscribe(this,this._onStateDestroyed,!0),this.state().dataSourcesCollectionChanged().subscribe(this,this._onDataSourcesCollectionChanged),this.updatePriceAxisWidgets()))},e.prototype.getScreenshotData=function(){return{type:"pane",leftAxis:this._lhsPriceAxisesContainer.getScreenshotData(),rightAxis:this._rhsPriceAxisesContainer.getScreenshotData(),content:this._canvasBinding.canvas.toDataURL(),canvas:this._canvasBinding.canvas,contentWidth:this._size.w,contentHeight:this._size.h,studies:[]}},e.prototype.hardResetCanvas=function(){this._size.equals(new y.Size(0,0))||(Object(y.hardResizeCanvas)(this._canvasBinding,this._size),Object(y.hardResizeCanvas)(this._topCanvasBinding,this._size),this._lhsPriceAxisesContainer.hardResetCanvas(),this._rhsPriceAxisesContainer.hardResetCanvas())},e.prototype.updatePriceAxisWidgets=function(){if(this.hasState()){var e=this._chartModel(),t=e.paneForSource(e.mainSeries());if(t){var i=e.priceScaleSlotsCount(),r=this.state(),n=r.visibleLeftPriceScales(),o=r.visibleRightPriceScales();this._lhsPriceAxisesContainer.setScales(n,i.left,t.leftPriceScales().length,i.left+i.right),this._rhsPriceAxisesContainer.setScales(o,i.right,t.rightPriceScales().length,i.left+i.right)}}},e.prototype.update=function(){this.hasState()&&(this._lhsPriceAxisesContainer.update(),this._rhsPriceAxisesContainer.update(),null!==this._legendWidget&&this._legendWidget.update(),this.updateControls())},e.prototype.updateControls=function(){this.hasState()&&null!==this._paneControls&&this._paneControls.update()},e.prototype.updateThemedColors=function(e,t){this._themedTopColor=e,this._themedBottomColor=t,this._updateByThemedColors()},e.prototype.statusWidget=function(){return this._legendWidget},e.prototype.getElement=function(){return this._rowElement},e.prototype.canvasElement=function(){
return this._canvasBinding.canvas},e.prototype.hasCanvas=function(e){return this._canvasBinding.canvas===e||this._topCanvasBinding.canvas===e},e.prototype.pinchStartEvent=function(){this._onTouchEvent(),this._options.handleScale.pinch&&(this._terminateActiveAnimations(),this._prevPinchScale=1,this._pinching=!0,this._wasPinched=!0)},e.prototype.pinchEvent=function(e,t){if(this._onTouchEvent(),this._options.handleScale.pinch){var i=5*(t-this._prevPinchScale);this._prevPinchScale=t,this._chartModel().zoomTime(e.x,i,!0),this._prevPinchScale=t}},e.prototype.pinchEndEvent=function(){this._onTouchEvent(),this._pinching=!1},e.prototype.mouseClickEvent=function(e){this._onMouseEvent(),this._mouseClickOrTapEvent(e)},e.prototype.tapEvent=function(e){this._onTouchEvent(),this._mouseClickOrTapEvent(e)},e.prototype.mouseDownEvent=function(e){this._onMouseEvent(),this._mouseDownOrTouchStartEvent(e)},e.prototype.touchStartEvent=function(e){this._onTouchEvent(),this.hasState()&&(this._chart.setActivePaneWidget(this),this._mouseDownOrTouchStartEvent(e),this._mouseOrTouchMoveEvent(e))},e.prototype.mouseUpEvent=function(e){this._onMouseEvent(),this._mouseUpOrTouchEndEvent(e)},e.prototype.touchEndEvent=function(e){this._onTouchEvent(),this._mouseOrTouchLeaveEvent(e),this._mouseUpOrTouchEndEvent(e)},e.prototype.mouseMoveEvent=function(e){this._onMouseEvent(),this._mouseOrTouchMoveEvent(e)},e.prototype.pressedMouseMoveEvent=function(e){this._onMouseEvent(),this._pressedMouseOrTouchMoveEvent(e)},e.prototype.touchMoveEvent=function(e){this._onTouchEvent(),this._pressedMouseOrTouchMoveEvent(e)},e.prototype.mouseLeaveEvent=function(e){this._onMouseEvent(),this._mouseOrTouchLeaveEvent(e)},e.prototype.mouseDoubleClickEvent=function(e){this._onMouseEvent(),this._mouseDoubleClickOrDoubleTapEvent(e)},e.prototype.wheelClickEvent=function(e){var t,i;if(!this._chart.readOnly()){var r=this._dataSourceAtPoint(e.localX,e.localY);if(!(null===r||r.isCustom||null===r.source||((null===(t=r.hittest)||void 0===t?void 0:t.result())||0)<=h.HitTestResult.MOVEPOINT_BACKGROUND)){var o=new p.EnvironmentState(e),s=null===(i=r.hittest)||void 0===i?void 0:i.eraseMarker();if(o.control()&&void 0!==s&&r.source.processErase)r.source.processErase(this._chartUndoModel(),s);else{var a=this._chartUndoModel();a.selection().isSelected(r.source)||a.selectionMacro((function(e){e.clearSelection(),e.addSourceToSelection(Object(n.ensureNotNull)(r.source))})),this._chart.removeSelectedSources()}}}},e.prototype.doubleTapEvent=function(e){this._onTouchEvent(),this._mouseDoubleClickOrDoubleTapEvent(e)},e.prototype.longTapEvent=function(e){this._onTouchEvent(),this._longTap=!0,null===this._startTrackPoint&&this._trackingModeShouldBeActive()&&this.startTrackingMode(new o.Point(e.localX,e.localY),new o.Point(e.localX,e.localY),new p.EnvironmentState(e))},e.prototype.mouseEnterEvent=function(e){this._onMouseEvent(),this.hasState()&&(this._chart.setActivePaneWidget(this),this._setCursorPosition(e.localX,e.localY,new p.EnvironmentState(e)))},e.prototype.contextMenuEvent=function(e){
this._onMouseEvent(),this._contextMenuEvent(e)},e.prototype.touchContextMenuEvent=function(e){this._onTouchEvent(),this._contextMenuEvent(e)},e.prototype.mouseDownOutsideEvent=function(){this._processOutsideClick({hittest:null,isCustom:!1,renderer:null,source:null})},e.prototype.cancelZoom=function(){this._chartModel().crossHairSource().clearSelection(),this._firstZoomPoint=null,this._preventCrossHairMove()&&this._clearCursorPosition()},e.prototype.startTrackingMode=function(e,t,i){this._startChangeLineToolParams=null,this._startMoveLineToolParams=null,this._chartUndoModel().selectionMacro((function(e){return e.clearSelection()})),this._startTrackPoint=e,this._exitTrackingModeOnNextTry=!1,this._setCursorPosition(t.x,t.y,i),this._initCrossHairPosition=this._chartModel().crossHairSource().currentPoint()},e.prototype.setDragToAnotherPaneCursor=function(){this._setCursorClassName("grabbing")},e.prototype.cloneLineTools=function(e,t){return this._chartUndoModel().cloneLineTools(e,t)},e.prototype.exitTrackingMode=function(){null!==this._state&&null!==this._startTrackPoint&&(this._exitTrackingModeOnNextTry=!0,this._tryExitTrackingMode())},e.prototype.trackingModeEnabled=function(){return null!==this._state&&null!==this._startTrackPoint},e.prototype.addCustomWidgetToLegend=function(e,t){this._options.legendWidgetEnabled&&(this._customLegendWidgetsFactoryMap.set(e,t),null!==this._legendWidget&&this._legendWidget.addCustomWidgetToLegend(e,t))},e.prototype.containsMainSeries=function(){return!!this.hasState()&&this.state().containsMainSeries()},e.prototype.paint=function(e,t){if(this._chartUndoModel()&&this.hasState()){this._state&&(e.priceScaleSideMaxLevel("left")>q.InvalidationLevel.Cursor||e.priceScaleSideMaxLevel("right")>q.InvalidationLevel.Cursor)&&this.recalculatePriceScale(),this._lhsPriceAxisesContainer.paint(e.getterForPriceScaleInvalidationLevelBySide("left")),this._rhsPriceAxisesContainer.paint(e.getterForPriceScaleInvalidationLevelBySide("right"));var i=e.fullInvalidation();if(i!==q.InvalidationLevel.None){if(i>q.InvalidationLevel.Cursor){var r=Object(n.ensureNotNull)(this._canvasBinding.canvas.getContext("2d"));r.setTransform(1,0,0,1,0,0);var o=this._canvasRenderParams();this._drawBackground(r,o),this._state&&(this._drawSources(r,o),this._drawBarsMarks(r,o,t))}if(this._state){var s=Object(n.ensureNotNull)(this._topCanvasBinding.canvas.getContext("2d"));s.setTransform(1,0,0,1,0,0);o=this._topCanvasRenderParams();s.clearRect(0,0,Math.ceil(this._size.w*o.pixelRatio),Math.ceil(this._size.h*o.pixelRatio)),this._drawCrossHair(s,o),this._drawActiveLineTools(s,o)}}}},e.prototype._topCanvasRenderParams=function(){return{pixelRatio:this._topCanvasBinding.pixelRatio,physicalWidth:this._topCanvasBinding.canvas.width,physicalHeight:this._topCanvasBinding.canvas.height,cssWidth:this._chartModel().timeScale().width(),cssHeight:this.height()}},e.prototype._canvasRenderParams=function(){return{pixelRatio:this._canvasBinding.pixelRatio,physicalWidth:this._canvasBinding.canvas.width,physicalHeight:this._canvasBinding.canvas.height,
cssWidth:this._chartModel().timeScale().width(),cssHeight:this.height()}},e.prototype._tryExitTrackingMode=function(){this._exitTrackingModeOnNextTry&&(this._startTrackPoint=null,this._clearCursorPosition())},e.prototype._tryStartMeasure=function(e,t,i,r,n){return!(!Object(m.toolIsMeasure)(m.tool.value())||t.startMeasurePoint())&&(this._preventCrossHairMove()||this._setCursorPosition(e.localX,e.localY,i),r=this._chartModel().magnet().align(r,n,this.state()),t.startMeasuring({price:r,index:n},this.state()),!0)},e.prototype._tryFinishMeasure=function(e,t){if(t.startMeasurePoint()&&!t.endMeasurePoint()){var i=t.price,r=t.index;return i=this._chartModel().magnet().align(i,r,this.state()),t.finishMeasure({price:i,index:r}),Object(m.resetToCursor)(),this._preventCrossHairMove()&&this._clearCursorPosition(),!0}return!1},e.prototype._tryStartZoom=function(e,t,i,r){var n=this._chart.model().model().zoomEnabled();if("zoom"===m.tool.value()&&n){var o=this._chartUndoModel(),s=o.timeScale().indexToCoordinate(i)-.5*o.timeScale().barSpacing();return this._firstZoomPoint={price:t,index:i,x:s,y:e.localY},this._preventCrossHairMove()||this._setCursorPosition(e.localX,e.localY,r),this._chartModel().crossHairSource().startSelection(this.state()),!0}return!1},e.prototype._tryFinishZoom=function(e){return null!==this._firstZoomPoint&&(this._finishZoom(e),!0)},e.prototype._tryHandleEraserMouseDown=function(e,t){if(e.source&&"eraser"===m.tool.value()&&!e.isCustom&&(!(n=e.source)||!n.customization||!n.customization.disableErasing)){var i=this._chartUndoModel();if(null!==e.hittest&&(Object(_.isLineTool)(e.source)||Object(f.isStudy)(e.source))){var r=e.hittest.eraseMarker();return t.control()&&void 0!==r&&e.source.processErase?e.source.processErase(i,r):i.removeSource(e.source,!1),!0}}var n;return!1},e.prototype._tryStartChangingLineTool=function(e,t,i,r){var o,s;if(e.isTouch&&null!==this._startTrackPoint)return!1;if((!e.isTouch||!this._preventSourceChange)&&t.hittest&&Object(_.isLineTool)(t.source)&&t.hittest.result()===h.HitTestResult.CHANGEPOINT){var a=this._chartUndoModel(),l=Object(n.ensure)(null===(o=this.state().mainDataSource())||void 0===o?void 0:o.firstValue()),c=Object(n.ensureNotNull)(t.source.priceScale()).coordinateToPrice(e.localY,l);a.selectionMacro((function(e){e.clearSelection(),e.addSourceToSelection(t.source)}));var u=a.model().magnet().align(c,r,this.state()),d=null===(s=t.hittest.data())||void 0===s?void 0:s.pointIndex;return this._startChangeLineToolParams={source:t.source,startPoint:{index:r,price:u},screenPoint:{x:e.localX,y:e.localY},pointIndex:d,envState:i},!0}return this._startChangeLineToolParams=null,!1},e.prototype._tryStartCloning=function(e,t,i,r){if(i.control()){var n=this._chartUndoModel().selection().sources().filter((function(e){return e.cloneable()}));if(r&&r.cloneable()&&n.push(r),n.length>0)return this._clonningAtMoveLineTools=n.map((function(e){return e.id()})),this._startCloningPoint=new o.Point(e.localX,e.localY),!0}return!1},e.prototype._tryFinishClonning=function(e,t){
var i=this._chartUndoModel(),r=this._chartModel();if(t.control()&&this._clonningAtMoveLineTools){for(var s=new o.Point(e.localX,e.localY),a=Object(n.ensureNotNull)(this._startCloningPoint).subtract(s).length(),l=[],c=0,u=this._clonningAtMoveLineTools;c<u.length;c++){var h=u[c],d=r.dataSourceForId(h);null!==d&&l.push(d)}if(0===l.length)return!1;if(a>8){var p=this.cloneLineTools(l,!0).map((function(e){return Object(n.ensureNotNull)(i.model().dataSourceForId(e))}));i.selectionMacro((function(e){e.clearSelection(),p.forEach((function(t){e.addSourceToSelection(t)}))}));var f=new o.Point(e.localX,e.localY),_=Object(n.ensureNotNull)(p[0].priceScale()),m=Object(n.ensureNotNull)(this.state().mainDataSource()).firstValue(),v={index:i.timeScale().coordinateToIndex(e.localX),price:_.coordinateToPrice(e.localY,Object(n.ensureNotNull)(m))};i.startMovingSources(p,{logical:v,screen:f},null,t),this._clonningAtMoveLineTools=null,this._startCloningPoint=null}return!0}return!1},e.prototype._mouseDownEventForLineTool=function(e,t,i,r){var s,a;if(this.hasState()){var l=this._chartUndoModel(),c=!1,u=null,h=e.localX,d=e.localY,p=l.model().crossHairSource(),f=m.tool.value();Object(m.hideAllDrawings)().setValue(!1),Object(m.lockDrawings)().setValue(!1),e.isTouch&&Object(_.isLineToolName)(f)&&"LineToolBrush"!==f&&!l.lineBeingCreated()&&(this._startTouchPoint=new o.Point(h,d),this._initCrossHairPosition=p.currentPoint());var v=l.lineBeingCreated();if(v&&"LineToolBrush"!==v.toolname){var g=Object(n.ensure)(null===(s=v.ownerSource())||void 0===s?void 0:s.firstValue());if(e.isTouch){if(!this._startTouchPoint){this._startTouchPoint=new o.Point(h,d);var y=v.points(),b=y[y.length-1],S=l.timeScale().indexToCoordinate(b.index),w=Object(n.ensureNotNull)(v.priceScale()).priceToCoordinate(b.price,g);return void(this._lastDrawingPoint=new o.Point(S,w))}}else{u=v;var P=l.model().paneForSource(v);if(P!==this._state&&null!==P){var C=this._externalPaneXCoord(P,e.localX),T=this._externalPaneYCoord(P,e.localY);c=l.coninueCreatingLine({index:Math.round(l.timeScale().coordinateToIndex(C)),price:Object(n.ensure)(null===(a=v.priceScale())||void 0===a?void 0:a.coordinateToPrice(T,g))},t)}else{var x=l.model().magnet().align(r,i,this.state());c=l.coninueCreatingLine({index:i,price:x},t)}}}else if(!e.isTouch||"LineToolBrush"===f){var I={index:i,price:x=l.model().magnet().align(r,i,this.state())};u=l.createLineTool(this.state(),I,f),l.lineBeingCreated()||(c=!0)}u&&l.selectionMacro((function(e){return e.addSourceToSelection(Object(n.ensureNotNull)(u))})),c&&u&&(this._finishTool(u),e.preventDefault())}},e.prototype._handleSelectionMouseDownAndGetJustDeselectedSource=function(e,t,i){var r=this._chartUndoModel(),n=null;if(t&&!t.isCustom&&Q(t.source)){var o=t.hittest&&t.hittest.result()>h.HitTestResult.MOVEPOINT_BACKGROUND;e.isTouch&&t.hittest&&t.hittest.result()===h.HitTestResult.MOVEPOINT_BACKGROUND&&(o=!0),this._preventSourceChange&&(o=!1),r.selectionMacro((function(e){var r;o?(i.control()||!t.source||e.selection().isSelected(t.source)||e.clearSelection(),
i.control()&&t.source&&e.selection().isSelected(t.source)?(n=t.source,e.removeSourceFromSelection(t.source)):t.source&&!t.isCustom&&e.addSourceToSelection(t.source,(null===(r=null==t?void 0:t.hittest)||void 0===r?void 0:r.data())||void 0),e.selection().sources().length>1&&Object(W.trackEvent)("GUI","Multiselect","Click Select")):i.control()||e.clearSelection()}))}return n},e.prototype._processMouseMoveWhileZoom=function(e,t){this._preventCrossHairMove()||this._setCursorPosition(e.localX,e.localY,t)},e.prototype._setCursorPositionOnExternalPane=function(e,t,i,r){t=this._externalPaneXCoord(e,t),i=this._externalPaneYCoord(e,i),this._chart.paneByState(e)._setCursorPosition(t,i,r)},e.prototype._setCursorPosition=function(e,t,i){this._chartModel().setAndSaveCurrentPosition(this._correctXCoord(e),this._correctYCoord(t),this.state(),i)},e.prototype._setCursorClassName=function(e){var t="";e&&(t="pane--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this._paneCell.classList.remove(this._currentCursorClassName),t&&this._paneCell.classList.add(t),this._currentCursorClassName=t,this._paneCell.style.cursor)},e.prototype._processMouseUpForCustomHandler=function(e){var t=Object(n.ensureNotNull)(this._dataSourceAtPoint(e.localX,e.localY));if(t.hittest&&t.hittest.result()===h.HitTestResult.CUSTOM){var i=t.hittest.data();Object(h.tryCallCustomHandler)(e,null==i?void 0:i.mouseUpHandler,null==i?void 0:i.touchEndHandler)}},e.prototype._crossHairShouldBeVisible=function(){var e=this._chartModel().crossHairSource();return Object(_.isLineToolName)(m.tool.value())||e.startMeasurePoint()&&!e.endMeasurePoint()||null!==this._firstZoomPoint||null!==this._chartModel().lineBeingEdited()||null!==this._chartModel().lineBeingCreated()},e.prototype._clearCursorPosition=function(){this._chartModel().clearCurrentPosition()},e.prototype._dataSourceAtPoint=function(e,t){var i=null,n=null,s=null;if(!this.hasState())return null;var a=this.state(),l=a.height(),c=a.width(),u=!1,h=function(e,t,r,o){var a=s?s.result():0;e.result()>a&&(s=e,i=t,n=r,u=o)},p=this._canvasRenderParams(),f=new o.Point(e,t),_=a.sourcesByGroup();this._hitTestChartSources(p,_.tradingSources(),f,h),this._hitTestCustomSources(p,a.customSources(d.a.Foreground),f,h);var m=Object(r.__spreadArrays)(this._chartModel().multiPaneSources(a),_.hitTestSources());this._hitTestChartSources(p,m,f,h);for(var v=this._chartUndoModel(),g=v.crossHairSource(),y=g.paneViews(a)||[],b=y.length-1;b>=0;--b){if((x=y[b].renderer(l,c))&&x.hitTest){var S=x.hitTest(f,p);S&&h(S,g,x,!1)}}if(this.containsMainSeries()){for(var w=v.barsMarksSources(),P=0;P<w.length;++P){var C=w[P],T=C.paneViews(a)||[],x=void 0,I=void 0;for(b=0;b<T.length;b++)if(null!==(x=T[b].renderer(l,c))&&(I=x.hitTest(f,p))){s=I,i=C,n=x,u=!1;break}}var E=v.activeStrategySource().value(),L=E&&E.strategyOrdersPaneView();if(null!==L){var O=L.renderer(l,c),A=O&&O.hitTest(f,p);A&&(s=A,i=E,n=O,u=!1)}}return null===i&&this._hitTestCustomSources(p,a.customSources(d.a.Background),f,h),
null===i&&null!==this._legendWidget&&(i=this._legendWidget.dataSourceAtPoint(e,t)),{source:i,hittest:s,renderer:n,isCustom:u}},e.prototype._hitTestCustomSources=function(e,t,i,r){for(var o=Object(n.ensureNotNull)(this._state),s=o.height(),a=o.width(),l=t.length-1;l>=0;--l){var c=t[l],u=c.paneViews(o);if(0!==u.length)for(var h=u.length-1;h>=0;--h){var d=u[h].renderer(s,a);if(null!==d){var p=d.hitTest(i,e);null!==p&&r(p,c,d,!0)}}}},e.prototype._hitTestChartSources=function(e,t,i,r){for(var o=Object(n.ensureNotNull)(this._state),s=o.height(),a=o.width(),l=t.length;0<l--;){var c=t[l],u=c.paneViews(o);if(null!==u)for(var h=u.length;0<h--;){var d=u[h].renderer(s,a);if(d&&d.hitTest){var p=d.hitTest(i,e);null!==p&&r(p,c,d,!1)}}}},e.prototype._tryStartMovingLineTool=function(e,t,i,r){var s,a;if(null===t.source||!t.source.movable()||null!==this._startTrackPoint)return!1;if(!this._preventSourceChange){var l=this._chartUndoModel(),c=Object(n.ensureNotNull)(Object(n.ensureNotNull)(this._state).mainDataSource()).firstValue(),u=Object(n.ensureNotNull)(t.source.priceScale()).coordinateToPrice(e.localY,Object(n.ensureNotNull)(c)),h=Q(t.source)?l.selection().sources():[t.source],d=new o.Point(e.localX,e.localY),p={index:r,price:u},f=null===(a=null===(s=t.hittest)||void 0===s?void 0:s.data())||void 0===a?void 0:a.itemIndex;return this._startMoveLineToolParams={source:h,startPoint:{logical:p,screen:d},itemIndex:void 0===f?null:f,envState:i},!0}return this._startMoveLineToolParams=null,!1},e.prototype._chartModel=function(){return this._chart.model().model()},e.prototype._chartUndoModel=function(){return this._chart.model()},e.prototype._externalPaneXCoord=function(e,t){t+=this._div.getBoundingClientRect().left+document.body.scrollLeft;var i=Object(n.ensureNotNull)(this._chart.paneByState(e)),r=i._div.getBoundingClientRect().left+document.body.scrollLeft;return i._correctXCoord(t-r)},e.prototype._externalPaneYCoord=function(e,t){t+=this._div.getBoundingClientRect().left+document.body.scrollTop;var i=Object(n.ensureNotNull)(this._chart.paneByState(e)),r=i._div.getBoundingClientRect().left+document.body.scrollTop;return i._correctYCoord(t-r)},e.prototype._correctXCoord=function(e){return Math.max(0,Math.min(e,this._size.w-1))},e.prototype._correctYCoord=function(e){return Math.max(0,Math.min(e,this._size.h-1))},e.prototype._processScroll=function(e){if(this._chart.model().model().scrollEnabled()){var t=Date.now();this._startScrollingPos||this._preventScroll()||(this._startScrollingPos={x:e.clientX,y:e.clientY,timestamp:t,localX:e.localX,localY:e.localY}),null!==this._scrollXAnimation&&this._scrollXAnimation.addPosition(e.localX,t),null!==this._scrollYAnimation&&this._scrollYAnimation.addPosition(e.localY,t);var i=this._chartUndoModel(),r=this.state().defaultPriceScale();if(this._startScrollingPos&&!this._isScrolling&&(this._startScrollingPos.x!==e.clientX||this._startScrollingPos.y!==e.clientY))return i.beginUndoMacro("scroll").setCustomFlag("doesnt_affect_save",!0),
null===this._scrollXAnimation&&oe&&(this._scrollXAnimation=new T(.2,3.2,-.0026,15),this._scrollXAnimation.addPosition(this._startScrollingPos.localX,this._startScrollingPos.timestamp),this._scrollXAnimation.addPosition(e.localX,t)),this._scrollYAnimation,i.selection().isEmpty()||(r=i.selection().sources()[0].priceScale()),null===r||r.isEmpty()||(this._scrollPriceScale=r,i.startScrollPrice(this.state(),r,e.localY)),i.startScrollTime(e.localX),this._isScrolling=!0,void this.setCursorForTool();this._isScrolling&&(null!==this._scrollPriceScale&&i.scrollPriceTo(this.state(),this._scrollPriceScale,e.localY),i.scrollTimeTo(e.localX))}},e.prototype._finishScroll=function(){var e=this._chartUndoModel();e.endScrollTime(),null!==this._scrollPriceScale&&e.endScrollPrice(this.state(),this._scrollPriceScale),e.endUndoMacro(),this._isScrolling=!1,this._startScrollingPos=null,this._scrollPriceScale=null,this.setCursorForTool()},e.prototype._endScroll=function(e){var t=this;if(!this._isScrolling)return!1;var i=this._isScrolling&&this._scrollUndoCommandInStack();if(this._isScrolling){var r=Date.now();null!==this._scrollXAnimation&&this._scrollXAnimation.start(e.localX,r),null!==this._scrollYAnimation&&this._scrollYAnimation.start(e.localY,r);var n=this._chartUndoModel();if((null===this._scrollXAnimation||this._scrollXAnimation.finished(r))&&(null===this._scrollYAnimation||this._scrollYAnimation.finished(r)))return this._finishScroll(),i;var o=this._scrollXAnimation,s=this._scrollYAnimation,a=function(){if(null!==o&&!o.terminated()||null!==s&&!s.terminated()){var e=Date.now(),i=null===o||o.finished(e),r=null===s||s.finished(e);null===o||o.terminated()||n.scrollTimeTo(o.getPosition(e)),null===s||s.terminated()||null===t._scrollPriceScale||n.scrollPriceTo(t.state(),t._scrollPriceScale,s.getPosition(e)),i&&r?t._finishScroll():requestAnimationFrame(a)}};requestAnimationFrame(a)}return i},e.prototype._terminateActiveAnimations=function(){var e=Date.now(),t=null===this._scrollXAnimation||this._scrollXAnimation.finished(e),i=null===this._scrollYAnimation||this._scrollYAnimation.finished(e);null===this._scrollXAnimation&&null===this._scrollYAnimation||t&&i||this._finishScroll(),null!==this._scrollXAnimation&&(this._scrollXAnimation.terminate(),this._scrollXAnimation=null),null!==this._scrollYAnimation&&(this._scrollYAnimation.terminate(),this._scrollYAnimation=null)},e.prototype._preventScroll=function(){return this._trackCrosshairOnlyAfterLongTap&&this._longTap||this._contextMenuOpenedOnLastTap||Object(_.isLineToolName)(m.tool.value())||Boolean(this._chartUndoModel().lineBeingCreated())||null!==this._startTrackPoint},e.prototype._isSelectBarModeEnabled=function(){return this._chartUndoModel().crossHairSource().selectBarMode().value()},e.prototype._preventCrossHairMove=function(){return!!this._trackCrosshairOnlyAfterLongTap&&(null===this._chart.trackingModePaneWidget()&&(!!this._contextMenuOpenedOnLastTap||!this._crossHairShouldBeVisible()&&null===this._startTrackPoint))},e.prototype._finishTool=function(e){
var t=this._chartUndoModel(),i=m.tool.value();if(Object(m.resetToCursor)(),this._preventCrossHairMove()&&this._clearCursorPosition(),t.selectionMacro((function(t){t.addSourceToSelection(e)})),Object(B.c)(i)){var r=t.createUndoCheckpoint();this._chart.showChartPropertiesForSource(e,N.TabNames.text,void 0,r)}this._lastFinishedToolId=e.id(),Object(V.c)(e)},e.prototype._alignSourcesThatBeingMoved=function(e,t,i,r){var n=this,s=this._chartUndoModel(),a=s.timeScale().coordinateToIndex(t);s.model().sourcesBeingMoved().some((function(e){return!e.onlyYMoving()}))&&F.enabled("charting_library_base")&&s.model().sourcesBeingMoved().forEach((function(e){var t=e.points();if(0!==t.length){var i=t.reduce((function(e,t){return t.index<e.index?t:e})).index,r=e.currentMovingPoint()||e.startMovingPoint(),n=i+(a-r.index);n<0&&(a-=n)}})),s.model().sourcesBeingMoved().forEach((function(e){var l=e.convertYCoordinateToPriceForMoving(i,n.state().mainDataSource());null!==l&&(n.setCursorForTool(),s.moveSources({screen:new o.Point(t,i),logical:{index:a,price:l}},r))}))},e.prototype._drawBackground=function(e,t){var i=this._chartModel().properties().paneProperties,r=Math.ceil(t.pixelRatio*this._size.w),n=Math.ceil(t.pixelRatio*this._size.h);i.backgroundType.value()===Y.ColorType.Solid?Object(y.clearRect)(e,0,0,r+1,n+1,this.backgroundColor()):Object(b.clearRectWithGradient)(e,0,0,r+1,n+1,i.backgroundGradientStartColor.value(),i.backgroundGradientEndColor.value())},e.prototype._drawWatermark=function(e,t){var i=this._chartModel().watermarkSource();if(null!==i){var r=this.state();if(r.containsMainSeries())for(var n=i.paneViews(),o=r.height(),s=r.width(),a=0,l=n;a<l.length;a++){var c=l[a];e.save();var u=c.renderer(o,s);u&&u.draw(e,t),e.restore()}}},e.prototype._drawCrossHair=function(e,t){var i=this._chartUndoModel().crossHairSource();i.linesShouldBeHidden()||(!i.visible&&Object(m.lockTimeAxis)().value()&&(i.setLockedPosition(Object(n.ensureNotNull)(this._state)),i.updateAllViews()),this._drawSourceImpl(i,e,t,te,ee))},e.prototype._drawActiveLineTools=function(e,t){for(var i=this._chartModel(),n=0,o=Object(r.__spreadArrays)([i.lineBeingCreated(),i.lineBeingEdited()],i.sourcesBeingMoved()).filter((function(e){return!!e}));n<o.length;n++){var s=o[n];(i.paneForSource(s)===this.state()||s.isMultiPaneEnabled())&&this._drawSourceImpl(s,e,t,te,ee)}},e.prototype._drawSources=function(e,t){var i=this.state(),n=i.model(),o=i.sourcesByGroup(),s=o.tradingSources(),a=Object(r.__spreadArrays)(n.multiPaneSources(i),o.generalSources()),l=i.customSources(d.a.Foreground),c=i.customSources(d.a.Background);this._drawSourceImpl(n.gridSource(),e,t,te,ee),this._drawWatermark(e,t);for(var u=0,h=c;u<h.length;u++){var p=h[u];this._drawSourceImpl(p,e,t,te,$)}for(var f=0,_=a;f<_.length;f++){p=_[f];this._drawSourceImpl(p,e,t,te,$)}for(var m=0,v=l;m<v.length;m++){p=v[m];this._drawSourceImpl(p,e,t,te,$)}var g=Object(r.__spreadArrays)([n.lineBeingCreated(),n.lineBeingEdited()],n.sourcesBeingMoved()),y=n.hoveredSource();(Z(y)||!a.includes(y)&&!l.includes(y))&&(y=null)
;for(var b=[],S=n.selection().sources().filter((function(e){return!Z(e)})),w=[],P=0,C=a;P<C.length;P++){var T=(p=C[P])===y;g.includes(p)?T&&(y=null):S.includes(p)?(w.push(p),T&&(y=null)):T||b.push(p)}for(var x=0,I=c;x<I.length;x++){p=I[x];this._drawSourceImpl(p,e,t,te,ee)}for(var E=0,L=b;E<L.length;E++){p=L[E];this._drawSourceImpl(p,e,t,te,ee)}for(var O=0,A=l;O<A.length;O++){(p=A[O])!==y&&this._drawSourceImpl(p,e,t,te,ee)}var M=n.activeStrategySource().value();M&&this.containsMainSeries()&&this._drawSourceImpl(M,e,t,re,ee);for(var k=0,D=s;k<D.length;k++){p=D[k];this._drawSourceImpl(p,e,t,te,ee)}for(var R=0,V=w;R<V.length;R++){p=V[R];this._drawSourceImpl(p,e,t,te,ee)}y&&this._drawSourceImpl(y,e,t,te,ee);for(var B=0,N=b;B<N.length;B++){p=N[B];this._drawSourceImpl(p,e,t,ie,ee)}for(var F=0,j=l;F<j.length;F++){(p=j[F])!==y&&this._drawSourceImpl(p,e,t,ie,ee)}for(var W=0,H=w;W<H.length;W++){p=H[W];this._drawSourceImpl(p,e,t,ie,ee)}y&&this._drawSourceImpl(y,e,t,ie,ee)},e.prototype._drawSourceImpl=function(e,t,i,r,n){var o=this.state(),s=o.height(),a=o.width(),l=r(e,this.state());if(l)for(var c=0,u=l;c<u.length;c++){var h=u[c].renderer(s,a);h&&(t.save(),n(h,t,i),t.restore())}},e.prototype._drawBarsMarks=function(e,t,i){if(this.containsMainSeries()&&!i)for(var r=0,n=this._chartUndoModel().barsMarksSources();r<n.length;r++){var o=n[r];this._drawSourceImpl(o,e,t,te,ee)}},e.prototype._updateByThemedColors=function(){null!==this._legendWidget&&this._legendWidget.updateThemedColors(this._themedTopColor),null!==this._paneControls&&this._paneControls.updateThemedColors(this._themedTopColor)},e.prototype._scrollUndoCommandInStack=function(){var e=this._chartUndoModel().undoHistory().undoStack();if(e.isEmpty())return!1;var t=e.head();if(!(t instanceof v.a))return!1;if(t.isEmpty())return!1;var i=t.commands()[0];return i instanceof O.PriceScaleChangeUndoCommand||i instanceof L.a},e.prototype._onStateDestroyed=function(){this.setState(null)},e.prototype._getHideNotMainSourcesValue=function(){return!this._chart.isActive()&&!this._chart.crossHairSyncEnabled()},e.prototype._onDataSourcesCollectionChanged=function(){this._startMoveLineToolParams=null,null!==this._legendWidget&&this._legendWidget.updateLayout()},e.prototype._processMouseMoveForCustomHandler=function(e,t){var i=e.hittest&&e.hittest.result()===h.HitTestResult.CUSTOM;if(i&&(null===this._prevHoveredHittest||this._prevHoveredHittest.renderer!==e.renderer)){var r=e.hittest&&e.hittest.data();Object(h.tryCallCustomHandler)(t,null==r?void 0:r.mouseEnterHandler),this._prevHoveredHittest=e}if(i){r=e.hittest&&e.hittest.data();Object(h.tryCallCustomHandler)(t,null==r?void 0:r.pressedMouseMoveHandler,null==r?void 0:r.touchMoveHandler)}if(!t.isTouch&&null!==this._prevHoveredHittest&&this._prevHoveredHittest.renderer!==e.renderer){r=this._prevHoveredHittest.hittest&&this._prevHoveredHittest.hittest.data();Object(h.tryCallCustomHandler)(t,null==r?void 0:r.mouseLeaveHandler),this._prevHoveredHittest=null}},e.prototype._startChangeOrMoveLineToolIfNeeded=function(){
if(null!==this._startChangeLineToolParams){var e=this._startChangeLineToolParams;this._chartUndoModel().startChangingLinetool(e.source,e.startPoint,e.pointIndex,e.envState)}if(null!==this._startMoveLineToolParams){e=this._startMoveLineToolParams;this._chartUndoModel().startMovingSources(e.source,e.startPoint,e.itemIndex,e.envState)}this._startMoveLineToolParams=null,this._startChangeLineToolParams=null},e.prototype._trackingModeShouldBeActive=function(){return!(!this._trackCrosshairOnlyAfterLongTap||this._contextMenuOpenedOnLastTap||this._crossHairShouldBeVisible())&&this._longTap},e.prototype._processOutsideClick=function(e){var t=null,i=this._chartModel();if(e.source&&(t=e.isCustom?i.customSourceName(e.source):e.source.id()),null!==this._lastClickedSource&&this._lastClickedSource.id!==t){var r=this._lastClickedSource.id,n=this._lastClickedSource.isCustom?i.customSourceForName(r):i.dataSourceForId(r);null!==n&&n.onClickOutside&&(n.onClickOutside(),this._chartModel().updateSource(n))}this._lastClickedSource=null!==t?{id:t,isCustom:e.isCustom}:null},e.prototype._mouseClickOrTapEvent=function(e){if(this.hasState()){var t=this._dataSourceAtPoint(e.localX,e.localY),i=t&&t.source,r=this._chartUndoModel();if(this._processOutsideClick(Object(n.ensureNotNull)(t)),!this._isSelectBarModeEnabled()||e.isTouch&&this.trackingModeEnabled()&&!this._exitTrackingModeOnNextTry||r.crossHairSource().trySelectCurrentBar(),t&&t.hittest&&t.hittest.result()===h.HitTestResult.CUSTOM){var o=t.hittest.data();Object(h.tryCallCustomHandler)(e,null==o?void 0:o.clickHandler,null==o?void 0:o.tapHandler)&&r.model().updateSource(Object(n.ensureNotNull)(i))}!e.isTouch||this._isSelectBarModeEnabled()||t&&t.source===r.crossHairSource()||this._tryExitTrackingMode(),i instanceof g.BarsMarksContainer&&t&&t.hittest&&t.hittest.data()&&i.onClicked(Object(n.ensureNotNull)(t.hittest).data()),i&&Object(_.isLineTool)(i)&&Object(l.emit)("drawing_event",i.id(),"click")}},e.prototype._mouseDownOrTouchStartEvent=function(e){if(e.isTouch&&(this._longTap=!1,this._exitTrackingModeOnNextTry=null!==this._startTrackPoint),this._contextMenuOpenedOnLastTap=!1,this._lastFinishedToolId=null,this.hasState()){if(this._terminateActiveAnimations(),e.isTouch&&this._switchTrackingModeFromAnotherPaneIfNeeded(e),document.activeElement!==document.body&&document.activeElement!==document.documentElement)document.activeElement&&document.activeElement.blur?document.activeElement.blur():document.body.focus();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}Object(l.emit)("mouse_down",{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),this._updateCommonTooltip(null);var i=this._chartUndoModel(),r=new p.EnvironmentState(e);i.mainSeries().clearGotoDateResult(),this.hideInplaceEditor();var s=this.state().defaultPriceScale();if(!s.isEmpty()&&!i.timeScale().isEmpty()){var c=i.crossHairSource();if(!e.isTouch&&"LineToolBrush"!==m.tool.value()){var u=i.lineBeingCreated(),d=null!==u?i.model().paneForSource(u):null
;null!==d&&d!==this._state?this._setCursorPositionOnExternalPane(d,e.localX,e.localY,r):this._setCursorPosition(e.localX,e.localY,r)}e.isTouch&&Object(_.isLineToolName)(m.tool.value())&&("LineToolBrush"!==m.tool.value()&&null===c.pane?this._chart.updateCrossHairPositionIfNeeded():"LineToolBrush"===m.tool.value()&&this._clearCursorPosition());var f=Object(n.ensureNotNull)(this.state().mainDataSource()).firstValue(),v=s.coordinateToPrice(e.localY,Object(n.ensureNotNull)(f)),g=this._chartModel().timeScale().coordinateToIndex(e.localX);if(c.startMeasurePoint()&&c.endMeasurePoint()&&c.clearMeasure(),r.shift()&&Object(m.toolIsCursor)(m.tool.value())&&i.selection().isEmpty()&&m.tool.setValue("measure"),!(this._tryStartMeasure(e,c,r,v,g)||this._tryFinishMeasure(e,c)||this._tryFinishZoom(e)||this._tryStartZoom(e,v,g,r))){e.isTouch&&null!==this._startTrackPoint&&(this._initCrossHairPosition=c.currentPoint(),this._startTrackPoint=new o.Point(e.localX,e.localY));var y=Object(n.ensureNotNull)(this._dataSourceAtPoint(e.localX,e.localY));if(!y.isCustom&&e.isTouch&&(this._preventSourceChange=null===y.source||!i.selection().isSelected(y.source)),this._isSelectBarModeEnabled()||this._isScrolling||!Object(_.isLineToolName)(m.tool.value())&&!i.lineBeingCreated()){if(y.hittest&&y.hittest.result()===h.HitTestResult.CUSTOM){var b=y.hittest.data();Object(h.tryCallCustomHandler)(e,null==b?void 0:b.mouseDownHandler,null==b?void 0:b.touchStartHandler)}if(!this._chart.readOnly()){if(y.hittest&&y.source&&y.hittest.result()===h.HitTestResult.CUSTOM_MOVE){b=y.hittest.data();if(y.isCustom){if(Object(h.tryCallCustomHandler)(e,null==b?void 0:b.pressedMouseMoveHandler,null==b?void 0:b.touchMoveHandler))return}else{var S=null==b?void 0:b.itemIndex;if(void 0!==S)return void i.startCustomMoving(y.source,S,e)}}var w=this._handleSelectionMouseDownAndGetJustDeselectedSource(e,y,r);if(this._tryHandleEraserMouseDown(y,r))return;var P=y.source&&Object(_.isLineTool)(y.source)&&y.source.isLocked&&y.source.isLocked();if(!(Object(m.lockDrawings)().value()||P)&&!y.isCustom){if(y.source&&y.source.userEditEnabled&&!y.source.userEditEnabled())return;if(this._tryStartChangingLineTool(e,y,r,g))return;if(y.hittest&&((C=y.hittest.result())===h.HitTestResult.MOVEPOINT||C===h.HitTestResult.MOVEPOINT_BACKGROUND&&Object(a.lastEventIsTouch)())){if(this._tryStartCloning(e,y,r,w))return;if(this._tryStartMovingLineTool(e,y,r,g))return}}if(y.source&&y.source instanceof k.PriceDataSource&&y.source.isDraggable())return void(this._chart.draggingSource=y.source)}var C;y&&y.hittest&&y.hittest.result()===h.HitTestResult.REGULAR||(this._processing=!0)}else(!F.enabled("charting_library_base")||g>=0)&&(r.shift()||i.selectionMacro((function(e){return e.clearSelection()})),this._mouseDownEventForLineTool(e,r,g,v))}}}},e.prototype._mouseUpOrTouchEndEvent=function(e){var t,i,r,o=this;if(this.hasState()){var s=e.isTouch&&null!==this._startTrackPoint,c=e.isTouch&&this._wasPinched;e.isTouch&&(this._wasPinched=!1,this._longTap=!1),this._startMoveLineToolParams=null,
this._startChangeLineToolParams=null,this._initialCrosshairPositionBeforeAlign=null,this._processMouseUpForCustomHandler(e),this._isSelecting=!1;var u=this._chartUndoModel(),d=u.model(),f=d.crossHairSource();if(f.selection()&&null===this._firstZoomPoint){var v=this.state().lineToolsForArea(f.selection());u.selectionMacro((function(e){v.forEach((function(t){e.addSourceToSelection(t)}))})),f.clearSelection(),Object(W.trackEvent)("GUI","Multiselect","Area Select")}Object(l.emit)("mouse_up",{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY});var g=e.isTouch&&this._touchMove;e.isTouch&&(this._touchMove=!1);var y=new p.EnvironmentState(e),b=m.tool.value();if(e.isTouch&&!g&&"LineToolBrush"!==b&&Object(_.isLineToolName)(b)&&!u.lineBeingCreated()){if(this._chart.justActivated())return;if(f.pane!==this._state)return void this._setCursorPosition(e.localX,e.localY,y);var S=f.currentPoint(),w=this.state().defaultPriceScale(),P=Object(n.ensure)(null===(t=this.state().mainDataSource())||void 0===t?void 0:t.firstValue()),C={index:Math.round(u.timeScale().coordinateToIndex(S.x)),price:w.coordinateToPrice(S.y,P)},T=Object(n.ensureNotNull)(u.createLineTool(this.state(),C,b));return u.selectionMacro((function(e){e.addSourceToSelection(T)})),u.lineBeingCreated()||(this._finishTool(T),e.preventDefault()),void(this._startTouchPoint=null)}if(u.lineBeingCreated()&&"LineToolBrush"!==(null===(i=u.lineBeingCreated())||void 0===i?void 0:i.toolname)&&e.isTouch&&this._startTouchPoint){this._startTouchPoint=null;var x=null;if(!g){var I=(x=Object(n.ensureNotNull)(u.lineBeingCreated())).points()[x.points().length-1],E=u.coninueCreatingLine({index:I.index,price:I.price},new p.EnvironmentState(e));this._lastDrawingPoint=null,E&&(this._finishTool(x),e.preventDefault())}}else if(null!==this._firstZoomPoint&&this._firstZoomPoint.draggingMode)this._finishZoom(e);else if(!e.isTouch||!this._tryFinishMeasure(e,f)){if(this._processing=!1,u.customMoveBeingProcessed()&&u.endCustomMoving(),d.lineBeingEdited())return u.endChangingLinetool(!1),void(this._preventCrossHairMove()&&this._clearCursorPosition());if("LineToolBrush"!==b||this._isSelectBarModeEnabled()){if(d.sourcesBeingMoved().length)return u.endMovingSource(!1),d.sourcesBeingMoved().forEach((function(e){o.setCursorForTool(e)})),void d.invalidate(q.InvalidationMask.cursor());if(!this._chart.readOnly()){var L=this._dataSourceAtPoint(e.localX,e.localY),O=e.localX>=0&&e.localX<this._size.w;if((!L||L.source!==f)&&O){var A=u.timeScale().coordinateToIndex(e.localX);d.onSyncScrollNeeded(A)}}var M=this._isScrolling,k=this._endScroll(e);if(this._chart.draggingSource){var D=e.target,R=this._chart.paneByCanvas(D);if(R&&R!==this&&this._chart.draggingSource&&(k&&u.undoHistory().undo(),u.mergeToPane(this._chart.draggingSource,R.state())),this._chart.timeAxisByCanvas(D))if(d.isUnmergeAvailableForSource(this._chart.draggingSource))k&&u.undoHistory().undo(),u.unmergeToNewBottomPane(this._chart.draggingSource);else{
var B=d.panes(),N=Object(n.ensureNotNull)(d.paneForSource(this._chart.draggingSource)),F=B.indexOf(N);F!==B.length-1&&(k&&u.undoHistory().undo(),N.isMaximized()&&this._chart.toggleMaximizePane(),u.movePane(F,B.length-1))}this._chart.draggingSource=null;var j=this._chart.getTimeScale();j&&j.restoreDefaultCursor();L=this._dataSourceAtPoint(e.localX,e.localY);for(var H=this._chart.paneWidgets(),U=0;U<H.length;U++){var z=H[U];z===this&&L&&!L.isCustom?z.setCursorForTool(L.source||void 0):z.setCursorForTool(),z.leftPriceAxisesContainer().restoreDefaultCursor(),z.rightPriceAxisesContainer().restoreDefaultCursor()}}if(!(s||y.control()||M||c)){var G=Object(n.ensureNotNull)(this._dataSourceAtPoint(e.localX,e.localY));G.source&&G.source&&!G.isCustom&&(G.hittest&&G.hittest.result()>h.HitTestResult.MOVEPOINT_BACKGROUND||Object(a.lastEventIsTouch)())&&u.selectionMacro((function(e){e.clearSelection(),e.addSourceToSelection(Object(n.ensureNotNull)(G.source))}))}e.isTouch&&(this._touchMove=!1)}else{var Y=u.lineBeingCreated();if(null!==Y&&(Object(V.c)(Y),Y.finish()),(w=this.state().defaultPriceScale()).isEmpty())return;if(!Y)return;var X=Object(n.ensure)(null===(r=Y.ownerSource())||void 0===r?void 0:r.firstValue()),K=w.coordinateToPrice(e.localY,X);C={index:Math.round(u.timeScale().coordinateToIndex(e.localX)),price:K};u.coninueCreatingLine(C)}}}},e.prototype._mouseOrTouchMoveEvent=function(e){if(this.hasState()){var t=Object(n.ensureNotNull)(this._dataSourceAtPoint(e.localX,e.localY));this._processMouseMoveForCustomHandler(t,e);var i=this._chartUndoModel();if(i){var r=i.crossHairSource();null!==this._initialCrosshairPositionBeforeAlign&&(this._initialCrosshairPositionBeforeAlign=new o.Point(r.originX(),r.originY()));var s=e.localX,a=e.localY,l=new p.EnvironmentState(e);if(null===this._firstZoomPoint){var c=!1;if(!(this._chart.readOnly()||this._editDialog&&this._editDialog.isVisible())){var u=m.tool.value(),d=null;if(!this._processing&&(Object(m.toolIsCursor)(u)||"eraser"===u||l.control()||!i.lineBeingCreated())){var f=t&&t.source,v=t&&t.hittest&&t.hittest.data();c=Boolean(v&&v.hideCrosshairLinesOnHover)||!!f&&Object(_.isLineTool)(f)&&-1!==J.indexOf(f.toolname),t.hittest&&!t.isCustom&&t.hittest.result()>h.HitTestResult.MOVEPOINT_BACKGROUND?(d=t.source,t.source&&Q(t.source)&&("eraser"!==u||t.source!==i.mainSeries())?i.model().setHoveredSource(t.source,t.hittest.data()):i.model().setHoveredSource(null,null)):i.model().setHoveredSource(null,null)}if(this._options.sourceSelectionEnabled)if(this._isSelectBarModeEnabled()||t.isCustom)this._setCursorClassName("pointer");else{var g,y=(g=t.hittest&&t.hittest.data())&&g.cursorType;this.setCursorForTool(d,l,null===y?void 0:y)}if(this._updateCommonTooltip(t),null!==t.hittest&&t.hittest.result()===h.HitTestResult.CUSTOM_MOVE)switch(y=(g=t.hittest.data()||{}).cursorType){case j.PaneCursorType.VerticalResize:this._setCursorClassName("ns-resize");break;case j.PaneCursorType.HorizontalResize:this._setCursorClassName("we-resize");break;case j.PaneCursorType.DiagonalNeSwResize:
this._setCursorClassName("nesw-resize");break;case j.PaneCursorType.DiagonalNwSeResize:this._setCursorClassName("nwse-resize")}}if(this._preventCrossHairMove()&&this._clearCursorPosition(),r.setLinesShouldBeHidden(c),this._chart.readOnly()&&this._options.sourceSelectionEnabled&&(!t.isCustom&&null!==t.source&&Q(t.source)?i.model().setHoveredSource(t.source,t.hittest&&t.hittest.data()):i.model().setHoveredSource(null,null)),i.lineBeingCreated()){var b=i.lineBeingCreated(),S=null===b?null:i.model().paneForSource(b);if(null!==S&&S!==this._state)return void this._setCursorPositionOnExternalPane(S,s,a,l)}e.isTouch||this._setCursorPosition(s,a,l)}else this._processMouseMoveWhileZoom(e,l)}}},e.prototype._pressedMouseOrTouchMoveEvent=function(e){var t,i;if(this.hasState()&&!this._pinching){this._startChangeOrMoveLineToolIfNeeded(),e.isTouch&&(this._touchMove=!0,this._preventSourceChange=!1);var r=new p.EnvironmentState(e),s=this._chartUndoModel(),a=s.crossHairSource(),l=e.localX,c=e.localY;if(null!==this._initialCrosshairPositionBeforeAlign&&(this._initialCrosshairPositionBeforeAlign=new o.Point(a.originX(),a.originY())),null!==this._firstZoomPoint)return this._processMouseMoveWhileZoom(e),void(this._firstZoomPoint.draggingMode=!0);if(e.isTouch&&a.startMeasurePoint())this._setCursorPosition(l,c,r);else{var u=m.tool.value();if(e.isTouch&&this._startTouchPoint&&Object(_.isLineToolName)(u)&&"LineToolBrush"!==u&&!s.lineBeingCreated()&&!this._isSelectBarModeEnabled()){this._chart.justActivated()&&(this._initCrossHairPosition=a.currentPoint());var h=Object(n.ensureNotNull)(this._initCrossHairPosition),d=new o.Point(l,c).subtract(this._startTouchPoint),f=h.add(d);this._setCursorPosition(f.x,f.y,r)}else if(e.isTouch&&s.lineBeingCreated()&&"LineToolBrush"!==(null===(t=s.lineBeingCreated())||void 0===t?void 0:t.toolname)){if(this._startTouchPoint){var v=Object(n.ensureNotNull)(s.lineBeingCreated()),g=Object(n.ensureNotNull)(s.model().paneForSource(v));if(g!==this._state)return void this._setCursorPositionOnExternalPane(g,e.localX,e.localY,r);var y=e.localX-this._startTouchPoint.x,b=e.localY-this._startTouchPoint.y,S=Object(n.ensureNotNull)(this._lastDrawingPoint).x+y,w=Object(n.ensureNotNull)(this._lastDrawingPoint).y+b;this._setCursorPosition(S,w,r)}}else{if(e.isTouch&&null!==this._startTrackPoint){this._exitTrackingModeOnNextTry=!1;h=Object(n.ensureNotNull)(this._initCrossHairPosition),d=new o.Point(l,c).subtract(this._startTrackPoint),f=h.add(d);this._setCursorPosition(f.x,f.y,r)}else e.isTouch&&this._preventCrossHairMove()||this._setCursorPosition(l,c,r);var P=this._isSelectBarModeEnabled();if(!Object(_.isLineToolName)(u)||"LineToolBrush"===u||P||r.control()){if("LineToolBrush"===u&&!P){var C=this.state().defaultPriceScale();if(C.isEmpty())return;var T=s.lineBeingCreated();if(!T)return;var x=new o.Point(e.localX,e.localY),I=Object(n.ensure)(null===(i=T.ownerSource())||void 0===i?void 0:i.firstValue());return x.price=C.coordinateToPrice(e.localY,I),x.index=Math.round(s.timeScale().coordinateToIndex(e.localX)),
void((!F.enabled("charting_library_base")||x.index>=0)&&s.coninueCreatingLine(x))}if(this._chart.draggingSource){var E=e.target,L=this._chart.paneByCanvas(E);L&&(L!==this?L.setDragToAnotherPaneCursor():L.setCursorForTool());var O=this._chart.timeAxisByCanvas(E);O&&O.setCursor("grabbing")}if(!s.timeScale().isEmpty()){var A=this._options.handleScroll;if(A.pressedMouseMove&&!e.isTouch||(A.horzTouchDrag||A.vertTouchDrag)&&e.isTouch)if(s.customMoveBeingProcessed())s.processCustomMove(e);else{if(s.model().lineBeingEdited()){var M=Math.round(s.timeScale().coordinateToIndex(l));return(!F.enabled("charting_library_base")||M>=0)&&s.changeLinePoint(new o.Point(l,c),r),void this.setCursorForTool()}if(s.model().sourcesBeingMoved().length)this._alignSourcesThatBeingMoved(s.model().sourcesBeingMoved(),e.localX,e.localY,r);else if(!this._tryFinishClonning(e,new p.EnvironmentState(e))){var k=Object(m.toolIsMeasure)(u)||a.startMeasurePoint()&&a.endMeasurePoint();this._chart.readOnly()||!r.control()||Object(_.isLineToolName)(u)||k?(this._processScroll(e),this._preventScroll()&&!this._preventCrossHairMove()&&null===this._startTrackPoint&&this._setCursorPosition(e.localX,e.localY,new p.EnvironmentState(e))):this._isSelecting||(a.startSelection(this.state()),this._isSelecting=!0)}}}}}}}},e.prototype._mouseOrTouchLeaveEvent=function(e){if(this.hasState()){var t=this._chartUndoModel();if(t){if(e.isTouch||this._clearCursorPosition(),t.model().setHoveredSource(null,null),null!==this._prevHoveredHittest){var i=this._prevHoveredHittest.hittest&&this._prevHoveredHittest.hittest.data();Object(h.tryCallCustomHandler)(e,null==i?void 0:i.mouseLeaveHandler),this._prevHoveredHittest=null}this._updateCommonTooltip(null),this._chart.unsetActivePaneWidget()}}},e.prototype._mouseDoubleClickOrDoubleTapEvent=function(e){if(this.hasState()){var t=!this._chart.readOnly()&&!Object(_.isLineToolName)(m.tool.value())&&Object(n.ensureNotNull)(this._dataSourceAtPoint(e.localX,e.localY))||null,i=t&&t.hittest&&t.source||null;if(i&&t&&t.hittest&&t.hittest.result()<=h.HitTestResult.MOVEPOINT_BACKGROUND&&!e.isTouch&&(i=null),i&&t&&!t.isCustom&&!Q(i)&&(i=null),t&&t.isCustom){if(t.hittest&&t.hittest.result()===h.HitTestResult.CUSTOM){var r=t.hittest.data();Object(h.tryCallCustomHandler)(e,null==r?void 0:r.doubleClickHandler,null==r?void 0:r.doubleTapHandler)}}else i&&t&&!t.isCustom?this.processDoubleClickOnSource(i):this._chart.readOnly()||Object(_.isLineToolName)(m.tool.value())||this._chartUndoModel().lineBeingCreated()||!this._chartUndoModel().selection().isEmpty()||this._chart.toggleMaximizePane(this)}},e.prototype._contextMenuEvent=function(e){var t=this,i=this._chartUndoModel();if(!i.crossHairSource().startMeasurePoint()||this._trackCrosshairOnlyAfterLongTap){if(!this._pinching&&(null===this._firstZoomPoint||this._trackCrosshairOnlyAfterLongTap||this.cancelZoom(),!this.hideInplaceEditor())){if(!Object(m.toolIsCursor)(m.tool.value())&&!this._isSelectBarModeEnabled()){if(e.isTouch)return;return Object(m.resetToCursor)(!0),this.setCursorForTool(),
void(i.lineBeingCreated()&&i.cancelCreatingLine())}if(this._options.contextMenuEnabled){var r=this._dataSourceAtPoint(e.localX,e.localY),n=r&&!r.isCustom?r.source:null;if(e.isTouch&&null!==this._startTrackPoint){if(this._preventSourceChange)return;this._clearCursorPosition()}e.isTouch&&(this._contextMenuOpenedOnLastTap=!0,this._startTrackPoint=null),this._contextMenuX=e.localX,this._contextMenuY=e.localY;var o=r&&r.hittest?r.hittest.result():0,s=o>=h.HitTestResult.REGULAR||o>=h.HitTestResult.MOVEPOINT_BACKGROUND&&e.isTouch;if(r&&r.isCustom){if(s&&r.hittest&&r.hittest.result()===h.HitTestResult.CUSTOM){var a=r.hittest.data();Object(h.tryCallCustomHandler)(e,null==a?void 0:a.contextMenuHandler,null==a?void 0:a.touchContextMenuHandler)}}else{this._chart.updateActions();var l=!1;i.selectionMacro((function(i){null!==n&&s?(i.selection().isSelected(n)||(i.clearSelection(),i.addSourceToSelection(n)),l=n.hasContextMenu()):(t._options.contextMenu.general&&t._contextMenu(e).then((function(t){t.show(e)})),i.clearSelection())})),l&&(n&&!Q(n)?this.showContextMenuForSources([n],e):this.showContextMenuForSelection(e))}}}}else i.crossHairSource().clearMeasure()},e.prototype._onMouseEvent=function(){this._preventSourceChange=!1,this._startTrackPoint=null,this._trackCrosshairOnlyAfterLongTap=!1},e.prototype._onTouchEvent=function(){this._trackCrosshairOnlyAfterLongTap=!0},e.prototype._switchTrackingModeFromAnotherPaneIfNeeded=function(e){var t=this._chart.trackingModePaneWidget();if(null!==t&&t!==this){var i=this._chartModel().crossHairSource().currentPoint();this._chart.exitTrackingMode(),this.startTrackingMode(new o.Point(e.localX,e.localY),new o.Point(i.x,e.localY),new p.EnvironmentState(e))}},e.prototype._contextMenu=function(e){var t=function(e){return e instanceof H.Separator},i=this._customActions(),r=this._initActions(e).filter((function(e){return null!==e}));i.remove.forEach((function(e){for(var t=0;t<r.length;t++){var i=r[t];if(i instanceof H.Action&&i.getLabel()===e){r.splice(t,1);break}}}));for(var n=i.top.concat(r).concat(i.bottom),o=n.length-1;o>0;o--)t(n[o])&&t(n[o-1])&&n.splice(o,1);return n.length&&t(n[0])&&n.splice(0,1),n.length&&t(n[n.length-1])&&n.splice(n.length-1,1),M.ContextMenuManager.createMenu(n,{statName:"ChartContextMenu"})},e.prototype._loadAndCreateLegendWidget=function(){var e=this;Promise.all([i.e("vendors_embed"),i.e(15),i.e(123),i.e(152),i.e(259),i.e(0),i.e(33),i.e(85),i.e(106),i.e(144),i.e("chart-widget-gui")]).then(i.bind(null,"sAH5")).then((function(t){if(!e._isDestroyed){var i=t.LegendWidget,r=Object(u.deepExtend)({},e._options.legendWidget);r.canShowSourceCode=!e._chart.onWidget()&&!s.CheckMobile.any(),r.readOnlyMode=r.readOnlyMode||e._chart.readOnly(),r.statusesWidgets={sourceStatusesEnabled:e._options.sourceStatusesWidgetEnabled,sourceStatuses:e._options.sourceStatusesWidget||{},marketStatusEnabled:e._options.marketStatusWidgetEnabled,marketStatus:e._options.marketStatusWidget||{},dataUpdateModeEnabled:e._options.chartWarningWidgetEnabled,dataUpdateMode:e._options.chartWarningWidget||{},
dataProblemEnabled:e._options.dataProblemWidgetEnabled};var o=new I.a(e._getHideNotMainSourcesValue());e._hideNotMainSourcesInLegendSpawn=Object(E.combine)((function(){return{}}),e._chart.chartWidgetCollection().activeChartWidget,e._chart.chartWidgetCollection().lock.crosshair),e._hideNotMainSourcesInLegendSpawn.subscribe((function(){o.setValue(e._getHideNotMainSourcesValue())})),e._legendWidget=new i(e._chartUndoModel(),e,e._chart.backgroundBasedTheme(),o,r,{showContextMenuForSelection:e.showContextMenuForSelection.bind(e),showContextMenuForSources:e.showContextMenuForSources.bind(e),updateActions:e._chart.updateActions.bind(e._chart),showChartPropertiesForSource:e._chart.showChartPropertiesForSource.bind(e._chart),showGeneralChartProperties:e._chart.showGeneralChartProperties.bind(e._chart),showObjectsTreeDialog:e._chart.showObjectsTreeDialog.bind(e._chart)}),e._div.appendChild(e._legendWidget.getElement()),e._legendWidget.updateLayout(),e._legendWidget.updateWidgetModeBySize(e._size),e._legendWidget.updateThemedColors(e._themedTopColor);for(var a=0,l=Array.from(e._customLegendWidgetsFactoryMap.keys());a<l.length;a++){var c=l[a];e._legendWidget.addCustomWidgetToLegend(c,Object(n.ensureDefined)(e._customLegendWidgetsFactoryMap.get(c)))}}}))},e.prototype._loadAndCreatePaneControlsWidget=function(){var e=this;Promise.all([Promise.all([i.e("vendors_embed"),i.e(15),i.e(123),i.e(152),i.e(259),i.e(0),i.e(33),i.e(85),i.e(106),i.e(144),i.e("chart-widget-gui")]).then(i.bind(null,"lvAK")),Promise.all([i.e("vendors_embed"),i.e(15),i.e(123),i.e(152),i.e(259),i.e(0),i.e(33),i.e(85),i.e(106),i.e(144),i.e("chart-widget-gui")]).then(i.bind(null,"bdgK"))]).then((function(t){var i=t[0],r=t[1];if(!e._isDestroyed){var n=i.PaneControlsWidget;e._paneControls=new n(e._chartUndoModel(),e,{backgroundThemeName:e._chart.backgroundBasedTheme()},{toggleMaximizePane:e._chart.toggleMaximizePane.bind(e._chart)},e._div),e._paneControls.updateWidgetModeByWidth(e._size.w),e._paneControls.updateThemedColors(e._themedTopColor),e._paneControlsResizeObserver=new r.default(e._handleRestrictLegendWidth.bind(e)),e._paneControlsResizeObserver.observe(e._paneControls.getElement())}}))},e.prototype._handleRestrictLegendWidth=function(e){if(null!==this._legendWidget&&null!==this._paneControls){var t=this._legendWidget.getElement(),i=e[e.length-1].contentRect.width;t.style.maxWidth=0!==i?"calc(100% - "+(i+X+K)+"px)":""}},e.prototype._onMagnetStateChanged=function(){if(this._chart.isActive()){var e=this._chartModel().crossHairSource();if(!e.visible)return;var t=e.x,i=e.y;if(Object(z.a)().value())this._initialCrosshairPositionBeforeAlign=new o.Point(t,i);else{if(null===this._initialCrosshairPositionBeforeAlign)return;t=this._initialCrosshairPositionBeforeAlign.x,i=this._initialCrosshairPositionBeforeAlign.y,this._initialCrosshairPositionBeforeAlign=null}this._updateLineToolUsingMangetOrShift(t,i)}},e.prototype._onShiftKeyStateChanged=function(){if(this._chart.isActive()){var e=G.pressedKeys.value(),t=this._chartModel().crossHairSource();if(!t.visible)return
;var i=t.x,r=t.y;if(16===e){if(null===this._initialCrosshairPositionBeforeAlign)return;i=this._initialCrosshairPositionBeforeAlign.x,r=this._initialCrosshairPositionBeforeAlign.y,this._initialCrosshairPositionBeforeAlign=null,this._updateLineToolUsingMangetOrShift(i,r,p.EnvironmentState.create(!1))}else 16==(255&e)&&(this._initialCrosshairPositionBeforeAlign=new o.Point(i,r),this._updateLineToolUsingMangetOrShift(i,r,p.EnvironmentState.create(!0)))}},e.prototype._updateLineToolUsingMangetOrShift=function(e,t,i){var r=this._chartModel(),n=r.lineBeingCreated();if(null!==n){null!==(a=r.paneForSource(n))&&a===this._state&&this._setCursorPosition(e,t,i)}else{var s=r.lineBeingEdited();if(null!==s){null!==(a=r.paneForSource(s))&&a===this._state&&r.changeLinePoint(new o.Point(e,t),i)}else{var a,l=r.sourcesBeingMoved();if(0!==l.length)null!==(a=r.paneForSource(l[0]))&&a===this._state&&this._alignSourcesThatBeingMoved(l,e,t,i)}}},e.prototype._showEditDialogForSource=function(e){var t=this;!this._options.propertyPagesEnabled||e.userEditEnabled&&!e.userEditEnabled()||(e===this._chartUndoModel().mainSeries()?this._chart.showGeneralChartProperties(N.TabNames.style):(Object(_.isLineTool)(e)||Object(f.isStudy)(e))&&this._chart.showChartPropertiesForSource(e).then((function(e){t._editDialog=e})))},e}()},UHyS:function(e,t,i){"use strict";i.r(t),i.d(t,"StandardPivotPointsPriceAxisView",(function(){return s}));var r=i("mrSG"),n=i("KcY8"),o=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"],s=function(e){function t(t,i){var r=e.call(this)||this;r._source=t,r._data=i;var n=i.name;return r._completeName="P"===n.toUpperCase()?"P":"S"+n[1]+"/R"+n[1],r}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1;var r=this._source.properties();if(r.visible.value()){var n=this._completeName,s=r.levelsStyle.visibility;if(s[n]&&s[n].value()){var a=this._source.model().timeScale(),l=this._source.priceScale();if(!(a.isEmpty()||null===a.visibleBarsStrictRange()||null!==l&&l.isEmpty())){var c=this._source.customData();if(c&&c.pivots){var u=this._source.pricesView().prices()[o.indexOf(this._data.name.toUpperCase())];if(u){i.background=u.color,i.color=this.generateTextColor(u.color),i.coordinate=u.coordinate,i.floatCoordinate=u.floatCoordinate;var h=this._source.model().properties().scalesProperties;h.showStudyLastValue.value()&&(e.text=u.formatted,e.visible=!0),h.showStudyPlotLabels.value()&&(t.text=this._source.priceLabelText(this._data.name),t.visible=!0)}}}}}},t}(n.a)},ULlu:function(e,t,i){"use strict";function r(e){return e[0]}function n(e,t,i){return"string"!=typeof t?e:null==i?(e.removeAttribute(t),e):(e.setAttribute(t,String(i)),e)}function o(e,t){return"string"==typeof t&&e.classList.add(t),e}function s(e,t){return void 0===t||(null===t&&(e.innerHTML=""),"string"!=typeof t&&"number"!=typeof t||(e.innerHTML=String(t))),e}function a(e){var t=window.getComputedStyle(e);return[t.paddingLeft,t.paddingRight].reduce((function(e,t){return e-Number((t||"").replace("px",""))}),e.clientWidth)}
function l(e){var t=window.getComputedStyle(e);return[t.paddingTop,t.paddingBottom].reduce((function(e,t){return e-Number((t||"").replace("px",""))}),e.clientHeight)}function c(e,t){var i;i=function(i){return i(e).trigger(t)},window.jQuery&&i(window.jQuery)}i.r(t),i.d(t,"unwrap",(function(){return r})),i.d(t,"attr",(function(){return n})),i.d(t,"addClass",(function(){return o})),i.d(t,"html",(function(){return s})),i.d(t,"contentWidth",(function(){return a})),i.d(t,"contentHeight",(function(){return l})),i.d(t,"trigger",(function(){return c}))},USzt:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var r=i("mrSG"),n=i("Eyy1"),o=i("cBZt"),s=i("MSvv"),a=i("23IT"),l=i("I9zs"),c=i("jenN"),u=Object(o.studyIdString)("VbPFixed","tv-volumebyprice"),h=function(e){function t(i,r,n,o){var s=this,a=n||i.studyMetaInfoRepository().findByIdSync({type:"java",studyId:u}),h=r||t._createPropertiesFromStudyMetaInfo(a,i.studyVersioning());return(s=e.call(this,i,a,"vbpfixed_",h)||this)._constructor="LineToolVbPFixed",Object(c.createGraphicsPaneViews)(s,i).then((function(e){if(o=i.mainSeries(),a.plots.length>0){var t=new l.StudyPaneView(s,o,i,a.plots[0].id);e.push(t)}if(a.plots.length>1){var r=new l.StudyPaneView(s,o,i,a.plots[1].id);e.push(r)}if(a.plots.length>2){var n=new l.StudyPaneView(s,o,i,a.plots[2].id);e.push(n)}s._setPaneViews(e)})),s.clearData(),s}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.prototype.offset=function(e){return 0},t.prototype.getMinFirstBarIndexForPlot=function(){return-1/0},t.prototype.isSelfColorerPlot=function(e){var t=this._metaInfo.plots[e];return Object(a.isColorerPlot)(t)},t.prototype.calcIsActualSymbol=function(){this._isActualSymbol=!0,this._isActualCurrency=!0,this.calcIsActualInterval()},t.prototype.cloneable=function(){return!1},t.createProperties=function(t){return e._createPropertiesFromStudyIdAndState.call(this,u,t)},t.studyId=function(){return u},t.prototype._studyInputs=function(e){Object(n.assert)(2===e.length,"all the line tool points should be defined");var t=e[0],i=e[1],r=Math.min(t.index,i.index),o=Math.max(t.index,i.index),s=this._model.mainSeries().bars().lastIndex(),a=this._model.mainSeries().bars().valueAt(r),l=this._model.mainSeries().bars().valueAt(o);return null===a||null===l?(this._subscribeApplyInputsOnSeriesCompleted(),null):{rowsLayout:this.properties().inputs.rowsLayout.value(),rows:this.properties().inputs.rows.value(),volume:this.properties().inputs.volume.value(),vaVolume:this.properties().inputs.vaVolume.value(),first_bar_time:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(a[0])),last_bar_time:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(l[0])),subscribeRealtime:s===o}},t.prototype._onDataUpdated=function(t,i,r){this._correctPoints(),e.prototype._onDataUpdated.call(this,t,i,r)},t.prototype._isReady=function(){return!Object(c.isStudyGraphicsEmpty)(this.graphics())},t.prototype._getPropertyDefinitionsViewModelClass=function(){
return Promise.all([i.e(71),i.e(150),i.e(202),i.e("study-property-pages-with-definitions")]).then(i.bind(null,"cKLu")).then((function(e){return e.StudyLineDataSourceDefinitionsViewModel}))},t.prototype._correctPoints=function(){var e=null,t=null;this.graphics().hhists().forEach((function(i){i.forEach((function(i){var r=i.priceLow,n=i.priceHigh;(!e||r<e)&&(e=r),(!t||n>t)&&(t=n)}))})),null!==e&&null!==t&&(this._points[0].price=t,this._points[1].price=e)},t}(s.StudyLineDataSource)},UqOQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var r=i("mrSG"),n=i("aIyQ"),o=i.n(n),s=i("e3/o");function a(e){return e.properties().visible.value()}function l(e){return!a(e)}var c=function(){function e(e,t,i){this._onChanged=new o.a,this._lineToolsSet=new Set,this._lineTools=Object(r.__spreadArrays)(e),this._lineToolsSet=new Set(this._lineTools),this._name=t,this.id=i||Object(s.randomHashN)(6)}return e.prototype.lineTools=function(){return this._lineTools},e.prototype.name=function(){return this._name},e.prototype.setName=function(e){var t=this;this._doAndFireOnChange((function(){t._name=e}))},e.prototype.isActualSymbol=function(){return this._lineTools.length>0&&this._lineTools[0].isActualSymbol()&&this._lineTools[0].isActualCurrency()},e.prototype.symbol=function(){return this._lineTools[0].symbol()},e.prototype.containsLineTool=function(e){return this._lineToolsSet.has(e)},e.prototype.addLineTools=function(e){var t=this;this._doAndFireOnChange((function(i){var r;e.forEach((function(r){t._lineToolsSet.add(r),i.push.apply(i,e.map((function(e){return e.id()})))})),(r=t._lineTools).push.apply(r,e)}))},e.prototype.excludeLineTool=function(e){var t=this;this._doAndFireOnChange((function(i){t._lineToolsSet.delete(e);var r=t._lineTools.indexOf(e);t._lineTools.splice(r,1),i.push(e.id())}))},e.prototype.excludeLineTools=function(e){var t=this;this._doAndFireOnChange((function(i){var r=new Set(e);e.forEach((function(e){return t._lineToolsSet.delete(e)})),t._lineTools=t._lineTools.filter((function(e){return!r.has(e)})),i.push.apply(i,e.map((function(e){return e.id()})))}))},e.prototype.state=function(){return{id:this.id,name:this._name,tools:this._lineTools.map((function(e){return e.id()}))}},e.prototype.visibility=function(){var e=this._lineTools.some(a),t=this._lineTools.some(l);return e&&!t?"Visible":t&&!e?"Invisible":"Partial"},e.prototype.locked=function(){var e=this._lineTools.some((function(e){return e.properties().frozen.value()})),t=this._lineTools.some((function(e){return!e.properties().frozen.value()}));return e&&!t?"Locked":t&&!e?"Unlocked":"Partial"},e.prototype.isActualInterval=function(){var e=this._lineTools.some((function(e){return e.isActualInterval()})),t=this._lineTools.some((function(e){return!e.isActualInterval()}));return e&&!t?"IsActualInterval":t&&!e?"IsNotActualInterval":"Partial"},e.prototype.onChanged=function(){return this._onChanged},e.fromState=function(t,i){for(var r=[],n=0,o=i.tools;n<o.length;n++){var s=o[n],a=t.dataSourceForId(s);null!==a&&r.push(a)}return r.length>0?new e(r,i.name,i.id):null},
e.prototype._doAndFireOnChange=function(e){var t=[],i=this.visibility(),r=this.locked(),n=this.name(),o=this.isActualInterval();e(t);var s={affectedLineTools:t,visibilityChanged:this.visibility()!==i,lockedChanged:r!==this.locked(),titleChanged:n!==this.name(),isActualIntervalChanged:o!==this.isActualInterval()};this._onChanged.fire(s)},e}()},V086:function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("GEp6").distanceToLine,o=i("Ss5c").LineDataSource,s=i("Ocx9").DefaultProperty,a=window.t("Ellipse");function l(e,t){this._constructor="LineToolEllipse";var r=t||l.createProperties();o.call(this,e,r),this.version=l.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("obU/").EllipsePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(l,o),l.prototype.startChanging=function(e,t){if(o.prototype.startChanging.call(this,e,t),0===e||1===e){var i=this.pointToScreenPoint(this._points[0])[0],r=this.pointToScreenPoint(this._points[1])[0],s=this.pointToScreenPoint(this._points[2])[0];this._dist=n(i,r,s).distance||0}},l.prototype._preparePoint=function(e,t){var i=this._preparePointInternal(e,t,!1);return t&&t.shift()&&this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],i),i},l.prototype._preparePointInternal=function(e,t,i){var n=Object.assign({},e);if(t&&t.shift()){var s=this.points().length;if(!this._fakePointAdded&&3===s&&!i)return n;if(this._fakePointAdded||2===s||i){this._snapPoint45Degree(e,this._points[0]),this._fakePointAdded?this._points[1]=e:i||(this._fakePointAdded=!0,o.prototype._addPointIntenal.call(this,e));var a=this.pointToScreenPoint(this._points[0])[0],l=this.pointToScreenPoint(this._points[1])[0],c=l.x-a.x,u=l.y-a.y,h=Math.sqrt(c*c+u*u)/2,d=l.subtract(a),p=a.add(l).scaled(.5),f=new r(-d.y,d.x);f=f.normalized();var _=p.add(f.scaled(h));n=this.screenPointToPoint(_),(TradingView.isNaN(n.price)||TradingView.isNaN(n.index))&&(n=this.screenPointToPoint(p))}}else this._fakePointAdded&&(this._points.splice(1,1),this._fakePointAdded=!1);return n},l.prototype._fixVerticalDiameterPoints=function(e,t,i){var r=this.pointToScreenPoint(e)[0],n=this.pointToScreenPoint(t)[0],o=this._model.timeScale(),s=o.indexToCoordinate(e.index),a=o.indexToCoordinate(i.index),l=2*Math.abs(s-a);l*=t.price>e.price?1:-1,e.price=this.screenPointToPoint({x:r.x,y:n.y+l}).price},l.prototype.addPoint=function(e,t,i){var r=o.prototype.addPoint.call(this,e,t,i);return r&&(this._fakePointAdded=!1),r},l.prototype.setPoint=function(e,t,i){var o=Object.assign({},t),s=this.pointToScreenPoint(this._points[0])[0],a=this.pointToScreenPoint(this._points[1])[0],l=this.pointToScreenPoint(this._points[2])[0];switch(e){case 0:if(i&&i.shift()){this._snapPoint45Degree(o,this._points[1]),this._points[0]=o,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[0],this._points[1],this._points[2]);break}s=this.pointToScreenPoint(o)[0]
;var c=a.subtract(s),u=s.add(a).scaled(.5);d=(d=new r(-c.y,c.x)).normalized(),l=u.add(d.scaled(this._dist)),l=this.screenPointToPoint(l),this._points[0]=o,this._points[2]=l;break;case 1:if(i&&i.shift()){this._snapPoint45Degree(o,this._points[0]),this._points[1]=o,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],this._points[2]);break}c=(a=this.pointToScreenPoint(o)[0]).subtract(s),u=s.add(a).scaled(.5);d=(d=new r(-c.y,c.x)).normalized(),l=u.add(d.scaled(this._dist)),l=this.screenPointToPoint(l),this._points[1]=o,this._points[2]=l;break;case 2:o=this.pointToScreenPoint(o)[0];var h=n(s,a,o).distance;c=a.subtract(s),u=s.add(a).scaled(.5);d=(d=new r(-c.y,c.x)).normalized(),l=u.add(d.scaled(h)),l=this.screenPointToPoint(l),this._points[2]=l;break;case 3:o=this.pointToScreenPoint(o)[0];var d;h=n(s,a,o).distance,c=a.subtract(s),u=s.add(a).scaled(.5);d=(d=new r(-c.y,c.x)).normalized(),l=u.add(d.scaled(h)),l=this.screenPointToPoint(l),this._points[2]=l}this.normalizePoints()},l.prototype.pointsCount=function(){return 3},l.prototype.translatedType=function(){return a},l.prototype.name=function(){return"Ellipse"},l.prototype.hasEditableCoordinates=function(){return!1},l.version=2,l.prototype.migrateVersion=function(e,t,i){if(1===e&&2===this._points.length){var r=this._points[0].price,n=.5*(this._points[0].price+this._points[1].price);this._points[0]={price:n,index:this._points[0].index},this._points[1]={price:n,index:this._points[1].index},this._points.push({price:r,index:this._points[0].index})}if(1===e&&2===this._timePoint.length){r=this._timePoint[0].price,n=.5*(this._timePoint[0].price+this._timePoint[1].price);this._timePoint[0].price=n,this._timePoint[1].price=n;var o={price:r,offset:this._timePoint[0].offset,time_t:this._timePoint[0].time_t};this._timePoint.push(o)}},l.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("Zd1D").GeneralFiguresDefinitionsViewModel}.bind(null,i)).catch(i.oe)},l.createProperties=function(e){var t=new s("linetoolellipse",e);return l._configureProperties(t),t},l._configureProperties=function(e){o._configureProperties(e)},t.LineToolEllipse=l},V0al:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererXCross",(function(){return s}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShapeUsingCSSPixels=function(e,t){var i=t.width,r=t.height,n=t.x-i/2,o=t.vertOffset,s=t.y-r/2+o;e.moveTo(n,s),e.lineTo(n+i,s+r),e.moveTo(n,s+r),e.lineTo(n+i,s)},t.prototype._calcBoundingBox=function(t){var i=t.width,r=t.height,n=t.x-i/2,s=t.vertOffset,a=t.y-r/2+s,l=n,c=n+i,u=a,h=a+r,d=new o.Point(l,u),p=new o.Point(c,h),f=Object(o.box)(d,p),_=e.prototype._calcBoundingBox.call(this,t);return _&&(f=this._unionBox(f,_)),f},t}(n.c)},V3Oj:function(e,t,i){
"use strict";i.r(t),i.d(t,"LineToolText",(function(){return d})),i.d(t,"LineToolTextAbsolute",(function(){return p}));var r=i("mrSG"),n=i("Eyy1"),o=i("YFKU"),s=i("Ss5c"),a=i("tc+8"),l=i.n(a),c=i("Ocx9"),u=Object(o.t)("Text",{context:"tool"}),h=Object(o.t)("Anchored Text"),d=function(e){function t(r,n){var o=this,s=n||t.createProperties();return(o=e.call(this,r,s)||this)._constructor="LineToolText",o._barSpacing=r.timeScale().barSpacing(),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("mr3a").TextPaneView;o._setPaneViews([new t(o,r)])}.bind(null,i)).catch(void 0),o}return Object(r.__extends)(t,e),t.prototype.setPoint=function(e,t,i){var r,n=this.properties().childs();if(0===e&&n.wordWrapWidth.value()){var o=this.model().timeScale();r=this.isFixed()?this.fixedPoints()[0].x:o.indexToCoordinate(this.points()[0].index);var s=o.indexToCoordinate(t.index)-r-~~(n.fontsize.value()/6);if(!isFinite(s))return;n.wordWrapWidth.setValue(Math.max(100,s))}},t.prototype.pointsCount=function(){return 1},t.prototype.translatedType=function(){return u},t.prototype.name=function(){return"Text"},t.prototype.setPriceScale=function(t){e.prototype.setPriceScale.call(this,t),t&&t.priceRange()&&(this._priceDencity=t.height()/Object(n.ensureNotNull)(t.priceRange()).length(),this._isPriceDencityLog=t.isLog())},t.prototype.restoreSize=function(){var e=Object(n.ensureNotNull)(this.priceScale());this._barSpacing=this.model().timeScale().barSpacing(),this._priceDencity=e.height()/Object(n.ensureNotNull)(e.priceRange()).length(),this.updateAllViews(),this._model.updateSource(this)},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.template=function(){var t=e.prototype.template.call(this);return t.text=this.properties().childs().text.value(),t},t.prototype.state=function(t){var i=e.prototype.state.call(this,t);return t&&(i.state.fixedSize=!1),i},t.prototype.barSpacing=function(){return this._barSpacing},t.prototype.priceDencity=function(){return this._priceDencity},t.prototype.isPriceDencityLog=function(){return this._isPriceDencityLog},t.prototype.hasEditableCoordinates=function(){return!1},t.createProperties=function(e){var i=new c.DefaultProperty("linetooltext",e);return t._configureProperties(i),i},t.prototype._applyTemplateImpl=function(t){e.prototype._applyTemplateImpl.call(this,t),this.properties().childs().text.setValue(t.text)},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"QWxu")).then((function(e){return e.TextDefinitionsViewModel}))},t._configureProperties=function(e){s.LineDataSource._configureProperties(e),e.hasChild("text")||e.addChild("text",new l.a(window.t("Text"))),e.addExclusion("text")},t}(s.LineDataSource),p=function(e){function t(i,r){var n=r||t.createProperties();return e.call(this,i,n)||this}return Object(r.__extends)(t,e),t.prototype.translatedType=function(){return h},t.prototype.name=function(){return"Anchored Text"},
t.prototype.hasEditableCoordinates=function(){return!1},t.prototype.isFixed=function(){return!0},t.createProperties=function(e){var i=new c.DefaultProperty("linetooltextabsolute",e);return t._configureProperties(i),i},t._configureProperties=function(e){d._configureProperties(e)},t}(d)},VNzU:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Dq3s");function o(e){var t=new Set;if("number"==typeof e)return t.add(e),{indices:t,smallestIndex:e,sizer:function(e){return e}};for(var i=e[0],r=e.slice(1).map(o),n=1/0,s=0,a=r;s<a.length;s++)for(var l=a[s],c=0,u=Array.from(l.indices);c<u.length;c++){var h=u[c];h<n&&(n=h),t.add(h)}return{indices:t,smallestIndex:n,sizer:function(e,t,n,o){for(var s,a,l=0,c=0,u=r;c<u.length;c++){var h=u[c];h.smallestIndex>=n||(h.indices.has(t)&&(s=h,a=l),l++)}var d,p=(("h"===i?e.width:e.height)-(l-1)*o)/l,f=a*(p+o),_=Math.round(f),m=Math.round(f+p)-_;return d="h"===i?{top:e.top,left:e.left+_,height:e.height,width:m}:{top:e.top+_,left:e.left,height:m,width:e.width},s.sizer(d,t,n,o)}}}function s(e,t){var i=o(e);return{title:t,count:i.indices.size,sizer:i.sizer}}i.d(t,"layouts",(function(){return c})),i.d(t,"isSingleLayout",(function(){return u})),i.d(t,"isMultipleLayout",(function(){return h}));var a,l={s:{title:"1 chart",count:1,sizer:function(e,t){if(0!==t)throw new RangeError("invalid index");return e}}};a={"2h":s(n["2h"],"2-up Horizontal"),"2v":s(n["2v"],"2-up Vertical"),"2-1":s(n["2-1"],"2 at top and 1 at bottom"),"1-2":s(n["1-2"],"1 at top and 2 at bottom"),"3s":s(n["3s"],"3-up Stacked"),"3r":s(n["3r"],"3-up Stacked Left"),"3h":s(n["3h"],"3-up Horizontal"),"3v":s(n["3v"],"3-up Vertical"),4:s(n[4],"4-up"),"4h":s(n["4h"],"4-up Horizontal"),"4v":s(n["4v"],"4-up Vertical"),"4s":s(n["4s"],"4-up Stacked"),"2-2":s(n["2-2"],"2 at top and 2 at bottom"),"1-3":s(n["1-3"],"1 at top and 3 at bottom"),"1-4":s(n["1-4"],"1 at top and 4 at bottom"),"5s":s(n["5s"],"5-up Stacked"),6:s(n[6],"6-up"),"6c":s(n["6c"],"6-up in two columns"),8:s(n[8],"8-up"),"8c":s(n["8c"],"8-up in two columns")};var c=Object(r.__assign)(Object(r.__assign)({},l),a);function u(e){return"s"===e}function h(e){return!u(e)}},VSsv:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return s}));var r,n=i("mrSG");function o(e){return{level:e.level,text:e.text}}function s(e,t,i){return Object(n.__assign)({id:t},e)}!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopCenter=1]="TopCenter",e[e.TopRight=2]="TopRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.BottomLeft=6]="BottomLeft",e[e.BottomCenter=7]="BottomCenter",e[e.BottomRight=8]="BottomRight"}(r||(r={}))},VUhU:function(e,t){"undefined"!=typeof window&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t&&1===t.nodeType;t=t.parentNode)if(t.matches(e))return t;return null
}))},VVxS:function(e,t,i){"use strict";const{getLogger:r}=i("txPx"),n=r("TVLocalStorage");var o=function(){try{this.isAvailable=!0,this.localStorage=window.localStorage,this.localStorage.setItem("tvlocalstorage.available","true")}catch(e){delete this.isAvailable,delete this.localStorage}this._updateLength();try{this._report()}catch(e){}};o.prototype._report=function(){if(this.isAvailable){const t=10,i=[];for(let e=0;e<this.localStorage.length;e++){const t=this.key(e);i.push({key:t,length:String(this.getItem(t)).length})}i.sort((e,t)=>t.length-e.length);const r=i.slice(0,t);i.sort((e,t)=>t.key.length-e.key.length);const o=i.slice(0,t);n.logNormal("Total amount of keys in Local Storage: "+this.length),n.logNormal(`Top ${t} keys with longest values: ${JSON.stringify(r)}`),n.logNormal(`Top ${t} longest key names: ${JSON.stringify(o)}`);try{navigator.storage.estimate().then(e=>{n.logNormal("Storage estimate: "+JSON.stringify(e))})}catch(e){}}},o.prototype.length=0,o.prototype.isAvailable=!1,o.prototype.localStorage={"tvlocalstorage.available":"false"},o.prototype._updateLength=function(){if(this.isAvailable)this.length=this.localStorage.length;else{var e,t=0;for(e in this.localStorage)this.localStorage.hasOwnProperty(e)&&t++;this.length=t}},o.prototype.key=function(e){return this.isAvailable?this.localStorage.key(e):Object.keys(this.localStorage)[e]},o.prototype.getItem=function(e){return this.isAvailable?this.localStorage.getItem(e):void 0===this.localStorage[e]?null:this.localStorage[e]},o.prototype.setItem=function(e,t){this.isAvailable?this.localStorage.setItem(e,t):this.localStorage[e]=t,this._updateLength()},o.prototype.removeItem=function(e){this.isAvailable?this.localStorage.removeItem(e):delete this.localStorage[e],this._updateLength()},o.prototype.clear=function(){this.isAvailable?this.localStorage.clear():this.localStorage={},this._updateLength()};var s=function(e){this.storage=e};s.prototype.getItem=function(e){return Promise.resolve(this.storage.getItem(e))},s.prototype.setItem=function(e,t){return Promise.resolve(this.storage.setItem(e,t))},window.TVLocalStorage=new o,window.TVLocalStorageAsync=new s(window.TVLocalStorage),e.exports={TVLocalStorage:window.TVLocalStorage,TVLocalStorageAsync:window.TVLocalStorageAsync}},VaSN:function(e,t,i){"use strict";i.r(t),i.d(t,"lastEventIsTouch",(function(){return o})),i.d(t,"lastEventIsMouse",(function(){return s})),i.d(t,"setLastEventIsTouch",(function(){return a}));var r=i("qFKp"),n=Object(r.supportTouch)();function o(){return n}function s(){return n}function a(e){n=e}},VdBB:function(e,t,i){"use strict";function r(e,t,i){if(e.isTouch){if(void 0!==i)return i(e),!0}else if(void 0!==t)return t(e),!0;return!1}i.r(t),i.d(t,"tryCallCustomHandler",(function(){return r})),i.d(t,"HitTestResult",(function(){return n}));var n=function(){function e(e,t,i){this._result=e,this._data=t||null,this._eraseMarker=i}return e.prototype.result=function(){return this._result},e.prototype.data=function(){return this._data},e.prototype.eraseMarker=function(){return this._eraseMarker},
e.MOVEPOINT_BACKGROUND=1,e.REGULAR=2,e.MOVEPOINT=3,e.CHANGEPOINT=4,e.CUSTOM=5,e.CUSTOM_MOVE=6,e}()},Vdly:function(e,t,i){"use strict";(function(e,t){i("qFKp");var r=i("BHQF").fetch,n=i("dTSQ").regExpEscape,o=i("FBuY").TVXWindowEvents,s=i("VVxS").TVLocalStorage,a=i("aIyQ"),l=["s.tradingview.com","betacdn.tradingview.com"],c=window.TVSettings=function(){var t=!1,i=e.enabled("cqg_terminal"),u=null;try{t=!TradingView.onWidget()&&parent&&parent!==window&&!!parent.IS_DEMO_PAGE}catch(M){}if(t){var h={"widgetbar.layout-settings":{widgets:{},settings:{minimized:!0}},notShowMainWizard:!0},d=function(e,t,i){var r=h[e];return null==r?t:r},p=function(){};return{loaded:!1,loadedModel:!1,getValue:d,getJSON:d,getBool:d,getFloat:d,getInt:d,setValue:p,setJSON:p,remove:p,keys:function(){return Object.keys(h)},keysMask:function(){return[]},sync:p,onSync:{subscribe:function(){}}}}var f=12e4;"local"===window.environment&&(f=5e3);var _,m,v=TradingView.onWidget()?"tradingview-widget":"tradingview",g={},y=[],b=[/^widgetbar\.widget\.watchlist.+/,/.+quicks$/,/^widgetbar\.layout-settings$/,/^ChartSideToolbarWidget\.visible$/,/^onwidget\.watchlist$/,/^domepanel.visible$/,/^orderpanel.visible$/,/^chart\.favoriteDrawings$/,/^chart\.favoriteDrawingsPosition$/,/^loadChartDialog.favorites$/,/^ChartFavoriteDrawingToolbarWidget\.visible/,/^trading\.chart\.proterty$/,/^trading_floating_toolbar\.position$/,/^trading\.orderWidgetMode\./,/^symbolWatermark$/,/^pinereference\.size$/,/^pinereference\.position$/,/^hint\.+/];function S(e){return v+"."+e}function w(e,t){var r;return r=g[e],window.is_authenticated&&!i||null!=r||(r=g[e]),null==r?t:r}function P(e,t,i){i=i||{};var r=""+t;return g[e]!==r&&(g[e]=r,x(e)),i.forceFlush&&!m&&(m=setTimeout((function(){m=void 0,I()}),10)),c}function C(e,t){return t=t||{},null!=g[e]&&(delete g[e],x(e)),t.forceFlush&&I(),c}function T(){_=void 0,y.length&&I()}function x(e){if(u)null==g[e]?u.removeValue(e):u.setValue(e,g[e]);else if(!window.is_authenticated||i)try{null==g[e]?s.removeItem(S(e)):s.setItem(S(e),g[e])}catch(M){}else y.push(e),_||(_=setTimeout(T,f));o.emit("settings",JSON.stringify({key:e,value:g[e]}))}function I(t){if(!e.enabled("widget")&&window.is_authenticated&&!i&&0!==y.length){var n=y;y=[];for(var o={},s=n.length;s--;){var a=n[s],l=g[a];void 0===l&&(l=null),o[a]=l}var c=new FormData;c.append("delta",JSON.stringify(o)),t&&navigator.sendBeacon?navigator.sendBeacon("/savesettings/",c):r("/savesettings/",{method:"POST",credentials:"include",body:c})}}function E(){return Object.keys(g)}function L(e){for(var t=0;t<b.length;++t)if(b[t].exec(e))return!0;return!1}function O(e){g={};for(var t=0===Object.keys(e).length,i=v+".",r=s.length;r--;){var n=s.key(r);if(n&&n.substring(0,i.length)===i){if(t)P(n.substring(i.length),s.getItem(n));s.removeItem(n)}}Object.keys(e).forEach((function(t){g[t]=e[t]+""}))}o.on("settings",(function(e){var t=JSON.parse(e);null==t.value?delete g[t.key]:g[t.key]=t.value}));var A=new a;return document.addEventListener("visibilitychange",(function(){
"hidden"!==document.visibilityState&&!0!==document.hidden||I()})),window.addEventListener("beforeunload",(function(){I(!0)})),{loaded:!1,loadedModel:!1,getValue:w,getJSON:function(e,t){var i=w(e,void 0);if(null==i)return t;try{return JSON.parse(i)}catch(r){return C(e),t}},getBool:function(e,t){var i=w(e);return null==i?t:!(!i||"false"===i||0==+i)},getFloat:function(e,t,i){var r=w(e,void 0);if(null==r)return t;var n=parseFloat(r);if(!isFinite(n))throw new TypeError('"'+r+'" is not float (key: "'+e+'")');return n},getInt:function(e,t,i){var r=w(e,void 0);if(null==r)return t;var n=parseInt(r,10);if(!isFinite(n))throw new TypeError('"'+r+'" is not int (key: "'+e+'")');return n},setValue:P,setJSON:function(e,t,i){return P(e,JSON.stringify(t),i),c},remove:C,keys:E,keysMask:function(e,t){for(var i=E(),r=[],o=(e=new RegExp("^"+n(e).replace(/\\\*\\\*/gi,".+").replace(/\\\*/gi,"[^.]+")+"$","gi"),i.length-1);o>=0;o--)e.test(i[o])&&r.push(i[o]),e.lastIndex=0;return r},sync:function(t){u?O(u.initialSettings||{}):window.is_authenticated&&!i?O(t||{}):(function(){if(TradingView.onWidget()&&l.includes(window.location.host))for(var e=s.length;e--;){var t=s.key(e);if(0===t.indexOf("tradingview.")){var i=t.replace("tradingview.",v+".");s.setItem(i,s.getItem(t)),s.removeItem(t)}}}(),function(){g={};for(var t=v+".",i=!e.enabled("save_chart_properties_to_local_storage"),r=s.length;r--;){var n=s.key(r);if(n&&n.substring(0,t.length)===t){var o=n.substring(t.length);i&&!L(o)||(g[o]=s.getItem(n))}}}()),A.fire()},onSync:A,setSettingsAdapter:function(e){u=e}}}();setTimeout((function(){i.e("clear-old-settings").then(function(e){i("FwaW").clearOldSettings()}.bind(null,i)).catch(i.oe)}),3e4),t&&t.exports&&(t.exports=c)}).call(this,i("Kxc7"),i("YuTi")(e))},VgjZ:function(e,t,i){"use strict";i.r(t),i.d(t,"PriceAxisRendererOptionsProvider",(function(){return o}));var r=i("XlJ7"),n=i("zDbI"),o=function(){function e(e){this._rendererOptions={borderSize:1,tickLength:4,offsetSize:1,fontSize:NaN,font:"",color:"",paneBackgroundColor:"",paddingBottom:0,paddingInner:0,paddingOuter:0,paddingTop:0,baselineOffset:0},this._chartModel=e}return e.prototype.options=function(){var e=this._rendererOptions,t=this._chartModel.properties(),i=t.scalesProperties.fontSize.value();return e.fontSize!==i&&(e.fontSize=i,e.font=Object(r.makeFont)(i,n.CHART_FONT_FAMILY,""),e.paddingTop=Math.floor(i/3.5),e.paddingBottom=e.paddingTop,e.paddingInner=Math.max(Math.ceil(i/2-e.tickLength/2),0),e.paddingOuter=Math.ceil(i/2+e.tickLength/2),e.baselineOffset=Math.round(i/5)),e.color=t.scalesProperties.textColor.value(),e.paneBackgroundColor=t.paneProperties.background.value(),this._rendererOptions},e}()},W3MX:function(e){
e.exports=JSON.parse('{"color-aqua-spring":"#ebf9f5","color-army-green":"#3d2c12","color-army-green-2":"#31230d","color-athens-gray-1":"#f2f3f5","color-athens-gray-2":"#f7f8fa","color-athens-gray-3":"#eceff2","color-black":"#000000","color-blue-dianne":"#21384d","color-bluish":"#2185cc","color-bright-gray":"#363c4e","color-brownish-grey":"#8d6e63","color-carnation":"#f04561","color-catskill-white":"#e1ecf2","color-charade":"#2f3241","color-charcoal-grey":"#323337","color-curious-blue":"#299dcd","color-dark-blue-grey":"#123440","color-darkness-blue-grey":"#12213b","color-dark-grey":"#292a2d","color-dark-grey-blue":"#28415a","color-dark-sky-blue":"#37a6ef","color-dark-slate-blue":"#194453","color-deep-sea-blue":"#016087","color-duck-egg-blue":"#e1eff9","color-ebony-clay":"#262b3e","color-foam":"#d7f0fb","color-gull-gray":"#9db2bd","color-humming-bird":"#d3eef9","color-keppel-1":"#37bc9b","color-keppel-2":"#34b293","color-lavender-blush":"#ffedf0","color-lightish-purple":"#a75ee8","color-loblolly":"#c5cbce","color-manatee":"#878ca8","color-mandy":"#eb4d5c","color-medium-blue":"#2e7bb2","color-milk-chocolate":"#6f2626","color-mirage-1":"#131722","color-mirage-2":"#171b29","color-mirage-3":"#1c2030","color-mischka":"#d6d8e0","color-morning-glory":"#9addcc","color-oslo-gray":"#8b8e95","color-pale":"#fff2cf","color-pale-grey-1":"#f9fafb","color-pale-grey-2":"#e7ebee","color-pale-sky":"#6b7988","color-picton-blue-1":"#3bb3e4","color-picton-blue-2":"#41bef1","color-puerto-rico":"#3bc2a1","color-purple-brown":"#4e2934","color-purple-brown-2":"#3d2028","color-radical-red":"#ff4a68","color-regent-gray":"#8797a5","color-scooter":"#38acdb","color-silver-tree":"#53b987","color-slate-gray":"#758696","color-sundown":"#ffa4b3","color-sunglow":"#ffca3b","color-tan-hide":"#ff9850","color-trout-1":"#4c525e","color-trout-2":"#4f5966","color-violet-1":"#332738","color-violet-2":"#271d2b","color-water-blue":"#1592e6","color-white":"#ffffff","color-white-ice":"#ebf7fc","color-wild-watermelon":"#ff5773","color-bg-primary":"color-white","color-bg-primary-hover":"color-cold-gray-100","color-bg-secondary":"color-white","color-bg-highlight":"color-cold-gray-50","color-bg-scroll-buttons":"color-cold-gray-100","color-legacy-bg-scroll-buttons":"color-cold-gray-850","color-legacy-bg-widget":"color-white","color-text-primary":"color-cold-gray-900","color-text-secondary":"color-cold-gray-500","color-text-tertiary":"color-cold-gray-400","color-text-disabled":"color-cold-gray-300","color-box-shadow":"color-cold-gray-300","color-divider":"color-cold-gray-150","color-divider-hover":"color-cold-gray-100","color-active-hover-text":"color-black","color-alert-text":"color-black","color-border-table":"color-cold-gray-100","color-brand":"color-tv-blue-500","color-brand-active":"color-tv-blue-600","color-brand-hover":"color-tv-blue-600","color-brand-light":"color-picton-blue-2","color-chart-page-bg":"color-cold-gray-150","color-common-tooltip-bg":"color-cold-gray-800","color-common-tooltip-text":"color-cold-gray-100","color-danger":"color-radical-red","color-depthrenderer-stroke-style":"color-athens-gray-1","color-highlight-new":"color-pale","color-input-bg":"color-white","color-input-publish-bg":"color-white","color-link":"color-tv-blue-500","color-link-hover":"color-tv-blue-600","color-link-active":"color-tv-blue-700","color-list-nth-child-bg":"color-athens-gray-2","color-pane-bg":"color-white","color-pane-secondary-bg":"color-cold-gray-100","color-popup-menu-item-hover-bg":"color-cold-gray-100","color-popup-menu-separator":"color-cold-gray-150","color-replay-data-mode":"color-radical-red","color-screener-description":"color-trout-2","color-legacy-success":"color-keppel-1","color-success":"color-minty-green-500","color-success-hover":"color-minty-green-600","color-success-active":"color-minty-green-700","color-toolbar-button-text":"color-cold-gray-900","color-toolbar-button-text-hover":"color-black","color-toolbar-button-text-active":"color-tv-blue-500","color-toolbar-button-text-active-hover":"color-tv-blue-600","color-toolbar-button-background-hover":"color-cold-gray-100","color-toolbar-button-background-secondary-hover":"color-cold-gray-150","color-toolbar-toggle-button-background-active":"color-tv-blue-500","color-toolbar-toggle-button-background-active-hover":"color-tv-blue-600","color-toolbar-interactive-element-text-normal":"color-cold-gray-900","color-toolbar-interactive-element-text-hover":"color-black","color-toolbar-opened-element-bg":"color-cold-gray-100","color-tooltip-bg":"color-ebony-clay","color-tv-dialog-caption":"color-trout-2","color-tv-dropdown-item-hover-bg":"color-athens-gray-1","color-underlined-text":"color-slate-gray","color-widget-pages-bg":"color-white","color-warning":"color-tan-orange-500","color-growing":"color-minty-green-400","color-falling":"color-ripe-red-400","color-collapse-tabs-border":"color-athens-gray-3","color-forex-icon":"color-bright-gray","color-list-item-active-bg":"color-dark-sky-blue","color-list-item-hover-bg":"color-white-ice","color-list-item-text":"color-ebony-clay","color-site-widget-hover":"color-athens-gray-1","color-attention":"color-sunglow","color-price-axis-label-back":"color-cold-gray-150","color-price-axis-label-text":"color-cold-gray-650","color-price-axis-gear":"color-cold-gray-900","color-price-axis-gear-hover":"#000000","color-price-axis-highlight":"color-cold-gray-150","color-marker-flagged":"color-ripe-red-400","color-marker-flagged-hovered":"color-ripe-red-600","color-bid":"color-tv-blue-500","color-ask":"color-ripe-red-400","color-sell":"color-ripe-red-400","color-buy":"color-tv-blue-500","color-neutral":"color-cold-gray-500","color-border":"#dadde0","color-border-chat-fields":"#c9cbcd","color-border-hover":"#c8c8c8","color-button-hover-bg":"#f2f2f2","color-depthrenderer-fill-style":"#555555","color-disabled-border-and-color":"#ececec","color-disabled-input":"#ececec","color-readonly-input":"#b4b4b4","color-empty-container-message":"#8a8a8a","color-icons":"#7d7d7d","color-input-textarea-readonly":"#555555","color-input-placeholder-text":"color-cold-gray-350","color-item-active-blue":"#eff9ff","color-item-hover-active-bg":"#f1f3f6","color-item-hover-bg":"#edf1f2","color-item-hover-blue":"#c6e9f8","color-item-selected-blue":"#eafafe","color-item-active-text":"color-white","color-item-active-bg":"color-tv-blue-500","color-list-item":"#888989","color-news-highlight":"#f2f5f8","color-placeholder":"#adaeb0","color-row-hover-active-bg":"#f1f3f6","color-sb-scrollbar-body-bg":"#d8d8d8","color-section-separator-border":"#b5b7b9","color-separator-table-chat":"#eaecef","color-tag-active-bg":"#cfdce3","color-tag-hover-bg":"#dce6ea","color-text-regular":"#4a4a4a","color-tv-button-checked":"#757575","color-brand-dark":"#2a2c39","color-scroll-bg":"color-cold-gray-400","color-scroll-border":"color-item-hover-active-bg","color-widget-border":"color-cold-gray-100","color-scroll-buttons-arrow":"color-white","color-control-intent-default":"color-cold-gray-200","color-control-intent-success":"color-minty-green-600","color-control-intent-primary":"color-tv-blue-500","color-control-intent-warning":"color-tan-orange-500","color-control-intent-danger":"color-ripe-red-500","color-seeking-alpha-brand":"#ff7200","color-pro":"color-minty-green-400","color-pro-hover":"color-minty-green-600","color-pro-plus":"color-tv-blue-500","color-pro-plus-hover":"color-tv-blue-600","color-pro-premium":"color-tan-orange-500","color-pro-premium-hover":"color-tan-orange-700","color-trial":"color-cold-gray-500","color-trial-hover":"color-cold-gray-600","color-mod":"color-ripe-red-400","color-mod-hover":"color-ripe-red-600","color-top":"color-banana-yellow-700","color-top-hover":"color-banana-yellow-800","color-ad":"color-banana-yellow-a700","color-broker-featured":"color-minty-green-400","color-broker-featured-hover":"color-minty-green-600","color-alert-status-active":"color-minty-green-400","color-alert-status-stopped":"color-ripe-red-500","color-alert-status-triggered":"color-tan-orange-500","color-covid19-confirmed":"color-ripe-red-500","color-covid19-recovered":"color-minty-green-500","color-covid19-deaths":"color-cold-gray-450","color-blue-gray-950":"#0C0E15","color-cold-gray-50":"#F8F9FD","color-cold-gray-100":"#F0F3FA","color-cold-gray-150":"#E0E3EB","color-cold-gray-200":"#D1D4DC","color-cold-gray-250":"#C1C4CD","color-cold-gray-300":"#B2B5BE","color-cold-gray-350":"#A3A6AF","color-cold-gray-400":"#9598A1","color-cold-gray-450":"#868993","color-cold-gray-500":"#787B86","color-cold-gray-550":"#6A6D78","color-cold-gray-600":"#5D606B","color-cold-gray-650":"#50535E","color-cold-gray-700":"#434651","color-cold-gray-750":"#363A45","color-cold-gray-800":"#2A2E39","color-cold-gray-850":"#1E222D","color-cold-gray-900":"#131722","color-cold-gray-950":"#0C0E15","color-ripe-red-50":"#FFEBEE","color-ripe-red-100":"#FFCDD2","color-ripe-red-200":"#ef9a9a","color-ripe-red-300":"#E57373","color-ripe-red-400":"#EF5350","color-ripe-red-500":"#F44336","color-ripe-red-600":"#E53935","color-ripe-red-700":"#D32F2F","color-ripe-red-800":"#C62828","color-ripe-red-900":"#B71C1C","color-ripe-red-a200":"#FF5252","color-ripe-red-a900":"#351E25","color-tan-orange-50":"#FFF3E0","color-tan-orange-100":"#FFE0B2","color-tan-orange-200":"#FFCC80","color-tan-orange-300":"#ffb74d","color-tan-orange-400":"#FFA726","color-tan-orange-500":"#FF9800","color-tan-orange-600":"#FB8C00","color-tan-orange-700":"#F57C00","color-tan-orange-800":"#EF6C00","color-tan-orange-900":"#e65100","color-tan-orange-a200":"#ffab40","color-tan-orange-a400":"#ff9100","color-tan-orange-a700":"#FF6D00","color-iguana-green-100":"#C8E6C9","color-iguana-green-200":"#A5D6A7","color-iguana-green-300":"#81c784","color-iguana-green-400":"#66BB6A","color-iguana-green-500":"#4caf50","color-iguana-green-600":"#43a047","color-iguana-green-700":"#388e3c","color-iguana-green-900":"#1B5E20","color-iguana-green-a700":"#00c853","color-banana-yellow-100":"#FFF9C4","color-banana-yellow-200":"#FFF59D","color-banana-yellow-300":"#FFF176","color-banana-yellow-400":"#ffee58","color-banana-yellow-500":"#ffeb3b","color-banana-yellow-600":"#fdd835","color-banana-yellow-700":"#fbc02d","color-banana-yellow-800":"#f9a825","color-banana-yellow-900":"#F57F17","color-banana-yellow-a400":"#ffea00","color-banana-yellow-a700":"#ffd600","color-tv-blue-50":"#E3F2FD","color-tv-blue-100":"#BBDEFB","color-tv-blue-200":"#90CAF9","color-tv-blue-300":"#64B5F6","color-tv-blue-400":"#42A5F5","color-tv-blue-500":"#2196F3","color-tv-blue-600":"#1E88E5","color-tv-blue-700":"#1976D2","color-tv-blue-800":"#1565C0","color-tv-blue-900":"#0d47a1","color-tv-blue-a100":"#82b1ff","color-tv-blue-a200":"#448aff","color-tv-blue-a400":"#2979ff","color-tv-blue-a600":"#2962FF","color-tv-blue-a700":"#144987","color-tv-blue-a800":"#143661","color-tv-blue-a900":"#132742","color-deep-blue-100":"#D1C4E9","color-deep-blue-200":"#B39DDB","color-deep-blue-300":"#9575cd","color-deep-blue-400":"#7e57c2","color-deep-blue-500":"#673ab7","color-deep-blue-700":"#512da8","color-deep-blue-800":"#4527A0","color-deep-blue-900":"#311B92","color-deep-blue-a100":"#b388ff","color-deep-blue-a700":"#6200EA","color-minty-green-100":"#B2DFDB","color-minty-green-200":"#80cbc4","color-minty-green-300":"#4db6ac","color-minty-green-400":"#26a69a","color-minty-green-500":"#009688","color-minty-green-600":"#00897b","color-minty-green-700":"#00796b","color-minty-green-900":"#004D40","color-minty-green-a400":"#1de9b6","color-minty-green-a700":"#00BFA5","color-grapes-purple-100":"#E1BEE7","color-grapes-purple-200":"#CE93D8","color-grapes-purple-300":"#ba68c8","color-grapes-purple-400":"#ab47bc","color-grapes-purple-500":"#9c27b0","color-grapes-purple-600":"#8e24aa","color-grapes-purple-700":"#7b1fa2","color-grapes-purple-800":"#6A1B9A","color-grapes-purple-900":"#4A148C","color-grapes-purple-a700":"#aa00ff","color-berry-pink-100":"#F8BBD0","color-berry-pink-200":"#f48fb1","color-berry-pink-300":"#f06292","color-berry-pink-400":"#ec407a","color-berry-pink-500":"#e91e63","color-berry-pink-600":"#D81B60","color-berry-pink-700":"#C2185B","color-berry-pink-800":"#AD1457","color-berry-pink-900":"#880E4F","color-berry-pink-a200":"#ff4081","color-sky-blue-100":"#B2EBF2","color-sky-blue-200":"#80DEEA","color-sky-blue-300":"#4dd0e1","color-sky-blue-400":"#26c6da","color-sky-blue-500":"#00bcd4","color-sky-blue-600":"#00acc1","color-sky-blue-700":"#0097A7","color-sky-blue-800":"#00838F","color-sky-blue-900":"#006064","color-sky-blue-a400":"#00e5ff","color-sky-blue-a700":"#00B8D4","color-deep-blue-600":"#5E35B1","color-facebook":"#1B77F2","color-twitter":"#29A5F1","color-youtube":"#FF0000","color-linkedin":"#007BB5","color-pre-market":"color-tan-orange-600","color-pre-market-bg":"color-tan-orange-400","color-post-market":"color-tv-blue-500","color-post-market-bg":"color-tv-blue-400","color-market-open":"color-minty-green-500","color-market-open-bg":"color-minty-green-400","color-market-closed":"color-cold-gray-400","color-market-holiday":"color-cold-gray-400","color-invalid-symbol":"color-ripe-red-400","color-invalid-symbol-hover":"color-ripe-red-700","color-replay-mode":"color-tv-blue-500","color-replay-mode-icon":"color-white","color-replay-mode-hover":"color-tv-blue-600","color-notaccurate-mode":"color-berry-pink-600","color-notaccurate-mode-bg":"color-berry-pink-400","color-delay-mode":"color-tan-orange-600","color-delay-mode-bg":"color-tan-orange-400","color-eod-mode":"color-grapes-purple-400","color-eod-mode-bg":"color-grapes-purple-400","color-data-problem":"color-ripe-red-600","color-data-problem-bg":"color-ripe-red-400","color-data-problem-hover":"color-ripe-red-700","color-list-item-bg-highlighted":"color-tv-blue-50","color-list-item-bg-selected":"color-tv-blue-100","color-list-item-bg-highlighted-hover":"color-tv-blue-100","color-list-item-bg-selected-hover":"color-tv-blue-200","color-screener-header-bg":"color-white","color-screener-header-bg-hover":"color-cold-gray-100"}')
},W5mg:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=["first_visible_bar_time","last_visible_bar_time"];function n(e){return!e.groupId&&"time"!==e.type&&!e.isHidden&&!r.includes(e.id)}},WLST:function(e,t,i){"use strict";e.exports=function(e){for(var t=[],i=e.length,r=0;r<i;r++){var n=e.charCodeAt(r);if(n>=55296&&n<=56319&&i>r+1){var o=e.charCodeAt(r+1);o>=56320&&o<=57343&&(n=1024*(n-55296)+o-56320+65536,r+=1)}n<128?t.push(n):n<2048?(t.push(n>>6|192),t.push(63&n|128)):n<55296||n>=57344&&n<65536?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n>=65536&&n<=1114111?(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},WPQD:function(e,t,i){"use strict";(function(e){var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Trend Line");function s(e,t){this._constructor="LineToolTrendLine";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("ocVb").TrendLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.stop=function(){r.prototype.stop.call(this)},s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Trend Line"},s.prototype.canHasAlert=function(){return!0},s.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("auWl").TrendLineDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.prototype.template=function(){var e=r.prototype.template.call(this);return e.text=this.properties().childs().text.value(),e},s.prototype._applyTemplateImpl=function(e){r.prototype._applyTemplateImpl.call(this,e),this.properties().childs().text.setValue(e.text||"")},s.createProperties=function(e){var t=new n("linetooltrendline",e);return s._configureProperties(t),t},s._configureProperties=function(t){r._configureProperties(t),t.hasChild("text")||t.addChild("text",new e("")),t.addExclusion("text")},t.LineToolTrendLine=s}).call(this,i("tc+8"))},WZy5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("JWMC"),n={filterNamesMap:{script_type:"Indicators and Strategies","script_type-indicators":"Indicators","script_type-strategies":"Strategies",stream:"All Markets","stream-stocks":"Stocks","stream-indices":"Indices","stream-commodities":"Commodities","stream-currencies":"Currencies","stream-bitcoin":"Bitcoin","interval-all":"All Intervals","interval-m":"Short Term","interval-h":"Medium Term","interval-dwm":"Long Term","sort-unmoderated":"Unmoderated","sort-trending":"Trending","sort-discussed":"Most Discussed","sort-viewed":"Most Viewed","sort-agreed":"Most Agreed","sort-suggested":"Suggested",
"sort-recent":"All Ideas","time-day":"Today","time-week":"This Week","time-month":"This Month","time-all":"All Time","by-everyone":"Everyone","by-following":"Following","by-me":"My Ideas"},goProFeaturesMap:{customIntervals:"Add Custom Interval",intradaySpread:"Inraday Spread",kagiRenko:"Japanese Intraday Chart",extendedHours:"Timezones Extended Hours",alerts:{prefix:"New Alerts Limit",widget:"Widget",chart:"Chart Header"},multipleCharts:"Multiple Charts Layout",savedChartsLimit:"Save Chart Limit",studyLimit:"Studies Limit",multipleWatchLists:{prefix:"Watchlists",new:"Create New List",rename:"Rename List",saveAs:"Save List As"},importWatchlist:"Watchlists Import Watchlist",exportWatchlist:"Watchlists Export Watchlist",BATSExchangePopup:"BATS Exchange Popup",DataQualityPopup:"Data Quality Popup",FreeDelayPopup:"Free Delay Popup",proRTProduct:"Volume Profile",studyOnStudy:"Unlimited Study on Study"},trackFeature:{savedChartsLimit:!0,BATSExchangePopup:!0,FreeDelayPopup:!0,DataQualityPopup:!0,intradaySpread:!0,studyOnStudy:!0},trackGoPro:function(e,t,i){i&&!t&&(t=i,i=null);var o=n.goProFeaturesMap[t];if(o){if(i){if("string"==typeof o)return;o="{0} {1}".format(o.prefix,o[i])}(0,r.trackEvent)(e,o)}}};t.default=n,e.exports=t.default},Wc1E:function(e,t,i){"use strict";i.r(t),i.d(t,"DataModeIndicator",(function(){return c}));var r=i("mrSG"),n=(i("YFKU"),i("HbRj"),i("quTg"),i("r8Gw")),o={connecting:window.t("Connecting"),delayed:window.t("Delayed"),delayed_streaming:window.t("Delayed"),endofday:window.t("End of Day"),forbidden:window.t("Instrument is not allowed"),realtime:window.t("Real-time"),snapshot:window.t("Snapshot"),loading:"",replay:window.t("Replay Mode")},s={connecting:window.t("C",{context:"data_mode_connecting_letter"}),delayed:window.t("D",{context:"data_mode_delayed_letter"}),delayed_streaming:window.t("D",{context:"data_mode_delayed_streaming_letter"}),endofday:window.t("E",{context:"data_mode_end_of_day_letter"}),forbidden:window.t("F",{context:"data_mode_forbidden_letter"}),realtime:window.t("R",{context:"data_mode_realtime_letter"}),snapshot:window.t("S",{context:"data_mode_snapshot_letter"}),loading:"",replay:window.t("R",{context:"data_mode_replay_letter"})},a={streaming:"realtime"},l={classMap:{connecting:"tv-data-mode--connecting",delayed:"tv-data-mode--delayed",delayed_streaming:"tv-data-mode--delayed",endofday:"tv-data-mode--endofday",forbidden:"tv-data-mode--forbidden",realtime:"tv-data-mode--realtime",snapshot:"tv-data-mode--snapshot",loading:"tv-data-mode--loading",replay:"tv-data-mode--replay"},classSuffix:"",data:{values:{update_mode:"connecting"}},labelMap:o,modeInterval:600,short:!1,shortLabelMap:s,showTooltip:!0,tooltipType:"custom"},c=function(e){function t(t){var i=e.call(this,t)||this;return i._quoteSessionPrefix="data-mode-indicator",i._componentClass="tv-data-mode",i._init(t),i}return Object(r.__extends)(t,e),t.prototype.getLabel=function(){return!0===this._shortMode?this._shortLabelMap[this._value]||"":e.prototype.getLabel.call(this)},t.prototype.setMode=function(e,t){this.update({values:{
update_mode:e,update_mode_seconds:t}})},t.prototype.hide=function(){this._el.classList.add("i-hidden")},t.prototype.show=function(){this._el.classList.remove("i-hidden")},t.prototype.getTooltipText=function(){var e="",t=this.getValue();if(""===t)return e;switch(t){case"delayed":e=window.t("Quotes are delayed by {0} min and updated every 30 seconds");break;case"delayed_streaming":e=window.t("Quotes are delayed by {0} min");break;default:e=this._labelMap[t]||e}return["delayed","delayed_streaming"].includes(t)&&(e=e.format(Math.round(this._modeInterval/60))),e},t.prototype._init=function(t){void 0===t&&(t={});var i=Object.assign({},l,t);this._modeInterval=i.modeInterval||600,this._shortLabelMap=i.shortLabelMap||s,e.prototype._init.call(this,i),this._render()},t.prototype._getValueFromData=function(e){var t;return t=void 0!==e.values&&void 0!==e.values.update_mode?e.values.update_mode:this.getValue(),a[t]||t},t.prototype._updateValue=function(t,i){void 0!==t.values&&void 0!==t.values.update_mode_seconds&&(this._modeInterval=t.values.update_mode_seconds),e.prototype._updateValue.call(this,t,i)},t}(n.a)},Wh6B:function(e,t,i){"use strict";var r=i("Eyy1").ensureNotNull,n=i("Ss5c").LineDataSource,o=i("Ocx9").DefaultProperty,s=i("08i5"),a=window.t("Forecast");function l(e,t){this._constructor="LineToolPrediction";var r=t||l.createProperties();n.call(this,e,r),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Ay2m").PredictionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(l,n),l.prototype.isSynchronizable=function(){return!1},l.prototype.status=function(){return this._properties.status.value()},l.prototype.setStatus=function(e){return this._properties.status.setValue(e)},l.prototype.pointsCount=function(){return 2},l.prototype.translatedType=function(){return a},l.prototype.name=function(){return"Forecast"},l.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),this.checkAlert()},l.prototype.checkAlert=function(){if(!(this._points.length<2||this._model.mainSeries().bars().isEmpty())){var e=this._points[1];if(this.status())e.index>this._model.timeScale().baseIndex()&&this.setStatus(s.AlertStatus.Waiting);else{var t=this._model.mainSeries().bars().valueAt(e.index);if(null!==t){var i=this.direction();if(i===s.Direction.Up&&t[TradingView.HIGH_PLOT]>=e.price)this.setStatus(s.AlertStatus.Success);else if(i===s.Direction.Down&&t[TradingView.LOW_PLOT]<=e.price)this.setStatus(s.AlertStatus.Success);else{var n=r(this._model.mainSeries().bars().lastIndex());e.index!==n&&this.setStatus(s.AlertStatus.Failure)}}}}},l.prototype.addPoint=function(e){var t=n.prototype.addPoint.call(this,e);return t&&this.checkAlert(),t},l.prototype.endChanging=function(){n.prototype.endChanging.call(this),this.setStatus(s.AlertStatus.Waiting),this.checkAlert()},l.prototype.onData=function(e){n.prototype.onData.call(this,e),this.checkAlert()},l.prototype.endMoving=function(){n.prototype.endMoving.call(this),this.setStatus(s.AlertStatus.Waiting),
this.checkAlert()},l.prototype.direction=function(){if(this.points().length<2)return s.Direction.Up;var e=this.points()[0];return this.points()[1].price>e.price?s.Direction.Up:s.Direction.Down},l.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("Pwwq").PredictionDefinitionsViewModel}.bind(null,i)).catch(i.oe)},l.prototype.cloneable=function(){return!1},l.createProperties=function(e){var t=new o("linetoolprediction",e);return l._configureProperties(t),t},l._configureProperties=function(e){n._configureProperties(e),e.merge({status:s.AlertStatus.Waiting})},t.LineToolPrediction=l},WkOR:function(e,t,i){"use strict";i.r(t),i.d(t,"areEqualSymbols",(function(){return o})),i.d(t,"includesEqualSymbol",(function(){return s}));var r=i("Kxc7"),n=r.enabled("uppercase_instrument_names");function o(e,t){return void 0===e?void 0===t:void 0!==t&&(n?e.toUpperCase()===t.toUpperCase():e===t)}function s(e,t){return e.some((function(e){return o(t,e)}))}},WkYF:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Date Range");function s(e,t){this._constructor="LineToolDateRange";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("3xLB").DateRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Date Range"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("Ax76").GeneralDatePriceRangeDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetooldaterange",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolDateRange=s},Wo0S:function(e,t,i){e.exports={"common-tooltip":"common-tooltip-s2GEoMlT","common-tooltip--hidden":"common-tooltip--hidden-Z0EAvXgv","common-tooltip--horizontal":"common-tooltip--horizontal-13imOC5w","common-tooltip--farther":"common-tooltip--farther-2yXMAkHF","common-tooltip--vertical":"common-tooltip--vertical-mcRoucek","common-tooltip-farther":"common-tooltip-farther-XoKytD99","common-tooltip--no-pointer-events":"common-tooltip--no-pointer-events-3nL0Vygu","common-tooltip--direction_normal":"common-tooltip--direction_normal-3u9ejKM2","common-tooltip__body":"common-tooltip__body-356XFpBj","common-tooltip__button-container":"common-tooltip__button-container-3EjyKV3s","common-tooltip__body--no-buttons":"common-tooltip__body--no-buttons-3quqi1Sv","common-tooltip__button":"common-tooltip__button-1rnQgujz","common-tooltip--direction_reversed":"common-tooltip--direction_reversed-XN-JUTdr","common-tooltip__ear-holder":"common-tooltip__ear-holder-yIJjpvgu",
"common-tooltip__ear-holder--below":"common-tooltip__ear-holder--below-1rmzWejA","common-tooltip__ear-holder--above":"common-tooltip__ear-holder--above-1D8FkNkw","common-tooltip__ear-holder--before":"common-tooltip__ear-holder--before-oXq5sFXr","common-tooltip__ear-holder--after":"common-tooltip__ear-holder--after-BnAcuW1N","common-tooltip__body--with-hotkey":"common-tooltip__body--with-hotkey-2wXRtgYZ","common-tooltip__body--width_wide":"common-tooltip__body--width_wide-3oG604Li","common-tooltip__body--width_narrow":"common-tooltip__body--width_narrow-34hrFTFo","common-tooltip__body--no-padding":"common-tooltip__body--no-padding-2vVe6Xco","common-tooltip__hotkey-block":"common-tooltip__hotkey-block-2gS_uAOl","common-tooltip__hotkey-block--divider":"common-tooltip__hotkey-block--divider-rQ38KmpQ","common-tooltip__hotkey-text":"common-tooltip__hotkey-text-1eb7dyCg","common-tooltip__hotkey-button":"common-tooltip__hotkey-button-1XJ40e4D","common-tooltip__plus-sign":"common-tooltip__plus-sign-3CKSupKp"}},WqyU:function(e,t,i){(function(e){var t;"undefined"!=typeof window&&(t=window.TVScript=window.TVScript||{}),(t=t||{}).Access={},t.Access.ACCESS_OPEN_NO_AUTH="open_no_auth",t.Access.ACCESS_CLOSED_NO_AUTH="closed_no_auth",t.Access.ACCESS_CLOSED_NEEDS_AUTH="closed_needs_auth",t.Access.MAP_ID_TO_NAME={1:t.Access.ACCESS_OPEN_NO_AUTH,2:t.Access.ACCESS_CLOSED_NO_AUTH,3:t.Access.ACCESS_CLOSED_NEEDS_AUTH},t.Access.MAP_NAME_TO_ID={},Object.keys(t.Access.MAP_ID_TO_NAME).forEach((function(e){t.Access.MAP_NAME_TO_ID[t.Access.MAP_ID_TO_NAME[e]]=e})),t.Kinds={},t.Kinds.STUDY="study",t.Kinds.STRATEGY="strategy",t.PinePrefix={},t.PinePrefix.USER="USER;",t.PinePrefix.PUB="PUB;",t.PinePrefix.STD="STD;",t.PinePrefix.TV="TV_",t.PinePrefix.EDGR="EDGR_",t.PineType={},t.PineType.UserSaved="PineType_UserSaved",t.PineType.UserPublished="PineType_UserPublished",t.PineType.BuiltIn="PineType_BuiltIn",t.PineType.Addon="PineType_Addon",t.Type=t.Type||function(){},t.Type.VOID="void",t.Type.INTEGER="integer",t.Type.FLOAT="float",t.Type.STRING="string",t.Type.BOOL="bool",t.Type.COLOR="color",t.Type.SERIES="series",t.Type.PLOT="plot",t.Type.HLINE="hline",t.Type.BARCOLOR="barcolor",t.Type.BGCOLOR="bgcolor",t.Type.PLOTSHAPES="plotshape",t.Type.PLOTCHARS="plotchar",t.Type.PLOTARROWS="plotarrow",t.Type.NA="na",t.Type.ARRAY="array",t.TranslatorDefaultVersion=1,t.TranslatorReferenceVersioningIntroduced=4,t.TranslatorLastVersion=4,t.pineType=function(e){return e.startsWith(t.PinePrefix.USER)?t.PineType.UserSaved:e.startsWith(t.PinePrefix.PUB)?t.PineType.UserPublished:e.startsWith(t.PinePrefix.STD)||e.startsWith(t.PinePrefix.TV)||e.startsWith(t.PinePrefix.EDGR)?t.PineType.BuiltIn:t.PineType.Addon},t.patchILTemplate=function(e,i,r){var n=r||{};return t._patchTemplate(/<(in_\d+)>/g,e,i,n)},t.decorateQuotes=function(e){if(!e)return e;var t=/([^\\']+?)(')[^']*?/g,i=e;return"'"==i.charAt(0)&&"'"==i.charAt(i.length-1)?"'"+(i=i.substr(1,i.length-2)).replace(t,"$1\\$2")+"'":i.replace(t,"$1\\$2")},t.patchInputs=function(e,t){var i={}
;for(var r in e)if(e.hasOwnProperty(r)){var n,o=e[r];n=o.isFake?{v:t[o.id],f:!0,t:o.type}:t[o.id],i[o.id]=n}return i},t._patchTemplate=function(e,i,r,n){var o=n||{};return i.replace(e,(function(e,i){for(var n=(i in o?o[i]:r.defaults.inputs[i]),s=0;s<r.inputs.length;++s)if(r.inputs[s].id===i)if("bool"===r.inputs[s].type)n=n?"1.0":"0.0";else if(["text","symbol","resolution","session"].indexOf(r.inputs[s].type)>=0)n="'"+t.decorateQuotes(n)+"'";else if("source"===r.inputs[s].type){var a=n.split("$");a[0]="'"+a[0]+"'",n="source("+a.join(",")+")"}return n}))},t.isStrategy=function(e){return/^\s*strategy\s*\(/m.test(e)};var i=/^\/\/\s*?@version\s*?=\s*?(\S*?)\s*?$/gm,r=/^[0-9]+$/;t.extractVersion=function(e){i.lastIndex=0;var n=i.exec(e);if(null===n)return t.TranslatorDefaultVersion;var o=n[1],s=r.test(o)?Number(o):NaN;return isNaN(s)?t.TranslatorDefaultVersion:s},e&&e.exports&&(e.exports=t)}).call(this,i("YuTi")(e))},Wt0y:function(e,t,i){"use strict";function r(e){void 0===e&&(e=location.host);return-1!==["i18n.tradingview.com","partial.tradingview.com","www.tradingview.com","wwwcn.tradingview.com"].indexOf(e)||-1!==["d33t3vvu2t2yu5.cloudfront.net","dwq4do82y8xi7.cloudfront.net","s.tradingview.com","s3.tradingview.com"].indexOf(e)||e.match(/^[a-z]{2}\.tradingview\.com/)||e.match(/prod-[^.]+.tradingview.com/)?"battle":-1!==e.indexOf("tradingview.com")?"staging":e.match(/webcharts/)?"staging_local":(e.match(/^localhost(:\d+)?$/),"local")}function n(){return"local"===r()}function o(){return"battle"===r()}function s(){return!o()}i.r(t),i.d(t,"environment",(function(){return r})),i.d(t,"isLocal",(function(){return n})),i.d(t,"isProd",(function(){return o})),i.d(t,"isDebug",(function(){return s}))},X2bh:function(e,t,i){"use strict";i.r(t),i.d(t,"confirmDatasourceRemoving",(function(){return n}));var r=i("oNDq");function n(){return new Promise((function(e){Object(r.createConfirmDialog)({type:"modal",content:window.t("This drawing is used in alert. If you remove the drawing, the alert will be also removed. Do you want to remove the drawing anyway?")}).then((function(t){t.on("action:yes",(function(t){t.close(),e(!0)})),t.on("action:no",(function(t){t.close(),e(!1)})),t.on("destroy",(function(){return e(!1)})),t.open()})).catch((function(t){throw e(!1),t}))}))}},XAms:function(e,t,i){"use strict";function r(e){e.preventDefault()}i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o}));var n=["input:not([type])",'input[type="text"]','input[type="email"]','input[type="password"]','input[type="search"]','input[type="number"]','input[type="url"]',"textarea","a[href]",'*[contenteditable="true"]'];function o(e){var t=e.target;t&&!t.closest(n.join(", "))&&e.preventDefault()}},XFad:function(e,t,i){"use strict";var r=i("5rJj"),n=i("aDyP").LineToolPitchfork,o=window.t("Schiff Pitchfork");function s(e,t){var i=t||s.createProperties();n.call(this,e,i),this._constructor="LineToolSchiffPitchfork2"}inherit(s,n),s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Schiff Pitchfork"},
s.createProperties=function(e){var t=new r("linetoolschiffpitchfork2",e,!1,{range:[0,8]});return s._configureProperties(t),t},s._configureProperties=function(e){n._configureProperties(e)},t.LineToolSchiffPitchfork2=s},"XMe/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.sortedStringify=function(e,t){t||(t={});"function"==typeof t&&(t={cmp:t});var i=t.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var s="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},l=t.cmp&&(u=t.cmp,function(e){return function(t,i){var r={key:t,value:e[t]},n={key:i,value:e[i]};return u(r,n)}}),c=[];var u;return function e(t,u,h,d){var p=i?"\n"+new Array(d+1).join(i):"",f=i?": ":":";if(h&&h.toJSON&&"function"==typeof h.toJSON&&(h=h.toJSON()),void 0!==(h=a.call(t,u,h))){if("object"!==(void 0===h?"undefined":r(h))||null===h)return JSON.stringify(h);if(n(h)){for(var _=[],m=0;m<h.length;m++){var v=e(h,m,h[m],d+1)||JSON.stringify(null);_.push(p+i+v)}return"["+_.join(",")+p+"]"}if(-1!==c.indexOf(h)){if(s)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(h);var g=o(h).sort(l&&l(h));for(_=[],m=0;m<g.length;m++){var y=e(h,u=g[m],h[u],d+1);if(y){var b=JSON.stringify(u)+f+y;_.push(p+i+b)}}return c.splice(c.indexOf(h),1),"{"+_.join(",")+p+"}"}}({"":e},"",e,0)};var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var r in e)t.call(e,r)&&i.push(r);return i}},XPit:function(e,t,i){"use strict";i.r(t),i.d(t,"TimePointIndexSearchMode",(function(){return r})),i.d(t,"seriesPlotFunctionMap",(function(){return l})),i.d(t,"barFunction",(function(){return c})),i.d(t,"SeriesData",(function(){return u}));var r,n=i("Eyy1"),o=i("k9/m");!function(e){e[e.FromLeft=-1]="FromLeft",e[e.FromRight=1]="FromRight"}(r||(r={}));var s={open:function(e){return e[1]},high:function(e){return e[2]},low:function(e){return e[3]},close:function(e){return e[4]},hl2:function(e){return(e[2]+e[3])/2},hlc3:function(e){return(e[2]+e[3]+e[4])/3},ohlc4:function(e){return(e[1]+e[2]+e[3]+e[4])/4}},a=["open","high","low","close","hl2","hlc3","ohlc4"];function l(){var e=new Map;return a.forEach((function(t,i){e.set(t,c(t))})),e}function c(e){return s[e]}var u=function(){function e(){this.m_bars=new o.PlotList(l()),this.m_nsBars=new o.PlotList(l())}return e.prototype.bars=function(){return this.m_bars},e.prototype.nsBars=function(){return this.m_nsBars},e.prototype.size=function(){return this.m_bars.size()+this.m_nsBars.size()},e.prototype.each=function(e){this.m_bars.each(e),this.m_nsBars.each(e)},e.prototype.clear=function(){this.m_bars.clear(),this.m_nsBars.clear(),this.lastProjectionPrice=void 0},e.prototype.isEmpty=function(){
return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()},e.prototype.first=function(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()},e.prototype.last=function(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()},e.prototype.search=function(e,t){return this.nsBars().isEmpty()?this.bars().search(e,t):this.bars().isEmpty()||Object(n.ensureNotNull)(this.nsBars().firstIndex())<=e?this.nsBars().search(e,t):this.bars().search(e,t)},e.prototype.valueAt=function(e){var t=this.search(e);return null!==t?t.value:null},e.prototype.plotValueToTimePointIndex=function(e,t,i){if(i===r.FromRight){var n=function(i,r){var n=r[t];return null!=n&&e>=n};return null!==(o=this.m_bars.findLast(n))?o.index:null!==(s=this.m_nsBars.findLast(n))?s.index:this.m_bars.firstIndex()}if(i===r.FromLeft){var o,s,a=function(i,r){var n=r[t];return null!=n&&e<=n};return null!==(o=this.m_bars.findFirst(a))?o.index:null!==(s=this.m_nsBars.findFirst(a))?s.index:this.m_bars.lastIndex()}throw new Error("plotValueToTimePointIndex: unsupported search mode")},e}()},XUCF:function(e,t,i){"use strict";var r=i("Hr11").sign,n=i("Ss5c").LineDataSource,o=i("Ocx9").DefaultProperty,s=window.t("Ghost Feed");function a(e,t,i){this._source=e,this._index=t,this._bars=i||[]}function l(e,t,r){this._constructor="LineToolGhostFeed";var o=t||l.createProperties();if(o._source=this,!r){var s=Math.round(this.calculateATR(e));o.averageHL.setValue(s)}n.call(this,e,o),this._segments=[],o.averageHL.listeners().subscribe(this,l.prototype.regenerate),o.variance.listeners().subscribe(this,l.prototype.regenerate),o.points||o.addProperty("points"),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._currentInterval=e.mainSeries().interval(),this.properties().onRestoreFactoryDefaults().subscribe(this,this._handleRestoringFactoryDefaults),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("dMkl").GhostFeedPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}a.prototype.setBars=function(e){this._bars=e||[]},a.prototype.clone=function(e){return new a(e,this._index,TradingView.clone(this._bars))},a.prototype.createBar=function(){var e=this._source.properties().averageHL.value(),t=this._source.properties().variance.value()/100,i=this._source._model.mainSeries().base(),r=Math.random(),n=e*(1-2*r)*t,o=e*(1+(.5-(r=Math.random()))*t),s=n-o/2,a=s+o;return{o:(s+Math.random()*o)/i,h:a/i,l:s/i,c:(s+Math.random()*o)/i}},a.prototype.generate=function(){this._bars=[];var e=this._source.points(),t=e[this._index],i=e[this._index+1];if(t&&i&&t.index!==i.index){this._avgHL=this._source.properties().averageHL.value(),this._variance=this._source.properties().variance.value()/100;for(var n=this._index?t.index+1:t.index,o=r(i.index-t.index),s=n;s!==i.index;s+=o)this._bars.push(this.createBar())}},a.prototype.bars=function(){return this._bars},a.prototype.setSize=function(e){
if(e<this._bars.length)this._bars.splice(e,this._bars.length-e);else for(;this._bars.length<e;)this._bars.push(this.createBar())},inherit(l,n),l.prototype.isSynchronizable=function(){return!1},l.prototype._handleRestoringFactoryDefaults=function(){var e=Math.round(this.calculateATR());this.properties().averageHL.setValue(e)},l.prototype.destroy=function(){this.properties().onRestoreFactoryDefaults().unsubscribe(this,this._handleRestoringFactoryDefaults),n.prototype.destroy.call(this)},l.prototype.regenerate=function(){this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._segments.forEach((function(e){e.generate()})),this.updateAllViews(),this._model.updateSource(this)},l.prototype.propertiesChanged=function(){n.prototype.propertiesChanged.call(this),this._currentAverageHL===this._properties.averageHL.value()&&this._currentVariance===this._properties.variance.value()||this.regenerate()},l.prototype.pointsCount=function(){return-1},l.prototype.translatedType=function(){return s},l.prototype.name=function(){return"Ghost Feed"},l.prototype.segmentBars=function(e){return this._segments[e].bars()},l.prototype.segments=function(){return this._segments},l.prototype.generateBars=function(e){this._segments.length<=e&&this._segments.push(new a(this,e)),this._segments[e].generate()},l.prototype.addPoint=function(e){if(this._points.length>0&&this._points[this._points.length-1].index===e.index){this._lastPoint=null,this.normalizePoints(),this.createServerPoints();for(var t=0;t<this._points.length;t++)this._createPointProperty(t);return!0}var i=n.prototype.addPoint.call(this,e);return this._finished&&(this._lastPoint=null),this._points.length>1&&this.generateBars(this._points.length-2),i||this._finished},l.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},l.prototype.setPoint=function(e,t,i){if(n.prototype.setPoint.call(this,e,t,i),e>0){var r=this.points()[e-1],o=t.index-r.index;this._segments[e-1].setSize(Math.abs(o))}if(e<this.points().length-1){o=this.points()[e+1].index-t.index;this._segments[e].setSize(Math.abs(o))}},l.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.segments=this._segments.map((function(e){return{bars:e.bars()}})),t},l.prototype.restoreData=function(e){var t=this;e.segments&&(this._segments=e.segments.map((function(e,i){return new a(t,i,[].concat(e.bars))}))),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value()},l.prototype.onData=function(e){if(n.prototype.onData.call(this,e),0===this.pointsProperty().childs().points._childs.length)for(var t=0;t<this._points.length;t++)this._createPointProperty(t);this._currentInterval!==this._model.mainSeries().interval()&&(this.regenerate(),this._currentInterval=this._model.mainSeries().interval())},l.prototype.cloneData=function(e){var t=this;this._segments=e._segments.map((function(e){return e.clone(t)}))},l.prototype.calculateATR=function(e){
var t=(void 0!==e?e:this._model).mainSeries(),i=[];t.bars().each((function(e,t){i.push(t[TradingView.HIGH_PLOT]-t[TradingView.LOW_PLOT])}));var r=0===i.length?0:i.reduce((function(e,t){return e+t}),0)/i.length;return r*=t.base()},l.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("fIc+").GhostFeedDefinitionsViewModel}.bind(null,i)).catch(i.oe)},l.createProperties=function(e){var t=new o("linetoolghostfeed",e);return l._configureProperties(t),t},l._configureProperties=function(e){n._configureProperties(e)},t.LineToolGhostFeed=l},XcdR:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("mrSG"),n=i("txPx"),o=i("RDU5"),s=Object(n.getLogger)("Chart.ChartUndoModel"),a=function(e){function t(t,i,r){var n=e.call(this,r,!1)||this;return n._newRightOffsetAndBarSpacing=null,n.setCustomFlag("doesnt_affect_save",!0),n._model=t,n._rightOffsetAndBarSpacing=i,n}return Object(r.__extends)(t,e),t.prototype.undo=function(){if(null===this._newRightOffsetAndBarSpacing){var e=this._model.timeScale();this._newRightOffsetAndBarSpacing={barSpacing:e.barSpacing(),rightOffset:e.rightOffset()},e.setBarSpacing(this._rightOffsetAndBarSpacing.barSpacing),e.setRightOffset(this._rightOffsetAndBarSpacing.rightOffset)}else s.logDebug("TimeScaleChangeUndoCommand.undo: Command is already undone")},t.prototype.redo=function(){if(null!==this._newRightOffsetAndBarSpacing){var e=this._model.timeScale();e.setBarSpacing(this._newRightOffsetAndBarSpacing.barSpacing),e.setRightOffset(this._newRightOffsetAndBarSpacing.rightOffset),this._newRightOffsetAndBarSpacing=null}else s.logDebug("TimeScaleChangeUndoCommand.redo: Command is not undone")},t}(o.UndoCommand)},XlJ7:function(e,t,i){"use strict";function r(e,t,i,r){return(r?r+" ":"")+(i?i+" ":"")+e+"px "+t}i.r(t),i.d(t,"makeFont",(function(){return r})),i.d(t,"parseFont",(function(){return o}));var n=/(bold )?(italic )?(\d+)(px|pt) (.*)$/;function o(e){var t=n.exec(e);return null===t?null:{family:t[5],size:parseInt(t[3])*("pt"===t[4]?.75:1),bold:Boolean(t[1]),italic:Boolean(t[2])}}},XuOW:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"InsertionErrorCode",(function(){return r})),function(e){e.StudyCannotBeChild="cannot_be_child",e.StubWasRemoved="stub_was_removed",e.CannotGetMetainfo="cannot_get_metainfo",e.Cancelled="cancelled",e.Unknown="unknown"}(r||(r={}))},Xyly:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Curve");function s(e,t){this._constructor="LineToolBezierQuadro";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("4Ptp").BezierQuadroPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Curve"},s.prototype.controlPoint=function(){
var e=this.pointToScreenPoint(this.points()[0])[0],t=this.pointToScreenPoint(this.points()[1])[0],i=t.subtract(e).scaled(.5).transposed().scaled(.3),r=e.add(t).scaled(.5).add(i);return this.screenPointToPoint(r)},s.prototype.setLastPoint=function(e,t){r.prototype.setLastPoint.call(this,e,t),this._controlPoint=this.controlPoint()},s.prototype.addPoint=function(e,t,i){var n=r.prototype.addPoint.call(this,e,t,!0);if(n){var o=this.controlPoint();this._points.push(o),delete this._controlPoint,i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2)}return n},s.prototype.restorePoints=function(e,t,i){r.prototype.restorePoints.call(this,e,t,i),this._createPointProperty(2)},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("b4fl").GeneralBezierDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolbezierquadro",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolBezierQuadro=s},XzZr:function(e,t,i){"use strict";var r=i("ogJP").declareClassAsPureInterface;function n(){}TradingView.WEB_SOCKET_WAS_CONNECTED=!1,n.REBIND_STUDY_STANDALONE_TO_CHILD=1,n.REBIND_STUDY_CHILD_TO_STANDALONE=2,n.prototype.defaultWatchlistSymbols=function(){},n.prototype.defaultResolutions=function(){},n.prototype.availableCurrencies=function(){},n.prototype.supportedSymbolsTypes=function(){},n.prototype.supportedExchangesList=function(){},n.prototype.futuresRegex=function(){},n.prototype.quoteCreateSession=function(e){},n.prototype.quoteDeleteSession=function(e){},n.prototype.quoteSetFields=function(e,t){},n.prototype.quoteAddSymbols=function(e,t){},n.prototype.quoteRemoveSymbols=function(e,t){},n.prototype.quoteFastSymbols=function(e,t){},n.prototype.depthCreateSession=function(e,t,i){},n.prototype.depthDeleteSession=function(e){},n.prototype.depthSetSymbol=function(e,t){},n.prototype.depthClearSymbol=function(e){},n.prototype.depthSetScale=function(e,t){},n.prototype.chartCreateSession=function(e,t){},n.prototype.chartDeleteSession=function(e){},n.prototype.createSession=function(e,t){},n.prototype.removeSession=function(e){},n.prototype.connected=function(){},n.prototype.connect=function(){},n.prototype.disconnect=function(){},n.prototype.switchTimezone=function(e,t){},n.prototype.resolveSymbol=function(e,t,i,r,n){},n.prototype.createSeries=function(e,t,i,r,n,o,s,a){},n.prototype.removeSeries=function(e,t,i){},n.prototype.modifySeries=function(e,t,i,r,n,o,s){},n.prototype.requestMoreData=function(e,t,i,r){},n.prototype.requestMetadata=function(e,t,i){},n.prototype.isCanCreateStudy=function(e,t){},n.prototype.createStudy=function(e,t,i,r,n,o,s){},n.prototype.rebindStudy=function(e,t,i,r,n,o,s,a){},n.prototype.removeStudy=function(e,t,i){},n.prototype.modifyStudy=function(e,t,i,r,n){},n.prototype.createPointset=function(e,t,i,r,n,o,s){},n.prototype.modifyPointset=function(e,t,i,r,n){},
n.prototype.removePointset=function(e,t,i){},n.prototype.requestMoreTickmarks=function(e,t,i,r){},n.prototype.requestFirstBarTime=function(e,t,i,r){},n.prototype._invokeHandler=function(e,t){},n.prototype._sendRequest=function(e,t){},n.prototype._onMessage=function(e){},n.prototype._convertTimescaleResponse=function(e){},n.prototype._dispathNotification=function(e){},n.prototype._invokeNotificationHandler=function(e,t,i){},n.prototype._notifySessions=function(e){},n.prototype.unpack=function(e){},n.prototype.searchSymbols=function(e,t,i,r,n,o,s,a,l,c){},n.prototype.serverTimeOffset=function(){},n.prototype.getMarks=function(e,t,i,r,n){},n.prototype.getTimescaleMarks=function(e,t,i,r,n){},r(n,"ChartApiInterface"),e.exports.HandlerInfo=function(e,t){this.handler=e,this.customId=t},e.exports.ChartApiInterface=n},Y5iK:function(e,t,i){"use strict";i.r(t),i.d(t,"MainSeriesScaleRatioProperty",(function(){return o}));var r=i("aIyQ"),n=i.n(r),o=function(){function e(e){this._changed=new n.a,this._model=e}return e.prototype.getStepChangeValue=function(){return.1},e.prototype.getMinValue=function(){return 1e-7},e.prototype.getMaxValue=function(){return 99999999},e.prototype.value=function(){return this._model.mainSeriesScaleRatio()},e.prototype.setValue=function(e,t){(e!==this.value()||t)&&(this._model.setMainSeriesScaleRatio(e),this._onChanged())},e.prototype.state=function(){return null},e.prototype.clone=function(){return new e(this._model)},e.prototype.listeners=function(){return this._changed},e.prototype.subscribe=function(e,t){this._changed.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._changed.unsubscribe(e,t)},e.prototype.unsubscribeAll=function(e){this._changed.unsubscribeAll(e)},e.prototype._onChanged=function(){this._changed.fire(this)},e}()},Y7w9:function(e,t,i){"use strict";i.r(t),i.d(t,"lowerbound",(function(){return o})),i.d(t,"lowerbound_int",(function(){return s})),i.d(t,"upperbound",(function(){return a})),i.d(t,"upperbound_int",(function(){return l})),i.d(t,"subtract",(function(){return c})),i.d(t,"moveToHead",(function(){return u})),i.d(t,"moveAfter",(function(){return h})),i.d(t,"moveBefore",(function(){return d}));var r=i("mrSG");function n(e,t){return e<t}function o(e,t,i,r,n){void 0===r&&(r=0),void 0===n&&(n=e.length);for(var o=n-r;0<o;){var s=o>>1,a=r+s;i(e[a],t)?(r=a+1,o-=s+1):o=s}return r}function s(e,t,i,r){return void 0===i&&(i=0),void 0===r&&(r=e.length),o(e,t,n,i,r)}function a(e,t,i,r,n){void 0===r&&(r=0),void 0===n&&(n=e.length);for(var o=n-r;0<o;){var s=o>>1,a=r+s;i(t,e[a])?o=s:(r=a+1,o-=s+1)}return r}function l(e,t,i,r){return void 0===i&&(i=0),void 0===r&&(r=e.length),a(e,t,n,i,r)}function c(e,t){return e.filter((function(e){return!t.includes(e)}))}function u(e,t){var i=e.indexOf(t);return i<0?e.slice():[t].concat(e.slice(0,i)).concat(e.slice(i+1))}function h(e,t,i){var n=new Set(t),o=[],a=[];return e.forEach((function(e,t){n.has(e)||(o.push(e),a.push(t))})),i<e.length-1&&(i=s(a,i+1)),o.splice.apply(o,Object(r.__spreadArrays)([i,0],t)),o}function d(e,t,i){
var n=new Set(t),o=[],a=[];return e.forEach((function(e,t){n.has(e)||(o.push(e),a.push(t))})),i<=e.length-1&&(i=s(a,i)),o.splice.apply(o,Object(r.__spreadArrays)([i,0],t)),o}},YCFM:function(e,t,i){},YFkB:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("mrSG"),n=i("Eyy1");function o(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o,s,a,l,c,u,h,d;return Object(r.__generator)(this,(function(r){return i=NaN,o=NaN,s="",a=e.proSymbol(),l=(e.symbolInfo()||{name:null}).name||a,c=e.priceScale(),t&&(u=e.firstValue(),i=null!==u?c.coordinateToPrice(t,u):null,s=null!==i?e.formatter().format(i):""),null!==(h=e.bars().last())&&(o=Object(n.ensure)(h.value[TradingView.CLOSE_PLOT])),d=!!(e.symbolInfo()||{is_tradable:!1}).is_tradable,[2,{symbol:a,displaySymbol:l,value:i,formattedValue:s,last:o,symbolInfoTradable:d}]}))}))}},YJLw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t},e.exports=t.default},YTCC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHexColorByName=t.colorsPalette=void 0;var r=i("W3MX"),n=i("f+Sq"),o={},s=Object.keys(r).length,a=/^#[0-9A-F]{6}$/i;Object.keys(r).forEach((function(e){var t=function e(t,i){void 0===i&&(i=[]);var n=r[t];if(!n)return null;if(a.test(n))return n;var o=n;return i.push(t),-1!==i.indexOf(o)?(console.warn("Colors definitions cycled"),n):i.length>s?(console.warn("Too many variables-link in HEX-color search: "+i[0]),null):e(o,i)}(e);o[e]=n.ensureNotNull(t)})),t.colorsPalette=o,t.getHexColorByName=function(e){var i=t.colorsPalette[e];if(!i)throw new Error("No such color "+e);return i}},YUej:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 0h18v18H0z"/><path fill="#ffda44" d="M9 2l.3 1.1h1.2l-1 .7L10 5l-1-.7L8 5l.4-1.2-1-.7h1.3zM4 4l1.1.6.8-.9L5.8 5l1 .6-1.2.1-.1 1.2-.6-1-1.2.2.9-.9zM2 9l1.1-.4V7.4l.7 1L5 8l-.7 1 .7 1-1.1-.4-.7 1V9.2zm2 4.9l.6-1.1-.9-.9 1.2.2.5-1 .2 1.1 1.2.2-1 .6.1 1.2-.8-.9zm5 2l-.4-1.1H7.4l1-.7-.4-1.2 1 .7 1-.7-.4 1.2 1 .7H9.2zm4.8-2l-1-.6-.9.9.2-1.2-1-.6 1.1-.1.2-1.2.6 1L14 12l-.8.8zm2-5l-1 .4v1.2l-.8-1-1 .4.6-1-.7-1 1.1.4.8-1v1.3zm-2-4.9l-.5 1.1.9.8-1.2-.1-.6 1-.1-1.2-1.2-.1 1-.6-.2-1.2.9.9z"/></svg>'},YWnQ:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"SymbolErrorPermissionDeniedReason",(function(){return r})),i.d(t,"permissionDenied",(function(){return n})),function(e){e.Symbol="symbol",e.ExtendedHours="extended_hours",e.GroupPermission="group"}(r||(r={}));var n="permission denied"},YdVo:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolPath",(function(){return u}));var r=i("mrSG"),n=i("Eyy1"),o=i("aO4+"),s=i("YFKU"),a=i("Ocx9"),l=i("Ss5c"),c=Object(s.t)("Path"),u=function(e){function t(r,n){var o=this,s=n||t.createProperties();return(o=e.call(this,r,s)||this)._constructor="LineToolPath",
Promise.all([i.e(213),i.e("lt-pane-views")]).then(i.bind(null,"JeuX")).then((function(e){o._setPaneViews([new e.PathPaneView(o,r)])})),o}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return-1},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.translatedType=function(){return c},t.prototype.name=function(){return"Path"},t.prototype.hasEditableCoordinates=function(){return!1},t.prototype.addPoint=function(t,i,r){var s,a=Object(n.ensureNotNull)(this.priceScale()),l=this._model.timeScale().indexToCoordinate(t.index),c=t.price,u=Object(n.ensure)(null===(s=this.ownerSource())||void 0===s?void 0:s.firstValue()),h=a.priceToCoordinate(c,u);if(this._points.length>0){var d=this._points[this._points.length-1],p=this._model.timeScale().indexToCoordinate(d.index),f=d.price,_=a.priceToCoordinate(f,u);if(new o.Point(l,h).subtract(new o.Point(p,_)).length()<5)return this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0}return e.prototype.addPoint.call(this,t,i,r)},t.createProperties=function(e){var i=new a.DefaultProperty("linetoolpath",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"WW+G")).then((function(e){return e.PathDefinitionsViewModel}))},t._configureProperties=function(e){l.LineDataSource._configureProperties(e)},t}(l.LineDataSource)},"Ye2/":function(e,t,i){"use strict";var r;i.r(t),i.d(t,"LineToolBarsPatternMode",(function(){return r})),function(e){e[e.Bars=0]="Bars",e[e.Line=1]="Line",e[e.OpenClose=2]="OpenClose",e[e.LineOpen=3]="LineOpen",e[e.LineHigh=4]="LineHigh",e[e.LineLow=5]="LineLow",e[e.LineHL2=6]="LineHL2"}(r||(r={}))},Yj6H:function(e,t,i){"use strict";i.r(t),i.d(t,"PriceScaleBase",(function(){return _}));var r=i("Eyy1"),n=i("aIyQ"),o=i.n(n),s=i("Qb4w"),a=i("TTFo"),l=i("qJq3"),c=i("7ktv"),u=i("tc+8"),h=i.n(u),d=i("3ClC"),p=i("/tGj"),f={autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0,isInverted:!1,indexedTo100:!1},_=function(){function e(e){this._marksCache=null,this._onMarksChanged=new o.a,this._onCurrencyLabelContentChanged=new o.a,this.m_dataSources=[],this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this._hasSeries=!1,this._seriesLikeSources=[],this._seriesLikeSourcesSet=new Set,this._priceDataSources=[],this._lastSourceRemoved=new o.a,this._scaleSeriesOnly=!1,this._currencyCache=null,e=Object.assign({},f,e),this._properties=new h.a(e)}return e.prototype.isLog=function(){return this._properties.childs().log.value()},e.prototype.isPercentage=function(){return this._properties.childs().percentage.value()},e.prototype.isInverted=function(){return this._properties.childs().isInverted.value()},e.prototype.isIndexedTo100=function(){return this._properties.childs().indexedTo100.value()},e.prototype.isAutoScale=function(){return this._properties.childs().autoScale.value()&&!this.isLockScale()},
e.prototype.isLockScale=function(){return this._properties.childs().lockScale.value()},e.prototype.isRegular=function(){return!this.isPercentage()&&!this.isLog()&&!this.isIndexedTo100()},e.prototype.properties=function(){return this._properties},e.prototype.dataSources=function(){return this.m_dataSources},e.prototype.seriesLikeSources=function(){return this._seriesLikeSources},e.prototype.addDataSource=function(e,t){var i=this;if(t||-1===this.m_dataSources.indexOf(e)){if(e instanceof c.PriceDataSource&&(this._priceDataSources.push(e),Object(p.isSymbolSource)(e)&&(this._seriesLikeSources.push(e),this._seriesLikeSourcesSet.add(e),e.symbolResolved().subscribe(this,(function(){return i._currencyCache=null})),e instanceof l.Series))){var r=e.properties();this._hasSeries||(r.childs().lockScale&&(this.setMode({lockScale:r.childs().lockScale.value()}),r.removeProperty("lockScale")),r.childs().pnfStyle.childs().lockScale&&r.childs().pnfStyle.removeProperty("lockScale")),this._hasSeries=!0}e.properties().visible.listeners().subscribe(null,(function(){i._sourcesForAutoscale=null,i._currencyCache=null})),this.m_dataSources.push(e),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this._currencyCache=null,this.updateFormatter(),this._initScaleProperties(),this.invalidateSourcesCache()}},e.prototype.removeDataSource=function(e){var t=this.m_dataSources.indexOf(e);if(Object(r.assert)(-1!==t,"Source is not attached to scale"),e.properties().visible.listeners().unsubscribeAll(this),this.m_dataSources.splice(t,1),e instanceof c.PriceDataSource){var i=this._priceDataSources.indexOf(e);if(Object(r.assert)(-1!==i,"Source is not found"),this._priceDataSources.splice(i,1),Object(p.isSymbolSource)(e)){var n=this._seriesLikeSources.indexOf(e);Object(r.assert)(-1!==n,"Source is not found"),this._seriesLikeSources.splice(n,1),this._seriesLikeSourcesSet.delete(e),e.symbolResolved().unsubscribeAll(this),e instanceof l.Series&&(this._hasSeries=!1)}0}this.mainSource()||this.setMode({autoScale:!0}),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.invalidateSourcesCache(),0===this.m_dataSources.length&&this._lastSourceRemoved.fire(),this._currencyCache=null},e.prototype.currency=function(e){if(this.isIndexedTo100()||this.isPercentage()||0===this._seriesLikeSources.length)return null;for(var t=null,i=0,r=this._priceDataSources;i<r.length;i++){var n=r[i];if(n.isVisible()){var o;if(null===(o=n.currency()))return null;if(null!==t){if(o!==t)return null}else t=o}}return{readOnly:!0,selectedCurrency:t,currencies:new Set,originalCurrencies:new Set,symbolSourceCount:0,allCurrenciesAreOriginal:!0}},e.prototype.onMarksChanged=function(){return this._onMarksChanged},e.prototype.priceRangeInPrice=function(){if(this.isEmpty())return null;var e=this.mainSource();if(null===e)return null;var t=Object(r.ensureNotNull)(e.firstValue()),i=this.height();return{from:this.coordinateToPrice(i-1,t),to:this.coordinateToPrice(0,t)}},
e.prototype.setPriceRangeInPrice=function(e){if(!this.isPercentage()&&!this.isIndexedTo100()){var t=this.isInverted(),i=t?this.bottomMargin():this.topMargin(),r=t?this.topMargin():this.bottomMargin(),n=this.isLog(),o=n?Object(a.toLog)(e.from):e.from,l=n?Object(a.toLog)(e.to):e.to,c=l-o;o+=r*c,l-=i*c,this.setMode({autoScale:!1}),this.setPriceRange(new s.PriceRange(o,l)),this._marksCache=null,this._onMarksChanged.fire()}},e.prototype.hasMainSeries=function(){return this._hasSeries},e.prototype.getStudies=function(){return this.dataSources().filter(d.isStudy)},e.prototype.lastSourceRemoved=function(){return this._lastSourceRemoved},e.prototype._recalculateSourcesForAutoscale=function(){this._mainSource&&(this._scaleSeriesOnly=this._scalesProperties.childs().scaleSeriesOnly.value());var e=this._scaleSeriesOnly&&this._hasSeries;this._sourcesForAutoscale=this.m_dataSources.filter((function(t){return!!(t.properties().visible.value()||t instanceof l.Series)&&(e?t instanceof l.Series:t.isIncludedInAutoScale())}))},e.prototype._updateAutoScaleDisabledProperty=function(e){var t=this._properties.childs(),i=t.indexedTo100.value()||t.percentage.value()||t.lockScale.value();e?t.autoScaleDisabled.setValueSilently(i):t.autoScaleDisabled.setValue(i)},e.prototype._setAutoScaleValueWithDependentProperties=function(e){var t=this._properties.childs();t.autoScale.setValueSilently(e),e&&(t.percentage.setValueSilently(!1),t.indexedTo100.setValueSilently(!1),t.lockScale.setValueSilently(!1),t.logDisabled.setValueSilently(!1)),this._updateAutoScaleDisabledProperty(!0)},e.prototype._setLockScaleValueWithDependentProperties=function(e){var t=this._properties.childs();t.lockScale.setValueSilently(e),e&&(t.autoScale.setValueSilently(!1),t.percentage.setValueSilently(!1),t.indexedTo100.setValueSilently(!1),t.log.setValueSilently(!1)),t.percentageDisabled.setValueSilently(e),t.logDisabled.setValueSilently(e),this._updateAutoScaleDisabledProperty(!0)},e.prototype._setPercentageValueWithDependentProperties=function(e){var t=this._properties.childs();t.percentage.setValueSilently(e),e&&(t.autoScale.setValueSilently(!0),t.log.setValueSilently(!1),t.lockScale.setValueSilently(!1),t.indexedTo100.setValueSilently(!1)),this._updateAutoScaleDisabledProperty(!0)},e.prototype._setIndexedTo100ValueWithDependentProperties=function(e){var t=this._properties.childs();t.indexedTo100.setValueSilently(e),e&&(t.autoScale.setValueSilently(!0),t.log.setValueSilently(!1),t.lockScale.setValueSilently(!1),t.percentage.setValueSilently(!1)),this._updateAutoScaleDisabledProperty(!0)},e.prototype._setLogValueWithDependentProperties=function(e){var t=this._properties.childs();t.log.setValueSilently(e),e&&(t.lockScale.setValueSilently(!1),t.percentage.setValueSilently(!1),t.indexedTo100.setValueSilently(!1)),this._updateAutoScaleDisabledProperty(!0)},e.prototype._initScaleProperties=function(){var e=this.isLockScale(),t=this.properties().childs();e&&(t.percentage.setValue(!1),t.indexedTo100.setValue(!1),t.log.setValue(!1),t.autoScale.setValue(!1)),
t.percentageDisabled.setValue(e),t.logDisabled.setValue(e),this._updateAutoScaleDisabledProperty(!1),t.percentage.value()&&(t.log.setValue(!1),t.indexedTo100.setValue(!1)),t.indexedTo100.value()&&(t.log.setValue(!1),t.percentage.setValue(!1))},e}()},Yjuu:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Fib Speed Resistance Arcs");function a(e,t){this._constructor="LineToolFibSpeedResistanceArcs";var n=t||a.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("bcXK").FibSpeedResistanceArcsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);for(var s=[this._properties.child("trendline").child("linewidth")],l=1;l<=a.LevelsCount;l++)s.push(this._properties.child("level"+l).child("linewidth"));this._widthsProperty=new o(s)}inherit(a,r),a.LevelsCount=11,a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.pointsCount=function(){return 2},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Fib Speed Resistance Arcs"},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.createProperties=function(e){var t=new n("linetoolfibspeedresistancearcs",e,!1,{range:[1,11]});return a._configureProperties(t),t},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("pdv6").FibSpeedResistanceArcsDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a._configureProperties=function(e){r._configureProperties(e)},t.LineToolFibSpeedResistanceArcs=a},YlKu:function(e,t,i){"use strict";i.r(t),i.d(t,"ApplyLineToolTemplateUndoCommand",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n._source=t,n._newState=i,n._oldState=t.properties().state(),n}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._source.applyTemplate(this._newState)},t.prototype.undo=function(){this._source.applyTemplate(this._oldState)},t}(i("RDU5").UndoCommand)},YmeR:function(e,t,i){"use strict";i.r(t),i.d(t,"ActionBinder",(function(){return o}));var r=i("mrSG"),n=i("2h0C"),o=function(e){function t(t,i,r,n,o){void 0===o&&(o=null);var s=e.call(this,t,i,!0,r,n)||this;return null!==o?t.update({onExecute:o.bind(s)}):t.update({onExecute:s._onActionCallback.bind(s)}),s}return Object(r.__extends)(t,e),t.prototype.action=function(){return this.control()},t.prototype.value=function(){return this.action().isChecked()},t.prototype.setValue=function(e){this.action().update({checked:Boolean(e)})},t.prototype._onActionCallback=function(){this._undoModel.setProperty(this._property,this.value(),this._undoText)},t}(n.Binding)},Z0Sh:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=window.t("Gann Box");function s(e,t){this._constructor="LineToolGannSquare";var n=t||s.createProperties();r.call(this,e,n),
Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("eg8N").GannSquarePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.HLevelsCount=7,s.VLevelsCount=7,s.prototype.hLevelsCount=function(){return s.HLevelsCount},s.prototype.vLevelsCount=function(){return s.VLevelsCount},s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Gann Box"};var a=[4.5,9,11.25,18,22.5,36,45],l=function(){for(var e=[],t=a.length-1,i=1,r=0,n=0;n<1e10;)n=a[r]*i,e.push(Math.round(n)),e.push(Math.ceil(-n)),r===t-1&&(i*=10),r=(r+1)%t;return e.sort((function(e,t){return e<t?-1:e>t?1:0})),e}();s.prototype._alignPriceOnPattern=function(e,t){var i=Math.round(1e6*(e.price-t.price))/1e6;if(0===i)return t.price;for(var r=a[0],n=a[a.length-1],o=1,s=Math.abs(i);s<r*o||n*o<s;)s<r*o?o*=.1:n*o<s&&(o*=10);for(var l=n*o,c=a.length-2;c>=0&&!(a[c]*o<s);--c)l=a[c]*o;return e.price=t.price+(i>=0?l:-l),e},s.prototype._alignTimeOnPattern=function(e,t){var i=e.index-t.index;if(0===i)return 0;for(var r=l.length-2;r>=0&&!(l[r]<i);--r);return r+=i>0?1:0,e.index=t.index+l[r],e},s.prototype._alignPointsFixedIncrement=function(e,t){return this._alignTimeOnPattern(e,t),this._alignPriceOnPattern(e,t),e},s.prototype._preparePoint=function(e,t){return t&&t.shift()&&0!==this._points.length&&this._alignPointsFixedIncrement(e,this._points[0]),r.prototype._preparePoint.call(this,e,t)},s.prototype.setPoint=function(e,t,i){if(i&&i.shift()){var n=0===e?this._points[1]:this._points[0];this._alignPointsFixedIncrement(t,n)}r.prototype.setPoint.call(this,e,t,i)},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("2liL").GannSquareDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolgannsquare",e,!1,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]});return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolGannSquare=s},Z8aO:function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesPriceLinePaneView",(function(){return s}));var r=i("mrSG"),n=i("k4w6"),o=i("8Uy/"),s=function(e){function t(t){var i=e.call(this,t)||this;return i._lineRendererData.linestyle=o.LINESTYLE_DOTTED,i}return Object(r.__extends)(t,e),t.prototype._updateImpl=function(){if(this._lineRendererData.visible=!1,this._series.properties().showPriceLine.value()&&12!==this._series.properties().style.value()){var e=this._series.lastValueData(void 0,!0);e.noData||(this._lineRendererData.visible=!0,this._lineRendererData.y=e.coordinate,this._lineRendererData.color=this._series.priceLineColor(e.color),this._lineRendererData.linewidth=this._series.properties().priceLineWidth.value())}},t}(n.a)},Z9Tc:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e
;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.getDialogDfd=u,t.verificationIsRequired=h,t.whenVerified=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=$.Deferred();return h({doNotCheckSuspicious:e.doNotCheckSuspicious,doNotCheckSocialActivity:e.doNotCheckSocialActivity,customPhoneCheck:e.customPhoneCheck}).then((function(i){var n=r(i,2),o=n[0],s=n[1];if(!o)return l.resolve(),t.resolve();if(!e.showDialog)return l.done((function(){return t.resolve()}));var a={source:e.source,messages_sms:e.messages_sms,messages_phone:e.messages_phone,successful_message:e.successful_message,doNotShowConfirmation:e.doNotShowConfirmation};"suspicious"!==s&&(a.topMessage=window.t("Verify your phone number and get access to more tools on TradingView.")),u(a).done((function(){return t.resolve()})).always((function(){return t.reject()}))})),t.promise()},t.requestPhoneNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,i){u({source:e.source,messages_sms:e.messages_sms,messages_phone:e.messages_phone,successful_message:e.successful_message}).done(t).always(i)}))};var n=i("JWMC"),o=i("ux/p"),s=i("VVxS"),a=new Date(2018,3,24),l=$.Deferred();function c(e,t){var i=TVSettings.getBool("_phone_verif_dlg_initial",!0);TVSettings.setValue("_phone_verif_dlg_initial",!1),(0,n.trackEvent)("Phone verification",e+(i?" initial":""),t)}function u(e){var t=$.Deferred();return(0,o.createPhoneDialog)({featureSource:e.source,doNotShowConfirmation:e.doNotShowConfirmation}).then((function(i){i.on("afterOpen",(function(){return c("Show dialog",e.source)})).on("verification:success",(function(i){t.resolve(i),c("Verified",e.source)})).on("verification:cancel",(function(){t.reject(),c("Cancelled",e.source)})).on("verification:codeExpired",(function(){return c("Show dialog",e.source)})).open()})),t}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(i){!window.is_authenticated||user.is_staff||user.is_superuser||user.is_pro||user.is_moderator?i([!1]):t.customPhoneCheck?t.customPhoneCheck(a)?i([!0,"date-joined"]):i([!1]):e.enabled("phone_verification")&&!user.has_phone?!0!==t.doNotCheckSocialActivity&&new Date(user.date_joined)>a?i([!0,"date-joined"]):(!0!==t.doNotCheckSuspicious&&i([Boolean(s.TVLocalStorage.getItem("is_suspicious")),"suspicious"]),i([!0,"default"])):i([!1])}))}window.loginStateChange&&loginStateChange.subscribe(null,(function(){window.is_authenticated&&(l=$.Deferred(),h().then((function(e){var t=r(e,2),i=t[0];t[1];i||l.resolve()})))}))}).call(this,i("Kxc7"))},ZAbA:function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesDataEvents",(function(){return o}));var r=i("aIyQ"),n=i.n(r),o=function(){function e(){
this._completed=new n.a,this._error=new n.a,this._symbolError=new n.a,this._symbolResolved=new n.a,this._seriesError=new n.a,this._symbolNotPermitted=new n.a,this._symbolGroupNotPermitted=new n.a,this._extendedHoursNotPermitted=new n.a,this._chartTypeNotPermitted=new n.a,this._intradaySpreadNotPermitted=new n.a,this._intradayExchangeNotPermitted=new n.a,this._customIntervalNotPermitted=new n.a,this._secondsIntervalNotPermitted=new n.a,this._tickMarksRangeChanged=new n.a,this._barReceived=new n.a,this._messageReceived=new n.a}return e.prototype.completed=function(){return this._completed},e.prototype.error=function(){return this._error},e.prototype.symbolError=function(){return this._symbolError},e.prototype.symbolResolved=function(){return this._symbolResolved},e.prototype.seriesError=function(){return this._seriesError},e.prototype.symbolNotPermitted=function(){return this._symbolNotPermitted},e.prototype.symbolGroupNotPermitted=function(){return this._symbolGroupNotPermitted},e.prototype.extendedHoursNotPermitted=function(){return this._extendedHoursNotPermitted},e.prototype.chartTypeNotPermitted=function(){return this._chartTypeNotPermitted},e.prototype.intradaySpreadNotPermitted=function(){return this._intradaySpreadNotPermitted},e.prototype.intradayExchangeNotPermitted=function(){return this._intradayExchangeNotPermitted},e.prototype.customIntervalNotPermitted=function(){return this._customIntervalNotPermitted},e.prototype.secondsIntervalNotPermitted=function(){return this._secondsIntervalNotPermitted},e.prototype.tickMarksRangeChanged=function(){return this._tickMarksRangeChanged},e.prototype.barReceived=function(){return this._barReceived},e.prototype.messageReceived=function(){return this._messageReceived},e.prototype.fireCompleted=function(){this._completed.fire()},e.prototype.fireError=function(){this._error.fire()},e.prototype.fireSymbolError=function(e){this._symbolError.fire(e),this.fireError()},e.prototype.fireSymbolResolved=function(e){this._symbolResolved.fire(e)},e.prototype.fireSeriesError=function(e){this._seriesError.fire(e),this.fireError()},e.prototype.fireSymbolNotPermitted=function(e){this._symbolNotPermitted.fire(e),this.fireError()},e.prototype.fireSymbolGroupNotPermitted=function(e){this._symbolGroupNotPermitted.fire(e),this.fireError()},e.prototype.fireExtendedHoursNotPermitted=function(){this._extendedHoursNotPermitted.fire(),this.fireError()},e.prototype.fireChartTypeNotPermitted=function(e){this._chartTypeNotPermitted.fire(e),this.fireError()},e.prototype.fireIntradaySpreadNotPermitted=function(){this._intradaySpreadNotPermitted.fire(),this.fireError()},e.prototype.fireIntradayExchangeNotPermitted=function(){this._intradayExchangeNotPermitted.fire(),this.fireError()},e.prototype.fireCustomIntervalNotPermitted=function(){this._customIntervalNotPermitted.fire(),this.fireError()},e.prototype.fireSecondsIntervalNotPermitted=function(){this._secondsIntervalNotPermitted.fire(),this.fireError()},e.prototype.fireTickMarksRangeChanged=function(e){this._tickMarksRangeChanged.fire(e)},
e.prototype.fireBarReceived=function(e){this._barReceived.fire(e)},e.prototype.fireMessageReceived=function(e){this._messageReceived.fire(e)},e}()},ZAxB:function(e,t,i){"use strict";function r(e,t,i){for(var r=0,n=e;r<n.length;r++){var o=n[r];if(t[o.id]!==i[o.id])return!1}return!0}function n(e){return{from:Math.round(e.first_visible_bar_time/1e3),to:Math.round(e.last_visible_bar_time/1e3)}}i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n}))},ZBiT:function(e,t,i){e.exports={"css-value-pane-controls-padding-left":"1px","css-value-pane-controls-padding-right":"5px"}},ZF9k:function(e,t,i){"use strict";i.r(t),i.d(t,"showGoProAlertsOnSecondsDialog",(function(){return n}));var r=i("oOPW");function n(){Object(r.createGoProDialog)({feature:"alertsOnSeconds"})}},ZJKN:function(e,t,i){"use strict";i.r(t),i.d(t,"BarsRange",(function(){return n}));var r=i("Eyy1"),n=function(){function e(e,t){Object(r.assert)(e<=t,"The last bar in the bars range should be greater than or equal to the first bar"),this._firstBar=e,this._lastBar=t}return e.prototype.firstBar=function(){return this._firstBar},e.prototype.lastBar=function(){return this._lastBar},e.prototype.count=function(){return this._lastBar-this._firstBar+1},e.prototype.contains=function(e){return this._firstBar<=e&&e<=this._lastBar},e.prototype.equals=function(e){return this._firstBar===e.firstBar()&&this._lastBar===e.lastBar()},e.compare=function(e,t){return null===e||null===t?e===t:e.equals(t)},e}()},ZPGM:function(e,t,i){"use strict";(function(t,r){var n=i("txPx").getLogger("Common.CollectionObserver"),o=t.Collection.extend({initialize:function(e,i){if(this._observableCollection=i.observableCollection,this._validator=i.validator,this._syncEvents=r.isArray(i.syncEvents)?i.syncEvents:[],this._syncEvents.push("reset"),this._syncEvents=r.uniq(this._syncEvents),this._observableCollection)if(this._observableCollection instanceof t.Collection){"function"==typeof i.comparator&&(this.comparator=i.comparator),this.comparator||"function"!=typeof this._observableCollection.comparator||(this.comparator=this._observableCollection.comparator),this._observableCollection.on("add",this.onAdd,this),this._observableCollection.on("remove",this.remove,this);for(var o=this._syncEvents.length-1;o>=0;o--)this._observableCollection.on(this._syncEvents[o],this.syncCollections,this);e&&e.length&&this.add(e)}else n.logError("'observableCollection' need to be Backbone.Collection");else n.logError("'observableCollection' option required")},syncCollections:function(){var e=this._validator;e&&this.reset(r.filter(this._observableCollection.models,e))},onAdd:function(e,i,r){var n=this._validator;if(!n||n(e)){var o=i instanceof t.Collection?r:i;this.add(e,o)}},destroy:function(){this._observableCollection.off("add",this.onAdd,this),this._observableCollection.off("remove",this.remove,this);for(var e=this._syncEvents.length-1;e>=0;e--)this._observableCollection.off(this._syncEvents[e],this.syncCollections,this)}});e.exports=o}).call(this,i("q1z7"),i("F/us"))},ZX3N:function(e,t,i){
var r=i("rjQZ"),n=i("I92+"),o=i("WLST"),s=new Uint32Array([3432918353,461845907]);function a(e,t){return e<<t|e>>>32-t}e.exports=function(e,t){if(t=t?0|t:0,"string"==typeof e&&(e=o(e)),!(e instanceof ArrayBuffer))throw new TypeError("Expected key to be ArrayBuffer or string");var i=new Uint32Array([t]);return function(e,t){for(var i=e.byteLength/4|0,n=new Uint32Array(e,0,i),o=0;o<i;o++)n[o]=r(n[o],s[0]),n[o]=a(n[o],15),n[o]=r(n[o],s[1]),t[0]=t[0]^n[o],t[0]=a(t[0],13),t[0]=r(t[0],5)+3864292196}(e,i),function(e,t){var i=e.byteLength/4|0,n=e.byteLength%4,o=0,l=new Uint8Array(e,4*i,n);switch(n){case 3:o^=l[2]<<16;case 2:o^=l[1]<<8;case 1:o^=l[0]<<0,o=a(o=r(o,s[0]),15),o=r(o,s[1]),t[0]=t[0]^o}}(e,i),function(e,t){t[0]=t[0]^e.byteLength,t[0]=n(t[0])}(e,i),i.buffer}},ZZnO:function(e,t,i){"use strict";i.r(t),i.d(t,"dateFormatProperty",(function(){return a})),i.d(t,"removeSettingsValue",(function(){return l}));var r=i("Vdly"),n=i("m/cY"),o=i("e1ZQ");function s(){return r.getValue("date_format",Object(o.defaultDateFormat)())}var a=Object(n.a)(s());function l(){a.setValue(Object(o.defaultDateFormat)()),r.remove("date_format")}r.onSync.subscribe(null,(function(){return a.setValue(s())})),a.listeners().subscribe(null,(function(){return r.setValue("date_format",a.value())}))},ZekX:function(e,t,i){"use strict";i.r(t),i.d(t,"availableTimeFrames",(function(){return a}));i("YFKU");var r,n=i("dfhE"),o=i("ljrM"),s=((r={})[n.STATUS_DELAYED]=[o.timeFrames.ytd,o.timeFrames["12m"],o.timeFrames["60m"],o.timeFrames.all],r[n.STATUS_READY]=[o.timeFrames["1d"],o.timeFrames["5d"],o.timeFrames["1m"],o.timeFrames["3m"],o.timeFrames["6m"],o.timeFrames.ytd,o.timeFrames["12m"],o.timeFrames["60m"],o.timeFrames.all],r);function a(e,t){return t===n.STATUS_DELAYED_STREAMING&&(t=n.STATUS_READY),t===n.STATUS_EOD&&(t=n.STATUS_DELAYED),s[t]||[]}},"Zo2/":function(e,t,i){"use strict";(function(t){i("YCFM"),i("YFKU")
;var r=i("Eyy1").assert,n=i("Y7w9").moveToHead,o=i("mkn5").PaneWidget,s=i("fYB8").PaneSeparator,a=i("mNEU"),l=i("1IXQ").PriceAxisWidget,c=i("uPb3").TimeAxisWidget,u=i("fTGZ").BarsMarksContainer,h=i("qJq3").Series,d=i("Kxc7"),p=i("YmeR").ActionBinder,f=i("mKT+").resolveAndShowEditObjectDialog,_=i("Vdly").setValue,m=i("QloM").TabNames,v=i("cdbK").showGoToDateDialog,g=i("/3z9"),y=i("lxNp"),b=i("7nsU").showConfirmInputsDialog,S=i("+GxX").isFeatureEnabled,w=i("Ktlt").ChartEventsSource,P=i("dJ3D"),C=i("Ai40").ESDStudyBase,T=i("lCO3").Version,x=i("2vAl"),I=i("3jc8").showDeleteStudyTreeConfirm,E=i("aBGL").AvailableOnTVPopup,L=i("h24c").canShowSpreadActions,O=i("oOPW").createGoProDialog,A=i("brCa").showNoticeDialog,M=i("XuOW").InsertionErrorCode,k=i("oNDq").createConfirmDialog,D=i("X2bh").confirmDatasourceRemoving,R=i("GVHu").Study,V=i("8sOK").StudyStub,B=i("3ClC").isStudy,N=i("Ss5c").LineDataSource,F=i("CW80"),j=F.isLineTool,W=F.isStudyLineTool,H=i("7KDR"),U=H.Action,z=H.Separator,G=i("L/Ed").ToolboxType,q=i("mMWL"),Y=i("LxhU").Interval,X=i("pPtI"),K=X.setLastUsedResolution,J=X.getDefaultResolution,Q=i("n5al"),Z=Q.isRangeStyle,ee=Q.getDefaultStyle,te=i("pvsv").showSymbolInfoDialog,ie=i("H0vP").InvalidationMask,re=i("H0vP").InvalidationLevel,ne=i("nqXy").MouseWheelHelper,oe=i("PT1i").linking,se=i("mYjs").showChangeIntervalDialog,ae=i("u5Q5").showDialog,le=i("tK3f").showDetailsDialog,ce=i("yihy").isPlatformMobile,ue=i("u5Q5").activateKeyPressHandler,he=i("Ocx9").DefaultProperty,de=i("+6ja"),pe=de.availableTimezones,fe=de.timezoneIsAvailable,_e=i("0F0w").ChartSession,me=i("0YCj"),ve=i("c2JX").Spinner,ge=i("JWMC").trackEvent,ye=i("VaSN").lastEventIsTouch,be=i("ikwP").Size,Se=i("wZIs"),we=i("txPx").getLogger("ChartWidget",{color:"#606"}),Pe=i("U0+/").StudyMetaInfoRepository,Ce=i("VNzU").isMultipleLayout,Te=i("b1GK").addPerfMark,xe=i("KnF9").EnvironmentState,Ie=i("FQhm"),Ee=i("wjVR").ChartWidgetBase,Le=i("qFKp").CheckMobile.any(),Oe=i("ikwP").getCanvasDevicePixelRatio,Ae=i("B8p3").setHandler,Me=i("YWnQ").permissionDenied,ke=i("uDHo").TIMEFRAMETYPE,De=window.t("On The Left"),Re=window.t("On The Right"),Ve=window.t("Move Scale To Left"),Be=window.t("Move Scale To Right"),Ne=d.enabled("chart_content_overrides_by_defaults");function Fe(e,i,r){Ee.call(this,e,i,r),this._options.timeScaleWidget&&(this._options.timeScaleWidget.pressedMouseMoveScale=this._options.handleScale.axisPressedMouseMove);var n=this;this._startSpinner(this._options.container.value());var o=this._options.content,s=this._options.readOnly;this._removeMaximizeHotkey=null,n._hotkeys=y.createGroup({desc:"Chart actions",isDisabled:function(){return!n._isActive}});var a=this._options.containsData,l=this._options.onWidget,c=this._options.onCmeWidget;c&&we.logWarn("[ChartWidget] 'onCmeWidget' option is depricated")
;var u=this._options.widgetCustomer,h=this._options.timezone,d=this._options.hideSymbolSearch,p=this._options.defSymbol,f=Y.isValid(this._options.defInterval)?this._options.defInterval:void 0,_=parseInt(this._options.defStyle),m=Q.isValidStyle(_)?_:void 0,v=this._options.defExtendedHours,g=void 0!==this._options.defTimeframe?{value:this._options.defTimeframe.toUpperCase(),type:ke.PeriodBack}:void 0;this._chartWidgetCollection=this._options.chartWidgetCollection||null,this._content=o,this._initialLoading=this._options.initialLoading,this._readOnly=s,this._containsData=a,this._showChartEvents=!a&&this._options.chartEventsEnabled,this._defSymbol=p,this._defInterval=f,this._defTimeframe=g,this._defStyle=m,this._onWidget=!!l,this._compareSymbols=this._options.compareSymbols,this._onWidget&&(c?this._widgetCustomer="cme":u&&(this._widgetCustomer=u)),this._hideSymbolSearch=d,this._frameTime=30,this._model=null,this._metaInfo={},this._drawRafId=0,this._lhsAxesWidth=0,this._rhsAxesWidth=0;var b=this._contentSeriesProperties();b&&(p=b.symbol,f=b.interval),void 0===this._options.useUserChartPreferences&&(this._options.useUserChartPreferences=!0),this._properties=new he("chartproperties",void 0,void 0,this._options.useUserChartPreferences);var S=this._options.useUserChartPreferences?Se.defaults("chartproperties.mainSeriesProperties"):Se.factoryDefaults("chartproperties.mainSeriesProperties");this._properties.mainSeriesProperties.merge(S),f=f||S.interval||"D",Q.isValidStyle(m)||(m=Q.isValidStyle(S.style)?S.style:ee(Y.isRange(f))),this._properties.mainSeriesProperties.merge({visible:!0,symbol:p||DEFAULT_SYMBOL,shortName:"",timeframe:"",onWidget:this._onWidget,interval:f,style:m,extendedHours:v,lineStyle:{styleType:Se.factoryDefaults("chartproperties.mainSeriesProperties.lineStyle.styleType")}}),this._containsData&&this._properties.mainSeriesProperties.merge({showCountdown:!1}),h&&fe(h)&&this._properties.timezone.setValue(h),this._tagsChanged=new t,this._disconnected=new t,this._reconnectBailout=new t,this._connected=new t,this._redraw=new t,this._onScroll=new t,this.chartWidgetInitialized=new t,this._chartSession=new _e(ChartApiInstance),this._metaInfoRepository=new Pe(this._chartSession),this.lhsPriceAxisWidthChanged=new t,this.rhsPriceAxisWidthChanged=new t,this._timingsMeter=null,this._isActive=this._options.isActive,this._options.container.subscribe((function(e){n._setElement($(e))}),{callWithLast:!0});var w=function(){n.resize()};this._options.width.subscribe(w),this._options.height.subscribe(w),this._options.visible.subscribe(this._updateTimingsMeterState.bind(this)),this._aboutToBeDestroyed=new t,this._actions=null,this._definitionsViewModel=null,this._backgroundTopColorSpawn=null,this._backgroundBottomColorSpawn=null,this._onZoom=new t}inherit(Fe,Ee),Fe.prototype.onZoom=function(){return this._onZoom},Fe.prototype.isInitialized=function(){return Boolean(this._inited)},Fe.prototype.compareSymbols=function(){return this._compareSymbols},Fe.prototype._getChartPropertyDefinitionsViewModel=function(){
if(null===this._definitionsViewModel){var e=this;return new Promise((function(t,r){Promise.all([i.e(71),i.e(150),i.e("general-property-page")]).then(function(n){if(e._isDestroyed)r("Chart widget already destroyed");else{var o=i("5lPo").ChartPropertyDefinitionsViewModel;e.withModel(e,(function(){null===e._definitionsViewModel&&(e._definitionsViewModel=new o(e.model(),e.properties(),e._options)),t(e._definitionsViewModel)}))}}.bind(null,i)).catch(i.oe)}))}return Promise.resolve(this._definitionsViewModel)},Fe.prototype._initMaximizeHotkey=function(e){var t=this;function i(e){e.defaultPrevented||g.modifiersFromEvent(e)===g.Modifiers.Alt&&e.stopPropagation()}function r(e){e.defaultPrevented||g.modifiersFromEvent(e)===g.Modifiers.Alt&&(e.preventDefault(),e.stopPropagation(),t.toggleFullscreen())}return e.addEventListener("mousedown",i,!0),e.addEventListener("click",r,!0),function(){e.removeEventListener("mousedown",i,!0),e.removeEventListener("click",r,!0)}},Fe.prototype.toggleFullscreen=function(){var e=this.getResizerDetacher();e.fullscreenable.value()&&(e.fullscreen.value()?e.exitFullscreen():e.requestFullscreen())},Fe.prototype._setElement=function(e){this._jqMainDiv&&(this._jqMainDiv.remove(),this._jqParent.empty()),this._controlBarNavigation&&(this._controlBarNavigation.destroy(),this._controlBarNavigation=null),null!==this._removeMaximizeHotkey&&this._removeMaximizeHotkey(),this._removeMaximizeHotkey=this._initMaximizeHotkey(e[0]);var t=e.prop("ownerDocument");this._jqParent=$(t.createElement("div")).addClass("chart-container-border").prependTo(e),this._jqMainDiv=$('<div class="chart-widget"/>',t),this._elTooltipDiv=t.createElement("div"),this._elTooltipDiv.className="tooltip-wrapper",this._jqMainDiv.append(this._elTooltipDiv),this._elMainTable=t.createElement("table"),this._elMainTable.className="chart-markup-table",this._elMainTable.setAttribute("cellpading","0"),this._elMainTable.setAttribute("cellspacing","0"),this._jqMainDiv.append(this._elMainTable),(this._options.controlBarEnabled||d.enabled("control_bar"))&&Promise.all([i.e("vendors_embed"),i.e(15),i.e(123),i.e(152),i.e(259),i.e(0),i.e(33),i.e(85),i.e(106),i.e(144),i.e("chart-widget-gui")]).then(function(e){if(!this._isDestroyed){this._controlBarNavigation&&this._controlBarNavigation.destroy();var t=i("TGRH").ControlBarNavigation;this._controlBarNavigation=new t(this,this._jqMainDiv[0],this._options.controlBar),this._model&&this.adjustSize()}}.bind(this).bind(null,i)).catch(i.oe),(this._options.handleScale.mouseWheel||this._options.handleScroll.mouseWheel)&&(this._mouseWheelHelper=new ne,this._onWheelBound=this._onMousewheel.bind(this),this._jqMainDiv[0].addEventListener("wheel",this._onWheelBound,{passive:!1})),this.resize(),this._justActivated=!1,this.withModel(this,(function(){this._jqParent.append(this._jqMainDiv),this._jqMainDiv.on("mousedown",this._beginRequestActive.bind(this)),this._jqMainDiv.on("mouseup",this._endRequestActive.bind(this)),this._jqMainDiv.on("touchstart",this._beginRequestActive.bind(this)),
this._jqMainDiv.on("touchmove",this._endRequestActive.bind(this)),this._jqMainDiv.on("touchend",this._endRequestActive.bind(this)),this._jqParent.on("click",this._requestActive.bind(this))})),this._inited&&(null!==this._timeAxisWidget&&(this._timeAxisWidget.destroy(),this._timeAxisWidget=null),this._paneWidgets.forEach((function(e){e.destroy()})),this._paneWidgets.length=0,this._paneSeparators.forEach((function(e){e.destroy()})),this._paneSeparators.length=0,this._update(ie.full()))},Fe.prototype._beginRequestActive=function(){var e=!1;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()!==this,this._chartWidgetCollection.activeChartWidget.setValue(this)),e&&(ye()&&this._isLineToolModeExceptBrush()&&this.updateCrossHairPositionIfNeeded(),this._justActivated=!0)},Fe.prototype._endRequestActive=function(){var e=this;this._justActivated&&setTimeout((function(){e._justActivated=!1}),0)},Fe.prototype._requestActive=function(){this._beginRequestActive(),this._endRequestActive()},Fe.prototype.justActivated=function(){return this._justActivated},Fe.prototype._onMousewheel=function(e){if(this.model().model().zoomEnabled()&&(TradingView.onWidget()||!parent||parent===window||!parent.IS_DEMO_PAGE)&&this.model()&&!this.noScroll&&!this.model().timeScale().isEmpty()){var t=this._mouseWheelHelper.processWheel(e),i=t.deltaX/100,r=-t.deltaY/100;if(0!==i&&this._options.handleScroll.mouseWheel||0!==r&&this._options.handleScale.mouseWheel){switch(e.cancelable&&e.preventDefault(),e.deltaMode){case e.DOM_DELTA_PAGE:i*=120,r*=120;break;case e.DOM_DELTA_LINE:i*=32,r*=32}if(0!==r&&this._options.handleScale.mouseWheel){var n=Math.sign(r)*Math.min(1,Math.abs(r)),o=this._jqMainDiv[0].getBoundingClientRect(),s=e.clientX-this._lhsAxesWidth-o.left;if(!Number.isFinite(s)||!Number.isFinite(n))return void we.logWarn("Incorrect mouse wheel processing: scrollPosition: "+s+", zoomScale: "+n);var a=new xe(e).control();this.model().model().zoomTime(s,n,!!a||void 0),this._onZoom.fire(a)}0!==i&&this._options.handleScroll.mouseWheel&&this.model().scrollChart(-80*i)}}},Fe.prototype.setTimezone=function(e){e&&fe(e)?this._properties.timezone.setValue(e):console.warn("Incorrect timezone: "+JSON.stringify(e))},Fe.prototype.getTimezone=function(){return this._properties.timezone.value()},Fe.prototype.refreshMarks=function(){this.model().barsMarksSources().forEach((function(e){e.refreshData()}))},Fe.prototype.clearMarks=function(){this.model().barsMarksSources().forEach((function(e){e.clearMarks()}))},Fe.prototype.metaInfoRepository=function(){return this._metaInfoRepository},Fe.prototype._init=function(){var e=this;this.model()&&this.model().mainSeries().clearData(),this.initColors(),this._makeDefaultGui();var t=function(){e._checkObsoleteTimezone(),e._chartSession&&e._chartSession.connected()&&this._model.restart(),this._content&&(this.initColors(),this._updateGui(),this.update()),this._resizeHandler=function(){this.adjustSize(),this._model&&this._model.mainSeries().requestMoreData(),this.paint()}.bind(this),this._resizeHandler(),
this._jqParent.append(this._jqMainDiv),this._spinner&&(this._spinner.stop(),delete this._spinner),$(window).on("keydown:chart_"+this._id,(function(e){27===e.which&&e.preventDefault()})),this._initBarsMarksSources(),this._showChartEvents&&this._createChartEventsSource(),this._activateSymbolSearchHotkeys(),this.model().timeScale().onScroll().subscribe(this,(function(){this._onScroll.fire()})),this._inited=!0}.bind(this),i=this._makeDefaultModel();void 0===i?t():i.then(t),this._lineToolsSynchronizer.resetInvalidated()},Fe.prototype._activateSymbolSearchHotkeys=function(){this.readOnly()||this._hideSymbolSearch||ue()},Fe.prototype._checkObsoleteTimezone=function(){var e=this._properties.timezone.value();fe(e)||this._properties.timezone.setValue({UTC:"Etc/UTC",EST:"America/New_York",CST:"America/Chicago",PST:"America/Los_Angeles"}[e]||"exchange")},Fe.prototype._initBarsMarksSources=function(){var e=this;this.withModel(this,(function(){this.model().barsMarksSources().forEach((function(t){t.onNeedRepaint.subscribe(e,(function(){e.model().model().lightUpdate()}))}))}))},Fe.prototype.initColors=function(){this._properties.scalesProperties.lineColor.listeners().subscribe(this,Fe.prototype.setScaleLineColor),this._properties.scalesProperties.textColor.listeners().subscribe(this,Fe.prototype.setScaleTextColor)},Fe.prototype._initBackgroundColor=function(){null===this._backgroundTopColorSpawn&&(this._backgroundTopColorSpawn=this._model.model().backgroundTopColor().spawn(),this._backgroundTopColorSpawn.subscribe(this._onBackgroundColorChanged.bind(this))),null===this._backgroundBottomColorSpawn&&(this._backgroundBottomColorSpawn=this._model.model().backgroundColor().spawn(),this._backgroundBottomColorSpawn.subscribe(this._onBackgroundColorChanged.bind(this)))},Fe.prototype.paneWidgets=function(){return this._paneWidgets},Fe.prototype.paneByCanvas=function(e){for(var t=0;t<this._paneWidgets.length;t++)if(this._paneWidgets[t].hasCanvas(e))return this._paneWidgets[t];return null},Fe.prototype.paneByState=function(e){for(var t=0;t<this._paneWidgets.length;t++)if(this._paneWidgets[t].state()===e)return this._paneWidgets[t];return null},Fe.prototype.timeAxisByCanvas=function(e){return this._timeAxisWidget.hasCanvas(e)?this._timeAxisWidget:null},Fe.prototype.properties=function(){return this._properties},Fe.prototype.emulateCriticalError=function(){this._chartSession.removeSeries("-1",null)},Fe.prototype.readOnly=function(){return this._readOnly},Fe.prototype.onDisconnected=function(){return this._disconnected},Fe.prototype.onReconnectBailout=function(){return this._reconnectBailout},Fe.prototype.onConnected=function(){return this._connected},Fe.prototype.onRedraw=function(){return this._redraw},Fe.prototype.onScroll=function(){return this._onScroll},Fe.prototype.modelCreated=function(){return this._modelCreated},Fe.prototype.setResolution=function(e){if(this._model){var t=this._model.mainSeries().properties(),i=window.t("Change Resolution");this._model.setResolutionProperty(t.interval,e,this,i)
}else this._properties.mainSeriesProperties.merge({interval:e})},Fe.prototype.getResolution=function(){return this._model?this._model.mainSeries().properties().interval.value():this._properties.mainSeriesProperties.interval.value()},Fe.prototype.addOverlayStudy=function(e,t){var i=this.model();return this._options.isSymbolAvailable(e).then((function(r){if(!r)return null;var n=i.createStudyInserter({type:"java",studyId:"Overlay@tv-basicstudies"});if(d.enabled("use_overrides_for_overlay")){var o=Se.factoryDefaults("study_Overlay@tv-basicstudies.style");n.setPropertiesState({style:o})}return n.setForceOverlay(t),n.insert((function(){return Promise.resolve({symbol:e})}))}))},Fe.prototype.addCompareStudy=function(e){var t=this.model();return this._options.isSymbolAvailable(e).then((function(i){return i?t.createStudyInserter({type:"java",studyId:"Compare@tv-basicstudies"}).insert((function(){return Promise.resolve({symbol:e})})):null}))},Fe.prototype.updateActions=function(){for(var e=this,t=this.actions(),r=this._model.dataSources(),n=!1,o=!1,s=0,a=r.length;s<a;s++){var l=r[s];TradingView.isInherited(l.constructor,N)&&l.isUserDeletable()&&(n=!0),TradingView.isInherited(l.constructor,R)&&l.removeByRemoveAllStudies()&&(o=!0),TradingView.isInherited(l.constructor,V)&&(o=!0)}this._readOnly||(t.paneRemoveAllStudies&&t.paneRemoveAllStudies.update({disabled:!o}),t.paneRemoveAllDrawingTools&&t.paneRemoveAllDrawingTools.update({disabled:!n}),t.paneRemoveAllStudiesDrawingTools&&t.paneRemoveAllStudiesDrawingTools.update({disabled:!o&&!n})),i.e(318).then(function(r){var n=i("EsvI"),o=i("9J0/");function s(i){var r=[],s=n.getStdThemeNames(),a=n.getCurrentTheme().name;if(s.forEach((function(t){var i=new U({name:"theme-switch-to-"+t,label:TradingView.clean(n.translateStdThemeName(t)),checkable:!0,checked:a===t,onExecute:function(i){i.update({checked:!0}),n.loadTheme(t,!0,!1,e._chartWidgetCollection).then((function(){window.saver.saveChartSilently(),ge("GUI","Themes","Switch to "+t+" theme")}))}});r.push(i)})),r.sort((function(e,t){return e.getLabel()>t.getLabel()?-1:1})),window.is_authenticated){r.push(new z);var l=new U({name:"theme-save-as",label:window.t("Save As..."),onExecute:function(){o.showThemeSaveDialogAsync(e._model.model().theme())}});r.push(l)}i&&i.length&&window.is_authenticated&&(r.push(new z),i.forEach((function(t,i){var s=new U({label:TradingView.clean(n.translateStdThemeName(t)),checkable:!1,onExecute:function(i){n.loadTheme(t,!1,!1,e._chartWidgetCollection).then((function(){window.saver.saveChartSilently(),ge("GUI","Switch to custom theme")}))},toolbox:{type:G.Delete,action:function(){o.showRemoveThemeDialogAsync(t)}},showToolboxOnHover:!0});r.push(s)}))),t.applyColorTheme.update({subItems:r})}window.is_authenticated?n.getThemeNames().then(s):s()}.bind(null,i)).catch(i.oe);var c=this,u=[],h=function(e){return e.id===c.model().model().properties().timezone.value()};pe.forEach((function(e){if(!e.separator){var t=new U({label:e.title,checkable:!0,checked:h(e),statName:"SetTimeZone",onExecute:function(){
c.model().setProperty(c.model().model().properties().timezone,e.id,"Changed Time Zone")}});u.push(t)}}),this),t.applyTimeZone.update({subItems:u}),t.addToWatchlist&&t.addToWatchlist.update({label:window.t("Add to Watchlist {0}").format(this.getSymbol(!0))}),t.addToTextNotes&&t.addToTextNotes.update({label:window.t("Add Text Note for {0}").format(this.getSymbol(!0))}),t.moveChartAction&&t.moveChartAction.update({disabled:!this._chartWidgetCollection.activeChartCanBeMoved()})},Fe.prototype.applyTheme=function(e){var t=this;Promise.resolve().then(function(r){var n=i("EsvI");e=e||n.getCurrentTheme().name,n.loadTheme(e,!0,!0,t._chartWidgetCollection)}.bind(null,i)).catch(i.oe)},Fe.prototype.actions=function(){return null===this._actions&&this._setActions(),this._actions},Fe.prototype._setActions=function(){var e,t=this,r=[];if(!this._readOnly){r=[new U({label:window.t("Eraser"),payload:"eraser",statName:"Eraser"}),new z,new U({label:window.t("Trend Line"),payload:"LineToolTrendLine",statName:"LineToolTrendLine"}),new U({label:window.t("Horizontal Line"),payload:"LineToolHorzLine",statName:"LineToolHorzLine"}),new U({label:window.t("Vertical Line"),payload:"LineToolVertLine",statName:"LineToolVertLine"}),new U({label:window.t("Arrow"),payload:"LineToolArrow",statName:"LineToolArrow"}),new U({label:window.t("Ray"),payload:"LineToolRay",statName:"LineToolRay"}),new U({label:window.t("Extended"),payload:"LineToolExtended",statName:"LineToolExtended"}),new U({label:window.t("Parallel Channel"),payload:"LineToolParallelChannel",statName:"LineToolParallelChannel"}),new z,new U({label:window.t("Pitchfork"),payload:"LineToolPitchfork",statName:"LineToolPitchfork"}),new U({label:window.t("Schiff Pitchfork"),payload:"LineToolSchiffPitchfork",statName:"LineToolSchiffPitchfork"}),new U({label:window.t("Pitchfan"),payload:"LineToolPitchfan",statName:"LineToolPitchfan"}),new U({label:window.t("Gann Square"),payload:"LineToolGannSquare",statName:"LineToolGannSquare"}),new U({label:window.t("Gann Fan"),payload:"LineToolGannFan",statName:"LineToolGannFan"}),new U({label:window.t("Fib Retracement"),payload:"LineToolFibRetracement",statName:"LineToolFibRetracement"}),new U({label:window.t("Trend-Based Fib Extension"),payload:"LineToolTrendBasedFibExtension",statName:"LineToolTrendBasedFibExtension"}),new U({label:window.t("Fib Speed Resistance Fan"),payload:"LineToolFibSpeedResistanceFan",statName:"LineToolFibSpeedResistanceFan"}),new U({label:window.t("Fib Time Zone"),payload:"LineToolFibTimeZone",statName:"LineToolFibTimeZone"}),new U({label:window.t("Circle Lines"),payload:"LineToolCircleLines",statName:"LineToolCircleLines"}),new U({label:window.t("Fib Circles"),payload:"LineToolFibCircles",statName:"LineToolFibCircles"}),new U({label:window.t("Fib Speed Resistance Arcs"),payload:"LineToolFibSpeedResistanceArcs",statName:"LineToolFibSpeedResistanceArcs"}),new z,new U({label:window.t("Rectangle"),payload:"LineToolRectangle",statName:"LineToolRectangle"}),new U({label:window.t("Ellipse"),payload:"LineToolEllipse",statName:"LineToolEllipse"
}),new U({label:window.t("Triangle"),payload:"LineToolTriangle",statName:"LineToolTriangle"}),new U({label:window.t("Polyline"),payload:"LineToolPolyline",statName:"LineToolPolyline"}),new U({label:window.t("Path"),payload:"LineToolPath",statName:"LineToolPath"}),new U({label:window.t("Arc"),payload:"LineToolArc",statName:"LineToolArc"}),new z,new U({label:window.t("Text",{context:"tool"}),payload:"LineToolText",statName:"LineToolText"}),new U({label:window.t("Anchored Text"),payload:"LineToolTextAbsolute",statName:"LineToolTextAbsolute"}),new U({label:window.t("Balloon"),payload:"LineToolBalloon",statName:"LineToolBalloon"}),new U({label:window.t("Price Label"),payload:"LineToolPriceLabel",statName:"LineToolPriceLabel"}),new z,new U({label:window.t("Elliott Wave Subminuette"),payload:"LineToolElliottSubminuette",statName:"LineToolElliottSubminuette"}),new U({label:window.t("Elliott Wave Minor"),payload:"LineToolElliottMinor",statName:"LineToolElliottMinor"}),new U({label:window.t("Elliott Wave Circle"),payload:"LineToolElliottCircle",statName:"LineToolElliottCircle"}),new U({label:window.t("Elliott Minor Retracement"),payload:"LineToolElliottMinorRetr",statName:"LineToolElliottMinorRetr"}),new U({label:window.t("Elliott Major Retracement"),payload:"LineToolElliottMajorRetr",statName:"LineToolElliottMajorRetr"}),new z,new U({label:window.t("Brush"),payload:"LineToolBrush",statName:"LineToolBrush"}),new z,new U({label:window.t("Forecast"),payload:"LineToolPrediction",statName:"LineToolPrediction"})];for(var n=function(e){q.tool.setValue(e.getPayload())},o=0;o<r.length;o++)r[o]instanceof U&&r[o].update({onExecute:n});e=new U({label:window.t("Settings..."),icon:i("MXV9"),statName:"ScalesProperties",onExecute:function(){t.showGeneralChartProperties(m.scales)}})}this._hotkeys.add({desc:"Maximize",hotkey:y.Modifiers.Alt+13,handler:function(){t.toggleFullscreen()},isDisabled:function(){return!t._options.fullscreenable.value()}}),this._hotkeys.add({desc:"Cancel selection",hotkey:27,handler:function(){t._model.selectionMacro((function(e){e.clearSelection()}))},isDisabled:function(){return!t._model||0===t._model.selection().sources().length}}),t.withModel(null,(function(){t._model.onSelectedSourceChanged().subscribe(null,(function(){t._hotkeys.promote()}))}));var s=new U({label:window.t("Reset Chart"),icon:i("LdoW"),statName:"ResetChart",onExecute:this.GUIResetScales.bind(this),hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+82}),a=new U({label:window.t("Invert Scale"),statName:"Invert Scale",checkable:!0,onExecute:function(){t._model.invertPriceScale(t._model.mainSeries().priceScale())},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+73}),l=new U({label:window.t("Auto (Fits Data To Screen)"),checkable:!0,onExecute:function(){var e=t._model.mainSeries().priceScale();t._model.togglePriceScaleAutoScaleMode(e),l.update({checked:e.isAutoScale()})}}),c=new U({label:window.t("Lock Price To Bar Ratio"),checkable:!0,statName:"ToggleLockScale",onExecute:function(){
t._model.togglePriceScaleLockScaleMode(t._model.mainSeries().priceScale())}}),u=new U({label:window.t("Regular"),checkable:!0,statName:"ToggleRegularScale",onExecute:function(){var e=t._model.mainSeries().priceScale();t._model.setPriceScaleRegularScaleMode(e),u.update({checked:e.isRegular()})}}),h=new U({label:window.t("Percent"),checkable:!0,statName:"TogglePercantage",onExecute:function(){t._model.togglePriceScalePercentageScaleMode(t._model.mainSeries().priceScale())},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+80}),f=new U({label:window.t("Indexed to 100"),checkable:!0,statName:"ToggleIndexedTo100",onExecute:function(){t._model.togglePriceScaleIndexedTo100ScaleMode(t._model.mainSeries().priceScale())}}),b=new U({label:window.t("Logarithmic"),statName:"ToggleLogScale",checkable:!0,onExecute:function(){t._model.togglePriceScaleLogScaleMode(t._model.mainSeries().priceScale())},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+76}),w=new U({label:window.t("Undo"),onExecute:function(){ge("GUI","Undo"),t._model.undoHistory().undo()},disabled:!0,hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Mod+90}),P=new U({label:window.t("Redo"),onExecute:function(){ge("GUI","Redo"),t._model.undoHistory().redo()},disabled:!0,hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Mod+89});t.withModel(null,(function(){t._model.undoHistory().undoStack().onChange().subscribe(t,t.updateUndoRedo),t._model.undoHistory().redoStack().onChange().subscribe(t,t.updateUndoRedo)}));var C=[new U({label:window.t("Loading")})],T=new U({name:"apply-color-theme",label:window.t("Color Theme"),icon:i("opke"),subItems:C,statName:"ColorTheme"}),x=new U({label:window.t("Time Zone"),statName:"TimeZone"}),I=function(e,t){oe.symbol.setValue(e),t&&(K(t),oe.interval.setValue(t))},E=new U({label:window.t("Change Symbol..."),statName:"ChangeSymbol",onExecute:function(){ae({callback:I,ownerDocument:t._jqParent.prop("ownerDocument")})}});!d.enabled("symbol_search_hot_key")||this.readOnly()||this._hideSymbolSearch||Ae((function(){if(d.enabled("widget")||!S("show_new_symbol_search_dialog"))ae({callback:I,ownerDocument:t._jqParent.prop("ownerDocument")});else{var e=ce();Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(12),i.e(14),i.e(15),i.e(18),i.e(20),i.e(21),i.e(22),i.e(29),i.e(51),i.e(52),i.e(61),i.e(62),i.e(72),i.e(81),i.e(0),i.e(9),i.e(10),i.e(13),i.e(28),i.e(33),i.e(32),i.e(38),i.e(43),i.e(47),i.e(56),i.e(65),i.e(79),i.e(86),i.e("symbol-search-dialog")]).then(i.bind(null,"p04v")).then(t=>{t.showSymbolSearchItemsDialog({hasWatchlist:e,defaultValue:e?void 0:oe.symbol.value(),showSpreadActions:L(),onSearchComplete:function(e){oe.symbol.setValue(e[0].symbol)}})})}})),_("symboledit.dialog_last_entry","");var O={label:window.t("Change Interval..."),statName:"ChangeInterval",onExecute:function(){se({callback:function(e){K(e),oe.interval.setValue(e)},ownerDocument:t._jqParent.prop("ownerDocument")})}};!d.enabled("show_interval_dialog_on_key_press")||this.readOnly()||this._hideSymbolSearch||(O.shortcutHint=",",O.hotkeyGroup=this._hotkeys,
O.hotkeyHash=188);var A,M,k=new U(O);TradingView.onWidget()||(this._options.addToWatchlistEnabled&&(A=new U({label:window.t("Add To Watchlist"),icon:i("a9Kt"),statName:"AddToWatchlist",onExecute:function(){if(window.widgetbar){for(var e,i=window.widgetbar.setPage("base"),r=0;r<i.widgets.length;r++)if("watchlist"===i.widgets[r].type){e=i.widgets[r].widgetObject;break}if(!e)return;e.addSymbols([t.getSymbol()])}},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+87})),M=new U({label:window.t("Add To Text Notes"),statName:"AddToTextNotes",onExecute:function(){runOrSignIn((function(){TradingView.bottomWidgetBar&&(TradingView.bottomWidgetBar.toggleWidget("text_notes",!0),TradingView.bottomWidgetBar._widgets.text_notes.addNote(null,t.getSymbol(!0),t.getSymbol()))}),{source:"Add text note in chart context menu"})},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+78}));var D=new U({label:window.t("Reset Time Scale"),icon:i("LdoW"),statName:"ResetScale",onExecute:function(){t.model().resetTimeScale()},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Mod+y.Modifiers.Alt+81}),R=new U({label:window.t("Insert Drawing Tool"),subItems:r,statName:"InsertDravingTool"}),V=new U({label:window.t("Remove Indicators"),statName:"RemoveAllIndicators",onExecute:this.removeAllStudies.bind(this)}),B=new U({label:window.t("Remove Drawings"),statName:"RemoveAllDrawingTools",onExecute:this.removeAllDrawingTools.bind(this)}),N=new U({label:window.t("All Indicators And Drawing Tools"),statName:"RemoveAllIndicatorsAndDrawingTools",onExecute:this.removeAllStudiesDrawingTools.bind(this)}),F=this.chartWidgetCollection(),j=new U({label:window.t("Apply these Indicators to Entire Layout"),statName:"ApplyIndicatorsToAllCharts",onExecute:function(){F.applyIndicatorsToAllCharts(t)}}),W=new U({label:window.t("Insert Indicator..."),statName:"InsertIndicator",onExecute:function(){t.showIndicators()},hotkeyGroup:this._hotkeys,hotkeyHash:191});new U({label:window.t("Insert Indicator..."),statName:"InsertIndicator",onExecute:function(){t.showIndicators()},hotkeyGroup:this._hotkeys,hotkeyHash:111});var H,G=new U({label:window.t("Compare or Add Symbol..."),statName:"CompareOrAddSymbol",onExecute:this.toggleCompareOrAdd.bind(this)}),Y=new U({label:window.t("Compare..."),statName:"Compare",onExecute:this.toggleCompareOrAdd.bind(this)}),X=new U({label:window.t("Object Tree..."),statName:"ObjectsTree",onExecute:this.showObjectsTreePanelOrDialog.bind(this)}),J=new U({label:window.t("Settings..."),icon:i("MXV9"),statName:"ChartProperties",onExecute:function(){t.showGeneralChartProperties()}}),Q=new U({label:window.t("Settings..."),icon:i("MXV9"),statName:"MainSeriesProperties",onExecute:function(){t.showGeneralChartProperties(m.style)}}),Z=new U({label:window.t("Lock/Unlock"),statName:"ToggleLockSelectedObject",onExecute:this.toggleLockSelectedObject.bind(this)}),$=new U({label:window.t("Hide"),icon:i("DYI2"),statName:"HideSelectedObject",onExecute:this.hideSelectedObject.bind(this)});d.enabled("property_pages")&&(H=new U({label:window.t("Settings..."),
icon:i("MXV9"),statName:"EditSelectedObject",onExecute:function(){t.showSelectedSourceProperties()}})),this.withModel(null,(function(){t.model().mainSeries().properties().priceAxisProperties.subscribe(t,t._updateScalesActions)}));var ee=new U({label:window.t("Scale Price Chart Only"),checkable:!0,statName:"ScalePriceChartOnly"});ee.binder=new p(ee,this._properties.scalesProperties.scaleSeriesOnly,this.model(),window.t("Scale Price Chart Only"));var re=this.model().model();this._properties.scalesProperties.scaleSeriesOnly.listeners().subscribe(null,(function(){re.recalculateAllPanes(),re.invalidate(ie.full())}));var ne=new U({label:window.t("Drawings Toolbar"),checkable:!0,statName:"ToggleDrawingToolbar"}),ue=this._options.isDrawingToolbarVisible;ue&&(ue.subscribe((function(e){ne.update({checked:e})}),{callWithLast:!0}),ne.update({onExecute:function(){ue.setValue(!ue.value())}}));var he=new U({label:window.t("Stay in Drawing Mode"),checkable:!0,statName:"ToggleStayInDrawingMode"});he.binder=new p(he,q.properties().stayInDrawingMode,this.model(),window.t("Stay In Drawing Mode"));var de=new U({label:window.t("Sync drawings to all charts"),checkable:!0,statName:"ToggleSyncDrawings"});de.binder=new p(de,q.properties().drawOnAllCharts,this.model(),"SyncDrawings");var pe=new U({label:window.t("Lock All Drawing Tools"),checkable:!0,statName:"ToggleLockDrawings"});pe.binder=new p(pe,q.lockDrawings(),this.model(),window.t("Lock drawings"),(function(){q.lockDrawings().setValue(this.value())}));var fe=new U({label:window.t("Hide All Drawing Tools"),checkable:!0,statName:"ToggleHideAllDrawingTools",hotkeyHash:y.Modifiers.Mod+y.Modifiers.Alt+72,hotkeyGroup:this._hotkeys});fe.binder=new p(fe,q.hideAllDrawings(),this.model(),window.t("Hide All Drawing Tools"),(function(){q.hideAllDrawings().setValue(this.value())}));var _e=new U({label:window.t("Hide Marks On Bars"),checkable:!0,statName:"ToggleHideMarksOnBars"});_e.binder=new p(_e,q.hideMarksOnBars(),this.model(),window.t("Hide Marks On Bars"),(function(){q.hideMarksOnBars().setValue(this.value())}));var me=new U({label:window.t("Extended Trading Hours"),checkable:!0,statName:"ToggleExtendedHours"});me.binder=new p(me,this.model().mainSeries().properties().extendedHours,this.model(),window.t("Change Extended Hours"));var ve=new U({label:window.t("Symbol Last Price Label"),checkable:!0,checked:!1,statName:"ToggleSymbolLastValue"});ve.binder=new p(ve,this.properties().scalesProperties.showSeriesLastValue,this.model(),window.t("Show Symbol Last Value"));var ye=new U({label:window.t("Symbol Previous Day Close Price Label"),checkable:!0,checked:!1,statName:"ToggleSymbolPrevCloseValue"});ye.binder=new p(ye,this.properties().scalesProperties.showSeriesPrevCloseValue,this.model(),window.t("Show Symbol Previous Close Value"));var be=new U({label:window.t("Previous Day Close Price Line"),checkable:!0,checked:!1,statName:"ToggleSymbolPrevCloseLine"});be.binder=new p(be,this.model().mainSeries().properties().showPrevClosePriceLine,this.model(),window.t("Show Previous Close Price Line")),
this.model().mainSeries().onRestarted().subscribe(this,(function(){this.updateActionForIntradayOnly(ye),this.updateActionForIntradayOnly(be)}));var Se=new U({label:window.t("Symbol Name Label"),checkable:!0,checked:!1,statName:"ToggleSymbolLabels"});Se.binding=new p(Se,this.properties().scalesProperties.showSymbolLabels,this.model(),"Undo Show Symbol Labels");var we=new U({label:window.t("Indicator Last Value Label"),checkable:!0,checked:!1,statName:"ToggleStudyLastValue"});we.binder=new p(we,this.properties().scalesProperties.showStudyLastValue,this.model(),window.t("Show Indicator Last Value"));var Pe=new U({label:window.t("Indicator Name Label"),checkable:!0,checked:!1,statName:"ToggleIndicatorsLabels"});Pe.binding=new p(Pe,this.properties().scalesProperties.showStudyPlotLabels,this.model(),"Undo Show Indicator Labels");var Ce=new U({label:window.t("Bid and Ask Labels"),checkable:!0,checked:!1,statName:"ToggleBidAskLabels"});Ce.binding=new p(Ce,this.properties().scalesProperties.showBidAskLabels,this.model(),window.t("Show Bid and Ask Labels"));var Te=new U({label:window.t("Bid and Ask Lines"),checkable:!0,checked:!1,statName:"ToggleBidAskLines"});Te.binding=new p(Te,this.model().mainSeries().properties().bidAsk.visible,this.model(),window.t("Show Bid and Ask Lines"));var xe=new U({label:window.t("Pre/Post Market Price Label"),checkable:!0,checked:!1,statName:"TogglePrePostMarketPriceLabel"});xe.binding=new p(xe,this.properties().scalesProperties.showPrePostMarketPriceLabel,this.model(),window.t("Show Pre/Post Market Price Label"));var Ie=new U({label:window.t("Pre/Post Market Price Line"),checkable:!0,checked:!1,statName:"TogglePrePostMarketPriceLine"});Ie.binding=new p(Ie,this.model().mainSeries().properties().prePostMarket.visible,this.model(),window.t("Show Pre/Post Market Price Line")),this.model().mainSeries().isPrePostMarketPricesForbiddenProperty().subscribe(this,(function(e){xe.update({disabled:e.value()}),Ie.update({disabled:e.value()})}));var Ee=new U({label:window.t("Financials Last Value Label"),checkable:!0,checked:!1,statName:"ToggleFundamentalsLastValue"});Ee.binder=new p(Ee,this.properties().scalesProperties.showFundamentalLastValue,this.model(),"Show Financials Last Value");var Le=new U({label:window.t("Financials Name Label"),checkable:!0,checked:!1,statName:"ToggleFundamentalsLabels"});Le.binding=new p(Le,this.properties().scalesProperties.showFundamentalNameLabel,this.model(),"Show Financials Name Label");var Oe=new U({label:window.t("Countdown To Bar Close"),checkable:!0,checked:!1,statName:"ToggleCountdown"});Oe.binder=new p(Oe,this.model().mainSeries().properties().showCountdown,this.model(),Oe.getLabel());var Me=new U({label:window.t("Currency"),checkable:!0,checked:!0,statName:"ToggleScalesCurrency"});Me.binder=new p(Me,this.properties().scalesProperties.showCurrency,this.model(),"Change Currency Label Visibility");var ke=null;this._options.goToDateEnabled&&(ke=new U({label:window.t("Go to Date..."),statName:"GoToDate",onExecute:function(){
var e=t._chartWidgetCollection.activeChartWidget.value();v(e.model())},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+71}));var Ne,Fe=new U({label:window.t("Symbol Info..."),icon:i("1pHB"),checkable:!1,statName:"SymbolInfo",onExecute:function(){if(ce())le(),ge("ContextMenuClick","Mobile","SymbolInfo");else{var e=t.model().mainSeries().symbol(),i=t.model().mainSeries().symbolInfo();te(e,{symbolInfo:i})}}}),je=new U({label:De,statName:"MergeAllScalesToLeft",onExecute:function(){t.model().mergeAllScales("left")}}),We=new U({label:Re,statName:"MergeAllScalesToRight",onExecute:function(){t.model().mergeAllScales("right")}}),He=new U({label:Ve,statName:"MoveScaleToLeft",onExecute:function(){t.model().mergeAllScales("left")}}),Ue=new U({label:Be,statName:"MoveScaleToRight",onExecute:function(){t.model().mergeAllScales("right")}});Ne=new U({label:window.t("Move Chart"),subItems:[new U({label:window.t("Forward"),statName:"MoveChartRight",onExecute:function(){t._chartWidgetCollection.moveActiveChartWithUndo(!1)}}),new U({label:window.t("Back"),statName:"MoveChartLeft",onExecute:function(){t._chartWidgetCollection.moveActiveChartWithUndo(!0)}})]});var ze=d.enabled("show_object_tree");if(this._actions={chartProperties:J,mainSeriesPropertiesAction:Q,timeScaleReset:D,chartReset:s,invertSeriesScale:a,logSeriesScale:b,autoSeriesScale:l,lockSeriesScale:c,regularSeriesScale:u,percentSeriesScale:h,indexedTo100SeriesScale:f,compareOrAdd:G,compare:Y,paneObjectTree:ze?X:void 0,insertIndicator:W,insertDrawingTool:R,applyColorTheme:T,symbolSearch:E,showSymbolInfoDialog:Fe,changeInterval:k,seriesHide:$,studyHide:$,lineToggleLock:Z,lineHide:$,scaleSeriesOnly:ee,drawingToolbarAction:ne,stayInDrawingModeAction:he,syncModeAction:de,lockDrawingsAction:pe,hideAllDrawingsAction:fe,hideAllMarks:_e,applyTimeZone:x,extendedHours:me,showCountdown:Oe,showCurrency:Me,showSeriesLastValue:ve,showSeriesPrevCloseValue:ye,showSeriesPrevCloseLine:be,showBidAskLabels:Ce,showBidAskLines:Te,showPrePostMarketPriceLabel:xe,showPrePostMarketPriceLine:Ie,showSymbolLabelsAction:Se,showStudyLastValue:we,showStudyPlotNamesAction:Pe,showFundamentalsLastValueAction:Ee,showFundamentalNamesAction:Le,undo:w,redo:P,mergeLeftScalesAction:je,mergeRightScalesAction:We,moveScaleToLeft:He,moveScaleToRight:Ue,moveChartAction:Ne},e&&(this._actions.scalesProperties=e),A&&(this._actions.addToWatchlist=A),d.enabled("show_source_code")&&(this._actions.viewSourceCode=new U({label:window.t("Source Code..."),statName:"OpenSelectedObjectSource",onExecute:this.openSelectedObjectSource.bind(this)})),!TradingView.onWidget()&&d.enabled("text_notes")&&(this._actions.addToTextNotes=M),null!==ke&&(this._actions.gotoDate=ke),this.createSessionBreaksActions(),!this.readOnly()){var Ge=new U({label:window.t("Remove"),icon:i("PgQx"),statName:"RemoveSelectedObject",onExecute:function(){var e;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()),e||(e=this),e.removeSelectedSources()}.bind(this),hotkeyGroup:this._hotkeys,hotkeyHash:g.isMacKeyboard?8:46})
;this._hotkeys.add({handler:function(){this.removeSelectedSources()}.bind(this),desc:"Remove selected source",hotkey:g.isMacKeyboard?46:8}),this._actions.insertDrawingTool=R,this._actions.paneRemoveAllStudies=V,this._actions.paneRemoveAllDrawingTools=B,this._actions.paneRemoveAllStudiesDrawingTools=N,this._actions.applyStudiesToAllCharts=j,this._actions.seriesRemove=Ge,this._actions.studyRemove=Ge,this._actions.lineRemove=Ge,d.enabled("property_pages")&&(this._actions.format=H),this._actions.lockDrawingsAction=pe,this._actions.hideAllDrawingsAction=fe,this._actions.hideAllMarks=_e}this._actions.showPriceLine=new U({label:window.t("Price Line"),checkable:!0,statName:"TogglePriceLine"}),this._actions.showPriceLine.binding=new p(this._actions.showPriceLine,this.model().mainSeries().properties().showPriceLine,this.model(),"Undo Toggle Price Line"),this.readOnly()||(this._actions.horzLineRightThere=new U({label:window.t("Draw Horizontal Line Here"),onExecute:function(){t.activePaneWidget&&t.activePaneWidget.drawRightThere("LineToolHorzLine")},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+72}),this._actions.vertLineRightThere=new U({label:window.t("Draw Vertical Line Here"),onExecute:function(){t.activePaneWidget&&t.activePaneWidget.drawRightThere("LineToolVertLine")},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+86}),this._actions.crossLineRightThere=new U({label:window.t("Draw Cross Line Here"),onExecute:function(){t.activePaneWidget&&t.activePaneWidget.drawRightThere("LineToolCrossLine")},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+67}),this._actions.trendLine=new U({label:window.t("Draw Trend Line"),onExecute:function(){t.activePaneWidget&&q.tool.setValue("LineToolTrendLine")},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+84}),this._actions.FibRetracement=new U({label:window.t("Draw Fib Retracement"),onExecute:function(){t.activePaneWidget&&q.tool.setValue("LineToolFibRetracement")},hotkeyGroup:this._hotkeys,hotkeyHash:y.Modifiers.Alt+70})),this._updateScalesActions()},Fe.prototype.executeActionById=function(e){if("takeScreenshot"===e)return console.warn('Action "takeScreenshot" is deprecated. Use method "takeScreenshot" instead'),void this._chartWidgetCollection.takeScreenshot();"lockDrawingsAction"===e&&console.warn('Action "lockDrawingsAction" is deprecated. Use method "lockAllDrawingTools" instead'),"hideAllDrawingsAction"===e&&console.warn('Action "hideAllDrawingsAction" is deprecated. Use method "hideAllDrawingTools" instead'),e in this._actions?this._actions[e]instanceof U&&this._actions[e].execute():console.warn("Unknown action id: "+e)},Fe.prototype.getCheckableActionState=function(e){if("lockDrawingsAction"===e)return console.warn('Action "lockDrawingsAction" is deprecated. Use method "lockAllDrawingTools" instead'),null;if("hideAllDrawingsAction"===e)return console.warn('Action "hideAllDrawingsAction" is deprecated. Use method "hideAllDrawingTools" instead'),null;if(e in this._actions){var t=this._actions[e];if(t instanceof U&&t.isCheckable())return t.isChecked()
;console.warn("Action "+e+" has no state")}else console.warn("Unknown action id: "+e);return null},Fe.prototype._updateScalesActions=function(){if(null!==this._actions){var e=this.model().mainSeries(),t=e.priceScale(),i=e.properties(),r=t.isLockScale(),n=i.style.value()===h.STYLE_PNF;this._actions.percentSeriesScale.update({disabled:r||n,checked:t.isPercentage()}),this._actions.logSeriesScale.update({disabled:r||n,checked:t.isLog()}),this._actions.regularSeriesScale.update({disabled:r||n,checked:t.isRegular()}),this._actions.indexedTo100SeriesScale.update({disabled:r||n,checked:t.isIndexedTo100()}),this._actions.invertSeriesScale.update({checked:t.isInverted()}),this._actions.lockSeriesScale.update({checked:t.isLockScale()}),this._actions.autoSeriesScale.update({checked:t.isAutoScale(),disabled:t.properties().autoScaleDisabled.value()})}},Fe.prototype.removeAllStudies=function(){this._model.removeAllStudies()},Fe.prototype.removeAllDrawingTools=function(){this._model.removeAllDrawingTools()},Fe.prototype.removeAllStudiesDrawingTools=function(){this._model.removeAllStudiesAndDrawingTools()},Fe.prototype.model=function(){return this._model},Fe.prototype.defaultSymbol=function(){return this._defSymbol},Fe.prototype.connect=function(){this._handler=function(e){this._onData(e)}.bind(this),this._boundOnChartSessionIsConnectedChanged=this._onChartSessionIsConnectedChanged.bind(this),this._chartSession.isConnected().subscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.criticalError().subscribe(this,this._onChartSessionCriticalError),this._chartSession.connect(this._handler)},Fe.prototype.finishInitWithoutConnect=function(){this._chartSession.disable(),this._init(),this.chartWidgetInitialized.fire()},Fe.prototype.reconnect=function(){this._chartSession.disconnect(),this._chartSession.connect()},Fe.prototype.update=function(){if(this._model){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].update();this._timeAxisWidget&&this._timeAxisWidget.update()}},Fe.prototype.paint=function(e){e||(e=ie.full());for(var t=0;t<this._paneWidgets.length;t++){var i=this._paneWidgets[t];null!==this._maximizedPaneWidget&&this._maximizedPaneWidget!==i||i.paint(e.invalidateForPane(t),!1)}this._timeAxisWidget&&this._timeAxisWidget.paint(e.invalidateForTimeScale()),this._redraw.fire()},Fe.prototype._makeDefaultGui=function(){this._makeChartWidget(),this._makeLoadingScreen(),this.onWidget()&&this._makeAvailableOnTVPopup(),this._model&&(this._makeTimeAxisWidget(),this._makePaneWidgetsAndSeparators()),this.adjustSize(),this._updateScalesActions(),$(this._elMainTable).selectable(!1),this.update(),this.paint()},Fe.prototype.widget=function(){return this._jqMainDiv},Fe.prototype.restoreState=function(e,t,r){this.adjustSize();var n=this._model.restoreState(this._content,t,r);this._setActions(),n&&n.lines_limit_exceeded&&!this.readOnly()&&Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(26),i.e(24),i.e("linetools-limit-exceeded-dialog")]).then(function(e){(0,
i("uFqk").showLinetoolsLimitExceededDialog)(this)}.bind(this).bind(null,i)).catch(i.oe)},Fe.prototype._onBackgroundColorChanged=function(){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].setCursorForTool();this.update(),this.model().model().fullUpdate()},Fe.prototype.setScaleLineColor=function(e){this.scaleLineColor=e.value(),this._paneSeparators.forEach((function(e){e.update()})),this.update(),this.paint()},Fe.prototype.setScaleTextColor=function(e){this.scaleTextColor=e.value(),this.update(),this.paint()},Fe.prototype.setTimingsMeter=function(e){this._timingsMeter=e,this._updateTimingsMeterState()},Fe.prototype._updateTimingsMeterState=function(){var e=this._options.visible.value();null!==this._timingsMeter&&(e?this._timingsMeter.startCollect():this._timingsMeter.stopCollect())},Fe.prototype._update=function(e){var t=e?e.fullInvalidation():re.Full;if(null!==this._timingsMeter&&this._timingsMeter.startDraw(t),t===re.Full){this._model?this._updateGui():this.adjustSize(),this._timeAxisWidget.update();for(var i=0;i<this._paneWidgets.length;i++){this._paneWidgets[i].setState(this._model.panes()[i]),null!==this._paneWidgets[i].statusWidget()&&this._paneWidgets[i].statusWidget().updateLayout()}this._dataWindowWidget&&this._dataWindowWidget.fullUpdate()}else if(t===re.Light){this._timeAxisWidget.update();for(i=0;i<this._paneWidgets.length;i++){null!==this._paneWidgets[i].statusWidget()&&this._paneWidgets[i].statusWidget().update()}this._dataWindowWidget&&this._dataWindowWidget.update()}else if(t===re.Cursor){for(i=0;i<this._paneWidgets.length;i++){null!==this._paneWidgets[i].statusWidget()&&this._paneWidgets[i].statusWidget().update()}this._dataWindowWidget&&this._dataWindowWidget.update()}this.paint(e),null!==this._timingsMeter&&this._timingsMeter.stopDraw(),e&&e.panesOrderInvalidated()&&Ie.emit("panes_order_changed")},Fe.prototype._createVolumeIfNeeded=function(){var e=d.enabled("create_volume_indicator_by_default")&&this._options.addVolume,t=!this._content,i=d.enabled("charting_library_base"),r=d.enabled("create_volume_indicator_by_default_once"),n=this._content&&!this._content.loading;e&&(t||i&&n&&!r)&&this._model.mainSeries().dataEvents().symbolResolved().subscribe(this,(function(){var e=this;setTimeout((function(){var t=e._model.model().mainSeries().symbolInfo();if(t){var i=!t.has_no_volume;if(!e.containsVolume()&&i){var r=Se.factoryDefaults("chartproperties.volumePaneSize"),n=e._model.model().createStudyInserter({type:"java",studyId:"Volume@tv-basicstudies"});n.setForceOverlay(d.enabled("volume_force_overlay")),n.setPaneSize(r),d.enabled("hide_volume_ma")&&n.setPropertiesState({styles:{vol_ma:{visible:!1}}}),n.insert()}else if(!i&&e.containsVolume()){var o=e.model().dataSources().filter((function(e){return e instanceof R&&"Volume"===e.metaInfo().shortId}))[0];e._model.model().removeSource(o)}}}),0)}),r)},Fe.prototype._createSessions=function(e){var t=this.showGeneralChartProperties.bind(this,m.timezoneSessions);e.createSessions(t)},Fe.prototype._createPrePostMarket=function(e){
var t=this.showGeneralChartProperties.bind(this,m.style);e.createPrePostMarket(t)},Fe.prototype._createChartEventsSource=function(){if(d.enabled("chart_events")){var e=this._model.mainSeries(),t=new w(e),i=this._model.paneForSource(e),r=i.createPriceScaleAtPosition("overlay");i.insertDataSource(t,r)}},Fe.prototype._makeDefaultModel=function(){var e=this;if(this._content&&this._content.timeScale.points)var t={startDate:this._content.timeScale.points.items[0]};if(!this._metaInfoRepository.getInternalMetaInfoArray())throw new Error("Cannot create chart model: studies metainfo is absent");function i(){var i={readOnly:e.readOnly(),isSnapshot:!!e._containsData,timeScale:e._options.timeScale,crossHair:e._options.crossHair,esdEnabled:e._options.esdEnabled,currencyLabelEnabled:e._options.currencyLabelEnabled};void 0!==e._options.watermarkEnabled&&(i.watermarkEnabled=e._options.watermarkEnabled),void 0!==e._options.shiftVisibleRangeOnNewBar&&(i.shiftVisibleRangeOnNewBar=e._options.shiftVisibleRangeOnNewBar);var n=a(e._chartSession,(function(t){if(!(t instanceof ie))throw new Error("Invalid mask");e._invalidationMask?e._invalidationMask.merge(t):e._invalidationMask=t,e._draw_planned||(e._draw_planned=!0,e._options.visible.when((function(){var t=!document.hidden,i=e.screen&&e.screen.isShown();null!==e._timingsMeter&&t&&!i&&e._timingsMeter.startWaitingDraw(),e._drawRafId=e._jqParent.prop("ownerDocument").defaultView.requestAnimationFrame(r)})))}),e._properties,t,e._metaInfoRepository,e,e._options.undoHistory,e._options.barsMarksContainersFactory,i);return e._createSessions(n.chartModel()),e._createPrePostMarket(n.chartModel()),n}function r(){e._draw_planned=!1,e._drawRafId=0,e._inLoadingState||e._invalidationMask&&(e._invalidationMask=e._update(e._invalidationMask))}d.enabled("lean_chart_load")?this._model=this._model||i():this._model=i(),this._createVolumeIfNeeded();var n,o=function(){this._model.onTagsChanged().subscribe(this,Fe.prototype.onModelTagsChanged),this._initBackgroundColor(),this._updateGui(),this._modelCreated.fire(this._model),this._tagsChanged.fire();var t=this._model.mainSeries();this._defTimeframe&&t.setDefaultTimeframe(this._defTimeframe),this._model.lineCancelled().subscribe(this,this.onLineCancelled),t.dataEvents().symbolNotPermitted().subscribe(null,(function(e){t.properties().symbol.setValue(e)})),t.dataEvents().symbolResolved().subscribe(this,(function(e){var i=e.pro_name;i&&this._options.isSymbolAvailable(i).then((function(e){e||t.properties().symbol.setValue(DEFAULT_SYMBOL)}))})),void 0!==this._options.requestFallbackSymbol&&t.dataEvents().symbolGroupNotPermitted().subscribe(this,(function(e){this._options.requestFallbackSymbol(t.properties().symbol.value(),{type:"group_not_permitted",symbolGroup:e}).then((function(e){e&&t.properties().symbol.setValue(e)}))})),t.onInReplayStateChanged().subscribe(this.screen,this.screen.show),t.properties().style.unsubscribe(this,this._onChartStyleChanged),t.properties().style.subscribe(this,this._onChartStyleChanged),
t.dataEvents().completed().subscribe(this,(function(){this._addPerfMark("SeriesCompleted")}),!0),t.dataEvents().barReceived().subscribe(this,(function(){this._addPerfMark("SeriesFirstDataReceived")}),!0);var i=this._options;i.handleSessionErrors&&(t.dataEvents().chartTypeNotPermitted().subscribe(null,(function(){t.properties().interval.setValue("D"),i.muteSessionErrors||(x("kagiRenko"),O({feature:"kagiRenko"}))})),t.dataEvents().intradaySpreadNotPermitted().subscribe(null,(function(){t.properties().interval.setValue("D"),i.muteSessionErrors||O({feature:"intradaySpread"})})),t.dataEvents().customIntervalNotPermitted().subscribe(null,(function(){t.properties().interval.setValue(J(Z(t.properties().style.value()))),i.muteSessionErrors||O({feature:"customIntervals"})})),t.dataEvents().secondsIntervalNotPermitted().subscribe(null,(function(){t.properties().interval.setValue(J(Z(t.properties().style.value()))),i.muteSessionErrors||O({feature:"secondsIntervals",upgradeMessage:window.t("Upgrade now"),forceUpgradeBtn:!0})})),t.dataEvents().intradayExchangeNotPermitted().subscribe(null,(function(){if(t.properties().interval.setValue("D"),!i.muteSessionErrors){var e=t.symbolInfo().listed_exchange;P.prototype.supportedExchangesList().forEach((function(t){t.value===e&&(e=t.name)})),O({feature:"intradayExchange"})}}))),this._options.handleSessionErrors&&(t.requestingIntradayWhenNotSupported.subscribe(null,(function(){if(t.properties().interval.setValue("D"),!e._options.muteSessionErrors){var i=window.t("Interval is not applicable"),r=$("<div></div>"),n=window.t("{p_start}Only {b_start}D, W, M{b_end} intervals are supported for this symbol/exchange. You will be automatically switched to a D interval. Intraday intervals are not available because of exchange policies.{p_end}").format({p_start:"<p>",p_end:"</p>",b_start:"<b>",b_end:"</b>"});r.append(n),A({title:i,content:r})}})),t.requestingResolutionWhenNotSupported.subscribe(null,(function(e){t.properties().interval.setValue(e)})))}.bind(this);this._content?(Ne&&this._initialLoading&&(n={symbol:this._defSymbol,interval:this._defInterval,style:this._defStyle}),this.restoreState(this._content,this._containsData,n),Ne&&this._defSymbol&&this.model().model().setPriceAutoScaleForAllMainSources()):this._setActions();return o()},Fe.prototype._onChartStyleChanged=function(){ge("Chart","Chart Style "+this._model.mainSeries().getStyleShortName().toUpperCase())},Fe.prototype._updateGui=function(){this._model&&(this._makeTimeAxisWidget(),this._makePaneWidgetsAndSeparators(),$(this._elMainTable).selectable(!1),this.adjustSize())},Fe.prototype._makeChartWidget=function(){},Fe.prototype._makeLoadingScreen=function(){if(d.enabled("lean_chart_load")){if(this.screen)return;this.screen=new Fe.LoadingScreen(this,this._jqParent)}else this.screen=new Fe.LoadingScreen(this,this._jqMainDiv)},Fe.prototype._makeAvailableOnTVPopup=function(){this.available_screen||(this.available_screen=new E(this))},Fe.prototype._setSymbol=function(e,t){if(this._model){var i=this._model.mainSeries()
;if(!t&&i.symbolSameAsCurrent(e))return;this._model.selectionMacro((function(e){e.clearSelection()})),this._model.setMainSeriesSymbol(e)}else this._properties.mainSeriesProperties.merge({symbol:e})},Fe.prototype.setSymbol=function(e,t){return this._setSymbol.apply(this,arguments)},Fe.prototype.loadRange=function(e){this._model&&(this.screen.show(),this._model.loadRange(e))},Fe.prototype.getSymbol=function(e){var t;return(t=this._model?this._model.mainSeries().properties():this._properties.mainSeriesProperties)?e&&t.shortName&&t.shortName.value()?t.shortName.value():t.symbol.value():""},Fe.LoadingScreen=function(e,t){this._cw=e,this.$element=$('<div class="chart-loading-screen">'),this.$shield=$('<div class="chart-loading-screen-shield">').appendTo(this.$element),this.$element.appendTo(t),this._showed=!1,this._cw.withModel(this,this._connectToModel)},Fe.LoadingScreen.prototype._connectToModel=function(){this._cw.model().mainSeries().dataEvents().messageReceived().subscribe(this,(function(e){switch(e.method){case"symbol_error":e.params[1]!==Me&&this.hide();break;case"series_error":d.enabled("hide_loading_screen_on_series_error")&&this.hide();break;case"series_completed":this.hide()}}))},Fe.LoadingScreen.prototype.show=function(){this._cw._inLoadingState=!0,this._showed||(this._showed=!0,this._show())},Fe.LoadingScreen.prototype._show=function(){var e=this._cw.properties().paneProperties.background.value();this.$shield.css("background",e),this.$element.addClass("fade")},Fe.LoadingScreen.prototype.hide=function(){delete this._cw._inLoadingState,this._showed&&this._hide()},Fe.LoadingScreen.prototype._hide=function(){this._showed=!1,this.$element.removeClass("fade")},Fe.LoadingScreen.prototype.$canvas=null,Fe.LoadingScreen.prototype.context=null,Fe.LoadingScreen.prototype.isShown=function(){return this._showed},Fe.prototype.unsetActivePaneWidget=function(){this.activePaneWidget=!1},Fe.prototype.setActivePaneWidget=function(e){this.activePaneWidget=e},Fe.prototype.toggleMaximizePane=function(e){if(!(this._paneWidgets.length<2)){this._maximizedPaneWidget?(this._maximizedPaneWidget.state().setMaximized(!1),this._maximizedPaneWidget=null,this._paneSeparators.forEach((function(e){e.show()}))):(this._maximizedPaneWidget=e,this._maximizedPaneWidget.state().setMaximized(!0),this._paneSeparators.forEach((function(e){e.hide()})));for(var t=this._paneWidgets.length;t--;)this._paneWidgets[t].updateControls(),this._paneWidgets[t].updatePriceAxisWidgets();this._timeAxisWidget.updatePriceAxisStubs(),this.adjustSize(),this.updateCrossHairPositionIfNeeded()}},Fe.prototype._makePaneWidgetsAndSeparators=function(){for(var e=this._model.panes(),t=e.length,i=this._paneWidgets.length,r=t;r<i;r++){(a=this._paneWidgets.pop()).destroy(),(l=this._paneSeparators.pop())&&l.destroy()}for(r=i;r<t;r++){var n={contextMenuEnabled:this._options.paneContextMenuEnabled,currencyLabelEnabled:this._options.currencyLabelEnabled,handleScale:this._options.handleScale,handleScroll:this._options.handleScroll,
priceScaleContextMenuEnabled:this._options.priceScaleContextMenuEnabled,symbolMarkerEnabled:this._options.symbolMarkerEnabled,legendWidgetEnabled:this._options.legendWidgetEnabled,sourceStatusesWidgetEnabled:!this._containsData,sourceStatusesWidget:this._options.sourceStatusesWidget,marketStatusWidgetEnabled:this._options.marketStatusWidgetEnabled&&!this._containsData,marketStatusWidget:this._options.marketStatusWidget,chartWarningWidgetEnabled:this._options.chartWarningWidgetEnabled&&!this._containsData,chartWarningWidget:this._options.chartWarningWidget,dataProblemWidgetEnabled:this._options.dataProblemWidgetEnabled&&!this._containsData,legendWidget:this._options.legendWidget,propertyPagesEnabled:this._options.propertyPagesEnabled,sourceSelectionEnabled:this._options.sourceSelectionEnabled,controlsEnabled:this._options.paneControlsEnabled,croppedTickMarks:this._options.croppedTickMarks,customLegendWidgetFactories:new Map(this._customLegendWidgetsFactoryMap)};void 0!==this._options.paneContextMenu&&(n.contextMenu=this._options.paneContextMenu),void 0!==this._options.priceScaleContextMenu&&(n.priceScaleContextMenu=this._options.priceScaleContextMenu);var a=new o(this,e[r],n);if(this._paneWidgets.push(a),r>0){var l=new s(this,r-1,r);this._paneSeparators.push(l),this._timeAxisWidget?$(l.getElement()).insertBefore(this._timeAxisWidget.getElement()):$(l.getElement()).appendTo(this._elMainTable)}this._timeAxisWidget?this._elMainTable.insertBefore(a.getElement(),this._timeAxisWidget.getElement()):this._elMainTable.appendChild(a.getElement())}null!==this._timeAxisSeparator&&this._timeAxisSeparator.destroy(),this._timeAxisSeparator=new s(this,this._paneWidgets.length-1,0,!0),$(this._timeAxisSeparator.getElement()).insertBefore(this._timeAxisWidget.getElement());for(r=0;r<t;r++){var c=e[r];(a=this._paneWidgets[r]).hasState()&&a.state()===c?a.updatePriceAxisWidgets():a.setState(c)}for(r=t;r--;)this._paneWidgets[r].updateControls();this._updateThemedColor()},Fe.prototype._titlesProvider=function(e,t){var i=this.model(),r=this._maximizedPaneWidget?this._maximizedPaneWidget.state():i.paneForSource(i.mainSeries()),o="right"===e?r.rightPriceScales():r.leftPriceScales();if(o.length<t+1)return[];var s=o[t].orderedSources().filter((function(e){return e===i.mainSeries()||e instanceof R}));return s.reverse(),(s=n(s,i.mainSeries())).map((function(e){return e.title(!0,void 0,!1)}))},Fe.prototype._menuItemsProvider=function(e,t){var i=this.model(),r=this._maximizedPaneWidget?this._maximizedPaneWidget.state():i.paneForSource(i.mainSeries()),n="right"===e?r.visibleRightPriceScales():r.visibleLeftPriceScales();if(n.length<t+1)return[];var o=n[t],s=i.panes().indexOf(r),a=this._paneWidgets[s];return("right"===e?a.rightPriceAxisesContainer():a.leftPriceAxisesContainer()).findAxisWidgetForScale(o).getContextMenuActions()},Fe.prototype._makeTimeAxisWidget=function(){if(this._timeAxisWidget)this._timeAxisWidget.updatePriceAxisStubs();else{var e=this.model()
;this._timeAxisWidget=new c(this,this._options.timeScaleWidget,this._titlesProvider.bind(this),this._menuItemsProvider.bind(this),this._backgroundBasedTheme),this._elMainTable.appendChild(this._timeAxisWidget.getElement()),this._timeAxisWidget.updatePriceAxisStubs(),this._timeAxisWidget.onLabelHovered().subscribe(this,(function(t,i){var r=this._maximizedPaneWidget?this._maximizedPaneWidget.state():e.paneForSource(e.mainSeries());this.paneByState(r).highlightedPriceAxis().setValue(i?t:null),this.model().model().lightUpdate()}))}},Fe.prototype.insertStudy=function(e,t,i,r){var n=this;return new Promise((function(o){t?window.runOrSignIn((function(){o(n._insertStudy(e,t,i,r))}),{source:"study on study"}):o(n._insertStudy(e,t,i,r))})).catch((function(){}))},Fe.prototype._insertStudy=function(e,t,i,r){var n=this._model.createStudyInserter(e,t,i);n.setForceOverlay("java"===e.type&&"Volume@tv-basicstudies"===e.studyId&&d.enabled("volume_force_overlay"));var o=this,s=n.insert((function(e,t,i){return new Promise((function(n,s){r?n(r(e,t,i)):o.isSymbolicStudy(i)?(ge("GUI","Confirmation dialogs","Symbol confirmation dialog"),b(i,o.model(),n,s,"symbol")):o.hasConfirmInputs(t)?(ge("GUI","Confirmation dialogs","Inputs confirmation dialog"),b(i,o.model(),n,s)):n({})}))}));return s.catch((function(e){e===M.StudyCannotBeChild&&A({type:"modal",title:window.t("Oops!"),content:window.t("This indicator cannot be applied to another indicator.")}),e===M.CannotGetMetainfo&&A({type:"modal",title:window.t("Oops!"),content:window.t("Something went wrong. Please try again later.")})})),s},Fe.prototype.hasConfirmInputs=function(e){if(void 0===e)return!1;for(var t=0;t<e.length;++t){var i=e[t];if(void 0!==i.confirm&&i.confirm)return!0}return!1},Fe.prototype.isSymbolicStudy=function(e){switch(e.id){case"Overlay@tv-basicstudies":case"CorrelationCoefficient@tv-basicstudies":case"Correlation Coeff@tv-basicstudies":case"Correlation - Log@tv-basicstudies-1":case"Spread@tv-basicstudies":case"Ratio@tv-basicstudies":return!0;default:return!1}},Fe.prototype.getPriceAxisMaxWidthByName=function(e){return"left"===e?this.maxLhsPriceAxisWidth:this.maxRhsPriceAxisWidth},Fe.prototype.getPriceAxisWidthChangedByName=function(e){return"left"===e?this.lhsPriceAxisWidthChanged:this.rhsPriceAxisWidthChanged},Fe.prototype.adjustSize=function(){var e=0,t=null===this._model?null:this._model.model().priceScaleSlotsCount(),i=new Uint32Array(null===t?0:t.left),r=new Uint32Array(null===t?0:t.right),n=Oe(document.body);function o(e,t){return e+t}function a(e,t){t.forEach((function(t,i){e[i]=Math.max(e[i],t)}))}this._paneWidgets.forEach((function(t){if(!this._maximizedPaneWidget||this._maximizedPaneWidget===t){var n=t.leftPriceAxisesContainer().optimalWidths(),o=t.rightPriceAxisesContainer().optimalWidths();a(i,n),a(r,o),e+=t.stretchFactor()}}),this)
;var c=this._lhsAxesWidth=i.reduce(o,0),u=this._rhsAxesWidth=r.reduce(o,0),h=this._width(),d=this._height(),p=Math.max(h-c-u,0),f=this._paneSeparators.length,_=s.height(),m=this.isMaximizedPane()?0:_*f,v=null!==this._timeAxisWidget?this._timeAxisWidget.optimalHeight():0;v%2&&(v+=1);var g=m+v,y=d<g?0:d-g,b=y/e,S=0,w=!1;this._paneWidgets.forEach((function(e,t){this._model&&e.setState(this._model.panes()[t]);var o=0;if(this.isMaximizedPane())o=this._maximizedPaneWidget===e?y:0;else{var s=0;s=t===this._paneWidgets.length-1?Math.ceil((y-S)*n)/n:Math.round(e.stretchFactor()*b*n)/n,o=Math.max(s,2),S+=o}e.setPriceAxisSizes(l.LHS,o,i),e.setPriceAxisSizes(l.RHS,o,r),w=w||o!==e.height(),e.setSize(new be(p,o)),this._model&&e.state()&&this._model.setPaneHeight(e.state(),o)}),this),null!==this._timeAxisWidget&&this._timeAxisWidget.setSizes(new be(p,v),i,r),this._model&&this._model.setWidth(p),this._controlBarNavigation&&this._controlBarNavigation.updatePosition(),this.maxLhsPriceAxisWidth!==c&&(this.maxLhsPriceAxisWidth=c,this.lhsPriceAxisWidthChanged.fire(c)),this.maxRhsPriceAxisWidth!==u&&(this.maxRhsPriceAxisWidth=u,this.rhsPriceAxisWidthChanged.fire(u)),w&&Ie.emit("panes_height_changed")},Fe.prototype._onChartSessionIsConnectedChanged=function(e){e?this._onConnection():this._onDisconnect()},Fe.prototype._onChartSessionCriticalError=function(e,t){this._disconnected.fire(!0)},Fe.prototype._onData=function(e){switch(e.method){case"reconnect_bailout":this._reconnectBailout.fire();break;default:this._model.onData(e)}},Fe.prototype._onConnection=function(){this._online=!0,this.requestMetadata(),this._model&&(this._model.restart(),this._updateGui(),this.update(),this.paint(),this._connected.fire())},Fe.prototype._onDisconnect=function(){this._model&&this._model.disconnect(),this._online=!1,this.update(),this.paint(),this._disconnected.fire()},Fe.prototype._applyStudiesOverrides=function(){me.overrideDefaults(this._metaInfoRepository.getInternalMetaInfoArray())},Fe.prototype.requestMetadata=function(){this._addPerfMark("RequestMetadataStart"),we.logInfo("RequestMetadataStart"),this._metaInfoRepository.requestMetaInfo().then(function(){this._addPerfMark("RequestMetadataEnd"),we.logInfo("RequestMetadataEnd, already initialized: "+Boolean(this._inited)),this._inited?this.model().model().setStudiesMetaData(this._metaInfoRepository.getInternalMetaInfoArray(),this._metaInfoRepository.getMigrations()):(this._init(),this.chartWidgetInitialized.fire(),d.enabled("charting_library_base")||we.logDebug("initialized"))}.bind(this))},Fe.prototype.studiesMetaData=function(){return this._model.studiesMetaData()},Fe.prototype.getTimeScale=function(){return this._timeAxisWidget},Fe.prototype.chartWidgetCollection=function(){return this._chartWidgetCollection},Fe.prototype.setSeriesStyle=function(e,t){this._model.setProperty(e.properties().style,t)},Fe.prototype.showObjectsTreePanelOrDialog=function(){var e=!1,t=window.widgetbar;t&&t.isVisible()&&(e="object_tree"===t.setPage("object_tree").name);e||this.showObjectsTreeDialog()},
Fe.prototype._showChartProperties=function(e,t,i,r){t&&(_("properties_dialog.active_tab.chart",t),i.tabName=t);var n=this;return new Promise((function(t){f(e,n._model,i,n._chartWidgetCollection,r).then((function(e){t(null!==e&&e.isVisible()?e:null)}))}))},Fe.prototype.showGeneralChartProperties=function(e){if(!d.enabled("show_chart_property_page"))return Promise.resolve(null);var t=this;return this._showChartProperties(this._model.mainSeries(),e,{doNotCloseOnBgClick:!0,onResetToDefault:function(){t._model.restorePreferences(t._model),t.applyTheme(t)}}).then((function(e){if(null===e)return null;var i=function(){e.hide(),t._chartWidgetCollection.activeChartWidget.unsubscribe(i)};return t._chartWidgetCollection.activeChartWidget.subscribe(i),e}))},Fe.prototype.showChartPropertiesForSource=function(e,t,i,r){return d.enabled("property_pages")?e===this._model.model().mainSeries()?this.showGeneralChartProperties(t):((i=i||{}).onResetToDefault=this._model.restorePropertiesForSource.bind(this._model,e),this._showChartProperties(e,t,i,r)):Promise.resolve(null)},Fe.prototype.generalPropertiesDefinitions=function(){return this._getChartPropertyDefinitionsViewModel().then((function(e){return e.propertyPages()}))},Fe.prototype.propertiesDefinitionsForSource=function(e){return j(e)||B(e)||W(e)?e.getPropertyDefinitionsViewModel().then((function(e){return null===e?null:e.propertyPages()})).catch((function(e){return we.logWarn(e),null})):Promise.resolve(null)},Fe.prototype.toggleCompareOrAdd=function(){this._chartWidgetCollection.toggleAddCompareDialog()},Fe.prototype.showIndicators=function(e){if(window.studyMarket)return window.studyMarket.isVisible()?void window.studyMarket.hide():(window.studyMarket.show(e),window.studyMarket)},Fe.prototype.showFundamentals=function(e){if(window.fundamentalsDialog){if(!window.fundamentalsDialog.isVisible()){var t,i=void 0!==e?e.title(!0):void 0;if(void 0!==e){var r=e.symbolInfo();t=null===r?e.symbol():r.ticker||r.full_name}return window.fundamentalsDialog.show(t,i),window.fundamentalsDialog}window.fundamentalsDialog.hide()}},Fe.prototype.removeSelectedSources=function(){this.removeDataSources(this._model.selection().sources())},Fe.prototype.removeDataSources=function(e){var t=e.filter(function(e){return!(e===this._model.mainSeries()||e===this._model.lineBeingCreated()||e instanceof u||e instanceof C)}.bind(this));if(0!==t.length){var i=null;B(t[0])&&(r(1===t.length,"Cannot remove several studies (no multi select for studies)"),i=t[0]),t.find((function(e){return e.hasAlert.value()&&e.isUserDeletable()}))?D().then(function(e){e&&this._model.removeSelectedSources()}.bind(this)):i&&i.hasChildren()?I(this._model.removeSelectedSources.bind(this._model)):this._model.removeSelectedSources()}},Fe.prototype.unlinkSelectedLine=function(){var e=this._model,t=e.selection().sources().filter((function(e){return j(e)}));e.unlinkLines(t)},Fe.prototype.copyLineToOtherCharts=function(){var e=this._model,t=e.selection().sources().filter((function(e){return j(e)&&e.isSynchronizable()}));e.copyToOtherCharts(t)},
Fe.prototype.hideSelectedObject=function(){this.hideDataSources(this._model.selection().sources())},Fe.prototype.hideDataSources=function(e){if(e.length){var t=e.map((function(e){return e.properties().visible})),i=e.map((function(){return!1}));this._model.setProperties(t,i,"Hide "+e[0].title())}},Fe.prototype.toggleLockSelectedObject=function(){var e=this._model;e.selection().sources().forEach((function(t){var i=t.properties().frozen.value();e.setProperty(t.properties().frozen,!i,(i?window.t("Unlock"):window.t("Lock"))+" "+t.title())}))},Fe.prototype.showSelectedSourceProperties=function(){var e=this._model.selection().sources()[0];e&&this.showSourceProperties(e)},Fe.prototype.showSourceProperties=function(e){var t=null;e===this._model.mainSeries()&&(t=m.style),this.showChartPropertiesForSource(e,t)},Fe.prototype.openSelectedObjectSource=function(e){var t=this._model.selection().sources()[0];if(t&&t.metaInfo){var r=t.metaInfo();if(r&&r.scriptIdPart&&r.pine)if(TradingView.bottomWidgetBar)i("nmnj").getPineSourceCode(r.scriptIdPart,r.pine.version).done((function(e){var t=T.parse(e.version),i=e.lastVersionMaj?T.parse(e.lastVersionMaj):new T(0,0),n={scriptSource:e.source,scriptIdPart:r.scriptIdPart,scriptName:e.scriptName,scriptTitle:e.scriptTitle,version:e.version,isOld:!i.isZero()&&i.major()!==t.major()};TradingView.bottomWidgetBar.activateScriptEditorTab(n)}))}},Fe.prototype.setTimeAxisVisible=function(e){this._timeAxisWidget.setVisible(e),this.adjustSize()},Fe.prototype.tags=function(){return this._model?this._model.calculateDefaultTags():[]},Fe.prototype.state=function(e,t,i){var r=this._model.state(e,t,i);return r.chartId=this.id(),r},Fe.prototype.asyncState=function(){return this._model.asyncState()},Fe.prototype.metaInfo=function(){var e=this._metaInfo;return this._model&&(e.systemTags=this._model.calculateDefaultTags()),e},Fe.prototype.onTagsChanged=function(){return this._tagsChanged},Fe.prototype.onModelTagsChanged=function(){this._tagsChanged.fire()},Fe.prototype.onAboutToBeDestroyed=function(){return this._aboutToBeDestroyed},Fe.prototype.destroy=function(){this._aboutToBeDestroyed.fire(),null!==this._removeMaximizeHotkey&&(this._removeMaximizeHotkey(),this._removeMaximizeHotkey=null),0!==this._drawRafId&&this._jqParent.prop("ownerDocument").defaultView.cancelAnimationFrame(this._drawRafId),null!==this._backgroundTopColorSpawn&&this._backgroundTopColorSpawn.destroy(),null!==this._backgroundBottomColorSpawn&&this._backgroundBottomColorSpawn.destroy(),null!==this._timingsMeter&&(this._timingsMeter.stopCollect(),this._timingsMeter=null);for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].destroy();this._paneWidgets.length=0;for(e=0;e<this._paneSeparators.length;e++)this._paneSeparators[e].destroy();for(var t in this._paneSeparators.length=0,this._controlBarNavigation&&(this._controlBarNavigation.destroy(),this._controlBarNavigation=void 0),$(window).off("visibilitychange:chart_"+this._id),$(window).off("keydown:chart_"+this._id),this._jqMainDiv&&this._jqMainDiv.remove(),this._actions){
var i=this._actions[t];i instanceof U&&(i.destroy(),i.binder&&i.binder.destroy())}null!==this._timeAxisWidget&&(this._timeAxisWidget.destroy(),this._timeAxisWidget=null),null!==this._definitionsViewModel&&this._definitionsViewModel.destroy(),this._hotkeys&&(this._hotkeys.destroy(),this._hotkeys=null),this._jqMainDiv[0].removeEventListener("wheel",this._onWheelBound),Ee.prototype.destroy.call(this),this._chartSession.criticalError().unsubscribe(this,this._onChartSessionCriticalError),this._chartSession.isConnected().unsubscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.destroy()},Fe.prototype.title=function(){return window.t("Chart Properties")},Fe.prototype.symbolProperty=function(){return this._model.mainSeries().properties().shortName?this._model.mainSeries().properties().shortName:this._model.mainSeries().properties().symbol},Fe.prototype.loadContent=function(e,t){this.screen.show();this.isMaximizedPane()&&this.toggleMaximizePane();for(var i,r=this._model.model().dataSources(),n=0;n<r.length;n++){var o=r[n];o!==this._model.mainSeries()&&this._model.model().removeSource(o,!0)}this._model.disconnect(),this.activePaneWidget=!1,this._model.mainSeries().purgeSymbolInfo(),e.loading=!0,this._content=e,this._initialLoading=Boolean(t);for(n=0;n<e.panes.length;++n)for(var s=0;s<e.panes[n].sources.length;++s)if(e.panes[n].sources[s].state.symbol){i=e.panes[n].sources[s].state;break}if(!i)throw Error("An error occured while determining main series ion the chart");this._properties.mainSeriesProperties.merge({visible:!0,symbol:i.symbol,timeframe:"",onWidget:this._onWidget,interval:i.interval||"D",style:i.style}),this._init(),oe.interval.setValue(i.interval),this._model.undoHistory().clearStack()},Fe.prototype._contentSeriesProperties=function(){if(this._content)for(var e=this._content.panes.length;e-- >0;)for(var t=this._content.panes[e].sources,i=t.length;i-- >0;)if("MainSeries"===t[i].type)return t[i].state},Fe.prototype.updateUndoRedo=function(){this._model&&(this.actions().undo.update({disabled:this._model.undoHistory().undoStack().isEmpty()}),this.actions().redo.update({disabled:this._model.undoHistory().redoStack().isEmpty()}))},Fe.prototype.createSessionBreaksActions=function(e){var t=new U({label:window.t("Session Breaks"),checkable:!0,statName:"ToggleSessionBreaks"});t.binder=new p(t,this._model.chartModel().sessions().properties().graphics.vertlines.sessBreaks.visible,this.model(),"Session Breaks"),this._actions.sessionBreaks=t},Fe.prototype.updateActionForIntradayOnly=function(e){e&&e instanceof U&&e.update({disabled:this.model().mainSeries().isDWM()})},Fe.prototype.containsVolume=function(){return this.model().dataSources().some((function(e){return e instanceof R&&"Volume"===e.metaInfo().shortId}))},Fe.prototype.containsStudyByPredicate=function(e){return!!this._model&&this._model.dataSources().some((function(t){if(!(t instanceof R))return!1;var i=t.metaInfo();return e(i)}))},Fe.prototype.containsStudy=function(e){return this.containsStudyByPredicate((function(t){return t.id===e||t.fullId===e
}))},Fe.prototype.isSmall=function(){return this._width()<550||this._height()<300},Fe.prototype.onWidget=function(){return this._onWidget},Fe.prototype.onCmeWidget=function(){return"cme"===this.widgetCustomer()},Fe.prototype.widgetCustomer=function(){return this._widgetCustomer},Fe.prototype._width=function(){return this._options.width.value()},Fe.prototype._height=function(){return this._options.height.value()},Fe.prototype.resize=function(){var e={height:this._height()+"px",width:this._width()+"px"};this._jqMainDiv.css(e),this._elMainTable.style.height=e.height,this._elMainTable.style.width=e.width,this._resizeHandler&&this._jqMainDiv&&this._resizeHandler()},Fe.prototype.chartSession=function(){return this._chartSession},Fe.prototype.maxLhsPriceAxisWidth=0,Fe.prototype.maxRhsPriceAxisWidth=0,Fe.prototype.GUIResetScales=function(){ge("GUI","Reset Scales");var e=this.model();e&&e.resetScales()},Fe.prototype.onLineCancelled=function(){q.resetToCursor()},Fe.prototype._startSpinner=function(e){this._spinner||e&&(this._spinner=(new ve).spin(e))},Fe.prototype.isJustClonedChart=function(){return!!(this._options||{}).justCloned},Fe.prototype.setDataWindowWidget=function(e){this._dataWindowWidget=e},Fe.prototype.removeDataWindowWidget=function(){this._dataWindowWidget=null},d.enabled("datasource_copypaste")&&(Fe.prototype.onAppClipboardPaste=function(e){we.logDebug("[[paste]]"),this._model&&this._model.pasteSourceFromClip(e)},Fe.prototype.onAppClipboardCopy=function(e){e||(e=this._model.selection().sources()),e.filter((function(e){return e instanceof R&&e.isChildStudy()})).length?we.logDebug("Can not copy child study"):(we.logDebug("[[copy]]"),this._model&&this._model.copySourcesToClip(e))},Fe.prototype.onAppClipboardCut=function(e){we.logDebug("[[cut]]"),this._model&&this._model.cutSourcesToClip(e||this._model.selection().sources())}),Fe.prototype.applyOverrides=function(e){var t={};for(var i in e)i.startsWith("mainSeriesProperties.priceAxisProperties")||(t[i]=e[i]);applyPropertiesOverrides(this.properties(),null,!1,t,null),this._model&&(applyPropertiesOverrides(this._model.model().properties(),null,!1,t),applyPropertiesOverrides(this._model.mainSeries().properties(),null,!1,t,"mainSeriesProperties"))},Fe.prototype.applyStudiesOverrides=function(e){me.setDefaultsOverrides(e),this._applyStudiesOverrides()},Fe.prototype.setActive=function(e){this._isActive=e,ye()&&(e&&this.selectBarMode().value()?this.startTrackingMode():this.exitTrackingMode()),this._paneWidgets.forEach((function(e){e.update()})),e||this.model().selectionMacro((function(e){e.clearSelection()}))},Fe.prototype.isActive=function(){return this._isActive},Fe.prototype.trackTime=function(){return this._chartWidgetCollection.lock.trackTime},Fe.prototype.crossHairSyncEnabled=function(){return this._chartWidgetCollection.lock.crosshair.value()},Fe.prototype.isMultipleLayout=function(){return Ce(this._chartWidgetCollection.layout.value())},Fe.prototype.selectBarMode=function(){return this._model.model().selectBarMode()},Fe.prototype.toggleSelectBarMode=function(){
this.selectBarMode().value()||(q.resetToCursor(!0),this._model.lineBeingCreated()&&this._model.cancelCreatingLine()),this._model.model().toggleSelectBarMode(),this.selectBarMode().value()&&this.startTrackingMode()},Fe.prototype.onBarSelected=function(){return this._model.model().onBarSelected()},Fe.prototype.trySetChartStyle=function(e){var t=this.model();if(!t)return!1;if(t.mainSeries().properties().style.value()===e)return!0;if(d.enabled("charting_library_base"))return this._setChartStyle(e),!0;var i=t.model();return!i.isInReplay()||i.isSeriesStyleSupported(e)?(this._setChartStyle(e),!0):(k({content:window.t("Bar replay mode is not available for this chart type. Do you want to exit the replay mode?")}).then(function(t){t.on("action:yes",function(){t.close(),this._setChartStyle(e)}.bind(this)),t.open()}.bind(this)),!1)},Fe.prototype._setChartStyle=function(e){var t=this.model(),i=t.mainSeries().properties().style;t.setChartStyleProperty(i,e,"Change Series Style")},Fe.prototype.showReplayOrderConfirmationDialog=function(){return this.model().isInReplay()?new Promise((function(e,t){k({content:window.t("You are in the chart replay mode. An order will be placed in real-time. Do you still want to place the order?")}).then((function(i){i.on("action:yes",(function(){e(),i.close()})),i.on("afterClose",(function(){t()})),i.open()}))})):Promise.resolve()},Fe.prototype._addPerfMark=function(e){Te("ChartWidget."+this._id+"."+e)},Fe.prototype.requestFullscreen=function(){this._options.requestFullscreen()},Fe.prototype.getResizerDetacher=function(){return this._options},e.exports.ChartWidget=Fe,e.exports.trackingModeIsAvailable=Le}).call(this,i("aIyQ"))},"Zp/P":function(e,t,i){"use strict";i.r(t),i.d(t,"extendAndClipLineSegment",(function(){return l})),i.d(t,"getArrowPoints",(function(){return c})),i.d(t,"optimalBarWidth",(function(){return u})),i.d(t,"optimalCandlestickWidth",(function(){return h})),i.d(t,"optimalHiLoWidth",(function(){return d})),i.d(t,"selectionTolerance",(function(){return p})),i.d(t,"coordinateIsValid",(function(){return f})),i.d(t,"setValidLineStyle",(function(){return _}));var r=i("aO4+"),n=i("hBTJ"),o=i("VaSN"),s=i("ogJP"),a=i("jFln");function l(e,t,i,o,s,a){if(Object(r.equalPoints)(e,t))return null;var l=new r.Point(0,0),c=new r.Point(i,o);if(s){if(a){var u=Object(n.intersectLineAndBox)(Object(r.lineThroughPoints)(e,t),Object(r.box)(l,c));return Array.isArray(u)?u:null}var h;return null===(h=Object(n.intersectRayAndBox)(t,e,Object(r.box)(l,c)))||Object(r.equalPoints)(t,h)?null:Object(r.lineSegment)(t,h)}if(a)return null===(h=Object(n.intersectRayAndBox)(e,t,Object(r.box)(l,c)))||Object(r.equalPoints)(e,h)?null:Object(r.lineSegment)(e,h);u=Object(n.intersectLineSegmentAndBox)(Object(r.lineSegment)(e,t),Object(r.box)(l,c));return Array.isArray(u)?u:null}function c(e,t,i,r){var n=.5*i,o=Math.sqrt(2),s=t.subtract(e),a=s.normalized(),l=5*i;r&&(l=Math.min(l,.35*s.length()));var c=1*n;if(l*o*.2<=c)return[]
;var u=a.scaled(l),h=t.subtract(u),d=a.transposed(),p=1*l,f=d.scaled(p),_=h.add(f),m=h.subtract(f),v=_.subtract(t).normalized().scaled(c),g=m.subtract(t).normalized().scaled(c),y=t.add(v),b=t.add(g),S=n*(o-1),w=d.scaled(S),P=Math.min(l-1*n/o,n*o*1),C=a.scaled(P),T=t.subtract(w),x=t.add(w),I=t.subtract(C);return[[_,y],[m,b],[T,I.subtract(w)],[x,I.add(w)]]}function u(e,t){return t=t||1,Math.floor(.3*e*t)}function h(e,t){if(e>=2.5&&e<=4)return Math.floor(3*t);var i=1-.2*Math.atan(Math.max(4,e)-4)/(.5*Math.PI),r=Math.floor(e*i*t),n=Math.floor(e*t),o=Math.min(r,n);return Math.max(Math.floor(t),o)}function d(e){return.4*e}function p(e){return(Object(o.lastEventIsTouch)()?12:2)+.5*e}function f(e){return null!=e&&!Object(s.isNaN)(e)}function _(e,t){void 0!==t&&Object(a.setLineStyle)(e,t)}},Zp8I:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererStepLine",(function(){return c}));var r=i("GEp6"),n=i("VdBB"),o=i("aO4+"),s=i("jFln"),a=i("Y7w9"),l=i("Zp/P"),c=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.hitTest=function(e){if(null===this._data||0===this._data.items.length)return null;for(var t=this._data,i=t.items,s=t.lineWidth,c=Object(l.selectionTolerance)(s),u=Object(a.lowerbound)(i,e,(function(e,t){return e.x<=t.x})),h=Math.max(0,u-1),d=Math.min(i.length-1,u+1),p=h;p<d;p++){var f=i[p],_=i[p+1];if(_){var m=Math.round((f.x+_.x)/2),v=new o.Point(m,f.y),g=new o.Point(m,_.y);if(Math.min(Object(r.distanceToSegment)(f,v,e).distance,Object(r.distanceToSegment)(v,g,e).distance,Object(r.distanceToSegment)(g,_,e).distance)<=c)return new n.HitTestResult(n.HitTestResult.REGULAR)}}return null},e.prototype.draw=function(e,t){var i,r,n,o,a,l,c,u,h,d,p,f;if(null!==this._data&&0!==this._data.items.length){var _=this._data,m=_.lineWidth,v=_.lineStyle,g=_.lineColor,y=_.items,b=t.pixelRatio,S=Math.max(Math.floor(null!==(r=null===(i=y[0].style)||void 0===i?void 0:i.width)&&void 0!==r?r:m*b)),w=S%2?.5:0;e.save(),e.lineCap="butt",void 0!==v&&Object(s.setLineStyle)(e,v),e.beginPath(),e.moveTo(Math.round(y[0].x*b)+w,Math.round(y[0].y*b)+w);var P=y.length;e.strokeStyle=null!==(o=null===(n=y[0].style)||void 0===n?void 0:n.color)&&void 0!==o?o:g,e.lineWidth=S;for(var C=0;C<P;C++){var T=y[C],x=y[C+1],I=Math.round(T.x*b)+w,E=Math.round(T.y*b)+w;if(e.lineTo(I,E),x){var L=Math.round((T.x+x.x)/2*b)+w,O=Math.round(x.y*b)+w;e.lineTo(L,E),e.lineTo(L,O);var A=null!==(l=null===(a=T.style)||void 0===a?void 0:a.color)&&void 0!==l?l:g,M=null!==(u=null===(c=T.style)||void 0===c?void 0:c.width)&&void 0!==u?u:m,k=null!==(d=null===(h=x.style)||void 0===h?void 0:h.color)&&void 0!==d?d:g,D=null!==(f=null===(p=x.style)||void 0===p?void 0:p.width)&&void 0!==f?f:m,R=A!==k,V=M!==D;(R||V)&&(e.stroke(),R&&(e.strokeStyle=k),V&&(w=(S=Math.max(1,Math.floor(D*b)))%2?.5:0,e.lineWidth=S),e.beginPath(),e.moveTo(L,O))}}e.stroke(),e.restore()}},e}()},ZtA1:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Trend-Based Fib Extension");function a(e,t){
this._constructor="LineToolTrendBasedFibExtension";var n=t||a.createProperties();r.call(this,e,n),this.version=a.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("6sSH").TrendBasedFibExtensionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);var s=[this._properties.child("trendline").child("linewidth"),this._properties.child("levelsStyle").child("linewidth")];this._widthsProperty=new o(s)}inherit(a,r),a.version=2,a.LevelsCount=24,a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.pointsCount=function(){return 3},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Trend-Based Fib Extension"},a.prototype.migrateVersion=function(e,t,i){1===e&&this.properties().extendLines.setValue(!0)},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.createProperties=function(e){var t=new n("linetooltrendbasedfibextension",e,!1,{range:[0,8]});return a._configureProperties(t),t},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("17v9").FibDrawingsWith24LevelsDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a._configureProperties=function(e){r._configureProperties(e)},a.prototype.fibLevelsBasedOnLogScale=function(){return this.properties().fibLevelsBasedOnLogScale.value()&&this.priceScale().isLog()},t.LineToolTrendBasedFibExtension=a},"Zy3/":function(e,t,i){"use strict";i.r(t),i.d(t,"CompositeRenderer",(function(){return r}));var r=function(){function e(){this._renderers=[],this._globalAlpha=1}return e.prototype.setGlobalAlpha=function(e){this._globalAlpha=e},e.prototype.append=function(e){this._renderers.push(e)},e.prototype.insert=function(e,t){this._renderers.splice(t,0,e)},e.prototype.clear=function(){this._renderers.length=0},e.prototype.draw=function(e,t){for(var i=0;i<this._renderers.length;i++)e.save(),e.globalAlpha=this._globalAlpha,this._renderers[i].draw(e,t),e.restore()},e.prototype.drawBackground=function(e,t){e.save(),e.globalAlpha=this._globalAlpha;for(var i=0;i<this._renderers.length;i++){var r=this._renderers[i];r.drawBackground&&r.drawBackground(e,t)}e.restore()},e.prototype.hitTest=function(e,t){for(var i=null,r=this._renderers.length-1;r>=0;r--){var n=this._renderers[r].hitTest(e,t);null!==n&&(null===i||n.result()>i.result())&&(i=n)}return i},e.prototype.doesIntersectWithBox=function(e){return this._renderers.some((function(t){return!!t.doesIntersectWithBox&&t.doesIntersectWithBox(e)}))},e}()},a4Nd:function(e,t,i){"use strict";i.r(t);var r=i("Eyy1"),n=i("PfBM"),o=i("hY0g"),s=i.n(o),a=i("txPx"),l=Object(a.getLogger)("PersistentWebsocketTransport");var c=function(){function e(e){var t=this;this._url="",this._socket=null,this._reconnectCount=0,this._onlineCancellationToken=null,this._connectionStatus=new s.a(n.ConnectionStatus.Closed),this._socketCloseHandler=this._onCloseCallback.bind(this),
this._socketErrorHandler=this._onErrorCallback.bind(this),this._socketOpenHandler=this._onOpenCallback.bind(this),this._socketMessageHandler=this._onMessageCallback.bind(this),this._shouldReconnect=!0,this._tryReconnect=function(){t.disconnect();var e=t._getReconnectTimeout();l.logNormal("Sleeping some time before reconnect "+e+"ms"),setTimeout(t._tryReconnectImpl.bind(t),e)},this._onOfflineHandler=function(){t._removeOnOfflineListener(),l.logInfo("Network status changed to offline - trying to reconnect"),t._tryReconnect()},this._messageHandler=e,window.addEventListener("unload",(function(){l.logNormal("Unload event comes - disconnecting without reconnect after that..."),t._shouldReconnect=!1,t.disconnect()}),!1)}return e.prototype.setUrl=function(e){if(this._url!==e){var t=this._connectionStatus.value()!==n.ConnectionStatus.Closed;t&&this.disconnect(),this._url=e,t&&this.connect()}},e.prototype.connect=function(){this._connectionStatus.value()===n.ConnectionStatus.Closed?(this._socket&&(l.logError("Something went wrong - code 0x2"),this.disconnect()),this._onlineCancellationToken&&(this._onlineCancellationToken(),this._onlineCancellationToken=null),l.logNormal("Connecting to "+this._url),this._socket=new WebSocket(this._url),this._socket.addEventListener("error",this._socketErrorHandler),this._socket.addEventListener("close",this._socketCloseHandler),this._socket.addEventListener("open",this._socketOpenHandler),this._socket.addEventListener("message",this._socketMessageHandler),this._setOnOfflineListener(),this._connectionStatus.setValue(n.ConnectionStatus.Connecting)):l.logNormal("Attempt to open connection but it is not closed")},e.prototype.connectionStatus=function(){return this._connectionStatus.readonly()},e.prototype.disconnect=function(){if(this._connectionStatus.value()!==n.ConnectionStatus.Closed)if(this._socket){l.logNormal("Closing connection to: "+this._socket.url+", currentStatus: "+n.ConnectionStatus[this._connectionStatus.value()]),this._socket.removeEventListener("error",this._socketErrorHandler),this._socket.removeEventListener("close",this._socketCloseHandler),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();var e=this._socket;this._socket=null,this._connectionStatus.setValue(n.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}else l.logError("Something went wrong - code 0x1");else l.logNormal("Attempt to close connection but it is closed already")},e.prototype.sendMessage=function(e){this._connectionStatus.value()===n.ConnectionStatus.Open?this._socket?this._socket.send(e):l.logError("Something went wrong - code 0x3"):l.logWarn("Attempt to send message but connection is not opened")},e.prototype._onErrorCallback=function(){l.logInfo("Connection is closed by error"),this._tryReconnect()},e.prototype._onCloseCallback=function(e){l.logInfo("Connection is closed - code="+e.code+" msg="+e.reason),this._tryReconnect()},e.prototype._tryReconnectImpl=function(){
var e=this;if(this._shouldReconnect){if(this._reconnectCount+=1,l.logInfo("Reconnecting count: "+this._reconnectCount),navigator.onLine)return l.logInfo("Network status: online - trying to connect"),void this.connect();var t,i;l.logInfo("Network status: offline - wait until online"),this._onlineCancellationToken=(t=function(){l.logInfo("Network status changed to online - trying to connect"),e.connect()},i=function(){window.removeEventListener("online",i),t&&t()},window.addEventListener("online",i),function(){t=null})}else l.logNormal("Skip reconnecting because of shouldReconnect state")},e.prototype._onOpenCallback=function(){l.logNormal("Connection opened"),this._reconnectCount=0,this._connectionStatus.setValue(n.ConnectionStatus.Open)},e.prototype._onMessageCallback=function(e){this._messageHandler(e.data)},e.prototype._getReconnectTimeout=function(){return this._reconnectCount<5?300:5e3},e.prototype._setOnOfflineListener=function(){window.addEventListener("offline",this._onOfflineHandler)},e.prototype._removeOnOfflineListener=function(){window.removeEventListener("offline",this._onOfflineHandler)},e}();i.d(t,"PushStream",(function(){return h}));var u=Object(a.getLogger)("PushStream"),h=function(){function e(e,t){this._channels=[],this._transport=new c(this._onPushStreamMessage.bind(this)),this._settings=t,this._messageHandler=e}return e.prototype.addChannel=function(e){Object(r.assert)(!this.hasChannel(e),"Channel already subscribed"),u.logNormal("Adding channel "+e),this._channels.push(e),this._transport.setUrl(this._generateUrl())},e.prototype.removeChannel=function(e){var t=this._channels.indexOf(e);Object(r.assert)(-1!==t,"There is no that channel"),u.logNormal("Removing channel "+e),this._channels.splice(t,1),this._transport.setUrl(this._generateUrl())},e.prototype.getChannels=function(){return this._channels},e.prototype.hasChannel=function(e){return-1!==this._channels.indexOf(e)},e.prototype.connectionStatus=function(){return this._transport.connectionStatus()},e.prototype.connect=function(){Object(r.assert)(0!==this._channels.length,"There is no channels"),this._transport.connect()},e.prototype.disconnect=function(){this._transport.disconnect()},e.prototype.sendMessage=function(e){this._transport.sendMessage(e)},e.prototype.getLogs=function(e){return Object(a.getRawLogHistory)(e,"PushStream")},e.prototype._onPushStreamMessage=function(e){var t=JSON.parse(e),i=t.id,r=t.channel;-2===i?u.logWarn("Received unexpected message: about removed the channel"):i>0&&(u.logDebug('Received message: id="'+i+'" channel="'+r+'"'),this._messageHandler(t.text,i,r))},e.prototype._generateUrl=function(){var e=this._channels.join("/");return this._settings.url+"/"+this._settings.urlPath+"/"+e},e}()},a7Ha:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"LineEnd",(function(){return r})),function(e){e[e.Normal=0]="Normal",e[e.Arrow=1]="Arrow",e[e.Circle=2]="Circle"}(r||(r={}))},a9Kt:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd"><path stroke="currentColor" d="M13 22.5H5.5a2 2 0 0 1-2-2v-14a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2V14"/><path stroke="currentColor" stroke-linecap="square" d="M18.5 15.5v8m-4-4h8"/><path fill="currentColor" d="M7 8h11v1H7zm0 4h11v1H7zm0 4h5v1H7z"/></g></svg>'},aB9a:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("aO4+"),o=i("VaSN"),s=i("VdBB"),a=i("vq8G"),l=i("f6yo"),c=i("jFln"),u=i("ogJP"),h=i("//lt");function d(){return Object(o.lastEventIsTouch)()?16:8}var p=function(e){function t(t,i,r,n){var o=e.call(this,t,i)||this;return o.data=r,o.square=n,o}return Object(r.__extends)(t,e),t}(n.Point);function f(e,t,i,r){var n=i+r/2;Object(c.drawRoundRect)(e,t.x-n,t.y-n,2*n,2*n,(i+r)/2),e.closePath(),e.lineWidth=r}function _(e,t,i,r){e.globalAlpha=.2,f(e,t,i,r),e.stroke(),e.globalAlpha=1}function m(e,t,i,r){f(e,t,i-r,r),e.fill(),e.stroke()}function v(e,t,i,r){e.globalAlpha=.2,e.beginPath(),e.arc(t.x,t.y,i+r/2,0,2*Math.PI,!0),e.closePath(),e.lineWidth=r,e.stroke(),e.globalAlpha=1}function g(e,t,i,r){e.beginPath(),e.arc(t.x,t.y,i-r/2,0,2*Math.PI,!0),e.closePath(),e.lineWidth=r,e.fill(),e.stroke()}var y=function(){function e(e){this._data=e}return e.prototype.draw=function(e,t){if(this._data.visible){for(var i=[],r=[],n=[],o=[],s=0;s<this._data.points.length;++s){var a=this._data.points[s],l=this._data.backgroundColors[s];a.square?(i.push(a),r.push(l)):(n.push(a),o.push(l))}i.length&&(e.strokeStyle=this._data.color,this._drawPoints(e,t.pixelRatio,i,r,m,_)),n.length&&(e.strokeStyle=this._data.color,this._drawPoints(e,t.pixelRatio,n,o,g,v))}},e.prototype.hitTest=function(e){for(var t=this._data.radius||d(),i=0;i<this._data.points.length;++i){var r=this._data.points[i];if(r.subtract(e).length()<=t+2){var n=void 0!==this._data.pointsCursorType?this._data.pointsCursorType[i]:h.PaneCursorType.Default;return new s.HitTestResult(this._data.hittestResult,{pointIndex:r.data,cursorType:n})}}return null},e.prototype.doesIntersectWithBox=function(e){return this._data.points.some((function(t){return Object(l.pointInBox)(t,e)}))},e.prototype._drawPoints=function(e,t,i,r,n,o){var s=this._data.currentPoint,a=this._data.radius||d(),l=Math.max(1,Math.floor((this._data.strokeWidth||2)*t));this._data.selected&&(l+=Math.max(1,Math.floor(t/2)));var c=Math.max(1,Math.floor(t)),h=Math.round(a*t*2);h%2!=c%2&&(h+=1);for(var f=c%2/2,_=0;_<i.length;++_){var m=i[_];if(e.fillStyle=r[_],!(Object(u.isInteger)(m.data)&&this._data.linePointBeingEdited===m.data))if(n(e,new p(Math.round(m.x*t)+f,Math.round(m.y*t)+f,m.data,m.square),h/2,l),m.subtract(s).length()<=a+2){var v=Math.max(1,Math.floor(this._data.selectedStrokeWidth*t)),g=Math.round(a*t*2);g%2!=c%2&&(g+=1),o(e,new p(Math.round(m.x*t)+f,Math.round(m.y*t)+f,m.data,m.square),g/2,v)}}},e}(),b=i("Eyy1");function S(e,t){var i=t.x-e.x,r=t.y-e.y,n=Math.abs(Math.atan2(i,r));return n>Math.PI/4&&n<3*Math.PI/4?h.PaneCursorType.VerticalResize:h.PaneCursorType.HorizontalResize}
i.d(t,"thirdPointCursorType",(function(){return S})),i.d(t,"LineSourcePaneView",(function(){return w}));var w=function(){function e(e,t){this._invalidated=!0,this._points=[],this._floatPoints=[],this._middlePoint=null,this._source=e,this._model=t}return e.prototype.priceToCoordinate=function(e){var t=this._source.priceScale();if(null===t)return null;var i=this._source.ownerSource(),r=null!==i?i.firstValue():null;return null===r?null:t.priceToCoordinate(e,r)},e.prototype.currentPoint=function(){var e=this._model.crossHairSource();return new n.Point(e.originX(),e.originY())},e.prototype.anchorColor=function(){return"#1E88E5"},e.prototype.isHoveredSource=function(){return this._source===this._model.hoveredSource()},e.prototype.isSelectedSource=function(){return this._model.selection().isSelected(this._source)},e.prototype.isBeingEdited=function(){return this._model.lineBeingEdited()===this._source},e.prototype.isEditMode=function(){return!this._model.isSnapshot()},e.prototype.areAnchorsVisible=function(){return(this.isHoveredSource()&&!this.isLocked()||this.isSelectedSource())&&this.isEditMode()},e.prototype.update=function(){this._invalidated=!0},e.prototype.isLocked=function(){return Boolean(this._source.isLocked&&this._source.isLocked())},e.prototype.addAnchors=function(e){var t=this._points;this._model.lineBeingCreated()===this._source&&(t=t.slice(0,-1)),e.append(this.createLineAnchor({points:t}))},e.prototype.createLineAnchor=function(e){if(this.isLocked())return new a.SelectionRenderer({bgColors:this._lineAnchorColors(e.points),points:e.points,visible:this.areAnchorsVisible(),hittestResult:s.HitTestResult.REGULAR,barSpacing:this._model.timeScale().barSpacing()});var t=Object(o.lastEventIsTouch)();return new y(Object(r.__assign)(Object(r.__assign)({},e),{color:this.anchorColor(),backgroundColors:this._lineAnchorColors(e.points),currentPoint:this.currentPoint(),linePointBeingEdited:this.isBeingEdited()?this._model.linePointBeingEdited():null,hittestResult:s.HitTestResult.CHANGEPOINT,radius:t?13:6,strokeWidth:t?2:1,selected:this.isSelectedSource(),selectedStrokeWidth:t?0:3,visible:this.areAnchorsVisible()}))},e.prototype._lineAnchorColors=function(e){var t=this,i=Object(b.ensureNotNull)(this._model.paneForSource(this._source)).height();return e.map((function(e){return t._model.backgroundColorAtYPercentFromTop(e.y/i)}))},e.prototype._updateImpl=function(){if(this._points=[],this._floatPoints=[],!this._model.timeScale().isEmpty()&&this._validatePriceScale()){for(var e=this._source.points(),t=0;t<e.length;t++){var i=e[t],r=this._source.pointToScreenPoint(i);if(!r)return;var n=r[0];n.data=t;var o=r[1];o.data=t,this._floatPoints.push(n),this._points.push(o)}2===this._points.length&&(this._middlePoint=this._source.calcMiddlePoint(this._points[0],this._points[1])),this._invalidated=!1}},e.prototype._validatePriceScale=function(){var e=this._source.priceScale();return null!==e&&!e.isEmpty()},e.prototype._getSource=function(){return this._source},e.prototype._getPoints=function(){return this._points},
e.prototype._getModel=function(){return this._model},e.prototype._height=function(){var e=this._source.priceScale();return null!==e?e.height():0},e.prototype._width=function(){return this._model.timeScale().width()},e}()},aBGL:function(e,t,i){"use strict";i.r(t),i.d(t,"AvailableOnTVPopup",(function(){return s}));i("YFKU"),i("HbRj");var r=i("brCa"),n=i("eYFQ"),o=$.t("This symbol is only available on {0}TradingView{1}."),s=function(){function e(e){this._lastResolvedSymbol=null,this._chart=e,this._chart.withModel(this,this._connectToModel)}return e.prototype.show=function(){var e=this,t=this._getSymbol(),i=this._chart.defaultSymbol(),s=t.split(":"),a=s[0],l=s[1],c="https://www.tradingview.com{0}?utm_source=www.tradingview.com&utm_medium=widget&utm_campaign=chart&utm_term={2}:{1}".format(Object(n.getSymbolPagePath)({proName:this._getProSymbol()}),l,a);Object(r.createNoticeDialog)({content:o.format('<a target="_blank" href="'+c+'">',"</a>")}).then((function(r){r.on("destroy",(function(){var r;r=e._lastResolvedSymbol?e._lastResolvedSymbol:i!==t?i:"AAPL",e._chart.setSymbol(r)})),r.open()}))},e.prototype._getProSymbol=function(){return this._chart.model().mainSeries().proSymbol()},e.prototype._getSymbol=function(){return this._chart.model().mainSeries().actualSymbol()},e.prototype._connectToModel=function(){var e=this._chart.model().mainSeries();e.dataEvents().symbolResolved().subscribe(this,this._onSymbolResolved),e.dataEvents().symbolGroupNotPermitted().subscribe(this,this._onSymbolGroupNotPermitted),e.dataEvents().symbolNotPermitted().subscribe(this,this.show)},e.prototype._onSymbolResolved=function(){this._lastResolvedSymbol=this._getSymbol()},e.prototype._onSymbolGroupNotPermitted=function(){this.show()},e}()},aDyP:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("7KDR").Action,s=i("rCHB").LineToolPitchforkStyle,a=null,l=i("ytGH").LineToolWidthsProperty,c=window.t("Pitchfork");function u(e,t){this._constructor="LineToolPitchfork";var i=t||u.createProperties();r.call(this,e,i),this._properties.style.listeners().subscribe(this,u.prototype._recreatePaneView),this._recreatePaneView();for(var n=[this._properties.child("median").child("linewidth")],o=0;o<=u.LevelsCount;o++)n.push(this._properties.child("level"+o).child("linewidth"));this._widthsProperty=new l(n)}inherit(u,r),u.LevelsCount=8,u.prototype.levelsCount=function(){return u.LevelsCount},u.prototype.additionalActions=function(){for(var e=[],t=["Original","Modified Schiff","Inside","Schiff"],i=0;i<4;i++){var r=new o({checked:this.properties().style.value()===i,checkable:!0,label:window.t(t[i]),payload:{target:this,value:i},onExecute:function(e){var t=e.getPayload(),i=t.target,r=t.value;i.properties().style.setValue(r),i.updateAllViews(),i._model.updateSource(i)}});e.push(r)}return[e[0],e[3],e[1],e[2]]},u.prototype._recreatePaneView=function(){if(null!==a){var e=[]
;this._properties.style.value()===s.Original?e=[new a.PitchforkLinePaneView(this,this._model)]:this._properties.style.value()===s.Schiff?e=[new a.SchiffPitchforkLinePaneView(this,this._model)]:this._properties.style.value()===s.Schiff2?e=[new a.SchiffPitchfork2LinePaneView(this,this._model)]:this._properties.style.value()===s.Inside&&(e=[new a.InsidePitchforkLinePaneView(this,this._model)]),this._setPaneViews(e)}else Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){null===a&&(a=i("cT+B")),this._recreatePaneView()}.bind(this).bind(null,i)).catch(i.oe)},u.prototype.pointsCount=function(){return 3},u.prototype.translatedType=function(){return c},u.prototype.name=function(){return"Pitchfork"},u.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},u.createProperties=function(e){var t=new n("linetoolpitchfork",e,!1,{range:[0,8]});return u._configureProperties(t),t},u.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("HCdA").PitchForkDefinitionsViewModel}.bind(null,i)).catch(i.oe)},u._configureProperties=function(e){r._configureProperties(e)},t.LineToolPitchfork=u},aILO:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Head and Shoulders");function s(e,t){this._constructor="LineToolHeadAndShoulders";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Fx2Q").LineToolHeadAndShouldersPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 7},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Head and Shoulders"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("EFc4").Points5PatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolheadandshoulders",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolHeadAndShoulders=s},aIha:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolFlagMark",(function(){return c}));var r=i("mrSG"),n=i("aO4+"),o=i("YFKU"),s=i("Ss5c"),a=i("Ocx9"),l=Object(o.t)("Flag Mark"),c=function(e){function t(r,o){var s=this,a=o||t.createProperties();return(s=e.call(this,r,a)||this)._constructor="LineToolFlagMark",Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=new(0,i("y/56").FlagMarkPaneView)(s,s.model());t.setAnchors(new n.Point(0,0)),s._setPaneViews([t])}.bind(null,i)).catch(void 0),s}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 1},t.prototype.translatedType=function(){return l},t.prototype.name=function(){return"Flag Mark"},t.prototype.properties=function(){
return e.prototype.properties.call(this)},t.createProperties=function(e){e&&void 0===e.flagColor&&(e.flagColor="#318757");var i=new a.DefaultProperty("linetoolflagmark",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"w/mY")).then((function(e){return e.FlagMarkDefinitionsViewModel}))},t.version=2,t}(s.LineDataSource)},aIyQ:function(e,t,i){"use strict";(function(e){var t=i("txPx").getLogger("Common.Delegate");function r(){this._listeners=[]}function n(e){return!e.singleshot}r.prototype.subscribe=function(e,t,i){var r={object:e,member:t,singleshot:!!i};this._listeners.push(r)},r.prototype.unsubscribe=function(e,t){for(var i=0;i<this._listeners.length;++i){var r=this._listeners[i];if(r.object===e&&r.member===t){this._listeners.splice(i,1);break}}},r.prototype.unsubscribeAll=function(e){for(var t=this._listeners.length-1;t>=0;--t){this._listeners[t].object===e&&this._listeners.splice(t,1)}},r.prototype.destroy=function(){delete this._listeners},r.prototype.fire=function(){var e=this._listeners;this._listeners=this._listeners.filter(n);for(var i=e.length,r=0;r<i;++r){var o=e[r];try{o.member.apply(o.object||null,arguments)}catch(s){t.logError(s.stack||s.message)}}},"undefined"!=typeof window&&(window.Delegate=r),e&&e.exports&&(e.exports=r)}).call(this,i("YuTi")(e))},aKms:function(e,t,i){"use strict";i.r(t),i.d(t,"MarketStatusModel",(function(){return s}));var r=i("hY0g"),n=i.n(r),o=i("x2L+"),s=function(){function e(e,t){var i=this;this._marketStatus=new n.a(null),this._lastMarketStatus=null,o.b.subscribe(this,(function(){return i._update()})),this._quotesProvider=e,this._quotesProvider.quotesUpdate().subscribe(this,this._update.bind(this)),this._resetSubscription=t,this._resetSubscription.subscribe(this,this._resetStatus)}return e.prototype.destroy=function(){o.b.unsubscribeAll(this),this._quotesProvider.quotesUpdate().unsubscribeAll(this),this._resetSubscription.unsubscribeAll(this)},e.prototype.status=function(){return this._marketStatus},e.prototype._resetStatus=function(){this._marketStatus.setValue(null)},e.prototype._update=function(e){void 0===e&&(e={}),void 0!==e.values&&(this._lastMarketStatus=e.values.current_session),"market"!==this._lastMarketStatus||o.b.value()?this._marketStatus.setValue(this._lastMarketStatus):this._resetStatus()},e}()},"aO4+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.addScaled=function(t,i){return new e(this.x+i*t.x,this.y+i*t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.scaled=function(t){return new e(this.x*t,this.y*t)},e.prototype.normalized=function(){
return this.scaled(1/this.length())},e.prototype.transposed=function(){return new e(-this.y,this.x)},e.prototype.clone=function(){return new e(this.x,this.y)},e}();function n(e,t){return new r(e,t)}function o(e,t){return e.x===t.x&&e.y===t.y}function s(e,t,i){if(0===e&&0===t)throw new Error("A and B can not be both equal to zero.");return{A:e,B:t,C:i}}function a(e,t){return{edge:e,isPositive:t}}t.Point=r,t.point=n,t.equalPoints=o,t.line=s,t.lineThroughPoints=function(e,t){if(o(e,t))throw new Error("Points should be distinct");return s(e.y-t.y,t.x-e.x,e.x*t.y-t.x*e.y)},t.lineSegment=function(e,t){if(o(e,t))throw new Error("Points of a segment should be distinct");return[e,t]},t.halfplane=a,t.halfplaneThroughPoint=function(e,t){return a(e,e.A*t.x+e.B*t.y+e.C>0)},t.box=function(e,t){return{min:n(Math.min(e.x,t.x),Math.min(e.y,t.y)),max:n(Math.max(e.x,t.x),Math.max(e.y,t.y))}},t.equalBoxes=function(e,t){return o(e.min,t.min)&&o(e.max,t.max)}},akof:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererCircleShape",(function(){return a}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=2*Math.PI,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShapeUsingCSSPixels=function(e,t){var i=Math.max(t.width,t.height)/2,r=t.x,n=t.vertOffset,o=t.y+n;e.moveTo(r+i,o),e.arc(r,o,i,0,s,!1)},t.prototype._calcBoundingBox=function(t){var i=Math.max(t.width,t.height)/2,r=t.x,n=t.vertOffset,s=t.y+n,a=r-i,l=r+i,c=s-i,u=s+i,h=new o.Point(a,c),d=new o.Point(l,u),p=Object(o.box)(h,d),f=e.prototype._calcBoundingBox.call(this,t);return f&&(p=this._unionBox(p,f)),p},t}(n.a)},b1GK:function(e,t,i){"use strict";function r(){}i.r(t),i.d(t,"addPerfMark",(function(){return s}));var n=console.timeStamp?console.timeStamp.bind(console):r,o=window.performance&&performance.mark?performance.mark.bind(performance):r;function s(e){n(e),o(e)}},b5Gw:function(e,t,i){"use strict";i.r(t),i.d(t,"makeCancelable",(function(){return n})),i.d(t,"isCancelled",(function(){return o}));var r=function(){return function(){}}();function n(e){var t=!1;return{promise:new Promise((function(i,n){e.then((function(e){return t?n(new r):i(e)})),e.catch((function(e){return n(t?new r:e)}))})),cancel:function(){t=!0}}}function o(e){return e instanceof r}},bGI9:function(e,t,i){"use strict";i.r(t),i.d(t,"StudyTrackPricePaneView",(function(){return s}));var r=i("mrSG"),n=i("2ijp"),o=i("8Uy/"),s=function(e){function t(t,i){var r=e.call(this)||this;return r._lineRendererData.linestyle=o.LINESTYLE_DOTTED,r._study=t,r._plotName=i,r}return Object(r.__extends)(t,e),t.prototype._updateImpl=function(){this._lineRendererData.visible=!1;var e=this._study.properties().styles[this._plotName];if(e.trackPrice.value()){var t=this._study.lastValueData(this._plotName,!0);t.noData||(this._lineRendererData.visible=!0,this._lineRendererData.y=t.coordinate,this._lineRendererData.color=t.color,this._lineRendererData.linewidth=e.linewidth.value())}},t}(n.a)},bIzq:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M23 14.5a9.5 9.5 0 1 1-19 0 9.5 9.5 0 0 1 19 0zm1 0a10.5 10.5 0 1 1-21 0 10.5 10.5 0 0 1 21 0zM11.3 9.6l-.8-.6v11l.8-.6 6-4.5.53-.4-.53-.4-6-4.5zm4.87 4.9L11.5 18v-7l4.67 3.5z"/></svg>'},bJYc:function(e,t,i){"use strict";i.r(t),i.d(t,"SetPropertyUndoCommand",(function(){return s}));var r=i("mrSG"),n=i("RDU5"),o=i("Ocx9"),s=function(e){function t(t,i,r,n,o){var s=e.call(this,r)||this;return s._targetObj=t,s._newValue=i,s._oldValue=s._targetObj.value(),s._model=n,o&&s.setCustomFlag("doesnt_affect_save",!0),s}return Object(r.__extends)(t,e),t.prototype.redo=function(){Object(o.saveDefaultProperties)(!0),this._targetObj.setValue(this._newValue),Object(o.saveDefaultProperties)(!1),this._model.recalculateAllPanes(),this._model.lightUpdate()},t.prototype.undo=function(){Object(o.saveDefaultProperties)(!0),this._targetObj.setValue(this._oldValue),Object(o.saveDefaultProperties)(!1),this._model.recalculateAllPanes(),this._model.lightUpdate()},t}(n.UndoCommand)},bKFv:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"StatsPosition",(function(){return r})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(r||(r={}))},bKsZ:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"ProductFeatures",(function(){return r})),function(e){e.DISABLE_ON_TRIAL="disable_on_trial",e.CUSTOM_INTERVALS="CUSTOM_INTERVALS",e.CHART_STORAGE="CHART_STORAGE",e.MULTIPLE_CHARTS="MULTIPLE_CHARTS",e.MULTIPLE_WATCHLISTS="MULTIPLE_WATCHLISTS",e.IMPORT_WATCHLISTS="IMPORT_WATCHLISTS",e.EXPORT_WATCHLISTS="EXPORT_WATCHLISTS",e.INDICATORS_ON_CHART="INDICATORS_ON_CHART",e.STUDY_ON_STUDY="STUDY_ON_STUDY",e.TICK_BY_TICK_PUSH_DATA="TICK_BY_TICK_PUSH_DATA",e.SERVER_SIDE_ALERTS="SERVER_SIDE_ALERTS",e.ALERTS_TRUE_SMS="ALERTS_TRUE_SMS",e.PUBLISH_INVITE_ONLY_SCRIPTS="PUBLISH_INVITE_ONLY_SCRIPTS",e.SCREENER_ALERTS="SCREENER_ALERTS",e.SCREENER_AUTO_REFRESH="SCREENER_AUTO_REFRESH",e.SCREENER_EXPORT_DATA="SCREENER_EXPORT_DATA",e.SCREENER_INTERVALS="SCREENER_INTERVALS",e.SCREENER_REALTIME_IDC="SCREENER_REALTIME_IDC",e.SIMULTANEOUS_CONNECTIONS="SIMULTANEOUS_CONNECTIONS",e.STUDY_TEMPLATES="STUDY_TEMPLATES",e.CAN_EDIT_PUBLIC_CHATS="CAN_EDIT_PUBLIC_CHATS",e.NO_SPONSORED_ADS="NO_SPONSORED_ADS",e.IDC_AVAILABLE_DELAY="IDC_AVAILABLE_DELAY",e.STATUS="STATUS",e.ALERTS_NO_EXPIRATION="ALERTS_NO_EXPIRATION",e.MULTIFLAGGED_SYMBOLS_LISTS="MULTIFLAGGED_SYMBOLS_LISTS",e.BAR_REPLAY_INTRADAY="BAR_REPLAY_INTRADAY",e.TV_VOLUMEBYPRICE="TV_VOLUMEBYPRICE",e.ALERTS_WEBHOOK="ALERTS_WEBHOOK",e.DEEP_FUNDAMENTALS_HISTORY="DEEP_FUNDAMENTALS_HISTORY",e.EXPORT_CHART_DATA="EXPORT_CHART_DATA",e.ALERTS_ON_SECONDS="ALERTS_ON_SECONDS",e.PERMANENT_STREAM_RECORDS="PERMANENT_STREAM_RECORDS"}(r||(r={}))},bMzf:function(e,t,i){"use strict";function r(e,t){void 0===t&&(t=window);for(var i="theme-"+e,r=t.document.documentElement.classList,n=0,o=Array.from(r);n<o.length;n++){var s=o[n];s.startsWith("theme-")&&s!==i&&r.remove(s)}r.add(i)}i.r(t),
i.d(t,"applyTheme",(function(){return r}))},bOGh:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t){var i=e.call(this,t,!1)||this;return i._subcommands=[],i}return Object(r.__extends)(t,e),t.prototype.addCommand=function(e){this._subcommands.push(e)},t.prototype.isEmpty=function(){return 0===this._subcommands.length},t.prototype.redo=function(){for(var e=0;e<this._subcommands.length;e++)this._subcommands[e].redo()},t.prototype.undo=function(){for(var e=this._subcommands.length-1;e>=0;e--)this._subcommands[e].undo()},t.prototype.commands=function(){return this._subcommands},t}(i("RDU5").UndoCommand)},bSeV:function(e,t){},bTqm:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=i("NJRZ").LineTool5PointsPattern,s=window.t("Cypher Pattern");function a(e,t){this._constructor="LineToolCypherPattern";var n=t||a.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("mjK7").CypherPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(a,o),a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Cypher Pattern"},a.createProperties=function(e){var t=new n("linetoolcypherpattern",e);return a._configureProperties(t),t},a._configureProperties=function(e){o._configureProperties(e)},t.LineToolCypherPattern=a},bc0y:function(e,t,i){},biIa:function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesWaterlinePaneView",(function(){return l}));var r=i("mrSG"),n=i("k4w6"),o=i("//lt"),s=i("VdBB"),a=i("8Uy/"),l=function(e){function t(t){var i=e.call(this,t)||this,r={cursorType:o.PaneCursorType.VerticalResize,itemIndex:0};return i._lineRenderer.setHitTest(new s.HitTestResult(s.HitTestResult.CUSTOM_MOVE,r)),i._lineRendererData.visible=!0,i._lineRendererData.linestyle=a.LINESTYLE_SPARSE_DOTTED,i}return Object(r.__extends)(t,e),t.prototype._updateImpl=function(){var e=this._series.properties().baselineStyle,t=Math.abs(100-e.baseLevelPercentage.value());this._lineRendererData.y=Math.round(this._series.priceScale().height()*(t/100)),this._lineRendererData.color=e.baselineColor.value()},t}(n.a)},bkxW:function(e,t,i){"use strict";function r(){var e=document.querySelector("script[nonce]");if(null!==e)return e.getAttribute("nonce")||e.nonce}i.d(t,"a",(function(){return r}))},brCa:function(e,t,i){"use strict";i.r(t),i.d(t,"createNoticeDialog",(function(){return o})),i.d(t,"showNoticeDialog",(function(){return s}));var r=i("mrSG"),n=(i("YFKU"),{width:400,destroyOnClose:!0,title:window.t("Notification"),content:window.t("You are notified"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',actions:[{name:"ok",type:"primary",text:window.t("Ok"),method:"close",key:[13,32]}]});function o(e){return new Promise((function(t){
Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(14),i.e(26),i.e(17),i.e(24),i.e(203),i.e("create-dialog")]).then(function(o){var s=i("YDhE").createDialog;t(s(Object(r.__assign)(Object(r.__assign)({},n),e)))}.bind(null,i)).catch(void 0)}))}function s(e){o(e).then((function(e){return e.open()}))}},"bv/X":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Sine Line");function s(e,t){this._constructor="LineToolSineLine";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("piZW").SineLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Sine Line"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("LX4V").CyclicAndSineLinesPatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolsineline",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolSineLine=s},c2JX:function(e,t,i){"use strict";i.r(t),i.d(t,"renderSpinnerTemplate",(function(){return o})),i.d(t,"Spinner",(function(){return a}));i("SzKR");var r=i("gWrr"),n=i("Owlf");function o(e){return void 0===e&&(e=""),'\n\t\t<div class="tv-spinner" role="progressbar">\n\t\t\t<div class="tv-spinner__spinner-layer">\n\t\t\t\t<div class="tv-spinner__background tv-spinner__width_element"></div>\n\t\t\t\t<div class="tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--left"></div>\x3c!--\n\t\t\t\t--\x3e<div class="tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--right"></div>\n\t\t\t</div>\n\t\t</div>\n\t'}var s=Object(r.parseHtmlElement)(o()),a=function(){function e(e){this._shown=!1,this._el=s.cloneNode(!0),this.setSize(e||n.a)}return e.prototype.spin=function(e){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=e,void 0!==e&&e.appendChild(this._el)),this._shown=!0,this},e.prototype.stop=function(e){return e&&void 0!==this._container&&this._container.removeChild(this._el),this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},e.prototype.setStyle=function(e){var t=this;return Object.keys(e).forEach((function(i){var r=e[i];void 0!==r&&t._el.style.setProperty(i,r)})),this},e.prototype.setSize=function(e){var t=void 0!==e?"tv-spinner--size_"+e:"";return this._el.className="tv-spinner "+t+" "+(this._shown?"tv-spinner--shown":""),this},e.prototype.getEl=function(){return this._el},e.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},e}()},c44N:function(e,t,i){"use strict";function r(e,t){return e.pixelRatio===t.pixelRatio}i.r(t),i.d(t,"areEqualPaneRenderParams",(function(){return r}))},
c5ry:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("Eyy1");i("YFKU");function n(e){switch(e){case"FQ":return window.t("Quarterly");case"FY":return window.t("Annual");case"TTM":return window.t("TTM")}Object(r.ensureNever)(e)}},cBZt:function(e,t,i){"use strict";function r(e,t){return e+"@"+t}function n(e){return e.replace(/(@[^-]+-[^-]+).*$/,"$1")}i.r(t),i.d(t,"studyIdString",(function(){return r})),i.d(t,"extractStudyId",(function(){return n}))},cKqi:function(e,t,i){"use strict";(function(e){var r=i("aO4+").Point,n=i("qJq3").Series,o=i("GVHu").Study,s=i("k9/m").PlotRowSearchMode,a=i("FBsw").OverlayPriceAxisView,l=i("KtbP").PanePriceAxisView,c=i("x0JF"),u=c.SeriesAreaPaneView,h=c.SeriesLinePaneView,d=c.SeriesHollowCandlesPaneView,p=c.SeriesCandlesPaneView,f=c.SeriesBarsPaneView,_=c.SeriesBaselinePaneView,m=i("biIa").SeriesWaterlinePaneView,v=i("i3nr").OverlayStatusView,g=i("JjUe").OverlayDataWindowView,y=i("z8/4").OverlayLegendView,b=i("38az").SeriesBarColorer,S=i("l4sv").HorizontalLineRenderer,w=i("Kxc7"),P=i("6sst").OverlayStudyPriceLineAxisView,C=i("Qb4w").PriceRange,T=i("XPit").barFunction,x=i("XPit").seriesPlotFunctionMap,I=i("k9/m").PlotList,E=i("n5al").createSeriesFormatter,L=i("n5al").seriesCurrency,O=i("n5al").extractSymbolNameFromSymbolInfo,A=i("wOSo").QuotesProvider,M=i("qFKp").CheckMobile.any()&&!0,k=!w.enabled("hide_study_overlay_legend_item"),D=w.enabled("uppercase_instrument_names"),R=i("txPx").getLogger("Chart.StudyOverlay"),V=w.enabled("study_overlay_compare_legend_option");function B(e,t){this._source=e,this._model=t,this._points=[new r(0,0)],this._lineRenderer=new S}function N(e,t){return null==e[t]}function F(t,i,r,n){this._waterlineView=null,i.hasChild("currencyId")||i.addChild("currencyId",new e(null)),o.call(this,t,i,r,n),this.m_data=new I(x(),N),this._formatter=null,this._paneView=null;var s=this;this.properties().minTick.listeners().subscribe(null,(function(){s._recreatePriceFormattingDependencies(),s.updateAllViews(),s._model.fullUpdate()})),this.properties().style.listeners().subscribe(this,this._updateBarFunction),this.properties().lineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().areaStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().baselineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().currencyId.subscribe(this,this._onCurrencyChanged),this._updateBarFunction(),this._quotesProvider=new A,M&&this._quotesProvider.quotesUpdate().subscribe(this,this._onQuotesUpdate)}B.prototype.update=function(){if(this._visible=!1,this._source.properties().showPriceLine.value()){var e=this._source.lastValueData(void 0,!0);e.noData||(this._visible=!0,this._points=[new r(0,e.coordinate)],this._color=e.color)}},B.prototype.renderer=function(){var e={};return e.width=this._model.timeScale().width(),e.height=this._source.priceScale().height(),e.y=this._points[0].y,e.color=this._color,e.linewidth=1,e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,
this._lineRenderer.setData(e),this._lineRenderer},inherit(F,o),F.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},F.prototype.symbol=function(){var e,t=this.properties().inputs.symbol.value(),i=this.symbolInfo();return e=i?i.name:t,D?e.toUpperCase():e},F.prototype.currency=function(){return this._properties.currencyId.value()||null},F.prototype.setCurrency=function(e){this._properties.currencyId.setValue(e)},F.prototype.symbolSource=function(){return this},F.prototype.lastValueData=function(e,t,i){var r={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return r;var o=this._model.timeScale().visibleBarsStrictRange();if(null===o)return r;if(!this.properties().visible.value())return r;var a=this.nearestIndex(o.lastBar(),s.NearestLeft,TradingView.OPEN_PLOT);if(null==a)return r;var l=this._lastNonEmptyPlotRow(TradingView.CLOSE_PLOT),c=null!==l&&o.contains(l.index),u=null!==l?l.value:null,h=t||c?u:this.data().valueAt(a);if(null===h)return r;var d=this._barFunction(h);if(!isNumber(d))return r;var p={noData:!1};i&&(p.price=d);var f=this.firstValue();if(!isNumber(f))return r;p.text=this.priceScale().formatPrice(d,f),p.text=this.priceScale().formatPrice(d,f),p.formattedPriceAbsolute=this.priceScale().formatPriceAbsolute(d),p.formattedPricePercentage=this.priceScale().formatPricePercentage(d,f),p.floatCoordinate=this.priceScale().priceToCoordinate(d,f),p.coordinate=p.floatCoordinate,p.item=h;var _=this.properties();switch(_.style.value()){case n.STYLE_BARS:p.color=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?_.barStyle.upColor.value():_.barStyle.downColor.value();break;case n.STYLE_CANDLES:case n.STYLE_HOLLOW_CANDLES:p.color=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?_.candleStyle.upColor.value():_.candleStyle.downColor.value();break;case n.STYLE_LINE:p.color=_.lineStyle.color.value();break;case n.STYLE_AREA:p.color=_.areaStyle.color1.value();break;case n.STYLE_BASELINE:var m=_.baselineStyle,v=this.priceScale(),g=Math.round(v.height()*(Math.abs(100-m.baseLevelPercentage.value())/100));p.color=p.coordinate<g?_.baselineStyle.topLineColor.value():_.baselineStyle.bottomLineColor.value()}return p},F.prototype.firstValue=function(){var e=this._model.timeScale().visibleBarsStrictRange();if(null===e)return null;var t=e.firstBar();if(0===this.data().size())return null;var i=this.data().search(t,s.NearestRight,TradingView.OPEN_PLOT);return null!==i?this._barFunction(i.value):null},F.prototype.barFunction=function(){return this._barFunction},F.prototype._updateBarFunction=function(){var e=this.priceSource()||"close";this._barFunction=T(e)},F.prototype.priceSource=function(){switch(this._properties.style.value()){case n.STYLE_LINE:return this._properties.lineStyle.priceSource.value();case n.STYLE_AREA:return this._properties.areaStyle.priceSource.value();case n.STYLE_BASELINE:return this._properties.baselineStyle.priceSource.value()}return null},
F.prototype.priceRange=function(e,t){if(TradingView.isInteger(e)){if(TradingView.isInteger(t)){if(0===this.m_data.size())return null;var i,r=this.priceSource(),n=null!==(i=null!==r?this.m_data.minMaxOnRangeCached(e,t,[{name:r,offset:0}]):this.m_data.minMaxOnRangeCached(e,t,[{name:"low",offset:0},{name:"high",offset:0}]))?new C(i.min,i.max):null;return this._postProcessPriceRange(n)}R.logDebug("priceRange: incorrect endBar")}else R.logDebug("priceRange: incorrect startBar")},F.prototype.createViews=function(){this._priceAxisViews=[];var e=new a(this);this._priceAxisViewsBase=[e];var t=new P(this);this._priceLinesAxisViews=[t],this._paneViews=[],this._labelPaneViews=[];var i=null;switch(this._properties.style.value()){case n.STYLE_BARS:i=new f(this,this._model);break;case n.STYLE_CANDLES:i=new p(this,this._model);break;case n.STYLE_HOLLOW_CANDLES:i=new d(this,this._model);break;case n.STYLE_LINE:i=new h(this,this._model);break;case n.STYLE_AREA:i=new u(this,this._model);break;case n.STYLE_BASELINE:i=new _(this,this._model),this._waterlineView=new m(this)}i&&this._paneViews.push(i),null!==this._waterlineView&&this._paneViews.push(this._waterlineView),this._paneViews.push(new B(this,this._model)),this._dataWindowView||(this._dataWindowView=new g(this,this._model)),this._legendView||(this._legendView=new y(this,this._model)),this._statusView||(this._statusView=new v(this,this._model.properties().scalesProperties.textColor)),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews),this._labelPaneViews.push(new l(e,this,this._model))},F.prototype.barColorer=function(){return new b(this)},F.prototype.start=function(e){this._formatter=null,o.prototype.start.apply(this,arguments),this.priceScale()&&this.priceScale().updateFormatter(),M&&this._setQuotesSymbol(this.symbol())},F.prototype._tryCreateFormatter=function(){return E(this.symbolInfo(),this.properties().minTick.value())},F.prototype.formatter=function(){return this._formatter||this._recreateFormatter(),this._formatter},F.prototype._tryChangeInputs=function(){o.prototype._tryChangeInputs.call(this),this.m_formatter=null,this.priceScale().updateFormatter()},F.prototype.title=function(e,t,i,r){var n=this._titleInParts(e,t,i,r).join(", ");return D?n.toUpperCase():n},F.prototype.titleInParts=function(e,t,i,r){var n=this._titleInParts(e,t,i,r).join(", ");return[D?n.toUpperCase():n]},F.prototype._titleInParts=function(e,t,i,r){var n=this.properties().inputs.symbol.value(),o=this.symbolInfo(),s=[];if(o){if(V){var a=this._model.mainSeries().properties().statusViewStyle.symbolTextSource.value();s.push("description"===a?o.description:o.name)}else s.push(o.name);!r&&o.exchange&&0!==o.exchange.length&&s.push([o.exchange])}else s.push(n);return s},F.prototype.bars=function(){return this.m_data},F.prototype.open=function(e){return this.bars().valueAt(e)[TradingView.OPEN_PLOT]},F.prototype.high=function(e){return this.bars().valueAt(e)[TradingView.HIGH_PLOT]},F.prototype.low=function(e){
return this.bars().valueAt(e)[TradingView.LOW_PLOT]},F.prototype.close=function(e){return this.bars().valueAt(e)[TradingView.CLOSE_PLOT]},F.prototype.hl2=function(e){return(this.high(e)+this.low(e))/2},F.prototype.hlc3=function(e){return(this.high(e)+this.low(e)+this.close(e))/3},F.prototype.ohlc4=function(e){return(this.open(e)+this.high(e)+this.low(e)+this.close(e))/4},F.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var e=this._properties.inputs.symbol.value();return e&&this._resolvedSymbols[this._resolvedSymbolKey(e)]||null},F.prototype.symbolResolved=function(){return this.symbolsResolved()},F.prototype._onSymbolResolved=function(e){o.prototype._onSymbolResolved.call(this,e),M&&this._setQuotesSymbol(e);var t=this.symbolInfo();t&&this.setCurrency(L(t))},F.prototype._setQuotesSymbol=function(e){var t=this.symbolInfo(),i=O(t,e);this._quotesProvider.setQuotesSessionSymbol(i)},F.prototype.stop=function(e){o.prototype.stop.call(this,e),this._quotesProvider.setQuotesSessionSymbol(null)},F.prototype.quotes=function(){return this._quotesProvider.quotes()},F.prototype._onQuotesUpdate=function(e,t){!this._legendView||void 0===t.values.change&&void 0===t.values.change_percent||(this._legendView.update(),this._model.updateSource(this))},F.prototype.destroy=function(){this._quotesProvider.quotesUpdate().unsubscribeAll(this),this._quotesProvider.destroy(),o.prototype.destroy.call(this)},F.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},F.prototype.tags=function(){var e=[],t=this.symbolInfo();return t?e.push(t.name):this._properties.inputs.symbol.value()&&e.push(this._properties.inputs.symbol.value()),e},F.prototype.statusView=function(){return k?o.prototype.statusView.call(this):null},F.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("study-property-pages-with-definitions")]).then(function(e){return i("WUYT").StudyOverlayDefinitionsViewModel}.bind(null,i)).catch(i.oe)},F.prototype.defaultPlotIdForAlert=function(){return""},F.prototype.changeStyles=function(){this.m_data.each((function(e,t){t[TradingView.STYLE_PLOT]=null})),o.prototype.changeStyles.call(this)},F.prototype._onCurrencyChanged=function(){this._currencyChanged.fire()},F.prototype._getSymbolObject=function(e){return o.prototype._getSymbolObject.call(this,e)},F.prototype._resolvedSymbolKey=function(e){var t=this.currency();return e+(null===t?"":"_#_"+t)},t.study_Overlay=F}).call(this,i("tc+8"))},cO0S:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererHistogram",(function(){return l}));var r=i("Eyy1"),n=i("aO4+"),o=i("GEp6"),s=i("Zp/P"),a=i("VdBB"),l=function(){function e(e){this._data=e}return e.prototype.draw=function(e,t){if(0!==this._data.items.length){var i=t.pixelRatio;e.fillStyle=this._data.lineColor;for(var r=Math.max(1,Math.floor(this._data.lineWidth*i)),n=r/2,o=Math.max(1,Math.floor(i)),s=Math.round(this._data.histogramBase*i)-Math.floor(o/2),a=s+o,l=0,c=this._data.items;l<c.length;l++){var u=c[l],h=r,d=n
;u.style?(e.fillStyle=u.style.color,d=(h=Math.max(1,Math.floor(u.style.width*i)))/2):e.fillStyle=this._data.lineColor;var p=h%2?.5:0,f=Math.round(u.x*i)+p,_=Math.round(u.y*i),m=void 0,v=void 0;_<=s?(m=_,v=a):(m=s,v=_-Math.floor(o/2)+o),e.fillRect(Math.floor(f-d),m,h,v-m)}}},e.prototype.hitTest=function(e){for(var t=Object(s.selectionTolerance)(this._data.lineWidth),i=new Map,l=0,c=this._data.items;l<c.length;l++){var u=c[l],h=u.x,d=u.y,p=t;if(u.style&&(i.has(u.style.width)?p=Object(r.ensureDefined)(i.get(u.style.width)):(p=Object(s.selectionTolerance)(this._data.lineWidth),i.set(this._data.lineWidth,p))),Object(o.distanceToSegment)(new n.Point(h,d),new n.Point(h,this._data.histogramBase),new n.Point(e.x,e.y)).distance<=p)return new a.HitTestResult(a.HitTestResult.REGULAR)}return null},e}()},cPgM:function(e,t,i){"use strict";i.r(t),i.d(t,"ScaledPaneRenderer",(function(){return n})),i.d(t,"ScaledPaneRendererWrapper",(function(){return o}));var r=i("mrSG"),n=function(){function e(){}return e.prototype.draw=function(e,t){e.save(),e.scale(t.pixelRatio,t.pixelRatio),e.translate(.5,.5),this._drawImpl(e,Object(r.__assign)(Object(r.__assign)({},t),{pixelRatio:1})),e.restore()},e.prototype.drawBackground=function(e,t){e.save(),e.scale(t.pixelRatio,t.pixelRatio),e.translate(.5,.5),this._drawBackgroundImpl(e,Object(r.__assign)(Object(r.__assign)({},t),{pixelRatio:1})),e.restore()},e.prototype._drawBackgroundImpl=function(e,t){},e}(),o=function(){function e(e){this._base=e}return e.prototype.hitTest=function(e,t){return this._base.hitTest(e,t)},e.prototype.draw=function(e,t){e.save(),e.scale(t.pixelRatio,t.pixelRatio),e.translate(.5,.5),this._base.draw(e,Object(r.__assign)(Object(r.__assign)({},t),{pixelRatio:1})),e.restore()},e.prototype.drawBackground=function(e,t){e.save(),e.scale(t.pixelRatio,t.pixelRatio),e.translate(.5,.5),this._base.drawBackground&&this._base.drawBackground(e,Object(r.__assign)(Object(r.__assign)({},t),{pixelRatio:1})),e.restore()},e}()},cWHH:function(e,t,i){"use strict";(function(t,r,n){
var o=i("Eyy1").ensureNotNull,s=i("aO4+").Point,a=i("eJTA"),l=i("gP14").ChartModelBase,c=a.parseRgb,u=a.rgbToBlackWhiteString,h=i("CW80"),d=h.createLineTool,p=h.createLineToolProperties,f=h.isLineToolName,_=h.isLineTool,m=h.isStudyLineTool,v=i("2+aH").CrossHair,g=i("rY0k").Watermark,y=i("hY3j").Grid,b=i("/jjs").Magnet,S=i("22xp").TimeScale,w=i("qFKp").CheckMobile,P=i("mNbo").isOnMobileAppPage,C=i("LBej"),T=i("ZPGM"),x=i("JUY+").getPriceAlertsDispatcher,I=i("+GxX").isFeatureEnabled,E=i("H0vP").InvalidationMask,L=i("H0vP").InvalidationLevel,O=i("GVHu"),A=O.Study,M=i("Qq0B").NonSeriesStudy,k=i("3ClC"),D=k.createStudy,R=k.isStudy,V=k.isFundamentalStudy,B=O.prepareStudyProperties,N=i("K4L1"),F=i("8sOK").StudyStub,j=i("k9/m").PlotRowSearchMode,W=i("qJq3").Series,H=i("mMWL"),U=i("wZIs").defaults,z=i("Ocx9").DefaultProperty,G=i("Qtjj").TimeSynchronizer,q=i("e3/o"),Y=i("txPx").getLogger("Chart.ChartModel"),X=i("Y5iK").MainSeriesScaleRatioProperty,K=i("FaJS").scaleRatio,J=i("MROS").ModelSelection,Q=i("Y7w9").subtract,Z=i("VgjZ").PriceAxisRendererOptionsProvider,ee=i("KnF9").EnvironmentState,te=i("/YGI").StudyInserter,ie=i("JWMC").trackEvent,re=i("ZZnO").dateFormatProperty,ne=i("/tGj").isSymbolSource,oe=i("gaBL").sourceNewCurrencyOnPinningToPriceScale,se=i("FQhm"),ae=i("jCNj"),le=i("i126").StudyColorRotatorFactory,ce=i("Kxc7"),ue=!ce.enabled("widget")||ce.enabled("esdonwidget"),he=I("lower_legend_collapser");function de(e,i,n,o,s,a,c,u){l.call(this,a,n,u),this._version=de.version,this._studiesMetaInfoRepository=s,this._modelIntervals=[],this._rendererOptionsProvider=new Z(this),this._lastBackgroundColor=void 0,this._lastOriginalColor=void 0,this.setStudiesMetaData(this._studiesMetaInfoRepository.getInternalMetaInfoArray(),this._studiesMetaInfoRepository.getMigrations()),this._lineBeingCreated=null,this._lineBeingEdited=null,this._linePointBeingEdited=null,H.init();var h=this;this._panes=[],this.m_gridSource=new y;var d=this._readOnly?new t(U("chartproperties.paneProperties.crossHairProperties")):this._properties.paneProperties.crossHairProperties;this.m_crossHairSource=new v(this,d,this._options.crossHair),this.m_crossHairSource.selectBarMode().subscribe((function(e){if(e&&h.lineBeingCreated()){var t=H.tool.value();h.cancelCreatingLine(),H.tool.setValue(t)}})),this.m_width=0,this._tagsChanged=new r,this._lineCancelled=new r,this._magnet=new b;var p=new z("chartproperties.mainSeriesProperties");p.addExclusion("minTick"),p.addExclusion("priceAxisProperties.lockScale"),p.addExclusion("priceAxisProperties.percentage"),p.addExclusion("priceAxisProperties.indexedTo100"),p.addExclusion("priceAxisProperties.isInverted"),p.addExclusion("priceAxisProperties.log"),p.addExclusion("priceAxisProperties.logDisabled"),p.addExclusion("priceAxisProperties.percentageDisabled"),p.addExclusion("priceAxisProperties.autoScaleDisabled"),this._chartApi=e,this._invalidateHandler=i,p.merge(n.mainSeriesProperties.state()),this.m_mainSeries=new W(this,p,o),this._timeScale=new S(this,this._options.timeScale),this.createPane(void 0,{
axisProperties:p.priceAxisProperties.state(["autoScale"])});var f=this._panes[0];f.setStretchFactor(2*f.stretchFactor()),f._isMainPane=!0,this._selection=new J,this._selectedSourceChanged=new r,this._properties.listeners().subscribe(this,de.prototype.propertyChangeHandler),this._properties.timezone.listeners().subscribe(null,(function(){h._chartApi&&h._chartApi.connected()&&h._chartApi.switchTimezone(h.timezone())})),this._timeScale.defaultRightOffsetProperty().listeners().subscribe(null,(function(){h.recalculateAllPanes()})),f.addDataSource(this.m_mainSeries,this._panes[0].findSuitableScale(this.m_mainSeries)),this._mainSeriesScaleRatioProperty=new X(this),this.m_mainSeries.dataEvents().completed().subscribe(this,function(){if(this.crossHairSource().update(),this._scrollingState&&this.gotoTime(),ce.enabled("fix_left_edge")&&this.m_mainSeries.endOfData()){var e=this.m_mainSeries.bars().first();null!==e&&this._timeScale.setLeftEdgeFix(e.index)}}.bind(this)),this.m_mainSeries.onIntervalChanged().subscribe(this,(function(){this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1})),this.m_mainSeries.dataEvents().barReceived().subscribe(this,de.prototype.updateTimeScaleBaseIndex),this.m_mainSeries.properties().symbol.listeners().subscribe(this,this.setPriceAutoScaleForAllMainSources),this._readOnly||(p.addChild("priceAxisProperties",this.m_mainSeries.m_priceScale.properties()),this._properties.paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,(function(e){e.value()||h._properties.paneProperties.legendProperties.showStudyArguments.setValue(!1)}))),this._barsMarksSources=c(this);for(var _=0;_<this._barsMarksSources.length;_++)this._barsMarksSources[_].setOwnerSource(this.m_mainSeries);this._syncPointCache={},this._watermarkSource=this._options.watermarkEnabled?new g(this,this.m_mainSeries):null,this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1,H.hideAllDrawings().subscribe(this,this._onDrawingsVisibilityChanged),this._properties.scalesProperties.listeners().subscribe(this,de.prototype.fullUpdate),this._studyInserted=new r,this._chartThemeLoaded=new r,this._resetScales=new r,this._studyShiftColorStartOffset=void 0,this._linePointBeingEdited=null,this._lineBeingEdited=null,this._lineBeingCreated=null,re.subscribe(this,this._updateDateTimeFormatter),this.mainSeries().properties().interval.subscribe(this,this._updateDateTimeFormatter),this._updateDateTimeFormatter(),this._studyColorRotatorFactory=new le(this),ue&&this._options.esdEnabled&&this._createESDWatcher(),this._initAlertsList(),he&&(this._dataSourceCollectionChanged.subscribe(this,this._updateShowLegendProperty.bind(this)),this._properties.paneProperties.legendProperties.showLegend.subscribe(this,this._updateShowLegendProperty))}function pe(){this._selection.clear()}function fe(e){this._selection.remove(e)}function _e(e,t){var i=this._selection.isSelected(e);i&&this._lastHittestData===t||e&&e.customization&&e.customization.disableSelection||(this._lastHittestData=t,i||this._selection.add(e))}inherit(de,l),
de.prototype.applyPreferences=function(e){for(var t in e)void 0!==this._properties[t]&&"m_mainSeries"!==this._properties[t]&&this._properties[t].mergeAndFire(e[t]);void 0!==e.timeScale&&this._timeScale.defaultRightOffsetProperty().setValue(e.timeScale.defaultRightOffset),this._properties.saveDefaults(),this.m_mainSeries.applyPreferences(e.mainSeries),this.sessions().applyPreferences(e.sessions),this.recalculateAllPanes(),this.fullUpdate()},de.prototype.setStudiesMetaData=function(e,t){this._studiesMetaData=e,this._studyVersioning=new N(this._studiesMetaData,t)},de.prototype.isSnapshot=function(){return this._isSnapshot},de.prototype.timezone=function(){return this._properties.timezone.value()},de.prototype.version=function(){return this._version},de.prototype.setVersion=function(e){this._version=e},de.prototype.initConnection=function(){this._chartApi.switchTimezone(this.timezone())},de.prototype.updatePane=function(e){var t=this._paneInvalidationMask(e);this.invalidate(t)},de.prototype.fullUpdate=function(){this.invalidate(E.full())},de.prototype.lightUpdate=function(){this.invalidate(E.light())},de.prototype.studiesMetaData=function(){return this._studiesMetaData},de.prototype.studyVersioning=function(){return this._studyVersioning},de.prototype.disconnect=function(){this.sessions().stop();for(var e,t=this.dataSources(),i=0;i<t.length;i++)(e=t[i]).disconnect&&e.disconnect()},de.prototype.restart=function(){this.initConnection(),this._timeScale.reset(),this.m_mainSeries.restart();for(var e,t=this.dataSources(),i=0;i<t.length;i++)(e=t[i]).restart&&e!==this.m_mainSeries&&e.restart();this.sessions().restart()},de.prototype.startNotStartedStudies=function(){if(!this.m_mainSeries.isStarted())throw new Error("Cannot start studies: main series is not started");for(var e=this.dataSources(),t=0;t<e.length;t++)R(e[t])&&!e[t].isStarted()&&e[t].restart&&e[t]!==this.m_mainSeries&&e[t].restart()},de.prototype.updateLineTools=function(){for(var e=this.dataSources(),t=0;t<e.length;t++)if(_(e[t])){var i=e[t];i.tryCreateServerPoints(),i.checkAlert&&i.checkAlert()}},de.prototype.realignLineTools=function(){for(var e=0;e<this._panes.length;e++)this._panes[e].realignLineTools()},de.prototype.readOnly=function(){return this._readOnly},de.prototype.properties=function(){return this._properties},de.prototype.lineCancelled=function(){return this._lineCancelled},de.prototype.crossHairMoved=function(){return this.m_crossHairSource.moved()},de.prototype.chartApi=function(){return this._chartApi},de.prototype.propertyChangeHandler=function(){this.lightUpdate()},de.prototype._onDrawingsVisibilityChanged=function(e){for(var t=!1===e.value(),i=this.dataSources(),r=0;r<i.length;r++){var n=i[r],o=_(n)&&n.properties().visible.value();t&&o?se.emit("drawing_event",n.id(),"show"):!t&&o&&se.emit("drawing_event",n.id(),"hide")}this.selectionMacro((function(e){e.clearSelection()}))},de.prototype.updateAllPaneViews=function(){for(var e=0;e<this._panes.length;e++){this._panes[e].updateAllViews()}},de.prototype.mainSeries=function(){return this.m_mainSeries},
de.prototype.timeScale=function(){return this._timeScale},de.prototype.gridSource=function(){return this.m_gridSource},de.prototype.watermarkSource=function(){return this._watermarkSource},de.prototype.crossHairSource=function(){return this.m_crossHairSource},de.prototype.publishedChartsTimelineSource=function(){for(var e=0;e<this._barsMarksSources.length;++e)if(this._barsMarksSources[e]instanceof C)return this._barsMarksSources[e];return null},de.prototype.barsMarksSources=function(){return this._barsMarksSources},de.prototype.width=function(){return this.m_width},de.prototype.setPaneHeight=function(e,t){e.setHeight(t),this.recalculateAllPanes(),this.lightUpdate()},de.prototype.setWidth=function(e){this.m_width=e,this._timeScale.setWidth(this.m_width);for(var t=0;t<this._panes.length;++t){this._panes[t].setWidth(e)}this.recalculateAllPanes(),this.recalcVisibleRangeStudy(this.dataSources())},de.prototype.priceScaleSlotsCount=function(){var e=0,t=0;this._panes.forEach((function(i){e=Math.max(i.leftPriceScales().length,e),t=Math.max(i.rightPriceScales().length,t)}));var i=e+t;if(w.any()){var r=this.paneForSource(this.mainSeries()),n=r.priceScalePosition(this.mainSeries().priceScale()),o="right"===n;return"overlay"===n&&(o=r.rightPriceScales().length>0),o?{left:0,right:1,totallySlots:i}:{left:1,right:0,totallySlots:i}}return{left:e,right:t,totallySlots:e+t}},de.prototype.startScalePrice=function(e,t,i){e.startScalePrice(t,i)},de.prototype.scalePriceTo=function(e,t,i){e.scalePriceTo(t,i),this.mainSeries().priceScale().isLockScale()?this.lightUpdate():this.invalidate(this._paneInvalidationMask(e,L.Light)),this._setScalesResetAvailable(!0)},de.prototype.endScalePrice=function(e,t){e.endScalePrice(t),this.invalidate(this._paneInvalidationMask(e,L.Light))},de.prototype.startScrollPrice=function(e,t,i){e.startScrollPrice(t,i)},de.prototype.scrollPriceTo=function(e,t,i){e.scrollPriceTo(t,i),this.invalidate(this._paneInvalidationMask(e,L.Light))},de.prototype.endScrollPrice=function(e,t){e.endScrollPrice(t),this.invalidate(this._paneInvalidationMask(e,L.Light))},de.prototype.setPriceAutoScale=function(e,t,i){e.setPriceAutoScale(t,i),this.invalidate(this._paneInvalidationMask(e,L.Light))},de.prototype.restorePriceScaleState=function(e,t,i){e.restorePriceScaleState(t,i),this.invalidate(this._paneInvalidationMask(e,L.Light))},de.prototype.resetPriceScale=function(e,t){this._setScalesResetAvailable(!1),e.resetPriceScale(t),this.invalidate(this._paneInvalidationMask(e,L.Light))},de.prototype.updateScales=function(e,t){this._undoModel._chartWidget._updateScalesActions()},de.prototype.startScaleTime=function(e){this._timeScale.startScale(e)},de.prototype.mainSeriesScaleRatioProperty=function(){return this._mainSeriesScaleRatioProperty},de.prototype.mainSeriesScaleRatioPropertyOnChanged=function(){this._mainSeriesScaleRatioProperty.listeners().fire(this._mainSeriesScaleRatioProperty)},de.prototype.mainSeriesScaleRatio=function(){return K(this._timeScale,this.m_mainSeries.priceScale())},de.prototype.setMainSeriesScaleRatio=function(e){
this.paneForSource(this.m_mainSeries).applyPriceScaleRatio(this.m_mainSeries.priceScale(),e)},de.prototype.scaleTimeTo=function(e){this._timeScale.scaleTo(e),this.recalculateAllPanes(),this.lightUpdate(),this._setScalesResetAvailable(!0)},de.prototype.endScaleTime=function(){this._timeScale.endScale(),this.lightUpdate(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources())},de.prototype.startScrollTime=function(e){this._timeScale.startScroll(e),this._isTimeScrolling=!0},de.prototype.scrollTimeTo=function(e){this._timeScale.scrollTo(e),this.recalculateAllPanes(),this.updateCrossHair(),this.lightUpdate(),this._setScalesResetAvailable(!0)},de.prototype.endScrollTime=function(){this._timeScale.endScroll(),this.lightUpdate(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this._isTimeScrolling=!1},de.prototype.recalcStudyBasedLineTools=function(){this.dataSources().forEach((function(e){m(e)&&e.recalcStudyIfNeeded&&e.recalcStudyIfNeeded()}))},de.prototype.recalcVisibleRangeStudy=function(e,t){void 0!==this._recalcVRTimerId&&clearTimeout(this._recalcVRTimerId);var i=this;this._recalcVRTimerId=setTimeout((function(){i._recalcVisibleRangeStudy(e,t)}),500)},de.prototype._recalcVisibleRangeStudy=function(e,t){if(!this.timeScale().isEmpty()){var i=this.timeScale().visibleBarsStrictRange(),r=this.mainSeries().nearestData(i.firstBar(),j.NearestRight),n=this.mainSeries().nearestData(i.lastBar(),j.NearestLeft),o=this.mainSeries().bars().lastIndex(),s=r?r.index:void 0,a=n?n.index:void 0,l=s===this._oldStartVisibleIndex,c=a===this._oldEndVisibleIndex;if(!l||!c||t){this._oldStartVisibleIndex=s,this._oldEndVisibleIndex=a;for(var u={first_visible_bar_time:1e3*Math.floor(r&&r.value?r.value[TradingView.TIME_PLOT]:0),last_visible_bar_time:1e3*Math.floor(n&&n.value?n.value[TradingView.TIME_PLOT]:0),subscribeRealtime:n&&n.index===o},h=0;h<e.length;h++)if(R(e[h])){for(var d=e[h],p=d.metaInfo().inputs,f=[],_=0;_<p.length;_++)u.hasOwnProperty(p[_].id)&&f.push(p[_].id);var m=d.properties().inputs;for(_=0;_<f.length;_++){var v=f[_];m[v].setValueSilently(u[v])}f.length>0&&m.listeners().fire(m)}}}},de.prototype.onResetScales=function(){return this._resetScales},de.prototype.resetTimeScale=function(){this._timeScale.restoreDefault(),this.recalculateAllPanes(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this.updateCrossHair(),this.lightUpdate(),this._resetScales.fire(),this._setScalesResetAvailable(!1)},de.prototype.restoreTimeScaleState=function(e){this._timeScale.restoreState(e),this.recalculateAllPanes(),this.updateCrossHair(),this.lightUpdate(),this._setScalesResetAvailable(!0)},de.prototype.restoreFactoryDefaults=function(e){e.restoreFactoryDefaults(),this.recalcVisibleRangeStudy(this.dataSources(),!0)},de.prototype.selectionMacro=function(e){var t=this.selection().sources();e({removeSourceFromSelection:fe.bind(this),addSourceToSelection:_e.bind(this),clearSelection:pe.bind(this),selection:this.selection.bind(this)})
;var i=Q(t,this.selection().sources()),r=Q(this.selection().sources(),t);r.concat(t).forEach((function(e){e.updateAllViews()})),i.forEach((function(e){var t=e.hasAlert&&e.hasAlert.value()&&e.getAlertSync();t&&t.set("selected",!1)})),r.forEach((function(e){var t=e.hasAlert&&e.hasAlert.value()&&e.getAlertSync();t&&t.set("selected",!0)})),this.lightUpdate(),this.setHoveredSource(null),(i.length>0||r.length>0)&&this._selectedSourceChanged.fire()},de.prototype.checkLineToolSelection=function(){this._selection.checkLineToolSelection()},de.prototype.onSelectedSourceChanged=function(){return this._selectedSourceChanged},de.prototype.selection=function(){return this._selection},de.prototype.invalidate=function(e){this._invalidateHandler&&this._invalidateHandler(e)},de.prototype.dataSources=function(){var e=[];e.push(this.m_crossHairSource);for(var t=0;t<this._panes.length;++t)for(var i=this._panes[t].dataSources(),r=0;r<i.length;r++)e.push(i[r]);return e},de.prototype.orderedDataSources=function(e){var t=[];t.push(this.m_crossHairSource);for(var i=0;i<this._panes.length;i++){var r=this._panes[i].sourcesByGroup().all().slice();e&&r.reverse(),t=t.concat(r)}return t},de.prototype.dataSourceForId=function(e){for(var t,i=0;i<this._panes.length;++i)if(t=this._panes[i].dataSourceForId(e))return t;return null},de.prototype.children=function(e,t){return this.dataSources().filter((function(i){return(!0!==t||!R(i)||!i.isChildStudy())&&i.ownerSource()===e}))},de.prototype.setAndSaveCurrentPosition=function(e,t,i,r){this.m_crossHairSource.saveOriginCoord(e,t),this.setCurrentPosition(e,t,i,r)},de.prototype.setCurrentPosition=function(e,t,i,r){var n=NaN,o=Math.round(this._timeScale.coordinateToIndex(e));if(i){var s=i.defaultPriceScale();if(!s.isEmpty()){var a=i.mainDataSource().firstValue();n=s.coordinateToPrice(t,a)}}if(this._isSettingsExternalPosition||!this._lineBeingCreated&&!f(this.currentTool())||(n=this._magnet.align(n,o,i)),this._isTimeScrolling)this.m_crossHairSource.setPosition(this.m_crossHairSource.index,n,i);else{this.m_crossHairSource.setOnHoveredChartWidget(!0),this.m_crossHairSource.setPosition(o,n,i),this.m_crossHairSource.dataWindowView().update();for(var l=this._panes,c=l.length;c--;)for(var u=l[c].dataSources(),h=u.length;h--;){var d=u[h].dataWindowView();d&&d.update();var p=u[h].legendView();p&&p.update()}if(this._lineBeingCreated){if(!this._isSettingsExternalPosition){this._lineBeingCreated.setLastPoint({index:o,price:n},r),this._lineBeingCreated.updateAllViews();var _=this._lineBeingCreated.lastPoint();_.price===n&&_.index===o||this.m_crossHairSource.setPosition(_.index,_.price,i),this.lightUpdate();var m=this.mainSeries().syncModel(),v=this._timeScale.points().roughTime(_.index,m.projectTime.bind(m));H.setLineToolLastPoint({model:this,linkKey:this._lineBeingCreated.linkKey,symbol:this.mainSeries().symbol(),point:{timeStamp:v,price:_.price}})}}else this.crossHairSource().startMeasurePoint()?this.lightUpdate():this.invalidate(E.cursor());if(!this._isSettingsExternalPosition){var g=this._undoModel._chartWidget
;if(g._chartWidgetCollection)if(m=this.mainSeries().syncModel()){var y={timeStamp:v=this._timeScale.points().roughTime(o,m.projectTime.bind(m))},b=i.mainDataSource();b instanceof W&&(y.price=n,y.symbol=b.symbol()),y.syncModel=m;var S=this._lineBeingCreated||null!==this._linePointBeingEdited||this._sourcesBeingMoved.length;S=S&&H.drawOnAllCharts().value(),g._chartWidgetCollection.syncCrosshair(y,g,S,r)}}}},de.prototype.clearCurrentPosition=function(){var e=this.crossHairSource();e.clearPosition(),e.dataWindowView().update();for(var t=this._panes,i=t.length;i--;)for(var r=t[i].dataSources(),n=r.length;n--;){var o=r[n].dataWindowView();o&&o.update();var s=r[n].legendView();s&&s.update()}this.invalidate(E.cursor());var a=this._undoModel._chartWidget;a._chartWidgetCollection&&a._chartWidgetCollection.syncCrosshair(NaN,a)},de.prototype.onSyncScrollNeeded=function(e){var t=this._undoModel._chartWidget;if(t._chartWidgetCollection){var i=this.mainSeries().syncModel();if(i){var r=1e3*this._timeScale.points().roughTime(e,i.projectTime.bind(i));t._chartWidgetCollection.syncScroll(r,this)}}},de.prototype.syncTimeWithModel=function(e,t){var i=this.mainSeries().syncModel();if(null!==i){var r=1e3*this.createSyncPoint(e.mainSeries().syncModel(),i).sourceTimeToTargetTime(t/1e3),n=ae.get_timezone(this.timezone()),o=ae.utc_to_cal(n,r).getTime();this._gotoTimeImpl(o,{centerIfVisible:!1})}},de.prototype.gotoTime=function(e){return this._gotoTimeImpl(e,{centerIfVisible:!0})},de.prototype._gotoTimeImpl=function(e,t){var i,r=this.timeScale(),n=this.mainSeries();if(void 0!==e)this._scrollingState&&this._scrollingState.deferred.reject(),i=$.Deferred(),this._scrollingState={targetDate:e,deferred:i,centerIfVisible:t.centerIfVisible};else{if(!this._scrollingState)return Y.logError("scrollTo called without an argument"),$.Deferred().reject().promise();e=this._scrollingState.targetDate,i=this._scrollingState.deferred}var s=function(t){if(r.tickMarks().indexToTime(r.tickMarks().minIndex).valueOf()-e<0){var i=r.tickMarks().nearestIndex(e),s=o(n.bars().lastIndex());i=Math.min(i,s);for(var a=r.tickMarks().indexToTime(i).valueOf();a<e&&i<s;)i++,a=r.tickMarks().indexToTime(i).valueOf();var l=r.visibleBarsStrictRange(),c=l.lastBar()-l.firstBar();return!t&&l.contains(i)||(r.zoomToBarsRange(i-c/2,i+c/2),n.requestMoreData()),{timestamp:r.indexToTimePoint(i)}}}(this._scrollingState.centerIfVisible);if(!s){var a=r.tickMarks().minIndex,l=r.visibleBarsStrictRange(),c=l.lastBar()-l.firstBar();if(n.endOfData())r.zoomToBarsRange(a-c/2,a+c/2),s={timestamp:r.indexToTimePoint(a),eod:!0};else{var u=this.timeScale().tickMarks().estimateLeft(e);n.requestMoreData(Math.ceil(u+c/2))}}return s&&(this.fullUpdate(),this._scrollingState=null,i.resolve(s)),i.promise()},de.prototype.createSyncPoint=function(e,t){var i=this._syncPointCache[e.uniqueId()];if(i){var r=i[t.uniqueId()];if(r)return r}else this._syncPointCache[e.uniqueId()]={};var n=new G(e,t);return this._syncPointCache[e.uniqueId()][t.uniqueId()]=n,n},de.prototype.setExternalPosition=function(e,t){
var i,r=this.crossHairSource();if(r.setOnHoveredChartWidget(!1),!Number.isNaN(e)&&isNumber(e.timeStamp)){var n=this.mainSeries().syncModel();if(n){var o=this.createSyncPoint(e.syncModel,n).sourceTimeToTargetTime(e.timeStamp);i=this._timeScale.points().roughIndex(o,n.distance.bind(n))}}if(isFinite(i)&&isFinite(e.price)){this._isSettingsExternalPosition=!0;var s=this.paneForSource(this.mainSeries()),a=this._timeScale.indexToCoordinate(i),l=s.mainDataSource().firstValue(),c=this.mainSeries().priceScale().priceToCoordinate(e.price,l);return this.setCurrentPosition(a,c,s,t||new ee),r.setOnHoveredChartWidget(!1),void delete this._isSettingsExternalPosition}isFinite(i)?r.setPosition(i,NaN,null):(r.clearPosition(),r.dataWindowView().update());for(var u=this.dataSources(),h=u.length;h--;){var d=u[h].dataWindowView();d&&d.update();var p=u[h].legendView();p&&p.update()}this.invalidate(E.cursor())},de.prototype.updateCrossHair=function(){this.m_crossHairSource.update()},de.prototype.updateTimeScale=function(e,t,i,r,n,o){if(o){this._timeScale.reset();for(var s=this.dataSources(),a=0;a<s.length;a++)s[a].clearData&&s[a].clearData()}if(r.length>0)for(s=this.dataSources(),a=0;a<s.length;a++)s[a].moveData&&s[a].moveData(r);this._timeScale.update(e,t,i,n);var l="ChartModel.prototype.updateTimeScale("+e+","+t+","+i.length+","+r.length+","+n.length+","+o+")";l+="TimeScale: {first:"+this._timeScale.points().firstIndex()+",last:"+this._timeScale.points().lastIndex()+"}",Y.logDebug(l),this.recalculateAllPanes(),this.lightUpdate()},de.prototype.updateTimeScaleBaseIndex=function(e){var t=this.mainSeries().bars();if(!t.isEmpty()){var i=this.timeScale(),r=i.baseIndex(),n=o(t.lastIndex()),s=i.visibleBarsStrictRange(),a=i.logicalRange();if(null!==a){var l=a.contains(r);if(e&&e.index>0){var c=n-r,u=l?null:i.rightOffset()-c;if(!this._options.shiftVisibleRangeOnNewBar&&l){var h=i.width()/(a.length()+c);h>=i.minBarSpacing()?(i.setBarSpacing(h),u=i.rightOffset()+c):s.lastBar()!==r&&(u=i.rightOffset()-c)}null!==u&&i.setRightOffset(u)}}i.setBaseIndex(n)}},de.prototype.recalculatePane=function(e){e&&e.recalculate()},de.prototype.recalculateAllPanes=function(){for(var e=0;e<this._panes.length;++e)this._panes[e].recalculate();this.updateAllPaneViews(),this.crossHairSource().updateAllViews()},de.prototype._invalidateBarColorerCaches=function(){for(var e=this.dataSources(),t=0;t<e.length;++t){var i=e[t];i instanceof W&&i.invalidateBarColorerCache()}},de.prototype.createStudyInserter=function(e){return new te(e,this._studiesMetaInfoRepository,{createStudy:this.insertStudyWithParams.bind(this)})},de.prototype.insertStudyWithParams=function(e,t,i,r,n,o,s,a,l,c){null==o&&(o=this.mainSeries());var u=null;if(!n&&void 0!==e.groupingKey){var h=this.findNonOverlayStudyWithGroupingKey(e.groupingKey);null!==h&&(u=h.pane)}null===u&&(n||e.is_price_study?u=this.paneForSource(o):(u=this.createPane(),void 0!==l&&u.setPaneSize(l))),"Compare@tv-basicstudies"===e.id&&this.m_mainSeries.priceScale().setMode({log:!1,percentage:!0});var d=Object.assign({},r,{inputs:t
}),p=B(e,d,u,this.studyVersioning(),o),f=D(this,p,o,e,c);this._recalcVisibleRangeStudy([f],!0);var _=u.findSuitableScale(f,o,s);if(a&&_===this.mainSeries().priceScale()&&ne(f)){var m=oe(f,_,this,!0);null!==m&&f.setCurrency(m)}return f.start(),null!==i&&u.id()===i.paneId?u.insertDataSource(f,_,i.zorder):u.addDataSource(f,_),f.properties().linkedToSeries&&f.properties().linkedToSeries.value()&&f.setOwnerSource(this.mainSeries()),this.recalculatePane(u),this.fullUpdate(),this._invalidateBarColorerCaches(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this._studyInserted.fire(f),this.alertsWatcher().syncSourceAlertLabels(f),f},de.prototype.studyInserted=function(){return this._studyInserted},de.prototype.insertStudyStub=function(e){var t=this.mainSeries(),i=this.paneForSource(t),r=new F(this,null,e),n=i.createPriceScaleAtPosition("overlay");return i.addDataSource(r,n),this.recalculatePane(i),this.fullUpdate(),r},de.prototype.removeStudyStub=function(e){var t=this.dataSourceForId(e);return null===t?(Y.logNormal("StudyStub id="+e+" is not found in chart model"),!1):(this.removeSource(t),!0)},de.prototype.detachSource=function(e,t){var i=this.paneForSource(e);if(i)return i.removeDataSource(e),i.isEmpty()?(this._lineBeingCreated&&i===this._paneBeingCreatedLineOn&&this.cancelCreatingLine(),this.removePane(i,t),!0):(this.fullUpdate(),!1)},de.prototype.removeSource=function(e,t){this.selectionMacro((function(t){t.removeSourceFromSelection(e)})),this._sourcesBeingMoved.includes(e)&&(this._sourcesBeingMoved=this._sourcesBeingMoved.filter((function(t){return t!==e})),this._sourcesBeingMoved.length||(this._lineItemBeingMoved=null)),e===this._lineBeingEdited&&(this._lineBeingEdited=null,H.isToolEditingNow.setValue(!1)),e===this._lineBeingCreated&&(this._lineBeingCreated=null),e.stop&&e.stop(),this.alertsWatcher().removeSourceAlertLabels(e);var i=this.detachSource(e,t);if(e.metaInfo&&e.metaInfo()&&"Compare@tv-basicstudies"===e.metaInfo().id){for(var r=this.paneForSource(this.m_mainSeries).dataSources(),n=0;n<r.length;n++)if(r[n].metaInfo&&"Compare@tv-basicstudies"===r[n].metaInfo().id)return;this.m_mainSeries.priceScale().setMode({percentage:!1})}return this.fullUpdate(),this._invalidateBarColorerCaches(),R(e)&&(se.emit("study_event",e.id(),"remove"),e.isChildStudy()&&e.source().unsetChild(e)),e.destroy&&e.destroy(),_(e)&&se.emit("drawing_event",e.id(),"remove"),i},de.prototype._unmergeAvailable=function(e){return e===this.m_mainSeries||TradingView.isInherited(e.constructor,A)&&!e.isLinkedToSeries()&&!TradingView.isInherited(e.constructor,M)&&e.showInObjectTree()},de.prototype.isMergeUpAvailableForSource=function(e){return!!this._unmergeAvailable(e)&&this.paneForSource(e)!==this.panes()[0]},de.prototype.isMergeDownAvailableForSource=function(e){if(!this._unmergeAvailable(e))return!1;var t=this.paneForSource(e),i=this.panes();return t!==i[i.length-1]},de.prototype.isUnmergeAvailableForSource=function(e){return!!this._unmergeAvailable(e)&&this.paneForSource(e).dataSources().filter(this._unmergeAvailable,this).length>1},
de.prototype.createLineTool=function(e,t,i,r,n,o){if(!f(i))return null;if("LineToolExecution"!==i&&ie("drawings","Study_Drawing_"+i),r){var a=r.state();r=p(i,a)}var l=d(i,this,r,null),c=!l.linkKey&&!n;H.drawOnAllCharts().value()?l.linkKey=n||q.randomHash():l.linkKey=n,l.toolname=i,o=o||e.mainDataSource(),l.setOwnerSource(o);var u,h=e.defaultPriceScale();if(e.addDataSource(l,h),l.isFixed()){var _=e.mainDataSource().firstValue(),m=this._timeScale.indexToCoordinate(t.index),v=h.priceToCoordinate(t.price,_);u=l.addFixedPoint(new s(m,v))}else u=l.addPoint(t);return u||(this._lineBeingCreated=l,this._paneBeingCreatedLineOn=e),c&&l.enableCurrentIntervalVisibility(),this.fullUpdate(),l},de.prototype.lineBeingCreated=function(){return this._lineBeingCreated},de.prototype.paneBeingCreatedLineOn=function(){return this._paneBeingCreatedLineOn},de.prototype.coninueCreatingLine=function(e,t,i,r){var n=this._lineBeingCreated.addPoint(e,t,i);this._lineBeingCreated.updateAllViews();var o=new E(L.Light);return n&&(this._paneBeingCreatedLineOn=null,this._lineBeingCreated=null),this.invalidate(o),n},de.prototype.cancelCreatingLine=function(){if(this._lineBeingCreated){var e=this._lineBeingCreated;this.removeSource(this._lineBeingCreated),this._lineBeingCreated=null,this._lineCancelled.fire(),H.drawOnAllCharts().value()&&e.isSynchronizable()&&H.cancelLineTool({model:this})}},de.prototype.startChangingLinetool=function(e,t,i,r,n){this._lineBeingEdited=e,H.isToolEditingNow.setValue(!0),this._linePointBeingEdited=i,this._lineBeingEdited.startChanging(i,t,n);var o=this.paneForSource(e);this._lineBeingEdited.startDragPoint&&this._lineBeingEdited.startDragPoint(i,t),this._lineBeingEdited.setPoint(i,t,r,n),this._lineBeingEdited.updateAllViews();var s=this._paneInvalidationMask(o,L.Light);if(s.force=!0,this.invalidate(s),e.linkKey&&e.isSynchronizable()){var a=this.externalTimeStamp(t.index);H.startChangingLineTool({linkKey:e.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:t.price,timeStamp:a},pointIndex:i,envState:r})}},de.prototype.lineBeingEdited=function(){return this._lineBeingEdited},de.prototype.linePointBeingEdited=function(){return this._linePointBeingEdited},de.prototype.changeLinePoint=function(e,t,i){var r=this.paneForSource(this._lineBeingEdited),n=e.price,o=e.index;if(void 0!==e.x&&void 0!==e.y){var s=this._lineBeingEdited.priceScale(),a=r.mainDataSource().firstValue();n=s.coordinateToPrice(e.y,a),o=Math.round(this.timeScale().coordinateToIndex(e.x)),n=this._magnet.align(n,o,r),this._lineBeingEdited.setPoint(this._linePointBeingEdited,{price:n,index:o},t,i)}else this._lineBeingEdited.setPoint(this._linePointBeingEdited,e,t,i);if(this._lineBeingEdited.updateAllViews(),this.lightUpdate(),this._lineBeingEdited.linkKey&&this._lineBeingEdited.isSynchronizable()){var l=this.externalTimeStamp(o);H.changeLineTool({linkKey:this._lineBeingEdited.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:n,timeStamp:l},envState:t})}},de.prototype.endChangingLinetool=function(e,t){var i=this._lineBeingEdited
;this._lineBeingEdited.endChanging(!1,e,t),this._lineBeingEdited=null,H.isToolEditingNow.setValue(!1),this._linePointBeingEdited=null,this.lightUpdate();var r={points:i._timePoint,interval:this.mainSeries().interval()};i.linkKey&&i.isSynchronizable()&&H.finishChangingLineTool({model:this,linkKey:i.linkKey,symbol:this.mainSeries().symbol(),finalState:r})},de.prototype.finishLineTool=function(e){H.drawOnAllCharts().value()&&e.linkKey&&e.isSynchronizable()&&H.finishLineTool({linkKey:e.linkKey,model:this})},de.prototype.calculateDefaultTags=function(){for(var e=[],t=this.dataSources(),i=0;i<t.length;i++){var r=t[i];r.tags&&(e=e.concat(r.tags()))}return e},de.prototype.changeZOrder=function(e,t){this.paneForSource(e).changeZOrder(e,t),this.fullUpdate()},de.prototype._sendTo=function(e,t){var i={},r=this;for(var n in e.forEach((function(e){var t=r.paneForSource(e),n=r._panes.indexOf(t);i[n]||(i[n]=[]),i[n].push(e)})),i){t(r._panes[n],i[n])}this.fullUpdate()},de.prototype.sendToBack=function(e){this._sendTo(e,(function(e,t){e.sendToBack(t)}))},de.prototype.bringToFront=function(e){this._sendTo(e,(function(e,t){e.bringToFront(t)}))},de.prototype.setTimeViewport=function(e,t){this.timeScale().zoomToBarsRange(e,t),this.recalculateAllPanes(),this.lightUpdate()},de.prototype.zoomToViewport=function(e,t,i,r,o){this.setTimeViewport(e,t);var s=Math.min(i,r),a=Math.max(i,r),l=o.defaultPriceScale();l.isPercentage()||l.setMode({autoScale:!1}),l.isLog()&&(s=l.priceToLogical(s),a=l.priceToLogical(a)),l.setPriceRange(new n(s,a)),this.recalculateAllPanes(),this.invalidate(this._paneInvalidationMask(o,L.Light)),this._setScalesResetAvailable(!0)},de.prototype.clearAllStudies=function(){for(var e=this.dataSources(),t=0;t<e.length;t++)e[t].clearData&&e[t].clearData()},de.prototype.allStudies=function(){return this._getAllSources((function(e){return R(e)}))},de.prototype.allLineTools=function(){return this._getAllSources(_)},de.prototype.getStudyById=function(e){var t=this.dataSourceForId(e);return null!==t&&R(t)?t:null},de.prototype.getLineToolById=function(e){var t=this.dataSourceForId(e);return null!==t&&_(t)?t:null},de.prototype._getAllSources=function(e){for(var t=[],i=this._panes,r=i.length,n=0;n<r;++n)for(var o=i[n].sourcesByGroup().all(),s=o.length,a=0;a<s;++a){var l=o[a];e(l)&&t.push(l)}return t},de.prototype.getStudyById=function(e){var t=this.dataSourceForId(e);return t instanceof A?t:null},de.prototype.backgroundCounterColor=function(){var e=this.backgroundColor().value();if(void 0===this._lastBackgroundColor||void 0===this._lastOriginalColor||e!==this._lastBackgroundColor){var t=u(c(e),150);this._lastBackgroundColor=e,this._lastOriginalColor="black"===t?"white":"black"}return this._lastOriginalColor},de.prototype.isDark=function(){return"white"===this.backgroundCounterColor()},de.prototype.updateAllVolumeStudies=function(){for(var e=this._panes,t=e.length;t--;)for(var i=!1,r=e[t],n=r.dataSources(),o=n.length;o--;){var s=n[o];R(s)&&"Volume"===s.metaInfo().shortId&&(s.updateAllViews(),i||(this.updatePane(r),i=!0))}};var me=!P("any")
;de.prototype._initAlertsList=function(){var e=this;return e._alertsListPromise||(e._alertsListPromise=x().then((function(t){function i(t){e.mainSeries().dataEvents().symbolResolved()[t](e,r),e.mainSeries().dataEvents().symbolError()[t](e,e._removeAllAlertLabelsFromChart),e.mainSeries().properties().interval[t](e,r)}function r(){me?t.requestFullList({success:function(){e._alertsList.syncCollections()},error:function(){e._alertsList.reset()}}):t.requestList({symbol:e.mainSeries().actualSymbol(),resolution:e.mainSeries().interval(),active:!0,success:function(){e._alertsList.syncCollections()},error:function(){e._alertsList.reset()}})}return e._alertsList=new T([],{observableCollection:t.alerts,syncEvents:["change:active","change:crossInterval","change:resolution","change:symbol"],validator:function(t){return(t.get("active")||t.isNew())&&(t.get("crossInterval")||t.get("resolution")===e.mainSeries().interval())&&t.get("symbol")===e.mainSeries().actualSymbol()}}),e._alertsList.on("add",e._addAlertLabelToChart.bind(e)),e._alertsList.on("remove",e._removeAlertLabelFromChart.bind(e)),e._alertsList.on("reset",(function(){e.resetAlertList()})),e._alertsList.on("change:alertSeries",(function(t){e._removeAlertLabelFromChart(t),e._addAlertLabelToChart(t)})),e._alertsList.syncCollections(),loginStateChange.subscribe(e,(function(){i(window.is_authenticated?"subscribe":"unsubscribe")})),window.is_authenticated&&(i("subscribe"),r()),e._alertsList}))),this._alertsListPromise},de.prototype._addAlertLabelToChart=function(e){if(e.get("extra")){var t=e.get("extra").alertSeries().id;this.alertsWatcher().addAlert(e,t)}},de.prototype._removeAlertLabelFromChart=function(e){this.alertsWatcher().removeAlert(e)},de.prototype._removeAllAlertLabelsFromChart=function(){this.alertsWatcher().removeAllAlertLabels()},de.prototype.getAlertsList=function(){return this.readOnly()?Promise.resolve(null):this._alertsList?Promise.resolve(this._alertsList):this._initAlertsList()},de.prototype.resetAlertList=function(){if(this._alertsList){var e=this._alertsList.models;this._removeAllAlertLabelsFromChart();for(var t=e.length-1;t>=0;t--)this._addAlertLabelToChart(e[t])}},de.prototype.setInterval=function(e,t){var i=setInterval(e,t);return this._modelIntervals.push(i),i},de.prototype.clearInterval=function(e){clearInterval(e);var t=this._modelIntervals.indexOf(e);t>-1&&this._modelIntervals.splice(t,1)},de.prototype.clearIntervals=function(){for(var e=0;e<this._modelIntervals.length;e++)clearInterval(this._modelIntervals[e]);this._modelIntervals=[]},de.prototype.destroy=function(){for(var e=0;e<this._barsMarksSources.length;e++)this._barsMarksSources[e].destroy();this.clearIntervals(),H.hideAllDrawings().unsubscribe(this,this._onDrawingsVisibilityChanged),this.resetDeferredStudies();for(e=0;e<this._barsMarksSources.length;e++)this._barsMarksSources[e].destroy();for(e=0;e<this._panes.length;e++)this._panes[e].destroy();this._panes.length=0,this._sessions=null,this._timeScale.destroy(),re.unsubscribe(this,this._updateDateTimeFormatter),
this.mainSeries().properties().interval.unsubscribe(this,this._updateDateTimeFormatter),this._trendLineStatsCache&&this._trendLineStatsCache.destroy(),this._fibRetracementLabelsCache&&this._fibRetracementLabelsCache.destroy(),this._alertsList&&this._alertsList.destroy(),loginStateChange.unsubscribeAll(this),he&&(this._properties.paneProperties.legendProperties.showLegend.unsubscribeAll(this),this._dataSourceCollectionChanged.unsubscribeAll(this)),l.prototype.destroy.call(this)},de.prototype.countUserStudies=function(e){var t=0;e=e||{};for(var i=0;i<this._panes.length;i++)for(var r=this._panes[i].dataSources(),n=0;n<r.length;n++){var o=r[n];if(R(o)&&!V(o)&&o.showInObjectTree()){var s=o.metaInfo&&o.metaInfo();if(s){var a=s.id;if(e.dontCountVolume&&"Volume@tv-basicstudies"===a)continue;if(e.dontCountCompare&&"Compare@tv-basicstudies"===a)continue;if(e.dontCountOverlay&&"Overlay@tv-basicstudies"===a)continue}t++}}return t},de.prototype.isJustClonedChart=function(){return this._undoModel.isJustClonedChart()},de.prototype.restoreSource=function(e,t,i,r,n){var o,s;o=e?this.createPane(t):this.panes()[t];var a=r.type.toLowerCase().startsWith("study");s=a?o.restoreStudy(r):o.restoreLineTool(r);var l=null;r.ownerSource&&(l=o.dataSourceForId(r.ownerSource)),s.setOwnerSource(l);var c=null;if(n?c=o.getPriceScaleById(n.id):s.ownerSource()&&(c=s.ownerSource().priceScale()),c)s.setPriceScale(c),c.addDataSource(s);else{c=o.createPriceScaleAtPosition(n.position,n.priceScaleIndex);n&&n.id&&c.setId(n.id),s.setPriceScale(c),c.addDataSource(s),"overlay"===n.position&&s.metaInfo&&"Volume@tv-basicstudies"===s.metaInfo().id&&(c.setTopMargin(.75),c.setBottomMargin(0))}return s.start(),s.restore&&s.restore(),e&&o.restoreState(i),this.recalculateAllPanes(),this.mainSeries().invalidateBarColorerCache(),this.fullUpdate(),a&&this.alertsWatcher().syncSourceAlertLabels(s),s},de.prototype.restoreLineToolState=function(e,t){e.restorePoints(t.points,t.indexes||[]),e.properties().merge(t.state),e.restoreData&&e.restoreData(t),e.createServerPoints(),this.fullUpdate(),e.linkKey&&H.restoreLineToolState({model:this,linkKey:e.linkKey,state:t})},de.prototype.onChartThemeLoaded=function(){return this._chartThemeLoaded},de.prototype.chartThemeLoaded=function(){this._chartThemeLoaded.fire()},de.prototype.selectBarMode=function(){return this.m_crossHairSource.selectBarMode()},de.prototype.toggleSelectBarMode=function(){this.m_crossHairSource.toggleSelectBarMode()},de.prototype.onBarSelected=function(){return this.m_crossHairSource.onBarSelected()},de.prototype.isSeriesStyleSupported=function(e){return this.m_mainSeries.isStyleSupported(e)},de.prototype.getStudyShiftColorStartOffset=function(){return this._studyShiftColorStartOffset},de.prototype.setStudyShiftColorStartOffset=function(e){this._studyShiftColorStartOffset=e},de.prototype.setPriceAutoScaleForAllMainSources=function(){for(var e=0;e<this._panes.length;++e){var t=this._panes[e].mainDataSource();null===t||t.priceScale().isLockScale()||t.priceScale().setMode({autoScale:!0})}},
de.prototype.isInReplay=function(){return this.m_mainSeries.isInReplay()},de.prototype.onInReplayStateChanged=function(){return this.m_mainSeries.onInReplayStateChanged()},de.prototype.switchToReplay=function(e,t){this.m_mainSeries.switchToReplay(e,t)},de.prototype.switchToRealtime=function(){this.m_mainSeries.switchToRealtime(),this._timeScale.resetRightOffset()},de.prototype.rendererOptionsProvider=function(){return this._rendererOptionsProvider},de.prototype.priceAxisRendererOptions=function(){return this._rendererOptionsProvider.options()},de.prototype.magnet=function(){return this._magnet},de.prototype.isPriceScaleVisible=function(e){var t=this.paneForSource(e.mainSource()),i=t.priceScalePosition(e);if("overlay"===i)return!0;var r=this.priceScaleSlotsCount();return t.priceScaleIndex(e,i)<r[i]},de.prototype.studyMetaInfoRepository=function(){return this._studiesMetaInfoRepository},de.prototype.studiesColorRotatorFactory=function(){return this._studyColorRotatorFactory},e.exports=de}).call(this,i("tc+8"),i("aIyQ"),i("Qb4w").PriceRange)},cXAR:function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesDataWindowView",(function(){return P}));var r=i("mrSG"),n=i("eJTA"),o=i("ivNn"),s=i("4miz"),a=i("xDuj"),l=i("k9/m"),c=i("GH0z"),u=i("7qT/"),h=i("Ialn"),d=i("qFKp"),p=i("38az"),f=i("e92V"),_=i("mMWL"),m=i("Tmoa"),v=d.CheckMobile.any(),g=v&&!1,y=new c.PercentageFormatter,b=window.t("n/a"),S=b+" ("+b+"%)";function w(e,t){var i=Object(n.parseRgb)(t),r=Object(n.parseRgb)(e);return Object(n.distanceRgb)(i,r)<70?Object(n.rgbToHexString)(Object(n.invertRgb)(i)):t}var P=function(e){function t(t,i){var r=e.call(this)||this;return r._invalidated=!0,r._series=t,r._model=i,r._items.push(new s.DataWindowItem(window.t("Open"),"")),r._items.push(new s.DataWindowItem(window.t("High"),"")),r._items.push(new s.DataWindowItem(window.t("Low"),"")),r._items.push(new s.DataWindowItem(window.t("Close"),"")),r._items.push(new s.DataWindowItem("","")),r._items.push(new s.DataWindowItem("","")),r._items.push(new s.DataWindowItem(window.t("Change"),"")),r.update(),r}return Object(r.__extends)(t,e),t.prototype.update=function(){this._invalidated=!0},t.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},t.prototype._updateImpl=function(){var e=this._series.symbolInfo();e?(this._header=[e.name,Object(a.translatedIntervalString)(this._series.interval()),e.exchange].join(", "),this._title=e.description):this._header=this._series.symbol();for(var t=this._showLastPriceAndChangeOnly(),i=0,r=this._items;i<r.length;i++){r[i].setVisible(!t)}this._items[0].setValue(b),this._items[1].setValue(b),this._items[2].setValue(b),this._items[3].setValue(b),this._items[6].setValue(S),this._items[5].setVisible(!1);var n=this._items[4];if(n.setValue(b),n.setVisible(!1),!this._model.timeScale().isEmpty()&&0!==this._series.bars().size()){var s=this._model.crossHairSource().appliedIndex();if(t||!Object(o.isNumber)(s)){var c=this._series.data().last();if(null===c)return;s=c.index}
var u=this._series.nearestIndex(s,l.PlotRowSearchMode.NearestLeft);if(void 0!==u){var d=this._series.data().valueAt(u),f=function(e){if(null===e)return null;var t=e.properties().child("background");return void 0===t?null:t.value()}(this._series.model().paneForSource(this._series));if(null!==d&&null!==f){var _=d[1],v=d[2],P=d[3],C=d[4];if(null!=_&&null!=v&&null!=P&&null!=C){var T=this._series.formatter(),x=S,I=this._changesData(C,u,t);void 0!==I.values&&(x=Object(h.forceLTRStr)(T.format(I.values.change,!0)+" ("+y.format(I.values.percentChange,!0)+")")),this._items[6].setValue(x),t?(this._items[5].setValue(T.format(C)),this._items[5].setVisible(!0),this._items[6].setVisible(!0)):(this._items[0].setValue(T.format(_)),this._items[1].setValue(T.format(v)),this._items[2].setValue(T.format(P)),this._items[3].setValue(T.format(C)),this._items[4].setValue(T.format(this._series.barFunction()(d))));var E=null;if(t&&!g)E=void 0===I.values||I.values.change>=0?p.SeriesBarColorer.upColor(this._series.properties()):p.SeriesBarColorer.downColor(this._series.properties());else{var L=this._series.barColorer().barStyle(u,!1);E=w(f,null!=L.barBorderColor?L.barBorderColor:L.barColor)}E=Object(m.resetTransparency)(w(f,E));for(var O=0,A=this._items;O<A.length;O++){A[O].setColor(E)}}}}}},t.prototype._showLastPriceAndChangeOnly=function(){return v&&(null===this._model.crossHairSource().pane||Object(f.a)(_.tool.value())||null!==this._model.lineBeingEdited())},t.prototype._changesData=function(e,t,i){if(i&&!g){var r=this._series.quotes();if(null!==r)return{values:{change:r.change,percentChange:r.change_percent}}}else{var n=this._series.data().valueAt(t-1),o=n&&n[4]||null;if(null!==o)return{values:{change:e-o,percentChange:Object(u.a)(o,e)}}}return{}},t}(s.DataWindowView)},cbig:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.3 9l.9-4.53a1.23 1.23 0 1 0-2.4 0L8.7 9l-.9 4.53a1.23 1.23 0 1 0 2.4 0L9.3 9z"/><path fill="currentColor" d="M9.15 9.26l4.38-1.48a1.23 1.23 0 1 0-1.21-2.09L8.85 8.74l-4.38 1.48a1.23 1.23 0 1 0 1.21 2.09l3.47-3.05z"/><path fill="currentColor" d="M9.15 8.74L5.68 5.69a1.23 1.23 0 1 0-1.2 2.09l4.37 1.48 3.47 3.05a1.23 1.23 0 1 0 1.2-2.09L9.16 8.74z"/></svg>'},cdbK:function(e,t,i){"use strict";function r(e){Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(4),i.e(12),i.e(19),i.e(37),i.e(34),i.e(46),i.e(50),i.e(59),i.e(149),i.e(235),i.e(320),i.e(0),i.e(9),i.e(25),i.e(42),i.e(54),i.e(140),i.e(190),i.e("go-to-date-dialog-impl")]).then(function(t){i("uUY/").showGoToDateDialog(e)}.bind(null,i)).catch(void 0)}i.r(t),i.d(t,"showGoToDateDialog",(function(){return r}))},cgFQ:function(e,t,i){"use strict";var r=i("Tmoa"),n=i("ikwP"),o=/[1-9]/g,s=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e,t,i){if(null!==this._data&&this._data.visible&&0!==this._data.text.length){var r=this._data;e.font=t.font;var s=Math.round(t.widthCache.measureText(e,r.text,o));if(!(s<=0)){e.save()
;var a=t.paddingHorizontal,l=s+2*a,c=l/2,u=r.width,h=r.coordinate,d=Math.floor(h-c)+.5;d<0?(h+=Math.abs(0-d),d=Math.floor(h-c)+.5):d+l>u&&(h-=Math.abs(u-(d+l)),d=Math.floor(h-c)+.5);var p=d+l,f=0+t.borderSize+t.paddingTop+t.fontSize+t.paddingBottom;e.fillStyle=r.background;var _=Math.round(d*i),m=Math.round(0*i),v=Math.round(p*i),g=Math.round(f*i);e.fillRect(_,m,v-_,g-m);var y=Math.round(r.coordinate*i),b=m,S=Math.round((b+t.borderSize+t.tickLength)*i);e.fillStyle=r.color;var w=Math.max(1,Math.floor(i)),P=Math.floor(.5*i);e.fillRect(y-P,b,w,S-b);var C=f-t.baselineOffset-t.paddingBottom;e.textAlign="left",e.fillStyle=r.color,Object(n.drawScaled)(e,i,(function(){return e.fillText(r.text,d+a,C)})),e.restore()}}},e}();i.d(t,"a",(function(){return a}));var a=function(){function e(e){this._renderer=new s,this._rendererData={background:"",color:"",coordinate:0,text:"",visible:!1,width:0},this._invalidated=!0,this._model=e,this._renderer.setData(this._rendererData)}return e.prototype.update=function(){this._invalidated=!0},e.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer},e.prototype.coordinate=function(){return this._rendererData.coordinate},e.prototype._updateImpl=function(){var e=this._rendererData;if(e.visible=!1,!this._model.timeScale().isEmpty()){var t=this._getIndex();if(null!==t){e.visible=!0,e.width=this._model.timeScale().width(),e.background=this._getBgColor(),e.color=Object(r.colorFromBackground)(e.background),e.coordinate=this._model.timeScale().indexToCoordinate(t);var i=this._model.timeScale().indexToUserTime(t);e.text=null!==i?this._model.dateTimeFormatter().format(i):"",this._invalidated=!1}}},e}()},d1Pk:function(e,t,i){"use strict";i.r(t),i.d(t,"fibLevelCoordinate",(function(){return n})),i.d(t,"fibLevelPrice",(function(){return o}));var r=i("Eyy1");function n(e,t,i,n,o,s){if(s)return Math.round(Object(r.ensureDefined)(e.coordinate)+Object(r.ensureDefined)(t.coordinate)*i);var a=e.price+t.price*i;return n.priceToCoordinate(a,o)}function o(e,t,i,n,o,s){if(!s)return e.price+t.price*i;var a=Object(r.ensureDefined)(e.coordinate)+Object(r.ensureDefined)(t.coordinate)*i;return n.coordinateToPrice(a,o)}},d1kB:function(e,t,i){},d700:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return o}));var r=i("/3z9");function n(e){if("INPUT"===e.tagName){var t=e.type;return"text"===t||"email"===t||"number"===t||"password"===t||"search"===t||"tel"===t||"url"===t}return"TEXTAREA"===e.tagName||e.isContentEditable}function o(e,t){if(!t)return!1;var i=255&e;if(27===i||i>>>4==7)return!1;switch(e^i){case r.Modifiers.Alt:return(38===i||40===i)&&"SELECT"===t.tagName||n(t);case r.Modifiers.Alt+r.Modifiers.Shift:return n(t);case r.Modifiers.Mod:if(67===i||!r.isMacKeyboard&&45===i){var o=t.ownerDocument&&t.ownerDocument.getSelection();if(o&&!o.isCollapsed)return!0}return n(t);case r.Modifiers.Mod+r.Modifiers.Shift:return i>=33&&i<=40&&n(t);case r.Modifiers.Shift:case 0:
return!!(9!==i||t.ownerDocument&&t!==t.ownerDocument.body&&t!==t.ownerDocument.documentElement)&&((13===i||32===i||!function(e){if("BUTTON"===e.tagName)return!0;if("INPUT"===e.tagName){var t=e.type;if("submit"===t||"button"===t||"reset"===t||"checkbox"===t||"radio"===t)return!0}return!1}(t))&&("form"in t||t.isContentEditable))}return!1}},d8RW:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererPnF",(function(){return s}));var r=i("mrSG"),n=i("VdBB"),o=i("Zp/P"),s=function(e){function t(t){var i=e.call(this)||this;return i._bars=t.bars,i._barSpacing=t.barSpacing,i._barWidth=t.barSpacing,i}return Object(r.__extends)(t,e),t.prototype.hitTest=function(e){var t=this._bars,i=.5*this._barSpacing;if(0===t.length)return null;if(e.x<t[0].time-i)return null;if(e.x>t[t.length-1].time+i)return null;for(var r=null,s=0,a=t;s<a.length;s++){var l=a[s];if(e.x<=l.time+i){r=l;break}}if(null===r)return null;var c=Object(o.selectionTolerance)(this._barWidth),u=Math.min(r.high,r.low),h=Math.max(r.high,r.low);return u-c<=e.y&&e.y<=h+c?new n.HitTestResult(n.HitTestResult.REGULAR):null},t.prototype._drawImpl=function(e){e.save(),e.lineCap="butt",e.lineWidth=1,e.translate(.5,.5);for(var t=0,i=this._bars;t<i.length;t++){var r=i[t],n=(r.low-r.high)/r.additionalNum;if(r.isMergedBar&&(e.beginPath(),r.isUp?this._drawBarEllipse(e,r,n,r.additionalNum-1):this._drawBarCross(e,r,n,0),e.strokeStyle=r.isUp?r.downColor:r.upColor,e.stroke()),e.beginPath(),r.isUp)for(var o=r.additionalNum-1-(r.isMergedBar?1:0);o>-1;o--)this._drawBarCross(e,r,n,o);else for(o=r.isMergedBar?1:0;o<r.additionalNum;o++)this._drawBarEllipse(e,r,n,o);e.strokeStyle=r.color,e.stroke()}e.restore()},t.prototype._drawBarCross=function(e,t,i,r){!function(e,t,i,r,n){e.moveTo(t,i),e.lineTo(t+r,i+n),e.moveTo(t+r,i),e.lineTo(t,i+n)}(e,t.time-.5*this._barWidth+.5,t.high+r*i,this._barWidth,i)},t.prototype._drawBarEllipse=function(e,t,i,r){!function(e,t,i,r,n){e.save(),e.translate(t+r/2,i+n/2),e.scale(r/2,n/2),e.moveTo(1,0),e.arc(0,0,.95,0,2*Math.PI,!1),e.restore()}(e,t.time-.45*this._barWidth+.5,t.high+r*i,.9*this._barWidth,i)},t}(i("cPgM").ScaledPaneRenderer)},dB5d:function(e,t,i){"use strict";i.r(t),i.d(t,"initGA",(function(){return s})),i.d(t,"trackPageview",(function(){return a})),i.d(t,"trackTiming",(function(){return l}));i("bSeV");var r=i("h7NA"),n=i("PADO"),o=!1;function s(){if(!o){Object(r.updateInitData)();var e=Object(r.getInitData)();if(e.gaId){o=!0,Object(n.a)("https://www.googletagmanager.com/gtag/js?id="+Object(r.getInitData)().gaId),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);var t={optimize_id:e.optimizeId};e.gaGdpr&&(t.anonymize_ip=!0),e.gaVars&&window.gtag("set",e.gaVars),window.gtag("config",e.gaId,t)}}}function a(e){s();var t=Object(r.getInitData)();window.gtag("config",t.gaId,{page_path:e})}function l(e,t,i,r){s(),window.gtag("event","timing_complete",{name:t,value:i,event_category:e,event_label:r})}},dBCn:function(e,t,i){"use strict";i.r(t),i.d(t,"TimingsMeter",(function(){return h}))
;var r=i("txPx"),n=i("H0vP"),o=Object(r.getLogger)("TimingsMeter.Service"),s=Object(r.getLogger)("TimingsMeter.Stats",{maxCount:160});function a(){var e;return(e={})[n.InvalidationLevel.None]={count:0,lastTime:0,maxTime:0,totalTime:0},e[n.InvalidationLevel.Cursor]={count:0,lastTime:0,maxTime:0,totalTime:0},e[n.InvalidationLevel.Light]={count:0,lastTime:0,maxTime:0,totalTime:0},e[n.InvalidationLevel.Full]={count:0,lastTime:0,maxTime:0,totalTime:0},e}function l(e,t){e.lastTime=t,e.totalTime+=t,++e.count,t>e.maxTime&&(e.maxTime=t)}function c(e){return e.toFixed(2)}function u(e){var t=e.count;if(0===t)return"no events";var i=e.totalTime/t,r=c(e.maxTime);return"count="+t+", last="+c(e.lastTime)+", max="+r+", avg="+c(i)}var h=function(){function e(e){this._waitDrawStartTime=-1,this._startDrawTime=-1,this._currentDrawLevel=n.InvalidationLevel.Full,this._currentDrawItems=a(),this._currentWaitingItem={count:0,lastTime:0,maxTime:0,totalTime:0},this._dumpTimingsStatsInterval=0,this._logPrefix="["+e+"]"}return e.prototype.destroy=function(){this.stopCollect()},e.prototype.startCollect=function(){0!==this._dumpTimingsStatsInterval&&(o.logWarn(this._logPrefix+" Multiple start detected"),this.stopCollect()),this._clearCurrentState(),this._dumpTimingsStatsInterval=setInterval(this._dumpTimingsStats.bind(this),15e3),o.logNormal(this._logPrefix+" Collecting started")},e.prototype.stopCollect=function(){0!==this._dumpTimingsStatsInterval&&(clearInterval(this._dumpTimingsStatsInterval),this._dumpTimingsStatsInterval=0,o.logNormal(this._logPrefix+" Collecting stopped. Dumping last state..."),this._dumpTimingsStats())},e.prototype.startWaitingDraw=function(){this._waitDrawStartTime=window.performance.now()},e.prototype.startDraw=function(e){this._startDrawTime=window.performance.now(),this._currentDrawLevel=e},e.prototype.stopDraw=function(){var e=window.performance.now();if(-1!==this._startDrawTime&&-1!==this._waitDrawStartTime){var t=this._startDrawTime-this._waitDrawStartTime;l(this._currentWaitingItem,t),this._waitDrawStartTime=-1;var i=e-this._startDrawTime;l(this._currentDrawItems[this._currentDrawLevel],i),this._startDrawTime=-1}},e.prototype._dumpTimingsStats=function(){var e=[this._logPrefix," awaiting:",u(this._currentWaitingItem),"; cursor:",u(this._currentDrawItems[n.InvalidationLevel.Cursor]),"; light:",u(this._currentDrawItems[n.InvalidationLevel.Light]),"; full:",u(this._currentDrawItems[n.InvalidationLevel.Full])].join("");s.logNormal(e),this._clearCurrentState()},e.prototype._clearCurrentState=function(){this._currentDrawItems=a(),this._currentWaitingItem={count:0,lastTime:0,maxTime:0,totalTime:0}},e}()},dBsn:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererCross",(function(){return l}));var r=i("aO4+"),n=i("GEp6"),o=i("ogJP"),s=i("Zp/P"),a=i("VdBB"),l=function(){function e(e){this._data=e}return e.prototype.draw=function(e,t){for(var i,r,n,s,a=t.pixelRatio,l="",c=!1,u=0,h=this._data.items;u<h.length;u++){var d=h[u];if(!Object(o.isNaN)(d.x)&&!Object(o.isNaN)(d.y)){
var p=null!==(r=null===(i=d.style)||void 0===i?void 0:i.color)&&void 0!==r?r:this._data.lineColor,f=Math.max(1,Math.floor((null!==(s=null===(n=d.style)||void 0===n?void 0:n.width)&&void 0!==s?s:this._data.lineWidth)*a));p!==l&&(l=p,c&&e.fill(),e.beginPath(),e.fillStyle=p);var _=3*f;_%2!=f%2&&(_+=1);var m=Math.round(Math.round(d.x*a)-_/2),v=Math.round(Math.round(d.y*a)-_/2),g=m+Math.floor(_/2-f/2),y=v+Math.floor(_/2-f/2);e.rect(m,y,_,f),e.rect(g,v,f,_),c=!0}}c&&e.fill()},e.prototype.hitTest=function(e){for(var t,i,o,l,c=Object(s.selectionTolerance)(this._data.lineWidth),u=1;u<this._data.items.length;++u){if(t=this._data.items[u-1],i=this._data.items[u],o=t.x,l=i.x,Object(n.distanceToSegment)(new r.Point(o,t.y),new r.Point(l,i.y),new r.Point(e.x,e.y)).distance<=c)return new a.HitTestResult(a.HitTestResult.REGULAR)}return null},e}()},dDSx:function(e,t,i){"use strict";(function(e){var r=i("CW80").isLineTool,n=i("Ss5c").LineDataSource,o=i("FIi8").deepExtend,s=i("hqNu").showGoToTradingViewReferralDialog,a=i("2vAl"),l=i("bKsZ").ProductFeatures,c=i("NP3r").getConfig,u=i("NP3r").enabled,h=i("oOPW").createGoProDialog,d=i("3ClC").isFundamentalStudyMetaInfo,p=i("OK+B"),f=i("//lZ").doAnimate,_=i("onDC").ChartUndoModelBase,m=i("Ocx9").saveDefaultProperties,v=i("GVHu").Study,g=i("8sOK").StudyStub,y=i("7MZv").showTooManyStudiesNotice,b=i("MY2c").UndoStack,S=i("RDU5").UndoCommand,w=i("Ltzl").SaveLineToolStateUndoCommand,P=i("YlKu").ApplyLineToolTemplateUndoCommand,C=i("s9sR").SetResolutionUndoCommand,T=i("8C8C").RestoreFactoryDefaultsUndoCommand,x=i("2OVc").InsertStudyCommand,I=i("FKaq").SetPriceScaleSelectionStrategyCommand,E=i("/YGI").StudyInserter,L=i("JWMC").trackEvent,O=i("txPx").getLogger("Chart.ChartUndoModel"),A=i("QTwd").RestoreDefaultsPreferencesUndoCommand,M=i("bJYc").SetPropertyUndoCommand,k=i("jeZR").AppliedTimeFrame,D=i("ApcL").preferencesByWhiteList;function R(t,i,r,n,o,s,a,l,c){_.call(this,a),this._chartWidget=s,this.m_model=new p(t,i,r,n,o,this,l,c),this.m_zoomStack=new b,this._onSimpleZoomIn=new e,this._onSimpleZoomOut=new e,this._appliedTimeFrame=new k(this.m_model),this.mainSeries().onTimeFrameApplied().subscribe(this,(function(e){var t=null!==e?{res:this.mainSeries().interval(),val:e}:null;this.appliedTimeFrame().setValue(t)})),this.beginUndoMacro=a.beginUndoMacro.bind(a),this.endUndoMacro=a.endUndoMacro.bind(a),this.createUndoCheckpoint=a.createUndoCheckpoint.bind(a),this.undoToCheckpoint=a.undoToCheckpoint.bind(a)}function V(e,t,i,r){S.call(this,i),this._priceScale=t,this._newMode=e,this._model=r}function B(e,t,i,r){S.call(this,i),this._property=e,this._newValue=t,this._model=r,this._priceScale=this._model.mainSeries().priceScale()}function N(e,t,i,r){S.call(this,"scale price",!1),this.m_model=e,this.m_pane=t,this.m_priceScale=i,this.m_state=r,this.m_newPriceScaleState=null}function F(e,t,i,r){this._model=e,this._series=t,this._oldSymbol=t.symbol(),this._oldInterval=t.interval(),this._symbol=i,this._interval=r}function j(e,t,i){S.call(this,"Move "+t[0].title()+" "+(i>0?"Forward":"Backward")),this._model=e,
this._sourcesIds=t.map((function(e){return e.id()})),this._shift=i}function W(e,t,i,r,n,o){S.call(this,"Zoom"),this._model=e,this._startBar=t,this._endBar=i,this._startPrice=r,this._endPrice=n,this._pane=o}function H(e,t,i){S.call(this,"Zoom"),this._baseCmd=e,this._zoomStack=t,this._inOut=i}function U(e,t){S.call(this,"Apply All Chart Properties"),this._model=e,this._undoModel=e.undoModel(),this._newProperties=t,function(e,t){var i={hollowCandle:{related:"candle"}};for(var r in["candleStyle","hollowCandleStyle","haStyle"].forEach((function(t){e[t].wickUpColor=e[t].wickUpColor||e[t].wickColor,e[t].wickDownColor=e[t].wickDownColor||e[t].wickColor})),t.vertGridProperties=t.vertGridProperties||t.gridProperties,t.horzGridProperties=t.horzGridProperties||t.gridProperties,i)if(!e[r+"Style"]){var n=e[i[r].related+"Style"];e[r+"Style"]=TradingView.clone(n)}}(this._newProperties.mainSeries,this._newProperties.paneProperties),this._oldProperties=D(e,e.mainSeries())}function z(e,t,i){S.call(this,"Apply Chart Theme"),this._model=e,this._newChartProps=TradingView.factoryDefaults("chartproperties"),this._newSeriesProps=TradingView.factoryDefaults("chartproperties.mainSeriesProperties"),this._newSessionProps=t.sessions||TradingView.factoryDefaults("sessions"),["candleStyle","hollowCandleStyle","haStyle"].forEach((function(e){t.mainSourceProperties[e].wickUpColor=t.mainSourceProperties[e].wickUpColor||t.mainSourceProperties[e].wickColor,t.mainSourceProperties[e].wickDownColor=t.mainSourceProperties[e].wickDownColor||t.mainSourceProperties[e].wickColor})),t.chartProperties.paneProperties.vertGridProperties=t.chartProperties.paneProperties.vertGridProperties||t.chartProperties.paneProperties.gridProperties,t.chartProperties.paneProperties.horzGridProperties=t.chartProperties.paneProperties.horzGridProperties||t.chartProperties.paneProperties.gridProperties,t.chartProperties.paneProperties.legendProperties=this._model.properties().state().paneProperties.legendProperties,this._newChartProps=o({},this._newChartProps,t.chartProperties),delete this._newChartProps.scalesProperties.showLeftScale,delete this._newChartProps.scalesProperties.showRightScale,delete this._newChartProps.scalesProperties.scaleSeriesOnly,delete this._newChartProps.scalesProperties.showSeriesLastValue,delete this._newChartProps.scalesProperties.showStudyLastValue,delete this._newChartProps.scalesProperties.showSymbolLabels,delete this._newChartProps.scalesProperties.showBidAskLabels,delete this._newChartProps.scalesProperties.showPrePostMarketPriceLabel,delete this._newChartProps.scalesProperties.showStudyPlotLabels,delete this._newChartProps.scalesProperties.showFundamentalNameLabel,delete this._newChartProps.scalesProperties.showFundamentalLastValue,e.timeScale().preserveBarSpacing()&&delete this._newChartProps.scalesProperties.barSpacing,this._newSeriesProps=o({},this._newSeriesProps,t.mainSourceProperties),this._oldChartProps=e.properties().state(),delete this._oldChartProps.paneProperties.topMargin,delete this._oldChartProps.paneProperties.bottomMargin,
this._oldSeriesProps=e.mainSeries().properties().state(),this._oldSessionsProps=this._model.sessions().properties().state(),i||(delete this._oldSeriesProps.style,delete this._oldSeriesProps.symbol,delete this._oldSeriesProps.interval,delete this._oldSeriesProps.extendedHours,delete this._newSeriesProps.style,delete this._newSeriesProps.symbol,delete this._newSeriesProps.interval,delete this._newSeriesProps.extendedHours,delete this._newSeriesProps.bidAsk.visible,delete this._newSeriesProps.prePostMarket.visible)}function G(e,t){S.call(this,"Stop Sincing Drawing"),this._model=e,this._sourceId=t.id(),this._linkKey=t.linkKey}inherit(R,_),R.prototype.version=function(){return this.m_model._version},R.prototype.onData=function(e){switch(e.method){case"timescale_update":var t=e.params;this.m_model.updateTimeScale(t.index,t.zoffset,t.changes,t.index_diff,t.marks,t.clear)}},R.prototype.paneForSource=function(e){return this.m_model.paneForSource(e)},R.prototype.createPane=function(e){return this.m_model.createPane(e)},R.prototype.readOnly=function(){return this.m_model.readOnly()},R.prototype.restart=function(){this.m_model.restart()},R.prototype.disconnect=function(){this.m_model.disconnect()},R.prototype.studiesMetaData=function(){return this.m_model.studiesMetaData()},R.prototype.studyVersioning=function(){return this.m_model.studyVersioning()},R.prototype.chartModel=function(){return this._model()},R.prototype._model=function(){return this.m_model},R.prototype.pushUndoCommand=function(e){this._pushUndoCommand(e)},R.prototype._pushUndoCommand=function(e){this._undoHistory.pushUndoCommand(e)},R.prototype.startScalePrice=function(e,t,i){this.pushUndoCommand(new N(this.m_model,e,t,t.state())),this.chartModel().startScalePrice(e,t,i)},R.prototype.scalePriceTo=function(e,t,i){this.chartModel().scalePriceTo(e,t,i)},R.prototype.endScalePrice=function(e,t){this.chartModel().endScalePrice(e,t)},R.prototype.startScrollPrice=function(e,t,i){t.isAutoScale()||(this._initialPriceScrollState=t.state(),this._initialPriceScrollPos=i,this.chartModel().startScrollPrice(e,t,i))},R.prototype.scrollPriceTo=function(e,t,i){t.isAutoScale()||(this._initialPriceScrollPos&&Math.abs(this._initialPriceScrollPos-i)>20&&(this.pushUndoCommand(new N(this.m_model,e,t,this._initialPriceScrollState)),delete this._initialPriceScrollState,delete this._initialPriceScrollPos),this.chartModel().scrollPriceTo(e,t,i))},R.prototype.endScrollPrice=function(e,t){t.isAutoScale()||(delete this._initialPriceScrollState,delete this._initialPriceScrollPos,this.chartModel().endScrollPrice(e,t))},R.prototype.setPriceAutoScale=function(e,t,i){this.pushUndoCommand(new N(this.m_model,e,t,t.state())),this.chartModel().setPriceAutoScale(e,t,i)},R.prototype.resetPriceScale=function(e,t){this.pushUndoCommand(new N(this.m_model,e,t,t.state())),this.chartModel().resetPriceScale(e,t)},R.prototype.setWidth=function(e){this.m_model.setWidth(e)},R.prototype.setPaneHeight=function(e,t){this.m_model.setPaneHeight(e,t)},R.prototype.gridSource=function(){return this.m_model.gridSource()},
R.prototype.watermarkSource=function(){return this.m_model.watermarkSource()},R.prototype.addAlertsSource=function(e){return this.m_model.addAlertsSource(e)},R.prototype.alertsSources=function(){return this.m_model.alertsSources()},R.prototype.publishedChartsTimelineSource=function(){return this.m_model.publishedChartsTimelineSource()},R.prototype.barsMarksSources=function(){return this.m_model.barsMarksSources()},R.prototype.crossHairSource=function(){return this.m_model.crossHairSource()},R.prototype.model=function(){return this.m_model},R.prototype.chartWidget=function(){return this._chartWidget},R.prototype.mainSeries=function(){return this.m_model.m_mainSeries},R.prototype.mainSeriesScaleRatioProperty=function(){return this.m_model.mainSeriesScaleRatioProperty()},R.prototype.panes=function(){return this.m_model.panes()},R.prototype.timeScale=function(){return this.m_model.timeScale()},R.prototype.selectionMacro=function(e){return this.m_model.selectionMacro(e)},R.prototype.setHoveredSource=function(e,t){this.m_model.setHoveredSource(e,t)},R.prototype.selection=function(){return this.m_model.selection()},R.prototype.onSelectedSourceChanged=function(){return this.m_model.onSelectedSourceChanged()},R.prototype.hoveredSource=function(){return this.m_model.hoveredSource()},R.prototype.activeStrategySource=function(){return this.m_model.activeStrategySource()},R.prototype.invalidate=function(e){this.m_model.invalidate(e)},R.prototype.setCurrentPosition=function(e,t,i,r){this.m_model.setCurrentPosition(e,t,i,r)},R.prototype.setAndSaveCurrentPosition=function(e,t,i,r){this.m_model.setAndSaveCurrentPosition(e,t,i,r)},R.prototype.modifySeries=function(e,t,i){var r=new F(this.m_model,e,t,i);this.pushUndoCommand(r)},R.prototype.canCreateStudy=function(e){return this.model().chartApi().chartApi().isCanCreateStudy(e)},R.prototype._isCountedStudy=function(e){return!["Volume@tv-basicstudies","Compare@tv-basicstudies","Overlay@tv-basicstudies"].includes(e.id)&&!d(e)},R.prototype.checkIfFeatureAvailable=function(e,t){var i=this.canCreateStudy(),r=t&&t instanceof v;return!this.readOnly()&&r&&(i=this.canCreateStudy(!0)),i?!this._isCountedStudy(e)||(this.m_model.countUserStudies({dontCountVolume:!0,dontCountOverlay:!0,dontCountCompare:!0})<(u(l.INDICATORS_ON_CHART)?c(l.INDICATORS_ON_CHART).limit:1/0)||(TradingView.onWidget()?s({feature:"indicators"}):(a("studyLimit"),h({feature:"studyLimit"})),!1)):(r?h({feature:"studyOnStudy"}):y(),!1)},R.prototype._insertStudy=function(e,t,i,r,n,o,s,a,l){var c=new x(this.m_model,e,t,i,r,n,o,s,a,l||null,"Insert "+e.description);return this.pushUndoCommand(c),c.insertedStudy()},R.prototype.insertStudyWithoutCheck=function(e){return this._insertStudy(e)},R.prototype.createStudyInserter=function(e,t,i){var r=this,n=null,o={createStudy:function(e,t,i,o,s,a,l,c,u){return r.checkIfFeatureAvailable(e,a)?(L("studies","Study_"+e.id),"Compare@tv-basicstudies"===e.id&&L("compare","symbol:"+t.symbol),r._insertStudy(e,t,o,s,a,l,c,u,n)):(O.logNormal("Cannot insert study "+e.id),null)}}
;void 0!==i&&(o.createStub=function(){var e=r.m_model.insertStudyStub(i);return n={targetPaneId:r.m_model.paneForSource(e).id(),targetZOrder:e.zorder()},e.id()},o.removeStub=function(e){return r.m_model.removeStudyStub(e)});var s=new E(e,this.m_model._studiesMetaInfoRepository,o);return s.setParentSource(t),s},R.prototype.setProperty=function(e,t,i,r){if(e&&e.value()!==t){var n=new M(e,t,i,this.m_model,r);this.pushUndoCommand(n),this.emitEvent("setProperty")}},R.prototype.setProperties=function(e,t,i){var r=this;this.beginUndoMacro(i),this.m_model.selectionMacro((function(){for(var n=0;n<e.length;n++)r.setProperty(e[n],t[n],i)})),this.endUndoMacro()},R.prototype.setPriceScaleMode=function(e,t,i){for(var r=Object.keys(e),n=t.mode(),o=!1,s=0;s<r.length;s++)if(n[r[s]]!==e[r[s]]){o=!0;break}if(o){var a=new V(e,t,i,this.m_model);this.pushUndoCommand(a)}},R.prototype.setPriceScaleSelectionStrategy=function(e){if(this.m_model.properties().priceScaleSelectionStrategyName.value()!==e){L("Chart","Change PriceScale Selection Strategy");var t="Set Price Scale Selection Stretegy to "+e;this.beginUndoMacro(t),this.setProperty(this.m_model.properties().priceScaleSelectionStrategyName,e,t);var i=new I(this.m_model,e,t);this.pushUndoCommand(i),this.endUndoMacro()}},R.prototype.setScaleRatioProperty=function(e,t,i){if(e.value()!==t){var r=new B(e,t,i,this.m_model);this.pushUndoCommand(r)}},R.prototype.setResolutionProperty=function(e,t,i,r){if(e.value()!==t){var n=new C(e,t,i,r);this.pushUndoCommand(n)}},R.prototype.lineBeingCreated=function(){return this.m_model.lineBeingCreated()},R.prototype.paneBeingCreatedLineOn=function(){return this.m_model.paneBeingCreatedLineOn()},R.prototype.cancelCreatingLine=function(){this.m_model.cancelCreatingLine()},R.prototype.lineCancelled=function(){return this.m_model.lineCancelled()},R.prototype.lineBeingEdited=function(){return this.m_model.lineBeingEdited()},R.prototype.sourcesBeingMoved=function(){return this.m_model.sourcesBeingMoved()},R.prototype.dataSources=function(){return this.m_model.dataSources()},R.prototype.orderedDataSources=function(e){return this.m_model.orderedDataSources(e)},R.prototype.dataSourceForId=function(e){return this.m_model.dataSourceForId(e)},R.prototype.state=function(e,t,i){return this.m_model.state(e,t,i)},R.prototype.asyncState=function(){return this.m_model.asyncState()},R.prototype.restoreState=function(e,t,i){return this.m_model.restoreState(e,t,i)},R.prototype.calculateDefaultTags=function(){return this.m_model.calculateDefaultTags()},R.prototype.onTagsChanged=function(){return this.m_model.onTagsChanged()},R.prototype.changeZOrder=function(e,t){var i=new j(this.m_model,e,t);this.pushUndoCommand(i),this.emitEvent("changeZOrder",[e,t])},R.prototype._removeAllStudiesImpl=function(){for(var e=this.m_model.dataSources(),t=0;t<e.length;t++){var i=e[t];(TradingView.isInherited(i.constructor,v)&&!i.isChildStudy()&&i.removeByRemoveAllStudies()||TradingView.isInherited(i.constructor,g))&&this.removeSource(i)}},R.prototype.removeAllStudies=function(){
this.beginUndoMacro(window.t("Remove all studies")),this._removeAllStudiesImpl(),this.endUndoMacro()},R.prototype._removeAllDrawingToolsImpl=function(e){var t=this;this.selectionMacro((function(){t.lineBeingCreated()&&t.cancelCreatingLine();for(var i=t.dataSources(),r=0;r<i.length;r++){var o=i[r];TradingView.isInherited(o.constructor,n)&&o.isActualSymbol()&&o.isUserDeletable()&&(e&&e!==o._constructor||t.removeSource(o))}}))},R.prototype.removeAllDrawingTools=function(e){this.beginUndoMacro(window.t("Remove Drawings")),this._removeAllDrawingToolsImpl(),this.endUndoMacro()},R.prototype.removeAllStudiesAndDrawingTools=function(){this.beginUndoMacro(window.t("Remove all studies and drawing tools")),this._removeAllDrawingToolsImpl(),this._removeAllStudiesImpl(),this.endUndoMacro()},R.prototype.unlinkLines=function(e){this.beginUndoMacro("Stop syncing line tool(s)");var t=this.m_model,i=this;e.forEach((function(e){var r=new G(t,e);i.pushUndoCommand(r)})),this.endUndoMacro()},R.prototype.moveLeft=function(){try{this.beginUndoMacro("Move Left")}catch(i){return}var e=this.m_model.timeScale().width(),t=this;f({to:e/5,onStep:function(e){t.startScrollTime(e),t.scrollTimeTo(0),t.endScrollTime()},onComplete:function(){t.endUndoMacro()}})},R.prototype.moveRight=function(){try{this.beginUndoMacro("Move Right")}catch(i){return}var e=this.m_model.timeScale().width(),t=this;f({to:e/5,onStep:function(e){t.startScrollTime(0),t.scrollTimeTo(e),t.endScrollTime()},onComplete:function(){t.endUndoMacro()}})},R.prototype.scrollChart=function(e){this.m_model.scrollEnabled()&&(this.startScrollTime(0),this.scrollTimeTo(e),this.endScrollTime())},R.prototype.scrollChartByBar=function(e){if(this.m_model.scrollEnabled()){var t=e*this.m_model.timeScale().barSpacing();this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime()}},R.prototype.resetScales=function(){this.beginUndoMacro("Reset scales"),this.resetTimeScale(),this.panes().forEach((function(e){e.leftPriceScales().forEach((function(t){this.resetPriceScale(e,t)}),this),e.rightPriceScales().forEach((function(t){this.resetPriceScale(e,t)}),this)}),this),this.endUndoMacro(),this.m_model.recalculateAllPanes()},R.prototype.zoomToViewport=function(e,t,i,r,n){var o=new H(new W(this.m_model,e,t,i,r,n),this.m_zoomStack,!0);this.pushUndoCommand(o)},R.prototype.zoomFromViewport=function(){var e=new H(this.m_zoomStack.head(),this.m_zoomStack,!1);this.pushUndoCommand(e)},R.prototype.zoomStack=function(){return this.m_zoomStack},R.prototype._restoreFactoryDefaults=function(e){var t=new T(this.m_model,e);this.pushUndoCommand(t)},R.prototype._restoreLineToolFactoryDefaults=function(e){var t="Load default drawing template";this.beginUndoMacro(t),this.saveLineToolState(e,t);var i=new T(this.m_model,e.properties(),t);this.pushUndoCommand(i),this.saveLineToolState(e,t),this.endUndoMacro(),this.model().updateSource(e)},R.prototype.restorePropertiesForSource=function(e){r(e)?this._restoreLineToolFactoryDefaults(e):this._restoreFactoryDefaults(e.properties())},R.prototype.restorePreferences=function(){
var e=new A(this.model());this.pushUndoCommand(e)},R.prototype.applyPreferences=function(e){var t=new U(this.model(),e);this.pushUndoCommand(t)},R.prototype.chartLoadTheme=function(e,t,i,r){var n=new z(e,t,i);r?n.redo():this.pushUndoCommand(n)},R.prototype.applyLineToolTemplate=function(e,t,i){this.beginUndoMacro(i),this.saveLineToolState(e,i);var r=new P(e,t,i);this.pushUndoCommand(r),this.saveLineToolState(e,i),this.endUndoMacro(),this.model().updateSource(e)},R.prototype.onSimpleZoomIn=function(){return this._onSimpleZoomIn},R.prototype.onSimpleZoomOut=function(){return this._onSimpleZoomOut},R.prototype.getAlertsList=function(){return this.m_model.getAlertsList()},R.prototype.isJustClonedChart=function(){return this._chartWidget.isJustClonedChart()},R.prototype.cutSourcesToClip=function(e){if(!this.copySourcesToClip(e))return!1;var t=1===e.length?"Cut "+e[0].title:"Cut sources";this.beginUndoMacro(t);var i=this;this.m_model.selectionMacro((function(){e.forEach((function(e){i.removeSource(e)}))})),this.endUndoMacro()},R.prototype.trackTime=function(){return this._chartWidget.trackTime()},R.prototype.isInReplay=function(){return this.m_model.isInReplay()},R.prototype.switchToReplay=function(e,t){this._undoHistory.clearStack(),this.m_model.switchToReplay(e,t)},R.prototype.switchToRealtime=function(){this._undoHistory.clearStack(),this.m_model.switchToRealtime()},R.prototype.saveLineToolState=function(e,t){this.pushUndoCommand(new w(this.m_model,[e],t))},R.prototype.togglePriceScaleAutoScaleMode=function(e){var t={autoScale:!e.isAutoScale()};this.setPriceScaleMode(t,e,"Auto Scale")},R.prototype.togglePriceScaleLockScaleMode=function(e){var t={lockScale:!e.isLockScale()};this.setPriceScaleMode(t,e,"Lock Scale")},R.prototype.setPriceScaleRegularScaleMode=function(e){this.setPriceScaleMode({log:!1,percentage:!1,indexedTo100:!1},e,"Regular")},R.prototype.togglePriceScaleIndexedTo100ScaleMode=function(e){var t={indexedTo100:!e.isIndexedTo100()};this.setPriceScaleMode(t,e,"Indexed to 100")},R.prototype.togglePriceScalePercentageScaleMode=function(e){var t={percentage:!e.isPercentage()};this.setPriceScaleMode(t,e,"Percent")},R.prototype.togglePriceScaleLogScaleMode=function(e){var t={log:!e.isLog()};this.setPriceScaleMode(t,e,"Logarithmic")},R.prototype.invertPriceScale=function(e){var t=e.properties().isInverted;this.setProperty(t,!t.value(),"Invert Scale")},R.prototype.destroy=function(){this.mainSeries().onTimeFrameApplied().unsubscribeAll(this),this._appliedTimeFrame.destroy(),this.model().destroy()},inherit(V,S),V.prototype.redo=function(){this._oldMode=this._priceScale.mode(),m(!0),this._priceScale.setMode(this._newMode),m(!1),this._model&&(this._model.recalculateAllPanes(),this._model.lightUpdate())},V.prototype.undo=function(){m(!0),this._priceScale.setMode(this._oldMode),m(!1),this._oldMode=null,this._model&&(this._model.recalculateAllPanes(),this._model.lightUpdate())},inherit(B,S),B.prototype.redo=function(){this._oldValue=this._property.value(),this._oldMode=this._priceScale.mode(),m(!0),
this._priceScale.setMode({autoScale:!1,percentage:!1,log:!1}),this._property.setValue(this._newValue),m(!1),this._model&&(this._model.recalculateAllPanes(),this._model.lightUpdate())},B.prototype.undo=function(){m(!0),this._property.setValue(this._oldValue),this._priceScale.setMode(this._oldMode),m(!1),this._oldMode=null,this._model&&(this._model.recalculateAllPanes(),this._model.lightUpdate())},inherit(N,S),N.prototype.undo=function(){null===this.m_newPriceScaleState?(this.m_newPriceScaleState=this.m_priceScale.state(),this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_state)):O.logDebug("PriceScaleChangeUndoCommand.undo: Command is already undone")},N.prototype.redo=function(){null!==this.m_newPriceScaleState?(this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_newPriceScaleState),this.m_newPriceScaleState=null):O.logDebug("PriceScaleChangeUndoCommand.redo: Command is not undone")},inherit(F,S),F.prototype.redo=function(){this._model.modifySeries(this._series,this._symbol,this._interval)},F.prototype.undo=function(){this._model.modifySeries(this._series,this._oldSymbol,this._oldInterval)},inherit(j,S),j.prototype.undo=function(){var e=this,t=this._sourcesIds.map((function(t){return e._model.dataSourceForId(t)}));this._shift<0&&t.reverse(),t.forEach((function(t){e._model.changeZOrder(t,-e._shift)}))},j.prototype.redo=function(){var e=this,t=this._sourcesIds.map((function(t){return e._model.dataSourceForId(t)}));this._shift>0&&t.reverse(),t.forEach((function(t){e._model.changeZOrder(t,e._shift)}))},R.prototype.removePane=function(e){var t=this.m_model.panes()[e].dataSources().slice();this.removeSources(t,!1,"Remove pane")},inherit(W,S),W.prototype.redo=function(){this._timeScaleState=this._model.timeScale().state(),this._priceScaleState=this._pane.defaultPriceScale().state(),this._model.zoomToViewport(this._startBar,this._endBar,this._startPrice,this._endPrice,this._pane)},W.prototype.undo=function(){this._model.timeScale().restoreState(this._timeScaleState),this._pane.defaultPriceScale().restoreState(this._priceScaleState),this._model.recalculateAllPanes(),this._model.lightUpdate()},inherit(H,S),H.prototype.undo=function(){if(this._inOut){if(this._baseCmd!==this._zoomStack.head())return void O.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}else this._baseCmd.redo(),this._zoomStack.push(this._baseCmd)},H.prototype.redo=function(){if(this._inOut)this._baseCmd.redo(),this._zoomStack.push(this._baseCmd);else{if(this._baseCmd!==this._zoomStack.head())return void O.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}},inherit(U,S),U.prototype._merge=function(e){m(!0),this._model.applyPreferences(e),m(!1)},U.prototype.redo=function(){this._merge(this._newProperties),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales()},U.prototype.undo=function(){this._merge(this._oldProperties),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales()},inherit(z,S),z.prototype._merge=function(e,t,i){
var r=this._model;m(!0),e&&(r.properties().paneProperties.mergeAndFire(e.paneProperties),r.properties().scalesProperties.mergeAndFire(e.scalesProperties)),r.mainSeries().priceScale().setMode({autoScale:t.priceAxisProperties.autoScale,percentage:t.priceAxisProperties.percentage,log:t.priceAxisProperties.log,lockScale:t.priceAxisProperties.lockScale}),r.mainSeries().properties().mergeAndFire(t),r.mainSeries().properties().saveDefaults(),r.mainSeries().createPaneView(),r.mainSeries().invalidateBarStylesCache(),r._version=t.version,r.recalculateAllPanes(),r.fullUpdate(),r.properties().saveDefaults(),r.sessions().restoreState({properties:i}),m(!1)},z.prototype.undo=function(){this._merge(this._oldChartProps,this._oldSeriesProps,this._oldSessionsProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},z.prototype.redo=function(){this._merge(this._newChartProps,this._newSeriesProps,this._newSessionProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},inherit(G,S),G.prototype.redo=function(){delete this._model.dataSourceForId(this._sourceId).linkKey},G.prototype.undo=function(){this._model.dataSourceForId(this._sourceId).linkKey=this._linkKey},t.ChartUndoModel=R,t.PriceScaleChangeUndoCommand=N}).call(this,i("aIyQ"))},dJ3D:function(e,t,i){"use strict";(function(e){var t=i("x+tH").WSMode,r=!1,n=!1,o=Date.now()-3e5,s=i("7MZv").showTooManyStudiesNotice,a=i("XzZr"),l=a.ChartApiInterface,c=a.HandlerInfo,u=i("TFEc").AuthToken,h=i("Wt0y"),d=i("xlbu").telemetry,p=i("i4z7"),f=null,_=i("Kxc7"),m=i("ePL1");i("iSkW");var v=i("NP3r").enabled,g=i("NP3r").getConfig,y=i("bKsZ").ProductFeatures,b=i("ogJP").requireFullInterfaceImplementation,S=i("+GxX").isFeatureEnabled,w=i("e3/o").randomHash,P=i("pP4S").ResponseMethods,C=i("mNbo").isOnMobileAppPage,T=i("txPx"),x=T.getLogger("ChartApi.Core",{color:"#706"}),I=T.getLogger("ChartApi.ChartSession",{color:"#706"}),E=T.getLogger("ChartApi.ChartSession",{highRate:!0,maxCount:100,color:"#706"}),L=T.getLogger("ChartApi.ChartSession",{maxCount:0,color:"#706"}),O=T.getLogger("ChartApi.ChartSession",{maxCount:50,color:"#706"}),A=T.getLogger("ChartApi.QuoteSession",{maxCount:50,color:"#660"}),M=T.getLogger("ChartApi.QuoteSession",{highRate:!0,maxCount:10,color:"#660"}),k=T.getLogger("ChartApi.TrafficMeter",{maxCount:20,color:"#268"}),D=i("rOif"),R=i("lt96").exchanges,V=i("BlPY"),B=i("0UyP").getTracker,N=i("iWlB").BackendSessionEventType,F=i("Cf1E").errorToString,j=i("ONPi"),W=i("uDHo").TIMEFRAMETYPE,H=Number(window.TELEMETRY_SERVER_TIME_DIFF_THRESHOLD)||3e3;function U(e){if(this._isAuthTokenLoaded=!1,this._authTokenDfd=null,this._notificationHandlers={},this._sessions={},this._dataHandleModule=null,this.studyCounter=0,this.childStudyCounter=0,this._sendingQueuedRequestsCount=0,this._pendingMessagesQueue=[],this._wasConnectedAtLeastOnce=!1,this._trafficStats={total:0,sinceConnect:0,lastChunk:0},this._wsBackendConnection=e,this._wsBackendConnection.onReconnect(this._bindSocketEvents.bind(this)),
this._wsBackendConnection.setLogger(x,T.getLogHistory),this._wsBackendConnection.setTelemetry(d),this._bindSocketEvents(),this._lowQualityEnabled=!1,this._turnaroundPrefix=w(),this._turnaroundIndex=0,null===f){x.logInfo("Delayed loading protobuf handler after 6000ms"),setTimeout(this._loadProtobufHandler.bind(this),6e3)}else x.logInfo("Protobuf handler is loaded already");function t(e){if(0===e)return"0";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+["","KB","MB","GB","TB"][t]}setInterval(function(){k.logNormal("Last 30 seconds:"+t(this._trafficStats.lastChunk)+" Since last connect:"+t(this._trafficStats.sinceConnect)+" Total traffic:"+t(this._trafficStats.total)),this._trafficStats.lastChunk=0}.bind(this),3e4)}function z(e){if(null===e)return"";if(e.type===W.PeriodBack){var t=e.value;return"YTD"!==t&&"D"===t.slice(-1)&&(t=t.slice(0,-1)),t}return"r,"+e.from+":"+e.to}U.prototype.defaultWatchlistSymbols=function(){var e=D[window.locale];return void 0===e&&(e=D.default),e},U.prototype.defaultResolutions=function(){var e=["1","3","5","15","30","45","60","120","180","240","1D","1W","1M","1000R","100R","10R","1R"];if(!_.enabled("widget")&&S("seconds_bars")){return["1S","5S","15S","30S"].concat(e)}return e},U.prototype.availableCurrencies=function(){return Promise.resolve(["USD","RUB","EUR","CAD"])},U.prototype.supportedSymbolsTypes=function(){return"bovespa"===TradingView.widgetCustomer?V.filter((function(e){return-1!==["","stock","futures","index"].indexOf(e.value)})):"cme"===TradingView.widgetCustomer?V.filter((function(e){return e.value!==m.types.QUANDL})):V},U.prototype.supportedExchangesList=function(){return R},U.prototype.futuresRegex=function(){return/^(.+?)([12]!|\w\d{4})?$/},U.prototype.enableLowQualityMode=function(){this._lowQualityEnabled=!0,this._sendLowQualityModeIfEnabled()},U.prototype._sendLowQualityModeIfEnabled=function(){this._lowQualityEnabled&&this.connected()&&this._sendRequest("set_data_quality",[])},U.prototype.setLoadNew=function(e){this._loadNewBars=!!e},U.prototype.quoteCreateSession=function(e){return this._sendRequest("quote_create_session",[e])},U.prototype.quoteDeleteSession=function(e){return this._sendRequest("quote_delete_session",[e])},U.prototype.quoteSetFields=function(e,t){return this._sendRequest("quote_set_fields",[e,t])},U.prototype.quoteAddSymbols=function(e,t){return this._sendRequest("quote_add_symbols",[e,t])},U.prototype.quoteRemoveSymbols=function(e,t){return this._sendRequest("quote_remove_symbols",[e,t])},U.prototype.quoteFastSymbols=function(e,t){return this._sendRequest("quote_fast_symbols",[e,t])},U.prototype.quoteHibernateAll=function(e){return this._sendRequest("quote_hibernate_all",[e])},U.prototype.depthCreateSession=function(e,t,i){return this._sendRequest("depth_create_session",[e,t,i])},U.prototype.depthDeleteSession=function(e){return this._sendRequest("depth_delete_session",[e])},U.prototype.depthSetSymbol=function(e,t){return this._sendRequest("depth_set_symbol",[e,t])},U.prototype.depthClearSymbol=function(e){
return this._sendRequest("depth_clear_symbol",[e])},U.prototype.depthSetScale=function(e,t){return this._sendRequest("depth_set_scale",[e,t])},U.prototype.chartCreateSession=function(e,t){return this._sendRequest("chart_create_session",[e,t])},U.prototype.chartDeleteSession=function(e){return this._sendRequest("chart_delete_session",[e])},U.prototype.createSession=function(e,t){this._sessions[e]=t,this._notificationHandlers[e]={},this.connected()&&this._isAuthTokenLoaded&&t.onMessage({method:"connected",params:[]})},U.prototype.removeSession=function(e){delete this._sessions[e],delete this._notificationHandlers[e]},U.prototype.connected=function(){return!!this._isConnected},U.prototype._bindSocketEvents=function(){var e=this;this.connectDfd=new Promise((function(t,i){e._wsBackendConnection.on("connect",(function(){e._onConnect(),t()})),e._wsBackendConnection.on("message",e._onMessage.bind(e)),e._wsBackendConnection.on("disconnect",(function(){e._authTokenDfd&&(e._authTokenDfd=null),delete e._isConnected,e.studyCounter=0,e._notifySessions({method:"disconnected",params:[]}),delete e._metadataCallback,e._disconnectCount=(e._disconnectCount||0)+1,e._wsBackendConnection.isConnected()&&(e._telemetryDisconnectTimeout=setTimeout((function(){d.sendChartReport("disconnect")}),5e3),e._wsBackendConnection.isMaxReconnects()&&(e._notifySessions({method:"reconnect_bailout",params:[]}),i(),d.sendChartReport("reconnect_bailout")))}))}))},U.prototype.serverTimeOffset=function(){return this._serverTimeOffset?this._serverTimeOffset:0},U.disconnectReason=function(e){
return 1e3===e?"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.":1001===e?'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.':1002===e?"An endpoint is terminating the connection due to a protocol error":1003===e?"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).":1004===e?"Reserved. The specific meaning might be defined in the future.":1005===e?"No status code was actually present.":1006===e?"The connection was closed abnormally, e.g., without sending or receiving a Close control frame":1007===e?"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).":1008===e?'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.':1009===e?"An endpoint is terminating the connection because it has received a message that is too big for it to process.":1010===e?"An endpoint (client) is terminating the connection because it has expected the server to negotiate one or more extension, but the server didn't return them in the response message of the WebSocket handshake. <br /> Specifically, the extensions that are needed are: "+event.reason:1011===e?"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.":1015===e?"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).":"Unknown reason"},U.prototype._getAuthTokenDfd=function(e){if(this._loadNewBars)return Promise.resolve("load_new_token");if(_.enabled("widget")||-1!==window.location.search.indexOf("widget_token")||-1!==window.location.hash.indexOf("widget_token")){var t=window.TradingView&&window.TradingView.widgetCustomer||"";return Promise.resolve(j[t]||"widget_user_token")}if(C("any")){if(!window.is_authenticated)return Promise.resolve("widget_user_token-mobile-app");if(window.shopConf&&!window.user.is_pro&&!window.shopConf.offers.length)return Promise.resolve("widget_user_token-mobile-app-free")}if(!window.is_authenticated)return Promise.resolve("unauthorized_user_token");var i=this;if(!i._authTokenManager){var r=new u;i._authTokenManager=r,i._authTokenManager.invalidated.subscribe(null,(function(e){i._authTokenManager.get().then((function(e){e&&i.connected()&&i._sendRequest("set_auth_token",[e])}))}))}return i._authTokenManager.get(e)},U.prototype._onConnect=function(){if(!this.connected()){this._trafficStats.sinceConnect=0,this._isAuthTokenLoaded=!1;var e=this;this._connectOnlyOptions=this._connectOnlyOptions||{},
this._authTokenDfd=this._getAuthTokenDfd(this._connectOnlyOptions.tokenGrabSession),this._connectOnlyOptions={};var t=this._wsBackendConnection.getConnectionStart(),i=this._wsBackendConnection.getConnectionDuration();if(this._changeHandlerToJson(),this.sessionid=this._wsBackendConnection.getSessionId(),this.sessionid&&!this._isConnected){this._pendingMessagesQueue=[],this._sendingQueuedRequestsCount=0,this._isConnected=!0;var r=JSON.parse(this.sessionid),s=this._wasConnectedAtLeastOnce?N.Reconnect:N.Connect;this._wasConnectedAtLeastOnce=!0,B().then((function(e){null!==e&&e.trackBackendSession(s,r.session_id)})),this._sendLowQualityModeIfEnabled(),this._switchWSProtocol(),this._metadataServerHash=r.studies_metadata_hash||null;try{var a=r.timestamp-(new Date).valueOf()/1e3;this._serverTimeOffset=a}catch(c){this._serverTimeOffset=0}if(x.logInfo("Time shift with server:"+Math.round(this._serverTimeOffset)+" seconds."),this._authTokenDfd){this._sendingQueuedRequestsCount+=1,x.logInfo("Wait for auth token before send messages");var l=this._authTokenDfd;l.then((function(t){null!==e._authTokenDfd&&e._authTokenDfd===l?(x.logNormal("Auth token request is finished, token: "+Boolean(t)),e._authTokenDfd=null,t&&e._pendingMessagesQueue.unshift({method:"set_auth_token",args:[t]}),e._onSendingQueueRequestFinished(),e._isAuthTokenLoaded=!0,e._notifySessions({method:"connected",params:[]})):x.logNormal("Comes auth token after requesting new token or after socket disconnected")})).catch((function(e){x.logNormal(F(e))}))}else x.logWarn("Deferred auth token object is not valid"),this._isAuthTokenLoaded=!0;TradingView.WEB_SOCKET_WAS_CONNECTED=!0,d.setSessionInfo(this.sessionid),d.sendChartReport("websocket_connected"),d.sendChartReport("websocket_connection_time_frame",{value:i}),d.timeCounters.series.wsConnected=t+i,d.sendChartReport("reconnect_count_frame",{value:this._wsBackendConnection.getReconnectCount()}),d.sendChartReport("redirect_count_frame",{value:this._wsBackendConnection.getRedirectCount()}),!n&&window.performance&&window.performance.timing&&window.performance.timing.requestStart>o&&(n=!0,d.sendChartReport("before_websocket_connection_time_frame",{value:t-window.performance.timing.requestStart})),this._wsBackendConnection.resetCounters(),clearTimeout(this._telemetryDisconnectTimeout)}}},U.prototype.connect=function(e){this._connectOnlyOptions=e,this._wsBackendConnection.isConnected()||this._wsBackendConnection.isConnecting()||this._wsBackendConnection.connect()},U.prototype.disconnect=function(e){return this._wsBackendConnection.disconnect(),!0},U.prototype.switchTimezone=function(e,t){return this._sendRequest("switch_timezone",[e,t])},U.prototype.resolveSymbol=function(e,t,i,r){return d.timeCounters.series["resolve_symbol_"+e]=Date.now(),this._notificationHandlers[e][t]=new c(r,t),this._sendRequest("resolve_symbol",[e,t,i])},U.prototype.createSeries=function(e,t,i,r,n,o,s,a){this._notificationHandlers[e][t]=new c(a,t),d.timeCounters.series.marks.push("create_series_"+e);const l=z(s)
;return S("new_date_range")?this._sendRequest("create_series",[e,t,i,r,n,o,l]):(""!==l&&(n+=","+l),this._sendRequest("create_series",[e,t,i,r,n,o,null]))},U.prototype.removeSeries=function(e,t,i){return this._notificationHandlers[e][t]=new c(i,t),this._sendRequest("remove_series",[e,t])},U.prototype.modifySeries=function(e,t,i,r,n,o,s){this._notificationHandlers[e][t]=new c(s,t);const a=z(o);return S("new_date_range")?this._sendRequest("modify_series",[e,t,i,r,n,a]):(""!==a&&(n+=","+a),this._sendRequest("modify_series",[e,t,i,r,n,null]))},U.prototype.requestMoreData=function(e,t,i,r){return this._notificationHandlers[e][t]=new c(r,t),this._sendRequest("request_more_data",[e,t,i])},U.prototype.requestMetadata=function(e,t,i){var r=this;if(r._metadataCallback)r._metadataCallback.handlers.push(i);else{var n=_.enabled("widget"),o=n?"studies_metadata_widget":"studies_metadata",s=[];r._metadataCallback=function(e){r._metadataCallback=null,TVLocalForage.setItem(o,TradingView.clone(e)).then((function(){if(x.logNormal("Updated studies_metadata cache"),!n){var e=pro.hash();TVLocalForage.setItem("pro_hash",TradingView.clone(e)).then((function(){x.logNormal("Updated pro_hash cache")})).catch((function(e){x.logError("Cannot update pro_hash cache, reason: "+e)}))}})).catch((function(e){x.logError("Cannot update studies_metadata cache, reason: "+e)}));for(var t=0;t<s.length;t++){(0,s[t])(TradingView.clone(e))}},r._metadataCallback.handlers=s,r._metadataCallback.handlers.push(i),x.logNormal("Requesting pro hash"),TVLocalForage.getItem("pro_hash").then((function(i){var s=pro.hash();null!==i&&i===s||n?(x.logNormal("Pro hash has not changed, requesting from local"),TVLocalForage.getItem(o).then((function(i){var n=null!==i&&i.params[1].hash||null;if(null===n||null===r._metadataServerHash||r._metadataServerHash!==n)return x.logNormal("Metadata hash has changed (cached:'"+n+"', server:'"+r._metadataServerHash+"'')"),void r._requestMetadataFromServer(e,t,r._metadataCallback);if(pro.hasPackage("tv-volumebyprice")&&void 0===i.params[1].metainfo.find((function(e){return e.id.includes("@tv-volumebyprice")})))return x.logNormal("De-sync detected! pro.hash contains VbPR studies, but data from cache doesn't and pro.hash isn't changed, pro.hash="+s),void r._requestMetadataFromServer(e,t,r._metadataCallback);if(x.logNormal("Using studies_metadata from browser cache"),r._metadataCallback){for(var o=0;o<r._metadataCallback.handlers.length;o++){(0,r._metadataCallback.handlers[o])(TradingView.clone(i))}r._metadataCallback=null}else x.logWarn("Cached metadata received, but callback expired")})).catch((function(i){x.logError("Cannot get studies_metadata, reason: "+i),r._requestMetadataFromServer(e,t,r._metadataCallback)}))):(x.logNormal("Pro hash has changed (cached: '"+i+"', current:'"+s+"')"),r._requestMetadataFromServer(e,t,r._metadataCallback))})).catch((function(i){x.logError("Cannot get studies_metadata, reason: "+i),r._requestMetadataFromServer(e,t,r._metadataCallback)}))}},U.prototype.authTokenManager=function(){return this._authTokenManager},
U.prototype._requestMetadataFromServer=function(e,t,i){return!!i&&(x.logNormal("Request studies_metadata from server"),this._notificationHandlers[e][t]=new c(i,t),this._sendRequest("request_studies_metadata",[e,t]))},U.prototype.isCanCreateStudy=function(e,t){if(!v(y.STUDY_ON_STUDY))return!1;var i=g(y.STUDY_ON_STUDY);return!0===e?this.childStudyCounter<i.child_limit:this.studyCounter<i.limit},U.prototype.createStudy=function(e,t,i,r,n,o,a,l){if(!this.isCanCreateStudy())return s(),!1;this._notificationHandlers[e][t]=new c(a,t);var u=this._sendRequest(!0===l?"create_child_study":"create_study",[e,t,i,r,n,o]);return!1!==u&&(this.studyCounter++,l&&this.childStudyCounter++,u)},U.prototype.rebindStudy=function(e,t,i,r,n,o,s,a){if(a===l.REBIND_STUDY_STANDALONE_TO_CHILD){if(!this.isCanCreateStudy(!0))return!1;this.childStudyCounter++}else a===l.REBIND_STUDY_CHILD_TO_STANDALONE&&this.childStudyCounter--;return i=i||"",this._notificationHandlers[e][t]=new c(s,t),this._sendRequest("child_study_rebind",[e,t,i,r,n,o]),!0},U.prototype.removeStudy=function(e,t,i,r){this._notificationHandlers[e][t]=new c(i,t);var n=this._sendRequest("remove_study",[e,t]);return!1!==n&&(this.studyCounter--,r&&this.childStudyCounter--,n)},U.prototype.modifyStudy=function(e,t,i,r,n){return this._notificationHandlers[e][t]=new c(n,t),this._sendRequest("modify_study",[e,t,i,r])},U.prototype.createPointset=function(e,t,i,r,n,o,s){return this._notificationHandlers[e][t]=new c(s,t),this._sendRequest("create_pointset",[e,t,i,r,n,o])},U.prototype.modifyPointset=function(e,t,i,r,n){return this._notificationHandlers[e][t]=new c(n,t),this._sendRequest("modify_pointset",[e,t,i,r])},U.prototype.removePointset=function(e,t,i){return this._notificationHandlers[e][t]=new c(i,t),this._sendRequest("remove_pointset",[e,t])},U.prototype.requestMoreTickmarks=function(e,t,i,r){return this._notificationHandlers[e][t]=new c(r,t),this._sendRequest("request_more_tickmarks",[e,t,i])},U.prototype.requestFirstBarTime=function(e,t,i,r){return this._notificationHandlers[e][t]=new c(r,t),this._sendRequest("get_first_bar_time",[e,t,i])},U.prototype._generateNextTurnaround=function(){var e=this._turnaroundPrefix+this._turnaroundIndex;return this._turnaroundIndex+=1,e},U.prototype.replayCreateSession=function(e){return this._sendRequest("replay_create_session",[e])},U.prototype.replayDeleteSession=function(e){return this._sendRequest("replay_delete_session",[e])},U.prototype.replayReset=function(e,t,i){var r=this._generateNextTurnaround();return this._notificationHandlers[e][r]=new c(i,r),this._sendRequest("replay_reset",[e,r,t])},U.prototype.replayStart=function(e,t,i){var r=this._generateNextTurnaround();return this._notificationHandlers[e][r]=new c(i,r),this._sendRequest("replay_start",[e,r,t])},U.prototype.replayStop=function(e,t){var i=this._generateNextTurnaround();return this._notificationHandlers[e][i]=new c(t,i),this._sendRequest("replay_stop",[e,i])},U.prototype.replayStep=function(e,t,i){var r=this._generateNextTurnaround();return this._notificationHandlers[e][r]=new c(i,r),
this._sendRequest("replay_step",[e,r,t])},U.prototype.replayAddSeries=function(e,t,i,r){var n=this._generateNextTurnaround();return this._notificationHandlers[e][n]=new c(r,n),this._sendRequest("replay_add_series",[e,n,t,i])},U.prototype.replayRemoveSeries=function(e,t,i,r){var n=this._generateNextTurnaround();return this._notificationHandlers[e][n]=new c(r,n),this._sendRequest("replay_remove_series",[e,n,t,i])},U.prototype.replaySetResolution=function(e,t,i){var r=this._generateNextTurnaround();return this._notificationHandlers[e][r]=new c(i,r),this._sendRequest("replay_set_resolution",[e,r,t])},U.prototype.redirectCount=function(){return this._wsBackendConnection.getRedirectCount()},U.prototype.disconnectCount=function(){return this._disconnectCount||0},U.prototype._loadProtobufHandler=function(){x.logInfo("Start loading protobuf handler"),i.e("protobuf-handler").then(function(e){f=i("lxLC"),x.logInfo("Protobuf handler loaded."),this.connected()&&this._switchWSProtocol()}.bind(this).bind(null,i)).catch(i.oe)},U.prototype._switchWSProtocol=function(){var e=!0;if(this._wsBackendConnection.usesCompression()?(e=!1,x.logInfo("stay on json because the connection uses compression")):S("protobuf-maintenance")?(e=!1,x.logInfo("stay on json because of protobuf maintenance")):null===f&&(e=!1,x.logInfo("stay on json because of no alternatives")),e){this._sendingQueuedRequestsCount+=1;var t=JSON.stringify({m:"switch_protocol",p:["protobuf"]});this._wsBackendConnection.send(t),x.logInfo("Send command to switch protocol to protobuf. Wait response before send other messages...")}else this._changeHandlerToJson()},U.prototype._changeHandlerToProtobuf=function(){this._protocol="protobuf",this._dataHandleModule=new f,this._wsBackendConnection.switchWebsocketMode(t.Binary)},U.prototype._changeHandlerToJson=function(){this._protocol="json",this._dataHandleModule=new p,this._wsBackendConnection.switchWebsocketMode(t.Text)},U.prototype._invokeHandler=function(e,t){e&&e(t)},U.prototype._flushPendingMessages=function(){x.logInfo("Flush pending messages. Count="+this._pendingMessagesQueue.length),this._pendingMessagesQueue.forEach((function(e){this._sendRequest(e.method,e.args)}),this),this._pendingMessagesQueue=[]},U.prototype._sendRequest=function(e,t){if(0!==this._sendingQueuedRequestsCount)return this._pendingMessagesQueue.push({method:e,args:t}),!0;var i=this._dataHandleModule[e].apply(this._dataHandleModule,t),r={m:e,p:i};if(["create_study","child_study_rebind","create_child_study","modify_study"].includes(e)&&r.p.inputs){var n=JSON.parse(r.p.inputs.readString(r.p.inputs.remaining(),"b"));r.p.inputs.clear();var o=Object.assign({},r.p);o.inputs=n;var s={m:e,p:o},a=JSON.stringify(s)}else a=JSON.stringify(r);if("json"===this._protocol?i.length>0:i.session){var l="json"===this._protocol?i[0]:i.session;l.startsWith("qs_")?A.logNormal("send: "+a):l.startsWith("cs_")&&I.logNormal("send: "+a)}else x.logNormal("send: "+a);var c=this._dataHandleModule.prepareEncodeMessage(e,i);return this._wsBackendConnection.send(c)},
U.prototype._onMessage=function(e){this._calcTrafficStats(e);var t=this.unpack(e);if("protocol_switched"===t.method&&t.params[0]!==this._protocol)return x.logInfo("Protocol changing accepted. Change handler and try flush queue"),this._changeHandlerToProtobuf(),void this._onSendingQueueRequestFinished();this._dispathNotification(t,e)},U.prototype._onSendingQueueRequestFinished=function(){this._sendingQueuedRequestsCount-=1,x.logInfo("Sending queue request finished. Remaining pending requests="+this._sendingQueuedRequestsCount),this._sendingQueuedRequestsCount<0&&x.logError("Invalid queue state="+this._sendingQueuedRequestsCount),0===this._sendingQueuedRequestsCount&&this._flushPendingMessages()},U.prototype._convertTimescaleResponse=function(e){return this._dataHandleModule.convertTimescaleResponse(e)},U.prototype._appendDuration=function(e,t){return e?t+", duration: "+Math.round(Date.now()/1e3-e+this._serverTimeOffset)+"s":t},U.prototype._dispathNotification=function(e,t){var i=e.params.shift();if(this._notificationHandlers[i]){var n=e.params[0];if("symbol_resolved"===e.method){var s=e.params[1].full_name;d.sendChartReport("symbol_resolved",{count:1,additional:{symbol:s}});var a=d.timeCounters.series["resolve_symbol_"+i];if("number"==typeof a){var l=Date.now()-a,c=e.params[e.params.length-1];if(c){var u=Math.round(1e3*(c-this.serverTimeOffset()))-a,h=u>0&&l-u>=H;d.sendChartReport("symbol_resolve_server_time_frame",{value:h?u:l,additional:{symbol:s}})}d.sendChartReport("symbol_resolve_time_frame",{value:l,additional:{symbol:s}})}}if(["series_error","series_completed"].includes(e.method)&&d.timeCounters.series.marks.length>0){var p="create_series_"+i,f=d.timeCounters.series.marks.indexOf(p);f>=0&&d.timeCounters.series.marks.splice(f,1)}if(d.timeCounters.series.wsConnected&&"series_error"===e.method&&0===d.timeCounters.series.marks.length&&delete d.timeCounters.series.wsConnected,d.timeCounters.series.wsConnected&&"series_completed"===e.method&&(d.sendChartReport("first_series_full_time_frame",{value:Date.now()-d.timeCounters.series.wsConnected}),delete d.timeCounters.series.wsConnected,d.timeCounters.series.marks=[],!r&&window.performance&&window.performance.timing&&window.performance.timing.requestStart>o&&(r=!0,d.sendChartReport("page_full_load_time_frame",{value:Date.now()-window.performance.timing.requestStart}))),i.startsWith("cs_")){var _="recv: "+("json"===this._protocol?t:JSON.stringify({m:e.m,s:i,p:e.p}));"data_update"===e.method?(_=T.isHighRateEnabled()?_:_.slice(0,500),E.logNormal(this._appendDuration(e.time,_))):"study_loading"===e.method?L.logNormal(this._appendDuration(e.time,_)):"tickmark_update"===e.method?O.logNormal(this._appendDuration(e.time,_)):I.logNormal(this._appendDuration(e.time,_))}if(i.startsWith("qs_"))("quote_symbol_data"===e.method?M.logNormal:A.logNormal)("recv: "+("json"===this._protocol?t:JSON.stringify({m:e.m,s:i,p:e.p})));switch(e.method){case"timescale_update":var m=this._dataHandleModule.getTimescaleObjects(e),v=this._dataHandleModule.getTimescaleChangeset(e)
;(g=this._convertTimescaleResponse(v)).clear=0===g.changes.length&&0===g.index_diff.length&&0===g.marks.length,this._sessions[i].onMessage({method:"timescale_update",params:g}),this._dataHandleModule.prepareDataUpdateObjects(i,m,function(e,t,i){this._invokeNotificationHandler(e,t,i)}.bind(this));break;case"tickmark_update":var g;(g=this._convertTimescaleResponse(e.params[0])).changes=[],this._sessions[i].onMessage({method:"timescale_update",params:g});break;case"data_update":m=this._dataHandleModule.getDataUpdateObjects(e);this._dataHandleModule.prepareDataUpdateObjects(i,m,function(e,t,i){this._invokeNotificationHandler(e,t,i)}.bind(this));break;case"index_update":for(var y in e.params[0]){var b={method:"index_update",params:e.params[0][y]};this._invokeNotificationHandler(i,y,b)}break;case"critical_error":x.logInfo(new Date+" critical_error session:"+this.sessionid+" reason:"+e.params[0]),d.sendChartReport("critical_error"),this._sessions[i].onMessage({method:"critical_error",params:e.params});break;case"quote_symbol_data":case"quote_list_fields":case"quote_completed":case"depth_symbol_error":case"depth_symbol_success":case"dd":case"dpu":case"depth_bar_last_value":this._sessions[i].onMessage({method:e.method,params:e.params});break;case P.point:case P.resolutions:case P.endOfData:case P.instanceId:this._sessions[i].onMessage(e);break;default:this._invokeNotificationHandler(i,n,e)}}},U.prototype._isStrategy=function(e,t){var i=this._notificationHandlers[e][t];return i&&i.handler&&i.handler.isTVScriptStrategy},U.prototype._invokeNotificationHandler=function(e,t,i){if(void 0!==t){var r=this._notificationHandlers[e][t];"series_deleted"!==i.method&&"study_deleted"!==i.method&&0!==i.method.indexOf("replay_")||delete this._notificationHandlers[e][t],void 0!==r&&this._invokeHandler(r.handler,i)}},U.prototype._notifySessions=function(e){for(var t in this._sessions){if(!this._sessions.hasOwnProperty(t))return;var i=this._sessions[t];"function"==typeof i.onMessage&&i.onMessage(e)}},U.prototype.unpack=function(e){return this._dataHandleModule.unpack(e)},U.prototype._symbolSearchRequest=null,U.prototype.searchSymbols=function(e,t,i,r,n,o,s,a,l,c){var u=this;this._symbolSearchRequest&&this._symbolSearchRequest.abort();var p=location.protocol+"//"+window.SS_HOST;h.isProd()?p+="/symbol_search/":p+="/local_search/",window.SS_URL&&(p=window.SS_URL);var f={text:e,exchange:t,type:i,hl:n,lang:r};window.SS_DOMAIN_PARAMETER&&(f.domain=window.SS_DOMAIN_PARAMETER),o&&(f.strict=1),i===m.types.QUANDL&&(p="https://quandlapi.tradingview.com/api/v3/datasets.json",f={query:e,database_code:t}),s&&(f.broker=s,a&&(f.tradable=!0),l&&(f.unhide=l));var _=Object.keys(f).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(f[e])})).join("&"),v=new XMLHttpRequest;v.open("GET",p+"?"+_);var g=(new Date).getTime();function y(){var e=(new Date).getTime()-g;d.sendChartReport("symbol_search_time_frame",{value:e})}function b(){y(),d.sendChartReport("symbol_search_http_error"),u._symbolSearchRequest=null}v.addEventListener("load",(function(){
var e=JSON.parse(v.responseText);c&&c(e),y(),d.sendChartReport("symbol_search_http_status",{value:v.status}),u._symbolSearchRequest=null})),v.addEventListener("error",b),v.addEventListener("timeout",b),this._symbolSearchRequest=v,v.send()},U.prototype.getMarks=function(e,t,i,r,n){throw Error("This method is not implemented")},U.prototype.getTimescaleMarks=function(e,t,i,r,n){throw Error("This method is not implemented")},U.prototype.getPingInfo=function(){return this._wsBackendConnection.getPingInfo()},U.prototype._calcTrafficStats=function(e){var t="protobuf"===this._protocol?e.byteLength:e.length;this._trafficStats.total+=t,this._trafficStats.sinceConnect+=t,this._trafficStats.lastChunk+=t},b(U,"TVChartApi",l,"ChartApiInterface"),window.ChartApiInstance=new U(window.WSBackendConnection),e&&e.exports&&(e.exports=U)}).call(this,i("YuTi")(e))},dTSQ:function(e,t,i){"use strict";function r(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}i.r(t),i.d(t,"regExpEscape",(function(){return r}))},dfhE:function(e,t,i){"use strict";var r,n,o;i.r(t),i.d(t,"STATUS_OFFLINE",(function(){return s})),i.d(t,"STATUS_RESOLVING",(function(){return a})),i.d(t,"STATUS_LOADING",(function(){return l})),i.d(t,"STATUS_READY",(function(){return c})),i.d(t,"STATUS_INVALID_SYMBOL",(function(){return u})),i.d(t,"STATUS_SNAPSHOT",(function(){return h})),i.d(t,"STATUS_EOD",(function(){return d})),i.d(t,"STATUS_PULSE",(function(){return p})),i.d(t,"STATUS_DELAYED",(function(){return f})),i.d(t,"STATUS_DELAYED_STREAMING",(function(){return _})),i.d(t,"STATUS_NO_BARS",(function(){return m})),i.d(t,"STATUS_REPLAY",(function(){return v})),i.d(t,"SERIES_STATUS_TEXT",(function(){return g})),i.d(t,"STYLE_LINE_TYPE_MARKERS",(function(){return y})),i.d(t,"STYLE_LINE_TYPE_STEP",(function(){return b})),i.d(t,"STYLE_LINE_TYPE_SIMPLE",(function(){return S})),i.d(t,"STYLE_BARS",(function(){return w})),i.d(t,"STYLE_CANDLES",(function(){return P})),i.d(t,"STYLE_LINE",(function(){return C})),i.d(t,"STYLE_AREA",(function(){return T})),i.d(t,"STYLE_RENKO",(function(){return x})),i.d(t,"STYLE_KAGI",(function(){return I})),i.d(t,"STYLE_PNF",(function(){return E})),i.d(t,"STYLE_PB",(function(){return L})),i.d(t,"STYLE_HEIKEN_ASHI",(function(){return O})),i.d(t,"STYLE_HOLLOW_CANDLES",(function(){return A})),i.d(t,"STYLE_BASELINE",(function(){return M})),i.d(t,"STYLE_RANGE",(function(){return k})),i.d(t,"STYLE_HILO",(function(){return D})),i.d(t,"STYLE_SHORT_NAMES",(function(){return R})),i.d(t,"SYMBOL_STRING_DATA",(function(){return V}));var s=0,a=1,l=2,c=3,u=4,h=5,d=6,p=7,f=8,_=9,m=10,v=11,g=((r={})[s]="connecting",r[a]="loading",r[l]="loading",r[c]="realtime",r[u]="invalid",r[h]="snapshot",r[d]="endofday",r[p]="endofday",r[f]="delayed",r[_]="delayed_streaming",r[m]="forbidden",r[v]="replay",r),y=0,b=1,S=2,w=0,P=1,C=2,T=3,x=4,I=5,E=6,L=7,O=8,A=9,M=10,k=11,D=12,R=((n={})[0]="bar",n[1]="candle",n[9]="hollowCandle",n[2]="line",n[3]="area",n[4]="renko",n[7]="pb",n[5]="kagi",n[6]="pnf",n[8]="ha",n[10]="baseline",n[11]="range",n[12]="hilo",n),V=((o={})[4]={
type:"BarSetRenko@tv-prostudies",basicStudyVersion:40},o[7]={type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:34},o[5]={type:"BarSetKagi@tv-prostudies",basicStudyVersion:34},o[6]={type:"BarSetPnF@tv-prostudies",basicStudyVersion:34},o[8]={type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},o[11]={type:"BarSetRange@tv-basicstudies",basicStudyVersion:72},o)},di4O:function(e,t,i){"use strict";i.r(t),i.d(t,"watermarkProperty",(function(){return u})),i.d(t,"restoreWatermarkPropertyDefaults",(function(){return h}));var r=i("eJTA"),n=i("Vdly"),o=i("tc+8"),s=i.n(o),a={visibility:!1,color:"rgba(80, 83, 94, 0.25)"};function l(){var e=n.getJSON("symbolWatermark"),t=Object.assign({},a,e);if(void 0===e){if(void 0!==n.getJSON("chartproperties")){var i=n.getJSON("chartproperties").symbolWatermarkProperties;if(void 0!==i){var o=Object(r.tryParseRgba)(i.color);t=Object.assign(t,i),null!==o&&(0!==o[3]?t.visibility=!0:(o[3]=.25,t.color=Object(r.rgbaToString)(o)))}}delete t.transparency}return t}var c=null;function u(){return null===c&&(c=new s.a(l()),n.onSync.subscribe(null,(function(){null!==c&&c.mergeAndFire(l())})),c.listeners().subscribe(null,(function(){null!==c&&n.setJSON("symbolWatermark",c.state())}))),c}function h(){null!==c&&c.mergeAndFire(a)}},dm8g:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i("bSeV");var r=i("BHQF"),n=i("txPx"),o=i("JWMC"),s=Object(n.getLogger)("User.Sync");function a(e){return e+"_"+(window.user&&window.user.username||"")}function l(e){return Object(r.fetch)("/u/sync/",{credentials:"same-origin"}).then((function(e){return e.json()}),(function(e){s.logError(e)})).then((function(t){t.is_authenticated!==window.is_authenticated&&(window.is_authenticated=t.is_authenticated,Object(o.trackEvent)("Sync User Data","Different Auth",a(e))),t.pro_plan!==window.user.pro_plan&&(window.user.pro_plan=t.pro_plan,t.pro_plan||(window.user.is_pro=void 0),Object(o.trackEvent)("Sync User Data","Different Pro Plan",a(e)))}))}},e1ZQ:function(e,t,i){"use strict";i.r(t),i.d(t,"dateFormatFunctions",(function(){return p})),i.d(t,"availableDateFormats",(function(){return f})),i.d(t,"defaultDateFormat",(function(){return _}));var r=i("YFKU"),n=i("kcTO"),o={1:r.t("Jan"),2:r.t("Feb"),3:r.t("Mar"),4:r.t("Apr"),5:r.t("May"),6:r.t("Jun"),7:r.t("Jul"),8:r.t("Aug"),9:r.t("Sep"),10:r.t("Oct"),11:r.t("Nov"),12:r.t("Dec")},s=function(e,t){return(t?e.getMonth():e.getUTCMonth())+1},a=function(e,t){return t?e.getFullYear():e.getUTCFullYear()},l=function(e,t){return Object(n.numberToStringWithLeadingZero)(function(e,t){return t?e.getDate():e.getUTCDate()}(e,t),2)},c=function(e,t){return o[s(e,t)]},u=function(e,t){return Object(n.numberToStringWithLeadingZero)(s(e,t),2)},h=function(e,t){return Object(n.numberToStringWithLeadingZero)(a(e,t)%100,2)},d=function(e,t){return Object(n.numberToStringWithLeadingZero)(a(e,t),4)},p={"dd MMM 'yy":function(e,t){return l(e,t)+" "+c(e,t)+" '"+h(e,t)},"MMM dd, yyyy":function(e,t){return c(e,t)+" "+l(e,t)+", "+d(e,t)},"MMM dd":function(e,t){return c(e,t)+" "+l(e,t)},
"yyyy-MM-dd":function(e,t){return d(e,t)+"-"+u(e,t)+"-"+l(e,t)},"yy-MM-dd":function(e,t){return h(e,t)+"-"+u(e,t)+"-"+l(e,t)},"yy/MM/dd":function(e,t){return h(e,t)+"/"+u(e,t)+"/"+l(e,t)},"yyyy/MM/dd":function(e,t){return d(e,t)+"/"+u(e,t)+"/"+l(e,t)},"dd-MM-yyyy":function(e,t){return l(e,t)+"-"+u(e,t)+"-"+d(e,t)},"dd-MM-yy":function(e,t){return l(e,t)+"-"+u(e,t)+"-"+h(e,t)},"dd/MM/yy":function(e,t){return l(e,t)+"/"+u(e,t)+"/"+h(e,t)},"dd/MM/yyyy":function(e,t){return l(e,t)+"/"+u(e,t)+"/"+d(e,t)},"MM/dd/yy":function(e,t){return u(e,t)+"/"+l(e,t)+"/"+h(e,t)},"MM/dd/yyyy":function(e,t){return u(e,t)+"/"+l(e,t)+"/"+d(e,t)}},f=Object.keys(p),_=function(){return-1!==["ja","ko","zh","zh_TW"].indexOf(window.language||"")?"yyyy-MM-dd":"dd MMM 'yy"}},e2wt:function(e,t,i){"use strict";i.r(t),i.d(t,"getSeriesDangerReason",(function(){return n}));var r=i("PjMa");function n(e){if(e.isSpread())return r.DataSourceDangerReason.Spread;var t=e.symbolInfo();return t&&"CRYPTOCAP"===t.exchange?r.DataSourceDangerReason.CryptoCap:null}},"e3/o":function(e,t,i){"use strict";i.r(t),i.d(t,"guid",(function(){return n})),i.d(t,"randomHash",(function(){return o})),i.d(t,"randomHashN",(function(){return s}));var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function o(){return s(12)}function s(e){for(var t="",i=0;i<e;++i){var n=Math.floor(Math.random()*r.length);t+=r[n]}return t}},e45J:function(e,t,i){"use strict";i.r(t),i.d(t,"UTM_PARAM_NAMES",(function(){return o})),i.d(t,"filterUtmInfo",(function(){return s})),i.d(t,"buildUtmQueryString",(function(){return a})),i.d(t,"buildUtmQueryStringFromUrlParams",(function(){return l}));var r=i("24R9"),n=i("25b6"),o=["utm_source","utm_medium","utm_campaign"];function s(e){var t={};return o.forEach((function(i){var r=e[i];"string"==typeof r&&""!==r&&(t[i]=Object(n.htmlEscape)(r))})),t}function a(e,t){void 0===t&&(t=!1);var i=Object(r.createUrlParams)(e);return i&&t?"?"+i:i}function l(e){return a(s(Object(r.getUrlParams)()),e)}},e92V:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return a}));var r=i("OH2X"),n=i("rwPJ");function o(e){return"LineToolVbPFixed"===e||"LineToolRegressionTrend"===e||"LineToolAnchoredVWAP"===e||e in n}function s(e){return e in r||o(e)}function a(e){switch(e){case"LineToolBalloon":case"LineToolText":case"LineToolTextAbsolute":case"LineToolCallout":case"LineToolNote":case"LineToolNoteAbsolute":return!0}return!1}},eI3D:function(e,t,i){"use strict";i.r(t),i.d(t,"OFFERS",(function(){return r}));var r={trial:"trial",early_access:"early_access",unsubscribe_trial:"unsubscribe_trial",unsubscribe_year:"unsubscribe_year",upsell:"upsell",black_friday:"black_friday",cyber_monday:"cyber_monday",custom_discount:"custom_discount",longer_cycle:"longer_cycle",upgrade:"upgrade",last_chance:"last_chance",one_usd:"one_usd",three_months:"three_months"}},
eJTA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("ivNn");function n(e,t,i){return r.isNaN(t)||t<e?e:t>i?i:Math.round(t)}function o(e,t,i){return r.isNaN(t)||t<e?e:t>i?i:Math.round(1e4*t)/1e4}function s(e){return n(0,e,255)}function a(e){return n(0,e,255)}function l(e){return n(0,e,255)}function c(e){return o(0,e,1)}function u(e){return o(0,e,1)}function h(e){return o(0,e,1)}function d(e){return o(0,e,1)}function p(e){return o(0,e,1)}function f(e){return o(0,e,1)}function _(e){var t=e[0]/255,i=e[1]/255,r=e[2]/255,n=Math.min(t,i,r),o=Math.max(t,i,r),s=0,a=0,l=(n+o)/2;if(n===o)s=0,a=0;else{var c=o-n;switch(a=l>.5?c/(2-o-n):c/(o+n),o){case t:s=((i-r)/c+(i<r?6:0))/6;break;case i:s=((r-t)/c+2)/6;break;case r:s=((t-i)/c+4)/6}}return[s,a,l]}function m(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function v(e){var t,i,r,n=e[0],o=e[1],c=e[2];if(0===o)t=i=r=c;else{var u=c<.5?c*(1+o):c+o-c*o,h=2*c-u;t=m(h,u,n+1/3),i=m(h,u,n),r=m(h,u,n-1/3)}return[s(255*t),a(255*i),l(255*r)]}t.normalizeRedComponent=s,t.normalizeGreenComponent=a,t.normalizeBlueComponent=l,t.normalizeAlphaComponent=c,t.rgb=function(e,t,i){return[s(e),a(t),l(i)]},t.areEqualRgb=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.rgba=function(e,t,i,r){if(Array.isArray(e)){var n=e;return r=t,[n[0],n[1],n[2],c(r)]}var o=t;return i=i||0,r=r||0,[s(e),a(o),l(i),c(r)]},t.areEqualRgba=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.normalizeHue=u,t.normalizeHslSaturation=h,t.normalizeHsvSaturation=d,t.normalizeLightness=p,t.normalizeValue=f,t.hsl=function(e,t,i){return[u(e),h(t),p(i)]},t.areEqualHsl=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.hsv=function(e,t,i){return[u(e),d(t),f(i)]},t.areEqualHsv=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.rgbToHsl=_,t.hslToRgb=v,t.rgbToHsv=function(e){var t=e[0],i=e[1],r=e[2],n=t/255,o=i/255,s=r/255,a=Math.min(n,o,s),l=Math.max(n,o,s),c=l-a,u=0,h=0===l?0:c/l,d=l;if(l===a)u=0;else switch(l){case t:u=((o-s)/c+(o<s?6:0))/6;break;case i:u=((s-n)/c+2)/6;break;case r:u=((n-o)/c+4)/6}return[u,h,d]},t.hsvToRgb=function(e){var t=e[0],i=e[1],r=e[2],n=Math.floor(6*t),o=6*t-n,c=r*(1-i),u=r*(1-o*i),h=r*(1-(1-o)*i),d=0,p=0,f=0;switch(n%6){case 0:d=r,p=h,f=c;break;case 1:d=u,p=r,f=c;break;case 2:d=c,p=r,f=h;break;case 3:d=c,p=u,f=r;break;case 4:d=h,p=c,f=r;break;case 5:d=r,p=c,f=u}return[s(255*d),a(255*p),l(255*f)]};var g=[.199,.687,.114];function y(e){return g[0]*e[0]+g[1]*e[1]+g[2]*e[2]}function b(e,t,i){void 0===i&&(i=.05);var r=_(e),n=r[0]+t*i;return r[0]=u(n-Math.floor(n)),v(r)}function S(e,t,i){void 0===i&&(i=.05);var r=e[0],n=e[1],o=e[2],s=e[3],a=b([r,n,o],t,i);return[a[0],a[1],a[2],s]}t.rgbToGrayscale=y,t.distanceRgb=function(e,t){var i=e[0],r=e[1],n=e[2],o=t[0]-i,s=t[1]-r,a=t[2]-n;return Math.sqrt(o*o+s*s+a*a)},t.invertRgb=function(e){return[255-e[0],255-e[1],255-e[2]]},t.darkenRgb=function(e,t){var i=_(e);return v([i[0],i[1],p(i[2]-t/100)])},t.blendRgba=function(e,t){
var i=e[0],r=e[1],n=e[2],o=e[3],u=t[0],h=t[1],d=t[2],p=t[3],f=c(1-(1-p)*(1-o));return[s(u*p/f+i*o*(1-p)/f),a(h*p/f+r*o*(1-p)/f),l(d*p/f+n*o*(1-p)/f),f]},t.shiftRgb=b,t.shiftRgba=S,t.shiftColor=function(e,t,i){return void 0===i&&(i=.05),M(S(R(e),t,i))};var w,P,C,T,x={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",
whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function I(e,t){return t in e}function E(e){var t=w.re.exec(e);return null!==t?w.parse(t):null}function L(e){var t=P.re.exec(e);return null!==t?P.parse(t):null}function O(e){var t=C.re.exec(e);return null!==t?C.parse(t):null}function A(e){var t=T.re.exec(e);return null!==t?T.parse(t):null}function M(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function k(e){if(e=e.toLowerCase(),I(x,e)){var t=L(x[e]);if(null!==t)return t;throw new Error("Invalid named color definition")}var i=E(e);if(null!==i)return i;var r=L(e);if(null!==r)return r;var n=O(e);if(null!==n)return n;var o=A(e);return null!==o?[o[0],o[1],o[2]]:null}function D(e){if(e=e.toLowerCase(),I(x,e)){var t=L(x[e]);if(null!==t)return[t[0],t[1],t[2],1];throw new Error("Invalid named color definition")}var i=E(e);if(null!==i)return[i[0],i[1],i[2],1];var r=L(e);if(null!==r)return[r[0],r[1],r[2],1];var n=O(e);if(null!==n)return[n[0],n[1],n[2],1];var o=A(e);return null!==o?o:null}function R(e){var t=D(e);if(null!==t)return t;throw new Error("Passed color string does not match any of the known color representations")}!function(e){e.re=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,e.parse=function(e){return[s(parseInt(e[1],10)),a(parseInt(e[2],10)),l(parseInt(e[3],10))]}}(w||(w={})),t.rgbToString=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},function(e){e.re=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,e.parse=function(e){return[s(parseInt(e[1],16)),a(parseInt(e[2],16)),l(parseInt(e[3],16))]}}(P||(P={})),t.rgbToHexString=function(e){var t=e[0],i=e[1],r=e[2],n=t.toString(16),o=i.toString(16),s=r.toString(16);return"#"+(1===n.length?"0":"")+n+(1===o.length?"0":"")+o+(1===s.length?"0":"")+s},function(e){e.re=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/,e.parse=function(e){return[s(parseInt(e[1]+e[1],16)),a(parseInt(e[2]+e[2],16)),l(parseInt(e[3]+e[3],16))]}}(C||(C={})),function(e){e.re=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,e.parse=function(e){return[s(parseInt(e[1],10)),a(parseInt(e[2],10)),l(parseInt(e[3],10)),c(parseFloat(e[4]))]}}(T||(T={})),t.rgbaToString=M,t.rgbToBlackWhiteString=function(e,t){if(t<0||t>255)throw new Error("invalid threshold value, valid values are [0, 255]");return y(e)>=t?"white":"black"},t.tryParseRgb=k,t.parseRgb=function(e){var t=k(e);if(null!==t)return t;throw new Error("Passed color string does not match any of the known color representations")},t.tryParseRgba=D,t.parseRgba=R},ePL1:function(e,t,i){"use strict";i.r(t),i.d(t,"types",(function(){return r}));var r={ECONOMIC:"economic",QUANDL:"quandl"}},eYFQ:function(e,t,i){"use strict";i.r(t);i("bSeV");var r=i("hcRQ"),n=i("FKlR"),o=i("wuAJ");function s(e){return l(c(e),a(e))}function a(e){var t,i={shortName:e.shortName,exchange:e.exchange,proName:e.proName,type:e.type};return e.proName&&e.proName.includes(":")&&(t=e.proName.split(":"),i.exchange=t[0],i.shortName=t[1]),i}function l(e,t){
return e.replace("{tvexchange}",t.exchange||"").replace("{tvsymbol}",t.shortName||"").replace("{tvprosymbol}",t.proName||"")}function c(e){var t;return e.type&&["spread","expression"].includes(e.type)?e.proName?"/symbols/spread/{tvprosymbol}/":"/":void 0===e.shortName&&void 0===e.proName?(console.warn("Params missed"),"/"):e.type&&(t=e.type,["forex","bitcoin","crypto"].includes(t))?e.exchange?"/symbols/{tvsymbol}/?exchange={tvexchange}":"/symbols/{tvsymbol}/":e.exchange||e.proName?"/symbols/{tvexchange}-{tvsymbol}/":"/symbols/{tvsymbol}/"}function u(e,t){var i=e;if(!/{tvsymbol}|{tvexchange}|{tvprosymbol}/.test(e)){var r="tvprosymbol";void 0===t.proName&&(r="tvsymbol"),i=e+"?tvwidgetsymbol={"+r+"}"}var n=l(i,a(t));if(!Object(o.c)(n))throw new Error("The symbol URL "+n+" is not allowed.");return n}function h(e,t,i,o){var s=(window.locale_domains?Object(n.determineBaseUrl)(window.locale_domains,o):window.location.origin)+l(e,a(t));return i?Object(r.addUtmToUrl)(s,i):s}function d(e,t,i){return h(c(e),e,t,i)}function p(e,t){return h("/chart/?symbol={tvprosymbol}",e,t)}function f(e,t,i){return h(c(e)+"technicals/",e,t,i)}i.d(t,"getSymbolPagePath",(function(){return s})),i.d(t,"makeSymbolInfoWithSymbolInfoPriority",(function(){return a})),i.d(t,"renderTemplate",(function(){return l})),i.d(t,"makeSymbolPagePathTemplate",(function(){return c})),i.d(t,"makeTemplateSymbolUrl",(function(){return u})),i.d(t,"makeTemplatedSymbolPageUrl",(function(){return h})),i.d(t,"makeSymbolPageUrl",(function(){return d})),i.d(t,"makeSymbolChartUrl",(function(){return p})),i.d(t,"makeSymbolTechnicalsPageUrl",(function(){return f}))},eqEH:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return a})),i.d(t,"a",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"e",(function(){return u}));var r=i("jofe"),n={},o=new Map;function s(e,t){if(l(e))throw new Error("Service already registered");n[e.id]=t;var i=o.get(e.id);void 0!==i&&(o.delete(e.id),i.resolve(t))}function a(e){if(!l(e))throw new Error("Service not found");n[e.id]=void 0}function l(e){return void 0!==n[e.id]}function c(e){var t=n[e.id];if(void 0===t)throw new Error("ServiceLocator: Service "+e.id+" not found");return t}function u(e){if(l(e))return Promise.resolve(c(e));var t=o.get(e.id);return void 0===t&&(t=Object(r.createDeferredPromise)(),o.set(e.id,t)),t.promise}},"f+Sq":function(e,t,i){"use strict";function r(e){if(void 0===e)throw new Error("Value is undefined");return e}function n(e){if(null===e)throw new Error("Value is null");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("Assertion failed"+(t?": "+t:""))},t.ensureDefined=r,t.ensureNotNull=n,t.ensure=function(e){return n(r(e))}},f2KN:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r={allowDownsampling:!0};function n(e,t){return void 0===t&&(t=r),new o(e,t)}var o=function(){function e(e,t){var i=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(e){return i._onResolutionChanged()},
this._canvasConfiguredListeners=[],this.canvas=e,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=t,this._configureCanvas(),this._installResolutionListener()}return e.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(e.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),e.prototype.resizeCanvas=function(e){this._canvasSize={width:e.width,height:e.height},this._configureCanvas()},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){var e=this.canvas.ownerDocument.defaultView;if(null==e)throw new Error("No window is associated with the canvas");return e.devicePixelRatio>1||this._options.allowDownsampling?e.devicePixelRatio:1},enumerable:!0,configurable:!0}),e.prototype.subscribeCanvasConfigured=function(e){this._canvasConfiguredListeners.push(e)},e.prototype.unsubscribeCanvasConfigured=function(e){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(t){return t!=e}))},e.prototype._configureCanvas=function(){var e=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*e,this.canvas.height=this._canvasSize.height*e,this._emitCanvasConfigured()},e.prototype._emitCanvasConfigured=function(){var e=this;this._canvasConfiguredListeners.forEach((function(t){return t.call(e)}))},e.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var e=this.canvas.ownerDocument.defaultView;if(null==e)throw new Error("No window is associated with the canvas");var t=e.devicePixelRatio;this._resolutionMediaQueryList=e.matchMedia("all and (resolution: "+t+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},e.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},e.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},e.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},e}()},f3xO:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererUnicodeChar",(function(){return p}));var r=i("mrSG"),n=i("/SnT"),o=i.n(n),s=i("Eyy1"),a=i("aO4+"),l=i("2WC2"),c=i("VdBB"),u=i("Zp/P"),h=i("zDbI"),d=i("gBDZ"),p=function(e){function t(t,i){var r=e.call(this,t,i)||this;r._heightEnsured=Object(s.ensureDefined)(r._height);var n=t.char.slice(0,40);return r._ch=o()(n)[0]||" ",r._fontFamily=t.fontFamily||h.CHART_FONT_FAMILY,r._charCache=new d.b(r._ch,!1,!1,r._fontFamily,r._heightEnsured),r}return Object(r.__extends)(t,e),t.prototype.hitTest=function(e){
for(var t=Object(u.selectionTolerance)(this._heightEnsured),i=0,r=this._items;i<r.length;i++){var n=r[i];if(new a.Point(n.x,n.y+n.vertOffset).subtract(e).length()<=t)return new c.HitTestResult(c.HitTestResult.REGULAR)}return null},t.prototype._drawItemShape=function(e,t,i){var r,n=i.x,o=i.vertOffset>0?1:-1,s=i.y+i.vertOffset-o*Math.round(this._heightEnsured/2);r=i.style&&void 0!==i.style.color?i.style.color:this._color,this._charCache.paintTo(e,t,r,n,s,d.a.Center,i.vertOffset>0?d.c.Top:d.c.Bottom)},t.prototype._startPath=function(e,t,i,r){},t.prototype._endPath=function(e){},t}(l.b)},f6yo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("hBTJ");t.pointInHalfplane=function(e,t){var i=t.edge;return i.A*e.x+i.B*e.y+i.C>0===t.isPositive},t.pointInTriangle=function(e,t,i,n){var o=t.add(i).scaled(.5).add(n).scaled(.5),s=r.intersectLineSegments(t,i,o,e);return null===s&&(null===(s=r.intersectLineSegments(i,n,o,e))&&null===(s=r.intersectLineSegments(n,t,o,e)))},t.pointInBox=function(e,t){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},t.pointInPolygon=function(e,t){for(var i=t.length-1,r=!1,n=e.x,o=e.y,s=0;s<t.length;s++){var a=t[s],l=t[i];(a.y<o&&l.y>=o||l.y<o&&a.y>=o)&&a.x+(o-a.y)/(l.y-a.y)*(l.x-a.x)<n&&(r=!r),i=s}return r},t.pointInCircle=function(e,t,i){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)<=i*i}},fFKx:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));var r=i("mrSG"),n=i("Eyy1"),o=i("tqok"),s=i("hsV8");function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;var i=t[e.startIndex],r=t[e.endIndex];return i===o.INVALID_TIME_POINT_INDEX||r===o.INVALID_TIME_POINT_INDEX?null:(Object(n.assert)(i<=r,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:r,level:e.level,extendLeft:e.extendLeft,extendRight:e.extendRight})}function l(e,t,i){var n=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),o=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return Object(r.__assign)(Object(r.__assign)({id:t},e),{startIndex:n,endIndex:o})}},fJhV:function(e,t,i){"use strict";i.r(t),i.d(t,"LineDataSourceTimeAxisView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i){var r=e.call(this,t.model())||this;return r._active=!1,r._source=t,r._pointIndex=i,r}return Object(r.__extends)(t,e),t.prototype.setActive=function(e){this._active=e},t.prototype._getBgColor=function(){return this._active?"#1565C0":this._model.isDark()?"#1E88E5":"#2196F3"},t.prototype._getIndex=function(){if(!this._model.selection().isSelected(this._source))return null;var e=this._source.axisPoints();return e.length<=this._pointIndex?null:e[this._pointIndex].index},t}(i("cgFQ").a)},fPdn:function(e,t,i){"use strict";window.TradingView=window.TradingView||{},window.requireAll=function(e){return e.keys().map(e)},i("6jKD"),i("bZMm"),i("P5fv"),i("YFKU"),i("VUhU"),i("si6p"),i("EsMY"),i("jjqu"),i("OV6q"),i("SpsL"),i("eqD+"),i("iA8Q"),i("32f0"),i("MApU"),i("w9cH").install(),i("kEad"),i("GWkh"),i("5Vnb"),i("pAD3"),
i("QYoC"),i("oA7e"),i("qFKp"),i("1oAu"),i("ogJP"),i("jFln"),i("HbRj"),i("ruCT"),i("dJ3D"),i("RjiR"),i("k83o"),i("9goP"),i("VVxS"),i("CLNU"),i("mZrn"),i("Vdly"),i("+GxX")},fSwl:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererKagi",(function(){return o}));var r=i("VdBB"),n=i("Zp/P"),o=function(){function e(e){this._bars=e.bars,this._barSpacing=e.barSpacing,this._barLineWidth=Math.max(1,Object(n.optimalBarWidth)(e.barSpacing,1))}return e.prototype.hitTest=function(e){var t=this._bars,i=.5*this._barLineWidth;if(0===t.length)return null;if(e.x<t[0].time-i)return null;if(e.x>t[t.length-1].time+i)return null;for(var o=null,s=0,a=t;s<a.length;s++){var l=a[s];if(e.x<=l.time+i){o=l;break}}if(null===o)return null;var c=Object(n.selectionTolerance)(.5*this._barLineWidth),u=Math.min(o.high,o.low),h=Math.max(o.high,o.low);return u-c<=e.y&&e.y<=h+c?new r.HitTestResult(r.HitTestResult.REGULAR):null},e.prototype.draw=function(e,t){var i,r;e.save(),e.lineCap="square";for(var n=Math.floor(t.pixelRatio)%2?1:0,o=0,s=this._bars;o<s.length;o++){var a=s[o],l=Math.round(t.pixelRatio*this._barLineWidth*.5),c=Math.round(t.pixelRatio*a.exactTime-l),u=void 0===r||a.isUp?Math.round(t.pixelRatio*a.high-l):r,h=2*l,d=void 0;if(a.isTwoColorBar){var p=u+(m=Math.round(t.pixelRatio*a.additionalPrice-t.pixelRatio*a.high+l)),f=Math.round(t.pixelRatio*a.low-t.pixelRatio*a.additionalPrice+l),_=void 0!==i&&a.isUp?i:p+f;e.fillStyle=a.upColor,e.fillRect(c,u,h+n,m),e.fillStyle=a.downColor,e.fillRect(c,p,h+n,_+l-p+1),d=_}else{var m=Math.round(t.pixelRatio*a.low-t.pixelRatio*a.high+l);p=void 0!==i&&a.isUp?i:u+m;e.fillStyle=a.color,e.fillRect(c,u,h+n,p+l-u+1),d=p}if(!a.combinedWithProjection)if(a.isTwoColorBar?e.fillStyle=a.isUp?a.downColor:a.upColor:e.fillStyle=a.color,a.isUp)e.fillRect(Math.round((a.exactTime-this._barSpacing)*t.pixelRatio+l),d-l+1-n,Math.round(this._barSpacing*t.pixelRatio-2*l+1),2*l+n);else{var v=void 0===r?Math.round(a.open*t.pixelRatio-l):r;e.fillRect(Math.round((a.exactTime-this._barSpacing)*t.pixelRatio+l),v,Math.round(this._barSpacing*t.pixelRatio-2*l+1),2*l+n)}i=d,r=u}e.restore()},e}()},fTGZ:function(e,t,i){"use strict";(function(e,r,n){var o=i("Ss5c").LineDataSource,s=i("ogJP").isNumber,a=i("BOPY").BarsMarksContainerPaneView,l=i("BOPY").BarsMarksContainerRenderer,c=i("Bt3k").TooltipRenderer,u=i("LxhU").Interval,h=i("n5al").isPriceSourceStyle,d=i("txPx").getLogger("Chart.BarsMarksContainer");function p(t,i){var s=t._undoModel._chartWidget,a=s.onWidget(),l=!1;l=a?s._options&&!s._options.hideIdeas:!!e.enabled("bars_marks")&&TVSettings.getBool("BarsMarksContainer.visibile",!1),i?i.merge({visible:l,frozen:!1}):i=new r({visible:l,frozen:!1});var u=this;i.visible.listeners().subscribe(null,(function(t){a||s._containsData||!e.enabled("bars_marks")||TVSettings.setValue("BarsMarksContainer.visibile",!!t.value()),u._tooltip&&u._tooltip.removeAll()})),o._configureProperties(i),o.call(this,t,i),this.onNeedRepaint=new n,this._requests=[],this._marks={},this._loadedRange=null,this._getDataTimeout=null,this._collectedRange=null,
this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this.clearMarks),this._model.mainSeries().dataEvents().symbolResolved().subscribe(this,this.clearMarks),this._model.mainSeries().dataEvents().tickMarksRangeChanged().subscribe(this,this.getData),this._initialize(),this.pinnedTooltips={},this._tooltip=new c(this._createTooltip.bind(this),this)}inherit(p,o),p.prototype._constructor="Child class must override this member",p.prototype._initialize=function(e){throw new Error("Child class must override this member")},p.prototype.onClicked=function(){throw new Error("Child class must override this member")},p.prototype._getData=function(e){throw new Error("Child class must override this member")},p.prototype._createTooltip=function(){throw new Error("Child class must override this member")},p.prototype.updateDotData=function(e,t){return t},p.prototype.updatePlateData=function(e,t){},p.prototype.isAvailableInFloatingWidget=function(){return!1},p.prototype._plateViewData=function(e){return{}},p.prototype.pinTooltip=function(e,t){this.pinnedTooltips[e]=t},p.prototype.timeScale=function(){return this._model.timeScale()},p.prototype.getIntervalInTicks=function(){var e=this._model.mainSeries().properties().interval.value(),t=u.parse(e);if(!t.isValid())throw new TypeError("Unexpected interval");return t.isRange()?60:t.inMilliseconds()/1e3},p.prototype._maxDate=Math.round(new Date(2037,0,1).getTime()/1e3),p.prototype.getVisibleTickMarksRange=function(){if(this.timeScale().isEmpty())return{start:0,end:0};var e,t=this.timeScale().visibleBarsStrictRange();return t.lastBar()>this.timeScale().points().firstIndex()&&t.firstBar()<this.timeScale().points().lastIndex()?(e=t.lastBar()<this.timeScale().points().lastIndex()?this.timeScale().indexToTimePoint(t.lastBar()):this._maxDate,{start:(t={start:this.timeScale().indexToTimePoint(Math.max(t.firstBar(),this.timeScale().points().firstIndex())),end:e}).start?t.start:void 0,end:t.end?t.end:void 0}):{start:0,end:0}},p.prototype.getVisibleRangePlates=function(){var e=[],t=this.getVisibleTickMarksRange(),i=this.getIntervalInTicks();return Object.keys(this._marks).forEach((function(r){var n=this._marks[r],o=n.tickmark;o>=t.start&&o<=t.end+i&&e.push(n)}),this),e},p.prototype.getPublishedPlates=function(){var e={},t=this;return is_authenticated?(this.getVisibleRangePlates().forEach((function(i){i.is_public&&(t.pinnedTooltips[i.id]||i.user__id===user.id)&&(e[i.id]=i)})),e):e},p.prototype._maxPlatesPerBar=10,p.prototype.filterDisplayedPlates=function(e){return e=e.reduce(function(e,t){var i=this._getIndex(t.tickmark);return e[i]=e[i]||[],e[i].push(t),e}.bind(this),{}),e=Object.keys(e).reduce(function(t,i){var r=e[i];return r=(r=r.sort((function(e,t){return t.views_count-e.views_count}))).slice(0,this._maxPlatesPerBar),t.concat(r)}.bind(this),[])},p.prototype._layout=function(e){switch(e){default:case 0:return"up";case 1:return"down";case 2:return"up";case 3:case 4:case 5:case 6:return"up"}},p.prototype._theme=function(e){switch(e){default:case 0:return"neutral";case 1:return"green"
;case 2:return"red";case 3:return"yellow";case 4:return"blue";case 5:return"green";case 6:return"red"}},p.prototype._offset=function(e,t,i){var r;switch(e){default:case"up":r=null===i?t[TradingView.HIGH_PLOT]:i(t);break;case"down":r=null===i?t[TradingView.LOW_PLOT]:i(t)}return this.priceScale().priceToCoordinate(r,this.ownerSource().firstValue())},p.prototype._getIndex=function(e){return this.timeScale().timePointToIndex(e)},p.prototype.getViewData=function(){return{barWidth:this.barWidth(),plates:this.getPlatesViewData(),tooltip:this._tooltip}},p.prototype.barWidth=function(){return this.timeScale().barSpacing()},p.prototype.getPlatesViewData=function(){var e=this._model.mainSeries();if(e.data().isEmpty())return[];for(var t=h(e.style())?e.barFunction():null,i=this.filterDisplayedPlates(this.getVisibleRangePlates()),r=this,n={},o=this._model.lastHittestData(),s=(i=(i=i.map(function(e){var i=this._getIndex(e.tickmark),s=this._getBar(i);if(null===s)return!1;var a,l=this._layout(e.direction),c=this._theme(e.direction),u=o&&o.id===e.id,h=this.timeScale().indexToCoordinate(i),d=this._offset(l,s,t),p=this.priceScale().isInverted();return i in n||(n[i]={up:0,down:0}),a=n[i][l]++,TradingView.merge({id:e.id,x:h,y:d,yInverted:p,order:a,direction:l,theme:c,hovered:u,pinned:!0===r.pinnedTooltips[e.id],user__id:e.user__id,label:e.label,labelFontColor:e.labelFontColor||"#444",minSize:e.minSize||5},this._plateViewData(e))}.bind(this))).filter((function(e){return!!e}))).filter((function(e){return!0===e.hovered})),a=0;a<i.length;a++)null!=s[0]&&i[a].user__id===s[0].user__id&&(i[a].highlightByAuthor=!0);return i.sort((function(e,t){return e.hovered&&!t.hovered?1:0})),i},p.prototype._getBar=function(e){return this._model.mainSeries().data().valueAt(e)},p.prototype.paneViews=function(){var e=this;return this._properties.visible.value()?[new a(this,(function(t){return new l(t.getViewData(),e)}))]:[]},p.prototype.dataWindowView=function(){return null},p.prototype.priceAxisViews=function(){return null},p.prototype.statusView=function(){return null},p.prototype.updateAllViews=function(){},p.prototype.pointsCount=function(){return 0},p.prototype.properties=function(){return this._properties},p.prototype._rangeDifference=function(e){return e=Object.assign({},e),this._loadedRange&&(e.start<this._loadedRange.start?e.end=this._loadedRange.start:e.end>this._loadedRange.end&&(e.start=this._loadedRange.end)),e},p.prototype._rangeUnion=function(e,t){return e=Object.assign({},e),t&&(e.start=Math.min(t.start,e.start),e.end=Math.max(t.end,e.end)),e},p.prototype._pushGetDataStack=function(e){s(e.start)&&s(e.end)?(this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._collectedRange=this._rangeUnion(e,this._collectedRange),this._getDataTimeout=setTimeout(function(){this._getData(this._collectedRange),this._getDataTimeout=this._collectedRange=null}.bind(this),300)):d.logError("Wrong tickmark range")},p.prototype.roundRange=function(e){return{start:Math.round(e.start),end:Math.round(e.end)}},p.prototype.refreshData=function(){
this.getData(this._lastRange)},p.prototype.getData=function(e){s(e.start)&&s(e.end)?(this._lastRange=e,(e=Object.assign({},e)).end=this._maxDate,this._pushGetDataStack(e)):d.logError("Wrong range")},p.prototype._abortAllRequests=function(){this._requests.forEach((function(e){e.abort()})),this._requests=[],this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._getDataTimeout=this._collectedRange=null},p.prototype.clearMarks=function(){this._abortAllRequests(),this._marks={},this._loadedRange=null},t.BarsMarksContainer=p}).call(this,i("Kxc7"),i("tc+8"),i("aIyQ"))},fYB8:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneSeparator",(function(){return a}));var r=i("Eyy1"),n=i("Hr11"),o=i("S8xo"),s=i("ikwP"),a=(i("bc0y"),function(){function e(e,t,i,r){if(this._handleEl=null,this._startY=0,this._deltaY=0,this._totalHeight=0,this._totalStretch=0,this._prevStretchA=0,this._minPaneHeight=0,this._maxPaneHeight=0,this._pixelStretchFactor=0,this._mouseEventHandler=null,this._chart=e,this._paneA=e.paneWidgets()[t],this._paneB=e.paneWidgets()[i],this._row=document.createElement("tr"),this._row.style.height="1px",this._cell=document.createElement("td"),this._row.appendChild(this._cell),this._cell.classList.add("pane-separator"),this._cell.setAttribute("colspan","3"),this._cell.style.background=(this._chart.properties().childs().scalesProperties.childs().lineColor.value()||"").toString(),this._cell.addEventListener("click",(function(){})),r)this._mouseEventHandler=null;else{var n=document.createElement("div");n.classList.add("handle"),this._cell.appendChild(n),this._mouseEventHandler=new o.MouseEventHandler(n,this,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0}),this._handleEl=n}}return e.prototype.destroy=function(){null!==this._mouseEventHandler&&this._mouseEventHandler.destroy(),this._row.parentElement&&this._row.parentElement.removeChild(this._row)},e.prototype.getElement=function(){return this._row},e.prototype.hide=function(){this._row.classList.add("js-hidden")},e.prototype.show=function(){this._row.classList.remove("js-hidden")},e.prototype.mouseDownEvent=function(e){this._mouseDownOrTouchStartEvent(e)},e.prototype.touchStartEvent=function(e){this._mouseDownOrTouchStartEvent(e)},e.prototype.pressedMouseMoveEvent=function(e){this._pressedMouseOrTouchMoveEvent(e)},e.prototype.touchMoveEvent=function(e){this._pressedMouseOrTouchMoveEvent(e)},e.prototype.mouseUpEvent=function(e){this._mouseUpOrTouchEndEvent(e)},e.prototype.touchEndEvent=function(e){this._mouseUpOrTouchEndEvent(e)},e.prototype.update=function(){this._cell.style.background=this._color().toString()},e.prototype.paint=function(){},e.prototype.image=function(){var e=this._paneA.leftPriceAxisesContainer().getWidth(),t=this._paneA.width(),i=this._paneA.rightPriceAxisesContainer().getWidth(),r=this._color(),n=Object(s.createDisconnectedCanvas)(document,new s.Size(e,1)),o=Object(s.getPrescaledContext2D)(n);o.fillStyle=r,o.fillRect(0,0,e,1);var a=Object(s.createDisconnectedCanvas)(document,new s.Size(t,1)),l=Object(s.getPrescaledContext2D)(a)
;l.fillStyle=r,l.fillRect(0,0,t,1);var c=Object(s.createDisconnectedCanvas)(document,new s.Size(i,1)),u=Object(s.getPrescaledContext2D)(c);return u.fillStyle=r,u.fillRect(0,0,i,1),{type:"separator",leftAxis:{content:n.toDataURL(),canvas:n,contentWidth:e,contentHeight:1},rightAxis:{content:c.toDataURL(),canvas:c,contentWidth:i,contentHeight:1},content:a.toDataURL(),canvas:a,contentWidth:t,contentHeight:1}},e.height=function(){return 1},e.prototype._mouseDownOrTouchStartEvent=function(e){this._startY=e.pageY,this._deltaY=0,this._totalHeight=this._paneA.height()+this._paneB.height(),this._totalStretch=this._paneA.state().stretchFactor()+this._paneB.state().stretchFactor(),this._prevStretchA=this._paneA.state().stretchFactor(),this._minPaneHeight=30,this._maxPaneHeight=this._totalHeight-this._minPaneHeight,this._pixelStretchFactor=this._totalStretch/this._totalHeight,Object(r.ensureNotNull)(this._handleEl).classList.add("i-active")},e.prototype._pressedMouseOrTouchMoveEvent=function(e){this._deltaY=e.pageY-this._startY;var t=this._paneA.height(),i=Object(n.clamp)(t+this._deltaY,this._minPaneHeight,this._maxPaneHeight)*this._pixelStretchFactor,r=this._totalStretch-i;this._paneA.state().setStretchFactor(i),this._paneB.state().setStretchFactor(r),this._chart.adjustSize(),this._paneA.height()!==t&&(this._startY=e.pageY),this._chart.model().model().fullUpdate()},e.prototype._mouseUpOrTouchEndEvent=function(e){this._chart.model().addPaneStretchFactorUndoCommand(this._paneA.state(),this._paneB.state(),this._prevStretchA,this._paneA.state().stretchFactor()),this._startY=0,this._deltaY=0,this._totalHeight=0,this._totalStretch=0,this._minPaneHeight=0,this._maxPaneHeight=0,this._pixelStretchFactor=0,Object(r.ensureNotNull)(this._handleEl).classList.remove("i-active")},e.prototype._color=function(){return this._chart.properties().childs().scalesProperties.childs().lineColor.value()||""},e}())},fgLi:function(e,t,i){"use strict";i.r(t),i.d(t,"DataSource",(function(){return l}));var r=i("hY0g"),n=i.n(r),o=i("e3/o"),s=i("aIyQ"),a=i.n(s),l=function(){function e(){this.hasAlert=new n.a(!1),this._zorder=0,this.m_priceScale=null,this._id=Object(o.randomHashN)(6),this._ownerSource=null,this._userEditEnabled=!0,this._onPriceScaleChanged=new a.a,this._ownerSourceChanged=new a.a}return e.prototype.id=function(){return this._id},e.prototype.preferNoScale=function(){return!1},e.prototype.idForAlert=function(){return this._id},e.prototype.setId=function(e){this._id=e},e.prototype.zorder=function(){return this._zorder},e.prototype.setZorder=function(e){"number"==typeof e&&this._zorder!==e&&(this._zorder=e)},e.prototype.title=function(){throw new Error("Implement this fun in a subclass")},e.prototype.priceScale=function(){return this.m_priceScale},e.prototype.setPriceScale=function(e){this.m_priceScale=e,this._onPriceScaleChanged.fire()},e.prototype.ownerSource=function(){return this._ownerSource},e.prototype.setOwnerSource=function(e){this._ownerSource=e,this._ownerSourceChanged.fire()},e.prototype.ownerSourceChanged=function(){
return this._ownerSourceChanged},e.prototype.isSavedInChart=function(e){return!0},e.prototype.isSavedInStudyTemplates=function(){return!0},e.prototype.isRemovedByStudyTemplates=function(){return!0},e.prototype.hasContextMenu=function(){return!0},e.prototype.showInObjectTree=function(){return!0},e.prototype.setUserEditEnabled=function(e){this._userEditEnabled=e},e.prototype.userEditEnabled=function(){return this._userEditEnabled},e.prototype.canBeHidden=function(){return this.userEditEnabled()},e.prototype.isUserDeletable=function(){return this.userEditEnabled()},e.prototype.canHasAlert=function(){return!1},e.prototype.properties=function(){throw new Error("Implement this fun in a subclass")},e.prototype.isVisible=function(){return this.properties().visible.value()},e.prototype.statusView=function(){return null},e.prototype.dataWindowView=function(){return null},e.prototype.legendView=function(){return null},e.prototype.marketStatusModel=function(){return null},e.prototype.dataUpdatedModeModel=function(){return null},e.prototype.dataProblemModel=function(){return null},e.prototype.priceAxisViews=function(e,t){return null},e.prototype.updateAllViews=function(){},e.prototype.paneViews=function(){return null},e.prototype.labelPaneViews=function(){return null},e.prototype.isFailed=function(){return!1},e.prototype.isLoading=function(){return!1},e.prototype.isChildStudy=function(){return!1},e.prototype.hasChildren=function(){return!1},e.prototype.canHaveChildren=function(){return!1},e.prototype.onClickOutside=function(){},e.prototype.getInputsPropertyPage=function(){return null},e.prototype.getStylesPropertyPage=function(){return null},e.prototype.getDisplayPropertyPage=function(){return null},e.prototype.getVisibilitiesPropertyPage=function(){return null},e.prototype.getSourceIcon=function(){return null},e.prototype.state=function(e){throw new Error("Implement this fun in a subclass")},e.prototype.onPriceScaleChanged=function(){return this._onPriceScaleChanged},e.prototype.doesMovingAffectsUndo=function(){return!0},e.prototype.isMultiPaneAvailable=function(){return!1},e.prototype.isMultiPaneEnabled=function(){return!1},e.prototype.copiable=function(){return!1},e.prototype.cloneable=function(){return!1},e.prototype.movable=function(){return!1},e.prototype.isIncludedInAutoScale=function(){return!1},e.prototype.priceRange=function(e,t){return null},e.prototype.autoScaleInfo=function(e,t){return{range:this.priceRange(e,t)}},e}()},foSv:function(e,t,i){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.d(t,"a",(function(){return r}))},fs3R:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor" transform="translate(6 4)"><rect width="15" height="12" rx="2" x=".5" y="7.5"/><path stroke-linecap="round" stroke-width="2" d="M8 14v2"/><path d="M11.5 7.5V4a3.5 3.5 0 0 0-7 0v3.5"/></g></svg>'},fsuG:function(e,t,i){"use strict";i.r(t),
i.d(t,"visitPaymentPage",(function(){return n}));i("bSeV");var r=i("gWrr");function n(e,t,i){void 0===t&&(t="y"),void 0===i&&(i={});var n=i.paymentMethod||"paypal",o="bitcoin"===n?"Bitcoin payment":"Paypal payment";window.runOrSignIn((function(){if("function"!=typeof i.canVisit||i.canVisit()){var o=Object(r.parseHtmlElement)('<form action="/order/" method="post" '+(i.newWindow?'target="_blank"':"")+'>\n\t\t\t\t\t<input type="hidden" name="product" value="'+e+'"/>\n\t\t\t\t\t<input type="hidden" name="billing_cycle" value="'+t+'"/>\n\t\t\t\t\t<input type="hidden" name="fixed_billing_cycle" value="'+(i.fixedCycle?"1":"")+'"/>\n\t\t\t\t\t<input type="hidden" name="exchanges_only" value="'+(i.exchangesOnly?"1":"")+'"/>\n\t\t\t\t\t<input type="hidden" name="exchanges_expanded" value="'+(i.exchangesExpanded?"1":"")+'"/>\n\t\t\t\t\t<input type="hidden" name="selected_packages" value="'+(i.selectedPackages||[]).join(",")+'"/>\n\t\t\t\t\t<input type="hidden" name="payment_method" value="'+n+'"/>\n\t\t\t\t</form>');o&&(document.body.appendChild(o),o.submit())}else location.href="/"}),{source:o})}},fvKe:function(e,t,i){"use strict";var r=i("+6II"),n=i("qocr"),o=/\b(msie|trident)\b/i.test(navigator.userAgent)?1:0;function s(e){return e.offsetWidth+o<e.scrollWidth}Object(n.whenDocumentReady)((function(){document.addEventListener("mouseenter",(function(e){var t,i=e.target;i instanceof HTMLElement&&i.matches(".apply-overflow-title")&&((t=i).getAttribute("title")||t.offsetWidth+o>=t.scrollWidth||t.setAttribute("title",t.textContent||""))}),!0),document.addEventListener("mouseenter",(function(e){var t=e.target;if(t instanceof HTMLElement&&t.matches(".apply-overflow-tooltip")){if(t.matches(".apply-overflow-tooltip--check-children")){for(var i=!1,n=t.children,o=0;o<n.length;o++){var a=n[o];if(a instanceof HTMLElement&&s(a)){i=!0;break}}if(!i)return}else if(!s(t))return;var l="";l=t.matches&&t.matches(".apply-overflow-tooltip--allow-text")?t.textContent||"":Array.from(t.childNodes).reduce((function(e,t){return t.nodeType===Node.TEXT_NODE&&e.push(t.textContent||""),e}),[]).join("").trim(),Object(r.showOnElement)(t,{text:l});var c=function(){Object(r.hide)(),["mouseleave","mousedown"].forEach((function(e){return t.removeEventListener(e,c)}))};["mouseleave","mousedown"].forEach((function(e){return t.addEventListener(e,c)}))}}),!0)}))},fxzW:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererDiamond",(function(){return s}));var r=i("mrSG"),n=i("2WC2"),o=i("aO4+"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawItemShapeUsingCSSPixels=function(e,t){var i=Math.round(t.height/2),r=t.x,n=t.vertOffset,o=t.y+n;e.moveTo(r,o-i),e.lineTo(r+i,o),e.lineTo(r,o+i),e.lineTo(r-i,o),e.lineTo(r,o-i)},t.prototype._calcBoundingBox=function(t){var i=Math.round(t.height/2),r=t.x,n=t.vertOffset,s=t.y+n,a=r-i,l=r+i,c=s-i,u=s+i,h=new o.Point(a,c),d=new o.Point(l,u),p=Object(o.box)(h,d),f=e.prototype._calcBoundingBox.call(this,t);return f&&(p=this._unionBox(p,f)),p},t}(n.a)},
gAom:function(e,t,i){"use strict";function r(e,t,i,r,n,o,s){e.save(),e.globalCompositeOperation="copy";var a=e.createLinearGradient(0,0,0,n);a.addColorStop(0,o),a.addColorStop(1,s),e.fillStyle=a,e.fillRect(t,i,r,n),e.restore()}function n(e,t,i,r,n,o){e.fillRect(t+o,i,r-2*o,o),e.fillRect(t+o,i+n-o,r-2*o,o),e.fillRect(t,i,o,n),e.fillRect(t+r-o,i,o,n)}function o(e,t,i,r){e.beginPath();var n=e.lineWidth%2?.5:0;e.moveTo(i,t+n),e.lineTo(r,t+n),e.stroke()}function s(e,t,i,r){e.beginPath();var n=e.lineWidth%2?.5:0;e.moveTo(t+n,i),e.lineTo(t+n,r),e.stroke()}i.r(t),i.d(t,"clearRectWithGradient",(function(){return r})),i.d(t,"fillRectInnerBorder",(function(){return n})),i.d(t,"drawHorizontalLine",(function(){return o})),i.d(t,"drawVerticalLine",(function(){return s}))},gBDZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return c}));var r,n,o=i("Eyy1"),s=i("XlJ7"),a=i("c44N"),l=i("ikwP");!function(e){e.Left="left",e.Right="right",e.Center="center"}(r||(r={})),function(e){e.Top="top",e.Bottom="bottom",e.Middle="middle"}(n||(n={}));var c=function(){function e(e,t,i,r,n,a){void 0===a&&(a="center"),this._cacheRenderParams=null,this._canvasesMap={},this._lines=e.split(/[^\S\r\n]*(?:\r\n|\r|\n)/),this._font=function(e,t,i,r){return Object(s.makeFont)(r,i,(e?"bold ":"")+(t?"italic ":""))}(t,i,r,n),this._fontSize=n,this._verticalPadding=~~(n/6),this._textAlign=a;var c=Object(l.createDisconnectedCanvas)(document,new l.Size(0,0),1),u=Object(o.ensureNotNull)(c.getContext("2d"));u.font=this._font;for(var h=0,d=0,p=this._lines;d<p.length;d++){var f=p[d],_=u.measureText(f).width;h=Math.max(h,_)}this.textImageWidth=h+1,this.textImageHeight=this._lines.length*n+this._verticalPadding}return e.prototype.paintTo=function(e,t,i,r,n,o,s){var a=this,c=this._getTextImage(i,t);if(0!==c.width&&0!==c.height){var u=function(e,t,i){var r=e;switch(t){case"left":break;case"right":r-=i;break;case"center":r-=i/2}return Math.round(r)}(r,o,this.textImageWidth),h=function(e,t,i){var r=e;switch(t){case"top":break;case"bottom":r-=i;break;case"middle":r-=i/2}return Math.round(r)}(n,s,this.textImageHeight);Object(l.drawScaled)(e,t.pixelRatio,(function(){e.drawImage(c,u,h,a.textImageWidth,a.textImageHeight)}))}},e.prototype._getTextImage=function(e,t){var i=this;if(null!==this._cacheRenderParams&&Object(a.areEqualPaneRenderParams)(this._cacheRenderParams,t)||(this._canvasesMap={},this._cacheRenderParams=t),this._canvasesMap[e])return this._canvasesMap[e];var r,n=Object(l.createDisconnectedCanvas)(document,new l.Size(this.textImageWidth,this.textImageHeight),this._cacheRenderParams.pixelRatio),s=Object(o.ensureNotNull)(n.getContext("2d"));switch(s.textBaseline="top",s.font=this._font,s.fillStyle=e,this._textAlign){case"left":r=0,s.textAlign="left";break;case"right":r=this.textImageWidth-1,s.textAlign="right";break;default:r=this.textImageWidth/2,s.textAlign="center"}var c=this._verticalPadding;return Object(l.drawScaled)(s,this._cacheRenderParams.pixelRatio,(function(){
for(var e=0,t=i._lines;e<t.length;e++){var n=t[e];s.fillText(n,r,c),c+=i._fontSize}})),this._canvasesMap[e]=n,n},e}()},"gK+X":function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererRenkoPB",(function(){return o}));var r=i("VdBB"),n=i("Zp/P"),o=function(){function e(e){this._bars=e.bars,this._barWidth=e.barSpacing}return e.prototype.hitTest=function(e){var t=this._bars,i=.5*this._barWidth;if(0===t.length)return null;if(e.x<t[0].time-i)return null;if(e.x>t[t.length-1].time+i)return null;for(var o=null,s=0,a=t;s<a.length;s++){var l=a[s];if(e.x<=l.time+i){o=l;break}}if(null===o)return null;var c=Object(n.selectionTolerance)(1),u=Math.min(o.high,o.low),h=Math.max(o.high,o.low);return u-c<=e.y&&e.y<=h+c?new r.HitTestResult(r.HitTestResult.REGULAR):null},e.prototype.draw=function(e,t){e.save();for(var i=Math.round(t.pixelRatio*this._barWidth/2),r=null,n=null,o=null,s=0,a=this._bars;s<a.length;s++){var l=a[s],c=Math.round(l.exactTime*t.pixelRatio),u=null===o?Math.round(c-i):o+1,h=Math.round(c+i)-u,d=l.close>l.open,p=void 0,f=void 0;null===r||null===n?(p=Math.round(Math.min(l.close,l.open)*t.pixelRatio),f=Math.round(Math.max(l.close,l.open)*t.pixelRatio)):d?(p=n+1,f=Math.round(Math.max(l.close,l.open)*t.pixelRatio)):(p=Math.round(Math.min(l.close,l.open)*t.pixelRatio),f=r-1);var _=f-p+1;e.fillStyle=l.borderColor,e.fillRect(u,p,h,_),e.fillRect(c,Math.round(l.high*t.pixelRatio),1,Math.round((l.low-l.high)*t.pixelRatio)),e.fillStyle=l.color,e.fillRect(u+1,p+1,h-2,_-2),r=p,n=p+_-1,o=u+h-1}e.restore()},e}()},gLxC:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("tc+8"),o=i("Ocx9").DefaultProperty,s=window.t("Note");function a(e,t){this._constructor="LineToolNote";var n=t||a.createProperties();r.call(this,e,n),this.version=a.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Dz+H").NotePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function l(e,t){var i=t||l.createProperties();a.call(this,e,i)}inherit(a,r),a.TOOLTIP_WIDTH=300,a.TOOLTIP_PADDING=10,a.TOOLTIP_LINESPACING=5,a.version=1,a.prototype.pointsCount=function(){return 1},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Note"},a.prototype.getTooltipWidth=function(){return a.TOOLTIP_WIDTH},a.prototype.getTooltipPadding=function(){return a.TOOLTIP_PADDING},a.prototype.getTooltipLineSpacing=function(){return a.TOOLTIP_LINESPACING},a.prototype.template=function(){var e=r.prototype.template.call(this);return e.text=this.properties().childs().text.value(),e},a.prototype._applyTemplateImpl=function(e){r.prototype._applyTemplateImpl.call(this,e),this.properties().childs().text.setValue(e.text)},a.createProperties=function(e){void 0!==e&&void 0!==e.markerColor&&void 0===e.borderColor&&(e.borderColor=e.markerColor);var t=new o("linetoolnote",e);return a._configureProperties(t),t},a._configureProperties=function(e){r._configureProperties(e),e.hasChild("text")||e.addChild("text",new n(window.t("Text"))),e.addExclusion("text")},inherit(l,a),l.prototype.title=function(){
return window.t("Anchored Note")},l.prototype.name=function(){return"Anchored Note"},l.prototype.isFixed=function(){return!0},l.prototype.hasEditableCoordinates=function(){return!1},l.createProperties=function(e){var t=new o("linetoolnoteabsolute",e);return l._configureProperties(t),t},l._configureProperties=function(e){a._configureProperties(e)},a.prototype.state=function(e){var t=r.prototype.state.call(this,e);return e&&(t.state.fixedSize=!1),t},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("74nv").NoteDefinitionsViewModel}.bind(null,i)).catch(i.oe)},t.LineToolNote=a,t.LineToolNoteAbsolute=l},gMtF:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolRiskRewardPriceAxisView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i){var r=e.call(this)||this;return r._source=t,r._data=i,r}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){if(e.visible=!1,this._showAxisLabel()){var r=this._source.priceScale();if(0!==this._source.points().length&&null!==r&&!r.isEmpty()){var n=this._source.ownerSource(),o=null!==n?n.firstValue():null;if(null!==o){var s=this._data.priceProperty.value(),a=this._data.colorProperty.value();i.background=a,i.color=this.generateTextColor(a),i.coordinate=r.priceToCoordinate(s,o),e.text=r.formatPrice(s,o),e.visible=!0}}}},t.prototype._showAxisLabel=function(){return this._source.properties().childs().showPriceLabels.value()},t}(i("KcY8").a)},gOE2:function(e,t,i){e.exports=function(){return new Worker(i.p+"552f2e12e1f4eaa94f5c.worker.js")}},gP14:function(e,t,i){"use strict";i.r(t);var r=i("Eyy1"),n=i("aO4+"),o=i("oiZD"),s=i("vTIA"),a=i("GxN8"),l=i("8sOK"),c=i("LxhU"),u=i("tc+8"),h=i.n(u),d=i("KUek"),p=i("3ClC"),f=i("aIyQ"),_=i.n(f),m=i("hY0g"),v=i.n(m),g=i("H0vP"),y=i("Kxc7"),b=i("iDOr"),S=i("MbIA"),w=i("gQ5K"),P=i("ZZnO"),C=i("4kQX"),T=i("mPvX"),x=i("mMWL"),I=i("mNbo"),E=i("EsvI"),L=i("zM7N");var O=i("txPx"),A=i("XuOW"),M=Object(O.getLogger)("Chart.ESDWatcher"),k=new Map([["esdShowDividends","TV_DIVIDENDS"],["esdShowSplits","TV_SPLITS"],["esdShowEarnings","TV_EARNINGS"]]),D=function(){function e(e){this._cancellationTokens=new Map,this._model=e,this._subscribeOnProperties(),this.syncESDStudies()}return e.prototype.destroy=function(){var e=this;k.forEach((function(t,i){e._model.mainSeries().properties()[i].unsubscribeAll(e),e._cancelPendingInsertion(t),e._removeAllStudies(t)}))},e.prototype.syncESDStudies=function(){var e=this;M.logNormal("Force syncing studies"),k.forEach((function(t,i){e._cancelPendingInsertion(t),e._removeAllStudies(t),e._model.mainSeries().properties()[i].value()&&e._insertStudy(t)}))},e.prototype._subscribeOnProperties=function(){var e=this;k.forEach((function(t,i){e._model.mainSeries().properties()[i].subscribe(e,(function(r){var n=r.value();M.logNormal(i+" has been changed to "+n);var o=e._getStudy(t);n&&null===o?e._insertStudy(t):n||(e._cancelPendingInsertion(t),null!==o&&(e._model.removeSource(o),
M.logNormal(t+" has been removed")))}))}))},e.prototype._getStudy=function(e){return this._model.allStudies().find((function(t){return R(t,e)}))||null},e.prototype._insertStudy=function(e){var t=this;this._cancelPendingInsertion(e);var i=this._model.createStudyInserter({type:"pine",pineId:e});i.setForceOverlay(!0);var r=function(){var e={cancelled:!1,cancel:function(){e.cancelled=!0}};return e}();this._cancellationTokens.set(e,r),M.logNormal("Inserting "+e),i.insert(void 0,r).then((function(){M.logNormal("Inserting "+e+" is succeeded")})).catch((function(e){e!==A.InsertionErrorCode.Cancelled&&M.logError("Error: "+e)})).then((function(){t._cancellationTokens.get(e)===r&&t._cancellationTokens.delete(e)}))},e.prototype._removeAllStudies=function(e){var t=this;this._model.allStudies().filter((function(t){return R(t,e)})).forEach((function(e){return t._model.removeSource(e)}))},e.prototype._cancelPendingInsertion=function(e){var t=this._cancellationTokens.get(e);void 0!==t&&(t.cancel(),this._cancellationTokens.delete(e),M.logNormal("Inserting "+e+" has been cancelled"))},e}();function R(e,t){return e.metaInfo().scriptIdPart===t}var V=i("1gmO"),B=i("2O5g"),N=i("7ktv"),F=function(){function e(e){this._alertLabelsBySource=new Map,this._alertsByAlertSeriesId=new Map,this._alertSeriesIdByAlert=new Map,this._alertLabelsOwnerSourcesByAlert=new Map,this._chartModel=e}return e.prototype.destroy=function(){this.removeAllAlertLabels()},e.prototype.removeAllAlertLabels=function(){var e=this,t=this._alertLabelsBySource;this._alertLabelsBySource=new Map,this._alertsByAlertSeriesId.clear(),this._alertSeriesIdByAlert.clear(),this._alertLabelsOwnerSourcesByAlert.clear(),t.forEach((function(t){t.forEach((function(t){return e._chartModel.removeSource(t)}))}))},e.prototype.removeSourceAlertLabels=function(e){for(var t=0,i=this._getAlertLabelsBySource(e);t<i.length;t++){var r=i[t];this.removeAlertLabel(r)}},e.prototype.syncSourceAlertLabels=function(e){var t=this;if(e instanceof N.PriceDataSource){for(var i=0,n=this._getAlertLabelsBySource(e);i<n.length;i++){(u=n[i]).alertOwnerSource().idForAlert()===u.alertSeriesId()||u.alert().isOHLC()||this.removeAlertLabel(u)}var o=this._alertsByAlertSeriesId.get(e.idForAlert()),s=this._getAlertLabelsBySource(e);void 0!==o&&o.forEach((function(e){s.some((function(t){return t.alert()===e}))||t._updateAlertLabelsByAlert(e,Object(r.ensureDefined)(t._alertSeriesIdByAlert.get(e)))}));for(var a=Object(r.ensureNotNull)(this._chartModel.paneForSource(e)),l=0,c=this._getAlertLabelsBySource(e);l<c.length;l++){var u=c[l],h=this._chartModel.paneForSource(u);h!==a?(null!==h&&h.removeDataSource(u),a.addDataSource(u,Object(r.ensureNotNull)(e.priceScale()),!1)):e.priceScale()!==u.priceScale()&&a.move(u,Object(r.ensureNotNull)(e.priceScale()))}}},e.prototype.detachSourceAlertLabels=function(e){for(var t=0,i=this._getAlertLabelsBySource(e);t<i.length;t++){var r=i[t];this._chartModel.detachSource(r)}},e.prototype.removeAlertLabel=function(e){var t=e.alertOwnerSource(),i=this._alertLabelsBySource.get(t)
;void 0!==i&&(i.delete(e),0===i.size&&this._alertLabelsBySource.delete(t));var r=e.alert(),n=this._alertLabelsOwnerSourcesByAlert.get(r);void 0!==n&&(n.delete(t),0===n.size&&this._alertLabelsOwnerSourcesByAlert.delete(r)),this._chartModel.removeSource(e)},e.prototype.addAlert=function(e,t){Object(r.assert)(!this._alertSeriesIdByAlert.has(e),"Alert is already added on the chart"),this._alertSeriesIdByAlert.set(e,t);var i=this._alertsByAlertSeriesId.get(t);void 0===i&&(i=new Set,this._alertsByAlertSeriesId.set(t,i)),i.add(e),this._updateAlertLabelsByAlert(e,t)},e.prototype.removeAlert=function(e){var t=this,i=this._alertLabelsOwnerSourcesByAlert.get(e);void 0!==i&&i.forEach((function(i){var r=t._alertLabelsBySource.get(i);void 0!==r&&r.forEach((function(i){i.alert()===e&&t.removeAlertLabel(i)}))}));var n=Object(r.ensureDefined)(this._alertSeriesIdByAlert.get(e));this._alertSeriesIdByAlert.delete(e);var o=this._alertsByAlertSeriesId.get(n);void 0!==o&&o.delete(e)},e.prototype._findPanes=function(e){for(var t=[],i=0,r=this._chartModel.panes();i<r.length;i++){for(var n=r[i],o=n.dataSources(),s=new Set,a=0,l=o;a<l.length;a++){var c=l[a];c.idForAlert()===e&&s.add(c)}s.size>0&&t.push({pane:n,sources:s})}return t},e.prototype._addLabelToPane=function(e,t,i,r){var n=new V.AlertLabel(this._chartModel,e,r,B.invokeAlertEditor);i.addDataSource(n,r.priceScale(),!1);var o=this._alertLabelsBySource.get(r);void 0===o&&(o=new Set,this._alertLabelsBySource.set(r,o)),o.add(n);var s=this._alertLabelsOwnerSourcesByAlert.get(e);void 0===s&&(s=new Set,this._alertLabelsOwnerSourcesByAlert.set(e,s)),s.add(r)},e.prototype._updateAlertLabelsByAlert=function(e,t){var i=this,n=this._findPanes(t);if(n.length)for(var o=function(r){r.sources.forEach((function(n){return i._addLabelToPane(e,t,r.pane,n)}))},s=0,a=n;s<a.length;s++){o(a[s])}else if(e.isOHLC()){var l=this._chartModel.mainSeries();this._addLabelToPane(e,t,Object(r.ensureNotNull)(this._chartModel.paneForSource(l)),l)}this._chartModel.lightUpdate()},e.prototype._getAlertLabelsBySource=function(e){var t=this._alertLabelsBySource.get(e);return void 0===t?[]:Array.from(t)},e}(),j=i("pCTl"),W=i("CW80"),H=i("e3/o"),U=i("ogJP"),z=i("Tmoa"),G=i("fTGZ"),q=i("4vW/");i.d(t,"ChartModelBase",(function(){return J}));var Y=Object(O.getLogger)("Chart.ChartModel");function X(e,t){var i=e.indexOf(t);return-1!==i&&(e.splice(i,1),!0)}var K={isSnapshot:!1,readOnly:!1,watermarkEnabled:!0,shiftVisibleRangeOnNewBar:!0,currencyLabelEnabled:!1},J=function(){function e(e,t,i){this._onRearrangePanes=new _.a,this._lineToolsGroupModel=new T.LineToolsGroupModel,this._sourcesBeingMoved=[],this._lineItemBeingMoved=null,this._dataSourceCollectionChanged=new _.a,this._sourceProperitesChanged=new _.a,this._sessions=null,this._currentTool="",this._destroyed=!1,this._panes=[],this._tagsChanged=new _.a,this._strategySources=[],this._strategySourcesChange=new _.a,this._activeStrategySource=new v.a(null),this._panesCollectionChanged=new _.a,this._scrollEnabled=y.enabled("chart_scroll"),this._zoomEnabled=y.enabled("chart_zoom"),
this._isScalesResetAvailableChanged=new _.a,this._isScalesResetAvailable=!1,this._esdWatcher=null,this._alertsWatcher=null,this._hoveredSource=null,this._hoveredSourceChanged=new _.a,this._lastHittestData=null,this._fgCustomSources=[],this._bgCustomSources=[],this._allCustomSources=[],this._customSourcesMap=new Map,this._multiPaneSources=[],this._showLegendProperty=new h.a,this._id=Object(H.guid)(),this._chartSaveTime=null,this._availableCurrencies=null,this._availableCurrenciesSet=new Set,this._shouldBeSavedEvenIfHidden=!1,this._watchedThemeSpawn=o.watchedTheme.spawn(),this._gradientColorsCache=null,this._undoModel=e,this._properties=t,this._options=Object(U.merge)(Object(U.clone)(K),i),this._readOnly=this._options.readOnly,this._isSnapshot=this._options.isSnapshot,this._alertsWatcher=new F(this),this._chartSaveTime=(new Date).valueOf(),this._backgroundColor=new v.a(this._getBackgroundColor()),this._backgroundTopColor=new v.a(this._getBackgroundColor(!0)),this._properties.childs().paneProperties.childs().background.subscribe(this,this._updateBackgroundColor),this._properties.childs().paneProperties.childs().backgroundType.subscribe(this,this._updateBackgroundColor),this._properties.childs().paneProperties.childs().backgroundGradientStartColor.subscribe(this,this._updateBackgroundColor),this._properties.childs().paneProperties.childs().backgroundGradientEndColor.subscribe(this,this._updateBackgroundColor),this._watchedThemeSpawn.subscribe(this._updateBackgroundColor.bind(this))}return e.prototype.chartSaveTime=function(){return this._chartSaveTime},e.prototype.setChartSaveTime=function(e){this._chartSaveTime=e},e.prototype.destroy=function(){this._hoveredSourceChanged.destroy(),null!==this._watermarkSource&&(this._watermarkSource.destroy(),this._watermarkSource=null),Array.from(this._customSourcesMap.keys()).forEach(this._removeCustomSource,this),Object(r.assert)(0===this._fgCustomSources.length),Object(r.assert)(0===this._bgCustomSources.length),Object(r.assert)(0===this._allCustomSources.length),Object(r.assert)(0===this._customSourcesMap.size),null!==this._esdWatcher&&(this._esdWatcher.destroy(),this._esdWatcher=null),null!==this._alertsWatcher&&(this._alertsWatcher.destroy(),this._alertsWatcher=null),this._properties.childs().paneProperties.childs().background.unsubscribeAll(this),this._properties.childs().paneProperties.childs().backgroundType.unsubscribeAll(this),this._properties.childs().paneProperties.childs().backgroundGradientEndColor.unsubscribeAll(this),this._properties.childs().paneProperties.childs().backgroundGradientStartColor.unsubscribeAll(this),this._watchedThemeSpawn.destroy(),this._destroyed=!0},e.prototype.undoModel=function(){return this._undoModel},e.prototype.addStrategySource=function(e){-1===this._strategySources.indexOf(e)&&(this._strategySources.push(e),this._strategySourcesChange.fire(),this.setActiveStrategySource(e))},e.prototype.removeStrategySource=function(e){var t=this._strategySources.indexOf(e);if(-1!==t){
if(this._strategySources.splice(t,1)[0]===this._activeStrategySource.value()&&this.unsetActiveStrategySource(),this._strategySources.length>0){var i=this._strategySources[this._strategySources.length-1];this.setActiveStrategySource(i)}this._strategySourcesChange.fire()}},e.prototype.setActiveStrategySource=function(e){-1!==this._strategySources.indexOf(e)&&this._activeStrategySource.setValue(e)},e.prototype.unsetActiveStrategySource=function(){this._activeStrategySource.setValue(null)},e.prototype.activeStrategySource=function(){return this._activeStrategySource},e.prototype.strategySources=function(){return this._strategySources},e.prototype.strategySourcesChange=function(){return this._strategySourcesChange},e.prototype.setScrollEnabled=function(e){this._scrollEnabled=e},e.prototype.scrollEnabled=function(){return this._scrollEnabled},e.prototype.setZoomEnabled=function(e){this._zoomEnabled=e},e.prototype.zoomEnabled=function(){return this._zoomEnabled},e.prototype.onTagsChanged=function(){return this._tagsChanged},e.prototype.canZoomIn=function(){return this._timeScale.canZoomIn()&&this._zoomEnabled},e.prototype.canZoomOut=function(){return this._timeScale.canZoomOut()&&this._zoomEnabled},e.prototype.onPaneTagsChanged=function(){this._tagsChanged.fire()},e.prototype.panesCollectionChanged=function(){return this._panesCollectionChanged},e.prototype.dataSourceCollectionChanged=function(){return this._dataSourceCollectionChanged},e.prototype.sourceProperitesChanged=function(){return this._sourceProperitesChanged},e.prototype.updateCrosshair=function(){var e=this.crossHairSource(),t=e.pane;if(null!==t){var i=e.originCoordX(),r=e.originCoordY();this.setAndSaveCurrentPosition(i,r,t)}},e.prototype.zoomTime=function(e,t,i){if(this._zoomEnabled){var r=this.timeScale();if(!r.isEmpty()&&0!==t){var n=r.width();e=Math.max(1,Math.min(e,n-2)),r.zoom(e,t,i),this.updateCrosshair(),this.recalculateAllPanes(),this.lightUpdate(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this._setScalesResetAvailable(!0)}}},e.prototype.lineToolsGroupModel=function(){return this._lineToolsGroupModel},e.prototype.restoreLineToolsGroups=function(e){this._lineToolsGroupModel=T.LineToolsGroupModel.fromState(this,e)},e.prototype.updateSource=function(e){var t=this._invalidationMaskForSource(e);null!==t&&this.invalidate(t)},e.prototype.updateSourcePriceScale=function(e){var t=this._invalidationMaskForSourcePriceScale(e);null!==t&&this.invalidate(t)},e.prototype.replaceStudyStub=function(e,t){var i=this.paneForSource(e);if(null===i)return!1;var r=e.priceScale(),n=e.zorder(),o=e.ownerSource();return this.paneForSource(e)===i?i.replaceSource(e,t,r):(i.insertDataSource(t,r,n),this.removeSource(e)),t.setOwnerSource(o),this.dataSources().forEach((function(i){i.ownerSource()===e&&i.setOwnerSource(t)})),t.start(),this.recalculatePane(i),this.fullUpdate(),!0},e.prototype.insertStudyStub=function(e){
var t=this.mainSeries(),i=Object(r.ensureNotNull)(this.paneForSource(t)),n=new l.StudyStub(this,null,e),o=i.createPriceScaleAtPosition("overlay");return i.addDataSource(n,o,!1),this.recalculatePane(i),this.fullUpdate(),n},e.prototype.removeStudyStub=function(e){var t=this.dataSourceForId(e);return null===t?(Y.logNormal("StudyStub id="+e+" is not found in chart model"),!1):(this.removeSource(t),!0)},e.prototype.setHoveredSource=function(e,t){var i=this._hoveredSource!==e;if(i||this._lastHittestData!==t){this._lastHittestData=t;var r,n=null;if(this._hoveredSource)if(this._hoveredSource.updateAllViews(),n=new g.InvalidationMask(g.InvalidationLevel.Cursor),null!==(r=this._invalidationMaskForSource(this._hoveredSource,g.InvalidationLevel.Light))&&n.merge(r),i&&Object(W.isLineTool)(this._hoveredSource)&&this._hoveredSource.hasAlert.value()){var o=this._hoveredSource.getAlertSync();null!==o&&o.set("hovered",!1)}if(this._hoveredSource=e,e)if(e.updateAllViews(),n||(n=new g.InvalidationMask(g.InvalidationLevel.Cursor)),null!==(r=this._invalidationMaskForSource(e,g.InvalidationLevel.Light))&&n.merge(r),i&&Object(W.isLineTool)(e)&&e.hasAlert.value()){var s=e.getAlertSync();null!==s&&s.set("hovered",!0)}n&&this.invalidate(n),i&&this._hoveredSourceChanged.fire(e)}},e.prototype.hoveredSource=function(){return this._hoveredSource},e.prototype.hoveredSourceChanged=function(){return this._hoveredSourceChanged},e.prototype.lastHittestData=function(){return this._lastHittestData},e.prototype.paneForSource=function(e){for(var t=this._panes.length-1;t>=0;t--)if(this._panes[t].hasDataSource(e))return this._panes[t];return e instanceof G.BarsMarksContainer?this.paneForSource(this.mainSeries()):null},e.prototype.findNonOverlayStudyWithGroupingKey=function(e,t){for(var i=function(t){var i=t.dataSources().find((function(i){return Object(p.isStudy)(i)&&i.metaInfo().groupingKey===e&&!t.isOverlay(i)}));if(void 0!==i)return{value:{pane:t,study:i}}},r=0,n=void 0!==t?[t]:this._panes;r<n.length;r++){var o=i(n[r]);if("object"==typeof o)return o.value}return null},e.prototype.movePaneUp=function(e){this.movePane(e,e-1)},e.prototype.movePaneDown=function(e){this.movePane(e,e+1)},e.prototype.movePane=function(e,t){var i=this._panes[e];this._panes.splice(e,1),this._panes.splice(t,0,i),this._panesCollectionChanged.fire(this._panes),this._onRearrangePanes.fire(),this.invalidate(g.InvalidationMask.panesOrder())},e.prototype.backgroundColor=function(){return this._backgroundColor},e.prototype.backgroundTopColor=function(){return this._backgroundTopColor},e.prototype.backgroundColorAtYPercentFromTop=function(e){var t=this.backgroundColor().value(),i=this.backgroundTopColor().value();if(t===i)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),null===this._gradientColorsCache||this._gradientColorsCache.topColor!==i||this._gradientColorsCache.bottomColor!==t)this._gradientColorsCache={topColor:i,bottomColor:t,colors:new Map};else{var r=this._gradientColorsCache.colors.get(e);if(void 0!==r)return r}var n=Object(z.gradientColorAtPercent)(i,t,e/100)
;return this._gradientColorsCache.colors.set(e,n),n},e.prototype.defaultResolutions=function(){return this.chartApi().defaultResolutions()},e.prototype.availableCurrenciesSet=function(){var e=this._getAvailableCurrencies();return e.length!==this._availableCurrenciesSet.size&&(this._availableCurrenciesSet=new Set(e)),this._availableCurrenciesSet},e.prototype.currencyLabelEnabled=function(){return this._options.currencyLabelEnabled},e.prototype.startMovingSources=function(e,t,i,n,o,s){var a=this;if(this._sourcesBeingMoved=e,this._lineItemBeingMoved=i,this._sourcesBeingMoved.forEach((function(e){var s=Object(r.ensureNotNull)(a.paneForSource(e));if(Object(W.isLineTool)(e)&&e.isFixed()&&e.linkKey&&n.has(e.linkKey)){var l=Object(r.ensureDefined)(n.get(e.linkKey)),c={screen:a._percentPositionToPoint(l,s)};e.startMoving(c,i,o)}else e.startMoving(t,i,o);var u=a._paneInvalidationMask(s,g.InvalidationLevel.Light);a.invalidate(u)})),!s){var l=e.filter((function(e){return e.linkKey&&e.isSynchronizable()})).map((function(e){return e.linkKey}));if(l.length&&t.logical){var c=this.externalTimeStamp(t.logical.index),u={linkKeys:l,model:this,symbol:this.mainSeries().symbol(),point:{price:t.logical.price,timeStamp:c},envState:o,pointPositionPercents:new Map};e.forEach((function(e){if(e.linkKey&&e.isSynchronizable()&&e.isFixed()){var i=Object(r.ensureNotNull)(a.paneForSource(e));u.pointPositionPercents.set(e.linkKey,a._pointToPercentPosition(Object(r.ensureDefined)(t.screen),i))}})),Object(x.startMovingLineTool)(u)}}},e.prototype.moveSources=function(e,t,i,n){var o=this;if(this._sourcesBeingMoved.filter((function(e){return!e.isLocked||!e.isLocked()})).forEach((function(n){if(n.linkKey&&t.has(n.linkKey)){var s=Object(r.ensureNotNull)(o.paneForSource(n)),a=Object(r.ensureDefined)(t.get(n.linkKey)),l={screen:o._percentPositionToPoint(a,s)};n.move(l,o._lineItemBeingMoved,i)}else n.move(e,o._lineItemBeingMoved,i)})),this.lightUpdate(),!n&&e.logical){var s=this._sourcesBeingMoved.filter((function(e){return e.isSynchronizable()&&!!e.linkKey})).map((function(e){return e.linkKey})),a=this.externalTimeStamp(e.logical.index),l={linkKeys:s,model:this,point:{price:e.logical.price,timeStamp:a},envState:i,pointPositionPercents:new Map};this._sourcesBeingMoved.forEach((function(t){if(t.linkKey&&t.isSynchronizable()&&t.isFixed()){var i=Object(r.ensureNotNull)(o.paneForSource(t));l.pointPositionPercents.set(t.linkKey,o._pointToPercentPosition(Object(r.ensureDefined)(e.screen),i))}})),Object(x.moveLineTool)(l)}},e.prototype.endMovingSources=function(e,t){var i=this;this._sourcesBeingMoved.forEach((function(t){var n=Object(r.ensureNotNull)(i.paneForSource(t));t.endMoving(e);var o=i._paneInvalidationMask(n,g.InvalidationLevel.Light);o.invalidateAll(g.InvalidationLevel.Light),i.invalidate(o)}));var n=this._sourcesBeingMoved.filter((function(e){return e.isSynchronizable()&&!!e.linkKey})).map((function(e){return e.linkKey})),o=this._sourcesBeingMoved.filter((function(e){return e.isSynchronizable()&&!!e.linkKey})).map((function(e){var t={
points:e.normalizedPoints(),interval:i.mainSeries().interval()};return e.isFixed()&&(t.pointPositionPercents=e.calcPositionPercents()),t}));n.length&&Object(x.finishMovingLineTool)({linkKeys:n,model:this,finalStates:o}),this._sourcesBeingMoved=[],this._lineItemBeingMoved=null},e.prototype.sourcesBeingMoved=function(){return this._sourcesBeingMoved},e.prototype.isScalesResetAvailableChanged=function(){return this._isScalesResetAvailableChanged},e.prototype.isScalesResetAvailable=function(){return this._isScalesResetAvailable},e.prototype.panes=function(){return this._panes},e.prototype.paneForId=function(e){return this._panes.find((function(t){return t.id()===e}))||null},e.prototype.createPane=function(t,i){var r=this,n=this._undoModel.chartWidget();n.isMaximizedPane()&&n.toggleMaximizePane();var o=this._properties.childs().paneProperties;i&&o.merge(i);var s=new b.Pane(this._timeScale,o,this);return void 0!==t?this._panes.splice(t,0,s):this._panes.push(s),s.onTagsChanged().subscribe(this,e.prototype.onPaneTagsChanged),s.dataSourcesCollectionChanged().subscribe(this,(function(){return r._dataSourceCollectionChanged.fire(s)})),s.sourcePropertiesChanged().subscribe(this,(function(e){return r._sourceProperitesChanged.fire(s,e)})),this._panesCollectionChanged.fire(this._panes),this.invalidate(g.InvalidationMask.panesOrder()),s},e.prototype.removePane=function(e){var t=this._undoModel.chartWidget();t.isMaximizedPane()&&t.toggleMaximizePane();var i=e;i.destroy();var r=this._panes.indexOf(i);-1!==r&&(this._panes.splice(r,1),e.dataSourcesCollectionChanged().unsubscribeAll(this),e.sourcePropertiesChanged().unsubscribeAll(this),e.onTagsChanged().unsubscribeAll(this)),this.crossHairSource().pane===e&&this.clearCurrentPosition(),this._panesCollectionChanged.fire(this._panes),this.invalidate(g.InvalidationMask.panesOrder())},e.prototype.changePanesHeight=function(e,t){if(!(this._panes.length<2)){Object(r.assert)(e>=0&&e<this._panes.length,"Invalid pane index");var i=this._panes[e],n=this._panes.reduce((function(e,t){return e+t.stretchFactor()}),0),o=this._panes.reduce((function(e,t){return e+t.height()}),0),s=o-30*(this._panes.length-1);t=Math.min(s,Math.max(30,t));var a=n/o,l=i.height();i.setStretchFactor(t*a);for(var c=t-l,u=this._panes.length-1,h=0,d=this._panes;h<d.length;h++){var p=d[h];if(p!==i){var f=Math.min(s,Math.max(30,p.height()-c/u));c-=p.height()-f,u-=1;var _=f*a;p.setStretchFactor(_)}}this.fullUpdate()}},e.prototype.currentTool=function(){return this._currentTool},e.prototype.setCurrentTool=function(e){this._currentTool=e},e.prototype.onRearrangePanes=function(){return this._onRearrangePanes},e.prototype.addCustomSource=function(e,t,i){void 0===i&&(i=s.a.Foreground),this._customSourcesMap.has(e)&&Y.logWarn('Attempt to add the same custom source multiple time "'+e+'"'),Y.logNormal('Adding custom source "'+e+'"');var r=t(this);(i===s.a.Background?this._bgCustomSources:this._fgCustomSources).push(r),this._allCustomSources.push(r),this._customSourcesMap.set(e,r),this.lightUpdate()},
e.prototype.removeCustomSource=function(e){this._removeCustomSource(e),this.lightUpdate()},e.prototype.hasCustomSource=function(e){return this._customSourcesMap.has(e)},e.prototype.customSourceForName=function(e){return this._customSourcesMap.get(e)||null},e.prototype.customSourceName=function(e){var t=null;return this._customSourcesMap.forEach((function(i,r){i===e&&(t=r)})),t},e.prototype.customSources=function(e){switch(e){case s.a.Background:return this._bgCustomSources;case s.a.Foreground:return this._fgCustomSources;default:return this._allCustomSources}},e.prototype.addMultiPaneSource=function(e){this._multiPaneSources.push(e),this.lightUpdate()},e.prototype.removeMultiPaneSource=function(e){var t=this._multiPaneSources.indexOf(e);-1===t?Y.logWarn("Attempt to remove multi-pane source which does not exist in the model"):this._multiPaneSources.splice(t,1),this.lightUpdate()},e.prototype.multiPaneSources=function(e){return this._multiPaneSources.filter((function(t){return!e.hasDataSource(t)}))},e.prototype.dateTimeFormatter=function(){return this._dateTimeFormatter},e.prototype.dateFormatter=function(){return this._dateFormatter},e.prototype.timeFormatter=function(){return this._timeFormatter},e.prototype.sessions=function(){return Object(r.ensureNotNull)(this._sessions)},e.prototype.createSessions=function(e){var t=this;Object(r.assert)(null===this._sessions,"Sessions are already created"),this.addCustomSource("sessions",(function(i){return t._sessions=new d.Sessions(i,e),t._sessions.start(),t._sessions}),s.a.Background)},e.prototype.createPrePostMarket=function(e){this.addCustomSource("prePostMarket",(function(t){return new j.a(t,e)}))},e.prototype.shouldBeSavedEvenIfHidden=function(){return this._shouldBeSavedEvenIfHidden},e.prototype.setShouldBeSavedEvenIfHidden=function(e){this._shouldBeSavedEvenIfHidden=e},e.prototype.externalTimeStamp=function(e){var t=this.mainSeries().syncModel();return this.timeScale().points().roughTime(e,t&&t.projectTime.bind(t))},e.prototype.syncESD=function(){null!==this._esdWatcher&&this._esdWatcher.syncESDStudies()},e.prototype.alertsWatcher=function(){return this._alertsWatcher},e.prototype.showLegend=function(){return this._showLegendProperty},e.prototype.id=function(){return this._id},e.prototype._createESDWatcher=function(){this._esdWatcher=new D(this)},e.prototype._updateDateTimeFormatter=function(){var e=P.dateFormatProperty.value(),t=new w.DateFormatter(e);if(this._dateFormatter=t,this.mainSeries().isDWM())this._dateTimeFormatter=t,this._timeFormatter=new C.TimeFormatter("%h:%m");else{var i=c.Interval.parse(this.mainSeries().interval()).isSeconds()?"%h:%m:%s":"%h:%m";this._dateTimeFormatter=new S.DateTimeFormatter({dateFormat:e,timeFormat:i,dateTimeSeparator:"   "}),this._timeFormatter=new C.TimeFormatter(i)}},e.prototype._setScalesResetAvailable=function(e){this._isScalesResetAvailable!==e&&(this._isScalesResetAvailable=e,this._isScalesResetAvailableChanged.fire())},e.prototype._invalidationMaskForSource=function(e,t){if(void 0===t&&(t=g.InvalidationLevel.Light),
e===this.crossHairSource())return g.InvalidationMask.cursor();if(this._watermarkSource===e)return this._paneInvalidationMask(Object(r.ensureNotNull)(this.paneForSource(this.mainSeries())),t);if(-1!==this._allCustomSources.indexOf(e)){var i=new g.InvalidationMask;return i.invalidateAll(t),i}if(!Object(a.a)(e))return null;if(e.isMultiPaneEnabled())return new g.InvalidationMask(t);var n=this.paneForSource(e);return null!==n?this._paneInvalidationMask(n,t):null},e.prototype._paneInvalidationMask=function(e,t){void 0===t&&(t=g.InvalidationLevel.Light);var i=new g.InvalidationMask,r=this._panes.indexOf(e);return i.invalidateAllPane(r,t),i},e.prototype._invalidationMaskForSourcePriceScale=function(e,t){if(void 0===t&&(t=g.InvalidationLevel.Light),!Object(a.a)(e))return new g.InvalidationMask(t);var i=this.paneForSource(e);if(null===i)return null;var r=e.priceScale();if(null===r)return null;var n=this._panes.indexOf(i),o=i.priceScalePosition(r);if("overlay"===o){var s=this._panes[n].defaultPriceScale();r=s,o=i.priceScalePosition(s)}var l=i.priceScaleIndex(r,o);if(void 0===l)return null;var c=new g.InvalidationMask;return c.invalidatePriceScale(n,o,l,t),c},e.prototype._removeCustomSource=function(e){var t=this._customSourcesMap.get(e);if(void 0!==t){Y.logNormal('Removing custom source "'+e+'"');var i=X(this._fgCustomSources,t)!==X(this._bgCustomSources,t),n=X(this._allCustomSources,t);Object(r.assert)(i,"Source should be presented in one of the layers"),Object(r.assert)(n,"Source should be presented in the array"),this._customSourcesMap.delete(e),t.destroy()}else Y.logWarn('Attempt to remove custom source which does not exist in the model - "'+e+'"')},e.prototype._updateShowLegendProperty=function(){var e=this._properties.childs().paneProperties.childs().legendProperties.childs().showLegend,t=this._showLegendProperty;if(e.value())t.setValue(!0);else{for(var i=0,r=this._panes;i<r.length;i++)for(var n=0,o=0,s=r[i].dataSources();o<s.length;o++){var a=s[o];if(a!==this.mainSeries()&&null!==a.statusView()&&++n>1)return void t.setValue(!1)}t.setValue(!0)}},e.prototype._pointToPercentPosition=function(e,t){return{x:e.x/this._timeScale.width(),y:e.y/Object(r.ensureNotNull)(Object(r.ensureNotNull)(t.mainDataSource()).priceScale()).height()}},e.prototype._percentPositionToPoint=function(e,t){var i=e.x*this._timeScale.width(),o=e.y*Object(r.ensureNotNull)(Object(r.ensureNotNull)(t.mainDataSource()).priceScale()).height();return new n.Point(i,o)},e.prototype._getAvailableCurrencies=function(){return[]},e.prototype._getBackgroundColor=function(e){var t=this._properties.childs().paneProperties.childs();if(t.backgroundType.value()===q.ColorType.Gradient)return e?t.backgroundGradientStartColor.value():t.backgroundGradientEndColor.value();var i=t.background.value();return function(e){return Object(E.getCurrentTheme)().name===L.StdTheme.Dark&&Object(E.isStdThemedDefaultValue)("chartProperties.paneProperties.background",e,L.StdTheme.Dark)&&Object(I.isOnMobileAppPage)("old")?"#000000":e}(i)},e.prototype._updateBackgroundColor=function(){
this._backgroundColor.setValue(this._getBackgroundColor()),this._backgroundTopColor.setValue(this._getBackgroundColor(!0))},e}()},gQ5K:function(e,t,i){"use strict";i.r(t),i.d(t,"DateFormatter",(function(){return o}));var r=i("kcTO"),n=i("e1ZQ"),o=function(){function e(e){void 0===e&&(e="yyyy-MM-dd"),this._dateFormatFunc=n.dateFormatFunctions[e]}return e.prototype.format=function(e){return r.customFormatters&&r.customFormatters.dateFormatter?r.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!1)},e.prototype.formatLocal=function(e){return r.customFormatters.dateFormatter?r.customFormatters.dateFormatter.formatLocal?r.customFormatters.dateFormatter.formatLocal(e):r.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!0)},e}()},gTEF:function(e,t,i){"use strict";i.r(t),i.d(t,"SelectionRendererArrowsUpDown",(function(){return a}));var r=i("mrSG"),n=i("Eyy1"),o=i("vq8G"),s=i("6Fc/"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._drawMarker=function(e,t,i,r,o){var a=Object(n.ensureNotNull)(this._data),l=t.isUp?1:-1,c=i+l*Object(s.calculateVerticalOffset)(a.barSpacing)+l*Object(s.calculateMinHeight)(a.barSpacing),u=Math.round(3.5*o*2);u%2!=r%2&&(u+=1);var h=r%2/2,d=Math.round(t.x*o)+h,p=Math.round((t.y+c)*o)+h;e.beginPath(),e.arc(d,p,u/2,0,2*Math.PI,!0),e.closePath(),e.fill(),e.stroke()},t}(o.SelectionRenderer)},gVWb:function(e,t,i){"use strict";i.r(t),i.d(t,"PaneRendererBackground",(function(){return r}));var r=function(){function e(e){this._data=e}return e.prototype.draw=function(e,t){},e.prototype.drawBackground=function(e,t){e.save();for(var i=this._data,r=t.pixelRatio,n=0;n<i.items.length;++n){var o=i.items[n];if(null!=o.color){e.fillStyle=o.color;var s=Math.round(o.x*r),a=n===i.items.length-1?Math.round(i.w*r):Math.round(i.items[n+1].x*r)-s;e.fillRect(s,Math.round(i.y*r),a,Math.round(i.h*r))}}e.restore()},e.prototype.hitTest=function(e){return null},e}()},gWck:function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesLegendView",(function(){return l}));var r=i("mrSG"),n=i("cXAR"),o=i("n5al"),s={open:window.t("O",{context:"in_legend"}),high:window.t("H",{context:"in_legend"}),low:window.t("L",{context:"in_legend"}),close:window.t("C",{context:"in_legend"}),hl2:window.t("HL2",{context:"in_legend"}),hlc3:window.t("HLC3",{context:"in_legend"}),ohlc4:window.t("OHLC4",{context:"in_legend"})},a=window.t("At close"),l=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._showBarChange=i.properties().paneProperties.legendProperties.showBarChange,r._showSeriesOHLC=i.properties().paneProperties.legendProperties.showSeriesOHLC,r._seriesStyle=t.properties().childs().style,r._items[0].setTitle(s.open),r._items[1].setTitle(s.high),r._items[2].setTitle(s.low),r._items[3].setTitle(s.close),r._items[6].setTitle(""),r._showBarChange.subscribe(r,r.update),r._showSeriesOHLC.subscribe(r,r.update),r._items[4].setTitle(""),r}return Object(r.__extends)(t,e),t.prototype.isValuesVisible=function(){
return this._showSeriesOHLC.value()||this._showBarChange.value()},t.prototype.additional=function(){var e=this._series.dataPoweredBy();return null!==e&&e.length>0?window.t("Data Provided by")+" "+e:null},t.prototype.marketTitle=function(){var e=this._series.marketStatusModel().status().value();return this._showLastPriceAndChangeOnly()&&("pre_market"===e||"post_market"===e)?a+":":""},t.prototype.destroy=function(){this._showBarChange.unsubscribeAll(this),this._showSeriesOHLC.unsubscribeAll(this)},t.prototype._updateImpl=function(){e.prototype._updateImpl.call(this);var t=this._showSeriesOHLC.value(),i=this._showBarChange.value(),r=12===this._series.style(),n=this._items[6];if(n.setVisible(n.visible()&&i&&!r),this._showLastPriceAndChangeOnly()){var s=this._items[5];s.setVisible(s.visible()&&t)}else{var a=Object(o.isPriceSourceStyle)(this._seriesStyle.value()),l=t&&!a,c=t&&a;this._items[0].setVisible(l&&!r),this._items[1].setVisible(l),this._items[2].setVisible(l),this._items[3].setVisible(l&&!r),this._items[4].setVisible(c)}},t}(n.SeriesDataWindowView)},gWrr:function(e,t,i){"use strict";i.r(t),i.d(t,"parseHtml",(function(){return n})),i.d(t,"parseHtmlElement",(function(){return o}));var r=new WeakMap;function n(e,t){var i,n;return i=null==t?document.documentElement:9===t.nodeType?t.documentElement:t,r&&(n=r.get(i)),n||((n=i.ownerDocument.createRange()).selectNodeContents(i),r&&r.set(i,n)),n.createContextualFragment(e)}function o(e,t){var i,r=n(e,t);if("firstElementChild"in r)i=r.firstElementChild;else{i=null;for(var o=0;o<r.childNodes.length;o++){var s=r.childNodes[o];if(1===s.nodeType){i=s;break}}}return null!==i&&r.removeChild(i),i}},"ga+R":function(e,t,i){"use strict";e.exports=function(e,t){var i=e%10;i&&(e=e-i+10);for(var r=[];e<=t;e+=10)r.push(e);return r}},gaBL:function(e,t,i){"use strict";i.r(t),i.d(t,"sourceNewCurrencyOnPinningToPriceScale",(function(){return r}));i("/tGj");function r(e,t,i,r){return null}},gbZD:function(e,t,i){"use strict";i.r(t),i.d(t,"trackActionFollow",(function(){return n}));var r=i("0UyP");function n(e,t,i){var n=i.authorId?i.authorId.toString():"",o=i.symbol?i.symbol:"",s=i.symbolType?i.symbolType:"";Object(r.getTracker)().then((function(i){i&&i.trackFollow(e,t,n,o,s)}))}},gf4d:function(e,t,i){"use strict";var r=i("Eyy1").assert,n=i("MSvv").StudyLineDataSource,o=i("tqok").INVALID_TIME_POINT_INDEX,s="RegressionTrend@tv-basicstudies",a=window.t("Regression Trend");function l(e,t,r){r=r||e.studyMetaInfoRepository().findByIdSync({type:"java",studyId:s});var o=t||n._createPropertiesFromStudyMetaInfo(r,e.studyVersioning());n.call(this,e,r,"linreg_",o),this._constructor="LineToolRegressionTrend",this._trendData=null,Promise.all([i.e(98),i.e(213),i.e("study-pane-views")]).then(function(e){var t=i("IMGS").RegressionTrendPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function c(e){return void 0!==e.startPrice&&void 0!==e.endPrice}inherit(l,n),l.prototype.version=2,l.prototype.translatedType=function(){return a},l.prototype.formatter=function(){
r(!1,"This method should never be called")},l.prototype.pointsCount=function(){return 2},l.prototype.clearData=function(){this._trendData=null,n.prototype.clearData.call(this)},l.prototype.state=function(e){var t=n.prototype.state.call(this,e);return Object.assign({},t,{nonseriesdata:this._trendData})},l.prototype.restoreData=function(e){n.prototype.restoreData.call(this,e),this._trendData=e.nonseriesdata?e.nonseriesdata:null},l.prototype.startIndex=function(){if(null===this._trendData||null===this._indexes)return null;var e=this._indexes[this._trendData.startIndex];return e!==o?e:null},l.prototype.endIndex=function(){if(null===this._trendData||null===this._indexes)return null;var e=this._indexes[this._trendData.endIndex];return e!==o?e:null},l.prototype.baseLine=function(){return null===this._trendData?null:this._trendData.baseLine},l.prototype.downLine=function(){return null===this._trendData?null:this._trendData.downLine},l.prototype.upLine=function(){return null===this._trendData?null:this._trendData.upLine},l.prototype.pearsons=function(){return null===this._trendData?null:this._trendData.pearsons},l.prototype.recalcStudyIfNeeded=function(){this._onStudyInputsMayChange()},l.prototype._studyInputs=function(e){r(2===e.length,"all the line tool points should be defined");var t=e[0],i=e[1],n=Math.min(t.index,i.index),o=Math.max(t.index,i.index);if(n===o)return null;var s=this._model.mainSeries().bars().valueAt(n),a=this._model.mainSeries().bars().valueAt(o);if(null===s||null===a)return this._subscribeApplyInputsOnSeriesCompleted(),null;var l=1e3*s[TradingView.TIME_PLOT],c=1e3*a[TradingView.TIME_PLOT];return{"upper diviation":this.properties().inputs["upper diviation"].value(),"lower diviation":this.properties().inputs["lower diviation"].value(),"use upper diviation":this.properties().inputs["use upper diviation"].value(),"use lower diviation":this.properties().inputs["use lower diviation"].value(),"first bar time":l,"last bar time":c,source:this.properties().inputs.source.value()}},l.prototype._onDataUpdated=function(e,t,i){null!==t&&(t.indexes_replace||(this._trendData=t.data,TradingView.isNaN(this._trendData.baseLine.startPrice)||TradingView.isNaN(this._trendData.baseLine.endPrice)||(this._points[0].price=this._trendData.baseLine.startPrice,this._points[1].price=this._trendData.baseLine.endPrice)),this._indexes=i,n.prototype._onDataUpdated.call(this,e,t,i))},l.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("study-property-pages-with-definitions")]).then(function(e){return i("4lou").RegressionTrendDefinitionsViewModel}.bind(null,i)).catch(i.oe)},l.prototype._isReady=function(){return this._trendData&&void 0!==this._trendData.startIndex&&void 0!==this._trendData.endIndex&&c(this._trendData.upLine)&&c(this._trendData.baseLine)&&c(this._trendData.downLine)},l.createProperties=function(e){return n._createPropertiesFromStudyIdAndState(s,e)},l.createPropertiesFromStudyMetaInfoAndState=function(e,t,i,r){
return n.createPropertiesFromStudyMetaInfoAndState(e,t,i,r)},l.studyId=function(){return s},l.prototype.cloneable=function(){return!1},t.LineToolRegressionTrend=l},gvrv:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return _}));var r,n,o=i("Eyy1"),s=i("aIyQ"),a=i.n(s),l=i("k9/m"),c=i("hsV8"),u=i("jy4L"),h=i("w4Ji"),d=i("jenN"),p=i("txPx"),f=Object(p.getLogger)("Chart.StudyDataSource");!function(e){e[e.Undefined=0]="Undefined",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed",e[e.Error=3]="Error"}(r||(r={})),function(e){e[e.Idle=0]="Idle",e[e.AwaitingConnection=1]="AwaitingConnection",e[e.AwaitingParent=2]="AwaitingParent",e[e.AwaitingFirstDataUpdate=3]="AwaitingFirstDataUpdate",e[e.Active=4]="Active"}(n||(n={}));var _=function(){function e(e,t,i,o){this._inputs=null,this._status=n.Idle,this._studyId=null,this._turnaroundCounter=1,this._studyStatus={type:r.Undefined},this._studyStatusChanged=new a.a,this._graphics=new d.LiveStudyGraphics,this._dataCleared=new a.a,this._dataUpdated=new a.a,this._boundOnGatewayIsConnectedChanged=this._onGatewayIsConnectedChanged.bind(this),this._ongoingDataUpdate=Promise.resolve(),this._gateway=e,this._metaInfo=o,this._series=t,this._turnaroundPrefix=i,this._plots=new l.PlotList(Object(h.studyPlotFunctionMap)(o),h.studyEmptyPlotValuePredicate),this._gateway.isConnected().subscribe(this._boundOnGatewayIsConnectedChanged)}return e.prototype.destroy=function(){this.stop(),this._gateway.isConnected().unsubscribe(this._boundOnGatewayIsConnectedChanged),this._dataUpdated.destroy(),this._dataCleared.destroy(),this._studyStatusChanged.destroy()},e.prototype.metaInfo=function(){return this._metaInfo},e.prototype.inputs=function(){return this._inputs},e.prototype.setInputs=function(e){this._inputs=e,null!==this._studyId&&(this._turnaroundCounter++,this._onStudyStatusChangedTo({type:r.Undefined}),this._gateway.modifyStudy(this._studyId,this._turnaround(),e,this._onMessage.bind(this)),this._status===n.Active&&this._changeStatusTo(n.AwaitingFirstDataUpdate))},e.prototype.isStarted=function(){return this._status!==n.Idle},e.prototype.isActive=function(){return this._status===n.Active},e.prototype.start=function(){this.isStarted()?f.logNormal("start: data source is already started, nothing to do"):(Object(o.assert)(null!==this._inputs,"Inputs should be defined when starting a study data source"),this._gateway.isConnected().value()?this._createStudy():this._changeStatusTo(n.AwaitingConnection))},e.prototype.stop=function(){this.isStarted()?(null!==this._studyId&&(this._gateway.removeStudy(this._studyId),this._studyId=null,this._onStudyStatusChangedTo({type:r.Undefined})),this._changeStatusTo(n.Idle)):f.logNormal("stop: data source is already stopped, nothing to do")},e.prototype.studyId=function(){return this._studyId},e.prototype.studyStatus=function(){return this._studyStatus},e.prototype.studyStatusChanged=function(){return this._studyStatusChanged},e.prototype.plots=function(){return this._plots},e.prototype.graphics=function(){return this._graphics},
e.prototype.clearData=function(){this._plots.clear(),this._graphics.clear(),this._dataCleared.fire()},e.prototype.stopAndStealData=function(){Object(o.assert)(this._status===n.Active,"Couldn't steal data from non-active data source"),this.stop();var e=this._plots,t=this._graphics.extract();return this._plots=new l.PlotList(Object(h.studyPlotFunctionMap)(this._metaInfo),h.studyEmptyPlotValuePredicate),{plots:e,graphics:t}},e.prototype.dataCleared=function(){return this._dataCleared},e.prototype.dataUpdated=function(){return this._dataUpdated},e.prototype._changeStatusTo=function(e){Object(o.assert)(this._status!==e,"Source and destination status should be distinct"),f.logNormal("Status changed from "+n[this._status]+" to "+n[e]),this._status=e},e.prototype._createStudy=function(){var e=this._series.seriesId();null!=e?this._createStudyUsingParentId(e):(this._changeStatusTo(n.AwaitingParent),this._series.dataEvents().completed().subscribe(this,this._onSeriesCompleted,!0))},e.prototype._createStudyUsingParentId=function(e){Object(o.assert)(this._status!==n.Active,'Status should not be "Active" when creating a study'),Object(o.assert)(this._studyStatus.type===r.Undefined,'Study status should be "Undefined" when creating a study'),Object(o.assert)(null===this._studyId,"Study id should be empty when creating a study"),this._studyId=Object(u.makeNextStudyId)(),this._gateway.createStudy(this._studyId,this._turnaround(),e,this._metaInfo.fullId+"!",Object(o.ensureNotNull)(this._inputs),this._onMessage.bind(this)),this._changeStatusTo(n.AwaitingFirstDataUpdate)},e.prototype._onGatewayIsConnectedChanged=function(e){e?this._onGatewayConnected():this._onGatewayDisconnected()},e.prototype._onGatewayConnected=function(){this._status===n.AwaitingConnection&&this._createStudy()},e.prototype._onGatewayDisconnected=function(){this._status!==n.Idle&&this._status!==n.AwaitingConnection&&(this._studyId=null,this._changeStatusTo(n.AwaitingConnection),this._studyStatus.type!==r.Undefined&&this._onStudyStatusChangedTo({type:r.Undefined})),this._turnaroundCounter=1},e.prototype._onSeriesCompleted=function(){this._status===n.AwaitingParent&&this._createStudyUsingParentId(Object(o.ensure)(this._series.seriesId()))},e.prototype._onStudyStatusChangedTo=function(e){var t=this._studyStatus;this._studyStatus=e,f.logNormal("Study status type changed from "+r[t.type]+" to "+r[e.type]),this._studyStatusChanged.fire(t,e)},e.prototype._onMessage=function(e){if("data_update"===e.method){var t=e.params,i=t.customId,r=t.turnaround,n=t.plots,o=t.nonseries;i===this._studyId&&this._checkTurnaround(r)&&this._onDataUpdate(n,o)}else if("study_loading"===e.method){var s=e.params,a=(i=s[0],r=s[1],s[2]);i===this._studyId&&this._checkTurnaround(r)&&this._onStudyLoading(a)}else if("study_completed"===e.method){var l=e.params;i=l[0],r=l[1],a=l[2];i===this._studyId&&this._checkTurnaround(r)&&this._onStudyCompleted(a)}else if("study_error"===e.method){var c=e.params,u=(i=c[0],r=c[1],c[2]),h=c[3];a=c[4];i===this._studyId&&this._checkTurnaround(r)&&this._onStudyError(u,h,a)}
},e.prototype._onDataUpdate=function(e,t){var i=Object(c.unpackNonSeriesData)(t.d);return this._ongoingDataUpdate=this._ongoingDataUpdate.then((function(){return i}),(function(){return i})).then(this._onDataUnpacked.bind(this,e,t.indexes)),this._ongoingDataUpdate},e.prototype._onDataUnpacked=function(e,t,i){this._status!==n.Idle&&(this._status===n.AwaitingFirstDataUpdate&&(this._changeStatusTo(n.Active),this.clearData()),this._mergePlots(e),null!==i&&(i.indexes_replace?(Object(o.assert)("nochange"!==t),this._graphics.replaceIndexesTo(t)):("nochange"!==t&&this._graphics.replaceIndexesTo(t),void 0!==i.graphicsCmds&&this._graphics.processCommands(i.graphicsCmds,this._metaInfo.graphics))),this._dataUpdated.fire(e,i,t))},e.prototype._onStudyLoading=function(e){this._onStudyStatusChangedTo({type:r.Loading,startTime:Date.now()})},e.prototype._onStudyError=function(e,t,i){this.clearData(),this._onStudyStatusChangedTo({type:r.Error,reason:e})},e.prototype._onStudyCompleted=function(e){this._onStudyStatusChangedTo({type:r.Completed})},e.prototype._mergePlots=function(e){this._plots.merge(e)},e.prototype._turnaround=function(){return""+this._turnaroundPrefix+this._turnaroundCounter},e.prototype._checkTurnaround=function(e){var t=this._turnaround();return e===t||e===this._series.turnaround()||e===this._series.turnaround()+"_"+t},e}()},gyZD:function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("GEp6").distanceToSegment,o=i("Zp/P"),s=i("VdBB").HitTestResult,a=i("cPgM").ScaledPaneRenderer;function l(e){this.items=e.items,this._simpleMode=e.simpleMode,this.barSpacing=e.barSpacing,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.lineStyle=e.lineStyle,this.withMarkers=e.withMarkers,this.hittest=e.hittest,this.ignorePaletteLineWidth=e.ignorePaletteLineWidth,this.forceLineColor=!!e.forceLineColor}inherit(l,a),l.prototype._drawImpl=function(e){e.lineCap="square",e.lineJoin=this.withMarkers?"round":"miter",e.strokeStyle=this.lineColor,e.fillStyle=this.lineColor,e.lineWidth=this.lineWidth,e.lineStyle=this.lineStyle,o.setValidLineStyle(e,this.lineStyle),this._simpleMode?this._drawSimpleMode(e):this._drawLines(e)},l.prototype._drawSimpleMode=function(e){if(e.beginPath(),this.walkLine(e,this.items),e.stroke(),this.withMarkers){var t,i=this.lineWidth+2,r=2*Math.PI;e.beginPath();for(var n=this.items.length;n--;)(t=this.items[n])&&(e.moveTo(t.x,t.y),e.arc(t.x,t.y,i,0,r));e.fill()}},l.prototype.walkLine=function(e,t,i,r){if(t){for(var n,s,a,l,c,u=.25*this.barSpacing,h=o.coordinateIsValid,d=0,p=t.length;d<p;d++){var f=t[d];if(h(f.y)){s=f,n=d;break}}if(void 0!==n&&s)for(d=n,p=t.length;d<p;d++){if(l=t[d],c=t[d+1]||{},h(l.y))if(a&&h(a.y))e.lineTo(l.x,l.y),i&&!h(c.y)&&e.lineTo(l.x,r);else if(c&&h(c.y))i?(d!==n&&e.lineTo(l.x,r),e.lineTo(l.x,l.y)):e.moveTo(l.x,l.y);else if(i){if(0===d)continue;d!==n&&e.lineTo(l.x-u,r),e.lineTo(l.x-u,l.y),e.lineTo(l.x+u,l.y),e.lineTo(l.x+u,r)}else e.moveTo(l.x-u,l.y),e.lineTo(l.x+u,l.y);a=l}}},l.prototype._drawLines=function(e){if(this.items.length){var t,i,r,n=.25*this.barSpacing,s=o.coordinateIsValid
;e.beginPath();var a=this.items[0];a&&e.moveTo(a.x,a.y);for(var l=e.strokeStyle,c=e.lineWidth,u=e.lineStyle,h=1;h<this.items.length;++h){var d,p,f;t=this.items[h-1],i=this.items[h],r=this.items[h+1],i.style&&!this.forceLineColor?(d=i.style.color,p=i.style.width,f=i.style.style):(d=this.lineColor,p=this.lineWidth,f=this.lineStyle),this.ignorePaletteLineWidth&&(p=this.lineWidth),(d!==l||p!==c||f!==u)&&(l=d,c=p,u=f,e.stroke(),e.beginPath(),e.strokeStyle=d,e.lineWidth=p,o.setValidLineStyle(e,f),e.moveTo(t.x,t.y)),_(t,i,r)}e.stroke()}function _(t,i,r){s(i.y)&&(s(t.y)?e.lineTo(i.x,i.y):r&&s(r.y)?e.moveTo(i.x,i.y):(e.moveTo(i.x-n,i.y),e.lineTo(i.x+n,i.y)))}},l.prototype.hitTest=function(e){for(var t,i,a,l,c=o.selectionTolerance(this.lineWidth),u=0,h=this.items.length-1;h-u>2;){var d=Math.round((h+u)/2);this.items[d].x<=e.x?u=d:h=d}u=Math.max(1,u-1),h=Math.min(this.items.length-1,h+1);for(var p=u;p<=h;++p)if(t=this.items[p-1],i=this.items[p],a=t.x,l=i.x,n(new r(a,t.y),new r(l,i.y),new r(e.x,e.y)).distance<=c)return this.hittest?this.hittest:new s(s.REGULAR);return null},t.PaneRendererLine=TradingView.PaneRendererLine=l},h24c:function(e,t,i){"use strict";i.r(t),i.d(t,"parseIntervalValue",(function(){return c})),i.d(t,"intervalIsSupported",(function(){return u})),i.d(t,"canShowSpreadActions",(function(){return h})),i.d(t,"globalKeypressMatches",(function(){return d})),i.d(t,"skipAccept",(function(){return p})),i.d(t,"syncSymbolSearch",(function(){return f})),i.d(t,"setLinkingResolution",(function(){return _}));var r=i("Kxc7"),n=i("pPtI"),o=i("PT1i"),s=i("LxhU"),a=i("ePL1"),l=new RegExp("^"+a.types.QUANDL,"i");function c(e){var t=/^[,\s]*(\d*)\s*([hdwmsr]?)\s*$/i.exec(e)||[],i=~~t[1],r=t[2]&&t[2].toUpperCase()||null,n={qty:!i&&r?1:i,unit:r};return n.error=!i&&!r,n.intraday=!(n.error||n.unit&&"H"!==n.unit),n}function u(e){if(r.enabled("allow_supported_resolutions_set_only")){var t=s.Interval.normalize(e);return null!==t&&Object(n.isAvailable)(t)}var i=c(e);if(i.error)return!1;if(i.intraday)return o.linking.intraday.value();var a=o.linking.supportedResolutions.value();return!a||null!==i.unit&&!!~a.indexOf(i.unit)}function h(){return"cme"!==window.TradingView.widgetCustomer&&"bovespa"!==window.TradingView.widgetCustomer}function d(e){if(e.ctrlKey)return!1;if(e.metaKey)return!1;if(!e.charCode)return!1;if(!e.which||e.which<=32)return!1;if(null!==e.target&&/^(input|textarea)$/i.test(e.target.tagName))return!1;var t=i.c.GAqT;if(t&&t.exports.TVOldDialogs.modalDialog)return!1;var r=i.c["6aJD"];return!r||!r.exports.isOpenedModals()}function p(e,t){return!t&&(e===o.linking.symbol.value()||e===o.linking.seriesShortSymbol.value())}function f(e,t){var i=o.linking.symbol.value()||"";i=function(e,t){if(!t)return e;if(l.test(e)){var i=e.split(/\//);i.length&&(e=i[i.length-1])}else e=o.linking.seriesShortSymbol.value()||e;return e}(i,t),e.val(i)}function _(e){Object(n.setLastUsedResolution)(e),o.linking.interval.setValue(e)}},h7NA:function(e,t,i){"use strict";i.r(t),i.d(t,"updateInitData",(function(){return a})),i.d(t,"getInitData",(function(){
return l})),i.d(t,"getFreshInitData",(function(){return c}));var r=i("Eyy1"),n=i("txPx"),o=Object(n.getLogger)("Common.InitData"),s=window.initData||{};function a(){window.initData&&window.initData!==s&&(Object.assign(s,window.initData),window.initData=s);for(var e=document.querySelectorAll('script[type="application/prs.init-data+json"]'),t=0;t<e.length;t++){var i=e[t];try{var n=JSON.parse(Object(r.ensureNotNull)(i.textContent));Object.assign(s,n)}catch(a){o.logWarn("Failed to parse initData element. "+a)}finally{Object(r.ensureNotNull)(i.parentNode).removeChild(i)}}}function l(){return s}function c(){return a(),s}},hBTJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Eyy1"),n=i("aO4+"),o=i("GEp6"),s=i("f6yo");function a(e,t){var i=e.A,r=t.A,o=e.B,s=t.B,a=e.C,l=t.C,c=i*s-r*o;if(Math.abs(c)<1e-6)return null;var u=(o*l-s*a)/c,h=(r*a-i*l)/c;return new n.Point(u,h)}function l(e,t,i,r){var n=function(e,t,i,r){var n=t.subtract(e),o=r.subtract(i),s=n.x*o.y-n.y*o.x;if(Math.abs(s)<1e-6)return null;var a=e.subtract(i);return(a.y*o.x-a.x*o.y)/s}(e,t,i,r);if(null===n)return null;var s=t.subtract(e).scaled(n).add(e),a=o.distanceToSegment(i,r,s);return Math.abs(a.distance)<1e-6?n:null}function c(e,t){for(var i=0,r=e;i<r.length;i++){var o=r[i];if(n.equalPoints(o,t))return!1}return e.push(t),!0}function u(e,t){return!(e.length>0&&n.equalPoints(e[e.length-1],t))&&(e.push(t),!0)}function h(e,t){for(var i=[],r=0;r<e.length;++r){var o=e[r],l=e[(r+1)%e.length],c=n.lineThroughPoints(o,l);if(s.pointInHalfplane(o,t)){if(u(i,o),!s.pointInHalfplane(l,t))null!==(h=a(c,t.edge))&&u(i,h)}else if(s.pointInHalfplane(l,t)){var h;null!==(h=a(c,t.edge))&&u(i,h)}}return i.length>=3?i:null}t.intersectLineSegmentAndBox=function(e,t){var i=e[0].x,r=e[0].y,o=e[1].x,s=e[1].y,a=t.min.x,l=t.min.y,c=t.max.x,u=t.max.y;function h(e,t,i,r,n,o){var s=0;return e<i?s|=1:e>n&&(s|=2),t<r?s|=4:t>o&&(s|=8),s}for(var d=h(i,r,a,l,c,u),p=h(o,s,a,l,c,u),f=!1,_=0;;){if(_>1e3)throw new Error("Cohen - Sutherland algorithm: infinity loop");if(_++,!(d|p)){f=!0;break}if(d&p)break;var m=d||p,v=void 0,g=void 0;8&m?(v=i+(o-i)*(u-r)/(s-r),g=u):4&m?(v=i+(o-i)*(l-r)/(s-r),g=l):2&m?(g=r+(s-r)*(c-i)/(o-i),v=c):(g=r+(s-r)*(a-i)/(o-i),v=a),m===d?d=h(i=v,r=g,a,l,c,u):p=h(o=v,s=g,a,l,c,u)}return f?n.equalPoints(n.point(i,r),n.point(o,s))?n.point(i,r):n.lineSegment(n.point(i,r),n.point(o,s)):null},t.intersectLines=a,t.intersectLineSegments=l,t.intersectLineAndBox=function(e,t){var i=t.min.x,o=t.min.y,s=t.max.x,a=t.max.y;if(0===e.A){var l=-e.C/e.B;return o<=l&&l<=a?n.lineSegment(n.point(i,l),n.point(s,l)):null}if(0===e.B){var u=-e.C/e.A;return i<=u&&u<=s?n.lineSegment(n.point(u,o),n.point(u,a)):null}var h=[],d=function(t){var i=function(e,t){return-(e.C+e.A*t)/e.B}(e,t);o<=i&&i<=a&&c(h,new n.Point(t,i))},p=function(t){var r=function(e,t){return-(e.C+e.B*t)/e.A}(e,t);i<=r&&r<=s&&c(h,new n.Point(r,t))};switch(d(i),p(o),d(s),p(a),h.length){case 0:return null;case 1:return h[0];case 2:return n.equalPoints(h[0],h[1])?h[0]:n.lineSegment(h[0],h[1])}
return r.assert(!1,"We should have at most two intersection points"),null},t.intersectRayAndBox=function(e,t,i){var r=l(e,t,i.min,new n.Point(i.max.x,i.min.y)),o=l(e,t,new n.Point(i.max.x,i.min.y),i.max),a=l(e,t,i.max,new n.Point(i.min.x,i.max.y)),c=l(e,t,new n.Point(i.min.x,i.max.y),i.min),u=[];if(null!==r&&r>=0&&u.push(r),null!==o&&o>=0&&u.push(o),null!==a&&a>=0&&u.push(a),null!==c&&c>=0&&u.push(c),0===u.length)return null;u.sort((function(e,t){return e-t}));var h=s.pointInBox(e,i)?u[0]:u[u.length-1];return e.addScaled(t.subtract(e),h)},t.intersectPolygonAndHalfplane=h,t.intersectPolygons=function(e,t){for(var i=e,r=0;r<t.length&&null!==i;++r){var o=t[r],s=t[(r+1)%t.length],a=t[(r+2)%t.length],l=n.lineThroughPoints(o,s);i=h(i,n.halfplaneThroughPoint(l,a))}return i}},hGf4:function(e,t,i){"use strict";(function(e,t){var r,n=i("kcTO").PriceFormatter,o=i("JOqt").debounce,s=i("PoSe"),a=i("IVMC"),l=i("e3/o"),c=i("i/Bj").parseUpdateMode,u=i("FIi8").deepExtend;function h(t,i){this.options=Object.assign({throttleTimeout:125},i),this._connected=!1,this._symbol_data={},this._subscriptions={},this.onConnect=new e,this.onDisconnect=new e,this._quoteApi=new r(window.ChartApiInstance),this._type=t||"full",this._delayUpdateFastSymbols=o(this._updateFastSymbols,250),this._throttledSymbolData={},this._formatterValuesCache={},this._waitingForFormatters={},this._snapshotValuesCache={},this._waitingForSnapshot={},this.connect()}r=i("wi9r"),h.prototype.destroy=function(){this._quoteApi.destroy(),this._quoteApi=null,this._connected=!1,this.onDisconnect.fire()},h.prototype.typeFields={},h.prototype.typeFields.simple=["ch","chp","current_session","description","local_description","language","exchange","fractional","is_tradable","lp","lp_time","minmov","minmove2","original_name","pricescale","pro_name","short_name","type","update_mode","volume","currency_code","logoid","currency-logoid","base-currency-logoid"],h.prototype.typeFields.simpleDetailed=[].concat(h.prototype.typeFields.simple,["ask","bid","fundamentals","high_price","is_tradable","low_price","open_price","prev_close_price","rch","rchp","rtc","rtc_time","status","basic_eps_net_income","beta_1_year","earnings_per_share_basic_ttm","industry","market_cap_basic","price_earnings_ttm","sector","volume","dividends_yield","timezone"]),h.prototype.typeFields.full=[],h.prototype.typeFields.watchlist=[].concat(h.prototype.typeFields.simple,["rchp","rtc"]),h.prototype.connect=function(e){this._quoteApi.connect(this.quoteHandler.bind(this))},h.prototype.quoteHandler=function(e){var t=e.method,i=e.params;switch(t){case"connected":this._connected||(this._connected=!0,this.onConnected());break;case"quote_list_fields":break;case"quote_symbol_data":this._connected&&this.onSymbolData(i[0]);break;case"quote_completed":this._connected&&this.onSymbolData({symbolname:i[0],complete:performance.now(),values:{}});break;case"disconnected":this._connected&&(this._connected=!1,this.onDisconnect.fire())}},h.prototype.onConnected=function(){this.setFields();var e=Object.keys(this._symbol_data)
;e.length&&(this._quoteApi.quoteAddSymbols(e,{forcePermission:!0}),this._delayUpdateFastSymbols()),this.onConnect.fire()},h.prototype.setFields=function(){var e=h.prototype.typeFields[this._type];e&&e.length&&this._quoteApi.quoteSetFields(e)},h.prototype.onSymbolData=function(e){var t=e.symbolname,i=this._throttledSymbolData[t];i||(i=this._throttledSymbolData[t]={fnDispatch:s(this.dipatchSymbolData.bind(this),this.options.throttleTimeout)}),i.cache?u(i.cache,e):i.cache=e,i.fnDispatch(t)},h.prototype._parseUpdateMode=function(e){var t=c(e.update_mode);null!==t&&(e.update_mode=t.mode,e.update_mode_seconds=t.interval)},h.prototype.dipatchSymbolData=function(e){var t=this._symbol_data[e],i=this._throttledSymbolData[e].cache;if(delete this._throttledSymbolData[e].cache,this._symbol_data[e])for(var r in u(t,i),t.values&&this._parseUpdateMode(t.values),this._subscriptions){var n=this._subscriptions[r];n.has(e)&&n.get(e).forEach((function(e){e(t,i)}))}},h.prototype.subscribe=function(e,t,i){this._subscriptions[e]=this._subscriptions[e]||new Map;var r=this._subscriptions[e];t=[].concat(t);var n=[];t.forEach((function(e){this._symbol_data[e]?r&&r.has(e)||this._symbol_data[e].subscribers_count++:(this._symbol_data[e]={subscribers_count:1},n.push(e)),r.has(e)||r.set(e,[]),r.get(e).push(i),r.get(e).fast=!0,this._symbol_data[e]&&this._symbol_data[e].values&&i(this._symbol_data[e],this._symbol_data[e])}),this),n.length&&this._connected&&(this._quoteApi.quoteAddSymbols(n,{forcePermission:!0}),this._delayUpdateFastSymbols())},h.prototype.unsubscribe=function(e,t,i){t=[].concat(t);for(var r=this._subscriptions[e],n=[],o=0;o<t.length;o++){var s=t[o];if(r)if(r.has(s)&&i){var a=r.get(s).indexOf(i);~a&&r.get(s).splice(a,1),r.get(s).length||r.delete(s)}else r.delete(s);r&&0===r.size&&delete this._subscriptions[e],this._symbol_data.hasOwnProperty(s)&&(r&&!r.has(s)&&this._symbol_data[s].subscribers_count--,this._symbol_data[s].subscribers_count||(delete this._symbol_data[s],n.push(s)))}n.length&&this._connected&&(this._quoteApi.quoteRemoveSymbols(n),this._delayUpdateFastSymbols())},h.prototype.setFastSymbols=function(e,t){if(this._subscriptions[e])for(var i=this._subscriptions[e],r=Array.from(i.keys()),n=0;n<r.length;++n){var o=r[n];i.get(o).fast=-1!==t.indexOf(o)}this._delayUpdateFastSymbols()},h.prototype._updateFastSymbols=function(){if(this._connected){var e=this._fastSymbols();0===e.length?this._quoteApi.quoteHibernateAll():this._quoteApi.quoteFastSymbols(e)}},h.prototype._delayUpdateFastSymbols=h.prototype._updateFastSymbols,h.prototype._fastSymbols=function(){var e=[];for(var t in this._subscriptions)for(var i=this._subscriptions[t],r=Array.from(i.keys()),n=0;n<r.length;++n){var o=r[n];i.get(o).fast&&e.push(o)}return e=a(e)},h.prototype.formatter=function(e,t){var i=this;if(this._waitingForFormatters[e])return this._waitingForFormatters[e];function r(e){var i=t&&!e.fractional?1:e.minmov;return new n(e.pricescale,i,e.fractional,e.minmove2)}var o=new Promise((function(t,n){
if(i._formatterValuesCache[e])t(r(i._formatterValuesCache[e]));else{var o=l.guid();i.subscribe(o,[e],(function(s){"error"===s.status&&(i._waitingForFormatters[e]=null,n("Quotes snapshot is not received")),function(e){return e&&null!=e.pricescale&&null!=e.minmov}(s.values)&&(i._waitingForFormatters[e]=null,i._formatterValuesCache[e]=s.values,t(r(s.values)),i.unsubscribe(o,e))}))}}));return this._waitingForFormatters[e]=o,o},h.prototype.snapshot=function(e){var t=this;if(this._waitingForSnapshot[e])return this._waitingForSnapshot[e];var i=new Promise((function(i,r){if(t._snapshotValuesCache[e])i(t._snapshotValuesCache[e]);else{var n=l.guid();t.subscribe(n,[e],(function(o){"error"===o.status&&(t._waitingForSnapshot[e]=null,r("Quotes snapshot is not received"));var s=o.values;s&&s.minmov&&s.pricescale&&s.description&&(t._waitingForSnapshot[e]=null,t._snapshotValuesCache[e]=s,i(s),t.unsubscribe(n,e))}))}}));return this._waitingForSnapshot[e]=i,i},TradingView.QuoteSessionMultiplexer=h,t&&t.exports&&(t.exports=h)}).call(this,i("aIyQ"),i("YuTi")(e))},hOqT:function(e,t,i){"use strict";i.r(t),i.d(t,"getTranslatedSymbolDescription",(function(){return s}));i("YFKU");var r=i("+GxX"),n=Object(r.isFeatureEnabled)("short_descriptions");function o(e){var t="#"+e+"-symbol-description",i=window.t(t);return i===t?null:i}function s(e){if(void 0!==e.pro_name){var t=o(e.pro_name);if(null!==t)return t;if(void 0!==e.short_name){var i=o(e.short_name);if(null!==i)return i}}return"en"!==e.language&&void 0!==e.local_description&&e.language===window.language?e.local_description:n&&void 0!==e.short_description?e.short_description:"en"===e.language&&void 0!==e.local_description&&e.language===window.language?e.local_description:e.description||""}},hP9j:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolPolyline",(function(){return u}));var r=i("mrSG"),n=i("Eyy1"),o=i("aO4+"),s=i("YFKU"),a=i("Ocx9"),l=i("Ss5c"),c=Object(s.t)("Polyline"),u=function(e){function t(r,n){var o=this,s=n||t.createProperties();return(o=e.call(this,r,s)||this)._constructor="LineToolPolyline",Promise.all([i.e(213),i.e("lt-pane-views")]).then(i.bind(null,"C2CE")).then((function(e){o._setPaneViews([new e.PolylinePaneView(o,r)])})),o}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return-1},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.translatedType=function(){return c},t.prototype.name=function(){return"Polyline"},t.prototype.hasEditableCoordinates=function(){return!1},t.prototype.addPoint=function(t,i,r){var s,a=Object(n.ensureNotNull)(this.priceScale()),l=this._model.timeScale().indexToCoordinate(t.index),c=t.price,u=Object(n.ensure)(null===(s=this.ownerSource())||void 0===s?void 0:s.firstValue()),h=a.priceToCoordinate(c,u);if(this._points.length>0){var d=this._points[this._points.length-1],p=this._model.timeScale().indexToCoordinate(d.index),f=d.price,_=a.priceToCoordinate(f,u);if(new o.Point(l,h).subtract(new o.Point(p,_)).length()<5)return this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0
;var m=this._points[0],v=this._model.timeScale().indexToCoordinate(m.index),g=m.price,y=a.priceToCoordinate(g,u);if(new o.Point(l,h).subtract(new o.Point(v,y)).length()<5)return this.properties().childs().filled.setValue(!0),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0}return e.prototype.addPoint.call(this,t,i,r)},t.prototype.setPoint=function(t,i,r,s){var a;e.prototype.setPoint.call(this,t,i,r,s);var l=this.priceScale();if(!(this._model.timeScale().isEmpty()||null===l||l.isEmpty()||t!==this._points.length-1&&0!==t)){var c=Object(n.ensure)(null===(a=this.ownerSource())||void 0===a?void 0:a.firstValue()),u=this._model.timeScale().indexToCoordinate(i.index),h=l.priceToCoordinate(i.price,c),d=t===this._points.length-1?this._points[0]:this._points[this._points.length-1],p=this._model.timeScale().indexToCoordinate(d.index),f=l.priceToCoordinate(d.price,c);new o.Point(u,h).subtract(new o.Point(p,f)).length()<5&&this.properties().childs().filled.setValue(!0)}},t.createProperties=function(e){var i=new a.DefaultProperty("linetoolpolyline",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"91EF")).then((function(e){return e.PolylinesDefinitionsViewModel}))},t._configureProperties=function(e){l.LineDataSource._configureProperties(e),e.addExclusion("filled")},t}(l.LineDataSource)},hPwr:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"PublishedChartsFilter",(function(){return r})),function(e){e.None="all",e.Following="following",e.Private="private"}(r||(r={}))},hY0g:function(e,t,i){"use strict";(function(e){var t=i("txPx").getLogger("Common.WatchedValue");function r(){}function n(e){if(!(this instanceof n))return new n(e);arguments.length>0&&(this._value=e),this._listeners=[]}n.prototype.value=function(){return this._owner?this._owner._value:this._value},n.prototype.setValue=function(e,i){var r=this._owner?this._owner:this;if("function"==typeof r.hook&&(e=r.hook(e)),r.writeLock)return r._value;if(!i&&r._value===e&&r.hasOwnProperty("_value"))return e;r._value=e;for(var n=r._listeners.slice(),o=0,s=0;s<n.length;s++){n[s].once&&(r._listeners.splice(s-o,1),o++);try{n[s].cb(e)}catch(a){t.logError(a.stack||a.message)}}return e},n.prototype.deleteValue=function(){var e=this._owner?this._owner:this;if(e.hasOwnProperty("_value")){if(e.writeLock)return e._value;delete e._value;for(var i=e._listeners.slice(),r=0,n=0;n<i.length;n++){i[n].once&&(e._listeners.splice(n-r,1),r++);try{i[n].cb()}catch(o){t.logError(o.stack||o.message)}}}},n.prototype.subscribe=function(e,i){if("function"!=typeof e)throw new TypeError("callback must be a function");var r=!!i&&!!i.once,n=!!i&&!!i.callWithLast,o=this._owner?this._owner:this;if(n&&o.hasOwnProperty("_value")){try{e(o._value)}catch(s){t.logError(s.stack||s.message)}if(r)return}o._listeners.push({cb:e,owner:this,once:!!i&&!!i.once})},n.prototype.unsubscribe=function(e){var t=this._owner?this._owner:this
;void 0===e&&(e=null);for(var i=t._listeners,r=i.length;r--;)i[r].owner!==this&&t!==this||i[r].cb!==e&&null!==e||i.splice(r,1)},n.prototype.listeners=function(){return(this._owner?this._owner:this)._listeners},n.prototype.readonly=function(){if(this._readonlyInstance)return this._readonlyInstance;var e=this._readonlyInstance=new r;return e.subscribe=this.subscribe.bind(this),e.unsubscribe=this.unsubscribe.bind(this),e.value=this.value.bind(this),e.when=this.when.bind(this),e.spawn=function(){return this.spawn().readonly()}.bind(this),this.destroy&&(e.destroy=this.destroy.bind(this)),e},n.prototype.spawn=function(e){var i=new n;return delete i._listeners,i._owner=this._owner||this,i.destroy=function(){if("function"==typeof e)try{e()}catch(i){t.logError(i.stack||i.message)}this.unsubscribe(),delete this._owner},i},n.prototype.when=function(e){var i=this;if(this.value())try{e()}catch(n){t.logError(n.stack||n.message)}else{var r=function(t){t&&(i.unsubscribe(r),e())};i.subscribe(r)}},n.prototype.opposite=function(){if(!this._opposite){var e=this,t=new n(!this.value());this.subscribe((function(e){t.setValue(!e)})),t.subscribe((function(t){e.setValue(!t)})),this._opposite=t}return this._opposite},"undefined"!=typeof window&&(window.WatchedValue=n),e&&e.exports&&(e.exports=n)}).call(this,i("YuTi")(e))},hY3j:function(e,t,i){"use strict";var r=i("PAcw").GridRenderer;function n(){this.visible=!0,this.horzLinesVisible=!0,this.horzLinesColor="white",this.horzLinesStyle="",this.vertLinesVisible=!0,this.vertLinesColor="white",this.vertLinesStyle=""}function o(e,t){this.source=e,this.pane=t,this._renderer=new r}n.prototype.paneViews=function(e){return[new o(this,e)]},o.prototype.update=function(){},o.prototype.renderer=function(){var e={};return this.pane.defaultPriceScale().isEmpty()||this.pane.timeScale().isEmpty()?null:(e.horzLinesVisible=!0,e.vertLinesVisible=!0,e.horzLinesColor=this.pane._model.properties().paneProperties.horzGridProperties.color.value(),e.vertLinesColor=this.pane._model.properties().paneProperties.vertGridProperties.color.value(),e.horzLineStyle=this.pane._model.properties().paneProperties.horzGridProperties.style.value(),e.vertLineStyle=this.pane._model.properties().paneProperties.vertGridProperties.style.value(),e.priceMarks=this.pane.defaultPriceScale().marks(),e.timeMarks=this.pane.timeScale().marks(),e.w=this.pane.width(),e.h=this.pane.height(),this._renderer.setData(e),this._renderer)},t.Grid=n},hayr:function(e,t,i){"use strict";var r=i("txPx").getLogger("Chart.DataSourcePropertyPages"),n=i("mpWx").retries;t.propertyPages={};var o=t.propertyPages,s=null;function a(e,t){Promise.all([i.e("vendors_embed"),i.e(60),i.e(92),i.e(122),i.e(155),i.e(295),i.e(143),i.e("ds-property-pages")]).then(function(t){o.LineToolInputsPropertyPage=i("n3Kh"),o.LineToolVisibilitiesPropertyPage=i("RTm2"),o.StudyDisplayPropertyPage=i("o6hY").StudyDisplayPropertyPage,o.StudyInputsPropertyPage=i("L9lC").StudyInputsPropertyPage,o.StudyLineDataSourcePropertyPage=i("ICcj"),o.StudyStylesPropertyPage=i("o6hY").StudyStylesPropertyPage,
r.logNormal("Property pages loaded"),e()}.bind(null,i)).catch(t)}t.loadPropertyPages=function(){return null!==s?s:(r.logNormal("Start loading property pages"),s=n((function(){return new Promise(a)}),2))}},hcRQ:function(e,t,i){"use strict";i.r(t),i.d(t,"addUtmToUrl",(function(){return n}));var r=i("e45J");function n(e,t){if(!/([a-zA-Z0-9.-]*tradingview.com)|localhost/.test(e))return e;var i=Object(r.buildUtmQueryString)(t);if(""===i)return e;var n=e.indexOf("?"),o=e.indexOf("#"),s=-1!==o;return-1!==n&&(!s||n<o)?e.slice(0,n)+"?"+(s?e.slice(n+1,o):e.slice(n+1))+"&"+i+(s?e.slice(o):""):s?e.slice(0,o)+"?"+i+e.slice(o):e+"?"+i}},hezA:function(e,t,i){"use strict";i.r(t),i.d(t,"StudyPriceAxisView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t,i){var r=e.call(this)||this;return r._model=t.model(),r._source=t,r._data=i,r}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1;var r=this._source.model(),n=this._source.priceScale();if(null!==n&&r.isPriceScaleVisible(n)){var o=this._source.lastValueData(this._data.plotIndex,!1);o.noData||(i.background=o.color,i.color=this.generateTextColor(o.color),i.coordinate=o.coordinate,i.floatCoordinate=o.floatCoordinate,this._showAxisLabel()&&(e.text=o.text,e.visible=!0),this._updatePaneRendererData(t))}},t.prototype._showPaneLabel=function(){return this._model.properties().scalesProperties.showStudyPlotLabels.value()},t.prototype._showAxisLabel=function(){return this._model.properties().scalesProperties.showStudyLastValue.value()},t.prototype._updatePaneRendererData=function(e){e.text="",this._showPaneLabel()&&(e.text=this._source.priceLabelText(this._data.plotIndex),e.visible=!0)},t}(i("KcY8").a)},hfHJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("aO4+");t.identityMatrix=function(){return[[1,0,0],[0,1,0],[0,0,1]]},t.multiplyMatrices=function(e,t){for(var i=[[0,0,0],[0,0,0],[0,0,0]],r=0;r<3;r++)for(var n=0;n<3;n++)for(var o=0;o<3;o++)i[r][n]+=e[r][o]*t[o][n];return i},t.rotationMatrix=function(e){var t=Math.cos(e),i=Math.sin(e);return[[t,-i,0],[i,t,0],[0,0,1]]},t.scalingMatrix=function(e,t){return[[e,0,0],[0,t,0],[0,0,1]]},t.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},t.transformPoint=function(e,t){for(var i=[t.x,t.y,1],n=[0,0,0],o=0;o<3;o++)for(var s=0;s<3;s++)n[o]+=i[s]*e[o][s];return new r.Point(n[0],n[1])}},hqNu:function(e,t,i){"use strict";i.r(t),i.d(t,"showGoToTradingViewReferralDialog",(function(){return n}));var r=i("mrSG");function n(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(12),i.e(31),i.e(39),i.e(356),i.e(0),i.e(9),i.e(10),i.e(13),i.e(137),i.e("go-to-tradingview-referral-dialog")]).then(i.bind(null,"Gqrf"))];case 1:return t.sent().renderGoToTradingViewReferralDialog(e),[2]}}))}))}},hsV8:function(e,t,i){"use strict";i.r(t),i.d(t,"ensureTimePointIndexIndex",(function(){return s})),
i.d(t,"unpackNonSeriesData",(function(){return a}));var r=i("mrSG"),n=i("JmuD"),o=i("qySK");function s(e){if(e<0)throw new Error("TimePointIndexIndex should be non-negative integer");return e}function a(e){var t=this;if(""===e)return Promise.resolve(null);var s=JSON.parse(e);if(!Object(n.isObject)(s)||"function"==typeof s)return Promise.reject(new Error("Non-object content in the non-series envelope"));if(Object(n.hasProperty)(s,"indexes_replace"))return Promise.resolve({indexes_replace:!0});var a={indexes_replace:!1};if(Object(n.hasProperty)(s,"offsets")&&(a.offsets=s.offsets),Object(n.hasProperty)(s,"isUpdate")){if("boolean"!=typeof s.isUpdate)return Promise.reject(new Error('Invalid type of "isUpdate" field'));a.isUpdate=s.isUpdate}return Object(n.hasProperty)(s,"data")&&(a.data=s.data),Object(n.hasProperty)(s,"graphicsCmds")&&(a.graphicsCmds=Object(o.b)(s.graphicsCmds)),Object(n.hasProperty)(s,"dataCompressed")||Object(n.hasProperty)(s,"graphicsCmdsCompressed")?new Promise((function(e){Promise.all([i.e(207),i.e("jszip")]).then(function(l){return Object(r.__awaiter)(t,void 0,void 0,(function(){var t,l,c,u,h,d,p,f,_;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=i("fDnD"),Object(n.hasProperty)(s,"dataCompressed")?[4,(new t).loadAsync(s.dataCompressed,{base64:!0})]:[3,3];case 1:return h=r.sent(),l=a,u=(c=JSON).parse,[4,h.file("").async("text")];case 2:l.data=u.apply(c,[r.sent()]),r.label=3;case 3:return Object(n.hasProperty)(s,"graphicsCmdsCompressed")?[4,(new t).loadAsync(s.graphicsCmdsCompressed,{base64:!0})]:[3,6];case 4:return h=r.sent(),d=a,p=o.b,_=(f=JSON).parse,[4,h.file("").async("text")];case 5:d.graphicsCmds=p.apply(void 0,[_.apply(f,[r.sent()])]),r.label=6;case 6:return e(a),[2]}}))}))}.bind(null,i)).catch(void 0)})):Promise.resolve(a)}},"i/Bj":function(e,t,i){"use strict";function r(e){if(void 0===e)return null;var t=e.match(/(delayed_streaming)_([\d]{1,4})/);return null===t?null:{mode:t[1],interval:parseInt(t[2])}}i.r(t),i.d(t,"parseUpdateMode",(function(){return r}))},i126:function(e,t,i){"use strict";i.r(t),i.d(t,"StudyColorRotatorFactory",(function(){return u}))
;var r=i("eJTA"),n=i("Tmoa"),o=i("HGP3"),s=i("3ClC"),a=["color-sky-blue-400","color-banana-yellow-700","color-deep-blue-500","color-grapes-purple-a700","color-iguana-green-500","color-minty-green-a700","color-ripe-red-a200","color-berry-pink-200","color-tv-blue-a100","color-tan-orange-a200","color-sky-blue-a400","color-deep-blue-a100","color-grapes-purple-400","color-iguana-green-a700","color-minty-green-200","color-ripe-red-200","color-berry-pink-a200","color-ripe-red-500","color-grapes-purple-500","color-deep-blue-400","color-tv-blue-a200","color-sky-blue-500","color-iguana-green-400","color-minty-green-400","color-banana-yellow-600","color-tan-orange-500","color-berry-pink-400","color-ripe-red-300","color-grapes-purple-300","color-deep-blue-300","color-tv-blue-300","color-sky-blue-300","color-iguana-green-300","color-minty-green-300","color-banana-yellow-400","color-tan-orange-300","color-berry-pink-300","color-tan-orange-a700"],l=function(){function e(e){this._offset=0,this._offset=e}return e.prototype.getColor=function(e){if(0===this._offset)return e;var t=a[(this._offset-1)%a.length],i=o.colorsPalette[t],s=Object(n.isHexColor)(e)?1:Object(r.parseRgba)(e)[3];return Object(n.generateColor)(i,Object(n.alphaToTransparency)(s))},e}(),c=function(){function e(e,t){this._offset=e,this._modelStartOffset=t}return e.prototype.getColor=function(e){if(Object(n.isHexColor)(e)){var t=Object(r.parseRgb)(e);return Object(r.rgbToHexString)(Object(r.shiftRgb)(t,this._offset,this._modelStartOffset))}var i=Object(r.parseRgba)(e);return Object(r.rgbaToString)(Object(r.shiftRgba)(i,this._offset,this._modelStartOffset))},e}();var u=function(){function e(e){this._chartModel=e}return e.prototype.getColorRotator=function(e){var t=Object(s.studyColorRotationMode)(e),i=this._calcDefaultColorsOffset(e);switch(t){case"loop":return new l(i);case"shift":var r=this._chartModel.getStudyShiftColorStartOffset();return new c(i,r)}},e.prototype._calcDefaultColorsOffset=function(e){var t=0;return this._chartModel.dataSources().filter(s.isStudy).forEach((function(i){var r,n,o=i.metaInfo().id===e.id,s=(r=i.metaInfo(),n=e,(r.pine?r.pine.version:void 0)===(n.pine?n.pine.version:void 0));o&&s&&t++})),t},e}()},i3nr:function(e,t,i){"use strict";i.r(t),i.d(t,"OverlayStatusView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getSplitTitle=function(){return this._source.titleInParts(!0,void 0,!1,!1)},t.prototype.update=function(){this._source.isFailed()?this._text=this._source.title(!0,void 0,!1,!1)+": "+this._source.status():this._text=this._source.title(!0,void 0,!1,!1)+" "+this._source.status()},t}(i("2kV1").StudyStatusView)},i4z7:function(e,t,i){"use strict";e.exports=function(){this.set_data_quality=function(){return["low"]},this.quote_create_session=function(e){return[e]},this.quote_delete_session=function(e){return[e]},this.quote_set_fields=function(e,t){return[e].concat(t)},this.quote_add_symbols=function(e,t){return[e].concat(t)},
this.quote_remove_symbols=function(e,t){return[e].concat(t)},this.quote_fast_symbols=function(e,t){return[e].concat(t)},this.quote_hibernate_all=function(e){return[e]},this.depth_create_session=function(e,t,i){return[e,t,i]},this.depth_delete_session=function(e){return[e]},this.depth_set_symbol=function(e,t){return[e,t]},this.depth_clear_symbol=function(e){return[e]},this.depth_set_scale=function(e,t){return[e,t]},this.chart_create_session=function(e,t){return[e,t?"disable_statistics":""]},this.chart_delete_session=function(e){return[e]},this.set_auth_token=function(e){return[e]},this.switch_timezone=function(e,t){return[e,t]},this.resolve_symbol=function(e,t,i){return[e,t,i]},this.create_series=function(e,t,i,r,n,o,s){return i=i||"",null!==s?[e,t,i,r,n,o,s]:[e,t,i,r,n,o]},this.remove_series=function(e,t){return[e,t]},this.modify_series=function(e,t,i,r,n,o){return i=i||"",null!==o?[e,t,i,r,n,o]:[e,t,i,r,n]},this.request_more_data=function(e,t,i){return[e,t,i]},this.request_studies_metadata=function(e,t){return[e,t]},this.create_study=function(e,t,i,r,n,o){return[e,t,i=i||"",r,n].concat(o)},this.create_child_study=function(e,t,i,r,n,o){return this.create_study(e,t,i,r,n,o)},this.child_study_rebind=function(e,t,i,r,n,o){return[e,t,i=i||"",r,n].concat(o)},this.remove_study=function(e,t){return[e,t]},this.modify_study=function(e,t,i,r){return[e,t,i=i||""].concat(r)},this.create_pointset=function(e,t,i,r,n,o){return[e,t,i=i||"",r,n].concat(o)},this.modify_pointset=function(e,t,i,r){return[e,t,i=i||""].concat(r)},this.remove_pointset=function(e,t){return[e,t]},this.request_more_tickmarks=function(e,t,i){return[e,t,i]},this.get_first_bar_time=function(e,t,i){return[e,t,i]},this.replay_create_session=function(e){return[e]},this.replay_delete_session=function(e){return[e]},this.replay_reset=function(e,t,i){return[e,t,i]},this.replay_start=function(e,t,i){return[e,t,i]},this.replay_stop=function(e,t){return[e,t]},this.replay_step=function(e,t,i){return[e,t,i]},this.replay_add_series=function(e,t,i,r){return[e,t,i,r]},this.replay_remove_series=function(e,t,i,r){return[e,t,i,r]},this.replay_set_resolution=function(e,t,i){return[e,t,i]},this.convertTimescaleResponse=function(e){for(var t=e.marks,i=0;i<t.length;++i)t[i]={span:t[i][0],time:t[i][1],index:t[i][2]};if(void 0!==e.index_diff){var r=e.index_diff;for(i=0;i<r.length;++i)r[i]={old:r[i][0],new:r[i][1]}}else e.index_diff=[];return e};var e=this;this.getDataUpdateObjects=function(t){return e.getTimescaleObjects(t)},this.getTimescaleObjects=function(e){return e.params[0]},this.getTimescaleChangeset=function(e){return e.params[1]},this.prepareDataUpdateObjects=function(e,t,i){for(var r in t){var n=t[r],o={};for(var s in o.customId=r,o.turnaround=n.turnaround,o.plots=n.series?n.series:n.plots,n.ns&&(o.nonseries=n.ns),n.lbs&&(o.lastBar={closeTime:n.lbs.bar_close_time}),o.plots)for(var a in o.plots[s].value)1e100===o.plots[s].value[a]&&(o.plots[s].value[a]=void 0);i(e,r,{method:"data_update",params:o})}},this.unpack=function(e){var t,i;function r(e){return e.index=e.i,e.value=e.v,
delete e.i,delete e.v,e}function n(e){for(i in e)e[i].t&&(e[i].turnaround=e[i].t),e[i].s&&!e[i].series&&(e[i].series=e[i].s.map(r)),e[i].st&&!e[i].series&&(e[i].series=e[i].st.map(r))}switch((e=JSON.parse(e)).m&&e.p&&(e.method=e.m,e.params=e.p,e.time=e.t),t=e.params[1],e.method){case"qsd":e.method="quote_symbol_data",t.symbolname=t.n,t.status=t.s,t.values=t.v,t.values.change=t.v.ch,t.values.last_price=t.v.lp,t.values.change_percent=t.v.chp,delete t.n,delete t.s,delete t.v,delete t.values.ch,delete t.values.lp,delete t.values.chp;break;case"du":e.method="data_update",n(t);break;case"timescale_update":n(t)}return e},this.prepareEncodeMessage=function(e,t){return JSON.stringify({m:e,p:t})}}},i80N:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Fib Spiral");function s(e,t){this._constructor="LineToolFibSpiral";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("8MBc").FibSpiralPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Fib Spiral"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("nBUU").FibSpiralDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolfibspiral",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolFibSpiral=s},i8AX:function(e,t,i){},iDOr:function(e,t,i){"use strict";(function(e){var r=i("Eyy1").assert,n=i("Y7w9").moveToHead,o=i("Ss5c").LineDataSource,s=i("Qb4w").PriceRange,a=i("7ktv").PriceDataSource,l=i("CW80").isLineTool,c=i("s1Gx").isSpeciallyZOrderedSource,u=i("1gmO").AlertLabel,h=i("1Wlv").PriceScale,d=i("FaJS").scaleRatio,p=i("FaJS").priceRangeByScaleRatio,f=i("FaJS").barSpacingByScaleRatio,_=i("MWAT").createPriceScaleSelectionStrategy,m=i("yfAl").PaneBase,v=i("s1Gx").sortSources;function g(t,i,r){m.call(this,t,i,r),this.m_timeScale=t,this._rightPriceScales=[],this._leftPriceScales=[],this.m_height=0,this.m_width=0,this.m_mainDataSource=null,this._properties=i,this._model=r,this._destroyed=new e,this._priceScaleRatioChanged=new e,this._priceScaleRatioChanged.subscribe(this,this._mainSeriesPaneScaleRatioOnChange),r.properties().priceScaleSelectionStrategyName.listeners().subscribe(null,function(e){this._priceScaleSelectionStrategy=_(e.value()),this._priceScaleSelectionStrategy.apply(this)}.bind(this)),this.m_timeScale.barSpacingChanged().subscribe(this,function(){this.m_mainDataSource===this._model.mainSeries()&&this._recalculatePriceScaleByScaleRatio(this.m_mainDataSource.priceScale())}.bind(this)),this._lockedPriceScale=null,this._currentPriceScaleRatio=null,i.topMargin.listeners().subscribe(this,g.prototype._updateMargins),
i.bottomMargin.listeners().subscribe(this,g.prototype._updateMargins),this._updateMargins(),this._maximized=!1,this._isMainPane=!1,this._onPriceScalesChanged=new e}inherit(g,m),g.DEFAULT_STRETCH_FACTOR=1e3,g.PANE_ANIMATION_DURATION=500,g.prototype.destroy=function(){this._properties.topMargin.listeners().unsubscribe(this,g.prototype._updateMargins),this._properties.bottomMargin.listeners().unsubscribe(this,g.prototype._updateMargins),this._model.properties().priceScaleSelectionStrategyName.listeners().unsubscribeAll(this),this.m_timeScale.barSpacingChanged().unsubscribeAll(this),this._leftPriceScales.concat(this._rightPriceScales).forEach((function(e){e.modeChanged().unsubscribeAll(this),e.priceRangeChanged().unsubscribeAll(this),e.internalHeightChanged().unsubscribeAll(this)}),this),this._priceScaleRatioChanged.unsubscribeAll(this);for(var e=0;e<this.m_dataSources.length;e++){var t=this.m_dataSources[e];t.destroy&&t.destroy()}this._destroyed.fire()},g.prototype._defaultBottomMargin=function(){return.01*this._properties.bottomMargin.value()},g.prototype._defaultTopMargin=function(){return.01*this._properties.topMargin.value()},g.prototype._updateMargins=function(){var e=this._defaultTopMargin(),t=this._defaultBottomMargin();this._leftPriceScales.forEach((function(i){i.setTopMargin(e),i.setBottomMargin(t)})),this._rightPriceScales.forEach((function(i){i.setTopMargin(e),i.setBottomMargin(t)}));for(var i=0;i<this.m_dataSources.length;i++){var r=this.m_dataSources[i];r instanceof TradingView.Study&&this.isOverlay(r)&&"Volume"!==r.metaInfo().shortId&&(!r.priceScale()||this._leftPriceScales.includes(r.priceScale())||this._rightPriceScales.includes(r.priceScale())||(r.priceScale().setTopMargin(e),r.priceScale().setBottomMargin(t),this.recalculatePriceScale(r.priceScale())))}this._leftPriceScales.forEach((function(e){this.recalculatePriceScale(e)}),this),this._rightPriceScales.forEach((function(e){this.recalculatePriceScale(e)}),this),this.updateAllViews()},g.prototype.model=function(){return this._model},g.prototype.width=function(){return this.m_width},g.prototype.height=function(){return this.m_height},g.prototype.setWidth=function(e){this.m_width=e,this.updateAllViews()},g.prototype.setHeight=function(e){this.m_height=e,this._leftPriceScales.forEach((function(t){t.setHeight(e)})),this._rightPriceScales.forEach((function(t){t.setHeight(e)}));for(var t=0;t<this.m_dataSources.length;t++){var i=this.m_dataSources[t];this.isOverlay(i)&&i.priceScale()&&i.priceScale().setHeight(e)}this.updateAllViews()},g.prototype.leftPriceScales=function(){return this._leftPriceScales},g.prototype.rightPriceScales=function(){return this._rightPriceScales},g.prototype.visibleLeftPriceScales=function(){var e=this._model.priceScaleSlotsCount();if(this._leftPriceScales.length>e.left){var t=n(this._leftPriceScales,this.mainDataSource().priceScale());return t.splice(e.left),t}return this._leftPriceScales},g.prototype.visibleRightPriceScales=function(){var e=this._model.priceScaleSlotsCount();if(this._rightPriceScales.length>e.right){
var t=n(this._rightPriceScales,this.mainDataSource().priceScale());return t.splice(e.right),t}return this._rightPriceScales},g.prototype.timeScale=function(){return this.m_timeScale},g.prototype.dataSources=function(){return this.m_dataSources},g.prototype.isOverlay=function(e){var t=e.priceScale();return"overlay"===this.priceScalePosition(t)},g.prototype._processMainSourceChange=function(){var e;if(null===this.m_mainDataSource)for(var t=0;t<this.m_dataSources.length;t++){if(!(!((r=this.m_dataSources[t])instanceof a)||this.isOverlay(r)||r.properties().linkedToSeries&&r.properties().linkedToSeries.value()||r instanceof u)){this.m_mainDataSource=r,e=!0;break}}if(this.m_mainDataSource&&e){var i=[];for(t=0;t<this.m_dataSources.length;t++){(r=this.m_dataSources[t])instanceof o&&i.push(r)}i=v(i);for(t=0;t<i.length;t++)this.move(i[t],this.m_mainDataSource.priceScale(),!0)}else if(!this.m_mainDataSource||this.isOverlay(this.m_mainDataSource)&&0===this.nonOverlayPricesSourcesCount())for(t=0;t<this.m_dataSources.length;t++){var r;if((r=this.m_dataSources[t])instanceof a&&this.isOverlay(r)&&r.showInObjectTree()){this.m_mainDataSource=r;var n=this._priceScaleSelectionStrategy.createNewPriceScaleIfPossible(this);this.move(r,n,!0),this.recalculatePriceScale(r.priceScale());break}}},g.prototype._newZOrderForLineTool=function(){for(var e=null,t=0;t<this.m_dataSources.length;++t){var i=this.m_dataSources[t];if(l(i)&&!c(i)){var r=i.zorder();(null===e||r>e)&&(e=r)}}return null===e&&(e=this.getZOrderMinMax().minZOrder-1),this.m_dataSources.forEach((function(t){t.zorder()>e&&t.setZorder(t.zorder()+1)})),e+1},g.prototype.beginInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!0,this._lastLineDataSourceZOrder=null},g.prototype.endInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null;for(var e=this.model().alertsWatcher(),t=this.dataSources(),i=0;i<t.length;++i)e.syncSourceAlertLabels(t[i])},g.prototype.priceScalePosition=function(e){return this._leftPriceScales.includes(e)?"left":this._rightPriceScales.includes(e)?"right":"overlay"},g.prototype.createPriceScaleAtPosition=function(e,t){var i=this._properties.axisProperties.state();i.autoScale=!0;var r=new h(this._model.properties().scalesProperties,i);return r.setHeight(this.height()),r.setTopMargin(this._defaultTopMargin()),r.setBottomMargin(this._defaultBottomMargin()),this._placePriceScale(r,e,t),r},g.prototype._placePriceScale=function(e,t,i){if("overlay"!==t){var n="left"===t?this._leftPriceScales:this._rightPriceScales,o=void 0===i?n.length:i;n.splice(o,0,e),e.modeChanged().subscribe(this,this._onPriceScaleModeChanged.bind(this,e)),e.internalHeightChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio.bind(this,e)),e.priceRangeChanged().subscribe(this,this._recalculateTimeScaleByScaleRatio.bind(this,e)),e.priceRangeChanged().subscribe(this,this._onPriceScaleSetMinMaxPriceRange.bind(this,e)),e.isLockScale()&&(r(null===this._lockedPriceScale),this._lockedPriceScale=e,
this._currentPriceScaleRatio=null),this._onPriceScalesChanged.fire()}},g.prototype.removePriceScale=function(e){e.modeChanged().unsubscribeAll(this),e.priceRangeChanged().unsubscribeAll(this),e.internalHeightChanged().unsubscribeAll(this),e===this._lockedPriceScale&&(this._lockedPriceScale=null,this._currentPriceScaleRatio=null);var t=this._leftPriceScales.indexOf(e);-1!==t&&this._leftPriceScales.splice(t,1);var i=this._rightPriceScales.indexOf(e);-1!==i&&this._rightPriceScales.splice(i,1),this._onPriceScalesChanged.fire()},g.prototype.startScalePrice=function(e,t){e.startScale(t)},g.prototype.scalePriceTo=function(e,t){e.scaleTo(t),this.updateAllViews()},g.prototype.endScalePrice=function(e){e.endScale()},g.prototype.startScrollPrice=function(e,t){e.startScroll(t)},g.prototype.scrollPriceTo=function(e,t){e.scrollTo(t),this.updateAllViews()},g.prototype.endScrollPrice=function(e){e.endScroll()},g.prototype.setPriceAutoScale=function(e,t){e.setMode({autoScale:t}),this.timeScale().isEmpty()?e.setPriceRange(null):this.recalculatePriceScale(e)},g.prototype.restorePriceScaleState=function(e,t){e.restoreState(t),this.updateAllViews()},g.prototype._updateCustomSourceAllViews=function(e){e.paneViews(this).length>0&&e.updateAllViews()},g.prototype.updateAllViews=function(){for(var e=0;e<this.m_dataSources.length;e++)this.m_dataSources[e].updateAllViews();this._model.customSources().forEach(this._updateCustomSourceAllViews,this)},g.prototype.defaultPriceScale=function(){var e=this.m_mainDataSource?this.m_mainDataSource.priceScale():null;return null===e&&(e=new h(this._model.properties().scalesProperties)),e},g.prototype._priceScaleIsPrice=function(e){var t=e.mainSource();return!!t&&(!!TradingView.isInherited(t.constructor,TradingView.Series)||!!TradingView.isInherited(t.constructor,TradingView.Study)&&t.metaInfo().is_price_study)},g.prototype.findSuitableScale=function(e,t,i){return this._priceScaleSelectionStrategy.findSuitableScale(this,e,t,i)},g.prototype.createNewPriceScaleIfPossible=function(){return this._priceScaleSelectionStrategy.createNewPriceScaleIfPossible(this)},g.prototype.canCreateNewPriceScale=function(){return this._priceScaleSelectionStrategy.canCreateNewPriceScale(this)},g.prototype.mainDataSource=function(){return this.m_mainDataSource},g.prototype.recalculatePriceScale=function(e){if(e){var t=e.sourcesForAutoscale();if(e.isAutoScale()&&t&&t.length>0&&!this.timeScale().isEmpty()){var i=this.timeScale().visibleBarsStrictRange();e.recalculatePriceRange(i)}e.updatePaneViews()}},g.prototype.resetPriceScale=function(e){var t=this.timeScale().visibleBarsStrictRange();e.isLockScale()||e.setMode({autoScale:!0}),e.recalculatePriceRange(t),this.updateAllViews()},g.prototype.recalculate=function(){this.recalculatePriceScale(this.m_rightPriceScale),this.recalculatePriceScale(this.m_leftPriceScale);for(var e=0;e<this.m_dataSources.length;e++){var t=this.m_dataSources[e];this.isOverlay(t)&&!l(t)&&this.recalculatePriceScale(t.priceScale())}this.updateAllViews(),this._model.updatePane(this)},g.prototype.isEmpty=function(){
return null===this.m_mainDataSource},g.prototype.move=function(e,t,i){this.removeDataSource(e,!0),this.addDataSource(e,t,i),this._processMainSourceChange(),this._invalidateSourcesCache(),this._onPriceScalesChanged.fire()},g.prototype.customSources=function(e){return this._model.customSources(e)},g.prototype.createDrawingsCaches=function(){0},g.prototype.clearDrawingCaches=function(){0},g.prototype._invalidateSourcesCache=function(){this._cachedOrderedSources.clear(),this._leftPriceScales.forEach((function(e){e.invalidateSourcesCache()})),this._rightPriceScales.forEach((function(e){e.invalidateSourcesCache()}))},g.prototype.isZOrderAvailable=function(e){for(var t=0;t<this.m_dataSources.length;t++){if(this.m_dataSources[t].zorder()===e)return!1}return!0},g.prototype.changeZOrder=function(e,t){for(var i=this.sourcesByGroup().all().filter((function(e){return e.showInObjectTree()})),r=0,n=0,o=i.length;n<o;n++)if(i[n]===e){r=n;break}if(r>0&&t<0){var s=i[r-1].zorder(),a=e.zorder();i[r-1].setZorder(a),e.setZorder(s)}else if(r<i.length-1&&t>0){var l=i[r+1].zorder();a=e.zorder();i[r+1].setZorder(a),e.setZorder(l)}this._invalidateSourcesCache(),this._dataSourcesCollectionChanged.fire()},g.prototype.onDestroyed=function(){return this._destroyed},g.prototype.clearSeries=function(e){for(var t=this.m_dataSources.length-1;t>=0;t--)TradingView.isInherited(this.m_dataSources[t].constructor,TradingView.Series)&&this._removeSourceFromCollections(t,e)},g.prototype.nonOverlayPricesSourcesCount=function(){return this.m_dataSources.filter((function(e){return(!e.properties().linkedToSeries||!e.properties().linkedToSeries.value())&&(TradingView.isInherited(e.constructor,a)&&e.showInObjectTree()&&!this.isOverlay(e))}),this).length},g.prototype.canHaveMoreNoScaleSources=function(){return this.nonOverlayPricesSourcesCount()>1},g.prototype.actionNoScaleIsEnabled=function(e){return!(!this.isOverlay(e)&&TradingView.isInherited(e.constructor,a))||this.canHaveMoreNoScaleSources()},g.prototype.executionsPositionController=function(){return null},g.prototype.isLast=function(){var e=this._model.panes();return e[e.length-1]===this},g.prototype.setMaximized=function(e){this._maximized=e},g.prototype.isMaximized=function(){return this._maximized},g.prototype.isMainPane=function(){var e=this._model.mainSeries(),t=!1;return this.m_dataSources.forEach((function(i){t||(t=i===e)})),this._isMainPane=t,t},g.prototype.properties=function(){return this._properties},g.prototype._mainSourceVisiblePriceRange=function(e){var t=this.m_timeScale.visibleBarsStrictRange();return null!==t?e.mainSource().priceRange(t.firstBar(),t.lastBar()):new s(-.5,.5)},g.prototype.priceScaleRatio=function(){return this._currentPriceScaleRatio},g.prototype.applyPriceScaleRatio=function(e,t){null!==this._lockedPriceScale&&this._lockedPriceScale!==e||this._currentPriceScaleRatio===t||!this.isMainPane()||null===this._lockedPriceScale&&e!==this.mainDataSource().priceScale()||(this._setNewPriceRangeByScaleRatio(e,t,this._mainSourceVisiblePriceRange(e),!0,!0),
null!==this._lockedPriceScale?this._tryToApplyNewPriceScaleRatio():e.isLog()||this._model.mainSeriesScaleRatioPropertyOnChanged())},g.prototype._mainSeriesPaneScaleRatioOnChange=function(){this.isMainPane()&&this._model.mainSeriesScaleRatioPropertyOnChanged()},g.prototype._applyOldScaleRatioToPriceScale=function(){if(this._isRecalculatingScales||null===this._currentPriceScaleRatio)return!1;this._isRecalculatingScales=!0,this._setNewPriceRangeByScaleRatio(this._lockedPriceScale,this._currentPriceScaleRatio,this._mainSourceVisiblePriceRange(this._lockedPriceScale)),this._isRecalculatingScales=!1},g.prototype._applyOldScaleRatioToTimeScale=function(){if(this._isRecalculatingScales||null===this._currentPriceScaleRatio)return!1;this._isRecalculatingScales=!0,this._setNewBarSpacingByScaleRatio(),this._isRecalculatingScales=!1},g.prototype._tryToApplyNewPriceScaleRatio=function(){var e=d(this.m_timeScale,this._lockedPriceScale);this._currentPriceScaleRatio===e||this._lockedPriceScale.isLog()||(this._priceScaleRatioChanged.fire(this._currentPriceScaleRatio,e),this._currentPriceScaleRatio=e)},g.prototype._recalculatePriceScaleByScaleRatio=function(e){this.isMainPane()&&e===this._lockedPriceScale&&(null!==this._currentPriceScaleRatio?this._applyOldScaleRatioToPriceScale():this._tryToApplyNewPriceScaleRatio())},g.prototype._recalculateTimeScaleByScaleRatio=function(e){e===this._lockedPriceScale&&(null!==this._currentPriceScaleRatio?this._applyOldScaleRatioToTimeScale():this._tryToApplyNewPriceScaleRatio())},g.prototype._setNewPriceRangeByScaleRatio=function(e,t,i,r,n){var o=p(e,this.m_timeScale.barSpacing(),t);e.setPriceRange(null!==o?o:i,r,n)},g.prototype._setMinMaxPriceRange=function(){var e=p(this._lockedPriceScale,this.m_timeScale.maxBarSpacing(),this._currentPriceScaleRatio),t=p(this._lockedPriceScale,this.m_timeScale.minBarSpacing(),this._currentPriceScaleRatio);null!==e&&this._lockedPriceScale.setMaxPriceRange(e),null!==t&&this._lockedPriceScale.setMinPriceRange(t)},g.prototype._onPriceScaleSetMinMaxPriceRange=function(e){e===this._lockedPriceScale&&this._setMinMaxPriceRange()},g.prototype._setNewBarSpacingByScaleRatio=function(){var e=this.m_timeScale.getValidBarSpacing(f(this._lockedPriceScale,this._currentPriceScaleRatio));this.m_timeScale.isValidBarSpacing(e)&&this.m_timeScale.setBarSpacing(e)},g.prototype._onPriceScaleModeChanged=function(e,t,i){if(i.lockScale&&(this._lockedPriceScale!==e&&null!==this._lockedPriceScale&&this._lockedPriceScale.setMode({lockScale:!1}),this._lockedPriceScale=e,this._currentPriceScaleRatio=d(this.m_timeScale,e)),t.lockScale&&!i.lockScale&&(this._lockedPriceScale=null,this._currentPriceScaleRatio=null),t.percentage!==i.percentage||t.indexedTo100!==i.indexedTo100){var r=this.timeScale().visibleBarsStrictRange();null!==r&&(e.recalculatePriceRange(r),e.updatePaneViews())}},g.prototype.getPriceScaleById=function(e){var t=this.m_dataSources.find((function(t){return null!==t.priceScale()&&t.priceScale().id()===e}));return void 0===t?null:t.priceScale()},
g.prototype.setPriceScaleSelectionStrategy=function(e){this._priceScaleSelectionStrategy=e,e.apply(this)},g.prototype.movePriceScale=function(e,t,i){var r=this.priceScalePosition(e);if(r!==t)this.removePriceScale(e),this._placePriceScale(e,t,i),this._invalidateSourcesCache();else if(void 0!==i&&"overlay"!==r){var n="left"===r?this._leftPriceScales:this._rightPriceScales,o=n.indexOf(e);n.splice(o,1),n.splice(i,0,e)}},g.prototype.onPriceScalesChanged=function(){return this._onPriceScalesChanged},g.prototype.priceScaleIndex=function(e,t){switch(t){case"left":return this.leftPriceScales().indexOf(e);case"right":return this.rightPriceScales().indexOf(e)}},g.prototype.realignLineTools=function(){for(var e=0;e<this.m_dataSources.length;e++){var t=this.m_dataSources[e];l(t)&&t.calcIsActualSymbol()}this._invalidateSourcesCache()},t.Pane=g}).call(this,i("aIyQ"))},iSkW:function(e,t,i){"use strict";(function(t){i("P5fv");var r=i("txPx").getLogger("Common.LocalForage"),n=i("VVxS").TVLocalStorageAsync,o=[t.INDEXEDDB,t.LOCALSTORAGE,t.WEBSQL],s=[t.LOCALSTORAGE,t.WEBSQL,t.INDEXEDDB];window.localForageReady=$.Deferred();var a=function(e){r.logNormal("localForage driver: "+JSON.stringify(e));var i={name:"tradingview",driver:e};t.config(i),window.TVLocalForage=t,window.localForageReady.resolve()};try{var l=window.indexedDB.open("tradingviewCheckIndexedDB");l.onerror=function(e){r.logError("IndexedDB is NOT available"),a(s)},l.onsuccess=function(e){r.logNormal("IndexedDB is available"),a(o)}}catch(c){r.logError("IndexedDB is NOT available, "+c);try{a(s)}catch(c){window.TVLocalForage=n,window.localForageReady.resolve()}}e.exports={TVLocalForage:window.TVLocalForage}}).call(this,i("oAJy"))},iWlB:function(e,t,i){"use strict";var r,n;i.r(t),i.d(t,"BackendSessionEventType",(function(){return r})),i.d(t,"BrokerBranding",(function(){return n})),function(e){e[e.Connect=0]="Connect",e[e.Reconnect=1]="Reconnect"}(r||(r={})),function(e){!function(e){e.Click="click",e.View="view"}(e.EventType||(e.EventType={}))}(n||(n={}))},icPo:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Icon");function s(e,t){this._constructor="LineToolIcon";var n=t||s.createProperties();r.call(this,e,n),this.version=s.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("8GeE").IconPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);var o=this;document.fonts&&document.fonts.check&&document.fonts.load&&!document.fonts.check("12px FontAwesome")&&document.fonts.load("12px FontAwesome","☺").then((function(){o._isDestroyed||e.updateSource(o)}))}inherit(s,r),s.version=1,s.anchorLimit=80,s.prototype.getAnchorLimit=function(){return s.anchorLimit},s.prototype.pointsCount=function(){return 1},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Icon"},s.prototype.hasEditableCoordinates=function(){return!1},s.prototype.applyTemplate=function(e){delete e.icon,r.prototype.applyTemplate.call(this,e)},s.prototype.startChanging=function(e,t,i){
if(!i){r.prototype.startChanging.call(this,e,t);var n=this.properties(),o=65536*n.icon.value()+n.size.value();this._startChangeWidth=this._getPaneViews()[0]._cache[o],n.size.value()<s.anchorLimit?this._sizeScale=n.size.value()/s.anchorLimit:this._sizeScale=1,this._origScale=n.scale.value(),this._startChangeWidth*this._origScale<s.anchorLimit?this._resizeRatio=this._startChangeWidth/s.anchorLimit:this._resizeRatio=1}},s.prototype.endChanging=function(e,t,i){i||(r.prototype.endChanging.call(this),delete this._startChangeWidth,delete this._sizeScale,delete this._resizeRatio)},s.prototype.setPoint=function(e,t,i,r){if(!r){var n=Object.assign({},t);i&&i.shift()&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(n,this.points()[0]);var o=this.pointToScreenPoint(this.points()[0])[1],a=this.pointToScreenPoint(n)[1];if(0===e||1===e){var l=a.subtract(o).normalized(),c=2*a.subtract(o).length();c*=this._sizeScale,this._properties.size.setValue(c);var u=-l.x,h=Math.acos(u);Math.asin(l.y)>0&&(h=2*Math.PI-h),0===e&&(h+=Math.PI),this._properties.angle.setValue(h)}else{var d=this._startChangeWidth,p=a.subtract(o).length();if(this._origScale*d<s.anchorLimit){var f=s.anchorLimit/2;this._properties.scale.setValue(this._origScale*p/f)}else{f=d/2;this._properties.scale.setValue(p/f)}}}},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("XCOO").IconsDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.prototype.getSourceIcon=function(){return{type:"text",text:String.fromCharCode(this.properties().icon.value())}},s.createProperties=function(e){var t=new n("linetoolicon",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e),e.addExclusion("angle"),e.addExclusion("scale")},t.LineToolIcon=s},ifvX:function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("Qq0B").NonSeriesStudy,o=i("pJOz").TrendLineRenderer,s=i("VdBB").HitTestResult,a=i("Zy3/").CompositeRenderer,l=i("a7Ha").LineEnd;function c(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={},this._invalidated=!0}function u(e,t,i,r){n.call(this,e,t,i,r)}c.prototype.update=function(){this._invalidated=!0},c.prototype.updateImpl=function(){if(this._pivots=[],this._source.customData()&&this._source.customData().zigzag&&this._source.properties().visible.value()){var e=this._source.customData().zigzag,t=this._source._indexes,i=this._model.timeScale(),r=this._source.priceScale(),n=this._model.mainSeries(),o=n.firstValue();if(r&&!r.isEmpty()&&!i.isEmpty()&&o)for(var s=0;s<e.length;s++)if(e[s]){var a=t[e[s].index],l=e[s].type,c=n.bars().valueAt(a);if(null!==c){var u=1===l?c[TradingView.HIGH_PLOT]:c[TradingView.LOW_PLOT],h=Math.round(i.indexToCoordinate(a)),d=r.priceToCoordinate(u,o);this._pivots.push({x:h,y:d})}}}},c.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1)
;for(var e=new a,t=this._source.properties().color.value(),i=this._source.properties().linewidth.value(),n=1;n<this._pivots.length;n++){var c=this._pivots[n],u=this._pivots[n-1],h={points:[new r(u.x,u.y),new r(c.x,c.y)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:t,linewidth:i,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:l.Normal,rightend:l.Normal},d=new o;d.setData(h),d.setHitTest(new s(s.REGULAR)),e.append(d)}return e},inherit(u,n),u.prototype.isVisible=function(){return this.properties().visible.value()},u.prototype.createViews=function(){n.prototype.createViews.call(this),this._setPaneViews([new c(this.model(),this)])},t.study_ZigZag=u},ijBy:function(e,t,i){"use strict";i.r(t),i.d(t,"SetChartLayoutCommand",(function(){return s}));var r=i("mrSG"),n=i("RDU5"),o=i("VNzU"),s=function(e){function t(t,i){var r=this,n="Change Chart Layout to "+o.layouts[i].title;return(r=e.call(this,n)||this)._chartWidgetCollection=t,r._newLayoutType=i,r._oldLayoutType=t.layout.value(),r}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._chartWidgetCollection.layout.setValue(this._newLayoutType)},t.prototype.undo=function(){this._chartWidgetCollection.layout.setValue(this._oldLayoutType)},t}(n.UndoCommand)},ijIX:function(e,t,i){"use strict";i.r(t),i.d(t,"patchSourceState",(function(){return r}));i("YFKU");function r(e){var t={palettes:{},inputs:[{defval:2,id:"upper diviation",max:500,min:-500,name:window.t("Upper Deviation"),type:"integer"},{defval:-2,id:"lower diviation",max:500,min:-500,name:window.t("Lower Deviation"),type:"integer"},{defval:!0,id:"use upper diviation",name:window.t("Use Upper Deviation"),type:"bool"},{defval:!0,id:"use lower diviation",name:window.t("Use Lower Deviation"),type:"bool"},{defval:0,id:"first bar time",max:253370764800,min:0,name:window.t("First bar time"),type:"time"},{defval:0,id:"last bar time",max:253370764800,min:0,name:window.t("Last bar time"),type:"time"},{defval:"close",id:"source",name:window.t("Source"),options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"}],plots:[],graphics:{},defaults:{inputs:{"first bar time":0,"last bar time":0,"lower diviation":-2,source:"close","upper diviation":2,"use lower diviation":!0,"use upper diviation":!0}},_metainfoVersion:6,description:"Regression Trend",id:"RegressionTrend@tv-basicstudies",is_price_study:!0,shortDescription:"Reg Trend",shortId:"RegressionTrend",version:"2",fullId:"RegressionTrend@tv-basicstudies-2",name:"RegressionTrend@tv-basicstudies"};return e.metaInfo||(e.metaInfo=t),e}},ikwP:function(e,t,i){"use strict";i.r(t),i.d(t,"Size",(function(){return s})),i.d(t,"getCanvasDevicePixelRatio",(function(){return a})),i.d(t,"getContext2D",(function(){return l})),i.d(t,"getPrescaledContext2D",(function(){return c})),i.d(t,"getPretransformedContext2D",(function(){return u})),i.d(t,"hardResizeCanvas",(function(){return h})),i.d(t,"resizeCanvasPreservingContent",(function(){return d})),i.d(t,"fillRect",(function(){return p})),i.d(t,"clearRect",(function(){
return f})),i.d(t,"drawScaled",(function(){return _})),i.d(t,"createDisconnectedCanvas",(function(){return m})),i.d(t,"createDisconnectedBoundCanvas",(function(){return v})),i.d(t,"createBoundCanvas",(function(){return y})),i.d(t,"calcTextHorizontalShift",(function(){return b}));var r=i("f2KN"),n=i("Eyy1"),o=i("Ialn"),s=function(){function e(e,t){this.w=e,this.h=t}return e.prototype.equals=function(e){return this.w===e.w&&this.h===e.h},e}();function a(e){var t,i;return Math.max(1,(null===(i=null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===i?void 0:i.devicePixelRatio)||1)}function l(e){var t=Object(n.ensureNotNull)(e.getContext("2d"));return t.setTransform(1,0,0,1,0,0),t}function c(e){var t=Object(n.ensureNotNull)(e.getContext("2d")),i=a(e);return t.setTransform(i,0,0,i,0,0),t}function u(e){var t=Object(n.ensureNotNull)(e.canvas.getContext("2d"));return t.setTransform(e.pixelRatio,0,0,e.pixelRatio,0,0),t.translate(.5,.5),t}function h(e,t){e.resizeCanvas({width:0,height:0}),e.resizeCanvas({width:t.w,height:t.h})}function d(e,t){var i=v(document,t),r=c(i.canvas);return r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(e.canvas,0,0,e.canvasSize.width*e.pixelRatio,e.canvasSize.height*e.pixelRatio),r.restore(),i}function p(e,t,i,r,n,o){e.save(),e.translate(-.5,-.5),e.fillStyle=o,e.fillRect(t,i,r,n),e.restore()}function f(e,t,i,r,n,o){e.save(),e.translate(-.5,-.5),e.globalCompositeOperation="copy",e.fillStyle=o,e.fillRect(t,i,r,n),e.restore()}function _(e,t,i){e.save(),e.scale(t,t),i(),e.restore()}function m(e,t,i){var r=g(e);return void 0===i&&(i=a(r)),r.width=t.w*i,r.height=t.h*i,r}function v(e,t){var i=g(e),n=Object(r.a)(i,{allowDownsampling:!1});return n.resizeCanvas({width:t.w,height:t.h}),n}function g(e){var t=e.createElement("canvas");return function(e){e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.MozUserSelect="none",e.style.webkitTapHighlightColor="transparent"}(t),t}function y(e,t){var i=g(Object(n.ensureNotNull)(e.ownerDocument));e.appendChild(i);var o=Object(r.a)(i,{allowDownsampling:!1});return o.resizeCanvas({width:t.w,height:t.h}),o}function b(e,t){return"center"===e.textAlign?0:Object(o.isRtl)()?"start"===e.textAlign||"right"===e.textAlign?t:0:"start"===e.textAlign||"left"===e.textAlign?0:t}},isVH:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Triangle");function s(e,t){this._constructor="LineToolTriangle";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("D4q4").TrianglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 3},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Triangle"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){
return i("Zd1D").GeneralFiguresDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetooltriangle",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolTriangle=s},it7y:function(e,t,i){"use strict";i.r(t),i.d(t,"StudyDataWindowView",(function(){return v}));var r=i("mrSG"),n=i("ivNn"),o=i("4miz"),s=i("Kxc7"),a=i("k9/m"),l=i("23IT"),c=i("qFKp"),u=i("e92V"),h=i("mMWL"),d=i("Tmoa"),p=c.CheckMobile.any(),f=window.t("n/a"),_=s.enabled("hide_last_na_study_output"),m=function(e){function t(t,i,r,n){var o=e.call(this,t,i)||this;return o.plotId=r,o.plotIndex=n,o}return Object(r.__extends)(t,e),t}(o.DataWindowItem),v=function(e){function t(t,i){var r=e.call(this)||this;r._invalidated=!0,r._study=t,r._model=i;var n=t.metaInfo().plots;if(!n)return r;for(var o=0;o<n.length;++o)if(!(r._study.isSelfColorerPlot(o)||r._study.isBarColorerPlot(o)||r._study.isBgColorerPlot(o)||r._study.isDataOffsetPlot(o)||r._study.isOHLCColorerPlot(o)||r._study.isAlertConditionPlot(o))){var s=n[o].id,a=new m(r._study.guiPlotName(s),"",s,o);r._items.push(a)}return r.update(),r}return Object(r.__extends)(t,e),t.prototype.update=function(){this._invalidated=!0},t.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},t.prototype._hideValues=function(){return p&&(null===this._model.crossHairSource().pane||Object(u.a)(h.tool.value())||null!==this._model.lineBeingEdited())},t.prototype._updateImpl=function(){this._header=this._study.title(!0),this._title=this._study.title();for(var e=this._hideValues(),t=this._study.isVisible()&&!e?f:"",i=0,r=this._items;i<r.length;i++){(b=r[i]).setValue(t)}if(!e&&(_&&this._items.length&&this._items[this._items.length-1].setValue(""),!this._model.timeScale().isEmpty())){var o=this._study.metaInfo().plots,s={},c=this._study.metaInfo().palettes;if(o&&void 0!==c)for(var u=0;u<o.length;u++){var h=o[u];if(Object(l.isColorerPlot)(h)||Object(l.isOhlcColorerPlot)(h))s[h.target]={index:u,palette:c[h.palette],paletterProps:this._study.properties().palettes[h.palette]}}var p=this._currentIndex();if(null!==p&&Object(n.isNumber)(p))for(var m=this._study.formatter(),v={},g=0,y=this._items;g<y.length;g++){var b,S=(b=y[g]).plotId,w=this._study.properties().styles[S].visible.value();if(b.setVisible(w),w){var P=b.plotIndex,C=p-this._study.offset(S),T=this._study.data().lastIndex(),x=null!==T&&C>T?a.PlotRowSearchMode.NearestLeft:a.PlotRowSearchMode.Exact,I=this._study.nearestIndex(C,x);if(void 0!==I){var E=v[S];if(void 0===E&&(E=this._study.getMinFirstBarIndexForPlot(S),Number.isFinite(E)&&(v[S]=E)),!(E>I)){var L=this._study.data().last(),O=this._study.data().valueAt(I)||(null!==L?L.value:null);if(null!==O){var A=O[P+1];if(Object(n.isNumber)(A)){b.setValue(m.format(A));var M=this._study.properties().styles[S].color.value();h=o[P];Object(l.isOhlcPlot)(h)&&(S=h.target||S,M=this._study.properties().ohlcPlots[S].color.value());var k=M;if(s[S]&&O.length>s[S].index+1){
var D=O[s[S].index+1],R=s[S].palette;if(null!=D&&void 0!==R){var V=s[S].paletterProps,B=R.valToIndex?R.valToIndex[D]:D;k=V.colors[void 0!==B?B:D].color.value()}}k=Object(d.resetTransparency)(k),b.setColor(k)}}}}}}}},t.prototype._currentIndex=function(){var e=this._model.crossHairSource().lockedIndex;return void 0!==e?e:null!==this._model.crossHairSource().pane?this._model.crossHairSource().appliedIndex():this._study.data().lastIndex()},t}(o.DataWindowView)},ivNn:function(e,t,i){"use strict";function r(e){return Math.round(1e10*e)/1e10}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=function(e){return"number"==typeof e&&isFinite(e)},t.isInteger=function(e){return"number"==typeof e&&e%1==0},t.isNaN=function(e){return!(e<=0||e>0)},t.fixComputationError=r,t.alignTo=function(e,t){var i=e/t,n=Math.floor(i),o=i-n;return o>2e-10?r(o>.5?(n+1)*t:n*t):e}},jCNj:function(e,t,i){"use strict";var r=i("3UA0").tzData;function n(e){this._name=e;var t=r[e];if(t||(t={time:[],offset:[]},this._invalid=!0),t.time.length!==t.offset.length&&(t={time:[],offset:[]},this._invalid=!0),!t.time_utc){for(var i=t.time,n=t.offset,o=i.length,s=new Array(o),a=0;a<o;a++)i[a]*=1e3,n[a]*=1e3,s[a]=i[a]-n[a];t.time_utc=s}this.tz=t}function o(e,t){var i=e.length;if(0===i)return-1;if(isNaN(t))throw Error("Key is NaN");for(var r=0,n=i-1,o=s((r+n)/2);;){if(e[o]>t){if((n=o-1)<r)return o}else if(n<(r=o+1))return o<i-1?o+1:-1;o=s((r+n)/2)}}n.prototype.offset_utc=function(e){return n._offset(this.tz.time_utc,this.tz.offset,e)},n.prototype.offset_loc=function(e){return n._offset(this.tz.time,this.tz.offset,e)},n.prototype.correction_loc=function(e){var t=this.tz.time,i=this.tz.offset,r=o(t,e);if(r<1)return 0;var n=i[r]-i[r-1];if(n>0&&e-t[r-1]<=n)return n;return 0},n.prototype.is_valid=function(){return!this._invalid},n._offset=function(e,t,i){var r=o(e,i);return-1===r?0:t[r]};var s=function(e){return 0|e},a=function(e){return 60*e*1e3};function l(e){return e%4==0&&(e%100!=0||e%400==0)}var c={0:0,1:31,2:59,3:90,4:120,5:151,6:181,7:212,8:243,9:273,10:304,11:334},u={SUNDAY:1,MONDAY:2,TUESDAY:3,WEDNESDAY:4,THURSDAY:5,FRIDAY:6,SATURDAY:7,JANUARY:0,FEBRUARY:1,MARCH:2,APRIL:3,MAY:4,JUNE:5,JULY:6,AUGUST:7,SEPTEMBER:8,OCTOBER:9,NOVEMBER:10,DECEMBER:11,YEAR:1,MONTH:2,WEEK_OF_YEAR:3,DAY_OF_MONTH:5,DAY_OF_YEAR:6,DAY_OF_WEEK:7,HOUR_OF_DAY:11,MINUTE:12,SECOND:13,minutesPerDay:1440,secondsPerDay:a(1440),get_minutes_from_hhmm:function(e){return-1!==e.indexOf(":")&&(e=e.split(":").join("")),e%100+60*s(e/100)},get_year:function(e){return e.getUTCFullYear()},get_month:function(e){return e.getUTCMonth()},get_hours:function(e){return e.getUTCHours()},get_minutes:function(e){return e.getUTCMinutes()},get_seconds:function(e){return e.getUTCSeconds()},get_day_of_month:function(e){return e.getUTCDate()},get_day_of_week:function(e){return e.getUTCDay()+1},get_day_of_year:function(e){var t=e.getUTCMonth(),i=c[t];return t>u.JANUARY+1&&l(e.getUTCFullYear())&&(i+=1),i+e.getUTCDate()},get_week_of_year:function(e){
var t=new Date(Date.UTC(e.getUTCFullYear(),0,1)).getUTCDay(),i=0===t?1:8-t,r=u.get_day_of_year(e)-i;return Math.ceil(r/7)+1},get_minutes_from_midnight:function(e){return 60*u.get_hours(e)+u.get_minutes(e)},set_hms:function(e,t,i,r,n,o){e.setUTCHours(t),e.setUTCMinutes(i),e.setUTCSeconds(r),e.setUTCMilliseconds(n),u.correct_time(e,o)},correct_time:function(e,t){var i=e.getTime(),r=t.correction_loc(i);e.setTime(i+r)},add_days_considering_dst:function(e,t,i){var r=e.offset_utc(t),n=this.clone(t);this.add_date(n,i);var o=e.offset_utc(n);return n.setTime(n.getTime()+r-o),n},add_date:function(e,t){e.setTime(e.getTime()+t*u.secondsPerDay)},add_minutes:function(e,t){e.setTime(e.getTime()+a(t))},clone:function(e){return new Date(e.getTime())},get_days_per_year:function(e){var t=e.getUTCFullYear();return this.days_per_year(t)},days_per_year:function(e){return l(e)?366:365},get_part:function(e,t){switch(t){case u.YEAR:return u.get_year(e);case u.MONTH:return u.get_month(e);case u.DAY_OF_MONTH:return u.get_day_of_month(e);case u.WEEK_OF_YEAR:return u.get_week_of_year(e);case u.DAY_OF_WEEK:return u.get_day_of_week(e);case u.HOUR_OF_DAY:return u.get_hours(e);case u.MINUTE:return u.get_minutes(e);case u.DAY_OF_YEAR:return u.get_day_of_year(e);case u.SECOND:return u.get_seconds(e);default:return e.getTime()}},time_minutes:a,time_seconds:function(e){return 1e3*e},time_minutes_diff:function(e,t){return s((s(e/1e3)-s(t/1e3))/60)},time_seconds_diff:function(e,t){return s(s(e/1e3)-s(t/1e3))},utc_to_cal:function(e,t){var i=e.offset_utc(t);return new Date(t+i)},get_cal:function(e,t,i,r,n,o,s){var a=new Date(Date.UTC(t,i,r,n||0,o||0,s||0)),l=e.offset_utc(+a);return new Date(a.valueOf()-l)},get_cal_from_unix_timestamp_ms:function(e,t){return new Date(t+e.offset_utc(t))},get_cal_utc:function(e,t,i){return new Date(Date.UTC(e,t,i))},cal_to_utc:function(e,t){var i=t.getTime();return i-e.offset_loc(i)},get_timezone:function(e){return new n(e)},shift_day:function(e,t){var i=e-1;return(i+=t)>6?i%=7:i<0&&(i=(7+i%7)%7),i+1}};e.exports=u},jFln:function(e,t,i){"use strict";var r=i("Hr11"),n=r.greaterThan,o=r.lessThan,s=window.CanvasEx=i("8Uy/");s.computeDashPattern=function(e){return[[e.lineWidth,2*e.lineWidth],[5*e.lineWidth,6*e.lineWidth],[6*e.lineWidth,6*e.lineWidth],[e.lineWidth,4*e.lineWidth],[2*e.lineWidth,e.lineWidth]][e.lineStyle-1]},s.drawLine=function(e,t,i,r,n){isFinite(t)&&isFinite(r)&&isFinite(i)&&isFinite(n)&&(e.lineStyle!==s.LINESTYLE_SOLID?s.drawDashedLine(e,t,i,r,n):s.drawSolidLine(e,t,i,r,n))},s.drawArrow=function(e,t,i,r,n,o){if(o=void 0===o?2:o,isFinite(t)&&isFinite(r)&&isFinite(i)&&isFinite(n)){var s=Math.round(o/2);e.beginPath(),e.moveTo(r,n),e.lineTo(t,i),e.moveTo(t+o,i+o),e.lineTo(t-o,i+o),e.moveTo(t-s,i+s),e.lineTo(t+s,i+s),e.stroke()}},s.drawSolidLine=function(e,t,i,r,n){e.beginPath(),e.moveTo(t,i),e.lineTo(r,n),e.stroke()},s.setLineStyle=function(e,t){e.lineStyle=t;var i=[];t!==s.LINESTYLE_SOLID&&(i=s.computeDashPattern(e)),s.setLineDash(e,i)},s.setLineDash=function(e,t){
"function"==typeof e.setLineDash?e.setLineDash(t):void 0!==e.mozDash?e.mozDash=t:void 0!==e.webkitLineDash&&(e.webkitLineDash=t)},s.drawPoly=function(e,t,i){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}e.closePath(),e.stroke(),i&&e.fill()},s.drawRoundRect=function(e,t,i,r,n,o){e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+r-o,i),e.arcTo(t+r,i,t+r,i+o,o),e.lineTo(t+r,i+n-o),e.arcTo(t+r,i+n,t+r-o,i+n,o),e.lineTo(t+o,i+n),e.arcTo(t,i+n,t,i+n-o,o),e.lineTo(t,i+o),e.arcTo(t,i,t+o,i,o)},s.drawDashedLine=function(e,t,i,r,n){e.save();var o=s.computeDashPattern(e);if(e.beginPath(),"function"==typeof e.setLineDash)e.setLineDash(o);else if(void 0!==e.mozDash)e.mozDash=o;else{if(void 0===e.webkitLineDash)return s.dashedLineTo(e,t,i,r,n,o),e.stroke(),void e.restore();e.webkitLineDash=o}e.moveTo(t,i),e.lineTo(r,n),e.stroke(),e.restore()},s.drawDashedLineHorizontal=function(e,t,i,r){e.save();var n=s.computeDashPattern(e),o=0,a=e.lineWidth,l=a/2;e.translate(-l,-l);for(var c=!0,u=t+r;t<u;){var h=n[o];c&&e.fillRect(t,i,h,a),c=!c,t+=h,o=o===n.length-1?0:o+1}e.restore()},s.drawDashedLineVertical=function(e,t,i,r){e.save();var n=s.computeDashPattern(e),o=0,a=e.lineWidth,l=a/2;e.translate(-l,-l);for(var c=!0,u=i+r;i<u;){var h=n[o];c&&e.fillRect(t,i,a,h),c=!c,i+=h,o=o===n.length-1?0:o+1}e.restore()},s.dashedLineTo=function(e,t,i,r,s,a){var l={thereYet:n,cap:Math.min},c={thereYet:n,cap:Math.min};i-s>0&&(c.thereYet=o,c.cap=Math.max),t-r>0&&(l.thereYet=o,l.cap=Math.max),e.moveTo(t,i);for(var u=t,h=i,d=0,p=!0;!l.thereYet(u,r)||!c.thereYet(h,s);){var f=Math.atan2(s-i,r-t),_=a[d];u=l.cap(r,u+Math.cos(f)*_),h=c.cap(s,h+Math.sin(f)*_),p?e.lineTo(u,h):e.moveTo(u,h),d=(d+1)%a.length,p=!p}},s.setFont=function(e,t){if(e.font!==t)try{e.font=t}catch(i){}},"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.setFont=function(e){s.setFont(this,e)},CanvasRenderingContext2D.prototype.lineStyle=s.LINESTYLE_SOLID),e.exports=s},jJ9X:function(e,t,i){},jTis:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"CalloutConsts",(function(){return r})),function(e){e[e.RoundRadius=8]="RoundRadius",e[e.TextMargins=2]="TextMargins",e[e.MinWidth=100]="MinWidth"}(r||(r={}))},jXu8:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><circle fill="currentColor" cx="9" cy="9" r="5"/></svg>'},jeZR:function(e,t,i){"use strict";i.r(t),i.d(t,"AppliedTimeFrame",(function(){return n}));var r=i("QfUd"),n=function(){function e(e){this._appliedTimeFrame=new r.a(null),this._appliedTimeFrameInfo=null,this._model=e,e.mainSeries().dataEvents().messageReceived().subscribe(this,this._onSeriesMessageReceived)}return e.prototype.destroy=function(){this._model.timeScale().logicalRangeChanged().unsubscribeAll(this),this._model.mainSeries().dataEvents().messageReceived().unsubscribeAll(this)},e.prototype.appliedTimeFrame=function(){return this._appliedTimeFrame},e.prototype._onSeriesMessageReceived=function(e){if("series_timeframe"===e.method){
var t=this._model.timeScale();t.logicalRangeChanged().unsubscribe(this,this._invalidateAppliedTimeFrame),(null==e.params[5]||e.params[5])&&(this._appliedTimeFrameInfo={logicalRange:t.logicalRange(),baseIndex:t.baseIndex()},t.logicalRangeChanged().subscribe(this,this._invalidateAppliedTimeFrame))}},e.prototype._invalidateAppliedTimeFrame=function(){if(null!==this._appliedTimeFrameInfo){var e=this._model.timeScale(),t=e.logicalRange(),i=e.baseIndex(),r=this._appliedTimeFrameInfo.logicalRange,n=this._appliedTimeFrameInfo.baseIndex;null!==t&&null!==r&&i-t.left()==n-r.left()&&i-t.right()==n-r.right()||(this._appliedTimeFrame.setValue(null),e.logicalRangeChanged().unsubscribe(this,this._invalidateAppliedTimeFrame))}},e}()},jenN:function(e,t,i){"use strict";i.r(t);var r=i("txPx"),n=i("7Fue"),o=i("xWfy"),s=i("qySK"),a=i("mrSG"),l=function(e){function t(t,i){var r=e.call(this)||this;return r._source=t,r._data=i,r}return Object(a.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1;var r=this._source.priceScale(),n=this._source.properties().visible.value();if(r&&!r.isEmpty()&&n){var o=this._source.properties().graphics[this._data.lineType][this._data.styleId];if(o.visible&&o.visible.value()&&o.showPrice&&o.showPrice.value()){var s=this._source.firstValue();if(null!==s){var a=this._data.line.level,l=o.color.value();i.background=l,i.color=this.generateTextColor(l),i.coordinate=r.priceToCoordinate(a,s),e.text=r.formatPrice(a,s),e.visible=!0}}}},t}(i("KcY8").a);i.d(t,"createGraphicsPaneViews",(function(){return u})),i.d(t,"createGraphicsPriceAxisViews",(function(){return d})),i.d(t,"isStudyGraphicsEmpty",(function(){return n.a})),i.d(t,"StaticStudyGraphics",(function(){return o.a})),i.d(t,"emptyStudyGraphics",(function(){return o.b})),i.d(t,"loadStudyGraphics",(function(){return o.c})),i.d(t,"saveStudyGraphics",(function(){return o.d})),i.d(t,"LiveStudyGraphics",(function(){return s.a}));var c=Object(r.getLogger)("Chart.StudyGraphics");function u(e,t,r){return new Promise((function(n){Promise.all([i.e(98),i.e(213),i.e("study-pane-views")]).then(function(o){var s=Object.keys(e.graphicsInfo());s.sort((function(e,t){return h(e)-h(t)})),n(s.map((function(n){var o=i("psYU").VertLinePaneView,s={backgrounds:i("IyRz").BackgroundPaneView,hhists:i("Gj0v").HHistPaneView,horizlines:i("1sos").HorizLinePaneView,hlines:i("3zbQ").LevelPaneView,lines:i("Kt0C").LinePaneView,polygons:i("BJvp").PolygonPaneView,shapemarks:i("qVqd").ShapeMarkPaneView,textmarks:i("292E").TextMarkPaneView,trendchannels:i("0HiO").TrendChannelPaneView,vertlines:o,dwglabels:i("K3ps").DwgLabelPaneView,dwglines:i("PztT").DwgLinePaneView}[n];return null===s?(c.logWarn(n+" is not supported by this build of graphics subsystem, skipping"),null):new s(e,t,r)})).filter((function(e){return null!==e})))}.bind(null,i)).catch(void 0)}))}function h(e){switch(e){case"polygons":return-100;case"trendchannels":return-90;default:return 0}}function d(e){for(var t=Object.keys(e.graphicsInfo()),i=[],r=function(t){switch(t){case"hlines":
e.graphics().hlines().forEach((function(r,n){r.forEach((function(r){void 0!==r.level&&i.push(new l(e,{line:{level:r.level},styleId:n,lineType:t}))}))}));break;case"horizlines":e.graphics().horizlines().forEach((function(r,n){r.forEach((function(r){void 0!==r.level&&i.push(new l(e,{line:{level:r.level},styleId:n,lineType:t}))}))}))}},n=0,o=t;n<o.length;n++){r(o[n])}return i}},jkoZ:function(e,t,i){"use strict";var r=i("XlJ7").makeFont,n=i("XlJ7").parseFont,o=(0,i("txPx").getLogger)("Model.ChartTradingUtils"),s={_fontHeightCache:{},_parsedColorCache:{},_parseColor:function(e){if(this._parsedColorCache[e])return this._parsedColorCache[e];var t=document.createElement("div");t.style.color=e;var i=t.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||t.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\s*\)$/i),r={r:i[1],g:i[2],b:i[3],a:i[4]||"1"};return this._parsedColorCache[e]=r,r},getColorFromProperties:function(e,t){var i=1-t.value()/100,r=this._parseColor(e.value());return"rgba("+r.r+","+r.g+","+r.b+","+i+")"},setColorToProperties:function(e,t,i){var r=this._parseColor(e);t.setValue("rgb("+r.r+","+r.g+","+r.b+")");var n=100*(1-r.a);i.setValue(Math.max(0,Math.min(n,100)))},getFontFromProperties:function(e,t,i,n){return r(t.value(),e.value(),n.value()?"italic":"",i.value()?"bold":"")},setFontToProperties:function(e,t,i,r,s){var a=n(e);null!==a?(a.family.length>0&&t.setValue(a.family),i.setValue(a.size),r.setValue(a.bold),s.setValue(a.italic)):o.logError("Invalid font: "+e)},fontHeight:function(e){if(!this._fontHeightCache[e]){var t=document.createElement("span");t.appendChild(document.createTextNode("height")),document.body.appendChild(t),t.style.cssText="font: "+e+"; white-space: nowrap; display: inline;";var i=t.offsetHeight;document.body.removeChild(t),this._fontHeightCache[e]=Math.ceil(i)}return this._fontHeightCache[e]},drawPolyHoverOrPress:function(e,t,i,r){r?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.15)",CanvasEx.drawPoly(e,t,!0),e.restore()):i&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.1)",CanvasEx.drawPoly(e,t,!0),e.restore())},repaint:function(e){e.lightUpdate()},roundToMinTick:function(e,t){var i=1/e.mainSource().base();return i*Math.round(t/i)}};e.exports=s},jlDR:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return r}));var r,n=i("mrSG"),o=i("Eyy1"),s=i("2WC2"),a=i("gBDZ"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.__extends)(t,e),t.prototype.setData=function(e,t){this._setBaseData(e,t);for(var i=0,r=this._items;i<r.length;i++){var n=r[i],o=n.height;n.stepX=Math.round(o/2*.65)+.5,n.stepY=n.stepX;var s=n.stepX/2,a=this._getTextCache(n);if(null!==a){var l=a.textImageWidth,c=a.textImageHeight;n.shapeWidth=l+2*n.stepX,n.shapeHeight=c+2*s+n.stepY,n.vertOffset=this._calcVertOffset(n),n.textHorizOffset=this._getHorizontalTextOffset(n),n.textVertOffset=this._getVerticalTextOffset(n)}else n.shapeWidth=2*n.stepX,n.shapeHeight=2.5*n.stepY,n.vertOffset=this._calcVertOffset(n)}},
t.prototype._calcVertOffset=function(e){return e.vertOffset},t.prototype._drawCorner=function(e,t,i,r,n){var o=Math.max(1,Math.floor(2*n));e.lineTo(t-o*r.prevPointSignX,i-o*r.prevPointSignY),e.arcTo(t,i,t+o*r.nextPointSignX,i+o*r.nextPointSignY,o)},t.prototype._getArrowSize=function(e){return e.stepX},t.prototype._getHorizontalTextOffset=function(e){return 0},t.prototype._getVerticalTextOffset=function(e){return 0},t.prototype._hasText=function(e){return Boolean(e.text)||Boolean(this._text)},t.prototype._drawItemText=function(e,t,i){var r,n=this._getTextCache(i);if(null!==n){var s=i.textHorizOffset||0,l=i.x+s,c=i.vertOffset,u=i.y+c+i.textVertOffset,h=(null===(r=i.style)||void 0===r?void 0:r.textColor)||this._textColor;n.paintTo(e,t,Object(o.ensureDefined)(h),l,u,a.a.Center,a.c.Middle)}},t}(s.a),c=function(e,t,i,r){this.prevPointSignX=e,this.prevPointSignY=t,this.nextPointSignX=i,this.nextPointSignY=r};!function(e){e.rightUp=new c(1,0,0,1),e.rightDown=new c(0,1,-1,0),e.leftDown=new c(-1,0,0,-1),e.leftUp=new c(0,-1,1,0)}(r||(r={}))},jofe:function(e,t,i){"use strict";function r(){var e,t;return{promise:new Promise((function(i,r){e=i,t=r})),reject:t,resolve:e}}i.r(t),i.d(t,"createDeferredPromise",(function(){return r}))},jy4L:function(e,t,i){"use strict";i.r(t),i.d(t,"makeNextSymbolId",(function(){return n})),i.d(t,"makeNextStudyId",(function(){return s}));var r=0;function n(){return"ss_"+ ++r}var o=0;function s(){return"st"+ ++o}},k4w6:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t){var i=e.call(this)||this;return i._series=t,i._model=t.model(),i}return Object(r.__extends)(t,e),t}(i("2ijp").a)},k5SP:function(e,t,i){"use strict";(function(t){var r=i("GVHu").Study,n=i("v3sz").StudyStrategyOrdersPaneView,o=["strategy_props"];function s(e,i,n,o){r.call(this,e,i,n,o),this._barsIndexes=[],this._reportDataBuffer=null,this._reportData=null,this.watchedData=new t,this.model().addStrategySource(this)}inherit(s,r),s.prototype.stop=function(){r.prototype.stop.call(this),this.model().removeStrategySource(this)},s.prototype.start=function(){this.model().addStrategySource(this),r.prototype.start.call(this)},s.prototype.hasStateForAlert=function(){return this._isAlertFeatureEnabled()},s.prototype.inputsForAlertState=function(){var e=this.inputs();return this._metaInfo.inputs.forEach((function(t){var i=e[t.id];i&&t.internalID&&(i.internalID=t.internalID)})),e},s.prototype.onData=function(e){e.method&&"data_update"!==e.method&&this.watchedData.setValue({method:e.method}),r.prototype.onData.call(this,e)},s.prototype._onDataUpdated=function(e,t,i){var n=t&&t.data&&t.data.report;n?(t.isUpdate&&this._reportDataBuffer&&(n=$.extend(this._reportDataBuffer,n)),this._reportDataBuffer=this._reportData=$.extend(this._reportDataBuffer||{},n),this.watchedData.setValue({method:"data_update",nonSeriesData:t})):this.watchedData.setValue({method:"data_update",nonSeriesData:{data:{report:this._reportDataBuffer}}});var o=!(!t||!t.indexes_replace)
;"nochange"!==i&&i.length>0&&(n||o)&&this._collateBarsIndexes(i),r.prototype._onDataUpdated.call(this,e,t,i)},s.prototype._collateBarsIndexes=function(e){if(Array.isArray(e)){var t=this._reportData&&this._reportData.filledOrders;if(t&&t.length){this._barsIndexes.length=0;for(var i=0;i<t.length;i++)this._barsIndexes[i]=e[t[i].tm]}}},s.prototype.reportData=function(){return this._reportData},s.prototype.ordersData=function(){return this._reportData&&this._reportData.filledOrders},s.prototype.barsIndexes=function(){return this._barsIndexes},s.prototype.clearData=function(){r.prototype.clearData.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.clearItems()},s.prototype.strategyOrdersPaneView=function(){return this._strategyOrdersPaneView},s.prototype.restoreData=function(e){r.prototype.restoreData.apply(this,arguments),this.model().addStrategySource(this),e.reportData&&e.barsIndexes&&(this._reportData=e.reportData,this._barsIndexes=e.barsIndexes,this.watchedData.setValue({method:"data_update",nonSeriesData:{data:{report:this._reportData}}})),e.activeState&&(this._activeState=!0)},s.prototype.activeState=function(){return this._activeState},s.prototype.updateAllViews=function(){r.prototype.updateAllViews.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.update()},s.prototype.createViews=function(){r.prototype.createViews.call(this),this._strategyOrdersPaneView=new n(this,this._series,this._model)},s.prototype.state=function(e){var t=r.prototype.state.apply(this,arguments);return e&&this._reportData&&this._barsIndexes&&(t.data||(t.data={}),t.data.reportData=this._reportData,t.data.barsIndexes=this._barsIndexes,t.data.activeState=this.model().activeStrategySource().value()===this),t},s.prototype._titleInputs=function(e){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1,fakeInputsForDisplay:!0,asObject:!1,skippedGroups:o,noExchanges:e})},s.prototype._getTelemetryObjectName=function(){return"strategy"},s.prototype._getTelemetryAdditionalData=function(){return{symbol:this.series().actualSymbol(),resolution:this.series().interval()}},e.exports.StudyStrategy=s}).call(this,i("hY0g"))},k83o:function(e,t,i){"use strict";(function(t){window.TradingView=window.TradingView||{};var i,r,n,o,s,a,l=TradingView.postMessageWrapper=(r={},n={},o={},s=0,a=0,window.addEventListener&&window.addEventListener("message",(function(e){var o;try{o=JSON.parse(e.data),t.enabled("charting_library_debug_mode")&&console.log("PostMessage: incoming message: "+JSON.stringify(o))}catch(s){return}if(o&&o.provider&&"TradingView"===o.provider)if("get"===o.type){if(!n[o.name])return;n[o.name].forEach((function(e){"function"==typeof e&&e.call(o,o.data,(function(e){var t={id:o.id,type:"on",name:o.name,client_id:o.client_id,data:e,provider:"TradingView"};i.postMessage(JSON.stringify(t),"*")}))}))}else if("on"===o.type)r[o.client_id]&&r[o.client_id][o.id]&&(r[o.client_id][o.id].call(o,o.data),delete r[o.client_id][o.id]);else if("post"===o.type){if(!n[o.name])return;n[o.name].forEach((function(e){
"function"==typeof e&&e.call(o,o.data,(function(){}))}))}})),function(e,t){r[t]={},o[t]=e,i=e;var l="";return{on:function(e,t,i){n[e]&&i||(n[e]=[]),n[e].push(t)},get:function(e,i,n){var a={id:s++,type:"get",name:e,client_id:t,data:i,provider:"TradingView"};r[t][a.id]=n,o[t].postMessage(JSON.stringify(a),"*")},post:function(e,t,i){var r={id:a++,type:"post",name:t,client_id:l,data:i,provider:"TradingView"};e&&"function"==typeof e.postMessage&&e.postMessage(JSON.stringify(r),"*")},setClientId:function(e){l=e}}});e.exports=l}).call(this,i("Kxc7"))},"k9/m":function(e,t,i){"use strict";i.r(t),i.d(t,"PlotRowSearchMode",(function(){return r})),i.d(t,"PlotList",(function(){return c})),i.d(t,"mergeMinMax",(function(){return u})),i.d(t,"mergePlotRows",(function(){return h}));var r,n=i("Eyy1"),o=i("Y7w9"),s=i("tqok"),a=i("txPx"),l=Object(a.getLogger)("Chart.PlotList");!function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.Exact=0]="Exact",e[e.NearestRight=1]="NearestRight"}(r||(r={}));var c=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache=new Map,this._rowSearchCache=new Map,this._rowSearchCacheWithoutEmptyValues=new Map,this._plotFunctions=e||new Map,this._emptyValuePredicate=t}return e.prototype.clear=function(){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache.clear(),this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear()},e.prototype.first=function(){return this.size()>0?this._items[this._start]:null},e.prototype.last=function(){return this.size()>0?this._items[this._end-1]:null},e.prototype.firstIndex=function(){return this.size()>0?this._indexAt(this._start):null},e.prototype.lastIndex=function(){return this.size()>0?this._indexAt(this._end-1):null},e.prototype.size=function(){return this._end-this._start},e.prototype.isEmpty=function(){return 0===this.size()},e.prototype.contains=function(e){return null!==this._search(e,r.Exact)},e.prototype.valueAt=function(e){var t=this.search(e);return null!==t?t.value:null},e.prototype.add=function(e,t){if(this._shareRead)return l.logDebug("add: readonly collection modification attempt"),!1;var i={index:e,value:t},n=this._search(e,r.Exact);return this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear(),null===n?(this._items.splice(this._lowerbound(e),0,i),this._start=0,this._end=this._items.length,!0):(this._items[n]=i,!1)},e.prototype.search=function(e,t,i){void 0===t&&(t=r.Exact);var n=void 0!==i?this._rowSearchCacheWithoutEmptyValues:this._rowSearchCache,o=void 0!==i?1e4*(t+1)+i:t,s=n.get(e);if(void 0!==s){var a=s.get(o);if(void 0!==a)return a}var l=this._search(e,t,i);if(null===l)return null;var c={index:this._indexAt(l),value:this._valueAt(l)};return void 0===s&&(s=new Map,n.set(e,s)),s.set(o,c),c},e.prototype.fold=function(e,t){for(var i=t,r=this._start;r<this._end;++r){i=e(this._indexAt(r),this._valueAt(r),i)}return i},e.prototype.findFirst=function(e,t){
for(var i=void 0!==t&&Math.min(this._start+t,this._end)||this._end,r=this._start;r<i;++r){var n=this._indexAt(r),o=this._valueAt(r);if(e(n,o))return{index:n,value:o}}return null},e.prototype.findLast=function(e,t){for(var i=void 0!==t&&Math.max(this._end-t,this._start)||this._start,r=this._end-1;r>=i;--r){var n=this._indexAt(r),o=this._valueAt(r);if(e(n,o))return{index:n,value:o}}return null},e.prototype.each=function(e){for(var t=this._start;t<this._end;++t){if(e(this._indexAt(t),this._valueAt(t)))break}},e.prototype.reduce=function(e,t){for(var i=t,r=this._start;r<this._end;++r){i=e(i,this._indexAt(r),this._valueAt(r))}return i},e.prototype.range=function(t,i){var r=new e(this._plotFunctions,this._emptyValuePredicate);return r._items=this._items,r._start=this._lowerbound(t),r._end=this._upperbound(i),r._shareRead=!0,r},e.prototype.minMaxOnRangeCached=function(e,t,i){if(this.isEmpty())return null;for(var r=null,n=0,o=i;n<o.length;n++){var s=o[n];r=u(r,this._minMaxOnRangeCachedImpl(e-s.offset,t-s.offset,s.name))}return r},e.prototype.minMaxOnRange=function(e,t,i){if(this.isEmpty())return null;for(var r=null,n=0,o=i;n<o.length;n++){var s=o[n];r=u(r,this._minMaxOnRange(e-s.offset,t-s.offset,s.name))}return r},e.prototype.merge=function(e){return this._shareRead?(l.logDebug("merge: readonly collection modification attempt"),null):0===e.length?null:this.isEmpty()||e[e.length-1].index<this._items[0].index?this._prepend(e):e[0].index>this._items[this._items.length-1].index?this._append(e):1===e.length&&e[0].index===this._items[this._items.length-1].index?(this._updateLast(e[0]),e[0]):this._merge(e)},e.prototype.addTail=function(e,t){void 0===t&&(t=!1);var i=0;t&&this._end-this._start>0&&(i=1,this._items[this._end-this._start-1].value=e[0].value);for(var r=i;r<e.length;++r){var n=e[r],o=this.lastIndex();if(null===o){l.logError("Can't add tail to the empty plotlist");break}this.add(o+1,n.value)}this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear()},e.prototype.move=function(e){if(this._shareRead)l.logDebug("move: readonly collection modification attempt");else if(0!==e.length){for(var t=this._items.slice(),i=0,r=e;i<r.length;i++){var n=r[i],o=this._bsearch(n.old);if(null!==o&&void 0!==t[o])if(n.new===s.INVALID_TIME_POINT_INDEX)t[o]=void 0;else{t[o]={index:n.new,value:t[o].value};var a=this._bsearch(n.new);if(null!==a){var c=t[a];void 0!==c&&c.index===n.new&&(t[a]=void 0)}}}this._items=t.filter((function(e){return void 0!==e})).sort((function(e,t){return e.index-t.index})),this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear(),this._minMaxCache.clear(),this._start=0,this._end=this._items.length}},e.prototype.remove=function(e){if(this._shareRead)return l.logDebug("remove: readonly collection modification attempt"),null;var t=this._search(e,r.NearestRight);if(null===t)return null;var i=this._items.splice(t);return this._end=this._items.length,this._minMaxCache.clear(),this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear(),i.length>0?i[0]:null},
e.prototype.state=function(){return{start:this._start,end:this._end,data:this._items,shareread:this._shareRead}},e.prototype.restoreState=function(e){e?(this._start=e.start,this._end=e.end,this._shareRead=e.shareread,this._items=e.data,this._minMaxCache.clear(),this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear()):this.clear()},e.prototype._indexAt=function(e){return this._items[e].index},e.prototype._valueAt=function(e){return this._items[e].value},e.prototype._length=function(){return this._items.length},e.prototype._search=function(e,t,i){var n=this._bsearch(e);if(null===n&&t!==r.Exact)switch(t){case r.NearestLeft:return this._searchNearestLeft(e,i);case r.NearestRight:return this._searchNearestRight(e,i);default:throw new TypeError("Unknown search mode")}if(void 0===i||null===n||t===r.Exact)return n;switch(t){case r.NearestLeft:return this._nonEmptyNearestLeft(n,i);case r.NearestRight:return this._nonEmptyNearestRight(n,i);default:throw new TypeError("Unknown search mode")}},e.prototype._nonEmptyNearestRight=function(e,t){for(var i=Object(n.ensure)(this._emptyValuePredicate),r=Object(n.ensure)(t);e<this._end&&i(this._valueAt(e),r);)e+=1;return e===this._end?null:e},e.prototype._nonEmptyNearestLeft=function(e,t){for(var i=Object(n.ensureNotNull)(this._emptyValuePredicate),r=Object(n.ensure)(t);e>=this._start&&i(this._valueAt(e),r);)e-=1;return e<this._start?null:e},e.prototype._searchNearestLeft=function(e,t){var i=this._lowerbound(e);i>this._start&&(i-=1);var r=i!==this._end&&this._indexAt(i)<e?i:null;return void 0!==t&&null!==r?this._nonEmptyNearestLeft(r,t):r},e.prototype._searchNearestRight=function(e,t){var i=this._upperbound(e),r=i!==this._end&&e<this._indexAt(i)?i:null;return void 0!==t&&null!==r?this._nonEmptyNearestRight(r,t):r},e.prototype._bsearch=function(e){var t=this._lowerbound(e);return t===this._end||e<this._items[t].index?null:t},e.prototype._lowerbound=function(e){return Object(o.lowerbound)(this._items,e,(function(e,t){return e.index<t}),this._start,this._end)},e.prototype._upperbound=function(e){return Object(o.upperbound)(this._items,e,(function(e,t){return t.index>e}),this._start,this._end)},e.prototype._plotMinMax=function(e,t,i){var r=null,n=this._plotFunctions.get(i);if(void 0===n)throw new Error('Plot "'+i+'" is not registered');for(var o=e;o<t;o++){var s=n(this._items[o].value);null==s||Number.isNaN(s)||(null===r?r={min:s,max:s}:(s<r.min&&(r.min=s),s>r.max&&(r.max=s)))}return r},e.prototype._invalidateCacheForRow=function(e){var t=Math.floor(e.index/30);this._minMaxCache.forEach((function(e){return e.delete(t)}))},e.prototype._prepend=function(e){return Object(n.assert)(!this._shareRead,"collection should not be readonly"),Object(n.assert)(0!==e.length,"plotRows should not be empty"),this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear(),this._minMaxCache.clear(),this._items=e.concat(this._items),this._start=0,this._end=this._items.length,e[0]},e.prototype._append=function(e){
return Object(n.assert)(!this._shareRead,"collection should not be readonly"),Object(n.assert)(0!==e.length,"plotRows should not be empty"),this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear(),this._minMaxCache.clear(),this._items=this._items.concat(e),this._start=0,this._end=this._items.length,e[0]},e.prototype._updateLast=function(e){Object(n.assert)(!this.isEmpty(),"plot list should not be empty");var t=this._items[this._end-1];Object(n.assert)(t.index===e.index,"last row index should match new row index"),this._invalidateCacheForRow(e),this._rowSearchCache.delete(e.index),this._rowSearchCacheWithoutEmptyValues.delete(e.index),this._items[this._end-1]=e},e.prototype._merge=function(e){return Object(n.assert)(0!==e.length,"plot rows should not be empty"),this._rowSearchCache.clear(),this._rowSearchCacheWithoutEmptyValues.clear(),this._minMaxCache.clear(),this._items=h(this._items,e),this._start=0,this._end=this._items.length,e[0]},e.prototype._minMaxOnRangeCachedImpl=function(e,t,i){if(this.isEmpty())return null;var r=null,o=Object(n.ensureNotNull)(this.firstIndex()),s=Object(n.ensureNotNull)(this.lastIndex()),a=Math.max(e,o),l=Math.min(t,s),c=30*Math.ceil(a/30),h=Math.max(c,30*Math.floor(l/30));r=u(r,this._minMaxOnRange(a,Math.min(c,t,l),i));var d=this._minMaxCache.get(i);void 0===d&&(d=new Map,this._minMaxCache.set(i,d));for(var p=Math.max(c+1,a);p<h;p+=30){var f=Math.floor(p/30),_=d.get(f);if(void 0===_){var m=30*f,v=30*(f+1)-1;_=this._minMaxOnRange(m,v,i),d.set(f,_)}r=u(r,_)}return r=u(r,this._minMaxOnRange(h,l,i))},e.prototype._minMaxOnRange=function(e,t,i){return this._plotMinMax(this._lowerbound(e),this._upperbound(t),i)},e}();function u(e,t){return null===e?t:null===t?e:{min:Math.min(e.min,t.min),max:Math.max(e.max,t.max)}}function h(e,t){for(var i=function(e,t){var i=e.length,r=t.length,n=i+r,o=0,s=0;for(;o<i&&s<r;)e[o].index<t[s].index?o++:e[o].index>t[s].index?s++:(o++,s++,n--);return n}(e,t),r=new Array(i),n=0,o=0,s=e.length,a=t.length,l=0;n<s&&o<a;)e[n].index<t[o].index?(r[l]=e[n],n++):e[n].index>t[o].index?(r[l]=t[o],o++):(r[l]=t[o],n++,o++),l++;for(;n<s;)r[l]=e[n],n++,l++;for(;o<a;)r[l]=t[o],o++,l++;return r}},kIXa:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Time Cycles");function s(e,t){this._constructor="LineToolTimeCycles";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("am+t").TimeCyclesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Time Cycles"},s.prototype.setPoint=function(e,t,i){var r=Object.assign({},t),n=this._points[0],o=this._points[1];n.price=r.price,o.price=r.price,this._points[e]=r,this.normalizePoints()},s.prototype.addPoint=function(e,t,i){var n=r.prototype.addPoint.call(this,e,t,!0);if(n){var o=this._points[0];this._points[1].price=o.price,
i||(this.normalizePoints(),this.createServerPoints())}return n},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("BABJ").TimeCyclesPatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetooltimecycles",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolTimeCycles=s},kNhM:function(e,t,i){"use strict";i.r(t),i.d(t,"EmbedFooterWidget",(function(){return n}));i("YFKU");var r=i("oiRj"),n=(i("i8AX"),function(){function e(e){var t=e.resizerBridge,i=e.publishOptions;this._publishOptions=i,t.negotiateHeight(31),t.container.subscribe(this._render.bind(this),{callWithLast:!0})}return e.prototype._render=function(e){var t=this;$(e).empty().css("overflow","hidden");var i=$("<div>",e).attr("id","footer-chart-panel").addClass("publish-widget").appendTo(e),n=$("<div>",e).addClass("publish-buttons").appendTo(i);"dailyfx"===this._publishOptions.publishSource&&$('<label class="usage-help">For a guide on using Trading View charts, please click <a target="_blank" href="https://media.dailyfx.com/docs/TradingView.pdf">here</a>.</label>').appendTo(i),$('<a class="publish-chart-button"></a>').html(window.t("Publish Idea")).on("click",(function(e){e.preventDefault(),Object(r.publishChartWidget)(t._publishOptions)})).addClass("apply-common-tooltip").attr("title",$.t("Share your idea with the trade community")).appendTo(n)},e}())},kcTO:function(e,t,i){"use strict";i.r(t),i.d(t,"customFormatters",(function(){return l})),i.d(t,"formatterOptions",(function(){return c})),i.d(t,"numberToStringWithLeadingZero",(function(){return u})),i.d(t,"isFormatterHasForexAdditionalPrecision",(function(){return h})),i.d(t,"PriceFormatter",(function(){return d}));var r=i("YFKU"),n=i("ogJP"),o=i("Ialn"),s=i("txPx"),a=Object(s.getLogger)("Chart.PriceFormatter"),l={dateFormatter:null,timeFormatter:null},c={decimalSign:".",decimalSignFractional:"'"};function u(e,t){if(!Object(n.isNumber)(e))return"n/a";if(!Object(n.isInteger)(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");if(0===t)return e.toString();return("0000000000000000"+e.toString()).slice(-t)}function h(e){return"hasForexAdditionalPrecision"in e}var d=function(){function e(e,t,i,o){if(this.type="price",this._formatterErrors={custom:Object(r.t)("Price format is invalid."),fraction:Object(r.t)("Fraction part is invalid."),secondFraction:Object(r.t)("Second fraction part is invalid.")},t||(t=1),Object(n.isNumber)(e)&&Object(n.isInteger)(e)||(e=100),e<0)throw new TypeError("invalid base");this._priceScale=e,this._minMove=t,this._minMove2=o,i&&void 0!==o&&o>0&&2!==o&&4!==o&&8!==o?a.logDebug("invalid minmove2"):(this._fractional=i,this.calculateDecimal())}return e.prototype.isFractional=function(){return!!this._fractional},e.prototype.state=function(){return{fractional:this._fractional,fractionalLength:this._fractionalLength,
minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale}},e.prototype.calculateDecimal=function(){if(this._fractionalLength=0,this._priceScale>0&&this._minMove>0){var e=this._priceScale;for(this._fractional&&this._minMove2&&(e/=this._minMove2);e>1;)e/=10,this._fractionalLength++}},e.prototype.format=function(e,t,i,r,n){void 0===r&&(r=!0),void 0===n&&(n=!0);var s,a="";return e<0?(a=!1===r?"":"−",e=-e):e&&!0===t&&(a="+"),s=this._fractional?a+this._formatAsFractional(e,i):a+this._formatAsDecimal(e,i),n?Object(o.forceLTRStr)(s):s},e.prototype.parse=function(e){return e=(e=Object(o.stripLTRMarks)(e)).replace("−","-"),this._fractional?this._minMove2?this._parseAsDoubleFractional(e):this._parseAsSingleFractional(e):this._parseAsDecimal(e)},e.prototype.hasForexAdditionalPrecision=function(){return!this._fractional&&10===this._minMove2},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(t.priceScale,t.minMove,t.fractional,t.minMove2)},e.prototype._formatAsDecimal=function(e,t){var i;t=t||0;var r,n=1/(i=this._fractional?Math.pow(10,this._fractionalLength||0):Math.pow(10,t)*this._priceScale/this._minMove);if(i>1)r=Math.floor(e);else{var o=Math.floor(Math.round(e/n)*n);r=0===Math.round((e-o)/n)?o:o+n}var s="";if(i>1){var a=+(Math.round(e*i)-r*i).toFixed(this._fractionalLength);a>=i&&(a-=i,r+=1);var l=void 0!==this._fractionalLength?this._fractionalLength:NaN;s=c.decimalSign+u(+a.toFixed(this._fractionalLength)*this._minMove,l+t),s=this._removeEndingZeros(s,t)}return r.toString()+s},e.prototype._getFractPart=function(e,t){var i=[0,5],r=[0,2,5,7];return 2===t?void 0===i[e]?-1:i[e]:4===t?void 0===r[e]?-1:r[e]:e},e.prototype._formatAsFractional=function(e,t){var i=this._priceScale/this._minMove,r=Math.floor(e),n=t?Math.floor(e*i)-r*i:Math.round(e*i)-r*i;n===i&&(n=0,r+=1);var o="";if(t){var s=(e-r-n/i)*i;o=u(s=Math.round(s*Math.pow(10,t)),t),o=this._removeEndingZeros(o,t)}if(!this._fractionalLength)throw new Error("_fractionalLength is not calculated");var a="";if(this._minMove2){var l=n%this._minMove2,h=u(n=(n-l)/this._minMove2,this._fractionalLength),d=this._getFractPart(l,this._minMove2);a=h+c.decimalSignFractional+d}else a=u((n=this._getFractPart(n,this._priceScale))*this._minMove,this._fractionalLength);return r.toString()+c.decimalSignFractional+a+o},e.prototype._removeEndingZeros=function(e,t){for(var i=0;i<t&&"0"===e[e.length-1];i++)e=e.substr(0,e.length-1);return e},e.prototype._parseAsDecimal=function(e){var t,i=new RegExp(/^(-?)[0-9]+$/).exec(e);return i?{value:t=parseFloat(e),res:!0,suggest:this.format(t)}:(i=new RegExp("^(-?)[0-9]+\\"+c.decimalSign+"[0-9]*$").exec(e))?{value:t=parseFloat(e.replace(c.decimalSign,".")),res:!0,suggest:this.format(t)}:{error:this._formatterErrors.custom,res:!1}},e.prototype._patchFractPart=function(e,t){var i={0:0,5:1},r={0:0,2:1,5:2,7:3};return 2===t?void 0===i[e]?-1:i[e]:4===t?void 0===r[e]?-1:r[e]:e},e.prototype._parseAsSingleFractional=function(e){var t=new RegExp(/^(-?)[0-9]+$/).exec(e);if(t)return{value:s=parseFloat(e),res:!0,
suggest:this.format(s)};if(t=new RegExp("^(-?)([0-9]+)\\"+c.decimalSignFractional+"([0-9]+)$").exec(e)){var i=!!t[1],r=parseInt(t[2]),n=this._priceScale,o=this._patchFractPart(parseInt(t[3]),n);if(o>=n||o<0)return{error:this._formatterErrors.fraction,res:!1};var s=r+o/n;return i&&(s=-s),{value:s,res:!0,suggest:this.format(s)}}return{error:this._formatterErrors.custom,res:!1}},e.prototype._parseAsDoubleFractional=function(e){var t=new RegExp(/^(-?)[0-9]+$/).exec(e);if(t)return{value:u=parseFloat(e),res:!0,suggest:this.format(u)};if(t=new RegExp("^(-?)([0-9]+)\\"+c.decimalSignFractional+"([0-9]+)\\"+c.decimalSignFractional+"([0-9]+)$").exec(e)){var i=!!t[1],r=parseInt(t[2]),n=void 0!==this._minMove2?this._minMove2:NaN,o=this._priceScale/n,s=this._minMove2,a=this._patchFractPart(parseInt(t[3]),o),l=this._patchFractPart(parseInt(t[4]),s);if(a>=o||a<0)return{error:this._formatterErrors.fraction,res:!1};if(void 0!==s&&l>=s||l<0)return{error:this._formatterErrors.secondFraction,res:!1};var u=void 0!==s?r+a/o+l/(o*s):NaN;return i&&(u=-u),{value:u,res:!0,suggest:this.format(u)}}return{error:this._formatterErrors.custom,res:!1}},e}()},koRH:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#f7f8fa" d="M0 18h18V0H0z"/><path fill="#ed5565" d="M14 18h4V0h-4zM0 18h4V0H0zm11-8l2-1-1-.5v-1l-2 1 1-2h-1L9 5 8 6.5H7l1 2-2-1v1L5 9l2 1-.5 1h2v1.5h1V11h2z"/></svg>'},kxJy:function(e,t,i){"use strict";i.d(t,"d",(function(){return P})),i.d(t,"b",(function(){return C})),i.d(t,"g",(function(){return T})),i.d(t,"f",(function(){return x})),i.d(t,"e",(function(){return I})),i.d(t,"c",(function(){return E})),i.d(t,"a",(function(){return L}))
;var r=i("HGP3"),n=i("9lPX"),o=i("MyT/"),s=i("jXu8"),a=i("cbig"),l=i("G2LI"),c=i("QkND"),u=i("Gp/h"),h=i("S48P"),d=i("rh3U"),p=window.t("Market open"),f=window.t("Pre-market"),_=window.t("Post-market"),m=window.t("Market closed"),v=window.t("Holiday"),g=window.t("All's well — Market is open."),y=window.t("Morning. Market is open for pre-market trading."),b=window.t("Evening. Market is open for post-market trading."),S=window.t("Time for a walk — this market is closed."),w=window.t("Market is currently on holiday. Lucky them."),P=new Map([["market",new Map([["small",o],["large",s]])],["pre_market",new Map([["small",u],["large",h]])],["post_market",new Map([["small",l],["large",c]])],["out_of_session",new Map([["small",n],["large",n]])],["holiday",new Map([["small",a],["large",a]])]]),C=new Map([["market",d.marketStatusOpen],["pre_market",d.marketStatusPre],["post_market",d.marketStatusPost],["out_of_session",d.marketStatusClose],["holiday",d.marketStatusHoliday]]),T=new Map([["market",p],["pre_market",f],["post_market",_],["out_of_session",m],["holiday",v]]),x=new Map([["market",p],["pre_market",f],["post_market",_],["out_of_session",m],["holiday",v]]),I=new Map([["market",r.colorsPalette["color-market-open"]],["pre_market",r.colorsPalette["color-pre-market"]],["post_market",r.colorsPalette["color-post-market"]],["out_of_session",r.colorsPalette["color-market-closed"]],["holiday",r.colorsPalette["color-market-holiday"]]]),E=new Map([["market",[g]],["pre_market",[y]],["post_market",[b]],["out_of_session",[S]],["holiday",[w]]]),L=new Map([["market",null],["pre_market",null],["post_market",null],["out_of_session",null],["holiday",null]])},kyOc:function(e,t,i){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.substr(1)}i.r(t),i.d(t,"capitalizeFirstLetter",(function(){return r}))},l4sv:function(e,t,i){"use strict";i.r(t),i.d(t,"HorizontalLineRenderer",(function(){return s}));var r=i("VdBB"),n=i("jFln"),o=i("gAom"),s=function(){function e(){this._data=null,this._hitTest=new r.HitTestResult(r.HitTestResult.REGULAR)}return e.prototype.setData=function(e){this._data=e},e.prototype.setHitTest=function(e){this._hitTest=e},e.prototype.hitTest=function(e){if(null===this._data||!1===this._data.visible)return null;var t=Math.abs(e.y-this._data.y)<=3+this._data.linewidth/2,i=void 0===this._data.left||this._data.left-e.x<=3,r=void 0===this._data.right||e.x-this._data.right<=3;return t&&i&&r?this._hitTest:null},e.prototype.draw=function(e,t){if(null!==this._data&&!1!==this._data.visible&&!(this._data.y<-this._data.linewidth/2||this._data.y>t.cssHeight+this._data.linewidth/2)){var i=t.pixelRatio;e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=Math.max(1,Math.floor(this._data.linewidth*i)),void 0!==this._data.linestyle&&Object(n.setLineStyle)(e,this._data.linestyle);var r=void 0!==this._data.left?Math.max(this._data.left,0):0,s=void 0!==this._data.right?Math.min(this._data.right,t.cssWidth):t.cssWidth,a=Math.round(this._data.y*i),l=Math.floor(r*i),c=Math.ceil(s*i);Object(o.drawHorizontalLine)(e,a,l,c)}},e}()},
l7mP:function(e,t,i){"use strict";function r(e,t,r){void 0===t&&(t={}),Promise.all([i.e("vendors_embed"),i.e(2),i.e(19),i.e(37),i.e(39),i.e(46),i.e(50),i.e(90),i.e(322),i.e(0),i.e(42),i.e("take-chart-image-dialog-impl")]).then(function(n){i("fMMV").getImageOfChart(e,t,r)}.bind(null,i)).catch(void 0)}function n(e,t,r){void 0===t&&(t={}),Promise.all([i.e("vendors_embed"),i.e(2),i.e(19),i.e(37),i.e(39),i.e(46),i.e(50),i.e(90),i.e(322),i.e(0),i.e(42),i.e("take-chart-image-dialog-impl")]).then(function(n){i("fMMV").getImageOfChartSilently(e,t,r)}.bind(null,i)).catch(void 0)}i.r(t),i.d(t,"getImageOfChart",(function(){return r})),i.d(t,"getImageOfChartSilently",(function(){return n}))},lCO3:function(e,t,i){"use strict";i.r(t),i.d(t,"Version",(function(){return n}));var r=i("Eyy1"),n=function(){function e(e,t){this._major=e,this._minor=t}return e.prototype.major=function(){return this._major},e.prototype.minor=function(){return this._minor},e.prototype.isZero=function(){return 0===this._major&&0===this._minor},e.prototype.toString=function(){return this._major+"."+this._minor},e.prototype.compareTo=function(e){return this._major<e._major?-1:this._major>e._major?1:this._minor<e._minor?-1:this._minor>e._minor?1:0},e.prototype.isLess=function(e){return this.compareTo(e)<0},e.prototype.isLessOrEqual=function(e){return this.compareTo(e)<=0},e.prototype.isEqual=function(e){return 0===this.compareTo(e)},e.prototype.isGreater=function(e){return this.compareTo(e)>0},e.prototype.isGreaterOrEqual=function(e){return this.compareTo(e)>=0},e.parse=function(t){if(t instanceof e)return new e(t.major(),t.minor());if("number"==typeof t)return Object(r.assert)(Math.floor(t)===t,"Version should not be a float number"),new e(t,0);if("string"==typeof t){var i=t.split(".");if(1===i.length){var n=parseInt(i[0],10);return Object(r.assert)(!isNaN(n),"Bad version string: "+t),new e(n,0)}if(2===i.length){n=parseInt(i[0],10);Object(r.assert)(!isNaN(n),"Bad version string: "+t);var o=parseInt(i[1],10);return Object(r.assert)(!isNaN(o),"Bad version string: "+t),new e(n,o)}throw new Error("Bad version string (one dot expected): "+t)}throw new Error("Bad version: "+t)},e.ZERO=new e(0,0),e}()},lJvs:function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("vAx0").ESDPaneView,o=i("fTGZ").BarsMarksContainer,s=i("mMWL"),a=i("FQhm"),l=i("6xeX").Tooltip,c=i("zDbI").CHART_FONT_FAMILY;function u(e){o.call(this,e);var t=this;s.hideMarksOnBars().subscribe(this,(function(){t._properties.visible.setValue(!s.hideMarksOnBars().value())})),this._paneView=new h(e,this)}function h(e,t){n.call(this,e,t,void 0,void 0),this.source=t,this.stylesCache={},this.templatesCache={},this._lollipops={},this._createLollipops()}inherit(u,o),u.prototype._initialize=function(e){this._properties.visible.setValue(!0)},u.prototype.userEditEnabled=function(){return!1},u.prototype._constructor="UserDefinedTimescaleMarks",u.prototype._plateViewData=function(e){return{text:e.text}},u.prototype.onClicked=function(e){a.emit("onTimescaleMarkClick",e.id)},u.prototype.clearMarks=function(){
o.prototype.clearMarks.call(this),this._paneView.clearCaches(),this.onNeedRepaint.fire()},u.prototype._getData=function(e){var t=this._model.mainSeries().symbolInfo();if(t){var i=this.roundRange(this._rangeDifference(e)),r=this,n=this._model.mainSeries().properties().interval.value();ChartApiInstance.getTimescaleMarks(t,i.start,i.end,(function(t){t.forEach((function(e){r._marks[e.id]=e}),r),r._loadedRange=r._rangeUnion(e,r._loadedRange),r.onNeedRepaint.fire()}),n)}},u.prototype.updatePlateData=function(e,t){return t.barWidth=this.barWidth(),t.text=e.text,t.tooltipMargin=-1*Math.max(e.minSize/2,.4*this.barWidth()),t},u.prototype.hasContextMenu=function(){return!1},u.prototype.paneViews=function(){return this._properties.visible.value()?[this._paneView]:[]},u.prototype.onClickOutside=function(){this._paneView.onClickOutside()},inherit(h,n),h.prototype._createLollipops=function(){var e=this.source._model.timeScale(),t=n.prototype._getY.call(this.source),i=this.source._model.lastHittestData(),o=this;Object.keys(this.source._marks).forEach((function(n){var s=this.source._marks[n],a=s.id;o._lollipops[a]={id:a,basePoint:new r(e.indexToCoordinate(e.timePointToIndex(s.tickmark))+1,t),hovered:i&&i.id===a||a===o.getLastClickedLollipopId(),barY:null,label:s.label,color:s.color,items:s.tooltip,tooltip:o._lollipops.hasOwnProperty(a)?o._lollipops[a].tooltip:new l,visible:!0}}),this)},h.prototype.clearCaches=function(){this.closeTooltips(),this.clearLastClicked(),this._lollipops={}},h.prototype.update=function(){this._createLollipops(),this._invalidated=!1},h.prototype.renderer=function(){return this.update(),n.prototype.renderer.call(this)},h.prototype._generateTemplateStyle=function(e,t,i){var r=e+t+i;if(!(r in this.stylesCache)){var n="default"!==e,o={strokeStyle:t,lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:1.5,fillStyle:n?t:"white",fillCircle:n,strokeStyle:"#E2745B",text:{label:i,strokeStyle:n?"white":t,font:"normal 12px "+c}}};this.stylesCache[r]=o}return this.stylesCache[r]},h.prototype.getTemplate=function(e,t){var i=e+t.color+t.label;return i in this.templatesCache||(this.templatesCache[i]=this.createTemplate(this._generateTemplateStyle(e,t.color,t.label))),this.templatesCache[i]},h.prototype.getStyle=function(e,t){return this._generateTemplateStyle(e,t.color,t.label)},h.prototype.createText=function(e,t){"string"==typeof e.items?t.addTextLine(e.items):Array.isArray(e.items)&&e.items.forEach((function(e){t.addTextLine(e)}))},h.prototype.hasTooltip=function(e){return!!e.tooltip&&e.tooltip.length},e.exports=u},"lNN+":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Triangle Pattern");function s(e,t){this._constructor="LineToolTrianglePattern";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Jej9").LineToolTrianglePatternPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}
inherit(s,r),s.prototype.pointsCount=function(){return 4},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Triangle Pattern"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("EFc4").Points5PatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetooltrianglepattern",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolTrianglePattern=s},lTLF:function(e,t,i){"use strict";i.r(t);var r=i("Hr11"),n=function(){function e(e,t){if(this._base=e,this._integralDividers=t,Object(r.isBaseDecimal)(this._base))this._fractionalDividers=[2,2.5,2];else{this._fractionalDividers=[];for(var i=this._base;1!==i;){if(i%2==0)this._fractionalDividers.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this._fractionalDividers.push(2),this._fractionalDividers.push(2.5),i/=5}if(this._fractionalDividers.length>100)throw new Error("something wrong with base")}}}return e.prototype.tickSpan=function(e,t,i){for(var n=0===this._base?0:1/this._base,o=Math.pow(10,Math.max(0,Math.ceil(Object(r.log10)(e-t)))),s=0,a=this._integralDividers[0];;){var l=Object(r.greaterOrEqual)(o,n,1e-9)&&o>n+1e-9,c=Object(r.greaterOrEqual)(o,i*a,1e-9),u=Object(r.greaterOrEqual)(o,1,1e-9);if(!(l&&c&&u))break;o/=a,a=this._integralDividers[++s%this._integralDividers.length]}if(o<=n+1e-9&&(o=n),o=Math.max(1,o),this._fractionalDividers.length>0&&Object(r.equal)(o,1,1e-9))for(s=0,a=this._fractionalDividers[0];Object(r.greaterOrEqual)(o,i*a,1e-9)&&o>n+1e-9;)o/=a,a=this._fractionalDividers[++s%this._fractionalDividers.length];return o},e}();i.d(t,"PriceTickMarkBuilder",(function(){return o}));var o=function(){function e(e,t,i,r){this._marks=[],this._priceScale=e,this._base=t,this._coordinateToLogicalFunc=i,this._logicalToCoordinateFunc=r}return e.prototype.base=function(){return this._base},e.prototype.setBase=function(e){if(e<0)throw new Error("base < 0");this._base=e},e.prototype.tickSpan=function(e,t,i){if(void 0===i&&(i=0),e<t)throw new Error("high < low");var r=this._priceScale.height(),o=(e-t)*this._tickMarkHeight()/r,s=new n(this._base,[2,2.5,2]),a=new n(this._base,[2,2,2.5]),l=new n(this._base,[2.5,2,2]),c=0,u=s.tickSpan(e,t,o);u>i&&(c=u);var h=a.tickSpan(e,t,o);h>i&&(c=Math.min(c,h));var d=l.tickSpan(e,t,o);return d>i&&(c=Math.min(c,d)),c>0?c:e-t},e.prototype.rebuildTickMarks=function(){var e=this._priceScale;if(this._marks=[],!e.isEmpty()){var t=e.mainSource();if(null!==t){var i=t.firstValue();null===i&&(i=0);var r=e.height(),n=this._coordinateToLogicalFunc(r-1,i),o=this._coordinateToLogicalFunc(0,i),s=Math.max(n,o),a=Math.min(n,o);if(s!==a){var l=this.tickSpan(s,a),c=s%l;c+=c<0?l:0;for(var u=s>=a?1:-1,h=null,d=e.formatter(),p=NaN,f=s-c;f>a;f-=l){f===p&&(l=this.tickSpan(s,a,l)),p=f;var _=this._logicalToCoordinateFunc(f,i);null!==h&&Math.abs(_-h)<this._tickMarkHeight()||(this._marks.push({coord:_,
label:d.format(f)}),h=_,e.isLog()&&(l=this.tickSpan(f*u,a)))}}}}},e.prototype.marks=function(){return this._marks},e.prototype._fontHeight=function(){return this._priceScale.fontSize()},e.prototype._tickMarkHeight=function(){return Math.ceil(2.5*this._fontHeight())},e}()},lUQk:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("7ktv"),o=i("tc+8"),s=i.n(o),a=i("n5al"),l=i("kcTO"),c=i("wOSo"),u=i("Eyy1"),h=i("LxhU"),d=i("KcY8"),p=i("Kxc7"),f=i("oXaB"),_=i("+GxX");function m(e){return e<10?"0"+e:e.toString()}var v=p.enabled("countdown"),g=Object(_.isFeatureEnabled)("server-side-countdown"),y=[0,1,2,3,9,8,10],b=p.enabled("force_exchange_as_title"),S={alwaysShowGlobalLast:!1,visibleOnHistoryOnly:!1,showCountdown:!0,showSymbolLabel:!0},w=function(e){function t(t,i,n){var o=e.call(this)||this;return o._previousCountdown="",o._source=t,o._model=i,o._options=Object(r.__assign)(Object(r.__assign)({},S),n),o}return Object(r.__extends)(t,e),t.prototype.updateCountdown=function(){this._countdownText()!==this._previousCountdown&&(this.update(),this._model.updateSourcePriceScale(this._source))},t.prototype._getSource=function(){return this._source},t.prototype._getModel=function(){return this._model},t.prototype._isCountdownEnabled=function(){return v},t.prototype._countdownText=function(){if(g){var e=this._source.barCloseTime();return null===e?"":function(e,t){void 0===t&&(t=Date.now()/1e3);var i=Math.ceil(e-t);if(i<=0)return"";if(i<3600){var r=Math.floor(i/60),n=Math.ceil(i%60);return m(r)+":"+m(n)}if(i<86400){var o=Math.floor(i/3600);i%=3600;r=Math.floor(i/60);i%=60;n=Math.ceil(i);return m(o)+":"+m(r)+":"+m(n)}var s=Math.floor(i/86400);return i%=86400,24===(o=Math.ceil(i/3600))&&(o=0,s+=1),s+"d "+o+"h"}(e,this._currentTime()/1e3)}var t=h.Interval.parse(this._source.interval());if(t.isDWM()||t.isSeconds()&&1===t.multiplier())return"";var i=this._source.data().bars().last();if(null===i)return"";var r=1e3*Object(u.ensure)(i.value[0]),n=h.Interval.parse(this._source.interval()).inMilliseconds(),o=r.valueOf()+n,s=Math.round((o-this._currentTime())/1e3);if(s<=0)return"";var a=null;(s=Math.min(s,n/1e3))>=3600&&(a=m(Math.floor(s/3600))),s%=3600;var l=m(Math.floor(s/60));s%=60;var c=m(Math.floor(s));return null!==a?a+":"+l+":"+c:l+":"+c},t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1;var r=this._source.properties();if(12!==r.style.value()){if(this._options.visibleOnHistoryOnly){var n=this._model.timeScale().visibleBarsStrictRange(),o=this._source.data().last();if(null===n||null===o||n.contains(o.index))return}var s=this._model.properties().scalesProperties,a=s.showSeriesLastValue.value(),l=v&&this._options.showCountdown&&-1!==y.indexOf(r.style.value())&&r.showCountdown.value(),c=this._options.showSymbolLabel&&s.showSymbolLabels.value(),u=s.seriesLastValueMode.value()===f.PriceAxisLastValueMode.LastPriceAndPercentageValue,h=this._source.lastValueData(void 0,this._options.alwaysShowGlobalLast);if(!h.noData){var d=8===r.style.value();if((a||l||c)&&d&&r.haStyle.showRealLastPrice.value()){
var p=this._source.lastValueData(void 0,!1),_=this._source.lastValueData(void 0,!0);p.noData||_.noData||p.index!==_.index||(a=!1,l=!1,c=!1)}if(a||l){var m=this._axisFirstLineText(h,a,u),g=l?this._countdownText():"";this._previousCountdown=g,0===m.length?(e.text=g,e.secondLine=""):(e.text=m,e.secondLine=g),0===m.length&&0===g.length||(e.visible=!0)}(c||u)&&(t.text=this._paneText(h,a,c,u),t.visible=t.text.length>0),i.background=this._source.priceLineColor(h.color),i.color=this.generateTextColor(i.background),i.coordinate=h.coordinate,i.floatCoordinate=h.floatCoordinate}}},t.prototype._paneText=function(e,t,i,r){var n="";if(b){var o=this._source.symbolInfo();n+=o?o.exchange+" ":""}else if(i){var s=this._source.getSymbolName();s.length>40&&(s=s.substr(0,37)+"..."),n+=s+" "}return t&&r&&(n+=this._source.priceScale().isPercentage()?e.formattedPriceAbsolute:e.formattedPricePercentage),n.trim()},t.prototype._axisFirstLineText=function(e,t,i){return t?i?this._source.priceScale().isPercentage()?e.formattedPricePercentage:e.formattedPriceAbsolute:e.text:""},t.prototype._currentTime=function(){return Date.now()+1e3*this._source.serverTimeOffset()},t}(d.a),P=function(e){function t(t,i){var r=e.call(this)||this;return r._source=t,r._model=i,r}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1;var r=this._source;if(this._model.properties().scalesProperties.showSeriesPrevCloseValue.value()&&!r.isDWM()){var n=r.prevClose();if(null!==n){var o=this._source.properties().prevClosePriceLineColor.value();i.background=o,i.color=this.generateTextColor(o),i.coordinate=n.coordinate,e.text=n.text,e.visible=!0}}},t}(d.a),C=i("TmNs"),T=i("k9/m"),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.lastPrice=function(){return this._getSource().data().lastProjectionPrice},t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1;var r=this._getModel(),n=this._getSource(),o=n.priceScale(),s=r.timeScale(),a=this.lastPrice();if(!s.isEmpty()&&!o.isEmpty()&&void 0!==a){var l=s.visibleBarsStrictRange();if(null!==l){var c=l.firstBar(),h=l.lastBar(),d=n.data(),p=d.search(h,T.PlotRowSearchMode.NearestLeft);if(null!==p){var _=n.nearestIndex(c,T.PlotRowSearchMode.NearestRight);if(void 0!==_){var m=n.model().properties().scalesProperties,v=Object(u.ensureNotNull)(d.valueAt(_))[TradingView.CLOSE_PLOT],g=i.background,y=m.showSeriesLastValue.value(),b=!1,S=!1,w=!1,P=n.lastValueData(TradingView.CLOSE_PLOT,!1),C=n.properties();if(8===C.style.value()&&C.haStyle.showRealLastPrice.value()){var x=n.lastValueData(TradingView.CLOSE_PLOT,!0);if(x.noData||x.color===i.background||(g=x.color),!x.noData&&!P.noData){var I=x.index===P.index;b=I&&m.showSymbolLabels.value(),S=m.seriesLastValueMode.value()===f.PriceAxisLastValueMode.LastPriceAndPercentageValue,y=y&&I,w=I&&this._isCountdownEnabled()&&C.showCountdown.value()}}else{g=n.barColorer().barStyle(p.index,!0).barColor}i.background=g,i.color=this.generateTextColor(g),
i.coordinate=o.priceToCoordinate(a,v),e.visible=y||w,P.noData||(P.text=o.formatPrice(a,v),P.formattedPriceAbsolute=o.formatPriceAbsolute(a),P.formattedPricePercentage=o.formatPricePercentage(a,v),e.text=this._axisFirstLineText(P,y,S),e.secondLine=w?this._countdownText():"",t.text=this._paneText(P,y,b,S)),t.visible=b||y&&S}}}}},t}(w),I=i("KtbP");i.d(t,"SeriesBase",(function(){return L}));var E=p.enabled("price_scale_always_last_bar_value"),L=function(e){function t(t){var i=e.call(this,t)||this;i.extendedHours=new s.a,i._paneView=null,i._priceStep=null,i._symbolInfo=null,i._isPrePostMarketPricesForbiddenProperty=new s.a(!0),i._prevClosePriceAxisView=null,i._base=100,i._pointValue=1,i._formatter=new l.PriceFormatter(i._base),i._ignoreMinMoveFormatter=new l.PriceFormatter(i._base),i._ignoreMinMovePriceStep=null,i._lastBarCloseTime=null,i._quotesProvider=new c.QuotesProvider,i._quotesProvider.quotesUpdate().subscribe(i,i._onQuotesUpdate);var r=new w(i,t,{alwaysShowGlobalLast:!0});i._priceAxisView=r;var n=null;E||(n=new w(i,t,{visibleOnHistoryOnly:!0,showSymbolLabel:!1,showCountdown:!1,alwaysShowGlobalLast:!1})),i._priceLinePriceAxisView=new C.SeriesPriceLineAxisView(i);var o=new x(i,t);return i._priceAxisViews=[r,o],null!==n&&i._priceAxisViews.push(n),i._prevClosePriceAxisView=new P(i,t),i._priceAxisViews.unshift(i._prevClosePriceAxisView),i._panePriceAxisView=new I.PanePriceAxisView(r,i,t),i._historyPricePanePriceAxisView=null!==n?new I.PanePriceAxisView(n,i,t):null,i._projectionPriceAxisView=new I.PanePriceAxisView(o,i,t),i._labelPaneViews=[i._panePriceAxisView,i._projectionPriceAxisView],null!==i._historyPricePanePriceAxisView&&i._labelPaneViews.push(i._historyPricePanePriceAxisView),i}return Object(r.__extends)(t,e),t.prototype.destroy=function(){this._quotesProvider.quotesUpdate().unsubscribeAll(this)},t.prototype.quotesProvider=function(){return this._quotesProvider},t.prototype.labelPaneViews=function(){return this._labelPaneViews},t.prototype.symbolInfo=function(){return this._symbolInfo},t.prototype.symbolResolved=function(){return this.dataEvents().symbolResolved()},t.prototype.formatter=function(e){return void 0===e&&(e=!0),e?this._formatter:this._ignoreMinMoveFormatter},t.prototype.priceStep=function(e){return void 0===e&&(e=!0),e?this._priceStep:this._ignoreMinMovePriceStep},t.prototype.hasClosePrice=function(){return 12!==this.properties().style.value()},t.prototype.nearestValue=function(e,t,i){var r=this.nearestData(e,i);return r?r.value[t]:void 0},t.prototype.autoScaleInfo=function(e,t){var i=this.priceRange(e,t);if(null===this._paneView)return{range:i};var r=this._paneView;return{range:i,topPixelMargin:r.topPixelMargin?r.topPixelMargin():void 0,bottomPixelMargin:r.bottomPixelMargin?r.bottomPixelMargin():void 0}},t.prototype.isPrePostMarketPricesForbiddenProperty=function(){return this._isPrePostMarketPricesForbiddenProperty},t.prototype.base=function(){return this._base},t.prototype.pointValue=function(){return this._pointValue},t.prototype.barCloseTime=function(){return this._lastBarCloseTime},
t.prototype.currency=function(){return this.properties().currencyId.value()||null},t.prototype.setCurrency=function(e){this.properties().currencyId.setValue(e)},t.prototype.symbolSource=function(){return this},t.prototype.open=function(e){var t=this.data().valueAt(e);return t&&t[1]},t.prototype.high=function(e){var t=this.data().valueAt(e);return t&&t[2]},t.prototype.low=function(e){var t=this.data().valueAt(e);return t&&t[3]},t.prototype.close=function(e){var t=this.data().valueAt(e);return t&&t[4]},t.prototype.moveItem=function(e,t,i){if(10===this.style()&&0===t){var r=this.priceScale(),n=this.properties().baselineStyle,o=r.height(),s=100-e.y/o*100,a=s<0?0:Math.round(10*s)/10;n.baseLevelPercentage.setValue(Math.max(Math.min(a,100),0))}},t.prototype._isExtendedHoursAllowed=function(){return Boolean(this._symbolInfo&&-1!==["stock","index","futures"].indexOf(this._symbolInfo.type))},t.prototype._recreateFormatter=function(){this._formatter=Object(a.createSeriesFormatter)(this.symbolInfo(),this.properties().minTick.value()),this._ignoreMinMoveFormatter=Object(a.createSeriesFormatter)(this.symbolInfo(),this.properties().minTick.value(),!0),this.priceScale()&&this.priceScale().updateFormatter(),this._formatterChanged.fire()},t.prototype._recreatePriceStep=function(){var e=Object(a.getSeriesPriceFormattingState)(this.symbolInfo()),t=e.minMove,i=e.priceScale,r=t/i;this._ignoreMinMovePriceStep=1/i,this._priceStep!==r&&(this._priceStep=r,this._priceStepChanged.fire())},t.prototype._recreatePriceFormattingDependencies=function(){this._recreateFormatter(),this._recreatePriceStep()},t.prototype._updateIsPrePostMarketPricesForbiddenProperty=function(){var e=!this.isDWM()&&this.extendedHours.value()||!this._isExtendedHoursAllowed();this._isPrePostMarketPricesForbiddenProperty.setValue(e)},t}(n.PriceDataSource)},"lW/c":function(e,t,i){"use strict";i.r(t);i("YFKU");var r=i("hY0g"),n=i.n(r),o=i("HySD"),s=function(){function e(e){var t=this;this._document=e,this.isFullscreen=new n.a;var i=function(){for(var e=["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","mozFullScreenElement","msFullscreenElement"],i=0;i<e.length;i++){var r=e[i];if(r in t._document){t.isFullscreen.setValue(!!t._document[r]);break}}};i();for(var r=0,o=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];r<o.length;r++){var s=o[r];e.addEventListener(s,i,!1)}}return e.prototype.enter=function(){for(var e=this._document.documentElement,t=0,i=["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"];t<i.length;t++){var r=i[t];if("function"==typeof e[r]){e[r]();break}}this.isFullscreen.setValue(!0)},e.prototype.exit=function(){for(var e=this._document,t=0,i=["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"];t<i.length;t++){var r=i[t];if("function"==typeof e[r]){e[r]();break}}this.isFullscreen.setValue(!1)},e}(),a=i("GLdp"),l=i("mNbo"),c=i("Eyy1");i.d(t,"Root",(function(){return u}));var u=function(){function e(e){var t=this
;this._updateDocumentHeight=function(e){"visual"===t._viewportType&&t._window.document.documentElement.style.setProperty("height",e+"px","important")},this._window=e,this._fullscreenApi=new s(e.document),this._viewportType=!Object(l.isOnMobileAppPage)("any")&&this._window.visualViewport?"visual":"quirks","visual"===this._viewportType?this._viewport=Object(c.ensureDefined)(this._window.visualViewport):this._viewport=this._window;var i=this._layoutSizeSensor=this._window.document.createElement("div");i.id="layout-size-sensor",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.right="0",i.style.bottom="0",i.style.pointerEvents="none",i.style.visibility="hidden",this._initFullscreen()}return e.prototype.allocate=function(){var e=this;this.free();var t=this._window.document,i=t.createElement("div");i.classList.add("js-rootresizer__contents"),i.style.position="relative",i.style.width="100%",i.style.height="100%",t.body.insertAdjacentElement("afterbegin",i),t.body.insertAdjacentElement("afterbegin",this._layoutSizeSensor),this._visibilityApi=new a.a(this._window.document);var r={alive:new n.a(!0),fullscreenable:new n.a(!0),container:new n.a(i),width:new n.a,height:new n.a,availWidth:new n.a,availHeight:new n.a,visible:this._visibilityApi.isVisible,fullscreen:this._fullscreenApi.isFullscreen,remove:function(){r.alive.setValue(!1)},attach:function(){r.alive.setValue(!1),e._window.close()},requestFullscreen:function(){e._requestFullscreen()},exitFullscreen:function(){e._exitFullscreen()}};return r.alive.subscribe((function(t){t||r!==e._area||e.free()})),this._area=r,this._resizeHandler=function(){var t=e._width(r)||800,i=e._height(r)||600;r.availHeight.setValue(i),r.availWidth.setValue(t),r.height.setValue(i),r.width.setValue(t)},this._area.height.subscribe(this._updateDocumentHeight,{callWithLast:!0}),this._resizeHandler(),this._viewport.addEventListener("resize",this._resizeHandler),new o.ResizerDetacherState(r).bridge()},e.prototype.free=function(){if(this._resizeHandler&&(this._viewport.removeEventListener("resize",this._resizeHandler),this._resizeHandler=void 0),this._visibilityApi&&(this._visibilityApi.destroy(),this._visibilityApi=void 0),this._area){var e=this._area;this._area=void 0,e.height.unsubscribe(this._updateDocumentHeight),e.alive.setValue(!1);var t=e.container.value(),i=null==t?void 0:t.parentElement;i&&(i.removeChild(t),i.removeChild(this._layoutSizeSensor))}},e.prototype._height=function(e){return"visual"===this._viewportType?this._layoutSizeSensor.clientHeight:e.container.value().clientHeight},e.prototype._width=function(e){return e.container.value().clientWidth},e.prototype._requestFullscreen=function(){this._fullscreenApi.enter()},e.prototype._exitFullscreen=function(){this._fullscreenApi.exit()},e.prototype._initFullscreen=function(){var e=this;this._fullscreenApi.isFullscreen.subscribe((function(t){e._resizeHandler&&e._resizeHandler()}))},e}()},ljrM:function(e,t,i){"use strict";i.r(t),i.d(t,"timeFrames",(function(){return r}));i("YFKU");var r={"1d":{text:window.t("1D"),value:{value:"1D",
type:"period-back"},targetResolution:"1",description:window.t("%d day",{plural:"%d days",count:1}).replace("%d","1")},"5d":{text:window.t("5D"),value:{value:"5D",type:"period-back"},targetResolution:"5",description:window.t("%d day",{plural:"%d days",count:5}).replace("%d","5")},"1m":{text:window.t("1M"),value:{value:"1M",type:"period-back"},targetResolution:"30",description:window.t("%d month",{plural:"%d months",count:1}).replace("%d","1")},"3m":{text:window.t("3M"),value:{value:"3M",type:"period-back"},targetResolution:"60",description:window.t("%d month",{plural:"%d months",count:3}).replace("%d","3")},"6m":{text:window.t("6M"),value:{value:"6M",type:"period-back"},targetResolution:"120",description:window.t("%d month",{plural:"%d months",count:6}).replace("%d","6")},ytd:{text:window.t("YTD"),value:{value:"YTD",type:"period-back"},targetResolution:"1D"},"12m":{text:window.t("1Y"),value:{value:"12M",type:"period-back"},targetResolution:"1D",description:window.t("%d year",{plural:"%d years",count:1}).replace("%d","1")},"60m":{text:window.t("5Y"),value:{value:"60M",type:"period-back"},targetResolution:"1W",description:window.t("%d year",{plural:"%d years",count:5}).replace("%d","5")},all:{text:window.t("All"),value:{value:"ALL",type:"period-back"},targetResolution:"1M"}}},lt96:function(e,t,i){"use strict";i.r(t),i.d(t,"exchanges",(function(){return n}));i("YFKU");var r=i("JUKA"),n=r},lxNp:function(e,t,i){"use strict";i.r(t);var r=i("/3z9"),n=i("d700"),o=i("hY0g"),s=i.n(o),a=function(){function e(){var e=this;this._groups=[],this._pressedKeys=new s.a(0),this._keyDownListener=function(t){if(!t.defaultPrevented){var i=Object(r.hashFromEvent)(t);if(e._pressedKeys.setValue(i),!Object(n.a)(i,t.target))for(var o=e._groups.length;o-- >0;){var s=e._groups[o];if(!s.isDisabled()){if(s.handleHotkey(i,t))return;if(s.modal)return}}}},this._keyUpListener=function(t){var i=Object(r.hashFromEvent)(t);e._pressedKeys.setValue(i)},this._blurEvent=function(){e._pressedKeys.setValue(0)},this._mouseEvent=function(t){var i=Object(r.modifiersFromEvent)(t),n=255&e._pressedKeys.value();e._pressedKeys.setValue(i|n)}}return e.prototype.listen=function(e){e.addEventListener("keydown",this._keyDownListener),e.addEventListener("keyup",this._keyUpListener),e.addEventListener("blur",this._blurEvent),e.addEventListener("mousemove",this._mouseEvent)},e.prototype.unlisten=function(e){e.removeEventListener("keydown",this._keyDownListener),e.removeEventListener("keyup",this._keyUpListener),e.removeEventListener("blur",this._blurEvent),e.removeEventListener("mousemove",this._mouseEvent)},e.prototype.registerGroup=function(e){this._groups.push(e)},e.prototype.unregisterGroup=function(e){for(var t=this._groups.length;t--;)this._groups[t]===e&&this._groups.splice(t,1)},e.prototype.promoteGroup=function(e){for(var t=this._groups.length-1,i=this._groups.length;i--;){if(this._groups[i]===e)return void(i!==t&&(this._groups.splice(i,1),this._groups.splice(t,0,e)));this._groups[i].modal&&(t=i-1)}},e.prototype.pressedKeys=function(){return this._pressedKeys},e
}(),l=i("JWMC"),c=function(){function e(e,t){this._group=e,this.hotkey=t.hotkey,this.handler=t.handler,this.desc=t.desc,this.element=t.element||null,t.isDisabled?"function"==typeof t.isDisabled?this.isDisabled=t.isDisabled:this.isDisabled=function(){return!0}:this.isDisabled=function(){return!1}}return e.prototype.destroy=function(){this._group&&(this._group.remove(this),this._group=null)},e}(),u=function(){function e(e,t){this._actions=[],this._manager=e,this.modal=!(!t||!t.modal),t&&(this.desc=t.desc),t&&t.isDisabled?"function"==typeof t.isDisabled?this.isDisabled=t.isDisabled:this.isDisabled=function(){return!0}:this.isDisabled=function(){return!1},this._manager.registerGroup(this)}return e.prototype.add=function(e){var t=new c(this,e);return this._actions.push(t),t},e.prototype.remove=function(e){for(var t=this._actions.length;t-- >0;)this._actions[t]===e&&this._actions.splice(t,1)},e.prototype.handleHotkey=function(e,t){for(var i=this._actions.length;i-- >0;){var n=this._actions[i];if(n.hotkey===e&&((!n.element||t.target&&n.element.contains(t.target))&&!n.isDisabled()))return n.handler(t),t.preventDefault(),Object(l.trackEvent)("Keyboard Shortcuts",Object(r.humanReadableHash)(e)),!0}return!1},e.prototype.promote=function(){this._manager.promoteGroup(this)},e.prototype.destroy=function(){this._actions.length=0,this._manager.unregisterGroup(this)},e}();i.d(t,"pressedKeys",(function(){return d})),i.d(t,"createGroup",(function(){return p})),i.d(t,"registerWindow",(function(){return f})),i.d(t,"unregisterWindow",(function(){return _})),i.d(t,"Modifiers",(function(){return r.Modifiers}));var h=new a,d=h.pressedKeys();function p(e){return new u(h,e)}function f(e){h.listen(e)}function _(e){h.unlisten(e)}f(window)},"m/cY":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("tc+8"),n=i.n(r);function o(e){return new n.a(e)}},mE5r:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("ikwP"),s=i("gAom"),a=i("H0vP"),l=i("aO4+"),c=i("XlJ7"),u=i("EsvI"),h=i("OsWk"),d=i("rL76"),p=i("zDbI"),f=parseInt(d.labelheight),_=parseInt(d.bottommargin);function m(e){return e/11}var v=function(){function e(){this._wrapper=document.createElement("div"),this._element=document.createElement("div"),this._labelElement=document.createElement("div"),this._gearElement=document.createElement("div"),this._currentScale=1,this._info=null,this._mode="auto",this._wrapper.appendChild(this._element),this._wrapper.classList.add(d.wrapper),this._element.classList.add(d.label),this._labelElement.className=d.symbol,this._element.appendChild(this._labelElement),this._gearElement.className=d.gear,this._gearElement.innerHTML=h,this._element.appendChild(this._gearElement)}return e.prototype.getElement=function(){return this._wrapper},e.prototype.setMode=function(e){this._mode!==e&&(this._mode=e)},e.prototype.align=function(e,t){var i=m(t);Math.abs(i-this._currentScale)>.1&&(this._currentScale=i,Math.abs(this._currentScale-1)>.1?this._element.style.transform="scale("+this._currentScale+")":(this._currentScale=1,
this._element.style.transform=""))},e.prototype.drawLabelForScreenshot=function(e,t){if(null!==this._info&&"gear"!==this._mode){var i=Object(c.makeFont)(t.fontSize,p.CHART_FONT_FAMILY);e.fillStyle=u.themes[t.theme].getThemedColor("color-price-axis-label-back"),e.globalAlpha=.5,e.beginPath();var r=m(t.fontSize)*f/2,n=Object(l.point)(t.offset+t.width/2,t.height/2);e.arc(n.x,n.y,r,0,2*Math.PI,!0),e.fill(),e.globalAlpha=1,e.fillStyle=u.themes[t.theme].getThemedColor("color-price-axis-label-text"),e.textAlign="center",e.font=i,e.textBaseline="middle",e.fillText(this._info.label,n.x,n.y)}},e.prototype.setAxisNameInfo=function(e){this._info=e,null!==e&&(this._labelElement.textContent=e.label)},e.height=function(e){return(f+_)*e},e}(),g=i("aIyQ"),y=i.n(g),b=i("S8xo"),S=i("5VQP"),w=i("CPmC"),P={enableTooltip:!0,showLabels:!0,enableMenu:!0,enableHighlight:!0},C=function(){function e(e,t,i,n,s){var a=this;this._invalidated=!0,this._size=new o.Size(0,0),this._offset=0,this._axisInfo=null,this._onLabelHovered=new y.a,this._highlighted=!1,this._labelMode="auto",this._fixedLabelMode=null,this._canvasConfiguredHandler=function(){return a.update()},this._isLeft="left"===e,this._rendererOptionsProvider=n.rendererOptionsProvider,this._sourcesTitlesProvider=n.sourcesTitlesProvider,this._contextMenuItemsProvider=n.contextMenuItemsProvider,this._backgroundBasedTheme=n.backgroundBasedTheme,this._getBackgroundTopColor=n.getBackgroundTopColor,this._getBackgroundBottomColor=n.getBackgroundBottomColor,this._properties=t,this._axisInfo=i,this._labelOptions=Object(r.__assign)(Object(r.__assign)({},P),s),this._properties.lineColor.subscribe(this,this._onPropertyChanged),this._cell=document.createElement("div"),this._cell.classList.add(d["price-axis-stub"]),this._labelOptions.enableTooltip&&this._cell.classList.add("apply-common-tooltip"),this._cell.style.width="25px",this._cell.style.height="100%",this._cell.style.position="absolute",this._cell.style.left="0",this._cell.style.overflow="hidden",this._labelOptions.showLabels?(this._label=new v,this._label.setAxisNameInfo(this._axisInfo),this._cell.appendChild(this._label.getElement()),this._labelOptions.enableTooltip&&Object(w.b)(this._cell,"text",(function(e){return a._tooltipContent()}))):this._label=null,this._mouseEventHandler=new b.MouseEventHandler(this._cell,this,{treatHorzTouchDragAsPageScroll:!0,treatVertTouchDragAsPageScroll:!0}),this._canvasBinding=Object(o.createBoundCanvas)(this._cell,new o.Size(16,16)),this._canvasBinding.subscribeCanvasConfigured(this._canvasConfiguredHandler);var l=this._canvasBinding.canvas;l.style.position="absolute",l.style.left="0",l.style.top="0"}return e.prototype.destroy=function(){this._canvasBinding.unsubscribeCanvasConfigured(this._canvasConfiguredHandler),this._canvasBinding.destroy(),this._properties.lineColor.unsubscribe(this,this._onPropertyChanged),this._mouseEventHandler.destroy(),$(this._cell).remove()},e.prototype.mouseEnterEvent=function(e){this._mouseOrTouchEnterEvent(e)},e.prototype.touchStartEvent=function(e){this._mouseOrTouchEnterEvent(e)},
e.prototype.mouseLeaveEvent=function(e){this._mouseOrTouchLeaveEvent(e)},e.prototype.touchEndEvent=function(e){this._mouseOrTouchLeaveEvent(e)},e.prototype.mouseClickEvent=function(e){this._mouseClickOrTapEvent(e)},e.prototype.tapEvent=function(e){this._mouseClickOrTapEvent(e)},e.prototype.update=function(){this._invalidated=!0},e.prototype.getElement=function(){return this._cell},e.prototype.onLabelHovered=function(){return this._onLabelHovered},e.prototype.setSizeAndOffset=function(e,t){if(e.w<0||e.h<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(e));this._size.equals(e)||(this._size=e,this._canvasBinding.resizeCanvas({width:e.w,height:e.h}),this._cell.style.width=e.w+"px",this._cell.style.minWidth=e.w+"px",this._cell.style.height=e.h+"px",this._invalidated=!0),this._offset!==t&&(this._offset=t,this._cell.style.left=t+"px")},e.prototype.paint=function(e){if((!(e<a.InvalidationLevel.Full)||this._invalidated)&&0!==this._size.w&&0!==this._size.h){this._invalidated=!1;var t=Object(o.getContext2D)(this._canvasBinding.canvas);this._drawBackground(t,this._canvasBinding.pixelRatio),this._drawBorder(t,this._canvasBinding.pixelRatio)}},e.prototype.hardResetCanvas=function(){Object(o.hardResizeCanvas)(this._canvasBinding,this._size)},e.prototype.getWidth=function(){return this._size.w},e.prototype.getImage=function(){var e=Object(o.createDisconnectedCanvas)(document,this._size),t=Object(o.getPrescaledContext2D)(e),i=this._getBackgroundTopColor(),r=this._getBackgroundBottomColor();return i===r?Object(o.clearRect)(t,0,0,this._size.w,this._size.h,i):Object(s.clearRectWithGradient)(t,0,0,this._size.w,this._size.h,i,r),t.drawImage(this._canvasBinding.canvas,0,0,this._size.w,this._size.h),null!==this._label&&this._label.drawLabelForScreenshot(t,{offset:0,width:this._size.w,height:this._size.h,fontSize:this._properties.fontSize.value(),theme:this._backgroundBasedTheme.value()}),e},e.prototype.setLabelMode=function(e){e!==this._labelMode&&(this._labelMode=e,null!==this._label&&this._label.setMode(e),this._cell.classList.toggle(d["fixed-gear"],"gear"===e),this._cell.classList.toggle(d["fixed-symbol"],"symbol"===e),this._cell.classList.toggle("apply-common-tooltip","symbol"!==e&&this._labelOptions.enableTooltip))},e.prototype._setHighlighted=function(e){this._labelOptions.enableHighlight&&(this._onLabelHovered.fire(e),this._highlighted!==e&&(this._highlighted=e,this._invalidated=!0))},e.prototype._onPropertyChanged=function(){this._invalidated=!0},e.prototype._drawBorder=function(e,t){var i=this._size.w;e.save(),e.fillStyle=this._properties.lineColor.value();var r=Math.max(1,Math.floor(this._rendererOptionsProvider.options().borderSize*t)),n=this._isLeft?Math.floor(i*t)-r:0,o=Math.ceil(this._size.h*t);e.fillRect(n,0,r,o+1),e.restore()},e.prototype._drawBackground=function(e,t){var i=Math.ceil(t*this._size.w),r=Math.ceil(t*this._size.h),n=this._getBackgroundTopColor(),a=this._getBackgroundBottomColor();if(n===a?Object(o.clearRect)(e,0,0,i+1,r+1,n):Object(s.clearRectWithGradient)(e,0,0,i+1,r+1,n,a),
this._highlighted){var l=u.themes[this._backgroundBasedTheme.value()].getThemedColor("color-price-axis-highlight");Object(o.fillRect)(e,0,0,i+1,r+1,l),e.globalAlpha=1}},e.prototype._tooltipContent=function(){return this._sourcesTitlesProvider().join("\n")},e.prototype._mouseOrTouchEnterEvent=function(e){null!==this._label&&"symbol"!==this._labelMode&&this._labelOptions.enableHighlight&&this._setHighlighted(!0)},e.prototype._mouseOrTouchLeaveEvent=function(e){"symbol"!==this._labelMode&&this._setHighlighted(!1)},e.prototype._mouseClickOrTapEvent=function(e){var t=this;e.preventDefault(),null===this._fixedLabelMode&&"symbol"!==this._labelMode&&this._labelOptions.enableMenu&&this._labelOptions.showLabels?(this._fixedLabelMode=this._labelMode,this.setLabelMode("gear"),S.ContextMenuManager.createMenu(this._contextMenuItemsProvider(),{statName:"PriceScaleLabelContextMenu"},(function(){t.setLabelMode(Object(n.ensureNotNull)(t._fixedLabelMode)),t._fixedLabelMode=null})).then((function(e){return e.show((function(e,i){var r=t._cell.getBoundingClientRect();return{clientX:t._isLeft?r.left:r.right-e,clientY:r.top-Math.min(i,r.top),overrideHeight:r.top<i?r.top:void 0}}),t.getElement(),!0)}))):S.ContextMenuManager.hideAll()},e}(),T=i("Daqx");i.d(t,"PriceAxisesContainer",(function(){return x}));var x=function(){function e(e,t,i,n,s){this._axises=[],this._stubs=[],this._size=new o.Size(0,0),this._onLabelHovered=new y.a,this._scalesProperties=e,this._priceAxisWidgetFactory=i,this._rendererOptionsProvider=n.rendererOptionsProvider,this._titlesProvider=n.titlesProvider,this._stubContextMenuProvider=n.stubContextMenuProvider,this._backgroundBasedTheme=n.backgroundBasedTheme,this._getBackgroundTopColor=n.getBackgroundTopColor,this._getBackgroundBottomColor=n.getBackgroundBottomColor,this._labelsOptions=Object(r.__assign)(Object(r.__assign)({},P),s);var a=this._scalesProperties.childs();this._stubProperties={lineColor:a.lineColor,fontSize:a.fontSize},this._side=t,this._cell=document.createElement("td"),this._cell.classList.add("chart-markup-table","price-axis-container"),this._cell.style.width="25px",this._cell.style.position="relative"}return e.prototype.destroy=function(){this.setScales([],0,0,0)},e.prototype.onLabelHovered=function(){return this._onLabelHovered},e.prototype.setScales=function(e,t,i,r){for(var o=this;e.length>this._axises.length&&this._axises.length<t;){var s=Object(T.a)(this._side,this._axises.length),a=this._priceAxisWidgetFactory(this._side,this._rendererOptionsProvider,this._scalesProperties,s,this._backgroundBasedTheme);this._axises.push(a),this._cell.appendChild(a.getElement())}for(;e.length<this._axises.length;){a=Object(n.ensureDefined)(this._axises.pop());this._cell.removeChild(a.getElement()),a.destroy()}for(var l=0;l<this._axises.length;++l)this._axises[l].setPriceScale(e[l]);for(var c=t-e.length,u=Math.max(0,c);this._stubs.length>u;){var h=Object(n.ensureDefined)(this._stubs.pop());h.onLabelHovered().unsubscribeAll(this),this._cell.removeChild(h.getElement()),h.destroy()}for(var d=function(){
var e=p._labelsOptions.showLabels?Object(T.a)(p._side,p._stubs.length):null,t=p._stubs.length,i=new C(p._side,p._stubProperties,e,p._stubParams(t),p._labelsOptions);i.onLabelHovered().subscribe(p,(function(t){o._labelsOptions.showLabels&&o._labelsOptions.enableHighlight&&o._onLabelHovered.fire(Object(n.ensureNotNull)(e),t)})),p._stubs.push(i),p._cell.appendChild(i.getElement())},p=this;this._stubs.length<c;)d();var f=this._labelsOptions.enableMenu;1===r?this._stubs.forEach((function(e,t){return e.setLabelMode(f?"gear":"symbol")})):this._stubs.forEach((function(e,t){return e.setLabelMode(t<i&&f?"auto":"symbol")}))},e.prototype.getElement=function(){return this._cell},e.prototype.optimalWidths=function(){return this._axises.map((function(e){return e.optimalWidth()}))},e.prototype.setSizes=function(e,t){this._size=new o.Size(t.reduce((function(e,t){return e+t}),0),e),this._cell.style.width=this._size.w+"px",this._cell.style.minWidth=this._size.w+"px",this._cell.style.height=this._size.h+"px",t.length!==this._axises.length+this._stubs.length&&Object(n.assert)(t.length===this._axises.length+this._stubs.length,"Widgets count should be the same as widths one");var i=0;this._forEachWidgetFromLeft((function(r,n){var s=t[n];r.setSizeAndOffset(new o.Size(s,e),i),i+=s}))},e.prototype.update=function(){this._axises.forEach((function(e){return e.update()})),this._stubs.forEach((function(e){return e.update()}))},e.prototype.paint=function(e){this._axises.forEach((function(t,i){return t.paint(e(i))})),this._stubs.forEach((function(t,i){return t.paint(e(i))}))},e.prototype.paintStubs=function(e){this._stubs.forEach((function(t){return t.paint(e)}))},e.prototype.hardResetCanvas=function(){this._axises.forEach((function(e){return e.hardResetCanvas()})),this._stubs.forEach((function(e){return e.hardResetCanvas()}))},e.prototype.restoreDefaultCursor=function(){this._axises.forEach((function(e){return e.restoreDefaultCursor()}))},e.prototype.getWidth=function(){return this._size.w},e.prototype.findAxisWidgetForScale=function(e){var t=this._axises.find((function(t){return t.priceScale()===e}));return void 0===t?null:t},e.prototype.getScreenshotData=function(){var e=this._getImage();return{content:e.toDataURL(),canvas:e,contentHeight:this._size.h,contentWidth:this._size.w}},e.prototype.getImage=function(){return this._getImage()},e.prototype.slotsCount=function(){return this._axises.length+this._stubs.length},e.prototype.highlightPriceAxisByLabel=function(e){this._axises.forEach((function(t){var i=t.axisInfo();t.setHighlighted(null!==i&&i.equals(e))}))},e.prototype._stubParams=function(e){var t=this;return{rendererOptionsProvider:this._rendererOptionsProvider,backgroundBasedTheme:this._backgroundBasedTheme,sourcesTitlesProvider:function(){return t._titlesProvider(t._side,e)},contextMenuItemsProvider:function(){return t._stubContextMenuProvider(t._side,e)},getBackgroundTopColor:this._getBackgroundTopColor,getBackgroundBottomColor:this._getBackgroundBottomColor}},e.prototype._getImage=function(){
var e=this,t=Object(o.createDisconnectedCanvas)(document,this._size),i=Object(o.getPrescaledContext2D)(t),r=0;return this._forEachWidgetFromLeft((function(t,n){var o=t.getWidth();0!==o&&(i.drawImage(t.getImage(),r,0,o,e._size.h),r+=o)})),t},e.prototype._forEachWidgetFromLeft=function(e){for(var t=Object(r.__spreadArrays)(this._axises,this._stubs),i="left"===this._side,n=i?t.length-1:0,o=i?-1:t.length,s=i?-1:1,a=n;a!==o;a+=s)e(t[a],a,t)},e}()},"mKT+":function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("hayr"),o=i("mpWx");function s(e,t,r,s){var a=Object(n.loadPropertyPages)(),l=function(n,o){Promise.all([i.e("vendors_embed"),i.e(15),i.e(60),i.e(91),i.e(92),i.e(120),i.e(121),i.e(122),i.e(155),i.e(335),i.e(44),i.e(48),i.e(57),i.e(83),i.e(105),i.e(107),i.e(143),i.e("editobjectdialog")]).then(function(o){a.then((function(){var o=new(0,i("Kqsj").EditObjectDialog)(e,t,s);o.show(r),n(o)}))}.bind(null,i)).catch(o)};return Object(o.retries)((function(e){return new Promise(l)}),2)}var a=i("QloM");function l(e,t,r,n,o){return Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(6),i.e(8),i.e(12),i.e(15),i.e(18),i.e(20),i.e(21),i.e(22),i.e(27),i.e(30),i.e(35),i.e(34),i.e(40),i.e(73),i.e(74),i.e(77),i.e(96),i.e(104),i.e(125),i.e(128),i.e(139),i.e(158),i.e(206),i.e(211),i.e(284),i.e(0),i.e(7),i.e(9),i.e(16),i.e(25),i.e(32),i.e(44),i.e(48),i.e(68),i.e(71),i.e(66),i.e(97),i.e(105),i.e(113),i.e(135),i.e(174),i.e(186),i.e("new-edit-object-dialog")]).then(i.bind(null,"Y5hB")).then((function(i){var r=new(0,i.EditObjectDialogRenderer)(e,t,n,o);return r.show(),r}))}var c=i("3ClC"),u=i("W5mg"),h=null;var d=i("Kxc7"),p=null;var f,_=i("USzt"),m=i("CW80");i.d(t,"resolveAndShowEditObjectDialog",(function(){return g}));var v=((f={})[a.TabNames.style]="symbol",f[a.TabNames.legend]="legend",f[a.TabNames.scales]="scales",f[a.TabNames.trading]="trading",f[a.TabNames.events]="events",f[a.TabNames.text]="text",f);function g(e,t,n,o,a){return void 0===n&&(n={}),Object(r.__awaiter)(this,void 0,void 0,(function(){var f,g;return Object(r.__generator)(this,(function(r){return f=o.activeChartWidget.value(),(g=d.enabled("test_force_old_properties_dialog"))&&(n.doNotCloseOnBgClick=!0),g||Object(c.isStudy)(e)&&function(e){return e.metaInfo().inputs.filter(u.a).some((function(e){return"bar_time"===e.type}))}(e)||Object(m.isLineTool)(e)&&Object(m.isMTPredictionTool)(e)?[2,s(e,t,n,a)]:Object(m.isStudyLineTool)(e)&&function(e){return[_.a].some((function(t){return e instanceof t}))}(e)?[2,f.propertiesDefinitionsForSource(e).then((function(i){return null!==i?l(e,t,0,a,i):null}))]:Object(c.isStudy)(e)&&function(e){return"Overlay"===e.metaInfo().shortId}(e)||Object(m.isLineTool)(e)?[2,f.propertiesDefinitionsForSource(e).then((function(r){if(null!==r){var o=n.tabName,s=o&&v[o];return function(e){
return Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(6),i.e(8),i.e(12),i.e(15),i.e(18),i.e(20),i.e(21),i.e(22),i.e(27),i.e(30),i.e(35),i.e(34),i.e(40),i.e(73),i.e(77),i.e(96),i.e(104),i.e(128),i.e(139),i.e(206),i.e(365),i.e(0),i.e(7),i.e(9),i.e(16),i.e(25),i.e(32),i.e(44),i.e(48),i.e(68),i.e(71),i.e(66),i.e(97),i.e(105),i.e(113),i.e(135),i.e(186),i.e("source-properties-editor")]).then(i.bind(null,"CbZh")).then((function(t){var i=new(0,t.SourcePropertiesEditorRenderer)(e);return null!==p&&p.hide(),i.show(),p=i,i}))}({propertyPages:r,model:t,source:e,activePageId:s})}return null}))]:Object(c.isStudy)(e)&&!Object(c.isESDStudy)(e)?[2,l(e,t,0,a)]:[2,f.generalPropertiesDefinitions().then((function(t){var r=n.tabName,s=Object(c.isESDStudy)(e)?"events":r&&v[r];return function(e){return Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(6),i.e(8),i.e(12),i.e(18),i.e(20),i.e(21),i.e(22),i.e(27),i.e(30),i.e(35),i.e(34),i.e(40),i.e(73),i.e(77),i.e(104),i.e(139),i.e(232),i.e(304),i.e(0),i.e(7),i.e(9),i.e(25),i.e(32),i.e(71),i.e(66),i.e(97),i.e(135),i.e("general-chart-properties-dialog")]).then(i.bind(null,"PI1I")).then((function(t){var i=new(0,t.GeneralChartPropertiesDialogRenderer)(e);return null!==h&&h.hide(),i.show(),h=i,i}))}({chartWidgetCollection:o,propertyPages:t,activePageId:s,model:f.model()})}))]}))}))}},mMWL:function(e,t,i){"use strict";i.r(t),i.d(t,"toolIsCursor",(function(){return d})),i.d(t,"toolIsMeasure",(function(){return p})),i.d(t,"resetToCursor",(function(){return f})),i.d(t,"lockTimeAxisTime",(function(){return b})),i.d(t,"tool",(function(){return S})),i.d(t,"cursorTool",(function(){return w})),i.d(t,"isToolEditingNow",(function(){return P})),i.d(t,"createdLineTool",(function(){return C})),i.d(t,"continuedLineTool",(function(){return T})),i.d(t,"cancelledLineTool",(function(){return x})),i.d(t,"beenSetLineToolLastPoint",(function(){return I})),i.d(t,"startedMovingLineTool",(function(){return E})),i.d(t,"movedLineTool",(function(){return L})),i.d(t,"finishedMovingLineTool",(function(){return O})),i.d(t,"startedChangingLineTool",(function(){return A})),i.d(t,"changedLineTool",(function(){return M})),i.d(t,"finishedChangingLineTool",(function(){return k})),i.d(t,"removedLineTool",(function(){return D})),i.d(t,"finishedLineTool",(function(){return R})),i.d(t,"changedLineStyle",(function(){return V})),i.d(t,"copiedLineTool",(function(){return B})),i.d(t,"restoredLineTool",(function(){return N})),i.d(t,"restoredLineToolState",(function(){return F})),i.d(t,"createLineTool",(function(){return W})),i.d(t,"continueLineTool",(function(){return H})),i.d(t,"cancelLineTool",(function(){return U})),i.d(t,"setLineToolLastPoint",(function(){return z})),i.d(t,"startMovingLineTool",(function(){return G})),i.d(t,"moveLineTool",(function(){return q})),i.d(t,"finishMovingLineTool",(function(){return Y})),i.d(t,"startChangingLineTool",(function(){return X})),i.d(t,"changeLineTool",(function(){return K})),i.d(t,"finishChangingLineTool",(function(){return J})),i.d(t,"removeLineTool",(function(){
return Q})),i.d(t,"finishLineTool",(function(){return Z})),i.d(t,"changeLineStyle",(function(){return ee})),i.d(t,"copyLineTool",(function(){return te})),i.d(t,"restoreLineTool",(function(){return ie})),i.d(t,"restoreLineToolState",(function(){return re})),i.d(t,"init",(function(){return se})),i.d(t,"runOnDrawingStateReady",(function(){return ae})),i.d(t,"properties",(function(){return le})),i.d(t,"hideAllDrawings",(function(){return ce})),i.d(t,"lockDrawings",(function(){return ue})),i.d(t,"hideMarksOnBars",(function(){return he})),i.d(t,"drawOnAllCharts",(function(){return de})),i.d(t,"lockTimeAxis",(function(){return pe}));var r=i("Eyy1"),n=i("m/cY"),o=i("Ocx9"),s=i("hY0g"),a=i.n(s),l=i("aIyQ"),c=i.n(l),u=i("Vdly"),h=i("FQhm");function d(e){return"cursor"===e||"arrow"===e||"dot"===e}function p(e){return"measure"===e}function f(e){if((void 0===e&&(e=!1),!e&&_)&&_.childs().stayInDrawingMode.value())return;S.setValue(w.value())}var _=null,m=null,v=null,g=null,y=null,b=new a.a,S=new a.a,w=new a.a,P=new a.a(!1),C=new c.a,T=new c.a,x=new c.a,I=new c.a,E=new c.a,L=new c.a,O=new c.a,A=new c.a,M=new c.a,k=new c.a,D=new c.a,R=new c.a,V=new c.a,B=new c.a,N=new c.a,F=new c.a;function j(e,t){var i=t||{value:!1};return function(t){i.value||(i.value=!0,e.fire(t),i.value=!1)}}var W=j(C),H=j(T),U=j(x),z=j(I),G=j(E),q=j(L),Y=j(O),X=j(A),K=j(M),J=j(k),Q=j(D),Z=j(R),$={value:!1},ee=j(V,$),te=j(B,$),ie=j(N),re=j(F),ne=!1,oe=[];function se(){ne||(S.setValue(u.getValue("chart.cursorPreference","cursor")),S.subscribe((function(e){return d(e)&&w.setValue(e)}),{callWithLast:!0}),w.subscribe((function(e){e&&u.setValue("chart.cursorPreference",e)})),_=new o.DefaultProperty("drawings"),m=Object(n.a)(),v=Object(n.a)(),g=Object(n.a)(),y=Object(n.a)(),m.setValue(!1),v.setValue(!1),g.setValue(!1),y.setValue(!1),S.subscribe((function(){Object(h.emit)("onSelectedLineToolChanged")})),ne=!0,oe.forEach((function(e){return e()})),oe=[])}function ae(e){ne?e():oe.push(e)}function le(){return Object(r.ensureNotNull)(_)}function ce(){return Object(r.ensureNotNull)(m)}function ue(){return Object(r.ensureNotNull)(v)}function he(){return Object(r.ensureNotNull)(g)}function de(){return le().childs().drawOnAllCharts}function pe(){return Object(r.ensureNotNull)(y)}},mNEU:function(e,t,i){"use strict";e.exports=function(e,t,r,n,o,s,a,l,c){var u=new(0,i("dDSx").ChartUndoModel)(e,t,r,n,o,s,a,l,c);return u.model().fullUpdate(),u}},mNbo:function(e,t,i){"use strict";function r(e){var t=new URLSearchParams(location.search);return("new"===e||"any"===e)&&"true"===t.get("mobileapp_new")||"new"!==e&&"true"===t.get("mobileapp")}function n(e){var t;r("new")&&((t=new URL(e,location.href)).searchParams.set("mobileapp_new","true"),e=t.toString());r("old")&&((t=new URL(e,location.href)).searchParams.set("mobileapp","true"),e=t.toString());return e}i.r(t),i.d(t,"isOnMobileAppPage",(function(){return r})),i.d(t,"urlWithMobileAppParams",(function(){return n}))},mPvX:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolsGroupModel",(function(){return s}))
;var r=i("aIyQ"),n=i.n(r),o=i("UqOQ"),s=function(){function e(e){var t=this;this._onChanged=new n.a,this._groups=[],this._groups=e||[],this._groups.forEach((function(e){e.onChanged().subscribe(null,(function(i){return t._onChanged.fire(e.id,i)}))}))}return e.prototype.groups=function(){return this._groups.filter((function(e){return e.isActualSymbol()}))},e.prototype.createGroup=function(e,t,i){var r=this;t=t||this._generateNextName();var n=new o.a(e,t,i);this._groups.push(n),n.onChanged().subscribe(null,(function(){return r._onChanged.fire(n.id)}));var s={visibilityChanged:!1,lockedChanged:!1,titleChanged:!1,isActualIntervalChanged:!1,affectedLineTools:e.map((function(e){return e.id()}))};return this._onChanged.fire(n.id,s),n},e.prototype.addGroup=function(e){var t=this;this._groups.push(e),e.onChanged().subscribe(null,(function(i){return t._onChanged.fire(e.id,i)})),this._onChanged.fire(e.id)},e.prototype.removeGroup=function(e){var t=this._groups.findIndex((function(t){return t.id===e.id}));this._groups.splice(t,1),this._onChanged.fire(e.id)},e.prototype.groupForId=function(e){return this._groups.find((function(t){return t.id===e}))||null},e.prototype.groupForLineTool=function(e){return this._groups.find((function(t){return t.containsLineTool(e)}))||null},e.prototype.removeLineTools=function(e){var t=this;this._groups.forEach((function(t){return t.excludeLineTools(e)})),this._groups.filter((function(e){return 0===e.lineTools().length})).forEach((function(e){return t.removeGroup(e)}))},e.prototype.state=function(e){return{groups:(e?this._groups.filter((function(e){return e.isActualSymbol()})):this._groups).map((function(e){return e.state()}))}},e.prototype.onChanged=function(){return this._onChanged},e.fromState=function(t,i){for(var r=[],n=0,s=i.groups;n<s.length;n++){var a=s[n],l=o.a.fromState(t,a);null!==l&&r.push(l)}return new e(r)},e.prototype._generateNextName=function(){for(var e=new Set(this.groups().map((function(e){return e.name()}))),t=1;;t++){var i="Group "+t,r="Group_"+t;if(!e.has(i)&&!e.has(r))return i}},e}()},mYjs:function(e,t,i){"use strict";function r(e,t){Promise.all([i.e("vendors_embed"),i.e(60),i.e(91),i.e(57),i.e(83),i.e("change-interval-dialog")]).then(i.t.bind(null,"MuC6",7)).then((function(i){new i.ChangeIntervalDialog(e).show(t)}))}i.r(t),i.d(t,"showChangeIntervalDialog",(function(){return r}))},mZrn:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("FBuY"),o=i("JWMC"),s=i("BHQF"),a=i("eI3D"),l=(i("bSeV"),i("pAD3"),i("e3/o")),c=i("Wt0y"),u=i("VVxS"),h=i("txPx"),d=Object(h.getLogger)("Common.Evercookie");var p=Object(h.getLogger)("Common.Evercookie"),f=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,_=function(){function e(){var e=this;this._cookieName="tv_ecuid",this._env=null,this._ec=null,this.check=function(){if(!e._isEcNotAvailable()&&u.TVLocalStorage.getItem("_tv_ec_ignore_username")!==window.user.username){var t=window.user.id;e._getEcUids().catch((function(e){
p.logWarn("Error thrown inside getEcUids(). Leave evercookie data untouched. User: "+window.user.username+" ("+window.user.id+")\nActual error: "+e)})).then((function(r){if(void 0!==r){var n=r.localEcUid,o=r.oldRemoteEcUid,a=r.remoteEcUids,c=r.isLocalEcUidOld;n&&o!==n&&!c&&f.test(n)||(n=Object(l.guid)(),e._getEc().set(e._cookieName,n));var h=function(e){e.subscription_canceled&&Promise.all([i.e("vendors_embed"),i.e(2),i.e(3),i.e(31),i.e(39),i.e(229),i.e(359),i.e(0),i.e(182),i.e("trial-canceled")]).then(i.bind(null,"jmzw")).then((function(e){return e.createTrialCanceledDialog()})),void 0!==e.is_suspicious&&(t===window.user.id&&e.is_suspicious?u.TVLocalStorage.setItem("is_suspicious","1"):u.TVLocalStorage.removeItem("is_suspicious"))};a&&0!==a.length||t!==window.user.id?-1===a.indexOf(n)&&t===window.user.id&&function(e){var t=new FormData;return t.append("new_ecuid",e),Object(s.fetch)("/accounts/ch-ecuid/",{body:t,credentials:"include",method:"POST"}).then((function(e){if(e.ok)return e.json().catch((function(e){d.logWarn("Error in reponse.json() of /accounts/ch-ecuid/. User: "+window.user.username+" ("+window.user.id+")\nActual error: "+e)}));throw new Error("Unable to change remote ecuids. Response was not OK")}))}(n).then(h):function(e){var t=new FormData;return t.append("first_ecuid",e),Object(s.fetch)("/accounts/set-ecuid/",{body:t,credentials:"include",method:"POST"}).then((function(e){if(e.ok)return e.json().catch((function(e){d.logWarn("Error in reponse.json() of /accounts/set-ecuid/. User: "+window.user.username+" ("+window.user.id+")\nActual error: "+e)}));throw new Error("Unable to set remote ecuids. Response was not OK")}))}(n).then(h)}else p.logWarn("getEcUids() returned no data. Leave evercookie data untouched. User: "+window.user.username+" ("+window.user.id+")")})).catch((function(e){p.logError(e.message+" User: "+window.user.username+" ("+window.user.id+")")}))}},this._isEcNotAvailable()||(this._env=Object(c.environment)(),Object(c.isDebug)()&&(this._cookieName+="_"+this._env))}return e.prototype._isEcNotAvailable=function(){return TradingView.onWidget&&TradingView.onWidget()||!window.user},e.prototype._getEc=function(){return this._ec||(this._ec=new window.evercookie({domain:Object(c.isProd)()?".tradingview.com":location.hostname,lso:!1})),this._ec},e.prototype._getLocalEcUid=function(){var e=this;return new Promise((function(t){e._getEc().get(e._cookieName,(function(e){t(e)}))}))},e.prototype._getEcUids=function(){var e=this;return new Promise((function(t,i){var r;e._getLocalEcUid().then((function(e){return r=e,function(e){return new Promise((function(t,i){var r=new FormData;e&&r.append("local_ecuid",e),Object(s.fetch)("/accounts/get-ecuid/",{body:r,credentials:"include",method:"POST"}).then((function(e){if(e.ok)return e.json().catch((function(e){d.logWarn("Error in reponse.json() of /accounts/get-ecuid/. User: "+window.user.username+" ("+window.user.id+")\nActual error: "+e)}));throw new Error("Unable to get remote ecuids. Response was not OK")})).then((function(e){t(e)})).catch((function(e){i(e)}))
}))}(e)})).then((function(e){if(void 0===e)throw new Error("getRemoteEcUids() returned no response. User: "+window.user.username+" ("+window.user.id+")");t({isLocalEcUidOld:e.is_local_ecuid_old,localEcUid:r,oldRemoteEcUid:e.ecuid_old,remoteEcUids:e.ecuids})})).catch((function(e){i(e)}))}))},e}(),m=(i("P5fv"),i("YFKU"),i("gbZD")),v=i("9tJu"),g=i("brCa"),y=i("+h+m"),b=i("Cu4q");$("body").on("click",".js-follow-user",(function(e){var t=this,n=$(e.currentTarget),o=n.data("id"),s=n.is(".js-follow-user--followed")?"Unfollow":"Follow",a={authorId:o};window.runOrSignIn((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(t){return n.is(".self")||(e=n.is(".js-follow-user--followed")?0:1,Object(y.protectedFetch)("/social/follow-the-user/",{follow:e,targetId:o},"follow").then((function(e){"max_followings_exceed"!==e.error_code?e.error?Object(g.showNoticeDialog)({content:e.error,title:e.errorTitle||$.t("Error")}):($(".js-follow-user-"+o).toggleClass("js-follow-user--followed").toggleClass("i-checked"),Object(m.trackActionFollow)("User",s,a)):Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(14),i.e(26),i.e(17),i.e(24),i.e(203),i.e("create-dialog")]).then(function(e){var t=(0,i("YDhE").createDialog)({type:"modal",closeOnEsc:!1,closeOnOutsideClick:!1,closeButton:!1,width:546,contentWrapTemplate:'\n\t\t\t\t\t\t\t\t\t\t<div class="tv-dialog__section tv-dialog__section--no-border">\n\t\t\t\t\t\t\t\t\t\t\t<div class="tv-text"></div>\n\t\t\t\t\t\t\t\t\t\t</div>',content:'\n\t\t\t\t\t\t\t\t\t\t<div class="tv-dialog__header">\n\t\t\t\t\t\t\t\t\t\t\t<div class="tv-dialog__header-logo">'+b+'</div>\n\t\t\t\t\t\t\t\t\t\t\t<h2 class="tv-dialog__header-title">'+$.t("Unfollow some authors")+'</h2>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p class="tv-text__font tv-text__font--size_semilarge">\n\t\t\t\t\t\t\t\t\t\t\t\t'+$.t("Sorry, follow limit reached and you cannot follow more authors without removing some first.")+"\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>",actions:[{name:"goToProfile",type:"primary",text:$.t("Go to Profile"),key:13},{addClass:"tv-button--no-padding i-float_left",name:"cancel",type:"link",text:$.t("No thanks"),method:"close"}]});t.on("action:goToProfile",(function(e){window.location.replace(Object(v.getUserProfilePath)(window.user,{page:v.ProfilePages.FollowingPeople})),e.destroy()})),t.open()}.bind(null,i)).catch(void 0)})).catch((function(e){Object(g.showNoticeDialog)({content:e.message,title:$.t("Oops!")})}))),[2]}))}))}),{source:"Follow user",verifiedPhoneRequired:!0})}));var S=i("dm8g"),w=i("xlKU"),P=(i("fvKe"),i("qFKp")),C=!1;if(Object(P.isMac)()&&P.isSafari&&!P.CheckMobile.iOS()&&!Object(P.haveEverReceivedTouchEvent)()){var T=function(){Object(P.markAsReceivedTouch)(),document.removeEventListener("touchstart",T),
C&&Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(14),i.e(26),i.e(17),i.e(24),i.e(203),i.e("create-dialog")]).then(i.bind(null,"YDhE")).then((function(e){var t=e.createDialog({type:"popup",destroyOnClose:!0,width:400,title:window.t("Please reload the page"),content:window.t("Reload your page to ensure that your chart is working as it should. Would you like to reload the page now?"),actions:[{name:"not-now",type:"default",text:window.t("Continue"),method:"close"},{name:"reload-chart",type:"primary",text:window.t("Reload")}]});t.on("action:reload-chart",(function(){window.location.reload()})),t.open()}))};document.addEventListener("touchstart",T,!1)}var x=i("aIyQ"),I=i.n(x),E=i("FIi8"),L=i("ULlu"),O=i("qocr");$(document).ajaxSend((function(e,t,i){i.crossDomain&&!i.forceLanguageHeader||(window.locale?t.setRequestHeader("X-Language",window.locale):console.warn("window.locale is not defined"))}));var A,M,k,D=i("Z9Tc");function R(){if(window.initData.lfs){var e=document.getElementsByClassName("js-admin-warning")[0];document.body.removeChild(e)}var t=!0;[/^\/chart\//,/^\/share-your-love\//].forEach((function(e){e.test(window.location.pathname)&&(t=!1)})),t&&window.location.reload()}function V(e,t){window.TVDialogs&&window.TVDialogs.signModal&&window.TVDialogs.signModal.close(),window.user=Object(E.deepExtend)({},e),window.TradingView.changeLoginState(!0),"function"==typeof t&&window.TVDialogs&&window.TVDialogs.signModal?window.TVDialogs.signModal.on("signinSuccess",(function(){t()})):"function"==typeof t&&t()}function B(e){window.iframeAuthWidget&&!1===window.user.profile_data_filled&&(window.iframeAuthWidget.preventClose=!0);var t=window.user.available_offers||{},r=document.documentElement;(r.classList.toggle("is-authenticated",window.is_authenticated),r.classList.toggle("is-not-authenticated",!window.is_authenticated),r.classList.toggle("is-pro",window.is_authenticated&&window.user&&!!window.user.is_pro),r.classList.toggle("is-not-pro",!(window.is_authenticated&&window.user&&window.user.is_pro)),r.classList.toggle("is-trial",window.is_authenticated&&window.user&&!!window.user.is_trial),r.classList.toggle("is-not-trial",!(window.is_authenticated&&window.user&&window.user.is_trial)),r.classList.toggle("is-not-trial-available",void 0===t[a.OFFERS.trial]),r.classList.toggle("is-trial-available",void 0!==t[a.OFFERS.trial]),window.TVSettings&&window.TVSettings.sync(window.user.settings),window.is_authenticated)?(Array.from(document.querySelectorAll(".js-trial-days-left")).forEach((function(e){Object(L.html)(e,window.user.trial_days_left_text||"")})),e&&!1!==window.user.profile_data_filled||void 0===k||k.check(),!1===window.user.profile_data_filled&&(Object(O.whenDocumentReady)((function(){Object(w.showSignModal)({mode:"create-account",noCloseButton:!!window.user.social_registration,dontCloseOnEsc:!!window.user.social_registration,nameFields:!window.user.social_registration,noUsernameField:!window.user.social_registration,newUserHandler:!!window.user.social_registration}).then((function(e){
window.iframeAuthWidget&&(window.iframeAuthWidget.preventClose=!1,e.on("destroy",(function(){window.iframeAuthWidget.postClose()})))})),window.user.social_registration?(i.e(305).then(function(e){i("DptE")("Social")}.bind(null,i)).catch(i.oe),delete window.user.social_registration):n.TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:window.is_authenticated,user:window.user}))}),!0),Object(o.trackEvent)("Conversion","First login"),delete window.user.profile_data_filled),window.TradingView.setTrialAvailiable(void 0!==t[a.OFFERS.trial])):(Object.keys(t).forEach((function(e){delete t[e]})),window.user={username:"Guest",following:"0",followers:"0",ignore_list:{},available_offers:t},u.TVLocalStorage.removeItem("trial_availiable"))}(A=window.loginStateChange?window.loginStateChange:window.loginStateChange=new I.a).subscribe(null,B),n.TVXWindowEvents.on("loginStateChange",(function(e){var t=JSON.parse(e);window.user=t.user,window.is_authenticated=!!t.is_authenticated,A.fire()})),n.TVXWindowEvents.on("signOut",(function(){R()})),M={},window.crossTabSyncUserAttr=function(e){var t={};e instanceof Array?e.forEach((function(e){t[e]=window.user[e]})):t[e]=window.user[e],n.TVXWindowEvents.emit("user-obj-changed",JSON.stringify(t))},n.TVXWindowEvents.on("user-obj-changed",(function(e){var t,i=JSON.parse(e);for(t in i)i.hasOwnProperty(t)&&(window.user[t]=i[t],(M[t]||[]).forEach((function(e){e.fire(i[t])})))})),window.TradingView.changeLoginState=function(e){window.is_authenticated=!!e,n.TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:window.is_authenticated,user:window.user})),A.fire()},window.loginUser=V,window.addEventListener("storage",(function(e){"login_user"===e.key&&null!==e.newValue&&V(JSON.parse(e.newValue))})),window.TradingView.signOut=function(){var e=Object(r.__assign)({},window.user);Object(s.fetch)("/accounts/logout/",{method:"POST",headers:{accept:"html"},credentials:"same-origin"}).then((function(){window.TradingView.changeLoginState(!1),n.TVXWindowEvents.emit("signOut"),R()})).catch((function(){window.user=e,window.TradingView.changeLoginState(!0)}))},k=new _,window.loginRequiredDelegate=new I.a,window.runOrSignIn=function(e,t){if(t||(t={}),t.verifiedPhoneRequired){var i=e;e=function(){Object(D.whenVerified)({showDialog:!0,source:t.source,doNotCheckSuspicious:t.doNotCheckSuspicious,doNotCheckSocialActivity:t.doNotCheckSocialActivity,customPhoneCheck:t.customPhoneCheck,doNotShowConfirmation:t.doNotShowConfirmation}).done(i)}}window.is_authenticated?e():Object(w.showSignModal)({source:t.source,sourceMeta:t.sourceMeta,feature:t.feature,mode:t.mode,signinSuccess:e}),Object(S.a)("signin")},window.onLoginStateChange=B,window.TradingView.setTrialAvailiable=function(e){u.TVLocalStorage.setItem("trial_availiable",e?"1":"0")},window.TradingView.notificationsChanged=new I.a},md7G:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("U8pU"),n=i("JX7q");function o(e,t){return!t||"object"!==Object(r.a)(t)&&"function"!=typeof t?Object(n.a)(e):t}},
me8f:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("tc+8"),o=i("Ocx9").DefaultProperty,s=window.t("Balloon");function a(e,t){this._constructor="LineToolBalloon";var n=t||a.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Hyqq").BalloonPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(a,r),a.prototype.pointsCount=function(){return 1},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Balloon"},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("RhWr").BalloonDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a.prototype.template=function(){var e=r.prototype.template.call(this);return e.text=this.properties().childs().text.value(),e},a.prototype._applyTemplateImpl=function(e){r.prototype._applyTemplateImpl.call(this,e),this.properties().childs().text.setValue(e.text)},a.createProperties=function(e){var t=new o("linetoolballoon",e);return a._configureProperties(t),t},a._configureProperties=function(e){r._configureProperties(e),e.hasChild("text")||e.addChild("text",new n(window.t("Comment"))),e.addExclusion("text")},t.LineToolBalloon=a},mkn5:function(e,t,i){"use strict";(function(t,r){i("AE9l"),i("YFKU");var n=i("UCjq").PaneWidgetBase,o=i("1IXQ").PriceAxisWidget,s=i("1IXQ").scaleRatioForContextMenuTransformer(7),a=i("Ss5c").LineDataSource,l=i("CW80").isLineToolName,c=i("YmeR").ActionBinder,u=i("Eyy1").ensureNotNull,h=i("HZKX"),d=h.createActionAddAlert,p=h.createActionTrade,f=h.createMTPredictorActions,_=h.createLinesAction,m=i("7KDR"),v=m.Action,g=m.Separator,y=i("/3z9"),b=i("mMWL"),S=i("FQhm"),w=i("S8xo").MouseEventHandler,P=i("GVQo"),C=i("+6II");function T(e,i,r){n.call(this,e,i,r),this.setCursorForTool(),this._mouseEventHandler=new w(this._topCanvasBinding.canvas,this,{treatVertTouchDragAsPageScroll:!this._options.handleScroll.vertTouchDrag,treatHorzTouchDragAsPageScroll:!this._options.handleScroll.horzTouchDrag}),this.actions=[],this.readonlyActions=[],this._onKeyUpListener=this._onKeyUpListener.bind(this),$(window).on("keyup.panewidget",this._onKeyUpListener),this._overlays={},this._prevHoveredHittest=null,this._chart.withModel(this,(function(){var e=this._chartUndoModel();e.onSimpleZoomIn().subscribe(this,this._updateCrosshairOnZoom),e.onSimpleZoomOut().subscribe(this,this._updateCrosshairOnZoom)})),this._highlightedPriceAxis=new t(null),this._highlightedPriceAxis.subscribe(function(e){this._highlightPriceAxisByLabel(e)}.bind(this)),this._prevPinchScale=0,this._isDestroyed=!1}inherit(T,n),T.prototype.destroy=function(){for(var e in n.prototype.destroy.call(this),$(window).off("keyup.panewidget",this._onKeyUpListener),this._prevHoveredHittest=null,this._mouseEventHandler.destroy(),this._rowElement.parentElement.removeChild(this._rowElement),this)delete this[e];this._isDestroyed=!0},T.prototype._highlightPriceAxisByLabel=function(e){
this._lhsPriceAxisesContainer.highlightPriceAxisByLabel(e),this._rhsPriceAxisesContainer.highlightPriceAxisByLabel(e)},T.prototype._onKeyUpListener=function(e){27===e.keyCode&&(this._chartUndoModel().lineBeingCreated()&&this._chartUndoModel().cancelCreatingLine(),null!==this._firstZoomPoint&&this.cancelZoom(),this._chartModel().crossHairSource().clearMeasure(),this.setCursorForTool())},T.prototype.chart=function(){return this._chart},T.prototype.stretchFactor=function(){return this._state?this._state._stretchFactor:0},T.prototype.setStretchFactor=function(e){this.hasState()&&(this._state._stretchFactor=e)},T.prototype.hideInplaceEditor=function(){return!!this._inplaceEditor&&(this._inplaceEditor.remove(),this._inplaceEditor=void 0,!0)},T.prototype._finishZoom=function(e){var t=this.state(),i=t.defaultPriceScale(),r=t.mainDataSource().firstValue(),n=i.coordinateToPrice(e.localY,r),o=this._chartUndoModel(),s=Math.round(o.timeScale().coordinateToIndex(e.localX));s!==this._firstZoomPoint.index&&o.zoomToViewport(this._firstZoomPoint.index,s,this._firstZoomPoint.price,n,t),this._chartModel().crossHairSource().clearSelection(),this._firstZoomPoint=null,b.resetToCursor(),this._preventCrossHairMove()&&this._clearCursorPosition()},T.prototype.drawRightThere=function(e){if(l(e)){var t=this._chartUndoModel(),i=t.crossHairSource(),r=t.model().magnet().align(i.price,i.index,this._state);t.createLineTool(this.state(),{index:i.index,price:r},e)}},T.prototype._equalsCursorCache=function(e,t){return b.toolIsCursor(e.tool)?e.tool===t.tool&&e.theme===t.theme&&e.crosshair===t.crosshair:e.tool===t.tool&&e.theme===t.theme},T.prototype._updateCommonTooltip=function(e){var t=this._lastCommonTooltipData,i=null;if(e&&e.hittest){var r=e.hittest.data();r&&(i=r.tooltip||null)}if(null!=t||null!=i){if(null==i||""===i.text)return this._lastCommonTooltipData=null,void C.hide();if(!t||i.text!==t.text||i.rect.x!==t.rect.x||i.rect.y!==t.rect.y||i.rect.w!==t.rect.w||i.rect.h!==t.rect.h){this._lastCommonTooltipData=i;var n=TradingView.clone(i),o=this._paneCell.getBoundingClientRect();n.rect.x+=o.left,n.rect.y+=o.top,C.show(n)}}},T.prototype.createRemoveMenu=function(){var e=this._chart.actions();return new v({label:window.t("Remove"),statName:"Remove",subItems:[e.paneRemoveAllStudies,e.paneRemoveAllDrawingTools,e.paneRemoveAllStudiesDrawingTools]})},T.prototype._initActions=function(e){var t=this,i=this._chart.actions(),n=[];if(r.enabled("datasource_copypaste")&&!this.state().isEmpty()){var o=P.get(),s=((o||{}).sources||[]).filter((function(e){return"study"===e.type||"drawing"===e.type}));if(s.some((function(e){return"drawing"!==e.type||null!==t.state().clipboardLineToolOwnerSource(e.source.id)}))&&o&&s.length){var a=new v({label:window.t("Paste %s").replace("%s",window.t(o.title||o.type)),shortcutHint:y.humanReadableHash(y.Modifiers.Mod+86),statName:"Paste",onExecute:function(){t._chart.onAppClipboardPaste(t.state())}});n.push(a)}}if(n.length&&n.push(new g),n.push(i.chartReset),n.push(new g),r.enabled("alerts")&&(n.length&&n.push(new g),
u(this._state).mainDataSource().hasStateForAlert())){var l=d(this._chart,{e,pane:this._state});null!==l&&n.push(l)}return this._options.contextMenu.mainSeriesTrade&&this.containsMainSeries()&&n.push(p(this._chart,this._state,e)),n[n.length-1]instanceof g||n.push(new g),window.widgetbar&&(!window.widgetbar._customization||window.widgetbar._customization.watchlist)&&i.addToWatchlist&&n.push(i.addToWatchlist),r.enabled("text_notes")&&n.push(i.addToTextNotes),n[n.length-1]instanceof g||n.push(new g),i.moveChartAction&&!i.moveChartAction.isDisabled()&&n.push(i.moveChartAction,new g),n.push(this._createLockTimeAxisAction(e)),n.push(new g),i.paneObjectTree&&n.push(i.paneObjectTree),n.push(_(this._chart)),r.enabled("charting_library_base")||n.push(i.applyColorTheme),n[n.length-1]instanceof g||n.push(new g),this._chart.applyIndicatorsToAllChartsAvailable()&&(n.push(i.applyStudiesToAllCharts),n.push(new g)),n.push(i.paneRemoveAllDrawingTools),n.push(i.paneRemoveAllStudies),n.push(new g),pro.hasPackage("mtp-mtpredictor")&&this.state().containsMainSeries()&&n.push(f(this._chart,this._state,this._contextMenuX,this._contextMenuY),new g),r.enabled("show_chart_property_page")&&n.push(i.chartProperties),n[n.length-1]instanceof g&&n.pop(),n},T.prototype._customActions=function(){var e={top:[],bottom:[],remove:[]},t=this._chartUndoModel().timeScale(),i=this._state&&this._state.defaultPriceScale();if(!r.enabled("custom_items_in_context_menu"))return e;var n,o=t.isEmpty()?void 0:t.indexToUserTime(t.coordinateToIndex(this._contextMenuX));if(i&&!i.isEmpty()){var s=this._state.mainDataSource().firstValue();n=i.coordinateToPrice(this._contextMenuY,s)}return S.emit("onContextMenu",{unixtime:o?o/1e3:void 0,price:n,callback:function(t){[].concat(t).forEach((function(t){var i;t.text&&(t.text.length>1&&"-"===t.text[0]?e.remove.push(t.text.slice(1)):(i="-"===t.text?new g:new v({label:t.text,onExecute:t.click}),t.position&&"top"===t.position?e.top.push(i):e.bottom.push(i)))}))}}),e},T.prototype._timeAxisMenu=function(){if(this._chartUndoModel().timeScale().isEmpty())return null;var e=this._chart.getTimeScale();return new v({label:window.t("Time Scale"),subItems:e.getContextMenuActions(),statName:"TimeScale"})},T.prototype.toggleLockTimeAxis=function(e,t){if("boolean"!=typeof t&&(t=!b.lockTimeAxis().value()),t){var i=this._chartUndoModel().timeScale(),r=i.coordinateToIndex(e),n=i.points().roughTime(r);b.lockTimeAxisTime.setValue(n)}b.lockTimeAxis().setValue(t)},T.prototype._createLockTimeAxisAction=function(e){var t=b.lockTimeAxis().value();return new v({label:window.t("Lock Vertical Line On Time Axis"),statName:"ToggleLockCursorInTime",checkable:!0,checked:t,onExecute:this.toggleLockTimeAxis.bind(this,e.localX,!t)})},T.prototype._createHVLineAction=function(e,t){var i=this;return new v({label:"vertical"===(t="vertical"===t?"vertical":"horizontal")?window.t("Create Vertical Line"):window.t("Create Horizontal Line"),statName:"vertical"===t?"CreateVerticalLine":"CreateHorizontalLine",onExecute:function(){
var r=u(i._state),n=r.mainDataSource().firstValue(),o=i._chartUndoModel().timeScale().coordinateToIndex(e.localX),s=r.defaultPriceScale().coordinateToPrice(e.localY,n),a=i._chartUndoModel().createLineTool(r,{index:o,price:s},"vertical"===t?"LineToolVertLine":"LineToolHorzLine");i._finishTool(a)}})},T.prototype.setPriceAxisSizes=function(e,t,i){this._priceAxisesContainer(e).setSizes(t,i)},T.prototype.update=function(){this._lhsPriceAxisesContainer.update(),this._rhsPriceAxisesContainer.update(),null!==this._legendWidget&&this._legendWidget.update(),this.updateControls()},T.prototype.updateControls=function(){null!==this._paneControls&&this._paneControls.update()},T.prototype.recalculatePriceScale=function(){var e=this.state();e.leftPriceScales().forEach((function(t){e.recalculatePriceScale(t)})),e.rightPriceScales().forEach((function(t){e.recalculatePriceScale(t)}));for(var t=e.dataSources(),i=0;i<t.length;++i){var r=t[i];e.isOverlay(r)&&(r instanceof a||e.recalculatePriceScale(r.priceScale()),r.updateAllViews())}},T.prototype._priceAxisesContainer=function(e){return o.isLeft(e)?this._lhsPriceAxisesContainer:this._rhsPriceAxisesContainer},T.prototype.createActionLockScale=function(e){if(!(e instanceof TradingView.Series))return null;var t=s(e.priceScale(),this._chartUndoModel().model().mainSeriesScaleRatio()),i=new v({checkable:e.priceScale().isLockScale(),label:window.t("Lock Scale")+" "+t,statName:"LockScale"});return i._binding=new c(i,e.priceScale().properties().lockScale,this._chartUndoModel(),"Lock Scale",(function(){var t={lockScale:this.value()};this._undoModel.setPriceScaleMode(t,e.priceScale(),this._undoText)})),i},T.prototype._updateCrosshairOnZoom=function(){if(b.lockTimeAxis().value()){var e=this._chartUndoModel().crossHairSource();e.setPosition(e.index,e.price,this.state())}},T.prototype.highlightedPriceAxis=function(){return this._highlightedPriceAxis},e.exports.PaneWidget=T}).call(this,i("hY0g"),i("Kxc7"))},mpWx:function(e,t,i){"use strict";function r(e,t){for(var i=Promise.reject(),r=0;r<t;++r)i=i.catch(e);return i}i.r(t),i.d(t,"retries",(function(){return r}))},mrSG:function(e,t,i){"use strict";i.r(t),i.d(t,"__extends",(function(){return n})),i.d(t,"__assign",(function(){return o})),i.d(t,"__rest",(function(){return s})),i.d(t,"__decorate",(function(){return a})),i.d(t,"__param",(function(){return l})),i.d(t,"__metadata",(function(){return c})),i.d(t,"__awaiter",(function(){return u})),i.d(t,"__generator",(function(){return h})),i.d(t,"__exportStar",(function(){return d})),i.d(t,"__values",(function(){return p})),i.d(t,"__read",(function(){return f})),i.d(t,"__spread",(function(){return _})),i.d(t,"__spreadArrays",(function(){return m})),i.d(t,"__await",(function(){return v})),i.d(t,"__asyncGenerator",(function(){return g})),i.d(t,"__asyncDelegator",(function(){return y})),i.d(t,"__asyncValues",(function(){return b})),i.d(t,"__makeTemplateObject",(function(){return S})),i.d(t,"__importStar",(function(){return w})),i.d(t,"__importDefault",(function(){return P})),
i.d(t,"__classPrivateFieldGet",(function(){return C})),i.d(t,"__classPrivateFieldSet",(function(){return T}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function n(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var o=function(){return(o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i}function a(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function l(e,t){return function(i,r){t(i,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function h(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],
done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function m(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)r[n]=o[s];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function g(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||a(e,t)}))})}function a(e,t){try{(i=n[e](t)).value instanceof v?Promise.resolve(i.value.v).then(l,c):u(o[0][2],i)}catch(r){u(o[0][3],r)}var i}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function y(e){var t,i;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,n){t[r]=e[r]?function(t){return(i=!i)?{value:v(e[r](t)),done:"return"===r}:n?n(t):t}:n}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){(function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)})(r,n,(t=e[i](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function P(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i}},n40Z:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolVertLine",(function(){return p}));var r=i("mrSG"),n=i("Eyy1"),o=i("aO4+"),s=i("YFKU"),a=i("Ocx9"),l=i("tc+8"),c=i.n(l),u=i("Ss5c"),h=i("GmZZ"),d=Object(s.t)("Vertical Line"),p=function(e){function t(r,n){var o=this,s=n||t.createProperties();return(o=e.call(this,r,s)||this)._constructor="LineToolVertLine",o._timeAxisView=new h.a(o),o._paneViewFactory=null,o.properties().childs().extendLine.subscribe(o,(function(){return r.lightUpdate()})),
Promise.all([i.e(213),i.e("lt-pane-views")]).then(i.bind(null,"BSCN")).then((function(e){o._paneViewFactory=function(t){return new e.VertLinePaneView(o,r,t)}})),o}return Object(r.__extends)(t,e),t.prototype.destroy=function(){this.properties().childs().extendLine.unsubscribeAll(this),e.prototype.destroy.call(this)},t.prototype.pointsCount=function(){return 1},t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.translatedType=function(){return d},t.prototype.name=function(){return"Vertical Line"},t.prototype.timeAxisViews=function(){return this.isSourceHidden()?null:this.properties().childs().showTime.value()?[this._timeAxisView]:null},t.prototype.updateAllViews=function(){e.prototype.updateAllViews.call(this),this._timeAxisView.update()},t.prototype.canHasAlert=function(){return!0},t.prototype.template=function(){var t=e.prototype.template.call(this);return t.text=this.properties().childs().text.value(),t},t.prototype.isMultiPaneAvailable=function(){return!0},t.prototype.isMultiPaneEnabled=function(){return this.properties().childs().extendLine.value()},t.prototype.paneViews=function(t){return t=Object(n.ensureDefined)(t),this.isMultiPaneEnabled()||this._model.paneForSource(this)===t?(null===this._getPaneViews(t)&&null!==this._paneViewFactory&&this._setPaneViews([this._paneViewFactory(t)],t,!0),e.prototype.paneViews.call(this,t)):null},t.prototype.pointToScreenPoint=function(e){var t=this._model.timeScale();if(t.isEmpty())return[new o.Point(0,0),new o.Point(0,0)];var i=t.indexToCoordinate(e.index),r=new o.Point(i,0);return[r,r]},t.prototype.convertYCoordinateToPriceForMoving=function(e){return 0},t.createProperties=function(e){null!=e&&(void 0===e.textOrientation&&(e.textOrientation="horizontal"),void 0===e.extendLine&&(e.extendLine=!1));var i=new a.DefaultProperty("linetoolvertline",e);return t._configureProperties(i),i},t.prototype._getAlertPlots=function(){var e=this._points[0],t={index:e.index,price:e.price+1};return[this._linePointsToAlertPlot([e,t],null,!0,!0)]},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"FkpW")).then((function(e){return e.VerticalLineDefinitionsViewModel}))},t.prototype._applyTemplateImpl=function(t){e.prototype._applyTemplateImpl.call(this,t),this.properties().childs().text.setValue(t.text||"")},t._configureProperties=function(e){u.LineDataSource._configureProperties(e),e.hasChild("text")||e.addChild("text",new c.a("")),e.addExclusion("text")},t}(u.LineDataSource)},n5al:function(e,t,i){"use strict";i.r(t),i.d(t,"isRequiringRestartSeriesStyles",(function(){return p})),i.d(t,"isRangeBasedStyle",(function(){return f})),i.d(t,"isRangeStyle",(function(){return _})),i.d(t,"isTimeBasedStyle",(function(){return m})),i.d(t,"isValidStyle",(function(){return v})),i.d(t,"setLastUsedStyle",(function(){return g})),i.d(t,"getLastUsedStyle",(function(){return y})),i.d(t,"getDefaultStyle",(function(){return b})),
i.d(t,"getChartStyleByResolution",(function(){return S})),i.d(t,"chartStyleStudyId",(function(){return w})),i.d(t,"preparePriceAxisProperties",(function(){return P})),i.d(t,"hasProjection",(function(){return T})),i.d(t,"isPriceSourceStyle",(function(){return x})),i.d(t,"getSeriesPriceFormattingState",(function(){return I})),i.d(t,"createSeriesFormatter",(function(){return E})),i.d(t,"seriesCurrency",(function(){return L})),i.d(t,"extractSymbolNameFromSymbolInfo",(function(){return O}));var r=i("Vdly"),n=i("dfhE"),o=i("LxhU"),s=i("kcTO"),a=i("Kxc7"),l=i("nEwK"),c=[4,5,6,7,8],u=[4,5,6,7,8,11],h=[0,1,9,2,3,10],d=[2,10,3];function p(e){return-1!==c.indexOf(e)}function f(e){return-1!==u.indexOf(e)}function _(e){return 11===e}function m(e){return-1!==h.indexOf(e)}function v(e){return f(e)||m(e)}function g(e){v(e)&&11!==e&&r.setValue("chart.lastUsedStyle",e)}function y(){var e=r.getInt("chart.lastUsedStyle");return void 0===e?1:e}function b(e){return e?11:1}function S(e,t){var i=_(t),r=o.Interval.isRange(e);return!i&&r?b(!0):i&&!r?b(!1):t}function w(e,t){var i=n.SYMBOL_STRING_DATA[e];return void 0===i?null:t?i.type+"-"+i.basicStudyVersion:i.type}function P(e){var t=e.priceAxisProperties,i=t.lockScale.value(),r=6===e.style.value();(r||i)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!r&&!i)),t.percentageDisabled.setValue(!(!r&&!i))}var C=[4,7,5,6];function T(e){return-1!==C.indexOf(e)}function x(e){return d.includes(e)}function I(e,t,i){void 0===t&&(t="default"),void 0===i&&(i=!1);var r,n,o=100,s=1;if("default"===t)null!=e&&(o=e.pricescale,s=e.minmov,r=e.fractional,n=e.minmove2);else{var a=t.split(",");3!==a.length&&(a=["100","1","false"]),o=parseInt(a[0]),s=parseInt(a[1]),r="true"===a[2]}return i&&(s=1),{priceScale:o,minMove:s,fractional:r,minMove2:n}}function E(e,t,i){if(void 0===i&&(i=!1),"default"===t&&null!=e&&("volume"===e.formatter||"volume"===e.format))return new l.VolumeFormatter(2);var r=I(e,t,i),n=r.priceScale,o=r.minMove,a=r.fractional,c=r.minMove2;return new s.PriceFormatter(n,o,a,c)}function L(e){return null===e||void 0===e.currency_code||""===e.currency_code||"spread"===e.type?null:e.currency_code}function O(e,t){var i=e&&(e.pro_name||e.full_name||e.name);return a.enabled("charting_library_single_symbol_request")&&t?i=t:a.enabled("use_ticker_on_symbol_info_update")&&e&&e.ticker&&(i=e.ticker),i}},nBJD:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r=function(){function e(e){this._text="",this._size="13px",this._bold=!1,this._colorProperty=e}return e.prototype.text=function(){return this._text},e.prototype.setText=function(e){this._text=e},e.prototype.getSplitTitle=function(){return[this._text]},e.prototype.color=function(){return this._colorProperty.value()},e.prototype.bold=function(){return this._bold},e.prototype.size=function(){return this._size},e}()},nEwK:function(e,t,i){"use strict";i.r(t),i.d(t,"PLACE_HOLDER",(function(){return a})),i.d(t,"VolumeFormatter",(function(){return l}));var r=i("YFKU"),n=i("zXvd"),o=i("ogJP"),s=i("ivNn"),a="---",l=function(){
function e(e){this.type="volume",this._numericFormatter=new n.NumericFormatter,this._fractionalValues=void 0!==e&&e>0,this._precision=e}return e.prototype.state=function(){return{precision:this._precision}},e.prototype.format=function(e){if(!Object(o.isNumber)(e))return a;var t="";return e<0&&(t="-",e=-e),e>=1e100?Object(r.t)("N/A"):(!this._fractionalValues||e>=995?e=Math.round(e):this._fractionalValues&&(e=+e.toFixed(this._precision)),e<995?t+this._formatNumber(e):e<999995?t+this._formatNumber(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this._formatNumber(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this._formatNumber(e/1e9)+"B"))},e.prototype.parse=function(e){if("---"===e)return{error:"not a number",res:!1,value:NaN};var t={K:1e3,M:1e6,B:1e9},i=e.slice(-1);if(t.hasOwnProperty(i)){var r=this._numericFormatter.parse(e.slice(0,-1));return Object(o.isNumber)(r)?{res:!0,value:r*t[i]}:{error:"not a number",res:!1,value:NaN}}r=this._numericFormatter.parse(e);return Object(o.isNumber)(r)?{res:!0,value:r}:{error:"not a number",res:!1,value:NaN}},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(t.precision)},e.prototype._formatNumber=function(e){return this._fractionalValues&&(e=Object(s.fixComputationError)(e)),this._numericFormatter.format(e).replace(/(\.[1-9]*)0+$/,(function(e,t){return t}))},e}()},nInm:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return c}));var r,n,o=i("mrSG"),s=i("tqok"),a=i("hsV8");function l(e,t){if(e.time>=t.length)return null;var i=t[e.time];return i===s.INVALID_TIME_POINT_INDEX?null:{time:i,offset:e.offset,text:e.text,price:e.price}}function c(e,t,i){var r=Object(a.ensureTimePointIndexIndex)(i.indexOf(e.time));return Object(o.__assign)(Object(o.__assign)({id:t},e),{time:r})}!function(e){e.Triangle="triangle",e.Rectangle="rectangle"}(r||(r={})),function(e){e.Verdana="Verdana",e.CourierNew="Courier New",e.TimesNewRoman="Times New Roman",e.Arial="Arial"}(n||(n={}))},nW7S:function(e,t,i){"use strict";(function(e){var r=i("aO4+").Point,n=i("Ss5c").LineDataSource,o=i("Ocx9").DefaultProperty,s=window.t("Trend Angle");function a(e,t){var r=t||a.createProperties();n.call(this,e,r),this._constructor="LineToolTrendAngle",this._properties.addChild("angle",new a.AngleProperty(this)),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("XHET").TrendAnglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(a,n),a.prototype.isSynchronizable=function(){return!1},a.AngleProperty=function(t){e.call(this),this._lineSource=t},inherit(a.AngleProperty,e),a.AngleProperty.prototype.value=function(){var e=180*this._lineSource._angle/Math.PI;return Math.round(e)},a.AngleProperty.prototype.setValue=function(e){var t=e*Math.PI/180;this._lineSource._angle=t
;var i=this._lineSource.pointToScreenPoint(this._lineSource.points()[0])[0],n=Math.cos(this._lineSource._angle),o=-Math.sin(this._lineSource._angle),s=new r(n,o),a=i.addScaled(s,this._lineSource._distance),l=this._lineSource.screenPointToPoint(a);this._lineSource._points[1]=l,this._lineSource._model.updateSource(this._lineSource),this._lineSource.updateAllViews(),this._lineSource._model.updateSource(this._lineSource)},a.prototype.pointsCount=function(){return 2},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Trend Angle"},a.prototype._calculateAngle=function(){var e=this.pointToScreenPoint(this.points()[0])[0],t=this.pointToScreenPoint(this.points()[1])[0],i=t.subtract(e);i.length()>0?(i=i.normalized(),this._angle=Math.acos(i.x),i.y>0&&(this._angle=-this._angle),this._distance=t.subtract(e).length()):delete this._angle,this.properties().hasOwnProperty("angle")&&this.properties().angle.listeners().fire(this.properties().angle)},a.prototype.addPoint=function(e,t){var i=n.prototype.addPoint.call(this,e,t);return i&&this._calculateAngle(),i},a.prototype.setLastPoint=function(e,t){n.prototype.setLastPoint.call(this,e,t),this.points().length>1&&this._calculateAngle()},a.prototype.axisPoints=function(){if(this.points().length<2)return[];var e=[this.points()[0]],t=this.pointToScreenPoint(this.points()[0])[1],i=Math.cos(this._angle)*this._distance,n=-Math.sin(this._angle)*this._distance,o=t.add(new r(i,n)),s=this.screenPointToPoint(o);return e.push(s),e},a.prototype.setPoint=function(e,t,i){n.prototype.setPoint.call(this,e,t,i),this.points().length>1&&1===e&&this._calculateAngle()},a.prototype.restoreData=function(e){this._angle=e.angle,this._distance=e.distance},a.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.angle=this._angle,t.distance=this._distance,t},a.prototype.cloneData=function(e){this._angle=e._angle,this._distance=e._distance},a.prototype.canHasAlert=function(){return!0},a.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("o1gc").TrendAngleDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a.createProperties=function(e){var t=new o("linetooltrendangle",e);return a._configureProperties(t),t},a._configureProperties=function(e){n._configureProperties(e)},t.LineToolTrendAngle=a}).call(this,i("tc+8"))},nXyu:function(e,t,i){"use strict";i.r(t),i.d(t,"patchChildIdInInputs",(function(){return l})),i.d(t,"idForAlert",(function(){return c}));var r=i("txPx"),n=i("YJLw"),o=i.n(n),s=i("XMe/"),a=Object(r.getLogger)("Chart.Study");function l(e,t,i){void 0!==t&&void 0!==i&&i.forEach((function(i){var r=e[i];if("string"==typeof r){var n=r.split("$")[1];e[i]=t+(void 0===n?"":"$"+n)}else if("source"===r.t){n=r.v.split("$")[1];r.v=t+(void 0===n?"":"$"+n)
}else a.logError("Cannot patch source input, its type is not source: "+JSON.stringify(r))}))}function c(e,t){return o()(e+Object(s.sortedStringify)(t)).toString()}},"nd9+":function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolGannComplex",(function(){return d}));var r=i("mrSG"),n=i("aO4+"),o=i("Eyy1"),s=i("T6Of"),a=i("Ss5c"),l=i("FaJS"),c=i("LAp3"),u=i("ytGH"),h=window.t("Gann Square"),d=function(e){function t(r,n){var o=e.call(this,r,n||t.createProperties())||this;o.version=2,o._constructor="LineToolGannComplex",o._scaleRatioFormatter=new s.LimitedPrecisionNumericFormatter(7),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("X4Cb").GannComplexPaneView;o._setPaneViews([new t(o,o.model())])}.bind(null,i)).catch(void 0);var a=o.properties();o._adjustScaleRatio(a),a.subscribe(o,o._adjustScaleRatio),a.childs().scaleRatio.subscribe(o,o._correctFirstPoint),o._syncStateExclusions=["scaleRatio"],a.addExclusion("scaleRatio"),o.properties().onRestoreFactoryDefaults().subscribe(o,o._handleRestoringFactoryDefaults),o._onTemplateApplying.subscribe(o,o._handleTemplateApplying),o._onTemplateApplied.subscribe(o,o._correctFirstPoint);for(var l=[],c=o.properties().childs(),h=c.levels.childCount(),d=0;d<h;d++){var p=c.levels.childs()[d].childs();l.push(p.width)}for(h=c.fanlines.childCount(),d=0;d<h;d++){p=c.fanlines.childs()[d].childs();l.push(p.width)}for(h=c.arcs.childCount(),d=0;d<h;d++){p=c.arcs.childs()[d].childs();l.push(p.width)}return o._widthsProperty=new u.LineToolWidthsProperty(l),o}return Object(r.__extends)(t,e),t.prototype.properties=function(){return e.prototype.properties.call(this)},t.prototype.migrateVersion=function(e,t,i){var r=this;1===e&&(this._points.length>=this.pointsCount()?setTimeout((function(){return r._migratePoint()})):this._timePoint.length>=this.pointsCount()&&this._pointAdded.subscribe(this,this._migratePoint))},t.prototype.destroy=function(){var e=this.properties();e.unsubscribe(this,this._adjustScaleRatio),e.childs().scaleRatio.unsubscribe(this,this._correctFirstPoint),this.properties().onRestoreFactoryDefaults().unsubscribe(this,this._handleRestoringFactoryDefaults),this._onTemplateApplying.unsubscribe(this,this._handleTemplateApplying),this._onTemplateApplied.unsubscribe(this,this._correctFirstPoint)},t.prototype.pointsCount=function(){return 2},t.prototype.translatedType=function(){return h},t.prototype.name=function(){return"Gann Square"},t.prototype.addPoint=function(t,i,r){this._points.length>1&&this._points.pop();var n=e.prototype.addPoint.call(this,t,i,r),s=this.priceScale();return!Object(o.ensureNotNull)(s).isLog()&&n&&this._correctFirstPoint(),n},t.prototype.setPoint=function(t,i,r,n){e.prototype.setPoint.call(this,t,i,r,n),void 0!==r&&r.shift()?this._correctPoint(t):this._correctScaleRatio()},t.prototype.setLastPoint=function(t,i){var r=this.priceScale();Object(o.ensureNotNull)(r).isLog()||(this._points[1]=t,this._correctPoint(1)),e.prototype.setLastPoint.call(this,t,i)},t.prototype.isReversed=function(){return this.properties().childs().reverse.value()},
t.prototype.levelsCount=function(){return this.properties().childs().levels.childCount()},t.prototype.levels=function(){for(var e=[],t=this.properties().childs(),i=t.levels.childCount(),r=0;r<i;r++){var n=t.levels.childs()[r].childs();e.push({index:r,visible:n.visible.value(),color:n.color.value(),width:n.width.value()})}return e},t.prototype.fanLinesCount=function(){return this.properties().childs().fanlines.childCount()},t.prototype.fanLines=function(){for(var e=[],t=this.properties().childs(),i=t.fanlines.childCount(),r=0;r<i;r++){var n=t.fanlines.childs()[r].childs();e.push({index:r,visible:n.visible.value(),x:n.x.value(),y:n.y.value(),color:n.color.value(),width:n.width.value()})}return e},t.prototype.arcsCount=function(){return this.properties().childs().arcs.childCount()},t.prototype.arcs=function(){for(var e=[],t=this.properties().childs(),i=t.arcs.childCount(),r=0;r<i;r++){var n=t.arcs.childs()[r].childs();e.push({index:r,visible:n.visible.value(),x:n.x.value(),y:n.y.value(),color:n.color.value(),width:n.width.value()})}return e},t.prototype.arcsBackgroundTransparency=function(){return this.properties().childs().arcsBackground.childs().transparency.value()},t.prototype.isArcsBackgroundFilled=function(){return this.properties().childs().arcsBackground.childs().fillBackground.value()},t.prototype.isLabelsVisible=function(){return this.properties().childs().showLabels.value()},t.prototype.getLabelsStyle=function(){var e=this.properties().childs(),t=e.labelsStyle.childs(),i=t.font,r=t.fontSize,n=t.bold,o=t.italic,s=e.levels.childCount();return{textColor:e.levels.childs()[s-1].childs().color.value(),font:i.value(),fontSize:r.value(),bold:n.value(),italic:o.value()}},t.prototype.getScaleRatioStep=function(){return 1e-7},t.prototype.getScaleRatioFormatter=function(){return this._scaleRatioFormatter},t.prototype.getPriceDiff=function(){var e=this.points();if(e.length<2)return null;var t=e[0];return e[1].price-t.price},t.prototype.getIndexDiff=function(){var e=this.points();if(e.length<2)return null;var t=e[0];return e[1].index-t.index},t.prototype.getScaleRatio=function(){var e=this.getPriceDiff(),t=this.getIndexDiff();return null!==e&&null!==t&&0!==t?Math.abs(e/t):null},t.createProperties=function(e){var i=Object(c.a)("linetoolganncomplex",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"WfUZ")).then((function(e){return e.GannComplexAndFixedDefinitionsViewModel}))},t._configureProperties=function(e){a.LineDataSource._configureProperties(e)},t.prototype._correctScaleRatio=function(){var e=this.properties().childs(),t=this.getScaleRatio();e.scaleRatio.setValue(t)},t.prototype._getAdjustedScaleRatio=function(){var e=this.model().mainSeries().priceScale(),t=this.model().timeScale();return Object(l.scaleRatio)(t,e)},t.prototype._adjustScaleRatio=function(e){var t=e.scaleRatio.value();""!==t&&null!==t||e.scaleRatio.setValue(this._getAdjustedScaleRatio())},
t.prototype._correctPoint=function(e){if(!(this._points.length<2)){var t=this.getIndexDiff();if(null!==t){var i=this.properties().childs().scaleRatio.value();if(null!==i){var r=this._points[e],n=0===e?this._points[1]:this._points[0],o=r.price-n.price>0,s=r.index-n.index>0,a=o&&!s||!o&&s?-1:1;0===e&&(a=-a),r.price=n.price+a*t*i,this._pointChanged.fire(e)}this.normalizePoints()}}},t.prototype._correctFirstPoint=function(){this._correctPoint(this.isReversed()?0:1)},t.prototype._handleRestoringFactoryDefaults=function(){this.properties().childs().scaleRatio.setValue(this._getAdjustedScaleRatio())},t.prototype._handleTemplateApplying=function(e){""===e.scaleRatio&&(e.scaleRatio=this._getAdjustedScaleRatio())},t.prototype._migratePoint=function(){if(!(this.points().length<this.pointsCount())){var e=this._getScreenPoints();if(null!==e){var t=this.screenPointToPoint(e[1]);this.setPoint(1,t),this._pointAdded.unsubscribe(this,this._migratePoint)}}},t.prototype._getScreenPoints=function(){var e,t=this._calcAngle();if(null===t)return null;var i=this.points(),r=i[0],o=i[1];this.isReversed()&&(r=(e=[o,r])[0],o=e[1]);var s=this.pointToScreenPoint(r)[0],a=this.pointToScreenPoint(o)[0],l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)),c=new n.Point(Math.cos(t),-Math.sin(t)),u=c.normalized(),h=u.x<0?-1:1,d=u.y<0?-1:1;return[s.addScaled(c,l),s.add(new n.Point(5*l*h,5*l*d))]},t.prototype._calcAngle=function(){var e=this.points(),t=e[0],i=e[1],r=this.pointToScreenPoint(t)[0],n=this.pointToScreenPoint(i)[0].subtract(r);if(n.length()>0){n=n.normalized();var o=Math.acos(n.x);return n.y>0&&(o=-o),o}return null},t}(a.LineDataSource)},nda6:function(e,t,i){"use strict";i.r(t),i.d(t,"TimeSpanFormatter",(function(){return r}));i("YFKU");var r=function(){function e(){}return e.prototype.format=function(e){var t=e<0;e=Math.abs(e);var i=Math.floor(e/86400);e-=86400*i;var r=Math.floor(e/3600);e-=3600*r;var n=Math.floor(e/60);e-=60*n;var o="";return i&&(o+=i+window.t("d",{context:"dates"})+" "),r&&(o+=r+window.t("h",{context:"dates"})+" "),n&&(o+=n+window.t("m",{context:"dates"})+" "),e&&(o+=e+window.t("s",{context:"dates"})+" "),t&&(o="-"+o),o.trim()},e}()},"ng+v":function(e,t,i){"use strict";i.r(t),i.d(t,"LineDataSourceBase",(function(){return l}));var r=i("mrSG"),n=i("Eyy1"),o=i("fgLi"),s=i("aIyQ"),a=i.n(s),l=function(e){function t(t){var i=e.call(this)||this;return i._timePoint=[],i._points=[],i._paneViews=new Map,i._normalizedPointsChanged=new a.a,i._model=t,i.localAndServerAlertsMismatch=!1,i}return Object(r.__extends)(t,e),t.prototype.destroy=function(){var e=this;this._paneViews.forEach((function(t,i){return e._destroyPanePaneViews(i)}))},t.prototype.normalizedPointsChanged=function(){return this._normalizedPointsChanged},t.prototype.pointsProperty=function(){return this._pointsProperty},t.prototype.paneViews=function(e){if(this.isSourceHidden())return null;var t=this._getPaneViews(this.isMultiPaneAvailable()?e:void 0);if(null===t)return null;if(1===t.length)return[t[0]];for(var i=[],r=t.length-1;r>=0;--r)i.push(t[r]);return i},
t.prototype.convertYCoordinateToPriceForMoving=function(e,t){var i,r=Object(n.ensureNotNull)(this.priceScale());if(r.isEmpty())return null;var o=this.ownerSource(),s=Object(n.ensure)(null===(i=o||t)||void 0===i?void 0:i.firstValue());return r.coordinateToPrice(e,s)},t.prototype.normalizePoint=function(e){return Object(r.__assign)(Object(r.__assign)({},this._model.timeScale().normalizeBarIndex(e.index)),{price:e.price})},t.prototype.normalizePoints=function(){this._timePoint=[];for(var e=0;e<this._points.length;e++)if(void 0!==this._points[e].index){var t=this.normalizePoint(this._points[e]);if(!t.time_t){this._timePoint=[];break}this._timePoint.push(t)}this._normalizedPointsChanged.fire()},t.prototype._setPaneViews=function(e,t,i){var r=this;this._paneViews.set(t,e),void 0!==t&&i&&t.onDestroyed().subscribe(this,(function(){return r._destroyPanePaneViews(t)})),this._model.lightUpdate()},t.prototype._getPaneViews=function(e){return this._paneViews.get(e)||null},t.prototype._updateAllPaneViews=function(){this._paneViews.forEach((function(e){for(var t=0,i=e;t<i.length;t++){i[t].update()}}))},t.prototype._destroyPanePaneViews=function(e){var t=this._paneViews.get(e);if(void 0!==t)for(var i=0,r=t;i<r.length;i++){var n=r[i];n.destroy&&n.destroy()}void 0!==e&&e.onDestroyed().unsubscribeAll(this),this._paneViews.delete(e)},t}(o.DataSource)},nmnj:function(e,t,i){"use strict";(function(t){var r=i("Eyy1").assert,n=i("JWMC").trackEvent,o=i("FBuY").TVXWindowEvents,s=i("txPx").getLogger("Pine.ScriptLib"),a=i("xlbu").telemetry,l={fast:["delete","get","is_auth_to_get","is_auth_to_write","parse_title","rename"],medium:["list","eval_pine_ex"],slow:["process_legacy","publish","save","translate","translate_source","gen_alert"]};var c={};function u(){c._cache={}}c._isAuthCache=new u,c._pineDeleted=new t,o.on("TVScriptModified",(function(e){c.clearSavedScriptsCache(),c.scriptUpdater()&&c.scriptUpdater().onTVScriptModified(JSON.parse(e))})),o.on("TVScriptDeleted",(function(e){c.clearAllCaches(),c.scriptUpdater()&&c.scriptUpdater().onTVScriptDeleted(JSON.parse(e))})),o.on("TVScriptRenamed",(function(e){c.clearSavedScriptsCache(),c.scriptUpdater()&&c.scriptUpdater().onTVScriptRenamed(JSON.parse(e))})),o.on("TVScriptLegacyPineProcessed",(function(e){c.clearSavedScriptsCache(),c.scriptUpdater()&&c.scriptUpdater().onTVScriptLegacyPineProcessed(JSON.parse(e))})),c.PINE_FACADE_URL=function(){return window.PINE_URL},c.onPineDeleted=function(){return c._pineDeleted},c._pineFacadeAjax=function(e,t,i,r){s.logNormal("Requesting pine facade scripts, url: "+t);var n=function(e,t){for(var i=Object.keys(l),r=0;r<i.length;r++){var n=l[i[r]].filter((function(t){return-1!==e.indexOf(t)}));if(Boolean(n.length))return i[r]}return!1}(t),o=Date.now(),u=r?void 0:{withCredentials:!0};return $.ajax({url:c.PINE_FACADE_URL()+t,type:e,data:i||{},dataType:"json",xhrFields:u}).done((function(){var e=Date.now()-o;a.sendReport("pine",n+"_group_time_frame",{value:e}),a.sendReport("pine",n+"_group_ok"),s.logNormal("Requesting pine facade scripts finished, url: "+t)
})).fail((function(){var e=Date.now()-o;a.sendReport("pine",n+"_group_time_frame",{value:e}),a.sendReport("pine",n+"_group_error"),s.logError("Requesting pine facade scripts failed, url: "+t)}))},c.convertScript=function(e){var t=$.Deferred(),i={source:e,version_to:4};return c._pineFacadeAjax("POST","/convert/",i).done((function(e,i,r){e.error?t.reject(c._readableError(e.error)):t.resolve(e)})).fail((function(e,i,r){c._anyRequestAsyncFail(t,e)})),t.promise()},c.translateScriptAsync=function(e,t,i,r){n("Pine","ScriptLib.translateScript"),r=!!r;var o=$.Deferred(),s="/translate_source/"+encodeURIComponent(t)+"/?is_pine_ex="+r,a={user_name:window.user&&window.user.username,source:e,inputs:JSON.stringify(i||{})};return c._pineFacadeAjax("POST",s,a).done((function(e,t,i){c._translateScriptAsyncDone(o,e)})).fail((function(e,t,i){c._anyRequestAsyncFail(o,e)})),o.promise()},c.translateScriptAsync2=function(e,t){s.logNormal("translateScriptAsync2, pineId="+e+" pineVersion="+t),n("Pine","ScriptLib.translateScript");var i=$.Deferred(),r=0!==e.indexOf("USER"),a=window.user&&window.user.username,l="?user_name="+encodeURIComponent(a),u="/translate/"+encodeURIComponent(e)+"/"+t+"/";return r||null==a||(u+=l),c._pineFacadeAjax("GET",u,void 0,r).done((function(e,r,n){if(c._translateScriptAsyncDone(i,e),t<0){c.clearSavedScriptsCache();var s={scriptMetaInfo:e.result.metaInfo};o.emit("TVScriptLegacyPineProcessed",JSON.stringify(s)),setTimeout((function(){s.isSelfCall=!0,null!=c.scriptUpdater()&&c.scriptUpdater().onTVScriptLegacyPineProcessed(s)}),0)}})).fail((function(e,t,r){c._anyRequestAsyncFail(i,e)})),i.promise()},c._translateScriptAsyncDone=function(e,t){if(t.error)e.reject(c._readableError(t.error));else if(t.success)e.resolve(t.result.metaInfo,t.result.IL);else{var i=t.result?t.result.metaInfo:null;e.reject(t.reason,i)}},c._saveScriptAsyncDone=function(e,t){if(t.error)e.reject(c._readableError(t.error));else if(t.success)e.resolve(t.result.metaInfo);else{var i=t.result?t.result.metaInfo:null;e.resolve(i,t.reason)}},c._readableError=function(e,t){return t},c._anyRequestAsyncFail=function(e,t){0===c.PINE_FACADE_URL().indexOf("http")&&s.logError(t.responseText),e.reject(c._readableError(t.status,t.statusText))},c.isAuthToWritePineScript=function(e){var t="write_"+e,i=c._isAuthCache.getPromise(t);if(null!==i)return i;n("Pine","ScriptLib.isAuthToWritePineScript");var r=$.Deferred(),o="/is_auth_to_write/"+encodeURIComponent(e);return c._pineFacadeAjax("GET",o).done((function(e,t,i){r.resolve(e)})).fail((function(e,t,i){c._anyRequestAsyncFail(r,e)})),c._isAuthCache.setPromise(t,r.promise())},c.isAuthToGetPineSourceCode=function(e,t){var i="get_"+e+"_"+t,r=c._isAuthCache.getPromise(i);if(null!==r)return r;n("Pine","ScriptLib.isAuthToGetPineSourceCode");var o=$.Deferred(),s="/is_auth_to_get/"+encodeURIComponent(e)+"/"+t;return c._pineFacadeAjax("GET",s).done((function(e,t,i){o.resolve(e)})).fail((function(e,t,i){c._anyRequestAsyncFail(o,e)})),c._isAuthCache.setPromise(i,o.promise())},u.prototype.getPromise=function(e){var t=c._cache[e]
;return void 0===t?null:void 0!==t.value?$.Deferred().resolve(t.value):void 0!==t.promise?t.promise:null},u.prototype.setPromise=function(e,t){return c._cache[e]={promise:t},t.done((function(t){c._cache[e]={value:t}})).fail((function(t){delete c._cache[e]})),t},c.getPineSourceCode=function(e,t,i){n("Pine","ScriptLib.getPineSourceCode");var r=$.Deferred(),o="?no_4xx="+!!i,s="/get/"+encodeURIComponent(e)+"/"+t+o;return c._pineFacadeAjax("GET",s).done((function(e,t,i){!1===e.success?r.reject(e.reason):r.resolve(e)})).fail((function(e,t,i){c._anyRequestAsyncFail(r,e)})),r.promise()},c.saveNewDraft=function(e){n("Pine","ScriptLib.saveNewDraft");var t=$.Deferred();if(null==e||""===e)return t.reject($.t("Cannot save empty source code"));var i=window.user&&window.user.username,r="/save/new_draft/?user_name="+encodeURIComponent(i)+"&allow_use_existing_draft=true",o={source:e};return c._pineFacadeAjax("POST",r,o).done((function(e,i,r){c._translateScriptAsyncDone(t,e)})).fail((function(e,i,r){c._anyRequestAsyncFail(t,e)})),t.promise()},c.saveNextDraft=function(e,t,i){n("Pine","ScriptLib.saveNextDraft");var r=$.Deferred();if(null==t||""===t)return r.reject($.t("Cannot save empty source code"));var o=window.user&&window.user.username,s=(i=!!i,"/save/next_draft/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(o)+"&allow_create_new="+i),a={source:t};return c._pineFacadeAjax("POST",s,a).done((function(e,t,i){c._translateScriptAsyncDone(r,e)})).fail((function(e,t,i){c._anyRequestAsyncFail(r,e)})),r.promise()},c.processLegacy=function(e,t){n("Pine","ScriptLib.processLegacy");var i=$.Deferred(),r=window.user&&window.user.username,o="/process_legacy/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(r),s={};return null!=t&&""!==t&&(s.source=t),c._pineFacadeAjax("POST",o,s).done((function(e,t,r){c._translateScriptAsyncDone(i,e)})).fail((function(e,t,r){c._anyRequestAsyncFail(i,e)})),i.promise()},c.generateAlert=function(e){n("Pine","ScriptLib.generateAlert");var t=$.Deferred(),i=window.user&&window.user.username,r="/gen_alert/?user_name="+encodeURIComponent(i),o={alert_info:e},s=Date.now();return c._pineFacadeAjax("POST",r,o).done((function(e,i,r){a.sendReport("alerts","compilation_ok"),c._translateScriptAsyncDone(t,e)})).fail((function(e,i,r){a.sendReport("alerts","compilation_error"),c._anyRequestAsyncFail(t,e)})).always((function(){var e=Date.now()-s;a.sendReport("alerts","compilation_time_frame",{value:e})})),t.promise()},c.parseScriptTitleAsync=function(e){n("Pine","ScriptLib.parseScriptTitle");var t=$.Deferred();if(null==e||""===e)return t.reject($.t("Cannot save empty source code"));var i={user_name:window.user&&window.user.username,source:e};return c._pineFacadeAjax("POST","/parse_title/",i).done((function(e,i,r){e.error?t.reject(c._readableError(e.error)):e.success?t.resolve(e.result):t.reject(e.reason)})).fail((function(e){c._anyRequestAsyncFail(t,e)})),t.promise()},c.evalMetaInfoExprsAsync=function(e,t){n("Pine","ScriptLib.evalMetaInfoExprs");var i=$.Deferred(),r={username:window.user&&window.user.username,
source:e,inputs:JSON.stringify(t||{})};return c._pineFacadeAjax("POST","/eval_pine_ex/",r).done((function(e,t,r){e.error?i.reject(c._readableError(e.error)):e.success?i.resolve(e.result):i.reject(e.reason)})).fail((function(e){c._anyRequestAsyncFail(i,e)})),i.promise()},c.patchPropertiesAsync=function(e,t,i){return s.logNormal("patchPropertiesAsync"),new Promise((function(n,o){if(t.TVScriptMetaInfoExprs){var s=t.TVScriptMetaInfoExprs.tree,a=t.TVScriptMetaInfoExprs.patchMap;c.evalMetaInfoExprsAsync(s,i).done((function(t){for(var i=t.rootValues,o=Object.keys(a),s=0;s<o.length;s++){var l=o[s],c=i[a[l]],u=l.split(".");"defaults"===u[0]&&u.splice(0,1),r(u.length>1,"Unexpectedly short json path");for(var h=e,d=0;d<u.length-1;++d)h=h[u[d]];h[u[u.length-1]].setValue(c)}n(e)})).fail((function(e){o(e)}))}else n(e)}))},c.scriptUpdater=function(){return window.scriptUpdater},c.clearAllCaches=function(){c.clearIsAuthToCaches(),c.clearSavedScriptsCache()},c.clearIsAuthToCaches=function(e){e?Object.keys(c._cache).filter((function(t){return t.indexOf(e)>=0})).forEach((function(e){delete c._cache[e]})):c._isAuthCache=new u},c.clearSavedScriptsCache=function(e){delete c._userScriptsDfd},c.requestUserScripts=function(e){if(n("Pine","ScriptLib.requestUserScripts"),window.is_authenticated){if(!c._userScriptsDfd){c._userScriptsDfd=$.Deferred();var t=c._userScriptsDfd;c._pineFacadeAjax("GET","/list?filter=saved").done((function(e,i,r){t.resolve(e)})).fail((function(e){c._anyRequestAsyncFail(t,e)}))}t=c._userScriptsDfd}else t=$.Deferred().resolve([]);return"function"==typeof e&&t.done(e),t.promise()},c.setUserScripts=function(e){c._userScriptsDfd||(c._userScriptsDfd=$.Deferred().resolve(e))},c.requestUserPublishedScripts=function(e,t){if(n("Pine","ScriptLib.requestUserPublishedScripts"),window.is_authenticated){if(t||!c._userPublishedScriptsDfd){c._userPublishedScriptsDfd=$.Deferred();var i=c._userPublishedScriptsDfd;c._pineFacadeAjax("GET","/list?filter=published").done((function(e,t,r){i.resolve(e)})).fail((function(e){c._anyRequestAsyncFail(i,e)}))}i=c._userPublishedScriptsDfd}else i=$.Deferred().resolve([]);return"function"==typeof e&&i.done(e),i.promise()},c.requestPineEditorNewTemplateScripts=function(e){n("Pine","ScriptLib.requestPineEditorNewTemplateScripts");var t=$.Deferred();return c._pineFacadeAjax("GET","/list/?filter=template",void 0,!0).done((function(e,i,r){t.resolve(e)})).fail((function(e){c._anyRequestAsyncFail(t,e)})),"function"==typeof e&&t.done(e),t.promise()},c.requestInfoForScripts=function(e){return Promise.all([c._pineFacadeAjax("GET","/list?filter=saved"),c._pineFacadeAjax("GET","/list?filter=addon",void 0,!0)]).then((function(t){var i=t[0],r=t[1];return i.concat(r).filter((function(t){return e.includes(t.scriptIdPart)}))}))},c.requestBuiltinScripts=function(){n("Pine","ScriptLib.requestBuiltinScripts"),s.logNormal("Request built-in scripts");var e=$.Deferred();return c._pineFacadeAjax("GET","/list/?filter=standard",void 0,!0).done((function(t,i,r){s.logNormal("Request built-in scripts finished"),e.resolve(t)
})).fail((function(t){s.logWarn("Request built-in scripts finished with fail"),c._anyRequestAsyncFail(e,t)})),e.promise()},c.requestBuiltinAndUserScripts=function(){n("Pine","ScriptLib.requestBuiltinAndUserScripts"),s.logNormal("Request built-in and user scripts");var e,t=window.user&&window.user.username,i={},r=new Promise((function(t,r){e=t,i.reject=r}));return Promise.all([c._pineFacadeAjax("GET","/list?filter=saved&user_name="+encodeURIComponent(t),void 0,!1),c._pineFacadeAjax("GET","/list?filter=standard",void 0,!0)]).then((function(t){s.logNormal("Request built-in and user scripts finished");var i=t[0],r=t[1];e(i.concat(r))})).catch((function(e){s.logWarn("Request built-in and user scripts finished with fail"),c._anyRequestAsyncFail(i,e)})),r},c.requestCandlestickScripts=function(){var e;n("Pine","ScriptLib.requestCandlestickScripts"),s.logNormal("Request candlestick scripts");var t={},i=new Promise((function(i,r){e=i,t.reject=r}));return c._pineFacadeAjax("GET","/list?filter=candlestick",void 0,!0).done((function(t){s.logNormal("Request candlestick scripts finished"),e(t)})).fail((function(e){s.logWarn("Request candlestick scripts finished with fail"),c._anyRequestAsyncFail(t,e)})),i};var h={time:-1/0,request:null};c.requestFundamentalScripts=function(){if(h.time+6e5>Date.now()&&null!==h.request)return s.logNormal("Return fundamentals from cache"),h.request;s.logNormal("Request fundamental scripts");var e=c._pineFacadeAjax("GET","/list?filter=fundamental",void 0,!1);return e.then((function(e){s.logNormal("Request fundamental scripts finished")})),e.fail((function(e){s.logWarn("Request fundamental scripts finished with fail, resetting cache"),h.request=null})),h.time=Date.now(),h.request=Promise.resolve(e.promise()),h.request},c.requestPineAddons=function(e){n("Pine","ScriptLib.requestPineAddons");var t=$.Deferred();return c._pineFacadeAjax("GET","/list?filter=addon&pine_id_prefix="+e).done((function(e){t.resolve(e)})).fail((function(e){c._anyRequestAsyncFail(t,e)})),t},c._updateAliveScriptInstances=function(e,t){var i={};i.scriptMetaInfo=e.result.metaInfo,i.scriptVersionToUpdate=t,o.emit("TVScriptModified",JSON.stringify(i)),setTimeout((function(){i.isSelfCall=!0,null!=c.scriptUpdater()&&c.scriptUpdater().onTVScriptModified(i)}),0)},c.saveNew=function(e,t,i,r){n("Pine","ScriptLib.saveNew");var o=$.Deferred();if(null==e||""===e)return o.reject($.t("Cannot save empty source code"));var s=window.user&&window.user.username,a=i?"&allow_overwrite=true":"",l="/save/new/?name="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(s)+a,u={source:e};return c._pineFacadeAjax("POST",l,u).done((function(e,t,i){c.clearSavedScriptsCache(),c._updateAliveScriptInstances(e,r),c._saveScriptAsyncDone(o,e)})).fail((function(e,t,i){c._anyRequestAsyncFail(o,e)})),o.promise()},c.saveNext=function(e,t,i,r,o){n("Pine","ScriptLib.saveNext");var s=null!=i?"&name="+encodeURIComponent(i):"",a=$.Deferred();if(null==t||""===t)return a.reject($.t("Cannot save empty source code"))
;var l=window.user&&window.user.username,u="/save/next/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(l)+"&allow_create_new="+!!o+s,h={source:t};return c._pineFacadeAjax("POST",u,h).done((function(e,t,i){c.clearSavedScriptsCache(),c._updateAliveScriptInstances(e,r),c._saveScriptAsyncDone(a,e)})).fail((function(e,t,i){c._anyRequestAsyncFail(a,e)})),a.promise()},c.deletePine=function(e){n("Pine","ScriptLib.deletePine");var t=$.Deferred(),i=window.user&&window.user.username,r="/delete/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(i);return c._pineFacadeAjax("POST",r).done((function(i,r,n){c.clearIsAuthToCaches(e),c.clearSavedScriptsCache(),t.resolve(i);var s={scriptIdPart:e};o.emit("TVScriptDeleted",JSON.stringify(s)),setTimeout((function(){s.isSelfCall=!0,null!=c.scriptUpdater()&&c.scriptUpdater().onTVScriptDeleted(s),c._pineDeleted.fire(e)}),0)})).fail((function(e,i,r){c._anyRequestAsyncFail(t,e)})),t.promise()},c.renamePine=function(e,t,i){n("Pine","ScriptLib.renamePine");var r=$.Deferred(),s=window.user&&window.user.username,a="/rename/"+encodeURIComponent(e)+"/?name="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(s)+"&force="+encodeURIComponent(!!i);return c._pineFacadeAjax("POST",a).done((function(i,n,s){c.clearSavedScriptsCache();var a={scriptIdPart:e,scriptName:t};o.emit("TVScriptRenamed",JSON.stringify(a)),setTimeout((function(){a.isSelfCall=!0,null!=c.scriptUpdater()&&c.scriptUpdater().onTVScriptRenamed(a)}),0),r.resolve(i)})).fail((function(e,t,i){c._anyRequestAsyncFail(r,e)})),r.promise()},c.publishNew=function(e,t){n("Pine","ScriptLib.publishNew");var i=$.Deferred(),r=window.user&&window.user.username,o="/publish/new/?access="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(r),s={source:e};return c._pineFacadeAjax("POST",o,s).done((function(e,t,r){c.clearSavedScriptsCache(),i.resolve(e)})).fail((function(e,t,r){c._anyRequestAsyncFail(i,e)})),i.promise()},c.publishNext=function(e,t){s.logNormal("ScriptLib.publishNext","pine"),n("Pine","ScriptLib.publishNext");var i=$.Deferred(),r=window.user&&window.user.username,o="/publish/next/"+encodeURIComponent(t)+"?user_name="+encodeURIComponent(r),a={source:e};return c._pineFacadeAjax("POST",o,a).done((function(e,t,r){c.clearSavedScriptsCache(),e.success||i.reject(e.reason),i.resolve(e)})).fail((function(e,t,r){c._anyRequestAsyncFail(i,e)})),i.promise()},loginStateChange.subscribe(c,c.clearAllCaches),e.exports=c}).call(this,i("aIyQ"))},nqXy:function(e,t,i){"use strict";i.r(t),i.d(t,"MouseWheelHelper",(function(){return r}));var r=function(){function e(){this._totalDeltaX=0,this._totalDeltaY=0,this._prevWheelTime=0}return e.prototype.processWheel=function(e){e.timeStamp-this._prevWheelTime>100&&this._reset(),this._totalDeltaX+=e.deltaX,this._totalDeltaY+=e.deltaY,this._prevWheelTime=e.timeStamp;var t={deltaX:e.deltaX,deltaY:e.deltaY};return 0===this._totalDeltaX||0===this._totalDeltaY||(Math.abs(this._totalDeltaX)>=Math.abs(3*this._totalDeltaY)&&(t.deltaY=0),
Math.abs(this._totalDeltaY)>=Math.abs(3*this._totalDeltaX)&&(t.deltaX=0)),t},e.prototype._reset=function(){this._totalDeltaX=0,this._totalDeltaY=0},e}()},oA7e:function(e,t,i){"use strict";!function(e){e.fn.selectable=function(t){return this.each((function(){var i=e(this);i.css("user-select",t?"text":"none"),i.css("-moz-user-select",t?"text":"-moz-none"),i.css("-webkit-user-select",t?"auto":"none"),(e.browser.msie||e.browser.opera)&&i.attr("unselectable",t?"off":"on")}))}}(jQuery)},oAJy:function(e,t,i){(function(t){e.exports=function e(t,i,r){function n(s,a){if(!i[s]){if(!t[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};t[s][0].call(c.exports,(function(e){var i=t[s][1][e];return n(i||e)}),c,c.exports,e,t,i,r)}return i[s].exports}for(var o=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){"use strict";var r=e(2);function n(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==n&&p(this,e)}function u(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function h(e,t,i){r((function(){var r;try{r=t(i)}catch(n){return o.reject(e,n)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var i=!1;function r(t){i||(i=!0,o.reject(e,t))}function n(t){i||(i=!0,o.resolve(e,t))}var s=f((function(){t(n,r)}));"error"===s.status&&r(s.value)}function f(e,t){var i={};try{i.value=e(t),i.status="success"}catch(r){i.status="error",i.value=r}return i}t.exports=i=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var i=new this.constructor(n);return this.state!==l?h(i,this.state===a?e:t,this.outcome):this.queue.push(new u(i,e,t)),i},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var i=f(d,t);if("error"===i.status)return o.reject(e,i.value);var r=i.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var n=-1,s=e.queue.length;++n<s;)e.queue[n].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var i=-1,r=e.queue.length;++i<r;)e.queue[i].callRejected(t);return e},i.resolve=function(e){return e instanceof this?e:o.resolve(new this(n),e)},i.reject=function(e){var t=new this(n);return o.reject(t,e)},i.all=function(e){var t=this
;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,r=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,l=-1,c=new this(n);++l<i;)u(e[l],l);return c;function u(e,n){t.resolve(e).then((function(e){s[n]=e,++a!==i||r||(r=!0,o.resolve(c,s))}),(function(e){r||(r=!0,o.reject(c,e))}))}},i.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,r=!1;if(!i)return this.resolve([]);for(var s,a=-1,l=new this(n);++a<i;)s=e[a],t.resolve(s).then((function(e){r||(r=!0,o.resolve(l,e))}),(function(e){r||(r=!0,o.reject(l,e))}));return l}},{2:2}],2:[function(e,i,r){(function(e){"use strict";var t,r,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,s=new n(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),t=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,t=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var i=c.length;i;){for(t=c,c=[],e=-1;++e<i;)t[e]();i=c.length}r=!1}i.exports=function(e){1!==c.push(e)||r||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,i,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(1))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(e,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var i=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)i.append(e[r]);return i.getBlob(t.type)}}"undefined"==typeof Promise&&void 0!==e&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,i){"function"==typeof t&&e.then(t),"function"==typeof i&&e.catch(i)}var c,u,h=Object.prototype.toString;function d(e){return"boolean"==typeof c?s.resolve(c):(t=e,new s((function(e){var i=o([""])
;t.objectStore("local-forage-detect-blob-support").put(i,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);e(i||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))).then((function(e){return c=e}));var t}function p(e,t){return new s((function(i,r){if(e.db){if(!t)return i(e.db);!function(e){var t=u[e.name],i={};i.promise=new s((function(e){i.resolve=e})),t.deferredOperations.push(i),t.dbReady?t.dbReady=t.dbReady.then((function(){return i.promise})):t.dbReady=i.promise}(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=n.open.apply(n,o);t&&(a.onupgradeneeded=function(t){var i=a.result;try{i.createObjectStore(e.storeName),t.oldVersion<=1&&i.createObjectStore("local-forage-detect-blob-support")}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(){r(a.error)},a.onsuccess=function(){i(a.result),function(e){var t=u[e.name].deferredOperations.pop();t&&t.resolve()}(e)}}))}function f(e){return o([function(e){for(var t=e.length,i=new ArrayBuffer(t),r=new Uint8Array(i),n=0;n<t;n++)r[n]=e.charCodeAt(n);return i}(atob(e.data))],{type:e.type})}function _(e){return e&&e.__local_forage_encoded_blob}function m(e){var t=this,i=t._initReady().then((function(){var e=u[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(i,e,e),i}var v={_driver:"asyncStorage",_initStorage:function(e){var t=this,i={db:null};if(e)for(var r in e)i[r]=e[r];u||(u={});var n=u[i.name];n||(n={forages:[],db:null,dbReady:null,deferredOperations:[]},u[i.name]=n),n.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=m);var o=[];function a(){return s.resolve()}for(var l=0;l<n.forages.length;l++){var c=n.forages[l];c!==t&&o.push(c._initReady().catch(a))}var h=n.forages.slice(0);return s.all(o).then((function(){return i.db=n.db,function(e){return p(e,!1)}(i)})).then((function(e){return i.db=e,function(e,t){if(!e.db)return!0;var i=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,n=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),n||i){if(i){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}(i,t._defaultConfig.version)?function(e){return p(e,!0)}(i):e})).then((function(e){i.db=n.db=e,t._dbInfo=i;for(var r=0;r<h.length;r++){var o=h[r];o!==t&&(o._dbInfo.db=i.db,o._dbInfo.version=i.version)}}))},iterate:function(e,t){var i=this,r=new s((function(t,r){i.ready().then((function(){var n=i._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName).openCursor(),s=1;o.onsuccess=function(){var i=o.result;if(i){var r=i.value;_(r)&&(r=f(r));var n=e(r,i.key,s++);void 0!==n?t(n):i.continue()}else t()},o.onerror=function(){r(o.error)}})).catch(r)}))
;return a(r,t),r},getItem:function(e,t){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new s((function(t,r){i.ready().then((function(){var n=i._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),_(e)&&(e=f(e)),t(e)},o.onerror=function(){r(o.error)}})).catch(r)}));return a(r,t),r},setItem:function(e,t,i){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new s((function(i,n){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===h.call(t)?d(o.db).then((function(e){return e?t:(i=t,new s((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:i.type})},r.readAsBinaryString(i)})));var i})):t})).then((function(t){var r=o.db.transaction(o.storeName,"readwrite"),s=r.objectStore(o.storeName);null===t&&(t=void 0),r.oncomplete=function(){void 0===t&&(t=null),i(t)},r.onabort=r.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)};var a=s.put(t,e)})).catch(n)}));return a(n,i),n},removeItem:function(e,t){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new s((function(t,r){i.ready().then((function(){var n=i._dbInfo,o=n.db.transaction(n.storeName,"readwrite"),s=o.objectStore(n.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var r=t._dbInfo,n=r.db.transaction(r.storeName,"readwrite"),o=n.objectStore(r.storeName).clear();n.oncomplete=function(){e()},n.onabort=n.onerror=function(){var e=o.error?o.error:o.transaction.error;i(e)}})).catch(i)}));return a(i,e),i},length:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var r=t._dbInfo,n=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).count();n.onsuccess=function(){e(n.result)},n.onerror=function(){i(n.error)}})).catch(i)}));return a(i,e),i},key:function(e,t){var i=this,r=new s((function(t,r){e<0?t(null):i.ready().then((function(){var n=i._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),s=!1,a=o.openCursor();a.onsuccess=function(){var i=a.result;i?0===e||s?t(i.key):(s=!0,i.advance(e)):t(null)},a.onerror=function(){r(a.error)}})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var r=t._dbInfo,n=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).openCursor(),o=[];n.onsuccess=function(){var t=n.result;t?(o.push(t.key),t.continue()):e(o)},n.onerror=function(){i(n.error)}})).catch(i)}));return a(i,e),i}
},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=/^~~local_forage_type~([^~]+)~/,b="__lfsc__:".length,S=b+"arbf".length,w=Object.prototype.toString;function P(e){var t,i,r,n,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<a;t+=4)i=g.indexOf(e[t]),r=g.indexOf(e[t+1]),n=g.indexOf(e[t+2]),o=g.indexOf(e[t+3]),u[l++]=i<<2|r>>4,u[l++]=(15&r)<<4|n>>2,u[l++]=(3&n)<<6|63&o;return c}function C(e){var t,i=new Uint8Array(e),r="";for(t=0;t<i.length;t+=3)r+=g[i[t]>>2],r+=g[(3&i[t])<<4|i[t+1]>>4],r+=g[(15&i[t+1])<<2|i[t+2]>>6],r+=g[63&i[t+2]];return i.length%3==2?r=r.substring(0,r.length-1)+"=":i.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var T={serialize:function(e,t){var i="";if(e&&(i=w.call(e)),e&&("[object ArrayBuffer]"===i||e.buffer&&"[object ArrayBuffer]"===w.call(e.buffer))){var r,n="__lfsc__:";e instanceof ArrayBuffer?(r=e,n+="arbf"):(r=e.buffer,"[object Int8Array]"===i?n+="si08":"[object Uint8Array]"===i?n+="ui08":"[object Uint8ClampedArray]"===i?n+="uic8":"[object Int16Array]"===i?n+="si16":"[object Uint16Array]"===i?n+="ur16":"[object Int32Array]"===i?n+="si32":"[object Uint32Array]"===i?n+="ui32":"[object Float32Array]"===i?n+="fl32":"[object Float64Array]"===i?n+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(n+C(r))}else if("[object Blob]"===i){var o=new FileReader;o.onload=function(){var i="~~local_forage_type~"+e.type+"~"+C(this.result);t("__lfsc__:blob"+i)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,b))return JSON.parse(e);var t,i=e.substring(S),r=e.substring(b,S);if("blob"===r&&y.test(i)){var n=i.match(y);t=n[1],i=i.substring(n[0].length)}var s=P(i);switch(r){case"arbf":return s;case"blob":return o([s],{type:t});case"si08":return new Int8Array(s);case"ui08":return new Uint8Array(s);case"uic8":return new Uint8ClampedArray(s);case"si16":return new Int16Array(s);case"ur16":return new Uint16Array(s);case"si32":return new Int32Array(s);case"ui32":return new Uint32Array(s);case"fl32":return new Float32Array(s);case"fl64":return new Float64Array(s);default:throw new Error("Unkown type: "+r)}},stringToBuffer:P,bufferToString:C},x={_driver:"webSQLStorage",_initStorage:function(e){var t=this,i={db:null};if(e)for(var r in e)i[r]="string"!=typeof e[r]?e[r].toString():e[r];var n=new s((function(e,r){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(n){return r(n)}i.db.transaction((function(n){n.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],(function(){t._dbInfo=i,e()}),(function(e,t){r(t)}))}))}));return i.serializer=T,n},iterate:function(e,t){var i=this,r=new s((function(t,r){i.ready().then((function(){var n=i._dbInfo;n.db.transaction((function(i){i.executeSql("SELECT * FROM "+n.storeName,[],(function(i,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){
var l=o.item(a),c=l.value;if(c&&(c=n.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new s((function(t,r){i.ready().then((function(){var n=i._dbInfo;n.db.transaction((function(i){i.executeSql("SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,i){var r=i.rows.length?i.rows.item(0).value:null;r&&(r=n.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,i){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new s((function(i,n){r.ready().then((function(){void 0===t&&(t=null);var o=t,s=r._dbInfo;s.serializer.serialize(t,(function(t,r){r?n(r):s.db.transaction((function(r){r.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(o)}),(function(e,t){n(t)}))}),(function(e){e.code===e.QUOTA_ERR&&n(e)}))}))})).catch(n)}));return a(n,i),n},removeItem:function(e,t){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new s((function(t,r){i.ready().then((function(){var n=i._dbInfo;n.db.transaction((function(i){i.executeSql("DELETE FROM "+n.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){t.executeSql("DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,e),i},length:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,i){var r=i.rows.item(0).c;e(r)}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,e),i},key:function(e,t){var i=this,r=new s((function(t,r){i.ready().then((function(){var n=i._dbInfo;n.db.transaction((function(i){i.executeSql("SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,i){var r=i.rows.length?i.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){t.executeSql("SELECT key FROM "+r.storeName,[],(function(t,i){for(var r=[],n=0;n<i.rows.length;n++)r.push(i.rows.item(n).key);e(r)}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,e),i}},I={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=t.name+"/",t.storeName!==this._defaultConfig.storeName&&(t.keyPrefix+=t.storeName+"/"),this._dbInfo=t,t.serializer=T,s.resolve()},iterate:function(e,t){var i=this,r=i.ready().then((function(){for(var t=i._dbInfo,r=t.keyPrefix,n=r.length,o=localStorage.length,s=1,a=0;a<o;a++){
var l=localStorage.key(a);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(n),s++)))return c}}}));return a(r,t),r},getItem:function(e,t){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=i.ready().then((function(){var t=i._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return a(r,t),r},setItem:function(e,t,i){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=r.ready().then((function(){void 0===t&&(t=null);var i=t;return new s((function(n,o){var s=r._dbInfo;s.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+e,t),n(i)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||o(a),o(a)}}))}))}));return a(n,i),n},removeItem:function(e,t){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=i.ready().then((function(){var t=i._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(r,t),r},clear:function(e){var t=this,i=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return a(i,e),i},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var i=this,r=i.ready().then((function(){var t,r=i._dbInfo;try{t=localStorage.key(e)}catch(n){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return a(r,t),r},keys:function(e){var t=this,i=t.ready().then((function(){for(var e=t._dbInfo,i=localStorage.length,r=[],n=0;n<i;n++)0===localStorage.key(n).indexOf(e.keyPrefix)&&r.push(localStorage.key(n).substring(e.keyPrefix.length));return r}));return a(i,e),i}},E={},L={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},O=[L.INDEXEDDB,L.WEBSQL,L.LOCALSTORAGE],A=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],M={description:"",driver:O.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},k={};k[L.INDEXEDDB]=function(){try{return!!n&&!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&n&&"function"==typeof n.open&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),k[L.WEBSQL]="function"==typeof openDatabase,k[L.LOCALSTORAGE]=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}();var D=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function R(e,t){e[t]=function(){var i=arguments;return e.ready().then((function(){return e[t].apply(e,i)}))}}function V(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var i in t)t.hasOwnProperty(i)&&(D(t[i])?arguments[0][i]=t[i].slice():arguments[0][i]=t[i])}return arguments[0]}
function B(e){for(var t in L)if(L.hasOwnProperty(t)&&L[t]===e)return!0;return!1}var N=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.INDEXEDDB=L.INDEXEDDB,this.LOCALSTORAGE=L.LOCALSTORAGE,this.WEBSQL=L.WEBSQL,this._defaultConfig=V({},M),this._config=V({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,i){var r=new s((function(t,i){try{var r=e._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void i(n);if(B(e._driver))return void i(o);for(var a=A.concat("_initStorage"),l=0;l<a.length;l++){var c=a[l];if(!c||!e[c]||"function"!=typeof e[c])return void i(n)}var u=s.resolve(!0);"_support"in e&&(u=e._support&&"function"==typeof e._support?e._support():s.resolve(!!e._support)),u.then((function(i){k[r]=i,E[r]=e,t()}),i)}catch(h){i(h)}}));return l(r,t,i),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,i){var r=this,n=s.resolve().then((function(){if(!B(e)){if(E[e])return E[e];throw new Error("Driver not found.")}switch(e){case r.INDEXEDDB:return v;case r.LOCALSTORAGE:return I;case r.WEBSQL:return x}}));return l(n,t,i),n},e.prototype.getSerializer=function(e){var t=s.resolve(T);return l(t,e),t},e.prototype.ready=function(e){var t=this,i=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(i,e,e),i},e.prototype.setDriver=function(e,t,i){var r=this;D(e)||(e=[e]);var n=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}var a=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=a.then((function(){var e=n[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function i(){for(;t<e.length;){var n=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(n).then((function(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready})).catch(i)}o();var a=new Error("No available storage method found.");return r._driverSet=s.reject(a),r._driverSet}()}}(n)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=s.reject(e),r._driverSet})),l(this._driverSet,t,i),this._driverSet},e.prototype.supports=function(e){return!!k[e]},
e.prototype._extend=function(e){V(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i];this.supports(n)&&t.push(n)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<A.length;e++)R(this,A[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=N},{3:3}]},{},[4])(4)}).call(this,i("yLpj"))},oIoN:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Disjoint Channel");function s(e,t){this._constructor="LineToolDisjointAngle";var n=t||s.createProperties();r.call(this,e,n),this.version=s.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("pBAL").DisjointChannelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.version=1,s.prototype.pointsCount=function(){return 3},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Disjoint Channel"},s.prototype.hasEditableCoordinates=function(){return!1},s.prototype.addPoint=function(e,t){return t&&t.shift()&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),r.prototype.addPoint.call(this,e)},s.prototype.setLastPoint=function(e,t){return t&&t.shift()&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),r.prototype.setLastPoint.call(this,e)},s.prototype.setPoint=function(e,t,i){var n=.5*(this._points[1].price+this._points[2].price);if(i&&i.shift()&&1===e){this._snapPoint45Degree(t,this.points()[0])}if(e<3&&r.prototype.setPoint.call(this,e,t),0!==e&&2!==e)if(1===e){var o=this._points[1].price-n;this._points[2].price=this._points[1].price-2*o}else if(3===e){o=t.price-this._points[2].price;this._points[0].price=this._points[1].price-o,this._points[0].index=t.index}},s.prototype.canHasAlert=function(){return!0},s.prototype._getAlertPlots=function(){var e=this._points[0],t=this._points[1],i=[];e.index<=t.index?(i.push(e),i.push(t)):(i.push(t),i.push(e));var r=this._points[2];r.time=t.time,r.index=t.index;var n,o,s,a,l={price:r.price+(t.price-e.price),time:e.time,index:e.index},c=[];r.index<=l.index?(c.push(r),c.push(l)):(c.push(l),c.push(r)),i[0].price>c[0].price?(n=i,o=c):c[0].price>i[0].price||c[1].price>i[1].price?(n=c,o=i):(n=i,o=c);var u=this.properties().extendLeft.value(),h=this.properties().extendRight.value();return e.index<=t.index?(s=u,a=h):(s=h,a=u),[this._linePointsToAlertPlot(n,"Upper",s,a),this._linePointsToAlertPlot(o,"Lower",s,a)]},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("vm8R").GeneralTrendFiguresDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetooldisjointangle",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolDisjointChannel=s},oNDq:function(e,t,i){"use strict";i.r(t),
i.d(t,"createConfirmDialog",(function(){return o}));var r=i("mrSG"),n=(i("YFKU"),{actions:[{key:13,name:"yes",text:window.t("Yes"),type:"success"},{method:"close",name:"no",text:window.t("No"),type:"default"}],actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',content:window.t("Are you sure?"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',destroyOnClose:!0,title:window.t("Confirmation"),width:400,dataset:{"dialog-type":"confirm-dialog"}});function o(e){return new Promise((function(t){Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(14),i.e(26),i.e(17),i.e(24),i.e(203),i.e("create-dialog")]).then(function(o){var s=i("YDhE").createDialog;t(s(Object(r.__assign)(Object(r.__assign)({},n),e)))}.bind(null,i)).catch(void 0)}))}},oNU6:function(e,t,i){"use strict";i.r(t),i.d(t,"MarketStatusIndicator",(function(){return s}));var r=i("mrSG"),n=(i("YFKU"),i("0wn8"),i("r8Gw")),o={classMap:{invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",holiday:"tv-market-status--holiday",replay:"tv-market-status--replay"},classSuffix:"",data:{},extraTitle:"",labelMap:{invalid:window.t("Invalid Symbol"),market:window.t("Market Open"),out_of_session:window.t("Market Closed"),post_market:window.t("Post Market"),pre_market:window.t("Pre Market"),loading:window.t("Loading"),holiday:window.t("Holiday"),replay:""},short:!1,showTooltip:!0,tooltipType:"custom"},s=function(e){function t(t){var i=e.call(this,t)||this;return i._quoteSessionPrefix="market-status-indicator",i._componentClass="tv-market-status",i._extraTitle="",i._init(t),i}return Object(r.__extends)(t,e),t.prototype.setStatus=function(e,t){var i={values:{current_session:e}};this.update(i,t)},t.prototype.getTooltipText=function(){var t=e.prototype.getTooltipText.call(this);return""===t||""!==this._extraTitle&&(t=t+", "+this._extraTitle),t},t.prototype.setExtraTitle=function(e){this._extraTitle=e},t.prototype.reset=function(){this._clearClasses(),this._labelEl.textContent="",this._extraTitle="",this._el.setAttribute("title",""),this._value=""},t.prototype.enableShortMode=function(t){void 0===t&&(t=!0),void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),e.prototype.enableShortMode.call(this)},t.prototype.disableShortMode=function(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),e.prototype.disableShortMode.call(this)},t.prototype._renderLabel=function(){this._labelEl.textContent=this.getLabel()},t.prototype._getValueFromData=function(e){return void 0!==e.values&&void 0!==e.values.current_session?e.values.current_session:this.getValue()},t.prototype._render=function(){this._renderLabelElement(),this._renderDotElement(),e.prototype._render.call(this)},t.prototype._init=function(t){var i=Object.assign({},o,t)
;e.prototype._init.call(this,i),this.setExtraTitle(i.extraTitle),this._render()},t.prototype._renderLabelElement=function(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(this._componentClass+"__label"),this._labelEl.classList.add(this._componentClass+"__label"+this._classSuffix),this._el.appendChild(this._labelEl))},t.prototype._renderDotElement=function(){void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(this._componentClass+"__dot"),this._dotEl.classList.add(this._componentClass+"__dot"+this._classSuffix),this._el.appendChild(this._dotEl))},t}(n.a)},oOPW:function(e,t,i){"use strict";i.r(t),i.d(t,"createGoProDialog",(function(){return n}));var r=i("mrSG");i("bSeV");function n(e){var t;return Object(r.__awaiter)(this,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(12),i.e(31),i.e(39),i.e(302),i.e(0),i.e(9),i.e(10),i.e(13),i.e(17),i.e(137),i.e("conversion"),i.e("gopro-dialog")]).then(i.bind(null,"aZey"))];case 1:return n=r.sent(),[4,null===(t=window.pro)||void 0===t?void 0:t.ensureValidShopConf()];case 2:return r.sent(),n.renderGoproDialog(e),[2]}}))}))}},"oR7+":function(e,t,i){"use strict";i.r(t),i.d(t,"defaultSettings",(function(){return u})),i.d(t,"saveState",(function(){return d})),i.d(t,"getSettingsProperty",(function(){return p}));var r,n=i("Vdly"),o=i("ogJP"),s=i("8Uy/"),a=i("wZIs"),l=i("tc+8"),c=i.n(l),u={visible:!0,color:"rgba( 245, 124, 0, 1)",highlightColor:"rgba( 245, 124, 0, 1)",hoverColor:"rgba( 245, 124, 0, 1)",line:{visible:!0,style:s.LINESTYLE_DASHED,width:1}};function h(){var e=Object(n.getJSON)("alertLabels",null);if(null===e){var t=Object(a.defaults)("chartproperties");t&&t.alertsProperties&&t.alertsProperties.labels&&(e=t.alertsProperties.labels)}return null===e&&(e=Object(o.clone)(u)),e}function d(){r&&Object(n.setJSON)("alertLabels",r.state())}function p(){return r||((r=new c.a(h())).listeners().subscribe(null,d),n.onSync.subscribe(null,(function(){r.merge(h())})),r)}},oWyD:function(e,t,i){},oXaB:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"PriceAxisLastValueMode",(function(){return r})),function(e){e[e.LastPriceAndPercentageValue=0]="LastPriceAndPercentageValue",e[e.LastValueAccordingToScale=1]="LastValueAccordingToScale"}(r||(r={}))},oYVD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=!("undefined"==typeof window||!window.document||!window.document.createElement);function o(){if(r)return r;if(!n||!window.document.body)return"indeterminate";var e=window.document.createElement("div");return e.appendChild(document.createTextNode("ABCD")),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),r="reverse",e.scrollLeft>0?r="default":(e.scrollLeft=1,0===e.scrollLeft&&(r="negative")),document.body.removeChild(e),r}
t._setScrollType=function(e){r=e},t.detectScrollType=o,t.getNormalizedScrollLeft=function(e,t){var i=e.scrollLeft;if("rtl"!==t)return i;var r=o();if("indeterminate"===r)return Number.NaN;switch(r){case"negative":return e.scrollWidth-e.clientWidth+i;case"reverse":return e.scrollWidth-e.clientWidth-i}return i},t.setNormalizedScrollLeft=function(e,t,i){if("rtl"===i){var r=o();if("indeterminate"!==r)switch(r){case"negative":e.scrollLeft=e.clientWidth-e.scrollWidth+t;break;case"reverse":e.scrollLeft=e.scrollWidth-e.clientWidth-t;break;default:e.scrollLeft=t}}else e.scrollLeft=t}},odCa:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("fgLi").DataSource,o=i("tc+8"),s=i("Ocx9").DefaultProperty,a=i("jTis").CalloutConsts,l=window.t("Callout");function c(e,t){this._constructor="LineToolCallout";var n=t||c.createProperties();r.call(this,e,n),this._barOffset=0,this._timeScale=e.timeScale(),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("B4Hi").CalloutPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(c,r),c.prototype.pointsCount=function(){return 2},c.prototype.translatedType=function(){return l},c.prototype.name=function(){return"Callout"},c.prototype.correctPoints=function(e){var t=this._currentMovingPoint.index-this._startMovingPoint.index,i=this._currentMovingPoint.price-this._startMovingPoint.price,r=e[1];r.index+=t,r.price+=i,e[1]=r},c.prototype.addPoint=function(e){var t=r.prototype.addPoint.call(this,e);return t&&this._calculateBarOffset(),t},c.prototype._calculateBarOffset=function(){this.points().length>1&&(this._barOffset=this.points()[1].index-this.points()[0].index)},c.prototype.setLastPoint=function(e){r.prototype.setLastPoint.call(this,e),2===this.points().length&&this._calculateBarOffset()},c.prototype.setPoint=function(e,t){switch(e){case 0:r.prototype.setPoint.call(this,e,t),this._calculateBarOffset();break;case 1:var i=this.properties();if(!i.wordWrapWidth)return;var n=this._points,o=this._dragStartLeftEdgeIndex,s=Math.round((t.index-o)/2);if(isFinite(o)&&isFinite(s)){n[1]={index:o+s,price:n[1].price},this._calculateBarOffset(),this.normalizePoints();var l=this._timeScale.indexToCoordinate(o+2*s)-this._timeScale.indexToCoordinate(o)-a.RoundRadius-a.TextMargins;if(!isFinite(l))return;i.wordWrapWidth.setValue(Math.max(a.MinWidth,l));break}n[1]=t,this._calculateBarOffset(),this.normalizePoints()}},c.prototype.startDragPoint=function(e,t){var i=this.properties();1===e&&i.wordWrap&&i.wordWrap.value()&&(this._dragStartLeftEdgeIndex=2*this.points()[1].index-t.index)},c.prototype.move=function(e,t,i){r.prototype.move.call(this,e,t,i),this._calculateBarOffset()},c.prototype.state=function(e){var t=r.prototype.state.call(this,e);return t.barOffset=this._barOffset,t},c.prototype.restoreData=function(e){e.barOffset?this._barOffset=e.barOffset:this._calculateBarOffset(),this._calculatePoint2()},c.prototype.setPriceScale=function(e){n.prototype.setPriceScale.call(this,e),e&&e.priceRange()&&this._calculatePoint2()},
c.prototype.template=function(){var e=r.prototype.template.call(this);return e.text=this.properties().childs().text.value(),e},c.prototype._applyTemplateImpl=function(e){r.prototype._applyTemplateImpl.call(this,e),this.properties().childs().text.setValue(e.text)},c.prototype._calculatePoint2=function(){if(!(this._model.lineBeingEdited()===this||this._model.sourcesBeingMoved().includes(this)||this._points.length<2)){var e=this.points()[0],t=this.points()[1];this._points[1]={price:t.price,index:e.index+this._barOffset}}},c.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("xhf0").CalloutDefinitionsViewModel}.bind(null,i)).catch(i.oe)},c.createProperties=function(e){var t=new s("linetoolcallout",e);return c._configureProperties(t),t},c._configureProperties=function(e){r._configureProperties(e),e.hasChild("text")||e.addChild("text",new o(window.t("Text"))),e.addExclusion("text")},t.LineToolCallout=c},ogJP:function(e,t,i){(function(e){var t,i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=function(e){return"object"==typeof e&&null!==e};function n(e){return"number"==typeof e&&isFinite(e)}function o(e){return null!=e&&e.constructor===Function}function s(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}"undefined"!=typeof window?(t=window.TradingView=window.TradingView||{},window.isNumber=n,window.isFunction=o,window.inherit=s,window.isArray=i):t=this.TradingView=this.TradingView||{},t.isNaN=function(e){return!(e<=0||e>0)},t.isAbsent=function(e){return null==e},t.isExistent=function(e){return null!=e},Number.isNaN=Number.isNaN||function(e){return e!=e},t.isSameType=function(e,t){return Number.isNaN(e)||Number.isNaN(t)?Number.isNaN(e)===Number.isNaN(t):{}.toString.call(e)==={}.toString.call(t)},t.isInteger=function(e){return"number"==typeof e&&e%1==0},t.parseBool=function(e){return!0===e||"true"===e},t.isBoolean=function(e){return!0===e||!1===e},t.isString=function(e){return null!=e&&e.constructor===String},t.isInherited=function(e,t){if(null==e||null==e.prototype)throw new TypeError("isInherited: child should be a constructor function");if(null==t||null==t.prototype)throw new TypeError("isInherited: parent should be a constructor function");return e.prototype instanceof t||e.prototype===t.prototype},t.TypeValidator=function(e){this.m_type=e},t.TypeValidator.prototype.check=function(e){return e.constructor===this.m_type||t.isInherited(e.constructor,this.m_type)},t.PredicateValidator=function(e){this.m_predicate=e},t.PredicateValidator.prototype.check=function(e){return this.m_predicate(e)},t.clone=function(e){if(!e||"object"!=typeof e)return e;var i,r,n;for(r in i="function"==typeof e.pop?[]:{},e)e.hasOwnProperty(r)&&(n=e[r],i[r]=n&&"object"==typeof n?t.clone(n):n);return i},t.deepEquals=function(e,r,n){if(n||(n=""),e===r)return[!0,n];if(o(e)&&(e=void 0),o(r)&&(r=void 0),
void 0===e&&void 0!==r)return[!1,n];if(void 0===r&&void 0!==e)return[!1,n];if(null===e&&null!==r)return[!1,n];if(null===r&&null!==e)return[!1,n];if("object"!=typeof e&&"object"!=typeof r)return[e===r,n];if(Array.isArray(e)&&Array.isArray(r)){var s=e.length;if(s!==r.length)return[!1,n];for(var a=0;a<s;a++){if(!(c=t.deepEquals(e[a],r[a],n+"["+a+"]"))[0])return c}return[!0,n]}if(i(e)||i(r))return[!1,n];if(Object.keys(e).length!==Object.keys(r).length)return[!1,n];for(var l in e){var c;if(!(c=t.deepEquals(e[l],r[l],n+"["+l+"]"))[0])return c}return[!0,n]},t.merge=function(e,i){for(var r in i)null!==i[r]&&"object"==typeof i[r]&&e.hasOwnProperty(r)?t.merge(e[r],i[r]):e[r]=i[r];return e},t.mergeObj=function(e,i){for(var r in i)i[r].constructor===Object&&e.hasOwnProperty(r)?t.mergeObj(e[r],i[r]):e[r]=i[r];return e},t.mergeWithRules=function(e,i,r,n){for(var o in i){var s=n?n+"."+o:o;r&&s in r?e[o]=r[s](e[o],i[o]):"object"==typeof i[o]&&e.hasOwnProperty(o)?t.merge(e[o],i[o],r,s):e[o]=i[o]}},t.sortMultipleFunction=function(){var e=[].slice.call(arguments),t=e.length;return function(i,r){var n,o,s,a,l,c,u;for(u=0;u<t&&(c=0,n=i[a="string"==typeof(s=e[u])?s:s.name],o=r[a],"function"==typeof s.fn&&(n=s.fn(n),o=s.fn(o)),l=s.reverse?-1:1,n<o&&(c=-1*l),n>o&&(c=1*l),0===c);u++);return c}},e&&e.exports&&(e.exports={inherit:s,clone:t.clone,merge:t.merge,isNumber:n,isInteger:t.isInteger,isBoolean:t.isBoolean,isString:t.isString,isObject:r,isHashObject:function(e){return r(e)&&-1!==e.constructor.toString().indexOf("function Object")},isPromise:function(e){return r(e)&&e.then},isNaN:t.isNaN,isAbsent:t.isAbsent,isExistent:t.isExistent,isSameType:t.isSameType,isArray:i,isFunction:o,parseBool:t.parseBool,parseJSONorNot:function(e){return"string"==typeof e?JSON.parse(e):e},deepEquals:t.deepEquals,notNull:function(e){return null!==e},declareClassAsPureInterface:function(e,t){for(var i in e.prototype)"function"==typeof e.prototype[i]&&e.prototype.hasOwnProperty(i)&&(e.prototype[i]=function(){throw new Error(t+"::"+i+" is an interface member declaration and must be overloaded in order to be called")})},requireFullInterfaceImplementation:function(e,t,i,r){for(var n in i.prototype)if("function"==typeof i.prototype[n]&&!e.prototype[n])throw new Error("Interface implementation assertion failed: "+t+" does not implement "+r+"::"+n+" function")}})}).call(this,i("YuTi")(e))},oiRj:function(e,t,i){"use strict";i.r(t),i.d(t,"publishChart",(function(){return l})),i.d(t,"publishChartWidget",(function(){return c}));i("P5fv");var r=i("Z9Tc"),n=i("Vdly"),o=0;function s(){clearTimeout(o),$(".publish-chart-button").removeClass("process")}function a(e,t){!0!==t&&n.getBool("publish.showIntroText",!0)?Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(26),i.e(24),i.e(194),i.e("publish-intro-dialog")]).then(function(t){(0,i("/q6v").createPublishIntroDialog)().then((function(t){n.setValue("publish.showIntroText",!t),window.saver.publishChart(e)}))}.bind(null,i)).catch(void 0):window.saver.publishChart(e)}function l(e,t){
window.runOrSignIn((function(){var i;0!==(i=$(".publish-chart-button")).length&&(i.addClass("process"),o=setTimeout(s,3e4)),Object(r.whenVerified)({showDialog:!0,source:"Publish chart"}).done(a.bind(null,e,t)).always(s)}),{source:"Publish chart",sourceMeta:"Chart"})}function c(e){l(e,!0)}},oiZD:function(e,t,i){"use strict";i.r(t),i.d(t,"watchedTheme",(function(){return s})),i.d(t,"setTheme",(function(){return a}));var r=i("hY0g"),n=i.n(r),o=i("bMzf"),s=new n.a;function a(e){s.setValue(e)}s.subscribe((function(e){Object(o.applyTheme)(e,window)}))},okVO:function(e,t,i){"use strict";i.r(t);var r=i("IiTo"),n=i("E6p6");function o(e,t,i,r,o){var s=0,a=t;e.moveTo(a);for(var l=0,c=Number.MAX_VALUE,u=!1,h=t,d=[];!r(s,a);){if(l>15)throw new Error("Internal error 0x10 while extrapolating.");var p=e.indexOfBar(a);if(p===n.a.PRE_SESSION&&1===i)a=e.startOfBar(0),e.moveTo(a);else if(p===n.a.PRE_SESSION&&-1===i)a=e.startOfBar(n.a.PRE_SESSION)-1,e.moveTo(a);else if(p===n.a.POST_SESSION&&1===i)a=e.startOfBar(n.a.POST_SESSION),e.moveTo(a);else{if(p===n.a.POST_SESSION&&-1===i)throw new Error("Internal error 0x12 while extrapolating.");var f=e.startOfBar(p);if(f>t&&i>0||t>f&&i<0){if(u&&c===f)throw new Error("Internal error 0x11 while extrapolating.");u=!0,c=f,l=0,s++,h=f,o&&d.push(h)}if(0===p&&-1===i)a=f-1;else{a=e.startOfBar(p+i);var _=e.startOfBar(n.a.POST_SESSION);a>_&&(e.moveTo(_),a=e.startOfBar(0))}}l++}return{time:h,times:d,count:s}}i.d(t,"SyncModel",(function(){return a}));var s=0,a=function(){function e(e,t){this._extrapolatedData=[],this._modelId=s++,this._builderCache=null,this._resolution=t,this._symbolInfo=e,this._valid=Boolean(e.timezone)&&Boolean(e.session),this._session=new r.a(e.timezone,e.session,e.holidays,e.corrections)}return e.prototype.getSymbolInfo=function(){return this._symbolInfo},e.prototype.getSession=function(){return this._session},e.prototype.getResolution=function(){return this._resolution},e.prototype.uniqueId=function(){return this._modelId},e.prototype.distance=function(e,t){if(!this.isValid())return{success:!1};var i=this._extrapolatedData.length,r=0!==i?this._extrapolatedData[0]:null,n=null!==r?this._extrapolatedData[i-1]:null;if(1e3*e!==r&&(this._extrapolatedData=[1e3*e],r=null,n=null),null===r||null!==n&&1e3*t>n){var s=function e(t,i,r,n,s){if(void 0===s&&(s=!1),i>r){var a=e(t,r,i,n,s);return a.count=-a.count,a}return o(t,i,1,(function(e,t){return t>r||0!==n&&e>n}),s)}(this._barBuilder(),n||1e3*e,1e3*t,2e3,!0);this._extrapolatedData=this._extrapolatedData.concat(s.times),i=this._extrapolatedData.length}if((n=this._extrapolatedData[i-1])<1e3*t)return{success:!1};var a=this._extrapolatedData.indexOf(1e3*t);return-1===a?{success:!1}:{success:!0,result:a}},e.prototype.projectTime=function(e,t){if(!this.isValid())return e;var i=this._extrapolatedData.length,r=i>0?this._extrapolatedData[0]:null,n=null!==r?this._extrapolatedData[i-1]:null;if(1e3*e!==r&&(this._extrapolatedData=[1e3*e],r=null,n=null),null===r||t>=i){var s=function(e,t,i,r){void 0===r&&(r=!1);var n=i<0?-1:1;return o(e,t,n,(function(e,t){
return e>=i*n}),r)}(this._barBuilder(),n||1e3*e,t-i+1,!0);this._extrapolatedData=this._extrapolatedData.concat(s.times),i=this._extrapolatedData.length}return i<t?e:this._extrapolatedData[t]/1e3},e.prototype.isValid=function(){return this._valid},e.prototype._barBuilder=function(){return null===this._builderCache&&(this._builderCache=Object(r.b)(this._resolution,this._session,this._session)),this._builderCache},e}()},onDC:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("7MZv"),s=i("4O8T"),a=i.n(s),l=i("0YCj"),c=i.n(l),u=i("txPx"),h=window.t("Move All Scales To Left"),d=window.t("Move All Scales To Right"),p=Object(u.getLogger)("Chart.MergeAllScales");var f=i("RDU5"),_=function(e){function t(t,i,r,n,o,s){var a=e.call(this,s)||this;return a._model=t,a._paneIndex=t.panes().indexOf(i),a._targetPosition=n,a._targetIndex=o,a._scaleId=r.id(),a._sourcePosition=i.priceScalePosition(r),"overlay"!==a._sourcePosition&&(a._sourceIndex=i.priceScaleIndex(r,a._sourcePosition)),a}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this._model.panes()[this._paneIndex],t=Object(n.ensureNotNull)(e.getPriceScaleById(this._scaleId));e.movePriceScale(t,this._targetPosition,this._targetIndex),this._model.fullUpdate()},t.prototype.undo=function(){var e=this._model.panes()[this._paneIndex],t=Object(n.ensureNotNull)(e.getPriceScaleById(this._scaleId));e.movePriceScale(t,this._sourcePosition,this._sourceIndex),this._model.fullUpdate()},t}(f.UndoCommand),m=i("CW80"),v=function(e){function t(t,i,r,n){var o=e.call(this,n)||this;return o._createdIds=[],o._model=t,o._withoutShift=r,o._origStates=i.map((function(e){return e.state(!0)})),o}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this,t=this._origStates.map((function(t,i){var r=Object(n.ensureNotNull)(e._model.dataSourceForId(t.id)),o=0===e._createdIds.length?void 0:Object(n.ensureDefined)(e._createdIds[i]),s=Object(m.cloneLineTool)(e._model,r,!e._withoutShift,o),a=Object(n.ensureNotNull)(r.priceScale());return Object(n.ensureNotNull)(e._model.paneForSource(r)).addDataSource(s,a,!1),e._model.updateSource(s),s}));0===this._createdIds.length&&(this._createdIds=t.map((function(e){return e.id()}))),this._model.setShouldBeSavedEvenIfHidden(!0)},t.prototype.undo=function(){var e=this;this._createdIds.forEach((function(t){var i=Object(n.ensureNotNull)(e._model.dataSourceForId(t));e._model.removeSource(i)}))},t.prototype.newIds=function(){return this._createdIds},t}(f.UndoCommand),g=i("wFwD");function y(e,t){var i=new Set,r=function(t){e.children(t,!1).forEach((function(e){i.has(e)||(i.add(e),r(e))}))};return t.forEach(r),t.filter((function(e){return!i.has(e)})).map((function(t){return function e(t,i){for(var r=[],n=t.children(i,!1),o=0;o<n.length;o++)r=r.concat(e(t,n[o]));return r.push(i),r}(e,t)})).reduce((function(e,t){return e.concat(t)}),[])}var b=i("GVHu"),S=(i("YFKU"),i("HbRj"),window.t("Exclude line tools from group {group}")),w=function(e){function t(t,i,r){var n=e.call(this,S.format({group:i.name()}))||this;return n._model=t,n._groupId=i.id,
n._groupName=i.name(),n._lineToolsIds=r.map((function(e){return e.id()})),n}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this,t=Object(n.ensureNotNull)(this._model.lineToolsGroupModel().groupForId(this._groupId)),i=this._lineToolsIds.map((function(t){return e._model.dataSourceForId(t)}));t.excludeLineTools(i),0===t.lineTools().length&&this._model.lineToolsGroupModel().removeGroup(t)},t.prototype.undo=function(){var e=this,t=this._lineToolsIds.map((function(t){return e._model.dataSourceForId(t)})),i=this._model.lineToolsGroupModel().groupForId(this._groupId);null!==i?i.addLineTools(t):this._model.lineToolsGroupModel().createGroup(t,this._groupName,this._groupId)},t}(f.UndoCommand),P=Object(u.getLogger)("Chart.RemoveSourcesCommand"),C=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n._excludeLineToolsUndoCommands=[],n._chartModel=t,n._sourceIds=y(t,i).map((function(e){return e.id()})),n._sourceStates=[],n._paneIndexes=[],n._priceScalePositionIds=[],n._paneStates=[],n._restorePanes=[],n}return Object(r.__extends)(t,e),t.prototype.removedIds=function(){return this._sourceIds},t.prototype.redo=function(){var e=this,t=this._chartModel.panes().length,i=this._sourceIds.map((function(t){return Object(n.ensureNotNull)(e._chartModel.dataSourceForId(t))}));this._sourceStates=i.map((function(e){return Object(n.ensureNotNull)(e.state(!1))}));var r=i.map((function(t){return Object(n.ensureNotNull)(e._chartModel.paneForSource(t))}));this._paneIndexes=r.map((function(t){return e._chartModel.panes().indexOf(t)}));var o=this._chartModel.lineToolsGroupModel(),s=new Map;i.forEach((function(e){if(Object(m.isLineTool)(e)){var t=o.groupForLineTool(e);if(null!==t){var i=s.get(t)||[];i.push(e),s.set(t,i)}}})),s.forEach((function(t,i){var r=new w(e._chartModel,i,t);r.redo(),e._excludeLineToolsUndoCommands.push(r)})),this._priceScalePositionIds=i.map((function(e,t){if(Object(m.isLineTool)(e))return null;var i=Object(n.ensureNotNull)(e.priceScale()),o=r[t].priceScalePosition(i);return{id:i.id(),position:o,priceScaleIndex:r[t].priceScaleIndex(i,o)}}));var a=new Set;i.forEach((function(t,i){Object(m.isLineTool)(t)||a.add(e._paneIndexes[i])})),this._paneStates=i.map((function(t,i){var n=e._paneIndexes[i];return a.has(n)?r[i].state():null})),this._restorePanes=i.map((function(t){return e._chartModel.removeSource(t)})),i.forEach((function(e){e instanceof b.Study&&Object(g.trackStudies)(e,"remove")})),t!==this._chartModel.panes().length&&this._chartModel.setShouldBeSavedEvenIfHidden(!0)},t.prototype.undo=function(){for(var e=this,t=[],i=this._sourceStates.length-1;i>=0;i--){var r=this._chartModel.restoreSource(this._restorePanes[i],this._paneIndexes[i],this._paneStates[i],this._sourceStates[i],this._priceScalePositionIds[i]);t.push(r)}t.some((function(i,r){return i.id()!==e._sourceIds[t.length-r-1]}))&&P.logError("Source was restored improperly - source ids does not match"),this._excludeLineToolsUndoCommands.forEach((function(e){return e.undo()}))},t}(f.UndoCommand),T=i("Ltzl"),x=function(e){function t(t,i,r){
var o=e.call(this,r)||this;o._chartModel=t,o._sourceId=i.id();var s=Object(n.ensureNotNull)(i.priceScale());o._initialPriceScaleId=s.id();var a=Object(n.ensureNotNull)(t.paneForSource(i));return o._initialPriceScalePosition=a.priceScalePosition(s),o._initialPriceScaleIndex=a.priceScaleIndex(s,o._initialPriceScalePosition),o._initialPaneIndex=t.panes().indexOf(a),o}return Object(r.__extends)(t,e),t}(f.UndoCommand),I=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this,t=Object(n.ensureNotNull)(this._chartModel.dataSourceForId(this._sourceId)),i=this._chartModel.children(t,!0);i.forEach((function(t){return e._chartModel.detachSource(t)})),this._chartModel.detachSource(t);var r=this._chartModel.createPane(this.targetPaneIndex()),o=r.findSuitableScale(t);r.addDataSource(t,o,!1),i.forEach((function(e){return r.addDataSource(e,o,!1)})),this._chartModel.fullUpdate(),this._chartModel.setShouldBeSavedEvenIfHidden(!0)},t.prototype.undo=function(){var e=this,t=Object(n.ensureNotNull)(this._chartModel.dataSourceForId(this._sourceId)),i=this._chartModel.children(t,!0);i.forEach((function(t){return e._chartModel.detachSource(t)}));var r=this._chartModel.detachSource(t);Object(n.assert)(r,"Undo of detaching must remove pane");var o=this._chartModel.panes()[this._initialPaneIndex],s=o.getPriceScaleById(this._initialPriceScaleId);null===s&&(s=o.createPriceScaleAtPosition(this._initialPriceScalePosition,this._initialPriceScaleIndex)),o.addDataSource(t,s,!0),i.forEach((function(e){return o.addDataSource(e,s,!1)})),this._chartModel.fullUpdate()},t}(x),E=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return Object(r.__extends)(t,e),t.prototype.targetPaneIndex=function(){return this._initialPaneIndex+1},t}(I),L=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return Object(r.__extends)(t,e),t.prototype.targetPaneIndex=function(){return this._initialPaneIndex},t}(I),O=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return Object(r.__extends)(t,e),t.prototype.targetPaneIndex=function(){return this._chartModel.panes().length},t}(I),A=function(e){function t(t,i,r){var n=e.call(this,t,i,r)||this;return n._restorePane=!1,n}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this,t=this._chartModel.panes().length,i=this._chartModel.panes()[this._targetPaneIndex()],r=Object(n.ensureNotNull)(this._chartModel.dataSourceForId(this._sourceId)),o=this._chartModel.children(r,!0);o.forEach((function(t){return e._chartModel.detachSource(t)})),this._restorePane=this._chartModel.detachSource(r);var s=i.findSuitableScale(r);if(i.addDataSource(r,s,!1),o.forEach((function(e){return i.addDataSource(e,s,!1)})),r===this._chartModel.mainSeries()){var a=i.priceScalePosition(s);i.movePriceScale(s,a,0)}this._chartModel.fullUpdate(),t!==this._chartModel.panes().length&&this._chartModel.setShouldBeSavedEvenIfHidden(!0)},t.prototype.undo=function(){var e,t=this
;e=this._restorePane?this._chartModel.createPane(this._initialPaneIndex):this._chartModel.panes()[this._initialPaneIndex];var i=Object(n.ensureNotNull)(this._chartModel.dataSourceForId(this._sourceId)),r=this._chartModel.children(i,!0);r.forEach((function(e){return t._chartModel.detachSource(e)})),this._chartModel.detachSource(i);var o=e.getPriceScaleById(this._initialPriceScaleId);null===o&&(o=e.createPriceScaleAtPosition(this._initialPriceScalePosition,this._initialPriceScaleIndex)),e.addDataSource(i,o,!0),r.forEach((function(t){return e.addDataSource(t,o,!1)})),this._chartModel.fullUpdate()},t}(x),M=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return Object(r.__extends)(t,e),t.prototype._targetPaneIndex=function(){return this._initialPaneIndex-1},t}(A),k=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return Object(r.__extends)(t,e),t.prototype._targetPaneIndex=function(){return this._initialPaneIndex+1},t}(A),D=function(e){function t(t,i,r,n){var o=e.call(this,t,i,n)||this;return o._targetPane=r,o}return Object(r.__extends)(t,e),t.prototype._targetPaneIndex=function(){return this._targetPane},t}(A),R=i("s1Gx"),V=function(e){function t(t,i,r,n,o){void 0===o&&(o=!0);var s=e.call(this,"Create line "+r,!1)||this;return s._lineId=null,s._lineState=null,s._model=t,s._paneIndex=t.panes().indexOf(i),s._lineTool=r,s._ownerSourceId=n.id(),s._needCopyToOtherCharts=o,s}return Object(r.__extends)(t,e),t.prototype.startCreatingLine=function(e,t,i){var r=this._model.panes()[this._paneIndex],n=this._model.dataSourceForId(this._ownerSourceId),o=this._model.createLineTool(r,e,this._lineTool,t,i,n);return this._lineId=o.id(),!this._model.lineBeingCreated()},t.prototype.continueCreatingLine=function(e,t,i,r){var n=this._model.coninueCreatingLine(e,t,i,r);return n&&this._model.setShouldBeSavedEvenIfHidden(!0),n},t.prototype.line=function(){return null===this._lineId?null:this._model.dataSourceForId(this._lineId)},t.prototype.undo=function(){var e=Object(n.ensureNotNull)(this.line());this._lineState=e.state(!1),this._model.removeSource(e),this._lineId=null},t.prototype.redo=function(){var e=this._model.restoreSource(!1,this._paneIndex,null,Object(n.ensureNotNull)(this._lineState),null);this._lineId=e.id(),this._lineState=null},t.prototype.needCopyToOtherCharts=function(){return this._needCopyToOtherCharts},t}(f.UndoCommand),B=i("GVQo"),N=function(e){function t(t,i,r){var o=e.call(this,r)||this;return o._sourcesByPanes=new Map,o._originalState=new Map,o._model=t,i.forEach((function(e){var i=Object(n.ensureNotNull)(t.paneForSource(e)),r=t.panes().indexOf(i),s=o._sourcesByPanes.get(r)||[];s.push(e.id()),o._sourcesByPanes.set(r,s)})),Array.from(o._sourcesByPanes.keys()).forEach((function(e){var i=t.panes()[e],r=new Map;i.sourcesByGroup().allIncludingHidden().forEach((function(e){r.set(e.id(),e.zorder())})),o._originalState.set(e,r)})),o}return Object(r.__extends)(t,e),t.prototype.undo=function(){var e=this;this._originalState.forEach((function(t,i){var r=e._model.panes()[i],o=new Map
;t.forEach((function(e,t){var i=Object(n.ensureNotNull)(r.dataSourceForId(t));o.set(i,e)})),r.setZOrders(o)}))},t.prototype.redo=function(){var e=this;this._sourcesByPanes.forEach((function(t,i){var r=e._model.panes()[i],o=t.map((function(e){return Object(n.ensureNotNull)(r.dataSourceForId(e))}));e._paneOperation(r,o)}))},t}(f.UndoCommand),F=function(e){function t(t,i){return e.call(this,t,i,"Bring "+i[0].title()+" to front")||this}return Object(r.__extends)(t,e),t.prototype._paneOperation=function(e,t){e.bringToFront(t)},t}(N),j=function(e){function t(t,i){return e.call(this,t,i,"Send "+i[0].title()+" to back")||this}return Object(r.__extends)(t,e),t.prototype._paneOperation=function(e,t){e.sendToBack(t)},t}(N),W=function(e){function t(t,i,r,n){var o=e.call(this,t,i,n)||this;return o._targetSource=r,o}return Object(r.__extends)(t,e),t.prototype._paneOperation=function(e,t){e.insertAfter(t,this._targetSource)},t}(N),H=function(e){function t(t,i,r){return e.call(this,t,i,r,"Insert "+i[0].title()+" after "+r.title())||this}return Object(r.__extends)(t,e),t}(W),U=function(e){function t(t,i,r,n){var o=e.call(this,t,i,n)||this;return o._targetSource=r,o}return Object(r.__extends)(t,e),t.prototype._paneOperation=function(e,t){e.insertBefore(t,this._targetSource)},t}(N),z=function(e){function t(t,i,r){return e.call(this,t,i,r,"Insert "+i[0].title()+" before "+r.title())||this}return Object(r.__extends)(t,e),t}(U);function G(e,t){var i=t[0],r=e.sourcesByGroup().all().filter((function(e){return e.zorder()<i.zorder()}));if(0===r.length)throw new Error("Cannot move backward source that alreadt on back");var n=r[r.length-1];if(Object(m.isLineTool)(n)){var o=e.model().lineToolsGroupModel().groupForLineTool(n);null!==o&&(n=o.lineTools()[0])}return n}var q=function(e){function t(t,i,r){return e.call(this,t,r,G(i,r),"Send "+r[0].title()+" backward")||this}return Object(r.__extends)(t,e),t}(U);function Y(e,t){var i=t[t.length-1],r=e.sourcesByGroup().allExceptSpecialSources().filter((function(e){return e.zorder()>i.zorder()}));if(0===r.length)throw new Error("Cannot bring forward source that alreadt on back");var n=r[0];if(Object(m.isLineTool)(n)){var o=e.model().lineToolsGroupModel().groupForLineTool(n);if(null!==o){var s=o.lineTools();n=s[s.length-1]}}return n}var X=function(e){function t(t,i,r){return e.call(this,t,r,Y(i,r),"Send "+r[0].title()+" backward")||this}return Object(r.__extends)(t,e),t}(W);function K(e,t){return Object(n.ensureNotNull)(e.paneForSource(t.lineTools()[0]))}var J=function(e){function t(t,i){return e.call(this,t,i.lineTools(),G(K(t,i),i.lineTools()),"Send Group "+i.name()+" backward")||this}return Object(r.__extends)(t,e),t}(U),Q=function(e){function t(t,i){return e.call(this,t,i.lineTools(),Y(K(t,i),i.lineTools()),"Bring Group "+i.name()+" backward")||this}return Object(r.__extends)(t,e),t}(W),Z=i("ogJP"),$=function(e){function t(t,i,r){var n=e.call(this,"Rearrange panes")||this;return n._chartModel=t,n._index=i,Object(Z.isNumber)(r)?n._dstIndex=r:n._dstIndex="up"===r?i-1:i+1,n}
return Object(r.__extends)(t,e),t.prototype.redo=function(){this._checkIndices()&&this._chartModel.movePane(this._index,this._dstIndex)},t.prototype.undo=function(){this._checkIndices()&&this._chartModel.movePane(this._dstIndex,this._index)},t.prototype._checkIndices=function(){var e=this._chartModel.panes().length;return this._index>=0&&this._index<e&&this._dstIndex>=0&&this._dstIndex<e},t}(f.UndoCommand),ee=i("XcdR"),te=i("Fixu"),ie=i("Ocx9"),re=i("n5al"),ne=i("PT1i"),oe=i("pPtI"),se=function(e){function t(t,i,r,n,o,s){var a=e.call(this,n)||this;return a._prevPriceAxisProps={},a._property=t,a._mainSeries=r,a._value=i,a._model=o,a._chartWidget=s,a}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this._mainSeries,t=e.properties();t.style===this._property&&e.isNeedRestart(this._value)&&this._chartWidget.screen.show(),this._prevResolution=t.interval.value(),this._prevValue=this._property.value(),this._storePriceAxisProps(),Object(ie.saveDefaultProperties)(!0);var i=t.interval.value(),r=this._model.defaultResolutions(),n=Object(oe.getResolutionByChartStyle)(this._value,i,r);ne.linking.interval.setValue(n),e.setChartStyleWithIntervalIfNeeded(this._value,n),Object(re.setLastUsedStyle)(this._value),Object(re.preparePriceAxisProperties)(t),Object(ie.saveDefaultProperties)(!1),this._invalidateModel()},t.prototype.undo=function(){var e=this._mainSeries;e.properties().style===this._property&&e.isNeedRestart(this._value)&&this._chartWidget.screen.show(),Object(ie.saveDefaultProperties)(!0),e.setChartStyleWithIntervalIfNeeded(this._prevValue,this._prevResolution),this._restorePriceAxisProps(),ne.linking.interval.setValue(this._prevResolution),Object(ie.saveDefaultProperties)(!1),this._invalidateModel()},t.prototype._storePriceAxisProps=function(){var e=this._mainSeries.priceScale();this._prevPriceAxisProps=e.mode()},t.prototype._restorePriceAxisProps=function(){this._mainSeries.priceScale().setMode(this._prevPriceAxisProps)},t.prototype._invalidateModel=function(){this._model&&(this._model.recalculateAllPanes(),this._model.lightUpdate())},t}(f.UndoCommand),ae=i("ufwo"),le=function(e){function t(t,i){var r=e.call(this,"Change date range")||this;return r._modelsData=[],r._rangeOptions=i,r._modelsData.push({model:t,prevResolution:t.mainSeries().properties().interval.value(),barSpacing:t.timeScale().barSpacing(),rightOffset:t.timeScale().rightOffset(),rangeOptions:t.undoModel().appliedTimeFrame().value()}),r}return Object(r.__extends)(t,e),t.prototype.redo=function(){for(var e=[],t=0,i=this._modelsData;t<i.length;t++){var r=i[t].model.mainSeries(),n=r.properties().interval;this._rangeOptions.res!==n.value()?(e.push(n),r.setDefaultTimeframe(this._rangeOptions.val),n.setValueSilently(this._rangeOptions.res)):r.loadDataTo(this._rangeOptions.val)}for(var o=0,s=e;o<s.length;o++){(n=s[o]).listeners().fire(n)}},t.prototype.undo=function(){for(var e=[],t=0,i=this._modelsData;t<i.length;t++){var r=i[t],n=r.model.mainSeries(),o=n.properties().interval;r.prevResolution!==o.value()?(e.push(o),
null!==r.rangeOptions&&n.setDefaultTimeframe(r.rangeOptions.val),o.setValueSilently(r.prevResolution)):null!==r.rangeOptions&&n.loadDataTo(r.rangeOptions.val);var s=r.model.timeScale();s.setBarSpacing(r.barSpacing),s.setRightOffset(r.rightOffset)}for(var a=0,l=e;a<l.length;a++){(o=l[a]).listeners().fire(o)}},t.prototype.canMerge=function(e){return e instanceof t&&Object(ae.rangesAreEqual)(e._rangeOptions,this._rangeOptions)},t.prototype.merge=function(e){if(!(e instanceof t))throw new Error("Invalid command to merge");this._modelsData=this._modelsData.concat(e._modelsData)},t}(f.UndoCommand),ce=i("//lZ"),ue=i("UqOQ"),he=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n._model=t,n._groupId=i.id,n._groupName=i.name(),n._lineToolsIds=i.lineTools().map((function(e){return e.id()})),n}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=Object(n.ensureNotNull)(this._model.lineToolsGroupModel().groupForId(this._groupId));this._model.lineToolsGroupModel().removeGroup(e)},t.prototype.undo=function(){var e=this,t=this._lineToolsIds.map((function(t){return e._model.dataSourceForId(t)})),i=new ue.a(t,this._groupName,this._groupId);this._model.lineToolsGroupModel().addGroup(i)},t}(f.UndoCommand),de=window.t("Create line tools group"),pe=function(e){function t(t,i){var r=e.call(this,de)||this;return r._groupId=null,r._model=t,r._sourcesIds=i.map((function(e){return e.id()})),r}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this,t=this._sourcesIds.map((function(t){return e._model.dataSourceForId(t)})),i=null===this._groupId?void 0:this._groupId;this._groupId=this._model.lineToolsGroupModel().createGroup(t,this._title,i).id},t.prototype.undo=function(){var e=Object(n.ensureNotNull)(this._model.lineToolsGroupModel().groupForId(Object(n.ensureNotNull)(this._groupId)));this._model.lineToolsGroupModel().removeGroup(e)},t.prototype.createdGroupId=function(){return this._groupId},t}(f.UndoCommand),fe=window.t("Add line tool(s) {lineTool} to group {group}"),_e=function(e){function t(t,i,r){var n=e.call(this,fe.format({group:i.name()}))||this;return n._model=t,n._groupId=i.id,n._lineToolsIds=r.map((function(e){return e.id()})),n}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this,t=Object(n.ensureNotNull)(this._model.lineToolsGroupModel().groupForId(this._groupId)),i=this._lineToolsIds.map((function(t){return e._model.dataSourceForId(t)}));t.addLineTools(i)},t.prototype.undo=function(){var e=this,t=this._lineToolsIds.map((function(t){return e._model.dataSourceForId(t)}));Object(n.ensureNotNull)(this._model.lineToolsGroupModel().groupForId(this._groupId)).excludeLineTools(t)},t}(f.UndoCommand),me=i("bJYc"),ve=function(e){function t(t,i,r,n){var o=e.call(this,n)||this;return o._chartModel=t,o._groupId=i.id,o._oldName=i.name(),o._newName=r,o}return Object(r.__extends)(t,e),t.prototype.redo=function(){Object(n.ensureNotNull)(this._chartModel.lineToolsGroupModel().groupForId(this._groupId)).setName(this._newName)},t.prototype.undo=function(){
Object(n.ensureNotNull)(this._chartModel.lineToolsGroupModel().groupForId(this._groupId)).setName(this._oldName)},t}(f.UndoCommand),ge=i("mMWL"),ye=window.t("Create line tools group from selection"),be=window.t("Removing line tools group {name}"),Se=window.t("Add line tool {lineTool} to group {name}"),we=window.t("Make group {group} visible"),Pe=window.t("Make group {group} invisible"),Ce=window.t("Lock group {group}"),Te=window.t("Unlock group {group}"),xe=window.t("Rename group {group} to {newName}"),Ie=function(){function e(e){this._environment=e}return e.prototype.createGroupFromSelection=function(){var e=this,t=this._environment.model();Object(n.assert)(!t.selection().isEmpty(),"Cannot create group from empty selection");var i=Object(R.sortSources)(t.selection().sources());Object(n.assert)(i.every((function(e){return Object(m.isLineTool)(e)})),"A group could contain line tools only");var r=i.reduce((function(e,t){return e.zorder()>t.zorder()?e:t}),i[0]),o=r,s=t.lineToolsGroupModel().groupForLineTool(r);if(null!==s){var a=s.lineTools();o=a[a.length-1]}this._environment.beginUndoMacro(ye);var l=new Map,c=new Set;i.forEach((function(i){var r=e._groupForLineTool(i);if(null!==r){var o=l.get(r)||[];o.push(i),l.set(r,o);var s=Object(n.ensureNotNull)(t.paneForSource(i));c.add(s)}})),Object(n.assert)(c.size<=1,"All selected sources should be on the same pane"),l.forEach((function(i,r){var n=new w(t,r,i);e._environment.pushUndoCommand(n)}));var u=new pe(t,Object(R.sortSources)(i));this._environment.pushUndoCommand(u);var h=new H(t,i,o);this._environment.pushUndoCommand(h),this._environment.endUndoMacro();var d=Object(n.ensureNotNull)(u.createdGroupId());return Object(n.ensureNotNull)(t.lineToolsGroupModel().groupForId(d))},e.prototype.removeGroup=function(e){var t=this._environment.model(),i=e.lineTools();this._environment.beginUndoMacro(be.format({name:e.name()}));var r=new he(t,e,"");this._environment.pushUndoCommand(r);var o=new C(t,i,"");this._environment.pushUndoCommand(o),i.forEach((function(e){null!==e.getLinkKey()&&Object(ge.removeLineTool)({model:t,linkKey:Object(n.ensureNotNull)(e.getLinkKey())})})),this._environment.endUndoMacro()},e.prototype.groups=function(){return this._environment.model().lineToolsGroupModel().groups()},e.prototype.excludeLineToolFromGroup=function(e,t){var i=this._environment.model(),r=new w(i,e,[t]);this._environment.pushUndoCommand(r)},e.prototype.addLineToolToGroup=function(e,t){var i=this._environment.model(),r=i.lineToolsGroupModel().groupForLineTool(t);if(r!==e){var n=Se.format({lineTool:t.title(),name:e.name()});this._environment.beginUndoMacro(n),null!==r&&this._environment.pushUndoCommand(new w(i,r,[t])),this._environment.pushUndoCommand(new _e(i,e,[t])),this._environment.endUndoMacro()}},e.prototype.bringToFront=function(e){var t=this._environment.model(),i=new F(t,e.lineTools());this._environment.pushUndoCommand(i),this._environment.emitEvent("changeZOrder",[e.lineTools()])},e.prototype.sendToBack=function(e){var t=this._environment.model(),i=new j(t,e.lineTools())
;this._environment.pushUndoCommand(i),this._environment.emitEvent("changeZOrder",[e.lineTools()])},e.prototype.bringForward=function(e){var t=this._environment.model(),i=new Q(t,e);this._environment.pushUndoCommand(i),this._environment.emitEvent("changeZOrder",[e.lineTools()])},e.prototype.sendBackward=function(e){var t=this._environment.model(),i=new J(t,e);this._environment.pushUndoCommand(i),this._environment.emitEvent("changeZOrder",[e.lineTools()])},e.prototype.insertAfter=function(e,t){var i,r=this._environment.model();if(t instanceof ue.a){var n=t.lineTools();i=n[n.length-1]}else i=t;var o=new H(r,e.lineTools(),i);this._environment.pushUndoCommand(o),this._environment.emitEvent("changeZOrder",[e.lineTools()])},e.prototype.insertBefore=function(e,t){var i,r=this._environment.model();t instanceof ue.a?i=t.lineTools()[0]:i=t;var n=new z(r,e.lineTools(),i);this._environment.pushUndoCommand(n),this._environment.emitEvent("changeZOrder",[e.lineTools()])},e.prototype.availableZOrderOperations=function(e){var t=this._environment.model(),i=e.lineTools(),r=i[0],o=i[i.length-1],s=Object(n.ensureNotNull)(t.paneForSource(i[0])).sourcesByGroup().allExceptSpecialSources(),a=s[0],l=s[s.length-1];return{bringForwardEnabled:o!==l,bringToFrontEnabled:o!==l,sendBackwardEnabled:r!==a,sendToBackEnabled:r!==a}},e.prototype.setGroupVisibility=function(e,t){var i=this,r=(t?we:Pe).format({group:e.name()}),n=this._environment.model();this._environment.beginUndoMacro(r),e.lineTools().forEach((function(e){var r=e.properties().visible,o=new me.SetPropertyUndoCommand(r,t,"",n);i._environment.pushUndoCommand(o)})),this._environment.endUndoMacro()},e.prototype.setGroupLock=function(e,t){var i=this,r=(t?Ce:Te).format({group:e.name()}),n=this._environment.model();this._environment.beginUndoMacro(r),e.lineTools().forEach((function(e){var r=e.properties().frozen,o=new me.SetPropertyUndoCommand(r,t,"",n);i._environment.pushUndoCommand(o)})),this._environment.endUndoMacro()},e.prototype.setGroupName=function(e,t){var i=this._environment.model(),r=xe.format({group:e.name(),newName:t}),n=new ve(i,e,t,r);this._environment.pushUndoCommand(n)},e.prototype.canBeGroupped=function(e){var t=this._environment.model();return new Set(e.map((function(e){return t.paneForSource(e)}))).size<=1},e.prototype._groupForLineTool=function(e){return this._environment.model().lineToolsGroupModel().groups().find((function(t){return t.containsLineTool(e)}))||null},e}(),Ee=i("3ClC"),Le=window.t("Apply study template {template}"),Oe=function(e){function t(t,i,r){var n=e.call(this,Le.format({template:r}))||this;return n._model=t,n._templateContent=i,n._initialState=t.studyTemplate(!0,!0),n._initialGroupsState=t.lineToolsGroupModel().state(),n}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this._merge(this._templateContent).filter(m.isLineTool);this._model.lineToolsGroupModel().removeLineTools(e),this._model.mainSeries().onChartStyleChanged();var t=this._model.mainSeries().properties();Object(re.preparePriceAxisProperties)(t),
this._model.recalcVisibleRangeStudy(this._model.dataSources(),!0),this._model.setShouldBeSavedEvenIfHidden(!0)},t.prototype.undo=function(){this._merge(this._initialState),this._model.mainSeries().onChartStyleChanged()},t.prototype._merge=function(e){var t=this._model,i=t.mainSeries();if(i.priceScale().properties().childs().lockScale.setValue(!1),this._initialState.symbol&&e.symbol&&i.properties().symbol.setValue(e.symbol),this._initialState.symbol&&e.interval){var r=Object(re.getChartStyleByResolution)(e.interval,i.properties().style.value());i.setChartStyleWithIntervalIfNeeded(r,e.interval)}for(var o=t.panes(),s=[],a=o.length;a--;)for(var l=(v=o[a]).containsMainSeries(),c=(S=v.dataSources()).length;c--;){var u=S[c];(!l||Object(Ee.isStudy)(u)&&u.isRemovedByStudyTemplates())&&s.push(u)}t.resetDeferredStudies();for(var h=y(t,s),d=0;d<h.length;++d)t.removeSource(h[d]);var p=e.panes;for(a=0;a<p.length;a++){var f=!1,_=p[a];for(c=0;c<_.sources.length;c++){"MainSeries"===(u=_.sources[c]).type&&(delete u.state,f=!0)}var v;if((v=f?o[a]:t.createPane(a)).restoreState(p[a],!1,e.version),null!==v.mainDataSource()){if(f){var g=t.mainSeries(),b=g.priceScale(),S=v.sourcesByGroup().all();for(d=0;d<S.length;d++){u=S[d];Object(m.isLineTool)(u)&&u.ownerSource()===g&&(u.setPriceScale(b),b.addDataSource(u))}}for(var w=Object(n.ensureNotNull)(this._model.alertsWatcher()),P=0,C=v.dataSources();P<C.length;P++){u=C[P];w.syncSourceAlertLabels(u)}}else t.removePane(v)}return t.syncESD(),i.priceScale().setMode({autoScale:!0}),t.setVersion(e.version),t.startNotStartedStudies(),t.recalculateAllPanes(),t.fullUpdate(),h},t}(f.UndoCommand),Ae=i("aO4+"),Me=i("e3/o"),ke=i("/tGj"),De=Object(u.getLogger)("Chart.ChartUndoModel"),Re=function(e){function t(t,i,r){var o=e.call(this,"Paste Drawing")||this;return o._needCopyToOtherCharts=!1,o._sourceState=null,o._model=t,o._clipboardData=i,o._paneIndex=o._model.panes().indexOf(r||Object(n.ensureNotNull)(o._model.paneForSource(o._model.mainSeries()))),o}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this._model.panes()[this._paneIndex],t=Object(n.ensureNotNull)(e.clipboardLineToolOwnerSource(this._clipboardData.source.id));null===this._sourceState&&(this._sourceState=this._getSourceState(t));var i=e.restoreLineTool(this._sourceState,!1,!1),r=Object(n.ensureNotNull)(t.priceScale());i.setOwnerSource(t),i.setPriceScale(r),r.addDataSource(i),i.restoreFixedPoints(),i.calcIsActualSymbol(),i.createServerPoints();var o=Object(ke.isSymbolSource)(t)||t.metaInfo().is_price_study;this._needCopyToOtherCharts=Boolean(o&&(Object(ge.drawOnAllCharts)().value()||i.linkKey&&i.isSynchronizable())),this._model.setShouldBeSavedEvenIfHidden(!0)},t.prototype.undo=function(){if(this._sourceState){var e=this.source();this._model.removeSource(e)}else De.logError("This command was never executed - nothing to undo")},t.prototype.source=function(){return Object(n.ensureNotNull)(this._model.dataSourceForId(Object(n.ensureNotNull)(this._sourceState).id))},t.prototype.needCopyToOtherCharts=function(){
return this._needCopyToOtherCharts},t.prototype._getSourceState=function(e){var t=Object(Z.clone)(this._clipboardData.source);delete t.state.symbol,null!=t.linkKey&&(t.linkKey=Object(Me.randomHash)());var i=Object(n.ensureNotNull)(e.priceScale()),r=this._model,o=!1;this._clipboardData.source.state.symbol===Object(n.ensureNotNull)(e.symbolSource()).symbol()&&(Object(ke.isSymbolSource)(e)?o=!0:Object(Ee.isStudy)(e)&&(o=Boolean(e.metaInfo().is_price_study)));var s,a,l,c=Object(n.ensureNotNull)(e.firstValue());if(this._model.id()===this._clipboardData.modelId||!o)for(var u=0;u<this._clipboardData.geometry.length;++u){var h=(s=this._clipboardData.geometry[u],a=void 0,l=void 0,a=s.x*r.timeScale().width(),l=s.y*i.height()-40,new Ae.Point(a,l)),d=r.timeScale().coordinateToIndex(h.x),p=r.timeScale().normalizeBarIndex(d);if(o){var f=i.priceToCoordinate(t.points[u].price,c)+-40;p.price=i.coordinateToPrice(f,c)}else p.price=i.coordinateToPrice(h.y,c);t.points[u]=p}return t.id=Object(Me.guid)(),t},t}(f.UndoCommand),Ve=function(e){function t(t,i,r,o){var s=e.call(this,o)||this;s._newSourcesCurrencies=new Map,s._oldSourcesCurrencies=new Map,s._showFade=!1,s._chartWidget=r;for(var a=r.model().mainSeries(),l=0,c=t.seriesLikeSources();l<c.length;l++){var u=c[l];if(u.isVisible()){var h=i||Object(n.ensureDefined)(Object(n.ensureNotNull)(u.symbolInfo()).original_currency_code);s._newSourcesCurrencies.set(u.id(),h),s._oldSourcesCurrencies.set(u.id(),u.currency()),s._showFade=s._showFade||u===a&&u.currency()!==h}}return s}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._applyCurrencies(this._newSourcesCurrencies)},t.prototype.undo=function(){this._applyCurrencies(this._oldSourcesCurrencies)},t.prototype._applyCurrencies=function(e){this._showFade&&this._chartWidget.screen.show();var t=this._chartWidget.model().model();e.forEach((function(e,i){Object(n.ensureNotNull)(t.dataSourceForId(i)).setCurrency(e)})),this._chartWidget.model().selectionMacro((function(e){e.clearSelection()}))},t}(f.UndoCommand),Be=function(e){function t(t,i,r,n){var o=e.call(this,t,i,n)||this;return o._sourcePaneRemoved=!1,o._targetPaneIndex=t.panes().indexOf(r),o}return Object(r.__extends)(t,e),t.prototype.redo=function(){for(var e=this._chartModel.panes()[this._initialPaneIndex],t=this._chartModel.panes()[this._targetPaneIndex],i=e!==t,r=this._targetPriceScale(t),o=Object(n.ensureNotNull)(this._chartModel.dataSourceForId(this._sourceId)),s=0,a=this._chartModel.children(o,!0);s<a.length;s++){var l=a[s];i?(this._chartModel.detachSource(l),t.addDataSource(l,r,!1)):t.move(l,r)}i?(this._sourcePaneRemoved=this._chartModel.detachSource(o),t.addDataSource(o,r,!1)):t.move(o,r);var c=t.priceScalePosition(r);t.movePriceScale(r,c,this._targetPriceScaleIndex(o)),this._chartModel.fullUpdate()},t.prototype.undo=function(){this._sourcePaneRemoved&&this._chartModel.createPane(this._initialPaneIndex)
;var e=this._chartModel.panes()[this._initialPaneIndex],t=e!==this._chartModel.panes()[this._targetPaneIndex],i=Object(n.ensureNotNull)(this._chartModel.dataSourceForId(this._sourceId)),r=e.getPriceScaleById(this._initialPriceScaleId);null===r&&(r=e.createPriceScaleAtPosition(this._initialPriceScalePosition,this._initialPriceScaleIndex));for(var o=0,s=this._chartModel.children(i,!0);o<s.length;o++){var a=s[o];t?(this._chartModel.detachSource(a),e.addDataSource(a,r,!1)):e.move(a,r)}t?(this._chartModel.detachSource(i),e.addDataSource(i,r,!1)):e.move(i,r),this._chartModel.fullUpdate()},t}(x),Ne=function(e){function t(t,i,r,o,s){var a=e.call(this,t,i,r,s)||this;return a._targetPriceScalePosition=o,a._sourceScaleState=Object(n.ensureNotNull)(i.priceScale()).state(),delete a._sourceScaleState.m_isLockScale,delete a._sourceScaleState.id,a}return Object(r.__extends)(t,e),t.prototype._targetPriceScale=function(e){var t=e.createPriceScaleAtPosition(this._targetPriceScalePosition);return t.restoreState(this._sourceScaleState),t},t.prototype._targetPriceScaleIndex=function(e){return e===this._chartModel.mainSeries()?0:void 0},t}(Be),Fe=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i,r,o)||this;return s._targetPriceScaleId=n.id(),s}return Object(r.__extends)(t,e),t.prototype._targetPriceScale=function(e){return Object(n.ensureNotNull)(e.getPriceScaleById(this._targetPriceScaleId))},t.prototype._targetPriceScaleIndex=function(e){},t}(Be),je=function(e){function t(t,i,r){var n=e.call(this,"Change Symbol")||this;n._newSymbol=t;var o=i.model().mainSeries();return n._prevSymbol=o.symbol(),n._prevCurrency=r?o.currency():null,n._chartWidget=i,n._changeCurrencyToOriginal=r,n}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._chartWidget.screen.show(),this._changeCurrencyToOriginal&&this._currencyProperty().setValue(null),this._symbolProperty().setValue(this._newSymbol,!1)},t.prototype.undo=function(){this._chartWidget.screen.show(),this._changeCurrencyToOriginal&&this._currencyProperty().setValue(this._prevCurrency),this._symbolProperty().setValue(this._prevSymbol,!1)},t.prototype._symbolProperty=function(){return this._mainSeries().properties().symbol},t.prototype._currencyProperty=function(){return this._mainSeries().properties().currencyId},t.prototype._mainSeries=function(){return this._chartWidget.model().mainSeries()},t}(f.UndoCommand),We=i("JWMC"),He=i("gaBL"),Ue=Object(u.getLogger)("Chart.ChartUndoModel"),ze=function(e){function t(t,i,r){var n=e.call(this,"Paste Indicator")||this;return n._sourceState=null,n._model=t,n._clipboardData=i,n._paneId=r,n}return Object(r.__extends)(t,e),t.prototype.redo=function(){if(!this._sourceState){var e=Object(Z.clone)(this._clipboardData.source);e.id=Object(Me.guid)(),this._sourceState=e}var t,i,r=!(t=this._paneId?Object(n.ensureNotNull)(this._model.paneForId(this._paneId)):this._sourceState.metaInfo.is_price_study?Object(n.ensureNotNull)(this._model.paneForSource(this._model.mainSeries())):this._model.createPane()).mainDataSource(),o=t.restoreStudy(this._sourceState)
;o.metaInfo().linkedToSeries&&o.setOwnerSource(this._model.mainSeries()),r||(i=this._sourceState.metaInfo.is_price_study?i=this._model.mainSeries().priceScale():this._paneId?t.findSuitableScale(o):t.defaultPriceScale())!==o.priceScale()&&t.move(o,i),o.start()},t.prototype.undo=function(){if(null!==this._sourceState){var e=Object(n.ensureNotNull)(this._model.dataSourceForId(this._sourceState.id));this._model.removeSource(e)}else Ue.logError("This command was never executed - nothing to undo")},t.prototype.state=function(){return this._sourceState},t}(f.UndoCommand),Ge=function(e){function t(t,i,r,n,o){var s=e.call(this,"",!1)||this;return s._model=t,s._paneA=i,s._paneB=r,s._prevStretchA=n,s._currStretchA=o,s}return Object(r.__extends)(t,e),t.prototype.redo=function(){var e=this._paneA.stretchFactor()+this._paneB.stretchFactor();this._paneA.setStretchFactor(this._currStretchA),this._paneB.setStretchFactor(e-this._currStretchA),this._model.fullUpdate()},t.prototype.undo=function(){var e=this._paneA.stretchFactor()+this._paneB.stretchFactor();this._paneA.setStretchFactor(this._prevStretchA),this._paneB.setStretchFactor(e-this._prevStretchA),this._model.fullUpdate()},t}(f.UndoCommand),qe=i("KnF9"),Ye=function(e){function t(t,i,r,n){var o=e.call(this,"Move",!1)||this;return o._endEvent=null,o._model=t,o._sourceId=i.id(),o._itemIndex=r,o._startEvent=n,o}return Object(r.__extends)(t,e),t.prototype.move=function(e){this._endEvent=e,this._move(e)},t.prototype.hasChanges=function(){return null!==this._endEvent},t.prototype.undo=function(){this._move(this._startEvent)},t.prototype.redo=function(){this._move(Object(n.ensureNotNull)(this._endEvent))},t.prototype._move=function(e){var t=Object(n.ensureNotNull)(this._model.dataSourceForId(this._sourceId));Object(n.assert)(void 0!==t.moveItem,'The method "moveItem" is not defined'),t.moveItem&&t.moveItem(new Ae.Point(e.localX,e.localY),this._itemIndex,new qe.EnvironmentState(e))},t}(f.UndoCommand);i.d(t,"ChartUndoModelBase",(function(){return et}));var Xe=window.t("Send {title} backward"),Ke=window.t("Bring {title} forward"),Je=window.t("Insert {title} after {target}"),Qe=window.t("Insert {title} before {target}"),Ze=window.t("Create {name} line tool");function $e(e,t){return{bringForwardEnabled:e.bringForwardEnabled||t.bringForwardEnabled,bringToFrontEnabled:e.bringToFrontEnabled||t.bringToFrontEnabled,sendBackwardEnabled:e.sendBackwardEnabled||t.sendBackwardEnabled,sendToBackEnabled:e.sendToBackEnabled||t.sendToBackEnabled}}var et=function(e){function t(t){var i=e.call(this)||this;return i._createLineCommand=null,i._initialTimeScrollState=null,i._initialTimeScrollPos=null,i._currentLineMoveCommand=null,i._currentLineChangeCommand=null,i._currentCustomMoveCommand=null,i._undoHistory=t,i._lineToolsGroupController=new Ie({model:i._model.bind(i),pushUndoCommand:i._pushUndoCommand.bind(i),beginUndoMacro:i._undoHistory.beginUndoMacro.bind(i._undoHistory),endUndoMacro:i._undoHistory.endUndoMacro.bind(i._undoHistory),emitEvent:i.emitEvent.bind(i)}),i}return Object(r.__extends)(t,e),
t.prototype.undoHistory=function(){return this._undoHistory},t.prototype.lineToolsGroupController=function(){return this._lineToolsGroupController},t.prototype.mergeAllScales=function(e){!function(e,t){e.beginUndoMacro("left"===t?h:d),e.model().panes().forEach((function(i){var r="left"===t?i.rightPriceScales():i.leftPriceScales(),n=("left"===t?i.leftPriceScales():i.rightPriceScales()).concat(r),o="overlay"===i.priceScalePosition(i.defaultPriceScale())?n[0]:i.defaultPriceScale();e.movePriceScale(i,o,t,0),n.forEach((function(t){if(t!==o)for(var r=t.mainSource();null!==r;){e.moveToScale(r,i,o,"",!0);var n=t.mainSource();if(n===r){p.logError("Loop detected while trying to merge scales");break}r=n}}))})),e.endUndoMacro(),e.model().fullUpdate()}(this,e)},t.prototype.movePriceScale=function(e,t,i,r){var n=new _(this._model(),e,t,i,r,window.t("Move scale"));this._pushUndoCommand(n)},t.prototype.createLineTool=function(e,t,i,r,s,a,l){var c=Ze.format({name:i});if(("LineToolRegressionTrend"===i||"LineToolAnchoredVWAP"===i)&&!this.canCreateStudy())return Object(o.showTooManyStudiesNotice)(),null;this.beginUndoMacro(c);var u=!l;this._createLineCommand=new V(this._model(),e,i,a||Object(n.ensureNotNull)(e.mainDataSource()),u);var h=this._createLineCommand.startCreatingLine(t,r,s||null),d=Object(n.ensureNotNull)(this._createLineCommand.line()),p=null;if(h&&(u&&this.finishLineTool(d),this._pushUndoCommand(this._createLineCommand),this._createLineCommand=null,p={points:d.normalizedPoints(),interval:this.mainSeries().interval()}),u&&void 0===s&&Object(ge.drawOnAllCharts)().value()&&d.isSynchronizable()){var f=Object(n.ensureNotNull)(this.model().externalTimeStamp(t.index)),_={point:{price:t.price,timeStamp:f},linetool:i,properties:d.properties(),symbol:this.mainSeries().symbol(),model:this.model(),linkKey:Object(n.ensureNotNull)(d.getLinkKey()),finalState:p};d.isFixed()&&(_.pointPositionPercents=d.calcPositionPercents()[0]),Object(ge.createLineTool)(_)}return this.endUndoMacro(),d},t.prototype.coninueCreatingLine=function(e,t,i,r){var o=Object(n.ensureNotNull)(this._createLineCommand);this.beginUndoMacro(o.text());var s=Object(n.ensureNotNull)(this._model().lineBeingCreated()),a=o.continueCreatingLine(e,t,i,r),l=null;if(a&&(this.finishLineTool(s),this._pushUndoCommand(o),this._createLineCommand=null,l={points:s.normalizedPoints(),interval:this.mainSeries().interval()}),o.needCopyToOtherCharts()&&Object(ge.drawOnAllCharts)().value()&&s.isSynchronizable()){var c=Object(n.ensureNotNull)(this._model().externalTimeStamp(e.index));Object(ge.continueLineTool)({point:{price:e.price,timeStamp:c},envState:t,finalState:l,model:this._model()})}return this.endUndoMacro(),a},t.prototype.continueExternalLine=function(e,t,i){var r=Object(n.ensureNotNull)(this._createLineCommand),o=r.continueCreatingLine(e,t,i);return o&&(this._pushUndoCommand(r),this._createLineCommand=null),o},t.prototype.finishLineTool=function(e){this._model().finishLineTool(e)},t.prototype.loadRange=function(e){this._pushUndoCommand(new le(this._model(),e))},
t.prototype.withMacro=function(e,t){var i=this.beginUndoMacro(e);try{t()}finally{this.endUndoMacro()}return i},t.prototype.canZoomIn=function(){return this.model().canZoomIn()},t.prototype.canZoomOut=function(){return this.model().canZoomOut()},t.prototype.zoomOut=function(){var e=this,t=this.timeScale().width();if(this.canZoomOut()){try{this.beginUndoMacro("Zoom Out")}catch(i){return}Object(ce.doAnimate)({to:t/5,onStep:function(t){e.startScaleTime(0),e.scaleTimeTo(t),e.endScaleTime()},onComplete:function(){return e.endUndoMacro()}})}},t.prototype.zoomIn=function(){var e=this,t=this.timeScale().width();if(this.canZoomIn()){try{this.beginUndoMacro("Zoom In")}catch(i){return}Object(ce.doAnimate)({to:t/5,onStep:function(t){e.startScaleTime(t),e.scaleTimeTo(0),e.endScaleTime()},onComplete:function(){return e.endUndoMacro()}})}},t.prototype.startMovingSources=function(e,t,i,r){e.filter((function(e){return e.doesMovingAffectsUndo()})).length&&(this._currentLineMoveCommand=new T.SaveLineToolStateUndoCommand(this.model(),e,"Move Drawing(s)",!1)),this.model().startMovingSources(e,t,i,new Map,r)},t.prototype.moveSources=function(e,t){this.model().moveSources(e,new Map,t)},t.prototype.endMovingSource=function(e){this.model().endMovingSources(e),null!==this._currentLineMoveCommand&&(this._currentLineMoveCommand.saveNewState(),this._pushUndoCommand(this._currentLineMoveCommand)),this._currentLineMoveCommand=null},t.prototype.startChangingLinetool=function(e,t,i,r,n){this._currentLineChangeCommand=new T.SaveLineToolStateUndoCommand(this.model(),[e],"Change "+i+"point",!1),this.model().startChangingLinetool(e,t,i,r,n)},t.prototype.changeLinePoint=function(e,t,i){this.model().changeLinePoint(e,t,i)},t.prototype.endChangingLinetool=function(e){this.model().endChangingLinetool(e),null!==this._currentLineChangeCommand&&(this._currentLineChangeCommand.saveNewState(),this._pushUndoCommand(this._currentLineChangeCommand)),this._currentLineChangeCommand=null},t.prototype.setChartStyleProperty=function(e,t,i){if(e.value()!==t){var r=new se(e,t,this.mainSeries(),i,this.model(),this.chartWidget());this._pushUndoCommand(r),this.emitEvent("setChartStyleProperty"),Object(te.a)(e.value())}},t.prototype.copySourcesToClip=function(e){var t=Object(B.clipboardDataForSources)(this._model().id(),e);return null!==t&&(Object(B.set)(t),!0)},t.prototype.applyStudyTemplate=function(e,t){var i=new Oe(this._model(),e,t);this._pushUndoCommand(i)},t.prototype.startCustomMoving=function(e,t,i){this._currentCustomMoveCommand=new Ye(this.model(),e,t,i)},t.prototype.customMoveBeingProcessed=function(){return null!==this._currentCustomMoveCommand},t.prototype.processCustomMove=function(e){Object(n.ensureNotNull)(this._currentCustomMoveCommand).move(e)},t.prototype.endCustomMoving=function(){null!==this._currentCustomMoveCommand&&this._currentCustomMoveCommand.hasChanges()&&(this._pushUndoCommand(this._currentCustomMoveCommand),this._currentCustomMoveCommand=null)},t.prototype.cloneLineTools=function(e,t){
for(var i=this,r=0;r<Math.min(5,e.length);++r)Object(te.b)(e[r]);this.beginUndoMacro(window.t("Clone line tools"));var o=new v(this._model(),e,t,window.t("Clone line tools"));if(this._pushUndoCommand(o),Object(ge.drawOnAllCharts)().value()){var s=o.newIds().map((function(e){return Object(n.ensureNotNull)(i.model().dataSourceForId(e))}));this.copyToOtherCharts(s)}return this.endUndoMacro(),this.emitEvent("cloneLineTools"),o.newIds()},t.prototype.removeSource=function(e,t){if(this.lineBeingCreated()!==e){var i="Remove "+e.title();this.removeSources([e],t,i)}else this.cancelCreatingLine()},t.prototype.removeSelectedSources=function(){var e=this._model().selection().sources();if(e.length){var t=e.length>1?"Remove drawings group":"Remove "+e[0].title();this.removeSources(e,!1,t)}},t.prototype.removeSources=function(e,t,i){var r=this;e=e.filter((function(e){return e.isUserDeletable()}));var o=this._model(),s=o.lineToolsGroupModel();this.beginUndoMacro(i),o.selectionMacro((function(a){var l=new Map;e.forEach((function(e){if(Object(m.isLineTool)(e)){var t=s.groupForLineTool(e);if(null!==t){var i=l.get(t)||[];i.push(e),l.set(t,i)}null!==e.getLinkKey()&&Object(ge.removeLineTool)({model:r.model(),linkKey:Object(n.ensureNotNull)(e.getLinkKey())})}})),l.forEach((function(e,t){var i=new w(o,t,e);r._pushUndoCommand(i)}));var c=new C(o,e,i),u=c.removedIds();r._pushUndoCommand(c),!t&&u.length>0&&(1===u.length?r.emitEvent("removeSource",[u[0]]):r.emitEvent("removeSources",[u]))})),this.endUndoMacro()},t.prototype.mergeSourceUp=function(e){var t=new M(this._model(),e,"Merge up");this._mergeUnmergeSource(e,t)},t.prototype.mergeSourceDown=function(e){var t=new k(this._model(),e,"Merge down");this._mergeUnmergeSource(e,t)},t.prototype.mergeToPane=function(e,t){var i=this._model().panes().indexOf(t),r=new D(this._model(),e,i,"Merge to pane");this._mergeUnmergeSource(e,r)},t.prototype.unmergeSourceUp=function(e){var t=new L(this._model(),e,"Unmerge up");this._mergeUnmergeSource(e,t)},t.prototype.unmergeSourceDown=function(e){var t=new E(this._model(),e,"Unmerge down");this._mergeUnmergeSource(e,t)},t.prototype.unmergeToNewBottomPane=function(e){var t=new O(this._model(),e,"Unmerge to new bottom pane");this._mergeUnmergeSource(e,t)},t.prototype.availableZOrderOperations=function(e){var t=this._model().lineToolsGroupModel(),i=e.filter(m.isLineTool),r=i.map((function(e){return t.groupForLineTool(e)}));Object(n.assert)(new Set(r).size<=1,"Cannot move line tools from different group");for(var o=0===r.length?null:r[0],s={bringForwardEnabled:!1,bringToFrontEnabled:!1,sendBackwardEnabled:!1,sendToBackEnabled:!1},a=new Set(i),l=function(e){if(Object(m.isLineTool)(e)&&null!==o){var t=Object(R.sortSources)(o.lineTools().filter((function(t){return!a.has(t)||t===e})));return s=$e(s,{bringForwardEnabled:e!==t[t.length-1],bringToFrontEnabled:e!==t[t.length-1],sendBackwardEnabled:e!==t[0],sendToBackEnabled:e!==t[0]}),"continue"}var i=Object(n.ensureNotNull)(c._model().paneForSource(e)).sourcesByGroup().allExceptSpecialSources()
;if(0===i.length)return"continue";var r=e.zorder(),l=i[0].zorder(),u=i[i.length-1].zorder();s=$e(s,{bringForwardEnabled:r!==u,bringToFrontEnabled:r!==u,sendBackwardEnabled:r!==l,sendToBackEnabled:r!==l})},c=this,u=0,h=Object(R.sortSources)(e);u<h.length;u++){l(h[u])}return s},t.prototype.sendToBack=function(e){if(!this.availableZOrderOperations(e).sendToBackEnabled)throw new Error("Send to back operation is unavailable");var t=null,i=e[0];if(Object(m.isLineTool)(i)){var r=this._model().lineToolsGroupModel().groupForLineTool(i);if(null!==r){var n=r.lineTools();t=new z(this.model(),Object(R.sortSources)(e),n[0])}}null===t&&(t=new j(this.model(),Object(R.sortSources)(e))),this._pushUndoCommand(t),this.emitEvent("changeZOrder",[e])},t.prototype.bringToFront=function(e){if(!this.availableZOrderOperations(e).bringToFrontEnabled)throw new Error("Bring to front operation is unavailable");var t=null,i=e[0];if(Object(m.isLineTool)(i)){var r=this._model().lineToolsGroupModel().groupForLineTool(i);if(null!==r){var n=r.lineTools();t=new H(this.model(),Object(R.sortSources)(e),n[n.length-1])}}null===t&&(t=new F(this.model(),Object(R.sortSources)(e))),this._pushUndoCommand(t),this.emitEvent("changeZOrder",[e])},t.prototype.sendBackward=function(e){var t=this;if(!this.availableZOrderOperations(e).sendBackwardEnabled)throw new Error("Send backward operation is unavailable");var i=Xe.format({title:e[0].title()});this._sendBackOrBringForward(i,Object(R.sortSources)(e),(function(e,i){return new q(t.model(),e,i)}))},t.prototype.bringForward=function(e){var t=this;if(!this.availableZOrderOperations(e).bringForwardEnabled)throw new Error("Bring forward operation is unavailable");var i=Ke.format({title:e[0].title()});this._sendBackOrBringForward(i,Object(R.sortSources)(e),(function(e,i){return new X(t.model(),e,i)}))},t.prototype.insertAfter=function(e,t){var i=this;e=Object(R.sortSources)(e);var r=Je.format({title:e[0].title(),target:t.title()});this._insertAfterOrBefore(r,e,t,(function(){return new H(i.model(),e,t)}))},t.prototype.insertBefore=function(e,t){var i=this;e=Object(R.sortSources)(e);var r=Qe.format({title:e[0].title(),target:t.title()});this._insertAfterOrBefore(r,e,t,(function(){return new z(i.model(),e,t)}))},t.prototype.detachToRight=function(e,t){Object(We.trackEvent)("Chart","Move to new right scale");var i=window.t("Move {title} To New Price Scale").format({title:e.title()}),r=new Ne(this.model(),e,t,"right",i);this._pushUndoCommand(r),this.emitEvent("moveSource",[e])},t.prototype.detachToLeft=function(e,t){Object(We.trackEvent)("Chart","Move to new left scale");var i=window.t("Move {title} To New Left Scale").format({title:e.title()}),r=new Ne(this.model(),e,t,"left",i);this._pushUndoCommand(r),this.emitEvent("moveSource",[e])},t.prototype.detachNoScale=function(e,t){Object(We.trackEvent)("Chart","Make source no scale");var i=window.t("Make {title} No Scale (Full Screen)").format({title:e.title()}),r=new Ne(this.model(),e,t,"overlay",i);this._pushUndoCommand(r),this.emitEvent("moveSource",[e])},
t.prototype.moveToScale=function(e,t,i,r,n){Object(We.trackEvent)("Chart","Move source to target scale"),this.beginUndoMacro(r);var o=new Fe(this.model(),e,t,i,r),s=n?null:Object(He.sourceNewCurrencyOnPinningToPriceScale)(e,i,this._model());this._pushUndoCommand(o),null!==s&&this.setPriceScaleCurrency(i,s),this.endUndoMacro(),this.emitEvent("moveSource",[e])},t.prototype.startScrollTime=function(e){var t=this.timeScale();this._initialTimeScrollState={rightOffset:t.rightOffset(),barSpacing:t.barSpacing()},this._initialTimeScrollPos=e,this.model().startScrollTime(e)},t.prototype.scrollTimeTo=function(e){var t=!1;return null!==this._initialTimeScrollPos&&null!==this._initialTimeScrollState&&Math.abs(e-this._initialTimeScrollPos)>20&&(this._pushUndoCommand(new ee.a(this.model(),this._initialTimeScrollState,"Scroll Time")),this._initialTimeScrollPos=null,this._initialTimeScrollState=null,t=!0),this.model().scrollTimeTo(e),t},t.prototype.endScrollTime=function(){this.model().endScrollTime(),this._initialTimeScrollPos=null,this._initialTimeScrollState=null},t.prototype.startScaleTime=function(e){var t=this.timeScale(),i={rightOffset:t.rightOffset(),barSpacing:t.barSpacing()};this._pushUndoCommand(new ee.a(this.model(),i,"Scale Time")),this.model().startScaleTime(e)},t.prototype.scaleTimeTo=function(e){this.model().scaleTimeTo(e)},t.prototype.endScaleTime=function(){this.model().endScaleTime()},t.prototype.resetTimeScale=function(){var e=this.timeScale(),t={rightOffset:e.rightOffset(),barSpacing:e.barSpacing()};this._pushUndoCommand(new ee.a(this.model(),t,"Reset Time Scale")),this.model().resetTimeScale()},t.prototype.rearrangePanes=function(e,t){var i=new $(this._model(),e,t);this._pushUndoCommand(i)},t.prototype.movePane=function(e,t){var i=new $(this._model(),e,t);this._pushUndoCommand(i)},t.prototype.pasteSourceFromClip=function(e,t,i){var r=t||Object(B.get)();if(!r||0===r.sources.length)return null;var o=e||Object(n.ensureNotNull)(this.model().paneForSource(this.mainSeries()));if(!r.sources.some((function(e){return"drawing"!==e.type||null!==o.clipboardLineToolOwnerSource(e.source.id)})))return null;this.beginUndoMacro("Paste "+r.title);for(var s=0,a=[],l=0,u=r.sources;l<u.length;l++){var h=u[l];if("drawing"===h.type&&null!==o.clipboardLineToolOwnerSource(h.source.id)){var d=this.pasteLineTool(o,h);s<5&&(Object(te.d)(d),s+=1),a.push(d)}else"study"===h.type&&h.source&&h.source.metaInfo&&this.checkIfFeatureAvailable(new c.a(h.source.metaInfo))&&a.push(this.pasteStudy(h,i?e:void 0))}return this.endUndoMacro(),a},t.prototype.pasteLineTool=function(e,t){var i=new Re(this.model(),t,e);this._pushUndoCommand(i);var r=i.source();return i.needCopyToOtherCharts()&&this.copyToOtherCharts([r]),r},t.prototype.pasteStudy=function(e,t){var i=new ze(this.model(),e,null==t?void 0:t.id());this._pushUndoCommand(i);var r=Object(n.ensureNotNull)(i.state()).id;return Object(n.ensureNotNull)(this._model().dataSourceForId(r))},t.prototype.setPriceScaleCurrency=function(e,t){var i=new Ve(e,t,this.chartWidget(),"Change currency")
;this._pushUndoCommand(i)},t.prototype.setMainSeriesSymbol=function(e){if(this.mainSeries().symbol()!==e){this._pushUndoCommand(new je(e,this.chartWidget(),!1))}},t.prototype.copyToOtherCharts=function(e){var t=this,i=this.mainSeries(),o=i.syncModel(),s=this.timeScale();if(o)for(var a=0,l=e;a<l.length;a++){var c=l[a],u=c.linkKey||Object(Me.randomHash)();c.linkKey=u;var h=c.state(!1),d=c.normalizedPoints().map((function(e){var i=Object(n.ensureNotNull)(s.timePointToIndex(e.time_t))+e.offset;return{price:e.price,timeStamp:Object(n.ensureNotNull)(t.model().externalTimeStamp(i))}})),p=Object(r.__assign)(Object(r.__assign)({},h),{linkKey:u,points:d,linetool:c.getType(),model:this.model(),symbol:i.symbol(),finalState:{points:c.normalizedPoints(),interval:i.interval()}});c.isFixed()&&(p.pointPositionPercents=c.calcPositionPercents()),Object(ge.copyLineTool)(p)}},t.prototype.addPaneStretchFactorUndoCommand=function(e,t,i,r){var n=new Ge(this.model(),e,t,i,r);this._pushUndoCommand(n)},t.prototype.appliedTimeFrame=function(){return this._appliedTimeFrame.appliedTimeFrame()},t.prototype._mergeUnmergeSource=function(e,t){var i=this;this.beginUndoMacro(t.text());var r=Object(n.ensureNotNull)(this._model().paneForSource(e)),o=new Set(r.sourcesByGroup().lineSources().filter((function(t){return t.ownerSource()===e})));this._model().lineToolsGroupModel().groups().filter((function(e){var t=e.lineTools().some((function(e){return o.has(e)})),i=e.lineTools().some((function(e){return!o.has(e)}));return t&&i})).forEach((function(e){i._pushUndoCommand(new w(i._model(),e,e.lineTools()))})),this._pushUndoCommand(t),this.endUndoMacro()},t.prototype._insertAfterOrBefore=function(e,t,i,r){var o=this,s=Object(n.ensureNotNull)(this._model().paneForSource(i));if(t.some((function(e){return Object(m.isLineTool)(e)&&o._model().paneForSource(e)!==s})))throw new Error("Cannot insert line tool after target on another pane");this.beginUndoMacro(e),t.forEach((function(e){Object(n.ensureNotNull)(o.model().paneForSource(e))!==s&&o.mergeToPane(e,s)}));var a=r();this._pushUndoCommand(a),this.emitEvent("changeZOrder",[t]),this.endUndoMacro()},t.prototype._sendBackOrBringForward=function(e,t,i){var r=this,o=new Map;t.forEach((function(e){var t=Object(n.ensureNotNull)(r._model().paneForSource(e)),i=o.get(t)||[];i.push(e),o.set(t,i)})),this.beginUndoMacro(e),o.forEach((function(e,t){r._pushUndoCommand(i(t,e))})),this.endUndoMacro(),this.emitEvent("changeZOrder",[t])},t}(a.a)},opke:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="currentcolor" d="m13.5 5a1 1 0 0 0 0 19 1 1 0 0 0 0-19m0 1a1 1 0 0 1 0 17 1 1 0 0 1 0-17zm2.31-.6A9.5 9.5 0 0 0 9 14.5a9.5 9.5 0 0 0 6.81 9.1l.99-.78A8.5 8.5 0 0 1 10 14.5a8.5 8.5 0 0 1 6.8-8.32"/></svg>'},oxKA:function(e,t,i){"use strict";i.r(t),i.d(t,"getDataVendorString",(function(){return n}));var r=i("Kxc7");function n(e){
return null==e||r.enabled("bovespa_widget")?null:"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG","IDX","HSI","QSE","OSE"].includes(e.exchange)?"ICE Data Services":null}},p1SQ:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolHorzLinePriceAxisView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t){var i=e.call(this)||this;return i._source=t,i}return Object(r.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){e.visible=!1;var r=this._source.points(),n=this._source.priceScale();if(0!==r.length&&null!==n&&!n.isEmpty()){var o=r[0];if(isFinite(o.price)){var s=this._source.ownerSource(),a=null!==s?s.firstValue():null;if(null!==a){var l=this._source.properties().linecolor.value();i.background=l,i.color=this.generateTextColor(l),i.coordinate=n.priceToCoordinate(o.price,a),e.text=n.formatPrice(o.price,a),e.visible=!0}}}},t}(i("KcY8").a)},pA52:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r={id:"SymbolListRepositoryBackend"}},pCTl:function(e,t,i){"use strict";var r=i("8Uy/"),n=i("KtbP"),o=i("mrSG"),s=function(e){function t(t,i){var r=e.call(this)||this;return r._model=t,r._source=i,r}return Object(o.__extends)(t,e),t.prototype._value=function(){var e=this._model.mainSeries(),t=e.priceScale(),i=e.firstValue();if(null===i)return{noData:!0};var r=this._source.price(),n=this._source.currentSession();if(null===r||"pre_market"!==n&&"post_market"!==n)return{noData:!0};var o=t.priceToCoordinate(r,i);return{noData:!1,floatCoordinate:o,coordinate:o,color:"",formattedPricePercentage:"",formattedPriceAbsolute:"",text:"",index:0}},t.prototype._priceLineColor=function(e){var t=this._source.properties().childs();return"pre_market"===this._source.currentSession()?t.preMarketColor.value():t.postMarketColor.value()},t.prototype._lineWidth=function(){return this._source.properties().childs().lineWidth.value()},t.prototype._lineStyle=function(){return this._source.properties().childs().lineStyle.value()},t.prototype._isVisible=function(){if(!this._source.canBeVisibleOnSymbolAndInterval()||!this._model.properties().scalesProperties.showPrePostMarketPriceLabel.value())return!1;var e=this._source.price(),t=this._source.currentSession();return null!==e&&("pre_market"===t||"post_market"===t)},t}(i("TmNs").PriceLineAxisView),a=i("YFKU"),l=function(e){function t(t,i){var r=e.call(this)||this;return r._model=t,r._source=i,r}return Object(o.__extends)(t,e),t.prototype._updateRendererData=function(e,t,i){if(e.visible=!1,t.visible=!1,this._model.properties().scalesProperties.showPrePostMarketPriceLabel.value()){var r=this._model.mainSeries(),n=r.priceScale(),o=r.firstValue();if(null!==o&&this._source.canBeVisibleOnSymbolAndInterval()){var s=this._source.price(),l=this._source.currentSession();if(null!==s&&("pre_market"===l||"post_market"===l)){e.visible=!0,t.visible=!0,e.text=n.formatPriceAbsolute(s),
t.text="pre_market"===l?Object(a.t)("Pre"):Object(a.t)("Post"),i.coordinate=n.priceToCoordinate(s,o);var c=this._source.properties().childs();i.background="pre_market"===l?c.preMarketColor.value():c.postMarketColor.value()}}}},t}(i("KcY8").a),c=i("2ijp"),u=i("VdBB"),h=function(e){function t(t,i,r){var n=e.call(this)||this;n._model=t,n._source=i;var o={doubleClickHandler:r,doubleTapHandler:r};return n._lineRenderer.setHitTest(new u.HitTestResult(u.HitTestResult.CUSTOM,o)),n}return Object(o.__extends)(t,e),t.prototype._updateImpl=function(){var e=this._lineRendererData;e.visible=!1;var t=this._model.mainSeries(),i=this._source.properties().childs();if(i.visible.value()&&t.isVisible()){var r=t.priceScale(),n=t.firstValue();if(null!==n&&this._source.canBeVisibleOnSymbolAndInterval()){var o=this._source.price(),s=this._source.currentSession();null===o||"pre_market"!==s&&"post_market"!==s||(e.visible=!0,e.y=r.priceToCoordinate(o,n),e.linestyle=i.lineStyle.value(),e.linewidth=i.lineWidth.value(),e.color="pre_market"===s?i.preMarketColor.value():i.postMarketColor.value())}}},t}(c.a);i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return p}));var d={visible:!0,lineStyle:r.LINESTYLE_DOTTED,lineWidth:1,preMarketColor:"#fb8c00",postMarketColor:"#2196f3"},p=function(){function e(e,t){this._extraHoursPrice=null,this._currentSession="holiday",this._model=e,this._quotesProvider=e.mainSeries().quotesProvider(),this._prePostMarketLinePaneView=new h(e,this,t),this._prePostPriceAxisView=new l(e,this),this._prePostLabelPaneView=new n.PanePriceAxisView(this._prePostPriceAxisView,e.mainSeries(),e),this._prePostPriceLineAxisView=new s(e,this),this._quotesProvider.quotesUpdate().subscribe(this,this._updateQuotes),this._updateQuotes()}return e.prototype.destroy=function(){this._quotesProvider.quotesUpdate().unsubscribeAll(this)},e.prototype.paneViews=function(e){return this._isMainSourcePane(e)?[this._prePostMarketLinePaneView]:[]},e.prototype.labelPaneViews=function(e){return this._isMainSourcePane(e)?[this._prePostLabelPaneView]:[]},e.prototype.priceAxisViews=function(e,t){return this._isMainSourcePane(e)?e.findTargetPriceAxisViews(this,t,[this._prePostPriceAxisView],[this._prePostPriceLineAxisView]):[]},e.prototype.priceScale=function(){return this._model.mainSeries().priceScale()},e.prototype.updateAllViews=function(){this._prePostMarketLinePaneView.update(),this._prePostPriceAxisView.update(),this._prePostPriceLineAxisView.update(),this._prePostLabelPaneView.update()},e.prototype.price=function(){return this._extraHoursPrice},e.prototype.currentSession=function(){return this._currentSession},e.prototype.canBeVisibleOnSymbolAndInterval=function(){return!this._model.mainSeries().isPrePostMarketPricesForbiddenProperty().value()},e.prototype.properties=function(){return this._model.mainSeries().properties().prePostMarket},e.prototype._updateQuotes=function(){var e=this._quotesProvider.quotes();null===e?this._extraHoursPrice=null:(this._extraHoursPrice=e.rtc,this._currentSession=e.current_session),this.updateAllViews(),
this._model.updateSource(this)},e.prototype._isMainSourcePane=function(e){return this._model.paneForSource(this._model.mainSeries())===e},e}()},pJOz:function(e,t,i){"use strict";i.r(t),i.d(t,"drawCircle",(function(){return h})),i.d(t,"drawArrow",(function(){return d})),i.d(t,"TrendLineRenderer",(function(){return p}));var r=i("Eyy1"),n=i("GEp6"),o=i("VaSN"),s=i("a7Ha"),a=i("VdBB"),l=i("jFln"),c=i("Zp/P"),u=i("gAom");function h(e,t,i,r,n){t.save(),t.fillStyle="#000000",t.beginPath(),t.arc(e.x*n,e.y*n,i*n,0,2*Math.PI,!1),t.fill(),r.strokeWidth&&(t.lineWidth=r.strokeWidth,t.stroke()),t.restore()}function d(e,t,i,r,n){if(!(t.subtract(e).length()<1))for(var o=Object(c.getArrowPoints)(e,t,r,!1),s=0;s<o.length;++s){var a=o[s][0],u=o[s][1];Object(l.drawLine)(i,a.x*n,a.y*n,u.x*n,u.y*n)}}var p=function(){function e(){this._data=null,this._hittest=new a.HitTestResult(a.HitTestResult.MOVEPOINT)}return e.prototype.setData=function(e){this._data=e},e.prototype.setHitTest=function(e){this._hittest=e},e.prototype.draw=function(e,t){var i=this._data;if(null!==i&&!("points"in i&&i.points.length<2||"floatPoints"in i&&i.floatPoints.length<2)){var r=t.pixelRatio;e.lineCap="butt",e.strokeStyle=i.color,e.lineWidth=Math.max(1,Math.floor(i.linewidth*r)),Object(l.setLineStyle)(e,i.linestyle);var n="floatPoints"in i?i.floatPoints:i.points,o=n[0],s=n[1],a=[];i.overlayLineEndings?a=[o.clone(),s.clone()]:this._drawEnds(e,[o,s],i.linewidth,r);var c=this._extendAndClipLineSegment(o,s,t);null!==c&&i.linewidth>0&&(c[0].x===c[1].x?Object(u.drawVerticalLine)(e,Math.round(c[0].x*r),c[0].y*r,c[1].y*r):c[0].y===c[1].y?Object(u.drawHorizontalLine)(e,Math.round(c[0].y*r),c[0].x*r,c[1].x*r):Object(l.drawLine)(e,c[0].x*r,c[0].y*r,c[1].x*r,c[1].y*r)),i.overlayLineEndings&&this._drawEnds(e,a,i.linewidth,r)}},e.prototype.hitTest=function(e,t){var i=this._data;if(null===i)return null;if("points"in i&&i.points.length<2)return null;if("floatPoints"in i&&i.floatPoints.length<2)return null;var r=Object(o.lastEventIsTouch)()?24:3,s="floatPoints"in i?i.floatPoints:i.points,a=s[0],l=s[1],c=this._extendAndClipLineSegment(a,l,t);if(null!==c&&Object(n.distanceToSegment)(c[0],c[1],e).distance<=r)return this._hittest;return null},e.prototype._extendAndClipLineSegment=function(e,t,i){var n=Object(r.ensureNotNull)(this._data);return Object(c.extendAndClipLineSegment)(e,t,i.cssWidth,i.cssHeight,n.extendleft,n.extendright)},e.prototype._drawEnds=function(e,t,i,n){var o=t[0],a=t[1],l=Object(r.ensureNotNull)(this._data);switch(l.leftend){case s.LineEnd.Arrow:d(a,o,e,i,n);break;case s.LineEnd.Circle:h(o,e,i,Object(r.ensureDefined)(l.endstyle),n)}switch(l.rightend){case s.LineEnd.Arrow:d(o,a,e,i,n);break;case s.LineEnd.Circle:h(a,e,i,Object(r.ensureDefined)(l.endstyle),n)}},e}()},pKDv:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("ABCD Pattern");function s(e,t){this._constructor="LineToolABCD";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("bFMU").ABCDPaneView
;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 4},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"ABCD Pattern"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("y4pE").AbcdPatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolabcd",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolABCD=s},pOdx:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveByCustomer=function(e){if("seekingalpha"===e||"smartlab-custom"===e)return Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(6),i.e(8),i.e(12),i.e(15),i.e(18),i.e(20),i.e(21),i.e(22),i.e(19),i.e(23),i.e(27),i.e(29),i.e(40),i.e(45),i.e(46),i.e(51),i.e(52),i.e(53),i.e(61),i.e(62),i.e(72),i.e(74),i.e(81),i.e(94),i.e(95),i.e(96),i.e(115),i.e(124),i.e(125),i.e(130),i.e(138),i.e(210),i.e(0),i.e(7),i.e(9),i.e(16),i.e(28),i.e(33),i.e(32),i.e(43),i.e(41),i.e(42),i.e(47),i.e(56),i.e(65),i.e(79),i.e(80),i.e(99),i.e(132),i.e(192),i.e(267)]).then(i.bind(null,"fAc5"));if("cme"===e)return Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(6),i.e(8),i.e(12),i.e(15),i.e(18),i.e(20),i.e(21),i.e(22),i.e(19),i.e(23),i.e(27),i.e(29),i.e(40),i.e(45),i.e(46),i.e(51),i.e(52),i.e(53),i.e(61),i.e(62),i.e(72),i.e(74),i.e(81),i.e(94),i.e(95),i.e(115),i.e(124),i.e(125),i.e(130),i.e(138),i.e(0),i.e(7),i.e(9),i.e(16),i.e(28),i.e(33),i.e(32),i.e(43),i.e(41),i.e(42),i.e(47),i.e(56),i.e(65),i.e(79),i.e(80),i.e(99),i.e(132),i.e(308)]).then(i.bind(null,"t27O"));return Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(3),i.e(4),i.e(6),i.e(8),i.e(12),i.e(15),i.e(18),i.e(20),i.e(21),i.e(22),i.e(19),i.e(23),i.e(27),i.e(29),i.e(40),i.e(45),i.e(46),i.e(51),i.e(52),i.e(53),i.e(61),i.e(62),i.e(72),i.e(74),i.e(81),i.e(94),i.e(95),i.e(115),i.e(124),i.e(125),i.e(130),i.e(138),i.e(0),i.e(7),i.e(9),i.e(16),i.e(28),i.e(33),i.e(32),i.e(43),i.e(41),i.e(42),i.e(47),i.e(56),i.e(65),i.e(79),i.e(80),i.e(99),i.e(132),i.e(292)]).then(i.bind(null,"UGus"))}},pP4S:function(e,t,i){"use strict";var r,n;i.r(t),i.d(t,"ResponseMethods",(function(){return r})),i.d(t,"ErrorReasons",(function(){return n})),function(e){e.error="replay_error",e.point="replay_point",e.ok="replay_ok",e.resolutions="replay_resolutions",e.endOfData="replay_data_end",e.instanceId="replay_instance_id"}(r||(r={})),function(e){e.tooSmallDelay="too_small_delay",e.alreadyInAutoplay="already_in_autoplay",e.nothingToStop="nothing_to_stop",e.pointTooDeep="point_too_deep",e.alreadyInSession="already_in_session",e.thereIsNoSuchSeries="no_series",e.notAllowedInAutoplay="not_allow_in_autoplay",e.invalidResolution="invalid_resolution"}(n||(n={}))},pPtI:function(e,t,i){"use strict";i.r(t),i.d(t,"normalizeIntervalString",(function(){return m})),
i.d(t,"isAvailable",(function(){return v})),i.d(t,"setLastUsedResolution",(function(){return g})),i.d(t,"getRangeResolution",(function(){return y})),i.d(t,"getTimeBasedResolution",(function(){return b})),i.d(t,"getDefaultResolution",(function(){return S})),i.d(t,"getResolutionByChartStyle",(function(){return w})),i.d(t,"getServerInterval",(function(){return P})),i.d(t,"isResolutionMultiplierValid",(function(){return C})),i.d(t,"getMaxResolutionValue",(function(){return x})),i.d(t,"getResolutionsFromSettings",(function(){return I})),i.d(t,"convertResolutionsFromSettings",(function(){return E})),i.d(t,"mergeResolutions",(function(){return L})),i.d(t,"sortResolutions",(function(){return O})),i.d(t,"getCustomResolutions",(function(){return k})),i.d(t,"getTranslatedResolution",(function(){return D})),i.d(t,"getTranslatedResolutionModel",(function(){return R}));i("bSeV"),i("YFKU");var r,n,o,s=i("LxhU"),a=i("n5al"),l=i("Vdly"),c=i("PT1i"),u=i("IVMC"),h=i.n(u),d=i("ogJP"),p=((r={})[s.ResolutionKind.Seconds]=60,r[s.ResolutionKind.Minutes]=1440,r[s.SpecialResolutionKind.Hours]=24,r[s.ResolutionKind.Days]=365,r[s.ResolutionKind.Weeks]=52,r[s.ResolutionKind.Months]=12,r[s.ResolutionKind.Range]=1e5,r[s.ResolutionKind.Invalid]=NaN,r),f=((n={})[s.ResolutionKind.Seconds]=1,n[s.ResolutionKind.Minutes]=2,n[s.SpecialResolutionKind.Hours]=3,n[s.ResolutionKind.Days]=4,n[s.ResolutionKind.Weeks]=5,n[s.ResolutionKind.Months]=6,n[s.ResolutionKind.Range]=7,n[s.ResolutionKind.Invalid]=8,n),_=((o={})[s.ResolutionKind.Invalid]="",o[s.ResolutionKind.Seconds]=window.t("s",{context:"interval_short"}),o[s.ResolutionKind.Minutes]=window.t("m",{context:"interval_short"}),o[s.SpecialResolutionKind.Hours]=window.t("h",{context:"interval_short"}),o[s.ResolutionKind.Days]=window.t("D",{context:"interval_short"}),o[s.ResolutionKind.Weeks]=window.t("W",{context:"interval_short"}),o[s.ResolutionKind.Months]=window.t("M",{context:"interval_short"}),o[s.ResolutionKind.Range]=window.t("R",{context:"interval_short"}),o);function m(e){return s.Interval.parse(e).value()}function v(e){if(s.Interval.isRange(e))return!0;var t=m(e),i=c.linking.supportedResolutions.value(),r=!1;void 0!==i?r=-1!==i.map(m).indexOf(t):r=!0;return(c.linking.intraday.value()||s.Interval.isDWM(e))&&r}function g(e){s.Interval.isValid(e)&&(s.Interval.isRange(e)?l.setValue("chart.lastUsedRangeResolution",e):l.setValue("chart.lastUsedTimeBasedResolution",e))}function y(e){var t=l.getValue("chart.lastUsedRangeResolution");if(void 0!==t&&s.Interval.isRange(t))return t;for(var i="100R",r=0,n=e;r<n.length;r++){var o=n[r],a=s.Interval.parse(o);if(a.isRange()){var c=a.value();if("100R"===c)return c;i=c}}return i}function b(e){var t=l.getValue("chart.lastUsedTimeBasedResolution");if(void 0!==t&&s.Interval.isTimeBased(t))return t;for(var i="1D",r=0,n=e;r<n.length;r++){var o=n[r],a=s.Interval.parse(o);if(a.isTimeBased()){var c=a.value();if("1D"===c)return c;i=c}}return i}function S(e){return e?"100R":"1D"}function w(e,t,i){var r=a.isRangeStyle(e),n=s.Interval.isRange(t);return!r&&n?b(i):r&&!n?y(i):t}
function P(e){return s.Interval.isRange(e)?"1":e}function C(e){var t=s.Interval.parse(e),i=T(t.kind()),r=t.multiplier();return t.isValid()&&r<=i}function T(e){var t=p[e];return Number.isNaN(t)?1:t}function x(e){return T(s.Interval.kind(e))}function I(e){var t=E(l.getJSON(e,[]));return h()(t.filter(C).map(m))}function E(e){return Array.isArray(e)?e:Object.keys(e).map(s.Interval.normalize).filter(d.notNull)}function L(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=(e=[]).concat.apply(e,t);return O(r=h()(r.filter(C).map(m)))}function O(e){return e.sort(M)}function A(e){var t=s.Interval.parse(e),i=t.multiplier()||1;return t.isMinuteHours()?[s.SpecialResolutionKind.Hours,i/60]:[t.kind(),i]}function M(e,t){var i=A(e),r=i[0],n=i[1],o=A(t),s=o[0],a=o[1];return r!==s?f[r]-f[s]:n-a}function k(){var e=[];return window.user.is_pro&&(e=I("IntervalWidget.intervals")),e}function D(e){var t=R(e);return""+t.multiplier+t.shortKind}function R(e,t){var i=s.Interval.parse(e),r=i.multiplier(),n=i.kind();if(!i.isValid()){if(t)return null;throw new TypeError("Can't translate invalid interval")}return i.isMinuteHours()&&(r=Math.floor(r/60),n=s.SpecialResolutionKind.Hours),{multiplier:r.toString(),shortKind:V(n),hint:r+" "+V(n,r),mayOmitMultiplier:i.isDWM()&&1===r,mayOmitShortKind:i.isMinutes()&&!i.isMinuteHours()}}function V(e,t){if(!t)return _[e];switch(e){case s.ResolutionKind.Days:return window.t("day",{plural:"days",count:t});case s.ResolutionKind.Weeks:return window.t("week",{plural:"weeks",count:t});case s.ResolutionKind.Months:return window.t("month",{plural:"months",count:t});case s.ResolutionKind.Seconds:return window.t("second",{plural:"seconds",count:t});case s.ResolutionKind.Minutes:return window.t("minute",{plural:"minutes",count:t});case s.SpecialResolutionKind.Hours:return window.t("hour",{plural:"hours",count:t});case s.ResolutionKind.Range:return window.t("range",{plural:"ranges",count:t});default:return e}}},pvsv:function(e,t,i){"use strict";function r(e,t){Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(4),i.e(12),i.e(37),i.e(321),i.e(0),i.e(9),i.e("symbol-info-dialog-impl")]).then(function(r){i("1Z/g").showSymbolInfoDialog(e,t)}.bind(null,i)).catch(void 0)}i.r(t),i.d(t,"showSymbolInfoDialog",(function(){return r}))},qE4g:function(e,t,i){"use strict";i.r(t),i.d(t,"addBrandingSource",(function(){return n}));var r=i("GK7n");function n(e,t){function i(t){var i=e.getAll();if(1===i.length)return!0;var r=i[0].model();return r&&r.model()===t}e.addCustomSource("branding",(function(e){return new r.Branding(e,i.bind(null,e),t)}))}},qJq3:function(e,t,i){"use strict";(function(e,r,n){TradingView.DEFAULT_BAR_COUNT=300,TradingView.TIME_PLOT=0,TradingView.OPEN_PLOT=1,TradingView.HIGH_PLOT=2,TradingView.LOW_PLOT=3,TradingView.CLOSE_PLOT=4,TradingView.ADT_PLOT=6,TradingView.STYLE_PLOT=7
;var o=i("Eyy1").ensureNotNull,s=i("lUQk").SeriesBase,a=i("tBG4").SeriesStatusView,l=i("cXAR").SeriesDataWindowView,c=i("gWck").SeriesLegendView,u=i("x0JF"),h=u.SeriesAreaPaneView,d=u.SeriesLinePaneView,p=u.SeriesHollowCandlesPaneView,f=u.SeriesCandlesPaneView,_=u.SeriesBarsPaneView,m=u.SeriesHeikenAshiPaneView,v=u.SeriesBaselinePaneView,g=i("9Jkk").SeriesHiLoPaneView,y=i("biIa").SeriesWaterlinePaneView,b=i("Kxc7"),S=i("22O2"),w=S.SeriesRenkoPaneView,P=S.SeriesProjectionRenkoPaneView,C=S.SeriesPriceBreakPaneView,T=S.SeriesProjectionPriceBreakPaneView,x=S.SeriesKagiPaneView,I=S.SeriesProjectionKagiPaneView,E=S.SeriesPnFPaneView,L=S.SeriesProjectionPnFPaneView,O=S.SeriesProjectionRangePaneView,A=i("xlbu").telemetry,M=!1,k=i("YJLw"),D=i("oxKA").getDataVendorString,R=i("OKab").FormattersSerializer,V=i("wHzE").FutureBarsPaneView,B=i("e2wt").getSeriesDangerReason,N=i("+GxX").isFeatureEnabled,F=i("ZJKN").BarsRange,j=i("38az").SeriesBarColorer,W=i("XPit").SeriesData,H=i("XPit").barFunction,U=i("XPit").seriesPlotFunctionMap,z=i("k9/m"),G=z.PlotList,q=z.PlotRowSearchMode,Y=z.mergeMinMax,X=i("hsV8").unpackNonSeriesData,K=i("okVO").SyncModel,J=i("JWMC").trackEvent,Q=i("xDuj").translatedIntervalString,Z=i("txPx"),$=Z.getLogger("Chart.Series"),ee=Z.getLogger("Chart.Series.Updates",{highRate:!0}),te=i("dfhE"),ie=i("n5al"),re=i("pPtI"),ne=re.getServerInterval,oe=re.getResolutionByChartStyle,se=i("LxhU").Interval,ae=i("WkOR").areEqualSymbols,le=i("WkOR").includesEqualSymbol,ce=i("z+Sa").SeriesHorizontalBaseLinePaneView,ue=i("Z8aO").SeriesPriceLinePaneView,he=i("/Kki").SeriesPrevClosePriceLinePaneView,de=i("ZAbA").SeriesDataEvents,pe=i("FIi8").deepExtend,fe=i("5fI3").encodeExtendedSymbol,_e=i("FQhm"),me=i("qFKp").CheckMobile.any(),ve=i("YWnQ").SymbolErrorPermissionDeniedReason,ge=i("YWnQ").permissionDenied,ye=!b.enabled("hide_series_legend_item"),be=Number(window.TELEMETRY_SERVER_TIME_DIFF_THRESHOLD)||3e3,Se=i("aKms").MarketStatusModel,we=i("2S76").DataUpdatedModeModel,Pe=i("DsEq").DataProblemModel;var Ce=b.enabled("display_data_mode");function Te(t,r,n){var o=i("OK+B");s.call(this,t),this._dataEvents=new de,this._boxSizeChanged=new e,this._tagsChanged=new e,this._symbolIntervalChanged=new e,this._intervalChanged=new e,this._extendedHoursChanged=new e,this.chartWidgetInitialized=new e,this._onStyleChanged=new e,this._onStatusChanged=new e,this._onRestarted=new e,this.requestingIntradayWhenNotSupported=new e,this.requestingResolutionWhenNotSupported=new e,this._priceScaleChanged=new e,this._onInReplayStateChanged=new e,this._replayExitedDueUnsupportedInterval=new e,this._replayExitedDueUnavailableForUserInterval=new e,this._onTimeFrameApplied=new e,this._requestOptions=n||{count:TradingView.DEFAULT_BAR_COUNT},this.m_model=t,this._chartApi=t._chartApi,this.m_data=new W,this.setProperties(r),this._prevChartStyle=r.style.value(),this.createPaneView(),this._dataWindowView=new l(this,t),this._legendView=new c(this,t),this._statusView=new a(this,this._model.properties().scalesProperties.textColor,this.properties().statusViewStyle),
this._symbolInfo=null,this._prevSymbolInfo=null,this._status=Te.STATUS_OFFLINE,this._syncModel=null,this._replaySubscriber=null,this._isReplayResolutionAvailableForUser=null;var u=this;this._turnaroundCounter=1,this._turnaround="s"+this._turnaroundCounter,this._handler=function(e){u.onData(e)},this._haStyle={studyId:ie.chartStyleStudyId(Te.STYLE_HEIKEN_ASHI,!0)},this._renkoStyle={studyId:ie.chartStyleStudyId(Te.STYLE_RENKO,!0)},this._pbStyle={studyId:ie.chartStyleStudyId(Te.STYLE_PB,!0)},this._kagiStyle={studyId:ie.chartStyleStudyId(Te.STYLE_KAGI,!0)},this._pnfStyle={studyId:ie.chartStyleStudyId(Te.STYLE_PNF,!0)},this._rangeStyle={studyId:ie.chartStyleStudyId(Te.STYLE_RANGE,!0)},this._properties.addExclusion&&this._properties.addExclusion("visible"),this._predictBars=0,this._futureBarsPaneView=null,this._properties.showInDataWindow.listeners().subscribe(t,o.prototype.fullUpdate),this._loading=!0,this._seriesLoaded=!1,this.properties().minTick.listeners().subscribe(this,Te.prototype._recreateFormatter);u=this;this.properties().minTick.listeners().subscribe(null,(function(){u.m_model.fullUpdate()})),this._prevClosePriceLineView=new he(this),this._priceLineView=null,this._baseHorizontalLineView=new ce(this),this._gotoDateResultCleared=!1,this._gotoDateView=null,this.bindStyleChange(),this.bindJapChartsInputs(),this._createIsDWMProperty(),this.createExtendedHoursProperty(),this.extendedHours.listeners().subscribe(this,(function(e){this._extendedHoursChanged.fire(e),this.restart()})),this._dataEvents.extendedHoursNotPermitted().subscribe(this,(function(){this._properties.extendedHours.setValue(!1)})),this.createDividendsAdjustmentProperty(),this.dividendsAdjustment.listeners().subscribe(this,(function(){this.restart()})),this._dataPoweredBy=null,this._symbolIntervalChanged.subscribe(this,this.checkInterval),this.properties().showCountdown.listeners().subscribe(this,Te.prototype._onChangeShowCountdown),this._onChangeShowCountdown(this.properties().showCountdown),this._recreatePriceFormattingDependencies(),this._isDWMCached=null,this.properties().lineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().areaStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().baselineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this._updateBarFunction(),this._marketStatusModel=new Se(this._quotesProvider,this._properties.symbol.listeners()),this._dataUpdatedModeModel=Ce?new we({getter:this.symbolInfo.bind(this),onChange:this._dataEvents.symbolResolved()},{getter:this.status.bind(this),onChange:this._onStatusChanged},this._properties.symbol.listeners()):null,this._dataProblemModel=new Pe(this._quotesProvider,this._properties.symbol.listeners())}inherit(Te,s),Te.prototype.isLoading=function(){return this._loading},Te.prototype.isSymbolInvalid=function(){return this._status===Te.STATUS_INVALID_SYMBOL},Te.prototype.styleStudyInfos=function(){return{haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,
pnfStyle:this._pnfStyle,rangeStyle:this._rangeStyle}},Te.prototype.styleStudyInfo=function(e){return this.styleStudyInfos()[e]},Te.prototype.priceLineColor=function(e){return this.properties().priceLineColor.value()||e},Te.prototype.endOfData=function(){return this._endOfData},Te.prototype.serverTimeOffset=function(){return this._chartApi.serverTimeOffset()},Te.prototype._onChangeShowCountdown=function(e){var t=this;e.value()?this._countdownUpdateTimer=this.m_model.setInterval((function(){t._priceAxisView.updateCountdown()}),500):(this.m_model.clearInterval(this._countdownUpdateTimer),delete this._countdownUpdateTimer)},Te.prototype.lastValueData=function(e,t,i){var r={noData:!0};if(this.m_model.timeScale().isEmpty()||this.priceScale().isEmpty()||this.data().isEmpty())return r;var n,o,s=this.m_model.timeScale().visibleBarsStrictRange();if(null===s)return r;if(t){var a=this.data().bars().last();if(null===a)return r;n=a.value,o=a.index}else{var l=this.data().bars().search(s.lastBar(),q.NearestLeft);if(null===l)return r;n=this.data().bars().valueAt(l.index),o=l.index}var c={noData:!1},u=void 0!==e?n[e]:this._barFunction(n);i&&(c.price=u);var h=this.firstValue();c.text=this.priceScale().formatPrice(u,h),c.formattedPriceAbsolute=this.priceScale().formatPriceAbsolute(u),c.formattedPricePercentage=this.priceScale().formatPricePercentage(u,h);var d=this.barColorer().barStyle(o,!1);return c.color=d.barColor,c.floatCoordinate=this.priceScale().priceToCoordinate(u,h),c.coordinate=c.floatCoordinate,c.index=o,c},Te.prototype.prevClose=function(){if(this.priceScale().isEmpty()||this.data().isEmpty()||!this.quotes())return null;var e=this.quotes().prev_close_price;if(null==e)return null;var t=this.firstValue();return{coordinate:this.priceScale().priceToCoordinate(e,t),floatCoordinate:this.priceScale().priceToCoordinate(e,t),text:this.priceScale().formatPrice(e,t)}},Te.prototype.quotes=function(){return this.data().isEmpty()?null:this._quotesProvider.quotes()},Te.prototype._createIsDWMProperty=function(){this._isDWMProperty=new r(this.isDWM()),this._onRestarted.subscribe(this,(function(){this._isDWMProperty.setValue(this.isDWM())}))},Te.prototype.isDWMProperty=function(){return this._isDWMProperty},Te.prototype._prepareChartApiParams=function(){return this._requestOptions.startDate?!this._requestOptions.startDate||this._requestOptions.endDate||this._requestOptions.count?this._requestOptions.startDate&&this._requestOptions.endDate?["from_to",this._requestOptions.startDate,this._requestOptions.endDate]:["from_to",this._requestOptions.startDate,this._requestOptions.count]:["from_to",this._requestOptions.startDate]:this._requestOptions.count||TradingView.DEFAULT_BAR_COUNT},Te.prototype._nextSymbolId=1,Te.prototype._nextSeriesId=1,Object.assign(Te,te),Te.prototype.model=function(){return this.m_model},Te.prototype.fixLastBar=function(e){this._futureBarsPaneView||(this._futureBarsPaneView=new V(this,this.data().bars().lastIndex(),e))},Te.prototype.clearData=function(){this.data().clear()},Te.prototype.data=function(){return this.m_data},
Te.prototype.symbolId=function(){return this._symbolId},Te.prototype.seriesId=function(){return this._seriesId},Te.prototype.isPulse=function(){return this._symbolInfo&&this._symbolInfo.resolutions.length>0},Te.prototype.onTagsChanged=function(){return this._tagsChanged},Te.prototype.onSymbolIntervalChanged=function(){return this._symbolIntervalChanged},Te.prototype.onIntervalChanged=function(){return this._intervalChanged},Te.prototype.onStatusChanged=function(){return this._onStatusChanged},Te.prototype.onStyleChanged=function(){return this._onStyleChanged},Te.prototype.onRestarted=function(){return this._onRestarted},Te.prototype.onBoxSizeChanged=function(){return this._boxSizeChanged},Te.prototype.status=function(){return this._status},Te.prototype.isDWM=function(){if(null!==this._isDWMCached)return this._isDWMCached;var e=se.parse(this._properties.interval.value());if(e.isDWM())this._isDWMCached=!0;else{var t=e.isSeconds()?e.multiplier():60*e.multiplier();this._isDWMCached=!(t<216e3)}return this._isDWMCached},Te.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},Te.prototype.createPaneView=function(){this._paneView=null,this._projectionBarsPaneView=null,this._waterlineView=null,this._priceLineView=this.hasClosePrice()?new ue(this):null;var e=this._properties.style.value();switch(e){case Te.STYLE_BARS:this._paneView=new _(this,this.m_model);break;case Te.STYLE_CANDLES:this._paneView=new f(this,this.m_model);break;case Te.STYLE_LINE:this._paneView=new d(this,this.m_model);break;case Te.STYLE_AREA:this._paneView=new h(this,this.m_model);break;case Te.STYLE_HEIKEN_ASHI:this._paneView=new m(this,this.m_model);break;case Te.STYLE_HOLLOW_CANDLES:this._paneView=new p(this,this.m_model);break;case Te.STYLE_BASELINE:this._paneView=new v(this,this.m_model),this._waterlineView=new y(this);break;case Te.STYLE_HILO:this._paneView=new g(this,this.m_model)}switch(e){case Te.STYLE_RENKO:this._paneView=new w(this,this.m_model),this._projectionBarsPaneView=new P(this,this.m_model);break;case Te.STYLE_PB:this._paneView=new C(this,this.m_model),this._projectionBarsPaneView=new T(this,this.m_model);break;case Te.STYLE_KAGI:this._paneView=new x(this,this.m_model),this._projectionBarsPaneView=new I(this,this.m_model);break;case Te.STYLE_PNF:this._paneView=new E(this,this.m_model),this._projectionBarsPaneView=new L(this,this.m_model)}if(e===Te.STYLE_RANGE&&(this._paneView=new _(this,this.m_model),this._projectionBarsPaneView=new O(this,this.m_model)),null===this._paneView)throw Error("Unknown chart style assigned: "+e)},Te.prototype._clearStylePlot=function(e,t){if(0!==e.size()){var i=t||o(e.firstIndex()),r=o(e.lastIndex())+1;e.range(i,r).each((function(e,t){t[TradingView.STYLE_PLOT]=null}))}},Te.prototype.invalidateBarStylesCache=function(e){$.logDebug("Invalidate style cache starting from "+e),this._clearStylePlot(this.m_data.m_bars,e),this._clearStylePlot(this.m_data.m_nsBars)},Te.prototype.invalidateBarColorerCache=function(){delete this._barColorerCache,
this.invalidateBarStylesCache()},Te.prototype.barColorer=function(){if(this._barColorerCache)return this._barColorerCache;for(var e=null,t=this.m_model.dataSources().length-1;t>=0;t--){var i=this.m_model.dataSources()[t];if(i.metaInfo&&TradingView.isInherited(i.constructor,TradingView.Study)&&i.hasBarColorer()&&i.properties().visible.value()){var r=i.barColorer();null===e?e=r:e.pushBackBarColorer(r)}}return null===e?e=new j(this):e.pushBackBarColorer(new j(this)),this._barColorerCache=e,this._barColorerCache},Te.prototype.properties=function(){return this._properties},Te.prototype._barsState=function(e){var t=e.state();return t.data.forEach((function(e){e.value.splice(7,1)})),t},Te.prototype.state=function(e){var t={type:this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor),id:this.id(),state:this.properties().state(),zorder:this.zorder(),haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,pnfStyle:this._pnfStyle,rangeStyle:this._rangeStyle};return this._symbolInfo&&this._symbolInfo.ticker&&(t.state.symbol=this._symbolInfo.ticker),e&&(t.bars=this._barsState(this.m_data.m_bars),t.nsBars=this._barsState(this.m_data.m_nsBars),t.symbolInfo=this._symbolInfo,t.rtPrice=this.data().lastProjectionPrice),t.boxSize=this.data().boxSize,t.reversalAmount=this.data().reversalAmount,t.currencyId=this.properties().currencyId.value(),t},Te.prototype.restoreState=function(e,t){t&&this._setStatus(Te.STATUS_SNAPSHOT),this._properties.mergeAndFire(e.state),e.currencyId&&this.properties().currencyId.setValue(e.currencyId),this._prevChartStyle=this.properties().style.value(),this.createPaneView(),t&&this.restoreData(e.bars,e.nsBars,e.symbolInfo,e.rtPrice,e.boxSize,e.reversalAmount)},Te.prototype.hasStateForAlert=function(){return!!b.enabled("alerts")},Te.prototype.stateForAlert=function(){var e=this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor),t=this.idForAlert(),i=this.formatter();i=i?R.serialize(i):null;var r={id:t,uniqueId:t,type:e,proSymbol:this.proSymbol(),actualSymbol:this.actualSymbol(),symbolString:this.getSymbolString(),interval:this.interval(),style:this.properties().style.value(),styleInputs:this.getInputsProperties().state(),extendedHours:this._isExtendedHoursAllowed()&&this.extendedHours.value(),dividendsAdjustment:this.properties().dividendsAdjustment.value(),boxSize:this.data().boxSize,reversalAmount:this.data().reversalAmount,isSpread:this.isSpread(),formatter:i},n=B(this);return n&&(r.dangerReason=n),r},Te.prototype.idForAlert=function(){return k(this.getSymbolString()+se.normalize(this.interval())).toString()},Te.prototype.restoreData=function(e,t,i,r,n,o){this._status=Te.STATUS_SNAPSHOT,this.m_data.m_bars.restoreState(e),this.m_data.m_nsBars.restoreState(t),this.updateSymbolInfo(i,!1),this.m_data.lastProjectionPrice=r,this.m_data.boxSize=n,
n||(this.properties().style.value()===Te.STYLE_PNF?this.m_data.boxSize=this.properties().pnfStyle.inputs.boxSize.value():this.properties().style.value()===Te.STYLE_RENKO&&(this.m_data.boxSize=this.properties().renkoStyle.inputs.boxSize.value())),this.m_data.reversalAmount=o,o||this.properties().style.value()===Te.STYLE_KAGI&&(this.m_data.reversalAmount=this.properties().kagiStyle.inputs.reversalAmount.value()),this._loading=!1},Te.prototype.setProperties=function(e){e.timeframe||e.merge({timeframe:""}),e.shortName||e.merge({shortName:""}),e.currencyId||e.addChild("currencyId",new r(null)),this._properties=e,this._properties.symbol.listeners().subscribe(this,Te.prototype.changeSymbol),this._properties.interval.listeners().subscribe(this,Te.prototype.changeInterval),this._properties.currencyId.listeners().subscribe(this,Te.prototype.changeCurrency),this._properties.timeframe.listeners().subscribe(this,Te.prototype.changeTimeFrame),this._properties.listeners().subscribe(this,Te.prototype.changeProperties)},Te.prototype.changeSymbol=function(){this.setSymbolIntervalCurrencyDelayed(),this.m_model.checkLineToolSelection()},Te.prototype.changeInterval=function(){this.setSymbolIntervalCurrencyDelayed()},Te.prototype.changeCurrency=function(){this._currencyChanged.fire()},Te.prototype.changeTimeFrame=function(){J("GUI","Change timeframe")},Te.prototype.title=function(){return this.properties().symbol.value()+", "+Q(this.properties().interval.value())},Te.prototype.changeProperties=function(e){e!==this._properties.symbol&&e!==this._properties.interval&&e!==this._properties.timeframe&&(this._tagsChanged.fire(),this.createPaneView(),this.updateAllViews(),this.m_model.updateSource(this),_e.emit("series_properties_changed",this._id))},Te.prototype._makeNextSymbolId=function(){return"symbol_"+this._nextSymbolId++},Te.prototype._makeNextSeriesId=function(){return"s"+this._nextSeriesId++},Te.prototype.onData=function(e){var t=this;switch(e.method){case"symbol_resolved":if(e.params[0]!==this._symbolId){$.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+e.params[0]);break}this.updateSymbolInfo(e.params[1],!1),this.m_model.updateSource(this),this._dataEvents.fireSymbolResolved(this._symbolInfo),this.m_model.realignLineTools(),TradingView.onWidget()||(J("Symbol",e.params[1].listed_exchange,e.params[1].name),J("Symbol Type",e.params[1].type,e.params[1].listed_exchange));var r=this.symbolInfo().minmov/this.symbolInfo().pricescale,n=this.properties();n.style.value()===Te.STYLE_RENKO&&n.renkoStyle.inputs.boxSize.value()<r?n.renkoStyle.inputs.merge({boxSize:r}):n.style.value()===Te.STYLE_PNF&&n.pnfStyle.inputs.boxSize.value()<r?n.pnfStyle.inputs.merge({boxSize:r}):n.style.value()===Te.STYLE_KAGI&&n.kagiStyle.inputs.reversalAmount.value()<r&&n.kagiStyle.inputs.merge({reversalAmount:r});break;case"symbol_error":if(e.params[0]!==this._symbolId){$.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+e.params[0]);break}if(this._setStatus(Te.STATUS_INVALID_SYMBOL),this._loading=!1,
this._properties.shortName.setValue(this._properties.symbol.value()),this.m_model.clearAllStudies(),this.updateAllViews(),this.m_model.updateSource(this),(p=e.params[1])===ge)switch(e.params[2]){case ve.ExtendedHours:this._dataEvents.fireExtendedHoursNotPermitted();break;case ve.Symbol:this._dataEvents.fireSymbolNotPermitted(e.params[3]);break;case ve.GroupPermission:this._dataEvents.fireSymbolGroupNotPermitted(e.params[3]);break;default:this._dataEvents.fireSymbolNotPermitted(e.params[2])}else this.m_model.resetTimeScale(),this._dataEvents.fireSymbolError(e);this.m_model.realignLineTools(),this._sendTelemetryCounter("symbol_error",this._getTelemetryAdditionalData(p,!1));break;case"series_timeframe":if(e.params[1]!==this._turnaround)break;var s=e.params[2],a=e.params[3],l=e.params[6],c=this.m_model.timeScale(),u=a;if(void 0===l)u+=c.defaultRightOffsetProperty().value();else if(l.applyDefaultRightMargin)u+=c.defaultRightOffsetProperty().value();else if(l.percentRightMargin){var h=a-s+1,d=Math.max(0,Math.min(.99,l.percentRightMargin/100));u+=d*h/(1-d)}this.m_model.setTimeViewport(s,u);break;case"series_error":var p=e.params[2];if(this._loading=!1,delete this._loadingStartTime,b.enabled("charting_library_debug_mode")&&$.logNormal("Error reason: "+p),this._setStatus(b.enabled("no_bars_status")&&this._symbolInfo?Te.STATUS_NO_BARS:Te.STATUS_INVALID_SYMBOL),"string"==typeof p)if(p.startsWith("study_not_auth:")){var f=p.split(":",2)[1].split("@",2)[0];f in{BarSetRenko:!0,BarSetPriceBreak:!0,BarSetKagi:!0,BarSetPnF:!0}?this._dataEvents.fireChartTypeNotPermitted(f):"BarSetSpread"===f?this._dataEvents.fireIntradaySpreadNotPermitted():"BarSetRange"===f&&this._dataEvents.fireCustomIntervalNotPermitted()}else"resolution_not_entitled"===p?this._dataEvents.fireIntradayExchangeNotPermitted():"custom_resolution"===p?this._dataEvents.fireCustomIntervalNotPermitted():"seconds_not_entitled"===p&&N("seconds_bars")&&this._dataEvents.fireSecondsIntervalNotPermitted();this._seriesLoaded=!0,this._sendTelemetryCounter("series_error",this._getTelemetryAdditionalData(p)),this._dataEvents.fireSeriesError(e);break;case"series_loading":if(e.params[1]!==this._turnaround)break;if(e.params[0]!==this._seriesId){$.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}this._loading=!0,this._setStatus(Te.STATUS_LOADING),t._loadingStartTime=(new Date).getTime();break;case"series_completed":if(e.params[2]!==this._turnaround)break;if(e.params[0]!==this._seriesId){$.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}if(this._setSymbolIntervalDelay){if(this._willSymbolIntervalCurrencyChanged())return void $.logNormal("command comes during symbol/interval changing");$.logNormal("series_completed comes when symbol interval delay present but symbol/interval should not be changed")}var _="chartSession:"+t._chartApi._sessionid,m=(new Date).getTime()-this._loadingStartTime;$.logDebug(_+", Series loading took "+m+" ms, eod:"+this._endOfData);var v=e.params[e.params.length-1]
;if(v){var g=Math.round(1e3*(v-this.serverTimeOffset()))-this._loadingStartTime,y=g>0&&m-g>=be;this._sendTelemetryTiming("series_server_time_frame",y?g:m,this._getTelemetryAdditionalData())}this._sendTelemetryCounter("series_loaded",this._getTelemetryAdditionalData()),this._sendTelemetryTiming("series_time_frame",m,this._getTelemetryAdditionalData()),this._loading=!1,delete this._loadingStartTime;var S=e.params[1];switch("pulsed"===S&&(S="delayed"),S){case"streaming":this._setStatus(Te.STATUS_READY);break;case"endofday":this._setStatus(Te.STATUS_EOD);break;case"delayed":this._setStatus(Te.STATUS_DELAYED);break;case"pulsed":this._setStatus(Te.STATUS_PULSE);break;case"replay":this._setStatus(Te.STATUS_REPLAY)}S.match(/delayed_streaming/)&&this._setStatus(Te.STATUS_DELAYED_STREAMING);var w=this.m_model.paneForSource(this);if(w.recalculatePriceScale(this.priceScale()),this.m_model.fullUpdate(),this.m_data.size()&&this._dataEvents.fireTickMarksRangeChanged({start:o(this.data().first()).value[TradingView.TIME_PLOT],end:o(this.data().last()).value[TradingView.TIME_PLOT]}),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0),this.model().recalcStudyBasedLineTools(),!this.m_priceScale.isLockScale()||this.model().timeScale().isEmpty()||this._seriesLoaded||(this.model().timeScale()._correctOffset(),this.model().timeScale().correctBarSpacing(),this.model().resetPriceScale(w,this.priceScale())),this._seriesLoaded=!0,this._dataEvents.fireCompleted(),!M)if(M=!0,window.performance&&window.performance.timing)(0,i("dB5d").trackTiming)("Chart","Time to series",Date.now()-window.performance.timing.requestStart);this.requestMoreData();break;case"series_deleted":break;case"data_update":if(e.params.customId!==this._seriesId){$.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}if(e.params.turnaround!==this._turnaround){$.logNormal("command for old series turnaround. Expected:"+this._turnaround+", actual"+e.params.turnaround);break}if(this._setSymbolIntervalDelay){if(this._willSymbolIntervalCurrencyChanged())return void $.logNormal("command comes during symbol/interval changing");$.logNormal("data_update comes when symbol interval delay present but symbol/interval should not be changed")}if(this.status()===Te.STATUS_INVALID_SYMBOL)break;if(e.params.plots.length){var P=this.m_data.bars().size(),C=this.m_data.bars().firstIndex(),T=this.m_data.bars().merge(e.params.plots);(null===C||T.index<C)&&(this._endOfData=!1);var x="Merge bars. earliestRow:"+T.index+"} ";x+="bars state:{firstBar:"+o(this.m_data.bars().firstIndex())+",lastBar:"+o(this.m_data.bars().lastIndex())+",size:"+this.m_data.bars().size()+"}",ee.logDebug(x),P!==this.bars().size()&&(this._dataEvents.fireBarReceived(T),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0))}else this.m_data.clear();e.params.lastBar?this._lastBarCloseTime=e.params.lastBar.closeTime||null:this._lastBarCloseTime=null,new Promise((function(i){var r=t.properties().style.value()
;e.params.nonseries&&"nochange"!==e.params.nonseries.indexes&&ie.isRangeBasedStyle(r)?t.parseJapProjBars(e.params.nonseries).then((function(e){t.m_data.m_nsBars=e.nsBars,t.m_data.lastProjectionPrice=e.lastPrice;var r=t.m_data.boxSize!==e.boxSize;t.m_data.boxSize=e.boxSize,t.m_data.reversalAmount=e.reversalAmount,r&&t._boxSizeChanged.fire(t.m_data.boxSize),i()})):(e.params.nonseries||(t.m_data.m_nsBars.clear(),t.m_data.lastProjectionPrice=void 0),i(),i())})).then((function(){t._statusView.invalidate();var e=t.m_model.paneForSource(t);t.m_model.updateAllVolumeStudies(),t.m_model.recalculatePane(e),t.m_model.updateSource(t),t.m_model.updateLineTools(),t.m_model.updateCrossHair()}))}this._dataEvents.fireMessageReceived(e)},Te.prototype.parseJapProjBars=function(e){var t,i,r,n=new G(U()),o=this.model().timeScale(),s=this.properties().style.value();return new Promise((function(a){e.d&&""!==e.d?X(e.d).then((function(l){var c=l.data;t=c.price,i=c.boxSize,r=c.reversalAmount;for(var u=c.bars,h=0;u&&h<u.length;h++){var d=[],p=e.indexes[u[h].time];d.push(o.points().valueAt(p)),d.push(u[h].open),d.push(u[h].high),d.push(u[h].low),d.push(u[h].close),d.push(u[h].volume),s===Te.STYLE_KAGI?d.push(u[h].additionalPrice):s===Te.STYLE_PNF&&d.push(u[h].factor),n.add(p,d)}a({nsBars:n,lastPrice:t,boxSize:i,reversalAmount:r})})):a({nsBars:n,lastPrice:t,boxSize:i,reversalAmount:r})}))},Te.prototype.disconnect=function(){this._seriesId&&this._chartApi.removeSeries(this._seriesId),this._symbolId=null,this._seriesId=null,this.m_symbol=void 0,this._predictBars=0,this._status=Te.STATUS_OFFLINE},Te.prototype.isStarted=function(){return!!this._symbolId},Te.prototype.restart=function(){if(this._status!==Te.STATUS_SNAPSHOT){this._loading=!0,this._onRestarted.fire(),this._setStatus(Te.STATUS_RESOLVING),this.m_data=new W,this.updateSymbolInfo(null,!0),this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId();var e=this._properties.interval.value();this._checkIntervalWillChanged(e)&&this._notifyIntervalChanged(e);var t=null;if(this._pendingTimeRange&&(t=this._pendingTimeRange,delete this._pendingTimeRange),this._removeReplaySubscriber(),this._onBeforeModifySeries(this.getSymbolString(),e),this._onTimeFrameApplied.fire(t),e=ne(e),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler),this._seriesId)this._turnaround="s"+ ++this._turnaroundCounter,this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,e,t,this._handler,this._prevSymbolId);else this._seriesId=this._makeNextSeriesId(),!1===this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,e,this._prepareChartApiParams(),t,this._handler)&&(this._seriesId=void 0);this.m_symbol=this._properties.symbol.value(),this._currency=this._properties.currencyId.value(),this.m_interval=this._properties.interval.value()}},Te.prototype.hasDelayedSymbolIntervalChange=function(){return!!this._setSymbolIntervalDelay},Te.prototype.setSymbolIntervalCurrencyDelayed=function(){this._isDWMCached=null,
this._willSymbolIntervalCurrencyChanged()&&(this._setSymbolIntervalDelay&&($.logNormal("Clear timeout to change symbol/interval #"+this._setSymbolIntervalDelay),clearTimeout(this._setSymbolIntervalDelay)),this._setSymbolIntervalDelay=setTimeout(function(){$.logNormal("Timeout #"+this._setSymbolIntervalDelay+' fired, new symbol will be "'+this._properties.symbol.value()+'"'),delete this._setSymbolIntervalDelay,this._setSymbolInterval(this._properties.symbol.value(),this._properties.interval.value(),this._properties.currencyId.value())}.bind(this),30),$.logNormal("Started timeout #"+this._setSymbolIntervalDelay+' to change symbol/interval from "'+this.m_symbol+'" to "'+this._properties.symbol.value()+'"'))},Te.prototype._willSymbolIntervalCurrencyChanged=function(){var e=this._checkIntervalWillChanged(this._properties.interval.value());return this._checkSymbolWillChanged(this._properties.symbol.value())||e||!1},Te.prototype._checkSymbolWillChanged=function(e){return!this.symbolSameAsCurrent(e)},Te.prototype._checkIntervalWillChanged=function(e){return this.m_interval!==e},Te.prototype._checkCurrencyWillChanged=function(e){return!1},Te.prototype.rerequestData=function(){this._setSymbolInterval(this.m_symbol,this.m_interval,this._currency,!0)},Te.prototype._notifyIntervalChanged=function(e){var t={timeframe:this._pendingTimeRange};this._intervalChanged.fire(e,t),this._pendingTimeRange=t.timeframe},Te.prototype._setSymbolInterval=function(e,t,i,r){this.clearGotoDateResult();var n=se.isRange(t);n&&this._properties.rangeStyle.inputs.range.setValue(se.parse(t).multiplier());var o=this._checkSymbolWillChanged(e),s=this._checkIntervalWillChanged(t);if(o||s||r){if((n||se.isRange(this.m_interval))&&(this._symbolId=null),this._syncModel=null,this.m_symbol=e,this.m_interval=t,this._currency=i,this._symbolId&&!o||this.updateSymbolInfo(null,!o&&!1),this.isInReplay()){var a=function(){this._removeReplaySubscriber(),this._symbolId=null}.bind(this);o?a():s&&(this._isReplayResolutionAvailableForUser(t)?this.isIntervalSupported(t)||(a(),this._replayExitedDueUnsupportedInterval.fire()):(a(),this._replayExitedDueUnavailableForUserInterval.fire()))}if(this.m_model.realignLineTools(),this._status!==Te.STATUS_SNAPSHOT){if(this._loading=!0,this._setStatus(Te.STATUS_RESOLVING),this._symbolIntervalChanged.fire(),s&&this._notifyIntervalChanged(this.m_interval),this._onRestarted.fire(),this._seriesLoaded=!1,this._chartApi&&this._chartApi.connected()){this._symbolId&&!o||(this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler));var l=null;this._pendingTimeRange&&(l=this._pendingTimeRange,delete this._pendingTimeRange),this._onTimeFrameApplied.fire(l),this._seriesId?(this._onBeforeModifySeries(this.getSymbolString(),t),this._turnaround="s"+ ++this._turnaroundCounter,this._predictBars=0,t=ne(t),
this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,t,l,this._handler,this._prevSymbolId)):(this._onBeforeModifySeries(this.getSymbolString(),t),this._seriesId=this._makeNextSeriesId(),t=ne(t),this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,t,this._prepareChartApiParams(),l,this._handler))}this._updateIsPrePostMarketPricesForbiddenProperty()}}},Te.prototype.setDefaultTimeframe=function(e){this._pendingTimeRange=e},Te.prototype.actualSymbol=function(){return this.symbolInfo()?this.symbolInfo().full_name:this.symbol()},Te.prototype.proSymbol=function(){return this.symbolInfo()?this.symbolInfo().pro_name:this.symbol()},Te.prototype.symbol=function(){return this.properties().symbol.value()},Te.prototype.interval=function(){return this.properties().interval.value()},Te.prototype.bars=function(){return this.m_data.m_bars},Te.prototype.nsBars=function(){return this.m_data.m_nsBars},Te.prototype.hl2=function(e){return(this.high(e)+this.low(e))/2},Te.prototype.hlc3=function(e){return(this.high(e)+this.low(e)+this.close(e))/3},Te.prototype.ohlc4=function(e){return(this.open(e)+this.high(e)+this.low(e)+this.close(e))/4},Te.prototype.priceRange=function(e,t){if(!TradingView.isInteger(e))return $.logDebug("Series.priceRange: incorrect startBar"),null;if(!TradingView.isInteger(t))return $.logDebug("Series.priceRange: incorrect endBar"),null;if(this.data().isEmpty())return null;if(this.m_priceScale.isLockScale()){var i=this._model.mainSeriesScaleRatio();if(null!==i){var r=this.priceScale().internalHeight()/(this.model().timeScale().barSpacing()/i),o=this.data().search(t,q.NearestLeft),s=(o.value[TradingView.HIGH_PLOT]+o.value[TradingView.LOW_PLOT])/2;return new n(s-.5*r,s+.5*r)}}var a=this.priceSource();if(null!==a)var l=this.data().bars().minMaxOnRangeCached(e,t,[{name:a,offset:0}]),c=this.data().nsBars().minMaxOnRangeCached(e,t,[{name:a,offset:0}]);else l=this.data().bars().minMaxOnRangeCached(e,t,[{name:"low",offset:0},{name:"high",offset:0}]),c=this.data().nsBars().minMaxOnRange(e,t,[{name:"low",offset:0},{name:"high",offset:0}]);var u=null!==(l=Y(l,c))?l.min===l.max?new n(l.min-.5,l.max+.5):new n(l.min,l.max):new n(-.5,.5);return this.priceScale().isLog()?new n(this.priceScale().priceToLogical(u.minValue()),this.priceScale().priceToLogical(u.maxValue())):u},Te.prototype.nearestData=function(e,t){if(TradingView.isInteger(e)){var i=this.data().search(e,t);return null!==i?i:void 0}$.logDebug("Series.nearestData: incorrect logicalPoint")},Te.prototype.nearestIndex=function(e,t){var i=this.nearestData(e,t);return i?i.index:void 0},Te.prototype.paneViews=function(){if(!this.properties().visible.value())return null;var e=[this._baseHorizontalLineView,this._paneView];return this._futureBarsPaneView&&e.push(this._futureBarsPaneView),this._projectionBarsPaneView&&e.push(this._projectionBarsPaneView),null!==this._waterlineView&&e.push(this._waterlineView),e.push(this._prevClosePriceLineView),null!==this._priceLineView&&e.push(this._priceLineView),
null!==this._gotoDateView&&e.push(this._gotoDateView),e},Te.prototype.dataWindowView=function(){return this._dataWindowView},Te.prototype.legendView=function(){return this._legendView},Te.prototype.statusView=function(){return ye?this._statusView:null},Te.prototype.marketStatusModel=function(){return this._marketStatusModel},Te.prototype.dataUpdatedModeModel=function(){return this._dataUpdatedModeModel},Te.prototype.dataProblemModel=function(){return this._dataProblemModel},Te.prototype.priceAxisViews=function(e,t){return e.findTargetPriceAxisViews(this,t,this._priceAxisViews,[this._priceLinePriceAxisView])},Te.prototype.purgeSymbolInfo=function(){this._symbolInfo=null,this._isDWMCached=null},Te.prototype.updateSymbolInfo=function(e,t){var i=ie.extractSymbolNameFromSymbolInfo(e,this.m_symbol);if(this._prevSymbolInfo=t?this._symbolInfo:null,this._symbolInfo=e,e){this._properties.shortName.setValue(e.name);var r=this._properties.symbol.value(),n=i;b.enabled("uppercase_instrument_names")&&(r=r.toUpperCase(),n=n.toUpperCase()),i&&r!==n&&this._properties.symbol.setValue(i),this._currency=ie.seriesCurrency(e),this._properties.currencyId.setValue(this._currency)}this._base=e?e.pricescale/e.minmov:100,this._pointValue=e&&e.pointvalue||1,this._recreatePriceFormattingDependencies(),this._statusView.update(),this.priceScale().updateFormatter(),this._quotesProvider.setQuotesSessionSymbol(this._getSymbolForApi()),this.checkInterval(),this._dataPoweredBy=D(e),this._updateIsPrePostMarketPricesForbiddenProperty()},Te.prototype._onQuotesUpdate=function(e,t){if(me){var i=void 0!==t.values.change||void 0!==t.values.change_percent;i&&this._legendView.update();var r=void 0!==t.values.prev_close_price;r&&(this._prevClosePriceLineView.update(),this._prevClosePriceAxisView.update()),(i||r)&&this.m_model.updateSource(this)}},Te.prototype.dataPoweredBy=function(){return this._dataPoweredBy},Te.prototype.symbolSameAsCurrent=function(e){if(ae(this.m_symbol,e))return!0;var t=this._symbolInfo;if(t){if(ae(t.full_name,e)||ae(t.pro_name,e))return!0;if(ae(t.ticker,e))return!0;if(t.aliases&&le(t.aliases,e))return!0;if(t.alternatives&&le(t.alternatives,e))return!0;if(0===e.indexOf("FRA:")&&ae(t.pro_name,e.replace("FRA:","FWB:")))return!0}return!1},Te.prototype.updateAllViews=function(){this._paneView.update(),this._dataWindowView.update(),this._legendView.update(),this._statusView.update();for(var e=this._priceAxisViews.length,t=0;t<e;t++)this._priceAxisViews[t].update();this._priceLinePriceAxisView.update(),this._futureBarsPaneView&&this._futureBarsPaneView.update(),this._projectionBarsPaneView&&this._projectionBarsPaneView.update(),null!==this._waterlineView&&this._waterlineView.update(),this._prevClosePriceLineView.update(),null!==this._priceLineView&&this._priceLineView.update(),null!==this._gotoDateView&&this._gotoDateView.update(),this._baseHorizontalLineView.update();var i=this._model.activeStrategySource().value();null!==i&&i.updateAllViews()},Te.prototype._setStatus=function(e){this._status=e,this._statusView.update(),
this.m_model.updateSource(this),this._onStatusChanged.fire()},Te.prototype.requestMoreData=function(e){if((this._status===Te.STATUS_READY||this._status===Te.STATUS_PULSE||this._status===Te.STATUS_DELAYED||this._status===Te.STATUS_DELAYED_STREAMING||this._status===Te.STATUS_EOD||this._status===Te.STATUS_REPLAY)&&!this.m_model.timeScale().isEmpty()){var t=this.m_model.timeScale().visibleBarsStrictRange();if(null!==t&&0!==this.bars().size()){var i=t.lastBar()-o(this.data().last()).index;if(this._predictBars<i&&(this._predictBars=i,this._chartApi&&this._chartApi.connected()&&this._chartApi.requestMoreTickmarks(this._seriesId,i,this._handler)),!this._endOfData){var r=o(this.bars().firstIndex()),n=e||r-t.firstBar();n<=0||(Number.isFinite(n)?(this._endOfData=!0,this._loading=!0,this._chartApi&&this._chartApi.connected()&&(this._chartApi.requestMoreData(this._seriesId,n,this._handler),b.enabled("charting_library_base")&&(this._predictBars=0)),this._setStatus(Te.STATUS_LOADING)):$.logWarn("requestMoreData: invalid bar count: "+n+", visible bars: ["+t.firstBar()+", "+t.lastBar()+"], last index: "+o(this.data().last()).index+", predicted bars: "+this._predictBars+", required bars:"+e))}}}},Te.prototype.bindStyleChange=function(){var e=this;Object.keys(Te.STYLE_SHORT_NAMES).map((function(e){return Te.STYLE_SHORT_NAMES[e]+"Style"})).forEach((function(t){e._properties[t].listeners().subscribe(e,Te.prototype.invalidateBarStylesCache)}))},Te.prototype.bindJapChartsInputs=function(){this._properties.style.listeners().subscribe(this,this.onChartStyleChanged),this._properties.renkoStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.wicks.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.sources.listeners().subscribe(this,this.onInputChanged),this._properties.pbStyle.inputs.lb.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.sources.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.oneStepBackBuilding.listeners().subscribe(this,this.onInputChanged),this._properties.rangeStyle.inputs.phantomBars.listeners().subscribe(this,this.onInputChanged)},
Te.prototype.createExtendedHoursProperty=function(){var e=this;function t(){e.model().readOnly();var t=e._properties.extendedHours.value();b.enabled("widget");e.extendedHours.setValue(t)}e._properties.extendedHours.listeners().subscribe(null,t),e._properties.interval.listeners().subscribe(null,t),e.chartWidgetInitialized.subscribe(null,t),t()},Te.prototype.createDividendsAdjustmentProperty=function(){var e=this;function t(){var t=e._properties.dividendsAdjustment.value();e.dividendsAdjustment.setValue(t),J("Dividends adjust",!0===t?"On":"Off")}e.dividendsAdjustment=new r,e._properties.dividendsAdjustment.listeners().subscribe(null,t),t()},Te.prototype.dividendsAdjustmentProperty=function(){return this._properties.dividendsAdjustment},Te.prototype.setChartStyleWithIntervalIfNeeded=function(e,t){var i=t;void 0===t&&(i=oe(e,this._properties.interval.value(),this._model.defaultResolutions())),se.isEqual(i,this._properties.interval.value())||this._properties.interval.setValue(i),this._properties.style.setValue(e)},Te.prototype.isNeedRestart=function(e){return this._status!==Te.STATUS_SNAPSHOT&&(void 0===e&&(e=this.properties().style.value()),!ie.isRangeStyle(this._prevChartStyle)&&!ie.isRangeStyle(e)&&!(this._prevChartStyle===e||!ie.isRequiringRestartSeriesStyles(this._prevChartStyle)&&!ie.isRequiringRestartSeriesStyles(e)))},Te.prototype.onChartStyleChanged=function(){this._updateBarFunction(),this.isNeedRestart()&&(this.data().clear(),this.model().timeScale().scrollToRealtime(!1),this.isInReplay()&&!this.isStyleSupportedForReplay(this.style())&&this._removeReplaySubscriber(),this.restart()),this._prevChartStyle=this.properties().style.value(),this._onStyleChanged.fire(this.properties().style.value()),this.invalidateBarStylesCache()},Te.prototype.applyPreferences=function(e){var t=pe({},e);this.m_priceScale.setMode({autoScale:t.priceAxisProperties.autoScale,percentage:t.priceAxisProperties.percentage,log:t.priceAxisProperties.log,lockScale:t.priceAxisProperties.lockScale}),this.setChartStyleWithIntervalIfNeeded(t.style),delete t.style,delete t.interval,this._properties.mergePreferences(t),this._properties.saveDefaults(),this.createPaneView(),this.invalidateBarStylesCache()},Te.prototype.barFunction=function(){return this._barFunction},Te.prototype.priceSource=function(){var e=null;switch(this._properties.style.value()){case Te.STYLE_LINE:e=this._properties.lineStyle.priceSource.value();break;case Te.STYLE_AREA:e=this._properties.areaStyle.priceSource.value();break;case Te.STYLE_BASELINE:e=this._properties.baselineStyle.priceSource.value()}return e},Te.prototype._updateBarFunction=function(){if(this._properties.style.value()===Te.STYLE_HILO)this._barFunction=H("low");else{var e=this.priceSource()||"close";this._barFunction=H(e)}},Te.prototype.style=function(){return this.properties().style.value()},Te.prototype.isRangeBasedStyle=function(){return ie.isRangeBasedStyle(this.style())},Te.prototype.onInputChanged=function(){this.restart()},Te.prototype.onExtendedHoursChanged=function(){return this._extendedHoursChanged},
Te.prototype._getSymbolForApi=function(){if(b.enabled("pay_attention_to_ticker_not_symbol")){var e=this._symbolInfo||this._prevSymbolInfo;return e?e.ticker:this.actualSymbol()}return this.actualSymbol()},Te.prototype._getSymbolObject=function(){var e={symbol:this._getSymbolForApi()},t=this.properties().dividendsAdjustment.value()?"dividends":"splits";(e.adjustment=t,this.extendedHours.value()&&(e.session="extended"),Te.SYMBOL_STRING_DATA.hasOwnProperty(this._properties.style.value()))&&(e={symbol:e,type:this.styleStudyInfo(this.getStyleShortName()+"Style").studyId+"!",inputs:this.getInputsProperties().state()});return e},Te.prototype.getSymbolString=function(){return fe(this._getSymbolObject())},Te.prototype._getResolvingSymbolString=function(){var e=this._getSymbolObject();return this._replaySubscriber&&(e=this._replaySubscriber.generateReplaySymbol(e)),fe(e)},Te.prototype.getStyleShortName=function(){var e=this._properties.style.value();if(Te.STYLE_SHORT_NAMES.hasOwnProperty(e))return Te.STYLE_SHORT_NAMES[e];throw new Error("Missed short name for style "+e)},Te.prototype.getStyleProperties=function(){return this._properties[this.getStyleShortName()+"Style"]},Te.prototype.getInputsProperties=function(){return this.getStyleProperties().inputs||new r},Te.prototype.getInputsInfoProperties=function(){return this.getStyleProperties().inputInfo||new r},Te.prototype.getRealVisibleRange=function(){var e=this.model().timeScale().visibleBarsStrictRange();if(null===e)return null;var t=this.data().search(e.firstBar(),q.NearestRight),i=this.data().search(e.lastBar(),q.NearestLeft);return null===t||null===i?null:new F(t.index,i.index)},Te.prototype.firstValue=function(){var e=this.firstBar();return null===e?null:this._barFunction(e)},Te.prototype.firstBar=function(){var e=this.model().timeScale().visibleBarsStrictRange();if(null===e)return null;var t=e.firstBar(),i=this.data().search(t,q.NearestRight);return null!==i?i.value:null},Te.prototype.isSpread=function(){return null!==this._symbolInfo&&"spread"===this._symbolInfo.type},Te.prototype.getSymbolName=function(){return this._symbolInfo?this._symbolInfo.name:""},Te.prototype.loadDataTo=function(e){this._turnaround="s"+ ++this._turnaroundCounter;var t=this._properties.interval.value();this._onTimeFrameApplied.fire(e),this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,t,e,this._handler)},Te.prototype.checkInterval=function(){if(this._symbolInfo&&(se.isIntraday(this.interval())&&!this._symbolInfo.has_intraday&&this.requestingIntradayWhenNotSupported.fire(),this._symbolInfo.hasOwnProperty("supported_resolutions"))){var e=se.normalize(this._properties.interval.value());-1===this._symbolInfo.supported_resolutions.indexOf(e)&&this.requestingResolutionWhenNotSupported.fire(this._symbolInfo.supported_resolutions[0])}},Te.prototype.priceScale=function(){return this.m_priceScale},Te.prototype.setPriceScale=function(e){this.m_priceScale!==e&&(this.m_priceScale=e,this._priceScaleChanged.fire(e),this._properties.removeProperty("priceAxisProperties"),
this._properties.addChild("priceAxisProperties",e.properties()),this._properties.priceAxisProperties.childChanged(),_e.emit("series_event","price_scale_changed"))},Te.prototype.priceScaleChanged=function(){return this._priceScaleChanged},Te.prototype.setGotoDateResult=function(e){this._gotoDateResultCleared=!1,i.e("series-pane-views").then(function(t){if(!this._gotoDateResultCleared){var r=i("+weX").GotoDateView;this._gotoDateView=new r(this,e),this.m_model.updateSource(this)}}.bind(this).bind(null,i)).catch(i.oe)},Te.prototype.clearGotoDateResult=function(e){this._gotoDateView=null,this._gotoDateResultCleared=!0},Te.prototype.syncModel=function(){if(!this._syncModel){var e=this.symbolInfo(),t=this.interval();if(!e||!t)return null;this._syncModel=new K(e,t)}return this._syncModel},Te.prototype.turnaround=function(){return this._turnaround},Te.prototype.getSourceIcon=function(){return{type:"loadSvg",svgId:"series."+this.properties().style.value()}},Te.prototype.isStyleSupported=function(e){return!this.isInReplay()||this.isStyleSupportedForReplay(e)},Te.prototype.isIntervalSupported=function(e){return!this.isInReplay()||this._replaySubscriber.canChangeResolution(e)},Te.prototype.isStyleSupportedForReplay=function(e){return ie.isTimeBasedStyle(e)},Te.prototype.isInReplay=function(){return null!==this._replaySubscriber},Te.prototype.onTimeFrameApplied=function(){return this._onTimeFrameApplied},Te.prototype.onInReplayStateChanged=function(){return this._onInReplayStateChanged},Te.prototype.replayExitedDueUnsupportedInterval=function(){return this._replayExitedDueUnsupportedInterval},Te.prototype.replayExitedDueUnavailableForUserInterval=function(){return this._replayExitedDueUnavailableForUserInterval},Te.prototype.switchToReplay=function(e,t){this._replaySubscriber=e,this._isReplayResolutionAvailableForUser=t,this._onInReplayStateChanged.fire(),this._replaySubscriber.modifySeries(this.getSymbolString(),this._properties.interval.value()),this._symbolId=null,this.rerequestData()},Te.prototype.switchToRealtime=function(){this.isInReplay()&&(this._removeReplaySubscriber(),this._symbolId=null,this.rerequestData())},Te.prototype._removeReplaySubscriber=function(){if(this.isInReplay()){var e=this._replaySubscriber;this._replaySubscriber=null,this._isReplayResolutionAvailableForUser=null,this._onInReplayStateChanged.fire(),e.destroy()}},Te.prototype._onBeforeModifySeries=function(e,t){this._replaySubscriber&&this._replaySubscriber.modifySeries(e,t)},Te.prototype._getTelemetryAdditionalData=function(e,t){t=void 0===t||t;var i={symbol:this.actualSymbol()};return t&&(i.resolution=this.interval()),void 0!==e&&(i.reason=e),i},Te.prototype._sendTelemetryReport=function(e,t,i){void 0===i&&(i=this._getTelemetryAdditionalData());var r=Object.assign(t,{additional:i});A.sendChartReport(e,r)},Te.prototype._sendTelemetryCounter=function(e,t){this._sendTelemetryReport(e,{count:1},t)},Te.prototype._sendTelemetryTiming=function(e,t,i){this._sendTelemetryReport(e,{value:t},i)},Te.prototype.destroy=function(){
this._replayExitedDueUnsupportedInterval.destroy(),this._replayExitedDueUnavailableForUserInterval.destroy(),this._quotesProvider.quotesUpdate().unsubscribeAll(this),this._quotesProvider.destroy(),this.clearGotoDateResult(),this._legendView.destroy(),this._marketStatusModel.destroy(),null!==this._dataUpdatedModeModel&&this._dataUpdatedModeModel.destroy(),this._dataProblemModel.destroy(),this._paneView&&this._paneView.destroy&&this._paneView.destroy(),this._onTimeFrameApplied.destroy(),s.prototype.destroy.call(this)},Te.prototype.dataEvents=function(){return this._dataEvents},TradingView.Series=Te,t.Series=Te}).call(this,i("aIyQ"),i("tc+8"),i("Qb4w").PriceRange)},qcGP:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Parallel Channel");function s(e,t){this._constructor="LineToolParallelChannel";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("9FRF").ParallelChannelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.addPoint=function(e){var t=r.prototype.addPoint.call(this,e);if(t){var i=this.points()[0];this._points[2].index=i.index,this._points[2].price=i.price+this._priceOffset}return t},s.prototype.calculatePriceDiff=function(){if(3===this.points().length){var e=this.points()[0],t=this.points()[1],i=this.points()[2];if(e.index===t.index)return;var r=this.priceScale();if(null===r)return;if(r.isLog()){var n=this._model.timeScale();if(n.isEmpty())return;var o=this.ownerSource().firstValue(),s=n.indexToCoordinate(e.index),a=n.indexToCoordinate(t.index),l=r.priceToCoordinate(e.price,o),c=r.priceToCoordinate(t.price,o),u=l+(m=(c-l)/(a-s))*(n.indexToCoordinate(i.index)-s),h=r.priceToCoordinate(i.price,o)-u,d=(o=this.ownerSource().firstValue(),.5*(l+c)),p=r.coordinateToPrice(d,o),f=d+h,_=r.coordinateToPrice(f,o);this._priceOffset=_-p}else{var m=(t.price-e.price)/(t.index-e.index),v=e.price+m*(i.index-e.index);this._priceOffset=i.price-v}}},s.prototype.setLastPoint=function(e,t){t&&t.shift()&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[0]),r.prototype.setLastPoint.call(this,e),this.calculatePriceDiff()},s.prototype.restorePoints=function(e,t,i){r.prototype.restorePoints.call(this,e,t,i),e&&e.length>=3&&(this._priceOffset=e[2].price-e[0].price)},s.prototype.setPoint=function(e,t,i){i&&i.shift()&&e<2&&this._snapPoint45Degree(t,this.points()[1-e]),r.prototype.setPoint.call(this,e,t,i),2===e&&this.calculatePriceDiff();var n=this.points()[0];this._points[2].index=n.index,this._points[2].price=n.price+this._priceOffset},s.prototype.pointsCount=function(){return 3},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Parallel Channel"},s.prototype.hasEditableCoordinates=function(){return!1},s.prototype.addPoint=function(e,t){return t&&t.shift()&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[0]),r.prototype.addPoint.call(this,e,t)},s.prototype.fixAfterRestorePriceAxis=function(){
this.priceScale().isLog()||delete this._priceOffset},s.prototype.cloneData=function(e){this._priceOffset=e._priceOffset},s.prototype.restoreData=function(e){e.priceOffset&&(this._priceOffset=e.priceOffset)},s.prototype.state=function(e){var t=r.prototype.state.call(this,e);return t.priceOffset=this._priceOffset,t},s.prototype.canHasAlert=function(){return!0},s.prototype._getAlertPlots=function(){var e=[].concat(this._points).splice(0,2);function t(e,t){return e.index<=t.index?[e,t]:[t,e]}var i,r,n,o,s=t((e=e.concat([{price:e[0].price+this._priceOffset,time:e[0].time,index:e[0].index},{price:e[1].price+this._priceOffset,time:e[1].time,index:e[1].index}]))[0],e[1]),a=t(e[2],e[3]);this._priceOffset<0?(r=a,i=s):(r=s,i=a);var l=this.properties().extendLeft.value(),c=this.properties().extendRight.value();return e[0].index<=e[1].index?(n=l,o=c):(n=c,o=l),[this._linePointsToAlertPlot(i,"Upper",n,o),this._linePointsToAlertPlot(r,"Lower",n,o)]},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("VkdP").ParallelChannelDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolparallelchannel",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolParallelChannel=s},qckB:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor" transform="translate(6 3)"><rect width="15" height="12" rx="2" x=".5" y="8.5"/><path stroke-linecap="round" stroke-width="2" d="M8 15v2"/><path d="M11.5 4a3.5 3.5 0 0 0-7 0v4.5"/></g></svg>'},qgcf:function(e,t,i){"use strict";i.r(t),i.d(t,"calculateLabelPosition",(function(){return f})),i.d(t,"wordWrap",(function(){return m})),i.d(t,"TextRenderer",(function(){return E}));var r,n=i("aO4+"),o=i("GEp6"),s=i("Eyy1"),a=i("f6yo"),l=i("Ialn"),c=i("VdBB"),u=i("jFln"),h=i("ogJP"),d=i("ikwP"),p=i("8Uy/");function f(e,t,i,r,o){var s=.5*(t.x+i.x),a=i.y;return t.y>i.y?(a-=e.height/2+r.y,a=Math.max(e.height/2,a)):(a+=e.height/2+r.y,a=Math.min(o-e.height/2,a)),new n.Point(s,a)}function _(){var e=document.createElement("canvas");e.width=0,e.height=0,r=Object(s.ensureNotNull)(e.getContext("2d"))}function m(e,t,i){r||_(),i=Object(h.isString)(i)?parseInt(i):i;var n=(e+="").split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/);if(n[n.length-1]||n.pop(),!Object(h.isNumber)(i)||!isFinite(i)||i<=0)return n;r.font=t;for(var o=[],s=0;s<n.length;s++){var a=n[s],l=r.measureText(a).width;if(l<=i)o.push(a);else for(var c=a.split(/([-)\]},.!?:;])|(\s+)/),u=0;c.length;){var d=~~(i/l*(c.length+2)/3);if(d<=0||r.measureText(c.slice(0,3*d-1).join("")).width<=i)for(;r.measureText(c.slice(0,3*(d+1)-1).join("")).width<=i;)d++;else for(;d>0&&r.measureText(c.slice(0,3*--d-1).join("")).width>i;);if(d>0)o.push(c.slice(0,3*d-1).join("")),c.splice(0,3*d);else{var p=c[0]+(c[1]||"");if(u=1===u?1:~~(i/r.measureText(p).width*p.length),
r.measureText(p.substr(0,u)).width<=i)for(;r.measureText(p.substr(0,u+1)).width<=i;)u++;else for(;u>1&&r.measureText(p.substr(0,--u)).width>i;);u<1&&(u=1),o.push(p.substr(0,u)),c[0]=p.substr(u),c[1]=""}if(r.measureText(c.join("")).width<=i){o.push(c.join(""));break}}}return o}function v(e,t,i){if(0===i)return e.clone();var r=(e.x-t.x)*Math.cos(i)-(e.y-t.y)*Math.sin(i)+t.x,o=(e.x-t.x)*Math.sin(i)+(e.y-t.y)*Math.cos(i)+t.y;return new n.Point(r,o)}function g(e,t){return t+2*P(e)+2*S(e)}function y(e,t){return T(e)*t+C(e)*(t-1)+2*w(e)+2*b(e)}function b(e){return void 0!==e.boxPaddingVert?e.boxPaddingVert*I(e):void 0!==e.boxPadding?e.boxPadding*I(e):T(e)/3}function S(e){return void 0!==e.boxPaddingHorz?e.boxPaddingHorz*I(e):void 0!==e.boxPadding?e.boxPadding*I(e):T(e)/3}function w(e){return(e.backgroundVertInflate||0)*I(e)}function P(e){return(e.backgroundHorzInflate||0)*I(e)}function C(e){return(e.padding||0)*I(e)}function T(e){return Math.ceil(x(e)*I(e))}function x(e){return e.fontsize||e.fontSize||30}function I(e){var t=Math.min(1,Math.max(.2,Math.min(e.scaleX||1,e.scaleY||1)));if(1===t)return t;var i=x(e);return Math.ceil(t*i)/i}var E=function(){function e(e,t){this._data=null,this._internalData=null,this._boxSize=null,this._linesInfo=null,this._fontInfo=null,this._hittest=t||new c.HitTestResult(c.HitTestResult.MOVEPOINT),void 0!==e&&this.setData(e)}return e.prototype.setData=function(e){!function(e,t){if(null===e||null===t)return null===e==(null===t);if(void 0===e.points!=(void 0===t.points))return!1;if(void 0!==e.points&&void 0!==t.points){if(e.points.length!==t.points.length)return!1;for(var i=0;i<e.points.length;++i)if(r=e.points[i],n=t.points[i],r.x!==n.x||r.y!==n.y)return!1}var r,n;return e.text===t.text&&e.vertAlign===t.vertAlign&&e.horzAlign===t.horzAlign&&e.font===t.font&&e.offsetX===t.offsetX&&e.offsetY===t.offsetY&&e.bold===t.bold&&e.italic===t.italic&&e.fontsize===t.fontsize&&e.fontSize===t.fontSize&&e.backgroundRoundRect===t.backgroundRoundRect&&e.forceTextAlign===t.forceTextAlign&&e.wordWrapWidth===t.wordWrapWidth&&e.padding===t.padding&&e.scaleY===t.scaleY&&e.scaleX===t.scaleX&&e.highlightBorder===t.highlightBorder&&e.backgroundHorzInflate===t.backgroundHorzInflate&&e.backgroundVertInflate===t.backgroundVertInflate&&e.boxPadding===t.boxPadding&&e.boxPaddingVert===t.boxPaddingVert&&e.boxPaddingHorz===t.boxPaddingHorz&&e.angle===t.angle&&e.maxHeight===t.maxHeight}(this._data,e)?(this._data=e,this._internalData=null,this._boxSize=null,this._linesInfo=null,this._fontInfo=null):this._data=e},e.prototype.hitTest=function(e){if(null===this._data||void 0===this._data.points||0===this._data.points.length)return null;var t,i,r,s=this._data.angle||0,a=this._getInternalData(),l=a.boxLeft,c=a.boxTop,u=a.boxWidth,h=a.boxHeight,d=this._getRotationPoint();u>h?(t=new n.Point(l+h/2,c+h/2),i=new n.Point(l+u-h/2,c+h/2),r=h/2):(t=new n.Point(l+u/2,c+u/2),i=new n.Point(l+u/2,c+h-u/2),r=u/2);var p=v(t,d,s),f=v(i,d,s);return Object(o.distanceToSegment)(p,f,e).distance<=r?this._hittest:null},
e.prototype.doesIntersectWithBox=function(e){return null!==this._data&&void 0!==this._data.points&&0!==this._data.points.length&&Object(a.pointInBox)(this._data.points[0],e)},e.prototype.measure=function(){if(null===this._data)return{width:0,height:0};var e=this._getBoxSize();return{width:e.boxWidth,height:e.boxHeight}},e.prototype.setPoints=function(e,t){Object(s.ensureNotNull)(this._data).points=e,this._hittest=t||new c.HitTestResult(c.HitTestResult.MOVEPOINT)},e.prototype.fontStyle=function(e){return null===this._data?"":this._getFontInfo().fontStyle},e.prototype.wordWrap=function(e,t,i){return m(e,i||this.fontStyle(),t)},e.prototype.draw=function(e,t){if(null!==this._data&&void 0!==this._data.points&&0!==this._data.points.length){var i=t.pixelRatio,r=this._getInternalData(),n=this._getRotationPoint().scaled(i);e.save(),e.translate(n.x,n.y),e.rotate(this._data.angle||0),e.translate(-n.x,-n.y);var o=this._getFontInfo().fontSize;e.textBaseline=r.textBaseLine,e.textAlign=r.textAlign,e.font=this.fontStyle();var s=function(e,t){var i=Math.round(e.boxLeft*t),r=Math.round(e.boxTop*t);return{scaledLeft:i,scaledRight:i+Math.round(e.boxWidth*t),scaledTop:r,scaledBottom:r+Math.round(e.boxHeight*t)}}(r,i),a=s.scaledLeft,l=s.scaledRight,c=s.scaledTop,h=s.scaledBottom;if(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){var f=Math.round(Math.max(o/12,1)*i),_=f/2;if(this._data.backgroundRoundRect)this._data.backgroundColor&&(Object(u.drawRoundRect)(e,a,c,l-a,h-c,this._data.backgroundRoundRect*i),e.fillStyle=this._data.backgroundColor,e.fill()),this._data.borderColor&&(Object(u.drawRoundRect)(e,a-_,c-_,l-a+f,h-c+f,this._data.backgroundRoundRect*i),e.strokeStyle=this._data.borderColor,e.lineWidth=f,e.stroke());else if(this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.fillRect(a,c,l-a,h-c)),this._data.borderColor||this._data.highlightBorder){var m=void 0;this._data.borderColor?(e.strokeStyle=this._data.borderColor,m=f):(e.strokeStyle=this._data.color,Object(u.setLineStyle)(e,p.LINESTYLE_DASHED),m=Math.max(1,Math.floor(i))),e.lineWidth=m,e.beginPath(),e.moveTo(a-m/2,c-m/2),e.lineTo(a-m/2,h+m/2),e.lineTo(l+m/2,h+m/2),e.lineTo(l+m/2,c-m/2),e.lineTo(a-m/2,c-m/2),e.stroke()}}e.fillStyle=this._data.color;for(var v=(a+Math.round(r.textStart*i))/i,g=.05*o,y=(c+Math.round((r.textTop+g)*i))/i,b=C(this._data),S=function(t){Object(d.drawScaled)(e,i,(function(){return e.fillText(t,v,y)})),y+=o+b},w=0,P=this._getLinesInfo().lines;w<P.length;w++){S(P[w])}e.restore()}},e.prototype._getLinesMaxWidth=function(e){if(r||_(),r.textBaseline="alphabetic",r.font=this.fontStyle(),null!==this._data&&this._data.wordWrapWidth)return this._data.wordWrapWidth*I(this._data);for(var t=0,i=0,n=e;i<n.length;i++){var o=n[i];t=Math.max(t,r.measureText(o).width)}return t},e.prototype._getInternalData=function(){if(null!==this._internalData)return this._internalData
;var e=Object(s.ensureNotNull)(this._data),t=this._getBoxSize(),i=t.boxWidth,r=t.boxHeight,n=Object(s.ensureDefined)(e.points)[0],o=n.y;switch(e.vertAlign){case"bottom":o-=r+e.offsetY;break;case"middle":o-=r/2;break;case"top":o+=e.offsetY}var a,c,u=n.x,h=S(e),d=b(e),p=P(e)+h,f=o+(w(e)+d)+T(e)/2;switch(e.horzAlign){case"left":c="start",a=(u+=e.offsetX)+p,Object(l.isRtl)()&&(e.forceTextAlign?c="left":(a=u+i-p,c="right"));break;case"center":c="center",a=u,u-=i/2;break;case"right":c="end",a=(u-=i+e.offsetX)+i-p,Object(l.isRtl)()&&e.forceTextAlign&&(c="right")}return{boxLeft:u,boxTop:o,boxWidth:i,boxHeight:r,textStart:a-u,textTop:f-o,textAlign:c,textBaseLine:"middle"}},e.prototype._getLinesInfo=function(){if(null===this._linesInfo){var e=Object(s.ensureNotNull)(this._data),t=this.wordWrap(e.text,e.wordWrapWidth);if(void 0!==e.maxHeight){var i=function(e){var t=Object(s.ensureDefined)(e.maxHeight),i=T(e),r=C(e);return Math.floor((t+r)/(i+r))}(e);t.length>i&&(t=t.slice(0,i))}this._linesInfo={linesMaxWidth:this._getLinesMaxWidth(t),lines:t}}return this._linesInfo},e.prototype._getFontInfo=function(){if(null===this._fontInfo){var e=Object(s.ensureNotNull)(this._data),t=T(e),i=(e.bold?"bold ":"")+(e.italic?"italic ":"")+t+"px "+e.font;this._fontInfo={fontStyle:i,fontSize:t}}return this._fontInfo},e.prototype._getBoxSize=function(){if(null===this._boxSize){var e=this._getLinesInfo(),t=Object(s.ensureNotNull)(this._data);this._boxSize={boxWidth:g(t,e.linesMaxWidth),boxHeight:y(t,e.lines.length)}}return this._boxSize},e.prototype._getRotationPoint=function(){var e,t,i=this._getInternalData(),r=i.boxLeft,o=i.boxTop,a=i.boxWidth,l=i.boxHeight,c=Object(s.ensureNotNull)(this._data),u=c.horzAlign,h=c.vertAlign;switch(u){case"center":e=r+a/2;break;case"left":e=r;break;case"right":e=r+a}switch(h){case"middle":t=o+l/2;break;case"top":t=o;break;case"bottom":t=o+l}return new n.Point(e,t)},e}()},qlfx:function(e){
e.exports=JSON.parse('{"14851":{},"custom_items_in_context_menu":{},"websocket_connection":{},"countdown":{},"symbol_search_parser_mixin":{},"show_pro_features":{},"daily_timeframe_suffix":{},"symbollist_context_menu":{},"pay_attention_to_ticker_not_symbol":{},"graying_disabled_tools_enabled":{},"update_study_formatter_on_symbol_resolve":{},"constraint_dialogs_movement":{},"phone_verification":{},"show_trading_notifications_history":{},"show_interval_dialog_on_key_press":{},"header_interval_dialog_button":{"subsets":["show_interval_dialog_on_key_press"]},"header_fullscreen_button":{},"header_symbol_search":{},"symbol_search_hot_key":{},"header_resolutions":{"subsets":["header_interval_dialog_button"]},"header_chart_type":{},"header_settings":{},"header_indicators":{},"header_compare":{},"header_undo_redo":{},"header_screenshot":{},"header_saveload":{},"study_on_study":{},"scales_date_format":{},"header_widget":{"subsets":["header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_settings","header_indicators","header_compare","header_undo_redo","header_fullscreen_button","compare_symbol","header_screenshot"]},"legend_widget":{},"compare_symbol":{"subsets":["header_compare"]},"property_pages":{"subsets":["show_chart_property_page","chart_property_page"]},"show_chart_property_page":{},"chart_property_page":{"subsets":["chart_property_page_scales","chart_property_page_trading","chart_property_page_right_margin_editor"]},"disable_userlink_popup":{},"left_toolbar":{},"hide_left_toolbar_by_default":{},"control_bar":{},"widget_logo":{},"timeframes_toolbar":{},"edit_buttons_in_legend":{"subsets":["show_hide_button_in_legend","format_button_in_legend","study_buttons_in_legend","delete_button_in_legend"]},"hide_legend_by_default":{},"show_hide_button_in_legend":{},"format_button_in_legend":{},"study_buttons_in_legend":{},"delete_button_in_legend":{},"buy_sell_buttons":{},"pane_context_menu":{},"scales_context_menu":{},"legend_context_menu":{},"context_menus":{"subsets":["pane_context_menu","scales_context_menu","legend_context_menu","objects_tree_context_menu"]},"items_favoriting":{},"save_chart_properties_to_local_storage":{},"use_localstorage_for_settings":{"subsets":["items_favoriting","save_chart_properties_to_local_storage"]},"handle_scale":{"subsets":["mouse_wheel_scale","pinch_scale","axis_pressed_mouse_move_scale"]},"handle_scroll":{"subsets":["mouse_wheel_scroll","pressed_mouse_move_scroll","horz_touch_drag_scroll","vert_touch_drag_scroll"]},"plain_studymarket":{},"trading_watch_positions":{},"disable_resolution_rebuild":{},"border_around_the_chart":{},"charting_library_debug_mode":{},"log_data_request_time":{},"saveload_requires_authentication":{},"saveload_storage_customization":{},"new_chart_creation_available":{},"volume_force_overlay":{},"create_volume_indicator_by_default":{},"create_volume_indicator_by_default_once":{},"saved_charts_count_restriction":{},"lean_chart_load":{},"stop_study_on_restart":{},"star_some_intervals_by_default":{},"predefined_items_only_may_be_starred":{},"move_logo_to_main_pane":{},"show_animated_logo":{},"link_to_tradingview":{},"logo_without_link":{},"right_bar_stays_on_scroll":{},"chart_content_overrides_by_defaults":{},"show_dialog_on_snapshot_ready":{},"snapshot_trading_drawings":{},"allow_supported_resolutions_set_only":{},"widgetbar_tabs":{},"collapsible_header":{},"show_extension_popup":{},"study_templates":{},"side_toolbar_in_fullscreen_mode":{},"header_in_fullscreen_mode":{},"remove_library_container_border":{},"whotrades_auth_only":{},"support_multicharts":{},"display_market_status":{},"display_data_mode":{},"show_chart_warn_message":{},"datasource_copypaste":{},"line_tool_templates":{},"expand_symbolsearch_items":{},"symbol_search_three_columns_exchanges":{},"symbol_search_flags":{},"symbol_search_limited_exchanges":{},"bugreport_button":{},"footer_publish_idea_button":{},"showdom_button":{},"text_notes":{},"show_source_code":{},"symbol_info":{},"no_bars_status":{},"clear_bars_on_series_error":{},"hide_loading_screen_on_series_error":{},"seconds_resolution":{},"dont_show_boolean_study_arguments":{},"hide_last_na_study_output":{},"price_scale_always_last_bar_value":{},"study_dialog_search_control":{},"study_dialog_fundamentals_economy_addons":{},"uppercase_instrument_names":{},"cqg_trading_confirm_risks":{},"trading_notifications":{},"chart_crosshair_menu":{},"japanese_chart_styles":{},"hide_series_legend_item":{},"hide_study_overlay_legend_item":{},"hide_study_compare_legend_item":{},"linetoolpropertieswidget_template_button":{},"use_overrides_for_overlay":{},"timezone_menu":{},"main_series_scale_menu":{},"show_login_dialog":{},"remove_img_from_rss":{},"bars_marks":{},"chart_scroll":{},"chart_zoom":{},"source_selection_markers":{},"high_density_bars":{},"low_density_bars":{},"end_of_period_timescale_marks":{},"open_account_manager":{},"order_panel":{"subsets":["order_info"]},"multiple_watchlists":{},"study_overlay_compare_legend_option":{},"custom_resolutions":{},"referral_program_for_widget_owners":{},"mobile_app_force_chart_maximize":{},"mobile_app_hide_layout_buttons_on_chart_toolbar":{},"mobile_app_hide_series_control_bar":{},"no_min_chart_width":{},"lock_visible_time_range_on_resize":{},"pricescale_currency":{},"referral_program_policy_aggressive":{"subsets":["referral_program_policy_passive","referral_program_policy_normal"]},"referral_program_policy_normal":{"subsets":["referral_program_policy_passive","header_fake_features_buttons","custom_resolutions"]},"cropped_tick_marks":{},"trading_account_manager":{},"tv_production":{"subsets":["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","header_fullscreen_button","header_widget","dont_show_boolean_study_arguments","left_toolbar","buy_sell_buttons","control_bar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","uppercase_instrument_names","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","new_chart_creation_available","saved_charts_count_restriction","create_volume_indicator_by_default","create_volume_indicator_by_default_once","charts_auto_save","save_old_chart_before_save_as","chart_content_overrides_by_defaults","alerts","show_dialog_on_snapshot_ready","show_extension_popup","header_saveload","header_layouttoggle","datasource_copypaste","show_saved_watchlists","watchlists_from_to_file","add_to_watchlist","property_pages","support_multicharts","display_market_status","display_data_mode","show_chart_warn_message","support_manage_drawings","widgetbar_tabs","study_templates","collapsible_header","line_tool_templates","caption_buttons_text_if_possible","footer_publish_idea_button","text_notes","show_source_code","trading_watch_positions","symbol_info","linetoolpropertieswidget_template_button","cqg_trading_confirm_risks","trading_notifications","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","phone_verification","chart_events","custom_resolutions","compare_symbol","study_on_study","japanese_chart_styles","show_login_dialog","dome_widget","bars_marks","chart_scroll","chart_zoom","show_trading_notifications_history","source_selection_markers","study_dialog_fundamentals_economy_addons","multiple_watchlists","marked_symbols","order_panel","pricescale_currency","show_animated_logo","pricescale_currency","show_object_tree","scales_date_format","popup_hints"]},"browser_extension":{"subsets":["disable_userlink_popup","show_pro_features","show_saved_watchlists","display_market_status","display_data_mode","show_chart_warn_message","widgetbar_tabs","show_login_dialog"]},"widget":{"subsets":["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","uppercase_instrument_names","left_toolbar","control_bar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","create_volume_indicator_by_default","create_volume_indicator_by_default_once","show_dialog_on_snapshot_ready","dont_show_boolean_study_arguments","header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_compare","header_indicators","star_some_intervals_by_default","display_market_status","display_data_mode","show_chart_warn_message","symbol_info","linetoolpropertieswidget_template_button","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","widgetbar_tabs","compare_symbol","show_login_dialog","plain_studymarket","japanese_chart_styles","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages"]},"bovespa_widget":{"subsets":["widget","header_settings","linetoolpropertieswidget_template_button"]},"charting_library_base":{"subsets":["14851","allow_supported_resolutions_set_only","border_around_the_chart","collapsible_header","constraint_dialogs_movement","context_menus","control_bar","create_volume_indicator_by_default","custom_items_in_context_menu","datasource_copypaste","daily_timeframe_suffix","uppercase_instrument_names","display_market_status","edit_buttons_in_legend","graying_disabled_tools_enabled","header_widget","legend_widget","header_saveload","dont_show_boolean_study_arguments","lean_chart_load","left_toolbar","buy_sell_buttons","trading_watch_positions","link_to_tradingview","pay_attention_to_ticker_not_symbol","plain_studymarket","predefined_items_only_may_be_starred","refresh_saved_charts_list_on_dialog_show","right_bar_stays_on_scroll","saveload_storage_customization","show_dialog_on_snapshot_ready","stop_study_on_restart","timeframes_toolbar","symbol_search_hot_key","update_study_formatter_on_symbol_resolve","update_timeframes_set_on_symbol_resolve","use_localstorage_for_settings","volume_force_overlay","widget_logo","countdown","use_overrides_for_overlay","trading_notifications","compare_symbol","symbol_info","timezone_menu","main_series_scale_menu","study_dialog_search_control","chart_crosshair_menu","create_volume_indicator_by_default_once","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages","go_to_date","adaptive_logo","caption_buttons_text_if_possible","show_animated_logo","handle_scale","handle_scroll","shift_visible_range_on_new_bar","chart_content_overrides_by_defaults","cropped_tick_marks","scales_date_format","popup_hints"]},"charting_library":{"subsets":["charting_library_base"]},"static_charts_service":{"subsets":["charting_library","disable_resolution_rebuild","log_data_request_time"]},"trading_terminal":{"subsets":["charting_library_base","showdom_button","support_multicharts","header_layouttoggle","japanese_chart_styles","chart_property_page_trading","add_to_watchlist","open_account_manager","show_dom_first_time","order_panel","multiple_watchlists","show_trading_notifications_history","always_pass_called_order_to_modify","show_object_tree","trading_account_manager"]},"cqg_terminal":{"subsets":["charting_library_base","chart_property_page_trading","expand_symbolsearch_items","clear_bars_on_series_error","no_bars_status","hide_loading_screen_on_series_error","support_multicharts","header_layouttoggle","bugreport_button","showdom_button","dome_widget","show_dom_first_time","japanese_chart_styles","remove_img_from_rss","add_to_watchlist","order_panel","show_trading_notifications_history","show_object_tree"]},"amp_terminal":{"subsets":["cqg_terminal","show_object_tree"]}}')
},qocr:function(e,t,i){"use strict";function r(e,t){void 0===t&&(t=!1),("attachEvent"in document?"complete"===document.readyState:"loading"!==document.readyState)?t?setTimeout((function(){return e()}),1):e():document.addEventListener("DOMContentLoaded",(function(){return e()}))}i.r(t),i.d(t,"whenDocumentReady",(function(){return r})),i.d(t,"whenDocumentReadyPromise",(function(){return n}));var n=new Promise((function(e){r(e)}))},quTg:function(e,t,i){},qx3g:function(e,t,i){"use strict";var r=i("Qq0B").NonSeriesStudy,n=i("VdBB").HitTestResult,o=i("Zy3/").CompositeRenderer,s=i("cPgM").ScaledPaneRenderer;function a(e,t){s.call(this),this._data=e,this._textCache=t}function l(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={},this._invalidated=!0}function c(e,t,i,n){r.call(this,e,t,i,n)}inherit(a,s),a.prototype._drawImpl=function(e){e.textBaseline="bottom",e.font=(this._data.bold?"bold ":"normal ")+this._data.fontsize+"px "+this._data.font;var t=Math.round(e.measureText(this._data.text).width+4);this._textCache.width=t,e.translate(this._data.x+.5,this._data.y),e.strokeStyle=this._data.borderColor,e.fillStyle=this._data.backColor,e.beginPath(),e.moveTo(0,0),1===this._data.type?(e.lineTo(5,-5),e.lineTo(t/2,-5),e.lineTo(t/2,-5-this._data.fontsize),e.lineTo(-t/2,-5-this._data.fontsize),e.lineTo(-t/2,-5),e.lineTo(-5,-5),e.lineTo(0,0)):(e.lineTo(5,5),e.lineTo(t/2,5),e.lineTo(t/2,5+this._data.fontsize),e.lineTo(-t/2,5+this._data.fontsize),e.lineTo(-t/2,5),e.lineTo(-5,5),e.lineTo(0,0)),e.fill(),e.stroke(),e.fillStyle=this._data.textColor,e.textAlign="center",e.textBaseline="middle",1===this._data.type?e.fillText(this._data.text,0,-5-this._data.fontsize/2):e.fillText(this._data.text,0,5+this._data.fontsize/2)},a.prototype.hitTest=function(e){var t=this._textCache.width,i=this._data.fontsize+15,r=this._data.x-t/2,o=this._data.y;return 1===this._data.type&&(o-=i),e.x>=r&&e.x<=r+t&&e.y>=o&&e.y<=o+i?new n(n.REGULAR):null},l.prototype.update=function(){this._invalidated=!0},l.prototype.updateImpl=function(){if(this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()){var e=this._source.customData().pivots,t=this._source._indexes,i=this._model.timeScale(),r=this._source.priceScale(),n=this._model.mainSeries(),o=n.firstValue();if(r&&!r.isEmpty()&&!i.isEmpty()&&o)for(var s=i.visibleBarsStrictRange(),a=s.firstBar(),l=s.lastBar(),c=0;c<e.length;c++)if(e[c]){var u=t[e[c].index];if(!(u<a||u>l)){var h=e[c].type,d=n.bars().valueAt(u);if(null!==d){var p=1===h?d[TradingView.HIGH_PLOT]:d[TradingView.LOW_PLOT],f=Math.round(i.indexToCoordinate(u)),_=r.priceToCoordinate(p,o);1===h?_-=i.barSpacing()/6:_+=i.barSpacing()/6+1,_=Math.round(_),this._pivots.push({x:f,y:_,price:r.formatPrice(p,o),type:h})}}}}},l.prototype._pixelMargins=function(){return this._source.properties().fontsize.value()+15},l.prototype.topPixelMargin=function(){return this._pixelMargins()},l.prototype.bottomPixelMargin=function(){return this._pixelMargins()},l.prototype.renderer=function(){
if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),0!==this._pivots.length){for(var e=this._source.properties().font.value(),t=this._source.properties().fontsize.value(),i=this._source.properties().borderColor.value(),r=this._source.properties().backColor.value(),n=this._source.properties().textColor.value(),s=new o,l=0;l<this._pivots.length;l++){var c=this._pivots[l],u={x:c.x,y:c.y,type:c.type,text:c.price,font:e,fontsize:t,borderColor:i,backColor:r,textColor:n},h=l;this._textCache[h]||(this._textCache[h]={}),s.append(new a(u,this._textCache[h]))}return s}},inherit(c,r),c.prototype.isVisible=function(){return this.properties().visible.value()},c.prototype.createViews=function(){r.prototype.createViews.call(this),this._setPaneViews([new l(this.model(),this)])},c.prototype.autoScaleInfo=function(e,t){return{range:this._series.priceRange(e,t),topPixelMargin:this._paneViews.length>0?this._paneViews[0].topPixelMargin():0,bottomPixelMargin:this._paneViews.length>0?this._paneViews[0].bottomPixelMargin():0}},t.study_PivotPointsHighLow=c},qySK:function(e,t,i){"use strict";i.d(t,"b",(function(){return y})),i.d(t,"a",(function(){return b}));var r=i("Eyy1"),n=i("JmuD"),o=i("SqfW"),s=i("+a6K"),a=i("vaiT"),l=i("2tp3"),c=i("KG+6"),u=i("fFKx"),h=i("VSsv"),d=i("t1rv"),p=i("5vwb"),f=i("6Y0w"),_=i("nInm"),m=i("sqlk"),v=i("7Fue"),g=i("xWfy");function y(e){if(!Object(n.isObject)(e))throw new Error("Graphics commands should be wrapped in an object");if(Object(n.hasProperty)(e,"create"),Object(n.hasProperty)(e,"erase")){var t=e.erase;Object(r.assert)(Array.isArray(t),"Collection of erase commands should be array");for(var i=0,o=t;i<o.length;i++){var s=o[i];if(!Object(n.isObject)(s)||!Object(n.hasProperty)(s,"action"))throw new Error("Command should be an object with 'action' property");Object(r.assert)("all"===s.action||"one"===s.action,"Erase command action should be 'all' or 'one'")}}return e}var b=function(){function e(){this._indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._dwglabels=new Map,this._dwglines=new Map,this._hhistsByTimePointIndex=new Map}return e.prototype.horizlines=function(){return this._horizlines},e.prototype.vertlines=function(){return this._vertlines},e.prototype.lines=function(){return this._lines},e.prototype.hlines=function(){return this._hlines},e.prototype.textmarks=function(){return this._textmarks},e.prototype.shapemarks=function(){return this._shapemarks},e.prototype.backgrounds=function(){return this._backgrounds},e.prototype.polygons=function(){return this._polygons},e.prototype.trendchannels=function(){return this._trendchannels},e.prototype.hhists=function(){return this._hhists},e.prototype.dwglabels=function(){return this._dwglabels},e.prototype.dwglines=function(){return this._dwglines},e.prototype.hhistsByTimePointIndex=function(){return this._hhistsByTimePointIndex},
e.prototype.clear=function(){this._indexes=[],this._clearPrimitives()},e.prototype.extract=function(){var e=function(e){return e.extract()},t={indexes:this._indexes,horizlines:w(this._horizlines,e),vertlines:w(this._vertlines,e),lines:w(this._lines,e),hlines:w(this._hlines,e),textmarks:w(this._textmarks,e),shapemarks:w(this._shapemarks,e),backgrounds:w(this._backgrounds,e),polygons:w(this._polygons,e),trendchannels:w(this._trendchannels,e),hhists:w(this._hhists,e),dwglabels:w(this._dwglabels,e),dwglines:w(this._dwglines,e)};return this._hhistsByTimePointIndex=new Map,new g.a("data",t)},e.prototype.replaceIndexesTo=function(e){var t=this;this._indexes=e;var i=function(e){return e.replaceIndexesTo(t._indexes)};this._horizlines.forEach(i),this._vertlines.forEach(i),this._lines.forEach(i),this._hlines.forEach(i),this._textmarks.forEach(i),this._shapemarks.forEach(i),this._backgrounds.forEach(i),this._polygons.forEach(i),this._trendchannels.forEach(i),this._hhists.forEach(i),this._dwglabels.forEach(i),this._dwglines.forEach(i),this._hhistsByTimePointIndex=Object(v.b)(this._hhists)},e.prototype.processCommands=function(e,t){void 0!==e.erase&&this._processEraseCommands(e.erase),void 0!==e.create&&this._processCreateCommands(e.create,t)},e.prototype._processCreateCommands=function(e,t){for(var i in e)if(e.hasOwnProperty(i)){var n=i;switch(Object(r.assert)(n in t,"There is a '"+n+"' in study response, but it doesn't present in graphics info!"),n){case"horizlines":P(this._horizlines,e[n],t[n],this._indexes,u.b);break;case"vertlines":P(this._vertlines,e[n],t[n],this._indexes,o.b);break;case"lines":P(this._lines,e[n],t[n],this._indexes,d.b);break;case"hlines":P(this._hlines,e[n],t[n],this._indexes,h.c);break;case"textmarks":P(this._textmarks,e[n],t[n],this._indexes,_.c);break;case"shapemarks":P(this._shapemarks,e[n],t[n],this._indexes,f.b);break;case"backgrounds":P(this._backgrounds,e[n],t[n],this._indexes,s.b);break;case"polygons":P(this._polygons,e[n],t[n],this._indexes,p.b);break;case"trendchannels":P(this._trendchannels,e[n],t[n],this._indexes,m.b);break;case"hhists":P(this._hhists,e[n],t[n],this._indexes,c.d);break;case"dwglabels":P(this._dwglabels,e[n],t[n],this._indexes,a.e);break;case"dwglines":P(this._dwglines,e[n],t[n],this._indexes,l.d)}}this._hhistsByTimePointIndex=Object(v.b)(this._hhists)},e.prototype._processEraseCommands=function(e){for(var t=function(e){if("all"===e.action)i._clearPrimitives();else{var t=function(t){return t.deleteById(e.id)};switch(e.type){case"horizlines":i._horizlines.forEach(t);break;case"vertlines":i._vertlines.forEach(t);break;case"lines":i._lines.forEach(t);break;case"hlines":i._hlines.forEach(t);break;case"textmarks":i._textmarks.forEach(t);break;case"shapemarks":i._shapemarks.forEach(t);break;case"backgrounds":i._backgrounds.forEach(t);break;case"polygons":i._polygons.forEach(t);break;case"trendchannels":i._trendchannels.forEach(t);break;case"hhists":i._hhists.forEach(t);break;case"dwglabels":i._dwglabels.forEach(t);break;case"dwglines":i._dwglines.forEach(t)}}
},i=this,r=0,n=e;r<n.length;r++){t(n[r])}this._hhistsByTimePointIndex=Object(v.b)(this._hhists)},e.prototype._clearPrimitives=function(){this._horizlines.clear(),this._vertlines.clear(),this._lines.clear(),this._hlines.clear(),this._textmarks.clear(),this._shapemarks.clear(),this._backgrounds.clear(),this._polygons.clear(),this._trendchannels.clear(),this._hhists.clear(),this._dwglabels.clear(),this._dwglines.clear(),this._hhistsByTimePointIndex=new Map},e}(),S=function(){function e(e,t){this._primitivesDataById=new Map,this._primitiveById=new Map,this._materializePrimitive=e,this._indexes=t}return e.prototype.forEach=function(e,t){var i=this;this._primitiveById.forEach((function(r){e.call(t,r,r,i)}))},e.prototype.has=function(e){var t=!1;return this._primitiveById.forEach((function(i){t=t||i===e})),t},Object.defineProperty(e.prototype,"size",{get:function(){return this._primitiveById.size},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){throw new Error("Not implemented")},e.prototype.entries=function(){throw new Error("Not implemented")},e.prototype.keys=function(){throw new Error("Not implemented")},e.prototype.values=function(){throw new Error("Not implemented")},e.prototype.hasId=function(e){return this._primitiveById.has(e)},e.prototype.addData=function(e){this._primitivesDataById.set(e.id,e),this._tryMaterialize(e)},e.prototype.deleteById=function(e){this._primitiveById.delete(e),this._primitivesDataById.delete(e)},e.prototype.clear=function(){this._primitivesDataById.clear(),this._primitiveById.clear()},e.prototype.replaceIndexesTo=function(e){this._indexes=e,this._primitiveById.clear(),this._primitivesDataById.forEach(this._tryMaterialize,this)},e.prototype.extract=function(){var e=new Set(this._primitivesDataById.values());return this._primitivesDataById=new Map,this._primitiveById.clear(),e},e.prototype._tryMaterialize=function(e){var t=this._materializePrimitive(e,this._indexes);null!==t&&(Object(r.assert)(!this._primitiveById.has(e.id),"primitive with specified id should not exist"),this._primitiveById.set(e.id,t))},e}();function w(e,t){var i=new Map;return e.forEach((function(e,r){return i.set(r,t(e))})),i}function P(e,t,i,n,o){if(void 0!==t)for(var s=0,a=t;s<a.length;s++){var l=a[s],c=l.styleId;void 0!==i&&Object(r.assert)(c in i,"Every style used by graphics primitive should be declared in study metainfo");var u=e.get(c);void 0===u&&(u=new S(o,n),e.set(c,u)),l.data.forEach(u.addData.bind(u))}}},r4gg:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 18h18V0H0z"/><path fill="#fff" d="M9 4.5V0H0v9h4.5V6l3 3H9V7L6.5 4.5H9z"/><path fill="#ed5565" d="M11 8.1l.3.6.5-.2-.2.5.4.4-.6.1v.6l-.4-.4-.4.4v-.6l-.6-.1.5-.4-.3-.5.6.2zm2 4l.3.6.5-.2-.2.5.4.4-.6.1v.6l-.4-.4-.4.4v-.6l-.6-.1.5-.4-.3-.5.6.2zm.3-7.1l.3.5.5-.1-.2.5.4.4h-.6V7l-.4-.4-.5.4v-.6l-.5-.1.5-.4-.3-.5.6.1zm2 3.4l.3.5.5-.2-.2.6.4.3-.6.1v.6l-.4-.4-.4.4v-.6h-.6l.4-.4-.2-.6.6.2zM3 1V0H1v1H0v2h1v6h2V3h6V1H3zm6 6.9L5 4H4l5 5V7.9z"/></svg>'},
r8Gw:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("txPx"),n=i("e3/o"),o=i("IWXC"),s=(i("+6II"),Object(r.getLogger)("GUI.Blocks.AbstractIndicator")),a=function(){function e(e){this._classSuffix="",this._quoteSessionPrefix="abstract-indicator",this._shortMode=!1,this._showTooltip=!0,this._subscribed=!1,this._tooltipType="custom",this._lastTooltipText="",this._quoteSession=e.quoteSession}return e.prototype.getValue=function(){return this._value},e.prototype.getTooltipText=function(){return this._labelMap[this._value]||""},e.prototype.getLabel=function(){return this._labelMap[this._value]||""},e.prototype.getElement=function(){return this._el},e.prototype.update=function(e,t){this._updateValue(e,t),this._render()},e.prototype.setTooltipEnabled=function(e){void 0===e&&(e=!1),this._showTooltip!==e&&(this._showTooltip=e,this._renderTooltip())},e.prototype.enableShortMode=function(){!0!==this._shortMode&&(this._shortMode=!0,this._render())},e.prototype.disableShortMode=function(){!1!==this._shortMode&&(this._shortMode=!1,this._render())},e.prototype.isShortModeEnabled=function(){return this._shortMode},e.prototype.start=function(){!this._subscribed&&this._symbolName&&(this._quoteSession||(this._quoteSession=Object(o.getQuoteSessionInstance)("simple")),this._quoteSession.subscribe(this._getQuoteSessionId(),this._symbolName,this.update.bind(this)),this._subscribed=!0)},e.prototype.stop=function(){this._subscribed&&this._quoteSession&&this._symbolName&&(this._quoteSession.unsubscribe(this._getQuoteSessionId(),this._symbolName),this._subscribed=!1)},e.prototype._init=function(e){this._el=e.el?e.el:document.createElement("span"),this._el.innerHTML="",this._classMap=e.classMap,this._labelMap=e.labelMap,this._showTooltip=e.showTooltip,this._classSuffix=e.classSuffix,this._symbolName=e.symbol,e.tooltipType&&(this._tooltipType=e.tooltipType),this._quoteSessionGUID=Object(n.guid)(),!0===e.short&&this.enableShortMode(),e.data&&this._updateValue(e.data)},e.prototype._clearClasses=function(){var e=this;Object.values(this._classMap).map((function(t){e._el.classList.remove(""+t),e._el.classList.remove(""+t+e._classSuffix)}))},e.prototype._render=function(){this._renderClasses(),this._renderTooltip(),this._renderLabel()},e.prototype._renderLabel=function(){this._el.textContent=this.getLabel()},e.prototype._updateValue=function(e,t){var i=this._getValueFromData(e);(t||i!==this._value)&&(this._value=i)},e.prototype._renderClasses=function(){var e=this._el.classList;e.add(this._componentClass,this._componentClass+this._classSuffix);var t=this._classMap[this._value];for(var i in this._classMap){var r=this._classMap[i];r&&(r===t?e.add(r,r+this._classSuffix):e.remove(r,r+this._classSuffix))}!t&&this._value&&s.logWarn("no className for status "+this._value)},e.prototype._renderTooltip=function(){var e=this._showTooltip?this.getTooltipText():"";e!==this._lastTooltipText&&(this._lastTooltipText=e,this._el.setAttribute("title",e),
"custom"===this._tooltipType&&this._el.classList.toggle("apply-common-tooltip",this._showTooltip))},e.prototype._getQuoteSessionId=function(){return this._quoteSessionPrefix+"."+this._quoteSessionGUID},e}();window.AbstractIndicator=a},rCHB:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"LineToolPitchforkStyle",(function(){return r})),function(e){e[e.Original=0]="Original",e[e.Schiff=1]="Schiff",e[e.Inside=2]="Inside",e[e.Schiff2=3]="Schiff2"}(r||(r={}))},rL76:function(e,t,i){e.exports={labelwidth:"19px",labelheight:"19px",bordersize:"2px",bottommargin:"5px",gearheight:"15px",gearwidth:"15px","price-axis-stub":"price-axis-stub-3MoqVLRB",wrapper:"wrapper-1tN_aWXZ",label:"label-NpaJWak6",symbol:"symbol-2JyFiLZ_",gear:"gear-3B_8TAjc","fixed-gear":"fixed-gear-IiZPkpoQ","fixed-symbol":"fixed-symbol-2A_FZK26"}},rOif:function(e){
e.exports=JSON.parse('{"au":["ASX:XAT","ASX:XAF","INDEX:NZD","SP:SPX","TVC:US30","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX:AUDUSD","FX:EURUSD","FX:USDJPY","FX:GBPUSD","FX_IDC:XAUUSD","NYMEX:CL1!","COMEX:HG1!"],"br":["BMFBOVESPA:IBOV","BMFBOVESPA:IBXL","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX_IDC:USDBRL","FX_IDC:EURBRL","FX_IDC:BRLJPY","BMFBOVESPA:PETR3","BMFBOVESPA:GGBR3","BMFBOVESPA:VALE3"],"ca":["TSX:TXSX","TSX:VIXC","SP:SPX","TVC:DJI","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX:USDCAD","FX:EURUSD","FX:USDJPY","FX:GBPUSD","FX_IDC:XAUUSD","NYMEX:CL1!"],"default":["SP:SPX","TVC:DXY","BITSTAMP:BTCUSD","BINANCE:BTCUSDT","FX:EURUSD","FX:GBPUSD","FX:USDJPY","NASDAQ:AAPL","NASDAQ:TSLA","TVC:USOIL","TVC:UKOIL","COMEX:GC1!","TVC:VIX","TVC:GOLD"],"es":["TVC:IBEX35","EURONEXT:SABE","BME:SAN","BME:TEF","BME:IBE","BME:REP","SP:SPX","TVC:NDX","TVC:SX5E","XETR:DAX","BME:BKIA","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX:EURUSD","FX:USDJPY","BME:ELE","BME:AMS","BME:BKT","BME:TL5"],"fr":["TVC:CAC40","XETR:DAX","TVC:US30","SP:SPX","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX:EURUSD","FX:EURGBP","FX:USDJPY","FX:GBPUSD","TVC:DXY","NYMEX:CL1!","LSE:ACA","LSE:GLE","LSE:ENGI","NASDAQ:UG"],"id":["FX_IDC:USDIDR","FX:EURUSD","FX:USDJPY","FX:AUDUSD","TVC:DXY","SP:SPX","TVC:NI225","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX_IDC:XAUUSD","FX_IDC:XAGUSD","TVC:UKOIL","NYMEX:CL1!"],"in":["NSE:NIFTY","NSE:BANKNIFTY","BSE:SENSEX","FX_IDC:USDINR","FX_IDC:EURINR","SP:SPX","AMEX:SPY","TVC:NDX","TVC:DJI","TVC:DXY","TVC:UKX","XETR:DAX","TVC:NI225","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX:EURUSD"],"it":["MIL:IMIB","FX:EURUSD","FX:EURGBP","FX:USDJPY","FX:GBPUSD","TVC:DXY","TVC:UKX","XETR:DAX","SP:SPX","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","NYMEX:CL1!"],"ja":["SP:SPX","TVC:NI225","ASX:XJO","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX:USDJPY","FX:EURJPY","OTC:IHRMF","CME:NY1!"],"kr":["FX_IDC:USDKRW","FX_IDC:JPYKRW","FX:USDJPY","SP:SPX","TVC:NI225","INDEX:HSCE","TVC:DXY","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","KORBIT:BTCKRW","NYMEX:CL1!","FX_IDC:XAUUSD"],"ms_MY":["FX_IDC:USDMYR","FX_IDC:SGDMYR","FX:EURUSD","FX:GBPUSD","NYMEX:CL1!","TVC:UKOIL","INDEX:KLSE","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX_IDC:XAUUSD"],"pl":["FX_IDC:USDPLN","FX_IDC:EURPLN","FX:EURUSD","FX:USDJPY","FX:GBPUSD","XETR:DAX","TVC:UKX","SP:SPX","NYMEX:CL1!","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD"],"ru":["MOEX:IMOEX","MOEX:RTSI","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","MOEX:USDRUB_TOM","MOEX:EURRUB_TOM","MOEX:SBER","MOEX:GAZP","MOEX:VTBR","MOEX:LKOH","MOEX:MGNT","ICEEUR:BRN1!","NYMEX:CL1!","NYMEX:NG1!","TVC:NDX","TVC:SX5E","XETR:DAX","TVC:FTMIB"],"tr":["FX:USDTRY","FX:EURTRY","XETR:DAX","SP:SPX","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","NYMEX:CL1!","FX_IDC:XAUUSD"],"uk":["TVC:UKX","XETR:DAX","TVC:SX5E","BITSTAMP:BTCUSD","BITSTAMP:XRPUSD","BITSTAMP:ETHUSD","COINBASE:EOSUSD","COINBASE:LTCUSD","FX:GBPUSD","FX_IDC:GBPEUR","LSE:LLOY","LSE:BARC","SP:SPX","AMEX:SPY","TVC:NDX","TVC:DJI","TVC:DXY","TVC:NI225","FX:EURUSD"]}')
},rY0k:function(e,t,i){"use strict";var r=i("xDuj").translatedIntervalString,n=i("hOqT").getTranslatedSymbolDescription,o=i("zDbI").CHART_FONT_FAMILY,s=i("di4O"),a=s.watermarkProperty,l=s.restoreWatermarkPropertyDefaults,c=i("ikwP").drawScaled;t.Watermark=function(e,t){var i={},s=a();function u(e,t){var r=e.font;return i.hasOwnProperty(r)||(i[r]={}),i[r].hasOwnProperty(t)||(i[r][t]=e.measureText(t).width),i[r][t]}s.listeners().subscribe(this,(function(){e.updateSource(this)})),this.destroy=function(){s.listeners().unsubscribeAll(this)},this.properties=function(){return s},this.restorePropertiesDefaults=function(){l()};var h={renderer:function(e,i){return{draw:function(a,l){c(a,l.pixelRatio,(function(){var l=t.symbolInfo();a.fillStyle=s.color.value();var c,h=l.name;/QUANDL/.test(l.exchange)&&((c=h.split(/\//)).length&&(h=c[c.length-1]));for(var d={description:l.description,short_description:l.short_description,pro_name:l.pro_name,short_name:l.name,local_description:l.local_description,language:l.language},p=[{text:h?h+", "+r(t.interval()):"",font:"96px "+o,lineHeight:117,vertOffset:0},{text:n(d)||"",font:"48px "+o,lineHeight:58,vertOffset:5}],f=0,_=0;_<p.length;_++){if((g=p[_]).text){a.font=g.font;var m=u(a,g.text);g.zoom=m>i?i/m:1,f+=g.lineHeight*g.zoom}}var v=Math.max((e-f)/2,0);for(_=0;_<p.length;_++){var g;(g=p[_]).text&&(a.save(),a.translate(i/2,v),a.textBaseline="top",a.textAlign="center",a.font=g.font,a.scale(g.zoom,g.zoom),a.fillText(g.text,0,g.vertOffset),a.restore(),v+=g.lineHeight*g.zoom)}}))}}},update:function(){}};this.paneViews=function(){return t.symbolInfo()&&s.visibility.value()?[h]:[]}}},rh3U:function(e,t,i){e.exports={"css-value-small-size":"18px","css-value-border-radius-small-size":"9px","css-value-large-size":"22px","css-value-border-radius-large-size":"11px",statuses:"statuses-29yrFaoA",statusItem:"statusItem-1gsKvHgg",small:"small-3_g6DSwX",large:"large-2E_Sb0cV",blinking:"blinking-2Xm4xMXd",oneWidgetsVisible:"oneWidgetsVisible-17p3P_dQ",twoWidgetsVisible:"twoWidgetsVisible-3kEfsgAz",threeWidgetsVisible:"threeWidgetsVisible-sIjrbNL1","blinking-animation":"blinking-animation-1jTWzbXG",marketStatusOpen:"marketStatusOpen-2d8WAYHQ",marketStatusClose:"marketStatusClose-2LgI3IBx",marketStatusPre:"marketStatusPre-3tiNWinG",marketStatusPost:"marketStatusPost-1wCjJrHi",marketStatusHoliday:"marketStatusHoliday-HyAcvqXa",invalidSymbol:"invalidSymbol-2tnvnmzm",replayMode:"replayMode-2O_B03jx",notAccurate:"notAccurate-2qEIEgim","blinking-color-animation-notaccurate":"blinking-color-animation-notaccurate-IBDzDS-b",delay:"delay-NXuSKUfA","blinking-color-animation-delay":"blinking-color-animation-delay-37meAg0d",eod:"eod-TNCDZArR","blinking-color-animation-eod":"blinking-color-animation-eod-1k5aef9K",dataProblemHigh:"dataProblemHigh-2SJE6Anp",dataProblemLow:"dataProblemLow-iRGvvWWe"}},rjQZ:function(e,t,i){"use strict";e.exports=Math.imul||function(e,t){var i=65535&e,r=65535&t;return i*r+((e>>>16&65535)*r+i*(t>>>16&65535)<<16>>>0)|0}},ruCT:function(e,t,i){"use strict"
;var r=i("txPx").getLogger("Chart.FollowSymbolsButton"),n=i("gbZD").trackActionFollow;!function(){var e={};function t(t){if(!t.symbol)return $.Deferred().reject().promise();if(null==t.follow&&Object.prototype.hasOwnProperty.call(e,t.symbol))return e[t.symbol].promise;var i=$.Deferred(),r=i.promise();return e[t.symbol]||(e[t.symbol]={}),e[t.symbol].promise=r,$.post("/social/follow-the-symbol/",t,"json").done((function(r){r.error?i.reject(r):(i.resolve(r),r.symbol!==t.symbol&&(e[r.symbol]=e[t.symbol]))})).fail((function(){i.reject.apply(i,arguments)})),r}function i(e,i){return t({symbol:e,follow:+!!i}).done((function(t){var i=t.followTheSymbol;o(e,i)})).promise()}function o(e,t){$(".js-follow-symbol").each((function(){var i=$(this);i.data("symbol")===e&&a(i,t)}))}function s(){for(var t in e)delete e[t];a($(".js-follow-symbol"),!1)}function a(e,t){t=!!t,e.each((function(){var e=$(this);e.toggleClass("js-follow-symbol--followed",t).toggleClass(e.data("follow-symbol-button-followed-style-class")?e.data("follow-symbol-button-followed-style-class"):"i-checked",t)}))}$(document).on("click",".js-follow-symbol",(function(e){var t=$(this),r=t.data("symbol"),o=t.data("type");r&&runOrSignIn((function(){var e=function(e){return e.hasClass("js-follow-symbol--followed")}(t),s=i(r,!e),l=e?"Unfollow":"Follow",c={symbol:r,symbolType:o};a(t,!e),n("Symbol",l,c),s.fail((function(){a(t,e)}))}),{source:"Follow symbol button"})})),TradingView.FollowSymbols={changeState:i,makeButton:function(e){var i=(e=e||{}).$button,n=e.symbol;return i?(i.addClass("js-follow-symbol tv-button tv-button--success"),n||(n=i.data("symbol"))):i=$('<span class="js-follow-symbol tv-button tv-button--success">'),i.data({"follow-symbol-button-followed-style-class":"i-checked","follow-symbol-button-change-text":void 0===e.changeText||!!e.changeText}),n?(t({symbol:n}).pipe((function(e){i.attr("data-symbol",e.symbol),a(i,e.followTheSymbol)})),i):(r.logError("symbol is required"),i)},request:t},$((function(){loginStateChange.subscribe(TradingView.FollowSymbols,(function(i){i||(window.is_authenticated?(s(),$(".js-follow-symbol").each((function(){var i=$(this).data("symbol");i&&(Object.prototype.hasOwnProperty.call(e,i)||t({symbol:i}).done((function(e){o(e.symbol,e.followTheSymbol)})))}))):s())}))}))}()},rwPJ:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("qJq3"),s=i("cBZt"),a=i("jenN"),l=i("MSvv"),c=i("nEwK");function u(e){return Object(s.studyIdString)(e,"mtp-mtpredictor")}var h=function(e){function t(i,r,n,o){var s=this,l=u(o),h=n||i.studyMetaInfoRepository().findByIdSync({type:"java",studyId:l}),d=r||t._createPropertiesFromStudyMetaInfo(h,i.studyVersioning());return(s=e.call(this,i,h,o,d)||this)._formatter=new c.VolumeFormatter,Object(a.createGraphicsPaneViews)(s,i).then(s._setPaneViews.bind(s)),s}return Object(r.__extends)(t,e),t.prototype.formatter=function(){return this._formatter},t.prototype.series=function(){return this._ownerSource instanceof o.Series?this._ownerSource:this._model.mainSeries()},
t._createPropertiesFromMtpStudyShortIdAndState=function(t,i){return e._createPropertiesFromStudyIdAndState.call(this,u(t),i)},t}(l.StudyLineDataSource),d=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_tsanalysis")||this;return n._constructor="LineStudyMtpAnalysis",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 1},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_tsanalysis",t)},t.studyId=function(){return u("mtp_tsanalysis")},t.prototype._studyInputs=function(e){Object(n.assert)(1===e.length,"all the line tool points should be defined");var t=e[0].index,i=this._model.mainSeries().bars().valueAt(t);return null===i?(this._subscribeApplyInputsOnSeriesCompleted(),null):{displayZoneLabels:this.properties().inputs.displayZoneLabels.value(),bar:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(i[0])),account_size:this.properties().inputs.account_size.value(),percent_risk:this.properties().inputs.percent_risk.value(),tickEntryOffset:this.properties().inputs.tickEntryOffset.value(),tickStopOffset:this.properties().inputs.tickStopOffset.value(),minRRRatio:this.properties().inputs.minRRRatio.value(),shouldFilterWPTZones:this.properties().inputs.shouldFilterWPTZones.value(),shouldFilterSTFTrends:this.properties().inputs.shouldFilterSTFTrends.value()}},t}(h),p=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_decisionpoint")||this;return n._constructor="LineStudyMtpDecisionPoint",n._symbolIntervalChanged=!1,n._model.mainSeries().onSymbolIntervalChanged().subscribe(n,n._onSymbolIntervalChanged),n}return Object(r.__extends)(t,e),t.prototype.destroy=function(){this._model.mainSeries().onSymbolIntervalChanged().unsubscribeAll(this),e.prototype.destroy.call(this)},t.prototype.pointsCount=function(){return 1},t.prototype.onData=function(t){e.prototype.onData.call(this,t),this._symbolIntervalChanged=!1},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_decisionpoint",t)},t.studyId=function(){return u("mtp_decisionpoint")},t.prototype._studyInputs=function(e){Object(n.assert)(1===e.length,"all the line tool points should be defined");var t=e[0].index,i=this._model.mainSeries().bars().valueAt(t);return null===i?(this._subscribeApplyInputsOnSeriesCompleted(),null):{displayZoneLabels:this.properties().inputs.displayZoneLabels.value(),symbolIntervalChanged:this._symbolIntervalChanged,bar:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(i[0]))}},t.prototype._onSymbolIntervalChanged=function(){this._symbolIntervalChanged=!0},t}(h),f=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_riskreward")||this;return n._constructor="LineStudyMtpRiskReward",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 3},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_riskreward",t)},t.getTooltipText=function(e){
return e&&0!==e._points.length?1===e._points.length?"Select Stop Bar":2===e._points.length?"Select Target Point":null:"Select Entry Setup Bar"},t.studyId=function(){return u("mtp_riskreward")},t.prototype._studyInputs=function(e){Object(n.assert)(3===e.length,"all the line tool points should be defined");var t=e[0].index,i=e[1].index,r=e[2].index,o=this._model.mainSeries().bars().valueAt(t),s=this._model.mainSeries().bars().valueAt(i),a=this._model.mainSeries().bars().valueAt(r);return null===o||null===s||null===a?(this._subscribeApplyInputsOnSeriesCompleted(),null):{entry_bar:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(o[0])),stop_bar:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(s[0])),target_bar:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(a[0])),target_price:e[2].price,account_size:this.properties().inputs.account_size.value(),percent_risk:this.properties().inputs.percent_risk.value(),tickEntryOffset:this.properties().inputs.tickEntryOffset.value(),tickStopOffset:this.properties().inputs.tickStopOffset.value()}},t}(h),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 1},t.prototype._studyInputs=function(e){Object(n.assert)(1===e.length,"all the line tool points should be defined");var t=e[0].index,i=this._model.mainSeries().bars().valueAt(t);return null===i?(this._subscribeApplyInputsOnSeriesCompleted(),null):{displayZoneLabels:this.properties().inputs.displayZoneLabels.value(),bar:1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(i[0]))}},t}(h),m=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_ew_main")||this;return n._constructor="LineStudyMtpElliotWaveMain",n}return Object(r.__extends)(t,e),t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_ew_main",t)},t.studyId=function(){return u("mtp_ew_main")},t}(_),v=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_ew_major")||this;return n._constructor="LineStudyMtpElliotWaveMajor",n}return Object(r.__extends)(t,e),t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_ew_major",t)},t.studyId=function(){return u("mtp_ew_major")},t}(_),g=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_ew_minor")||this;return n._constructor="LineStudyMtpElliotWaveMinor",n}return Object(r.__extends)(t,e),t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_ew_minor",t)},t.studyId=function(){return u("mtp_ew_minor")},t}(_),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._studyInputs=function(e){Object(n.assert)(e.length===this.pointsCount(),"all the line tool points should be defined");for(var t={displayZoneLabels:this.properties().inputs.displayZoneLabels.value()},i=0;i<this.pointsCount();++i){var r=e[i].index,o=this._model.mainSeries().bars().valueAt(r);if(null===o)return this._subscribeApplyInputsOnSeriesCompleted(),null
;t["bar"+i]=1e3*Object(n.ensureNotNull)(Object(n.ensureDefined)(o[0]))}return t},t}(h),b=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_down1ora")||this;return n._constructor="LineStudyMtpDownWave1OrA",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_down1ora",t)},t.getTooltipText=function(e){return"Down Wave 1 or A: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_down1ora")},t}(y),S=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_down2orb")||this;return n._constructor="LineStudyMtpDownWave2OrB",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_down2orb",t)},t.getTooltipText=function(e){return"Down Wave 2 or B: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_down2orb")},t}(y),w=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_down3")||this;return n._constructor="LineStudyMtpDownWave3",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 3},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_down3",t)},t.getTooltipText=function(e){return"Down Wave 3: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_down3")},t}(y),P=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_down4")||this;return n._constructor="LineStudyMtpDownWave4",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_down4",t)},t.getTooltipText=function(e){return"Down Wave 4: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_down4")},t}(y),C=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_down5")||this;return n._constructor="LineStudyMtpDownWave5",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 5},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_down5",t)},t.getTooltipText=function(e){return"Down Wave 5: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_down5")},t}(y),T=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_downc")||this;return n._constructor="LineStudyMtpDownWaveC",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 3},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_downc",t)},t.getTooltipText=function(e){return"Down Wave C: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_downc")},t}(y),x=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_up1ora")||this;return n._constructor="LineStudyMtpUpWave1OrA",n}return Object(r.__extends)(t,e),
t.prototype.pointsCount=function(){return 2},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_up1ora",t)},t.getTooltipText=function(e){return"Up Wave 1 or A: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_up1ora")},t}(y),I=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_up2orb")||this;return n._constructor="LineStudyMtpUpWave2OrB",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_up2orb",t)},t.getTooltipText=function(e){return"Up Wave 2 or B: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_up2orb")},t}(y),E=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_up3")||this;return n._constructor="LineStudyMtpUpWave3",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 3},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_up3",t)},t.getTooltipText=function(e){return"Up Wave 3: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_up3")},t}(y),L=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_up4")||this;return n._constructor="LineStudyMtpUpWave4",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_up4",t)},t.getTooltipText=function(e){return"Up Wave 4: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_up4")},t}(y),O=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_up5")||this;return n._constructor="LineStudyMtpUpWave5",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 5},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_up5",t)},t.getTooltipText=function(e){return"Up Wave 5: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_up5")},t}(y),A=function(e){function t(t,i,r){var n=e.call(this,t,i,r,"mtp_wpt_upc")||this;return n._constructor="LineStudyMtpUpWaveC",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 3},t.createProperties=function(t){return e._createPropertiesFromMtpStudyShortIdAndState.call(this,"mtp_wpt_upc",t)},t.getTooltipText=function(e){return"Up Wave C: Select Point "+((e?e._points.length:0)+1)},t.studyId=function(){return u("mtp_wpt_upc")},t}(y);i.d(t,"LineStudyMtpAnalysis",(function(){return d})),i.d(t,"LineStudyMtpDecisionPoint",(function(){return p})),i.d(t,"LineStudyMtpRiskReward",(function(){return f})),i.d(t,"LineStudyMtpElliotWaveMain",(function(){return m})),i.d(t,"LineStudyMtpElliotWaveMajor",(function(){return v})),i.d(t,"LineStudyMtpElliotWaveMinor",(function(){return g})),i.d(t,"LineStudyMtpDownWave1OrA",(function(){return b})),i.d(t,"LineStudyMtpDownWave2OrB",(function(){return S})),
i.d(t,"LineStudyMtpDownWave3",(function(){return w})),i.d(t,"LineStudyMtpDownWave4",(function(){return P})),i.d(t,"LineStudyMtpDownWave5",(function(){return C})),i.d(t,"LineStudyMtpDownWaveC",(function(){return T})),i.d(t,"LineStudyMtpUpWave1OrA",(function(){return x})),i.d(t,"LineStudyMtpUpWave2OrB",(function(){return I})),i.d(t,"LineStudyMtpUpWave3",(function(){return E})),i.d(t,"LineStudyMtpUpWave4",(function(){return L})),i.d(t,"LineStudyMtpUpWave5",(function(){return O})),i.d(t,"LineStudyMtpUpWaveC",(function(){return A}))},rzvv:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path stroke-linecap="square" d="M21.5 14.5a8 8 0 1 0-8 8m6-6v8m-4-4h8"/><path d="M10 14.5h3.5V9m-3.277-1.76a3 3 0 1 0-3.993 3.979m14.565-.012a3 3 0 1 0-4.019-3.966"/></g></svg>'},s1Gx:function(e,t,i){"use strict";i.r(t),i.d(t,"specialZOrderBase",(function(){return n})),i.d(t,"sortSourcesPreOrdered",(function(){return o})),i.d(t,"sortSources",(function(){return s})),i.d(t,"isSpeciallyZOrderedSource",(function(){return a}));var r=i("mrSG"),n=1e7,o={ChartEventsSource:n+1,Dividends:n+2,Splits:n+3,Earnings:n+4,LineToolOrder:n+5,LineToolPosition:n+6,LineToolExecution:n+7,AlertLabel:n+8};function s(e){return Object(r.__spreadArrays)(e).sort((function(e,t){return e.zorder()-t.zorder()}))}function a(e){return e.zorder()>=n}},s9sR:function(e,t,i){"use strict";i.r(t),i.d(t,"SetResolutionUndoCommand",(function(){return a}));var r=i("mrSG"),n=i("RDU5"),o=i("LxhU"),s=i("n5al"),a=function(e){function t(t,i,r,n){var o=e.call(this,n)||this;return o._property=t,o._value=i,o._prevValue=t.value(),o._chartWidget=r,o}return Object(r.__extends)(t,e),t.prototype.redo=function(){this._chartWidget.screen.show(),this._property.setValue(this._value),this._handleResolution(this._value)},t.prototype.undo=function(){this._chartWidget.screen.show(),this._property.setValue(this._prevValue),this._handleResolution(this._prevValue)},t.prototype._handleResolution=function(e){var t=this._chartWidget.model().mainSeries().properties(),i=t.style.value(),r=Object(s.isRangeStyle)(i),n=o.Interval.isRange(e);!r&&n?t.style.setValue(11):r&&!n&&t.style.setValue(Object(s.getLastUsedStyle)())},t}(n.UndoCommand)},sEk5:function(e,t,i){"use strict";var r=i("fTGZ").BarsMarksContainer,n=i("BOPY").BarMarkTooltip,o=i("mMWL");function s(e){r.call(this,e);var t=this;o.hideMarksOnBars().subscribe(this,(function(){t._properties.visible.setValue(!o.hideMarksOnBars().value())}))}function a(e){n.call(this)}inherit(s,r),s.prototype._initialize=function(e){this._properties.visible.setValue(!0)},s.prototype.userEditEnabled=function(){return!1},s.prototype._constructor="UserDefinedBarsMarks",s.prototype._plateViewData=function(e){var t={text:e.text};return"object"==typeof e.color&&(t.theme="user_defined_theme",t.overridedTheme={},t.overridedTheme.border=e.color.border,t.overridedTheme.background=e.color.background),t},s.prototype.onClicked=function(e){var t=e.id;this._marks[t].onClicked()},
s.prototype.clearMarks=function(){r.prototype.clearMarks.call(this),this.onNeedRepaint.fire()},s.prototype._getData=function(e){var t=this._model.mainSeries().symbolInfo();if(t){var i=this.roundRange(this._rangeDifference(e)),r=this,n=this._model.mainSeries().properties().interval.value();ChartApiInstance.getMarks(t,i.start,i.end,(function(t){t.forEach((function(e){r._marks[e.id]=e}),r),r._loadedRange=r._rangeUnion(e,r._loadedRange),r.onNeedRepaint.fire()}),n)}},s.prototype._createTooltip=function(){return new a},s.prototype.updatePlateData=function(e,t){return t.barWidth=this.barWidth(),t.text=e.text,t.tooltipMargin=-1*Math.max(e.minSize/2,.4*this.barWidth()),t},s.prototype.hasContextMenu=function(){return!1},s.prototype.calcIsActualCurrency=function(){this._isActualCurrency=!0},inherit(a,n),a.prototype._createLayout=function(){this._layout=$('<div class="bar-mark-tooltip"></div>'),this._layout_text=$('<div class="text"></div>').appendTo(this._layout)},a.prototype._updatePlate=function(e){this._currentId=e.id,this._layout.css("border-color",e.theme.border),this._layout.css("margin-top",e.tooltipMargin+"px"),this._layout_text.html(e.text),this._layout.append(this._layout_text)},e.exports=s},si6p:function(e,t,i){var r,n,o;n=[i("P5fv")],void 0===(o="function"==typeof(r=function(e){var t,i,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(e.event.fixHooks)for(var s=r.length;s;)e.event.fixHooks[r[--s]]=e.event.mouseHooks;var a=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",a.getLineHeight(this)),e.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),r=i["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(r){var n=r||window.event,s=o.call(arguments,1),l=0,h=0,d=0,p=0,f=0,_=0;if((r=e.event.fix(n)).type="mousewheel","detail"in n&&(d=-1*n.detail),"wheelDelta"in n&&(d=n.wheelDelta),"wheelDeltaY"in n&&(d=n.wheelDeltaY),"wheelDeltaX"in n&&(h=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(h=-1*d,d=0),l=0===d?h:d,"deltaY"in n&&(l=d=-1*n.deltaY),"deltaX"in n&&(h=n.deltaX,0===d&&(l=-1*h)),0!==d||0!==h){if(1===n.deltaMode){var m=e.data(this,"mousewheel-line-height");l*=m,d*=m,h*=m}else if(2===n.deltaMode){var v=e.data(this,"mousewheel-page-height");l*=v,d*=v,h*=v}if(p=Math.max(Math.abs(d),Math.abs(h)),(!i||p<i)&&(i=p,u(n,p)&&(i/=40)),u(n,p)&&(l/=40,
h/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/i),h=Math[h>=1?"floor":"ceil"](h/i),d=Math[d>=1?"floor":"ceil"](d/i),a.settings.normalizeOffset&&this.getBoundingClientRect){var g=this.getBoundingClientRect();f=r.clientX-g.left,_=r.clientY-g.top}return r.deltaX=h,r.deltaY=d,r.deltaFactor=i,r.offsetX=f,r.offsetY=_,r.deltaMode=0,s.unshift(r,l,h,d),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function c(){i=null}function u(e,t){return a.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})?r.apply(t,n):r)||(e.exports=o)},sqlk:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));var r=i("mrSG"),n=i("Eyy1"),o=i("tqok"),s=i("hsV8");function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;var i=t[e.startIndex],r=t[e.endIndex];return i===o.INVALID_TIME_POINT_INDEX||r===o.INVALID_TIME_POINT_INDEX?null:(Object(n.assert)(i<=r,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:r,extendLeft:e.extendLeft,extendRight:e.extendRight,startHighPrice:e.startHighPrice,startLowPrice:e.startLowPrice,endHighPrice:e.endHighPrice,transparency:e.transparency})}function l(e,t,i){var n=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),o=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return Object(r.__assign)(Object(r.__assign)({id:t},e),{startIndex:n,endIndex:o})}},sugt:function(e,t,i){"use strict";i.r(t),i.d(t,"studyGraphicsPriceRange",(function(){return l})),i.d(t,"studyGraphicsFirstValue",(function(){return h}));var r=i("Qb4w"),n=i("vaiT"),o=function(){return function(e,t,i){void 0===i&&(i=!1),this.price=t,this.index=e,this.useMainSeriesForPriceRange=i}}(),s=function(){function e(e,t,i,r){this._map=e,this._bars=t.series().bars(),this._props=t.properties().graphics[i],this._getPoints=r}return e.prototype.groupPriceRange=function(e,t){var i=this,n=null;return this._map.forEach((function(o,s){i._props[s].visible.value()&&o.forEach((function(o){var s=i._getPoints(o,i._bars);if(null!==s){for(var a=1/0,l=-1/0,c=!1,u=!1,h=!1,d=0,p=s;d<p.length;d++){var f=p[d],_=f.index<=t,m=f.index>=e;c=c||_,u=u||m,h=h||_&&m;var v=f.price,g=f.price;if(f.useMainSeriesForPriceRange){var y=i._bars.valueAt(f.index);if(null===y)return;var b=y[2];if(null==b)return;var S=y[3];if(null==S)return;v=S,g=b}v<a&&(a=v),g>l&&(l=g)}if(h||c&&u){var w=new r.PriceRange(a,l);n=null===n?w:n.merge(w)}}}))})),n},e.prototype.firstValue=function(e,t){var i=this,r=1/0,n=1/0,s=-1/0,a=1/0,l=1/0,c=1/0;return this._map.forEach((function(o,u){i._props[u].visible.value()&&o.forEach((function(o){var u=i._getPoints(o,i._bars);if(null!==u)for(var h=0,d=u;h<d.length;h++){var p=d[h],f=p.index;f<e&&f>s?(s=f,a=p.price):f>t&&f<l?(l=f,c=p.price):f<r&&(r=f,n=p.price)}}))})),{firstVisible:r===1/0?null:new o(r,n),leftClosest:s===-1/0?null:new o(s,a),rightClosest:l===1/0?null:new o(l,c)}},e}();function a(e){
var t=e.graphics();return[new s(t.dwglabels(),e,"dwglabels",(function(e,t){var i,r=e.yloc!==n.c.Price;if(r){var s=e.yloc===n.c.AboveBar?2:3,a=t.valueAt(e.x);null!==a&&(i=a[s])}else i=e.y;return null==i?null:[new o(e.x,i,r)]})),new s(t.dwglines(),e,"dwglines",(function(e,t){return[new o(e.x1,e.y1,!1),new o(e.x2,e.y2,!1)]}))]}function l(e,t,i){for(var r=null,n=0,o=a(e);n<o.length;n++){var s=o[n].groupPriceRange(t,i);null!==s&&(r=null===r?s:r.merge(s))}return r}function c(e,t,i){return null===t?e:null===e?t:e.index<t.index?i?t:e:i?e:t}var u=function(){function e(){this.firstVisible=null,this.leftClosest=null,this.rightClosest=null}return e.prototype.improve=function(e){this.firstVisible=c(this.firstVisible,e.firstVisible,!0),this.leftClosest=c(this.leftClosest,e.leftClosest,!0),this.rightClosest=c(this.rightClosest,e.rightClosest,!1)},e.prototype.bestPrice=function(){return null!==this.firstVisible?this.firstVisible.price:null!==this.leftClosest?this.leftClosest.price:null!==this.rightClosest?this.rightClosest.price:null},e}();function h(e){var t=e.model().timeScale();if(t.isEmpty())return null;var i=t.visibleBarsStrictRange();if(null===i)return null;for(var r=i.firstBar(),n=i.lastBar(),o=a(e),s=new u,l=0,c=o;l<c.length;l++){var h=c[l].firstValue(r,n);s.improve(h)}return s.bestPrice()}},t1rv:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));var r=i("mrSG"),n=i("Eyy1"),o=i("tqok"),s=i("hsV8");function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;var i=t[e.startIndex],r=t[e.endIndex];return i===o.INVALID_TIME_POINT_INDEX||r===o.INVALID_TIME_POINT_INDEX?null:(Object(n.assert)(i<=r,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:r,startOffset:e.startOffset,endOffset:e.endOffset,startPrice:e.startPrice,endPrice:e.endPrice})}function l(e,t,i){var n=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),o=Object(s.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return Object(r.__assign)(Object(r.__assign)({id:t},e),{startIndex:n,endIndex:o})}},t2ex:function(e,t,i){"use strict";var r=i("5rJj"),n=i("Ss5c").LineDataSource,o=i("ytGH").LineToolWidthsProperty,s=window.t("Fib Retracement");function a(e,t){this._constructor="LineToolFibRetracement";var r=t||a.createProperties();n.call(this,e,r),this.version=a.version,this._properties._stateVersion=1,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("R7Bt").FibRetracementPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);var s=[this._properties.child("trendline").child("linewidth"),this._properties.child("levelsStyle").child("linewidth")];this._widthsProperty=new o(s)}inherit(a,n),a.version=2,a.LevelsCount=24,a.prototype.levelsCount=function(){return a.LevelsCount},a.prototype.pointsCount=function(){return 2},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Fib Retracement"},a.prototype.migrateVersion=function(e,t,i){1===e&&this.properties().extendLines.setValue(!0)},
a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("17v9").FibDrawingsWith24LevelsDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a.createProperties=function(e){var t=new r("linetoolfibretracement",e,!1,{range:[1,24],names:["coeff","color","visible"]});return a._configureProperties(t),t},a._configureProperties=function(e){n._configureProperties(e)},a.prototype.fibLevelsBasedOnLogScale=function(){return this.properties().fibLevelsBasedOnLogScale.value()&&this.priceScale().isLog()},t.LineToolFibRetracement=a},t7cu:function(e,t,i){"use strict";function r(e,t){for(var i=0,r=0,n=t;r<n.length;r++){var o=n[r],s=o.min,a=o.max;if(!(e<s||a<s)){var l=Math.min(e,a);if(e===(i=Math.max(i,l)))break}}return i}function n(e){var t=[];if(void 0===e)return[];Array.isArray(e)||(e=[e]);for(var i=0,r=e;i<r.length;i++){var n=r[i],o=void 0,s=void 0;isFinite(n)?o=s=Number(n):(o=+n.min,s=+n.max),(o<0||isNaN(o))&&(o=0),isNaN(s)&&(s=1/0),o<=s&&s>0&&t.push({min:o,max:s})}return t.sort((function(e,t){return e.min-t.min||e.max-t.max})),t}function o(e,t){if(e.length!==t.length)return!1;for(var i=e.length;i--;){if(e[i].min!==t[i].min)return!1;if(e[i].max!==t[i].max)return!1}return!0}i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return o}))},tBG4:function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesStatusView",(function(){return a}));var r=i("mrSG"),n=i("nBJD"),o=i("tF8J"),s=i("hOqT"),a=function(e){function t(i,r,n){var o=e.call(this,r)||this;return o._invalidated=!0,o._series=i,o._statusViewProperties=n,o._series.onRestarted().subscribe(o,t.prototype.invalidate),o._series.dataEvents().symbolResolved().subscribe(o,t.prototype.invalidate),o._series.dataEvents().completed().subscribe(o,t.prototype.invalidate),o._series.onBoxSizeChanged().subscribe(o,t.prototype.invalidate),o._statusViewProperties.childs().symbolTextSource.listeners().subscribe(o,t.prototype.invalidate),o}return Object(r.__extends)(t,e),t.prototype.invalidate=function(){this._invalidated=!0,this.update()},t.prototype.getSeriesPrecision=function(){var e=4,t=this._series.symbolInfo();return t&&t.pricescale&&(e=Math.round(Math.log(t.pricescale)/Math.log(10))),e},t.prototype.round=function(e){var t=this.getSeriesPrecision(),i=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return i?i.toString():""},t.prototype.update=function(){this._invalidated&&(this._bold=!1,this._size=this._statusViewProperties.childs().fontSize.value()+"px",this._text=Object(o.generateTitleForGui)(this._getTitleGenerationOptions()),this._invalidated=!1)},t.prototype.getSplitTitle=function(){return Object(o.generateSplitTitleForGui)(this._getTitleGenerationOptions())},t.prototype._getTitleGenerationOptions=function(){var e=this._series.symbolInfo();return{
description:"ticker"===this._statusViewProperties.childs().symbolTextSource.value()?e&&e.name||void 0:Object(s.getTranslatedSymbolDescription)({pro_name:e&&e.pro_name||void 0,short_name:e&&e.name||void 0,description:e&&e.description||void 0,short_description:e&&e.short_description||void 0,local_description:e&&e.local_description||void 0,language:e&&e.language||void 0}),exchange:this._statusViewProperties.childs().showExchange.value()&&e&&e.exchange||void 0,symbol:this._series.symbol(),interval:this._statusViewProperties.childs().showInterval.value()?this._series.interval():void 0,style:this._series.properties().childs().style.value(),inputs:this._series.getInputsProperties().state(),boxSize:this._series.data().boxSize,reversalAmount:this._series.data().reversalAmount}},t}(n.a)},tDUI:function(e,t,i){"use strict";(function(e){var r=i("Eyy1").ensureNotNull,n=i("Ss5c").LineDataSource,o=i("gMtF").LineToolRiskRewardPriceAxisView,s=i("mMWL"),a=i("Ocx9").DefaultProperty,l=i("zXvd").NumericFormatter,c=i("wGNx").RiskRewardPointIndex,u=i("ogJP").isNumber,h=i("OekH"),d=h.SIDE,p=h.ORDERTYPE,f=window.t("Risk/Reward"),_=window.t("Risk/Reward short");function m(t,r){var s=r;if(n.call(this,t,s),!r.stopLevel&&!r.profitLevel){var a=t.timeScale().visibleBarsStrictRange(),c=a.firstBar(),u=a.lastBar(),h=t.mainSeries().priceRange(c,u),d=t.mainSeries().priceScale();if(d.isLog()){var p=d.logicalToPrice(h.minValue()),f=d.logicalToPrice(h.maxValue());h=new e(p,f)}if(h&&!h.isEmpty()){var _=Math.round(.2*h.length()*t.mainSeries().base());s.merge({stopLevel:_,profitLevel:_})}}var v=this;s.stopLevel.listeners().subscribe(this,this.recalculate),s.stopLevel.listeners().subscribe(null,(function(){v.properties().stopPrice._listeners.fire(v.properties().stopPrice)})),s.profitLevel.listeners().subscribe(this,this.recalculate),s.profitLevel.listeners().subscribe(null,(function(){v.properties().targetPrice._listeners.fire(v.properties().targetPrice)})),s.addChild("entryPrice",new m.PriceProperty(this,0)),s.addChild("stopPrice",new m.StopPriceProperty(this)),s.addChild("targetPrice",new m.TargetPriceProperty(this)),s.addProperty("riskSize",250),s.addProperty("qty",0),s.addProperty("amountTarget",s.accountSize.value()),s.addProperty("amountStop",s.accountSize.value()),this._riskInPercentsFormatter=new l(2),this._riskInMoneyFormatter=new l,s.risk.subscribe(this,this._recalculateRiskSize),s.accountSize.subscribe(this,this._recalculateRiskSize),s.riskDisplayMode.subscribe(this,this._recalculateRisk),s.riskDisplayMode.subscribe(this,this._recalculateRiskSize),s.entryPrice.subscribe(this,this._recalculateRiskSize),s.stopPrice.subscribe(this,this._recalculateRiskSize),s.profitLevel.subscribe(this,this._recalculateRiskSize),s.profitLevel.subscribe(this,this._syncPriceLevels.bind(this,!1)),s.stopLevel.subscribe(this,this._recalculateRiskSize),s.stopLevel.subscribe(this,this._syncPriceLevels.bind(this,!1)),s.qty.subscribe(this,this._recalculateRiskSize),"percents"===s.riskDisplayMode.value()&&s.risk.value()>100&&s.riskDisplayMode.setValueSilently("money"),
this._syncStateExclusions=["points","entryPrice","stopPrice","targetPrice","stopLevel","profitLevel","riskSize","qty","amountTarget","amountStop","risk","accountSize"],this.version=m.version,this._entryPriceAxisView=new o(this,{colorProperty:s.linecolor,priceProperty:s.entryPrice}),this._stopPriceAxisView=new o(this,{colorProperty:s.stopBackground,priceProperty:s.stopPrice}),this._profitPriceAxisView=new o(this,{colorProperty:s.profitBackground,priceProperty:s.targetPrice}),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("u+oH").RiskRewardPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function v(e,t){this._constructor="LineToolRiskRewardShort";var i=t||v.createProperties();m.call(this,e,i);var r=this.properties();r.entryPrice.subscribe(this,this._recalculateQty),r.stopPrice.subscribe(this,this._recalculateQty),r.riskSize.subscribe(this,this._recalculateQty),r.entryPrice.subscribe(this,this._recalculateAmount),r.profitLevel.subscribe(this,this._recalculateAmount),r.stopLevel.subscribe(this,this._recalculateAmount),r.accountSize.subscribe(this,this._recalculateAmount),r.riskSize.subscribe(this,this._recalculateAmount),r.qty.subscribe(this,this._recalculateAmount)}function g(e,t){this._constructor="LineToolRiskRewardLong";var i=t||g.createProperties();m.call(this,e,i);var r=this.properties();r.entryPrice.subscribe(this,this._recalculateQty),r.stopPrice.subscribe(this,this._recalculateQty),r.riskSize.subscribe(this,this._recalculateQty),r.entryPrice.subscribe(this,this._recalculateAmount),r.profitLevel.subscribe(this,this._recalculateAmount),r.stopLevel.subscribe(this,this._recalculateAmount),r.accountSize.subscribe(this,this._recalculateAmount),r.riskSize.subscribe(this,this._recalculateAmount),r.qty.subscribe(this,this._recalculateAmount)}inherit(m,n),m.prototype.riskFormatter=function(e){return"percents"===e?this._riskInPercentsFormatter:this._riskInMoneyFormatter},m.prototype.getRiskStep=function(e){return"percents"===e?.01:1},m.prototype._roundValue=function(e){return parseFloat(e.toFixed(2))},m.prototype.hasEditableCoordinates=function(){return!1},m.prototype._recalculateRisk=function(){var e=this.properties(),t=e.riskDisplayMode.value(),i=e.riskSize.value(),r=e.accountSize.value(),n=e.risk.value();n="percents"===t?this._roundValue(i/r*100):this._roundValue(r/100*n),this._riskInChange=!0,e.risk.setValue(this.riskFormatter(t).format(n)),this._riskInChange=!1},m.prototype._recalculateRiskSize=function(){if(!this._riskInChange){var e=this.properties(),t=e.risk.value(),i=e.riskDisplayMode.value(),r=e.accountSize.value();"percents"===i?e.riskSize.setValue(t/100*r):t>r?(e.risk.setValue(r),e.riskSize.setValue(r)):e.riskSize.setValue(t)}},m.version=2,m.prototype.lastBarData=function(){var e=this._model.mainSeries().bars().firstIndex(),t=this._model.mainSeries().bars().lastIndex();if(null===e||null===t||isNaN(e)||isNaN(t))return null;var i=this.points();if(4===i.length){var n=i[c.ActualClose];return n.index<e?null:{closePrice:n.price,
index:Math.min(t,n.index)}}var o=i[c.Close];if(o.index<e)return null;var s=Math.min(t,o.index);return{closePrice:r(this._model.mainSeries().bars().valueAt(s))[TradingView.CLOSE_PLOT],index:s}},m.prototype.migrateVersion=function(e,t,i){if(1===e&&this._points.length>=1){var r=[];if(r.push(this._points[0]),o={price:(o=this._points[0]).price,index:o.index+50},r.push(o),this._points[1]&&r.push(this._points[1]),this._points[2]&&r.push(this._points[2]),this._points=r,this._timePoint.length>=1){var n=[],o=this._timePoint[0];n.push(o);var s={price:o.price,time_t:o.time_t,offset:o.offset+50};n.push(s),this._timePoint[1]&&r.push(this._points[1]),this._timePoint[2]&&r.push(this._points[2]),this._timePoint=n}}},m.prototype.checkAlert=function(){this.recalculate()},m.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()||t!==this.priceScale()||this._model.paneForSource(this)!==e?null:[this._entryPriceAxisView,this._stopPriceAxisView,this._profitPriceAxisView]},m.prototype.updateAllViews=function(){this.isActualSymbol()&&this._properties.visible.value()&&(s.hideAllDrawings().value()&&this.userEditEnabled()||(n.prototype.updateAllViews.call(this),this._entryPriceAxisView.update(),this._stopPriceAxisView.update(),this._profitPriceAxisView.update()))},m.prototype.restoreExternalState=function(e){(e=Object.assign({},e),this.isActualSymbol())||u(e.entryPrice)&&(this._timePoint[0].price=e.entryPrice,delete e.entryPrice);this.properties().merge(e)},m.prototype._changeEntryPoint=function(e){var t=this.properties().stopPrice.value(),i=this.properties().targetPrice.value(),r=1/this._model.mainSeries().base(),o=Math.min(t,i)+r,s=Math.max(t,i)-r;e.price=Math.max(o,Math.min(s,this._roundPrice(e.price))),n.prototype.setPoint.call(this,0,e),this.properties().stopPrice.setValue(t),this.properties().targetPrice.setValue(i)},m.prototype.setPoint=function(e,t,i,r){if(this.isActualSymbol()){switch(this._muteSyncLineStyle(),e){case 0:this._changeEntryPoint(t);break;case 2:this.properties().stopPrice.setValue(this.preparseStopPrice(t.price));break;case 3:this.properties().targetPrice.setValue(this.preparseProfitPrice(t.price));break;case 1:t.price=this._roundPrice(t.price),n.prototype.setPoint.call(this,1,t),this.recalculate()}this._unmuteSyncLineStyleWithoutApplyingChanges(),this._syncPriceLevels(r)}},m.prototype._syncPriceLevels=function(e){if(!e&&this.linkKey){var t=this.properties(),i={entryPrice:t.entryPrice.value(),stopLevel:t.stopLevel.value(),profitLevel:t.profitLevel.value()};s.changeLineStyle({linkKey:this.linkKey,state:i,model:this._model})}},m.PriceProperty=function(e,t){n.PointPriceProperty.call(this,e,t)},inherit(m.PriceProperty,n.PointPriceProperty),m.PriceProperty.prototype.setValue=function(e){var t=this._lineSource.points()[this._pointIndex];t.price=parseFloat(e),this._lineSource.setPoint(this._pointIndex,t),this._lineSource.recalculate(),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(),this._lineSource._syncPriceLevels()},
m.PriceProperty.prototype.state=function(){return this.value()},m.PriceProperty.prototype.merge=function(e,t){return this.setValue(e),t?[]:null},m.StopPriceProperty=function(e){m.PriceProperty.call(this,e,1)},inherit(m.StopPriceProperty,m.PriceProperty),m.StopPriceProperty.prototype.value=function(){var e=this._lineSource.stopPrice(),t=this._lineSource.ownerSource().formatter();return t.parse(t.format(e)).value},m.StopPriceProperty.prototype.setValue=function(e){var t=Math.round(Math.abs(e-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().stopLevel.setValue(t),this._lineSource._syncPriceLevels()},m.TargetPriceProperty=function(e){m.PriceProperty.call(this,e,2)},inherit(m.TargetPriceProperty,m.PriceProperty),m.TargetPriceProperty.prototype.value=function(){var e=this._lineSource.profitPrice(),t=this._lineSource.ownerSource().formatter();return t.parse(t.format(e)).value},m.TargetPriceProperty.prototype.setValue=function(e){var t=Math.round(Math.abs(e-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().profitLevel.setValue(t),this._lineSource._syncPriceLevels()},m.prototype.pointsCount=function(){return 1},m.prototype.translatedType=function(){return""},m.prototype.name=function(){return"Risk/Reward"},m.prototype.addPoint=function(e){e.price=this._roundPrice(e.price),n.prototype.addPoint.call(this,e,null,!0);var t={price:e.price,index:e.index+50};n.prototype._addPointIntenal.call(this,t,null,!0);var i=this.calculateActualEntry(e,t);i&&(n.prototype._addPointIntenal.call(this,i,null,!0),(t=this.findClosePoint(i,t))&&n.prototype._addPointIntenal.call(this,t,null,!0));return this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},m.prototype.setOwnerSource=function(e){n.prototype.setOwnerSource.call(this,e),this._model.mainSeries().symbolInfo()&&(this._recalculateAmount(),this._recalculateQty())},m.prototype._roundPrice=function(e){var t=this._model.mainSeries().base();return Math.round(e*t)/t},m.prototype.recalculate=function(){if(0!==this.points().length){var e=this.properties().targetPrice.value(),t=this.properties().stopPrice.value(),i=[this._points[0],this._points[1]],r=this.calculateActualEntry(this.points()[0],this.points()[1]);if(r){i.push(r);var n=this.findClosePoint(r,this.points()[1]);n&&i.push(n)}this._points=i,e!==this.properties().targetPrice.value()&&this.properties().targetPrice._listeners.fire(this.properties().targetPrice),t!==this.properties().stopPrice.value()&&this.properties().stopPrice._listeners.fire(this.properties().stopPrice)}},m.prototype.start=function(){n.prototype.start.call(this),this.recalculate()},m.prototype.startMoving=function(e,t,i){e.logical.price=this._roundPrice(e.logical.price),n.prototype.startMoving.call(this,e,t,i)},m.prototype.move=function(e,t,i){e.logical.price=this._roundPrice(e.logical.price),n.prototype.move.call(this,e,t,i),this.recalculate(),this._entryPriceAxisView.update()},m.prototype.correctPoints=function(e){
return!!this.isActualSymbol()&&n.prototype.correctPoints.call(this,[e[0],e[1]])},m.prototype.entryPrice=function(){return this.points()[0].price},m.prototype.findClosePoint=function(e,t){for(var i=this._model.mainSeries().bars(),n=r(i.firstIndex()),o=Math.max(e.index,n),s=r(i.lastIndex()),a=Math.min(s,t.index),l=o;l<=a;l++){var c=r(i.valueAt(l)),u=this.checkStopPrice(c);if(null!=u)return{index:l,price:u}}return null},m.prototype.calculateActualEntry=function(e,t){for(var i=this._model.mainSeries().bars(),n=r(i.firstIndex()),o=Math.max(e.index,n),s=e.price,a=r(i.lastIndex()),l=Math.min(a,t.index),c=o;c<=l;c++){var u=r(i.valueAt(c));if(u[TradingView.HIGH_PLOT]>=s&&u[TradingView.LOW_PLOT]<=s)return{index:c,price:s}}return null},m.prototype.axisPoints=function(){if(!this._points[c.ActualEntry])return[];var e=this._points[c.ActualEntry],t=null;if(4===this._points.length)t=this._points[c.ActualClose];else{var i=this.lastBarData();if(!i)return[];t={index:i.index,price:i.closePrice}}return[e,t]},m.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("RYNR").RiskRewardDefinitionsViewModel}.bind(null,i)).catch(i.oe)},m.prototype.template=function(){var e=this.properties(),t=n.prototype.template.call(this);return t.stopLevel=e.stopLevel.value(),t.profitLevel=e.profitLevel.value(),t},m.prototype._applyTemplateImpl=function(e){delete e.targetPrice,delete e.stopPrice,delete e.entryPrice,n.prototype._applyTemplateImpl.call(this,e);var t=this.properties();void 0!==e.stopLevel&&t.stopLevel.setValue(e.stopLevel),void 0!==e.profitLevel&&t.profitLevel.setValue(e.profitLevel)},m.prototype.getOrderTemplate=function(){var e=this.properties();return{qty:e.qty.value(),limitPrice:e.entryPrice.value(),stopLoss:e.stopPrice.value(),takeProfit:e.targetPrice.value(),side:this._orderSide(),type:p.LIMIT,seenPrice:null}},m.prototype._propertiesStateExclusions=function(){return["entryPrice","stopPrice","targetPrice"]},m._configureProperties=function(e){n._configureProperties(e),e.addExclusion("stopLevel"),e.addExclusion("profitLevel"),e.addExclusion("stopPrice"),e.addExclusion("targetPrice"),e.addExclusion("entryPrice")},m.prototype._roundQty=function(e){var t=this._model.mainSeries().symbolInfo();return"bitcoin"===t.type||"crypto"===t.type?Math.round(1e3*e)/1e3:Math.floor(e)},inherit(v,m),v.prototype._recalculateQty=function(){if(0!==this.points().length){var e=this.properties(),t=e.entryPrice.value(),i=e.stopPrice.value(),r=e.riskSize.value(),n=this._model.mainSeries().pointValue(),o=this._roundQty(r/(Math.abs(i-t)*n));e.qty.setValue(o)}},v.prototype._recalculateAmount=function(){if(0!==this.points().length){var e=this.properties(),t=e.accountSize.value(),i=e.entryPrice.value(),r=e.qty.value(),n=e.stopPrice.value(),o=e.targetPrice.value(),s=this._model.mainSeries().pointValue(),a=this._roundValue(t+(i-o)*r*s),l=this._roundValue(t-(n-i)*r*s);e.amountTarget.setValue(a),e.amountStop.setValue(l)}},
v.prototype.translatedType=function(){return _},v.prototype.name=function(){return"Risk/Reward short"},v.prototype.stopPrice=function(){return this.entryPrice()+this.properties().stopLevel.value()/this._model.mainSeries().base()},v.prototype.profitPrice=function(){return this.entryPrice()-this.properties().profitLevel.value()/this._model.mainSeries().base()},v.prototype.calculatePL=function(e){return this.entryPrice()-e},v.prototype.preparseStopPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(e,t)},v.prototype.preparseProfitPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(e,t)},v.prototype.checkStopPrice=function(e){var t=this.stopPrice(),i=this.profitPrice();return e[TradingView.HIGH_PLOT]>=t?this.stopPrice():e[TradingView.LOW_PLOT]<=i?this.profitPrice():null},v.prototype._orderSide=function(){return d.SELL},v.createProperties=function(e){var t=new a("linetoolriskrewardshort",e);return v._configureProperties(t),t},v._configureProperties=function(e){m._configureProperties(e)},inherit(g,m),g.prototype._recalculateQty=function(){if(0!==this.points().length){var e=this.properties(),t=e.entryPrice.value(),i=e.stopPrice.value(),r=e.riskSize.value(),n=this._model.mainSeries().pointValue(),o=this._roundQty(r/(Math.abs(t-i)*n));e.qty.setValue(o)}},g.prototype._recalculateAmount=function(){if(0!==this.points().length){var e=this.properties(),t=e.accountSize.value(),i=e.entryPrice.value(),r=e.qty.value(),n=e.stopPrice.value(),o=e.targetPrice.value(),s=this._model.mainSeries().pointValue(),a=this._roundValue(t+(o-i)*r*s),l=this._roundValue(t-(i-n)*r*s);e.amountTarget.setValue(a),e.amountStop.setValue(l)}},g.prototype.stopPrice=function(){return this.entryPrice()-this.properties().stopLevel.value()/this._model.mainSeries().base()},g.prototype.profitPrice=function(){return this.entryPrice()+this.properties().profitLevel.value()/this._model.mainSeries().base()},g.prototype.calculatePL=function(e){return e-this.entryPrice()},g.prototype.preparseStopPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(e,t)},g.prototype.preparseProfitPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(e,t)},g.prototype.checkStopPrice=function(e){var t=this.stopPrice(),i=this.profitPrice();return e[TradingView.LOW_PLOT]<=t?this.stopPrice():e[TradingView.HIGH_PLOT]>=i?this.profitPrice():null},g.prototype.translatedType=function(){return f},g.prototype.name=function(){return"Risk/Reward long"},g.prototype._orderSide=function(){return d.BUY},g.createProperties=function(e){var t=new a("linetoolriskrewardlong",e);return g._configureProperties(t),t},g._configureProperties=function(e){m._configureProperties(e)},t.LineToolRiskRewardLong=g,t.LineToolRiskRewardShort=v}).call(this,i("Qb4w").PriceRange)},tF8J:function(e,t,i){"use strict";i.r(t),i.d(t,"generateTitleForGui",(function(){return l})),
i.d(t,"generateSplitTitleForGui",(function(){return c}));var r=i("mrSG"),n=i("Eyy1"),o=i("xDuj");function s(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toString()||""}function a(e){var t="QUANDL"===(e=e||{}).exchange,i={symbolDescription:"",interval:"",exchange:"",chartStyle:"",extended:"",provider:""};e.description&&t?2===e.description.split("/").length?i.symbolDescription=e.description.split("/")[1]:e.description.split("'").filter((function(e){return e.length})).forEach((function(e){var t=[];t=e&&("/"===e[0]||/\d+\/\(?/.test(e))?[e]:e.split("/").filter((function(e){return e.length})),i.symbolDescription+=t[2===t.length?1:0]})):e.description?i.symbolDescription=e.description:i.symbolDescription=e.symbol;if(e.interval&&(i.interval=Object(o.translatedIntervalString)(e.interval)),t&&e.description){var r=/[\w_]+\/[\w_]+/.exec(e.description);r&&r[0]?i.provider=r[0].split("/")[0]:i.provider=e.description.split("/")[0]}return e.exchange&&(i.exchange=e.exchange),i.chartStyle=function(e){var t=e.inputs;switch(e.style){case 4:var i=t.style+("ATR"===t.style?"("+t.atrLength+")":""),r=Object(n.ensureDefined)(e.boxSize||t.boxSize);return window.t("Renko")+" ["+i+", "+s(r,4)+"]";case 7:return window.t("Line Break")+" ["+t.lb+"]";case 5:var o=t.style+("ATR"===t.style?"("+t.atrLength+")":""),a=e.reversalAmount||t.reversalAmount,l=void 0!==a?", "+s(a,8):"";return window.t("Kagi")+" ["+o+l+"]";case 6:var c=t.style+("ATR"===t.style?"("+t.atrLength+")":""),u=e.boxSize||t.boxSize;return window.t("PnF")+" ["+c+", "+s(Object(n.ensureDefined)(u),8)+", "+t.reversalAmount+"]"}return 11===e.style?window.t("Range"):8===e.style?window.t("Heikin Ashi"):""}(e),e.extended&&(i.extended=window.t("ext",{context:"shorthand_for_extended_session"})),i}function l(e){var t=a(e);return(t.symbolDescription+(t.interval?", "+t.interval:"")+function(e,t){void 0===t&&(t=", ");return(e.provider?""+t+e.provider:"")+(e.exchange?""+t+e.exchange:"")+(e.chartStyle?""+t+e.chartStyle:"")+(e.extended?""+t+e.extended:"")}(t)).replace(/'/g,"")}function c(e){var t=a(e),i=t.symbolDescription.replace(/'/g,""),n=function(e){var t=[];e.provider&&t.push(e.provider);e.exchange&&t.push(e.exchange);e.chartStyle&&t.push(e.chartStyle);e.extended&&t.push(e.extended);return t}(t).map((function(e){return e.replace(/'/g,"")}));return Object(r.__spreadArrays)([i,t.interval||""],n)}},tG6Q:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Cyclic Lines");function s(e,t){this._constructor="LineToolCircleLines";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("GS+0").LineToolCircleLinesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Cyclic Lines"},s.prototype._getPropertyDefinitionsViewModelClass=function(){
return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("LX4V").CyclicAndSineLinesPatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolcirclelines",e);return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolCircleLines=s},tHq3:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 0h18v18H0z"/><path fill="#fff" d="M9 4.5V0H0v9h4.5V6l3 3H9V7L6.5 4.5H9zM7 13l-1 .5v.5h-.5L5 15l-.5-1H4v-.6L3 13l1-.4V12h.5l.5-1 .5 1H6v.6zm6-.4l.3.5h.6l-.3.4.5.4-.6.1v.6l-.4-.4-.5.4V14l-.5-.1.4-.4-.2-.5.5.1zm-2.2-5.5l.2.6.6-.2-.3.5.5.4-.6.1v.6l-.4-.4-.5.4v-.6l-.5-.1.4-.4-.2-.5.5.2zm2.3-3l.2.4.6-.1-.3.5.5.4h-.6V6l-.4-.4-.5.4v-.6l-.5-.1.4-.4-.2-.5.5.1zm2 2.3l.2.5.6-.1-.3.5.5.3-.6.1v.6l-.4-.3-.5.3v-.6h-.5l.4-.4-.2-.6.5.2zM13.6 9l.2.6h.7l-.5.4.1.6-.5-.4-.5.4.2-.6-.5-.4h.6z"/><path fill="#ed5565" d="M3 1V0H1v1H0v2h1v6h2V3h6V1H3zm6 7L5 4H4l5 5V8z"/></svg>'},tK3f:function(e,t,i){"use strict";function r(){Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(4),i.e(6),i.e(8),i.e(12),i.e(15),i.e(20),i.e(21),i.e(22),i.e(23),i.e(29),i.e(45),i.e(162),i.e(165),i.e(179),i.e(189),i.e(362),i.e(0),i.e(7),i.e(9),i.e(16),i.e(28),i.e(33),i.e(41),i.e(56),i.e(136),i.e(170),i.e(171),i.e("details-dialog")]).then(i.bind(null,"uo3Z")).then((function(e){e.renderDetailsDialog()}))}i.r(t),i.d(t,"showDetailsDialog",(function(){return r}))},tS10:function(e,t,i){"use strict";var r=i("mrSG");function n(e,t,i){var r=e.get(t);return void 0!==r?r:(e.set(t,i),i)}function o(e,t,i,r){var o=n(e,t,new Map);return n(o,i,r)}function s(e,t,i,r,o){var s=n(e,t,new Map),a=n(s,i,new Map);return n(a,r,o)}var a=function(){function e(){this._map=new Map,this._size=0}return e.prototype.size=function(){return this._size},e.prototype.clear=function(){this._map.clear(),this._size=0},e}(),l=(function(e){function t(){return e.call(this)||this}Object(r.__extends)(t,e),t.prototype._add=function(e,t){n(this._map,e,[]).push(t),++this._size},t.prototype._get=function(e){return n(this._map,e,[])},t.prototype._forEach=function(e){this._map.forEach((function(t,i){e(i,t)}))}}(a),function(e){function t(){return e.call(this)||this}Object(r.__extends)(t,e),t.prototype._add=function(e,t,i){o(this._map,e,t,[]).push(i),++this._size},t.prototype._get=function(e,t){return o(this._map,e,t,[])},t.prototype._forEach=function(e){this._map.forEach((function(t,i){t.forEach((function(t,r){e(i,r,t)}))}))}}(a),function(e){function t(){return e.call(this)||this}Object(r.__extends)(t,e),t.prototype._add=function(e,t,i,r){s(this._map,e,t,i,[]).push(r),++this._size},t.prototype._get=function(e,t,i){return s(this._map,e,t,i,[])},t.prototype._forEach=function(e){this._map.forEach((function(t,i){t.forEach((function(t,r){t.forEach((function(t,n){e(i,r,n,t)}))}))}))}}(a),i("gBDZ"));i.d(t,"a",(function(){return c}));var c=function(e){function t(t){var i=e.call(this)||this
;return i._maxSize=t,i._keysQueue=[],i}return Object(r.__extends)(t,e),t.prototype.get=function(e){if(!e.text||!e.fontSize||!e.align)return null;var t=e.fontSize,i=e.text,r=e.align,n=o(this._map,t,r,new Map),s=n.get(i);return void 0!==s||(this._size>=this._maxSize?this._deleteFirstKey():++this._size,this._keysQueue.push([t,i,r]),s=new l.b(e.text,e.bold,e.italic,e.font,e.fontSize,e.align),n.set(i,s)),s},t.prototype._deleteFirstKey=function(){var e=this._keysQueue.shift(),t=e[0],i=e[1],r=this._map.get(t);r.delete(i),0===r.size&&this._map.delete(t)},t}(a)},tWVy:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));var r=i("aIyQ"),n=new(i.n(r).a);function o(){n.fire()}},"tc+8":function(e,t,i){"use strict";(function(t){var r=i("ogJP").isFunction;function n(e){if(this._listeners=new t,this._childs=[],this._muteChildChanges=!1,void 0!==e)if(this.isPrimitiveType(e))this._value=e;else for(var i in e)this.addProperty(i,e[i])}n.prototype.merge=function(e,t){var i=null;if(t)var r=(i=[]).length;if(null==e)return i;if(this.isPrimitiveType(e))return t&&this._value!==e&&i.push(this),this._value=e,i;if(Array.isArray(e))for(var n=0;n<e.length;n++)if(this[n]){var o=this[n].merge(e[n],t);t&&(i=i.concat(o))}else this.addProperty(n,e[n]),t&&i.push(this[n]);else for(var s in e)if(this[s]){o=this[s].merge(e[s],t);t&&(i=i.concat(o))}else this.addProperty(s,e[s]),t&&i.push(this[s]);return t&&i.length>r&&i.push(this),i},n.prototype.mergeAndFire=function(e){var t=this.merge(e,!0);this._muteChildChanges=!0,t.forEach((function(e){e._muteChildChanges=!0})),t.forEach((function(e){e._muteChildChanges=!1,e.listeners().fire(e)})),this._muteChildChanges=!1,t.length>0&&this.listeners().fire(this)},n.prototype.state=function(e){var t=r(this.value)?this.value():void 0;void 0===t&&(t={});for(var i=0;i<this._childs.length;i++){var n=this._childs[i];if(!e||-1===e.indexOf(n))if(e){for(var o=[],s=0;s<e.length;s++){var a=e[s];a.startsWith(n+".")&&o.push(a.substr(n.length+1))}t[n]=this[n].state(o)}else t[n]=this[n].state()}return t},n.prototype.clone=function(e){return new n(this.state())},n.prototype.isPrimitiveType=function(e){return null===e||(!!isNumber(e)||(!!new TradingView.TypeValidator(String).check(e)||TradingView.isBoolean(e)))},n.prototype.value=function(){return this._value},n.prototype.listeners=function(){return this._listeners},n.prototype.childCount=function(){return this._childs.length},n.prototype.childNames=function(){return this._childs},n.prototype.child=function(e){return this[e]},n.prototype.setValue=function(e,t){(this._value!==e||t)&&(this._value=e,this._listeners.fire(this))},n.prototype.setValueSilently=function(e){this._value=e},n.prototype.addProperty=function(e,t){var i=new n(t);this[e]=i,this._childs.push(e),i.listeners().subscribe(this,n.prototype.childChanged)},n.prototype.removeProperty=function(e){this[e].listeners().unsubscribe(this,n.prototype.childChanged),delete this[e],this._childs=this._childs.filter((function(t){return t!==e}))},n.prototype.hasChild=function(e){
return this._childs.indexOf(e)>=0},n.prototype.addChild=function(e,t){this[e]=t,-1===this._childs.indexOf(e)&&this._childs.push(e),t.listeners().subscribe(this,n.prototype.childChanged)},n.prototype.childChanged=function(e,t){this._muteChildChanges||this.listeners().fire(this)},n.prototype.subscribe=function(e,t){this.listeners().subscribe(e,t,!1)},n.prototype.unsubscribe=function(e,t){this.listeners().unsubscribe(e,t)},n.prototype.unsubscribeAll=function(e){this.listeners().unsubscribeAll(e)},n.prototype.childs=function(){return this},e.exports=n}).call(this,i("aIyQ"))},tqok:function(e,t,i){"use strict";i.r(t),i.d(t,"INVALID_TIME_POINT_INDEX",(function(){return r}));var r=-2e6},txPx:function(e,t,i){"use strict";i.r(t),i.d(t,"LOGLEVEL",(function(){return r})),i.d(t,"getLogLevel",(function(){return f})),i.d(t,"isHighRateEnabled",(function(){return _})),i.d(t,"setLogLevel",(function(){return m})),i.d(t,"getRawLogHistory",(function(){return v})),i.d(t,"serializeLogHistoryEntry",(function(){return g})),i.d(t,"getLogHistory",(function(){return y})),i.d(t,"getLogger",(function(){return S})),i.d(t,"loggingOn",(function(){return P})),i.d(t,"loggingOff",(function(){return C}));var r,n="undefined"!=typeof window?window:{},o=!1;try{localStorage.getItem(""),o=!0}catch(x){}!function(e){e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.NORMAL=4]="NORMAL",e[e.DEBUG=5]="DEBUG"}(r||(r={}));var s=0,a=[],l=null,c=null,u=null,h=NaN,d=r.WARNING,p=!1;function f(){return d}function _(){return p}function m(e){e=Math.max(r.ERROR,Math.min(r.DEBUG,e)),d=e,T()}function v(e,t){var i=a.reduce((function(e,t){return e.concat(t)}),[]);return i.sort((function(e,t){return e.id-t.id})),void 0!==t&&(i=i.filter((function(e){return e.subSystemId===t}))),"number"==typeof e&&(i=i.slice(-e)),i}function g(e){return new Date(e.timestamp).toISOString()+":"+e.subSystemId+":"+e.message.replace(/"/g,"'")}function y(e,t){return function(e,t){var i,r=0;for(i=e.length-1;i>=1&&(r+=8*(1+encodeURIComponent(e[i]).length),!(i-1>0&&r+8*(1+encodeURIComponent(e[i-1]).length)>t));i--);return e.slice(i)}(v(e,t).map(g),75497472)}function b(e,t,i,n){if(t!==c||n.id!==u){var o=new Date;if(e<=r.NORMAL&&function(e,t,i,r,n){var o={id:s,message:String(t),subSystemId:r,timestamp:Number(e)};s+=1,i.push(o),void 0!==n&&i.length>n&&i.splice(0,1)}(o,t,i,n.id,n.maxCount),e<=d&&(!n.highRate||_())&&(!l||n.id.match(l))){var a=o.toISOString()+":"+n.id+":"+t;switch(e){case r.DEBUG:console.debug(a);break;case r.INFO:case r.NORMAL:n.color?console.log("%c"+a,"color: "+n.color):console.log(a);break;case r.WARNING:console.warn(a);break;case r.ERROR:console.error(a)}c=t,u=n.id,h&&clearTimeout(h),h=setTimeout((function(){c=null,u=null,h=NaN}),1e3)}}}function S(e,t){void 0===t&&(t={});var i=[];a.push(i);var n=Object.assign(t,{id:e});function o(e){return function(t){return b(e,t,i,n)}}return{logDebug:o(r.DEBUG),logError:o(r.ERROR),logInfo:o(r.INFO),logNormal:o(r.NORMAL),logWarn:o(r.WARNING)}}var w=S("logger"),P=n.lon=function(e,t){m(r.DEBUG),w.logNormal("Debug logging enabled"),
p=Boolean(e),l=t||null,T()},C=n.loff=function(){m(r.INFO),w.logInfo("Debug logging disabled")};function T(){try{o&&(localStorage.setItem("tv.logger.logHighRate",String(p)),localStorage.setItem("tv.logger.loglevel",String(d)))}catch(e){w.logWarn("Cannot save logger state (level: "+d+", high-rate: "+p+") to localStorage: "+e.message)}}!function(){p=!!o&&"true"===localStorage.getItem("tv.logger.logHighRate");var e=parseInt(o&&localStorage.getItem("tv.logger.loglevel")||"");Number.isNaN(e)&&(e=r.WARNING),m(e),w.logNormal("Init with settings - level: "+d+", high-rate: "+p)}(),n.performance&&n.performance.now?w.logNormal("Sync logger and perf times, now is "+n.performance.now()):w.logWarn("Perf time is not available")},"u+0B":function(e,t,i){"use strict";i.r(t),i.d(t,"TextWidthCache",(function(){return n}));var r=/[2-9]/g,n=function(){function e(e){void 0===e&&(e=50),this._actualSize=0,this._usageTick=1,this._oldestTick=1,this._tick2Labels={},this._cache={},this._maxSize=e}return e.prototype.reset=function(){this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}},e.prototype.measureText=function(e,t,i){var n=i||r,o=String(t).replace(n,"0");if(this._cache[o])return this._cache[o].width;if(this._actualSize===this._maxSize){var s=this._tick2Labels[this._oldestTick];delete this._tick2Labels[this._oldestTick],delete this._cache[s],this._oldestTick++,this._actualSize--}var a=e.measureText(o).width;return 0===a&&t.length?0:(this._cache[o]={width:a,tick:this._usageTick},this._tick2Labels[this._usageTick]=o,this._actualSize++,this._usageTick++,a)},e}()},u0yd:function(e,t,i){"use strict";var r=i("Zp/P").coordinateIsValid,n=i("gyZD").PaneRendererLine;function o(e){e.forceLineColor=!1,n.call(this,e),this.color1=e.color1,this.color2=e.color2,this.bottom=e.bottom,this.isSeries=!!e.isSeries,this._simpleMode=e.simpleMode}inherit(o,n),o.prototype._drawImpl=function(e){if(0!==this.items.length){e.lineCap="square",e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.lineStyle=this.lineStyle,e.lineWidth=1;for(var t=0;t<this.items.length&&!r(this.items[t].y);)t++;for(var i=this.items.length-1;i>=0&&!r(this.items[i].y);)i--;if(!(t>=i)){e.translate(.5,.5);for(var o={},s=this.items,a=t;a<=i;a++){var l=s[a];if(h=l.style?l.style.color:this.lineColor,a<i&&s[a+1].style){var c=s[a+1].style.color;if(h!==c){var u=o[c]||[];u.push(l),o[c]=u}}(d=o[h]||[]).push(l),o[h]=d}for(var h in o){var d=o[h];e.beginPath();var p=0;for(a=0;a<d.length;a++)d[a].style&&d[a].style.color!==h&&(e.moveTo(d[p].x,this.bottom),this.walkLine(e,d.slice(p,a),!0,this.bottom),p=a);if(e.moveTo(d[p].x,this.bottom),this.walkLine(e,d.slice(p,d.length),!0,this.bottom),e.closePath(),this.isSeries){var f=e.createLinearGradient(0,0,0,this.bottom);f.addColorStop(0,this.color1),f.addColorStop(1,this.color2),e.fillStyle=f,this._simpleMode=!0}else e.fillStyle=h;e.fill()}e.lineWidth=this.lineWidth,n.prototype._drawImpl.call(this,e)}}},t.PaneRendererArea=TradingView.PaneRendererArea=o},u5Q5:function(e,t,i){"use strict";i.r(t),
i.d(t,"bindToInput",(function(){return p})),i.d(t,"activateKeyPressHandler",(function(){return g})),i.d(t,"showDialog",(function(){return y})),i.d(t,"setSearchRequestDelay",(function(){return b}));var r=i("6et/"),n=i("h24c"),o=i("Kxc7"),s=i("mYjs"),a=i("pPtI"),l=i("PT1i"),c=i("FA0h"),u=i("yihy"),h=i("JWMC");function d(){return new Promise((function(e){Promise.all([i.e("vendors_embed"),i.e(14),i.e(60),i.e(91),i.e(122),i.e(330),i.e(0),i.e(38),i.e(57),i.e(83),i.e("symbolsearch")]).then(function(t){e(i("m5UM"))}.bind(null,i)).catch(void 0)}))}function p(e,t){return d().then((function(i){return i.bindToInput(e,t)}))}function f(e){Object(a.setLastUsedResolution)(e),l.linking.interval.setValue(e)}var _=null,m=Object(u.canShowNewSymbolSearch)();function v(e){if(!Object(n.globalKeypressMatches)(e))return!1;e.preventDefault();var t=String.fromCharCode(e.charCode);return function(e){return/[\d,]/.test(e)}(t)&&o.enabled("show_interval_dialog_on_key_press")?Object(s.showChangeIntervalDialog)({callback:f,ownerDocument:e.target&&e.target.ownerDocument},t):o.enabled("symbol_search_hot_key")&&d().then((function(i){if(Object(h.trackEvent)("GUI","SS","hotkey"),m)var r=Object(u.isPlatformMobile)(),o=_=Object(c.a)().then((function(e){o===_&&e.showSymbolSearchItemsDialog({hasWatchlist:r,defaultValue:r?void 0:t,showSpreadActions:Object(n.canShowSpreadActions)(),selectSearchOnInit:!1,onSearchComplete:function(e){l.linking.symbol.setValue(e[0].symbol)}})}));else i.showDialog({initialValue:t,callback:function(e,t){l.linking.symbol.setValue(e),t&&f(t)},ownerDocument:e.target&&e.target.ownerDocument})})),!0}function g(){r.pushBackListener("symbolEdit",v)}function y(e){return d().then((function(t){return t.showDialog(e)}))}function b(e){return d().then((function(t){return t.setSearchRequestDelay(e)}))}},uDHo:function(e,t,i){"use strict";var r,n;i.r(t),i.d(t,"Helpers",(function(){return r})),i.d(t,"TIMEFRAMETYPE",(function(){return n})),function(e){e.extractErrorReason=function(e){return e.params[1]}}(r||(r={})),function(e){e.PeriodBack="period-back",e.TimeRange="time-range"}(n||(n={}))},uPb3:function(e,t,i){"use strict";(function(e,r){i("xrEm");var n=i("u+0B").TextWidthCache,o=i("7KDR").Separator,s=i("5VQP").ContextMenuManager,a=i("H0vP").InvalidationLevel,l=i("ikwP"),c=l.createBoundCanvas,u=l.getContext2D,h=l.drawScaled,d=l.hardResizeCanvas,p=l.clearRect,f=l.fillRect,_=l.Size,m=i("S8xo").MouseEventHandler,v=i("JWMC").trackEvent,g=i("XlJ7").makeFont,y=i("8OdW"),b=i("CW80").isLineTool,S=i("mE5r").PriceAxisesContainer,w=i("1IXQ").PriceAxisWidget,P=i("3/8U").axesHighlightColor,C=i("zDbI").CHART_FONT_FAMILY,T={contextMenuEnabled:!0,timezoneMenuEnabled:!0,pressedMouseMoveScale:!0};function x(t,i,r,n,s){this._options=Object.assign({},T,i),this.chart=t,this._properties=t.properties().scalesProperties,this.contextMenu=null,this._element=document.createElement("tr"),this._backgroundBasedTheme=s;var a=t.model().model().rendererOptionsProvider(),l=this.backgroundColor.bind(this);function u(){throw new Error("Time axis does not support real price scales")}
var h=this;var d={titlesProvider:r,stubContextMenuProvider:function(e,t){var i=h.getContextMenuActions(!0),r=n(e,t);return r[r.length-1]===h.chart.actions().scalesProperties?Array.prototype.splice.apply(r,[r.length-2,0,new o].concat(i)):(r.push(new o),r=r.concat(i)),r},backgroundBasedTheme:s,rendererOptionsProvider:a,getBackgroundTopColor:l,getBackgroundBottomColor:l};this._onLabelHovered=new e,this._lhsStubContainer=new S(this._properties,w.LHS,u,d,this._options.priceAxisLabelsOptions),this._lhsStubContainer.onLabelHovered().subscribe(this,function(e,t){this._onLabelHovered.fire(e,t)}.bind(this)),this._rhsStubContainer=new S(this._properties,w.RHS,u,d,this._options.priceAxisLabelsOptions),this._rhsStubContainer.onLabelHovered().subscribe(this,function(e,t){this._onLabelHovered.fire(e,t)}.bind(this)),this._element.appendChild(this._lhsStubContainer.getElement()),this._cell=document.createElement("td"),this._element.appendChild(this._cell),this._cell.classList.add("chart-markup-table","time-axis"),this._cell.style.height="25px",this._dv=document.createElement("div"),this._dv.style.width="100%",this._dv.style.height="100%",this._dv.style.position="relative",this._dv.style.overflow="hidden",this._cell.appendChild(this._dv),this._canvasConfiguredHandler=function(){this.chart.model().model().lightUpdate()}.bind(this),this._canvasBinding=c(this._dv,new _(16,16)),this._canvasBinding.subscribeCanvasConfigured(this._canvasConfiguredHandler);var p=this._canvasBinding.canvas;p.style.position="absolute",p.style.zIndex="1",p.style.left="0",p.style.top="0",this._topCanvasConfiguredHandler=function(){this.chart.model().model().lightUpdate()}.bind(this),this._topCanvasBinding=c(this._dv,new _(16,16)),this._topCanvasBinding.subscribeCanvasConfigured(this._topCanvasConfiguredHandler);var f=this._topCanvasBinding.canvas;f.style.position="absolute",f.style.zIndex="2",f.style.left="0",f.style.top="0",this._element.appendChild(this._rhsStubContainer.getElement()),this.restoreDefaultCursor(),this.update(),this._minVisibleSpan=y.MINUTE_SPAN,this._mouseEventHandler=new m(this._topCanvasBinding.canvas,this,{treatVertTouchDragAsPageScroll:!0,treatHorzTouchDragAsPageScroll:!1}),this.size=new _(0,0)}x.prototype.destroy=function(){this._mouseEventHandler.destroy(),this._topCanvasBinding.unsubscribeCanvasConfigured(this._topCanvasConfiguredHandler),this._topCanvasBinding.destroy(),this._canvasBinding.unsubscribeCanvasConfigured(this._canvasConfiguredHandler),this._canvasBinding.destroy(),this._rhsStubContainer.onLabelHovered().unsubscribeAll(this),this._lhsStubContainer.onLabelHovered().unsubscribeAll(this),this._lhsStubContainer.destroy(),this._rhsStubContainer.destroy(),this.chart.properties().paneProperties.background.unsubscribeAll(this)},x.prototype.getElement=function(){return this._element},x.prototype.hasCanvas=function(e){return this._canvasBinding.canvas===e||this._topCanvasBinding.canvas===e},x.prototype._BORDER_SIZE=1,x.prototype._OFFSET_SIZE=1,x.prototype._TICK_LENGTH=3,x.prototype.onLabelHovered=function(){return this._onLabelHovered
},x.prototype.backgroundColor=function(){return this.chart.model().model().backgroundColor().value()},x.prototype.lineColor=function(){return this._properties.lineColor.value()},x.prototype.textColor=function(){return this._properties.textColor.value()},x.prototype.fontSize=function(){return this._properties.fontSize.value()},x.prototype.baseFont=function(){return g(this.fontSize(),C)},x.prototype.baseBoldFont=function(){return g(this.fontSize(),C,"","bold")},x.prototype.rendererOptions=function(){this._rendererOptions||(this._rendererOptions={borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new n});var e=this._rendererOptions;if(e.fontSize!==this.fontSize()){var t=this.fontSize();e.fontSize=t,e.font=this.baseFont(),e.font=g(this.fontSize(),C,""),e.paddingTop=Math.ceil(t/2.5),e.paddingBottom=e.paddingTop,e.paddingHorizontal=Math.ceil(t/2),e.baselineOffset=Math.round(this.fontSize()/5),e.widthCache.reset()}return this._rendererOptions},x.prototype._zoomAvailable=function(){return!this.chart.model().timeScale().isEmpty()&&this.chart.model().model().zoomEnabled()&&this._options.pressedMouseMoveScale},x.prototype._mouseDownOrTouchStartEvent=function(e){if(this._mousedown||!this._zoomAvailable())return!0;this._mousedown=!0;var t=this.chart.model();t.timeScale().isEmpty()||t.startScaleTime(e.localX)},x.prototype.mouseDownEvent=function(e){this._mouseDownOrTouchStartEvent(e)},x.prototype.touchStartEvent=function(e){this._mouseOrTouchEnterEvent(e),this._mouseDownOrTouchStartEvent(e)},x.prototype.mouseDownOutsideEvent=function(e){this._zoomAvailable()&&this._mousedown&&(this._mousedown=!1,this.chart.model().endScaleTime(),this.restoreDefaultCursor())},x.prototype._pressedMouseOrTouchMoveEvent=function(e){this._zoomAvailable()&&this.chart.model().scaleTimeTo(e.localX)},x.prototype.pressedMouseMoveEvent=function(e){this._pressedMouseOrTouchMoveEvent(e)},x.prototype.touchMoveEvent=function(e){this._pressedMouseOrTouchMoveEvent(e)},x.prototype._mouseUpOrTouchEndEvent=function(e){this._zoomAvailable()&&(this._mousedown=!1,this.chart.model().endScaleTime(),this.restoreDefaultCursor())},x.prototype.mouseUpEvent=function(e){this._mouseUpOrTouchEndEvent(e)},x.prototype.touchEndEvent=function(e){this._mouseUpOrTouchEndEvent(e),this._mouseOrTouchLeaveEvent(e)},x.prototype._contextMenuOrTouchContextMenuEvent=function(e){this._options.contextMenuEnabled&&this._createContextMenu().then((function(t){t.show(e)}))},x.prototype.contextMenuEvent=function(e){this._contextMenuOrTouchContextMenuEvent(e)},x.prototype.touchContextMenuEvent=function(e){this._contextMenuOrTouchContextMenuEvent(e)},x.prototype._mouseOrTouchEnterEvent=function(e){this.chart.model().model().zoomEnabled()&&this.setCursor("ew-resize")},x.prototype.mouseEnterEvent=function(e){this._mouseOrTouchEnterEvent(e)},x.prototype._mouseOrTouchLeaveEvent=function(e){this.restoreDefaultCursor()},x.prototype.mouseLeaveEvent=function(e){this._mouseOrTouchLeaveEvent(e)},x.prototype._createContextMenu=function(){
return s.createMenu(this.getContextMenuActions(),{statName:"TimeScaleContextMenu"})},x.prototype.getContextMenuActions=function(e){var t=this.chart;t.updateActions();var i=t.actions(),n=[];return e||n.push(i.timeScaleReset,new o),this._options.timezoneMenuEnabled&&n.push(i.applyTimeZone),n.push(i.sessionBreaks),r.enabled("charting_library_base")||n.push(i.extendedHours),n},x.prototype._mouseDoubleClickOrDoubleTapEvent=function(e){v("GUI","Double click time scale"),this.chart.model().resetTimeScale()},x.prototype.mouseDoubleClickEvent=function(e){this._mouseDoubleClickOrDoubleTapEvent(e)},x.prototype.doubleTapEvent=function(e){this._mouseDoubleClickOrDoubleTapEvent(e)},x.prototype.optimalHeight=function(){var e=this.rendererOptions();return Math.ceil(e.offsetSize+e.borderSize+e.tickLength+e.fontSize+e.paddingTop+e.paddingBottom)},x.prototype.setSizes=function(e,t,i){this.size&&this.size.equals(e)||(this.size=e,this._canvasBinding.resizeCanvas({width:e.w,height:e.h}),this._topCanvasBinding.resizeCanvas({width:e.w,height:e.h}),this._cell.style.width=e.w+"px",this._cell.style.height=e.h+"px"),this._lhsStubContainer.setSizes(e.h,t),this._rhsStubContainer.setSizes(e.h,i)},x.prototype._spanIndex=function(e){for(var t=[y.MINUTE_SPAN,y.HOUR_SPAN,y.DAY_SPAN,y.MONTH_SPAN,y.YEAR_SPAN],i=t.length-1;i>0;){if(t[i]<=e)return i;i--}return i},x.prototype._spanOffset=function(e,t){if(t<e)throw new Error("actual span cuold not be less then base");return this._spanIndex(t)-this._spanIndex(e)},x.prototype.update=function(){if(this.chart.model()){var e=this.chart.model().timeScale().marks();if(e){var t=this;this._minVisibleSpan=y.YEAR_SPAN,e.forEach((function(e){t._minVisibleSpan=Math.min(e.span,t._minVisibleSpan)}))}}},x.prototype._hightlightBackground=function(e,t,i){for(var r=this.chart.model().timeScale(),n=t[0].index,o=t[0].index,s=1;s<t.length;s++)n=Math.min(n,t[s].index),o=Math.max(o,t[s].index);var a=Math.floor(r.indexToCoordinate(n)*i),l=Math.ceil(r.indexToCoordinate(o)*i),c=this._backgroundBasedTheme.value(),u=P(c);f(e,a,0,l-a,Math.ceil(this.size.h*i)+1,u)},x.prototype.drawBackground=function(e,t){p(e,0,0,Math.ceil(this.size.w*t)+1,Math.ceil(this.size.h*t)+1,this.backgroundColor());var i=this.chart.model();if(i){if(!i.timeScale().isEmpty()){var r=i.model().selection().sources().filter((function(e){return b(e)})).reduce((function(e,t){var i=t.axisPoints();return 0===i.length?e:e.concat(i)}),[]);r.length>0&&this._hightlightBackground(e,r,t)}var n=i.model().crossHairSource();n.startMeasurePoint()&&this._hightlightBackground(e,n.measurePoints(),t)}},x.prototype.drawTickMarks=function(e,t){var i=this.chart.model().timeScale().marks();if(i&&0!==i.length){var r=i.reduce((function(e,t){return e.span>t.span?e:t}),i[0]).span;r>30&&r<40&&(r=30),e.save(),e.strokeStyle=this.lineColor();var n=this.rendererOptions(),o=n.borderSize+n.tickLength+n.paddingTop+n.fontSize-n.baselineOffset;e.textAlign="center",e.fillStyle=this.lineColor();var s=Math.max(1,Math.floor(t)),a=Math.floor(.5*t),l=Math.round(n.tickLength*t);e.beginPath()
;for(var c=i.length;c--;){var u=Math.round(i[c].coord*t);e.rect(u-a,0,s,l)}e.fill(),e.fillStyle=this.textColor();var d=this;h(e,t,(function(){e.font=d.baseFont();for(var t=0;t<i.length;t++){(n=i[t]).span<r&&e.fillText(n.label,n.coord,o)}e.font=d.baseBoldFont();for(t=0;t<i.length;t++){var n;(n=i[t]).span>=r&&e.fillText(n.label,n.coord,o)}})),e.restore()}},x.prototype.drawBackLabels=function(e,t){e.save();var i=new Set,r=this.chart.model(),n=r.dataSources();r.selection().sources().forEach((function(e){i.add(e)})),r.hoveredSource()&&i.add(r.hoveredSource()),r.sourcesBeingMoved().forEach((function(e){i.add(e)}));var o=r.lineBeingEdited()||r.lineBeingCreated();o&&i.add(o),i.add(this.chart.model().crossHairSource()),n=n.concat(r.model().customSources());for(var s=this.rendererOptions(),a=0;a<n.length;a++){var l=n[a];if(!i.has(l)&&l.timeAxisViews){var c=l.timeAxisViews();if(c)for(var u=0;u<c.length;u++)c[u].renderer().draw(e,s,t)}}e.restore()},x.prototype._minMaxViews=function(e){var t=[],i={value:null,view:null},r={value:null,view:null};return e.forEach((function(e){if(e.timeAxisViews){var t=e.timeAxisViews();if(t&&t.length)for(var n=0;n<t.length;n++){var o=t[n],s=o.coordinate();(null===i.value||i.value<=s)&&(i={value:s,view:o}),(null===r.value||r.value>=s)&&(r={value:s,view:o})}}})),i.view&&t.push(i.view),r.view&&t.push(r.view),t},x.prototype._addViewsOrMaxMin=function(e,t){e.length<=1?e.forEach((function(e){if(e.timeAxisViews){var i=e.timeAxisViews();i&&i.length&&t.push(i)}})):t.push(this._minMaxViews(e))},x.prototype.drawCrossHairLabel=function(e,t){e.save(),e.clearRect(0,0,Math.ceil(this.size.w*t)+1,Math.ceil(this.size.h*t)+1);var i,r=this.chart.model(),n=[],o=r.lineBeingEdited()||r.lineBeingCreated();o&&o.timeAxisViews&&((i=o.timeAxisViews())&&i.length&&n.push(i));(this._addViewsOrMaxMin(r.sourcesBeingMoved(),n),this._addViewsOrMaxMin(r.selection().sources(),n),r.hoveredSource()&&!r.selection().isSelected(r.hoveredSource()))&&(r.hoveredSource().timeAxisViews&&(i=r.hoveredSource().timeAxisViews())&&i.length&&n.push(i));(i=r.crossHairSource().timeAxisViews())&&i.length&&n.push(i);var s=this.rendererOptions();n.forEach((function(i){i.forEach((function(i){e.save(),i.renderer().draw(e,s,t),e.restore()}))})),e.restore()},x.prototype.hardResetCanvas=function(){this.size&&(d(this._canvasBinding,this.size),d(this._topCanvasBinding,this.size))},x.prototype.paint=function(e){if(e!==a.None){var t=u(this._topCanvasBinding.canvas);if(e>a.Cursor){var i=u(this._canvasBinding.canvas),r=this._canvasBinding.pixelRatio;this.drawBackground(i,r),this.chart.model()&&(this.drawTickMarks(i,r),this.drawBackLabels(i,r),this.chart.model().crossHairSource().updateAllViews(),this.drawCrossHairLabel(t,r)),this._lhsStubContainer.paintStubs(e),this._rhsStubContainer.paintStubs(e)}this.drawCrossHairLabel(t,this._topCanvasBinding.pixelRatio)}},x.prototype.restoreDefaultCursor=function(){this.setCursor("")},x.prototype.setCursor=function(e){var t="";"grabbing"!==e&&"ew-resize"!==e||(t="time-axis--cursor-"+e),
this._currentCursorClassName!==t&&(this._currentCursorClassName&&this._cell.classList.remove(this._currentCursorClassName),t&&this._cell.classList.add(t),this._currentCursorClassName=t,this._cell.style.cursor)},x.prototype.updatePriceAxisStubs=function(){var e=this.chart.model().model(),t=this.chart.isMaximizedPane()?this.chart.maximizedPaneWidget().state():e.paneForSource(e.mainSeries());if(t){var i=e.priceScaleSlotsCount();this._lhsStubContainer.setScales([],i.left,t.leftPriceScales().length,i.left+i.right),this._rhsStubContainer.setScales([],i.right,t.rightPriceScales().length,i.left+i.right)}},x.prototype.getScreenshotData=function(){var e={};return e.content=this._canvasBinding.canvas.toDataURL(),e.canvas=this._canvasBinding.canvas,e.contentWidth=this.size.w,e.contentHeight=this.size.h,e.lhsStub=this._lhsStubContainer.getScreenshotData(),e.rhsStub=this._rhsStubContainer.getScreenshotData(),e},t.TimeAxisWidget=x}).call(this,i("aIyQ"),i("Kxc7"))},ufwo:function(e,t,i){"use strict";i.r(t),i.d(t,"rangesAreEqual",(function(){return n}));var r=i("LxhU");function n(e,t){return!(!r.Interval.isEqual(e.res,t.res)||e.val.type!==t.val.type)&&("period-back"===e.val.type&&"period-back"===t.val.type?e.val.value===t.val.value:"time-range"===e.val.type&&"time-range"===t.val.type&&(e.val.to===t.val.to&&e.val.from===t.val.from))}},"ux/p":function(e,t,i){"use strict";function r(e){return new Promise((function(t){Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(3),i.e(4),i.e(5),i.e(11),i.e(14),i.e(19),i.e(31),i.e(34),i.e(50),i.e(59),i.e(118),i.e(126),i.e(166),i.e(205),i.e(0),i.e(10),i.e(13),i.e(17),i.e(25),i.e(36),i.e(47),i.e(49),i.e(54),i.e(58),i.e(63),i.e(103),i.e("react-popper"),i.e(142),i.e("email-dialog")]).then(function(r){t(i("aAc3").createPhoneDialog(e))}.bind(null,i)).catch(void 0)}))}function n(e){return new Promise((function(t){Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(3),i.e(4),i.e(5),i.e(11),i.e(14),i.e(19),i.e(31),i.e(34),i.e(50),i.e(59),i.e(118),i.e(126),i.e(166),i.e(205),i.e(0),i.e(10),i.e(13),i.e(17),i.e(25),i.e(36),i.e(47),i.e(49),i.e(54),i.e(58),i.e(63),i.e(103),i.e("react-popper"),i.e(142),i.e("email-dialog")]).then(function(r){t(i("aAc3").createEmailDialog(e))}.bind(null,i)).catch(void 0)}))}i.r(t),i.d(t,"createPhoneDialog",(function(){return r})),i.d(t,"createSMSEmailDialog",(function(){return n}))},v3sz:function(e,t,i){"use strict";i.r(t);var r=i("HGP3"),n=i("Eyy1"),o=i("aO4+"),s=i("eJTA"),a=i("VdBB"),l=i("c44N"),c=i("ikwP"),u=i("Hr11");function h(e,t,i){return i?Math.sign(e)*(Math.round(Math.abs(e))+t):Math.round(e)+t}var d=function(){function e(e,t){this._data=e,this._textWidths=t}return e.prototype.draw=function(e,t){var i=this,r=t.pixelRatio;void 0!==this._textWidths.rendererParams&&Object(l.areEqualPaneRenderParams)(this._textWidths.rendererParams,t)||(this._textWidths.rendererParams=t,this._textWidths.width.clear());var n=this._data;e.lineJoin="miter",e.miterLimit=Math.round(2*r),e.strokeStyle=n.bgColor,e.lineWidth=Math.max(2,Object(u.ceiledEven)(2*r))
;for(var o=0,s=n.items;o<s.length;o++){var a=s[o];e.beginPath();var h="lower"===a.pos;e.save();var d=Math.round(n.orderArrow.vMargin*r);e.translate(0,h?d:-d),this._drawOrderArrow(e,a.orderPoint,n.orderArrow,n.exitLineWidth,h,r),e.restore(),e.save(),this._drawPriceArrow(e,a.pricePoint,n.priceArrow,!h,r),e.restore(),e.closePath(),e.stroke(),e.fillStyle=n.exitLineWidth?n.exitColor:"buy"===a.type?n.buyColor:n.sellColor,e.fill()}var p=n.text;p.visible&&Object(c.drawScaled)(e,r,(function(){e.font=p.fontSize+"px "+p.font,e.textAlign="center",e.textBaseline="top",e.fillStyle=n.labelColor,e.strokeStyle=n.bgColor,e.lineWidth=Math.min(2,Math.floor(2*r));for(var t=0,o=n.items;t<o.length;t++){var s=o[t],a="lower"===s.pos;e.save();var l=a?1:-1,c=n.orderArrow;e.translate(0,(c.height+c.vMargin+n.exitLineWidth)*l);var u=a?p.vMargin:-p.fontSize-p.vMargin,h=l*(p.fontSize+p.lineSpacing);if(s.label&&(e.translate(0,u),e.strokeText(s.label,Math.ceil(s.orderPoint.x),s.orderPoint.y),e.fillText(s.label,Math.ceil(s.orderPoint.x),s.orderPoint.y),i._textWidths.width.has(s.label)||i._textWidths.width.set(s.label,e.measureText(s.label).width)),s.qty){var d=Boolean(s.label)?h:u;e.translate(0,d),e.strokeText(s.qty,Math.ceil(s.orderPoint.x),s.orderPoint.y),e.fillText(s.qty,Math.ceil(s.orderPoint.x),s.orderPoint.y),i._textWidths.width.has(s.qty)||i._textWidths.width.set(s.qty,e.measureText(s.qty).width)}e.restore()}}))},e.prototype.hitTest=function(e){var t=this._testOrderArrows(e),i=!t&&this._data.text&&this._testText(e);return t||i?new a.HitTestResult(a.HitTestResult.REGULAR):null},e.prototype._drawOrderArrow=function(e,t,i,r,n,o){var s,a;n?(e.rotate(Math.PI),s=-t.x,a=-t.y):(s=t.x,a=t.y),a-=i.height+r;var l=Math.max(1,Math.floor(o)),c=l%2?.5:0,d=n?"floor":"ceil";s=h(s*o,c,n),a=Math.round((Math[d](a)+.5)*o),e.translate(s,a);var p=Object(u.ceiledEven)(i.width*o)/2+c,f=Object(u.ceiledEven)(i.tailWidth*o)/2+c,_=Math.round(i.tailHeight*o);if(e.moveTo(-f,0),e.lineTo(f,0),e.lineTo(f,_),e.lineTo(p,_),e.lineTo(0,Math.round(i.height*o)),r){var m=Math.floor(l/2);e.lineTo(p+m,Math.round(i.height*o)),e.lineTo(p+m,Math.round((i.height+r)*o)),e.lineTo(-p-m,Math.round((i.height+r)*o)),e.lineTo(-p-m,Math.round(i.height*o)),e.lineTo(0,Math.round(i.height*o))}e.lineTo(-p,_),e.lineTo(-f,_),e.lineTo(-f,0),e.lineTo(f,0)},e.prototype._drawPriceArrow=function(e,t,i,r,n){var o,s;r?(e.rotate(Math.PI),o=-t.x,s=-t.y):(o=t.x,s=t.y);var a=Math.max(1,Math.floor(n)),l=a%2?.5:0;o=h(o*n,l,r)-a,s=h(s*n,l,r);var c=Object(u.ceiledEven)(2*i.width*n)/2,d=-(Math.round(i.width*n)+l);e.translate(o,s),e.moveTo(0,0),e.lineTo(d,-c),e.lineTo(d,c),e.lineTo(0,0),e.lineTo(d,-c)},e.prototype._testOrderArrows=function(e){for(var t=this._data,i=t.orderArrow.width/2,r=0,n=t.items;r<n.length;r++){var o=n[r],s=o.orderPoint;if(!(e.x<s.x-i||e.x>s.x+i)){var a="lower"===o.pos,l=t.orderArrow.height+t.exitLineWidth;a||(l=-l);var c=s.y+(a?t.orderArrow.vMargin:-t.orderArrow.vMargin),u=Math.min(c,c+l),h=Math.max(c,c+l);if(!(e.y<u||e.y>h))return!0}}return!1},e.prototype._testText=function(e){
var t=this._data,i=t.text;if(!i.visible)return!1;for(var r=0,n=t.items;r<n.length;r++){var o=n[r],s=o.orderPoint,a="lower"===o.pos,l=t.orderArrow.vMargin+t.orderArrow.height+t.exitLineWidth;a||(l=-l);var c=s.y+l,u=(o.label?1:0)+(o.qty?1:0),h=i.vMargin+i.fontSize*u+i.lineSpacing*Math.max(0,u-1);a||(h=-h);var d=Math.min(c,c+h),p=Math.max(c,c+h);if(!(e.y<d||e.y>p)){var f=o.label&&o.qty?a&&e.y<c+i.fontSize||!a&&e.y>c-i.fontSize?o.label:o.qty:o.label||o.qty,_=this._textWidths.width.get(f);if(!(void 0===_||e.x<s.x-_/2||e.x>s.x+_/2))return!0}}return!1},e}(),p=i("zDbI"),f=i("k9/m"),_=i("Zy3/");i.d(t,"StudyStrategyOrdersPaneView",(function(){return I}));var m={BuyColor:r.colorsPalette["color-tv-blue-500"],SellColor:"#FF1744",ExitColor:"#D500F9",LabelDarkColor:"#B2B5BE",LabelLightColor:r.colorsPalette["color-mirage-1"]};function v(e){return!1===e.e?"exit":e.b?"entryBuy":"entrySell"}function g(e){return e.b?"buy":"sell"}function y(e,t){return t?!e.b:e.b}function b(e,t){return y(e,t)?"lower":"upper"}function S(e,t,i){var r=e[t].get(i);return void 0===r&&(r=0,e[t].set(i,r)),r}function w(e,t,i,r){var o=Object(n.ensureDefined)(e[t].get(i));e[t].set(i,o+r)}function P(e,t){return t&&(e.c||e.id||"Untitled")||""}function C(e,t){return t&&(e.b?"+":"-")+e.q||""}function T(e,t,i){return Object(n.ensureNotNull)(e.b?i.low(t):i.high(t))}function x(e,t){return("exit"===v(e)?2:0)+t.vMargin+t.height}var I=function(){function e(e,t,i){this._invalidated=!0,this._textWidths={width:new Map},this._study=e,this._series=t,this._model=i,this._orderArrow={vMargin:11,width:10,height:15,tailWidth:2,tailHeight:10},this._priceArrow={width:5},this._text={vMargin:7,font:p.CHART_FONT_FAMILY,fontSize:12,lineSpacing:2,visible:!0},this._items={entryBuy:[],entrySell:[],exit:[]},this._study.properties().strategy.orders.subscribe(this,this.update)}return e.prototype.update=function(){this._invalidated=!0},e.prototype.clearItems=function(){this._items.entryBuy=[],this._items.entrySell=[],this._items.exit=[]},e.prototype.renderer=function(e,t){var i=this._study.properties();if(!i.visible.value()||!i.strategy.orders.visible.value())return null;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items.entryBuy.length||this._items.entrySell.length||this._items.exit.length){var r=new _.CompositeRenderer;return this._items.entryBuy.length&&r.append(this._strategyOrdersRenderer(this._items.entryBuy,!1)),this._items.entrySell.length&&r.append(this._strategyOrdersRenderer(this._items.entrySell,!1)),this._items.exit.length&&r.append(this._strategyOrdersRenderer(this._items.exit,!0)),r}return null},e.prototype._strategyOrdersRenderer=function(e,t){var i=this._model.backgroundColor().value(),r="black"===Object(s.rgbToBlackWhiteString)(Object(s.parseRgb)(i),150);return new d({items:e,buyColor:m.BuyColor,sellColor:m.SellColor,exitColor:m.ExitColor,labelColor:r?m.LabelDarkColor:m.LabelLightColor,bgColor:i,orderArrow:this._orderArrow,exitLineWidth:t?2:0,priceArrow:this._priceArrow,text:this._text},this._textWidths)},e.prototype._updateImpl=function(){
this.clearItems();var e=this._study.ordersData();if(e&&e.length){var t=this._model.timeScale(),i=this._series.priceScale(),r=t.visibleBarsStrictRange();if(!t.isEmpty()&&!i.isEmpty()&&null!==r){var s=this._study.barsIndexes(),a=this._series.nearestIndex(r.firstBar(),f.PlotRowSearchMode.NearestRight),l=this._series.nearestIndex(r.lastBar(),f.PlotRowSearchMode.NearestLeft);if(void 0!==a&&void 0!==l){for(var c=function(e,t,i,r){for(var n=[],o=[],s=0;s<e.length;++s){var a=r[s];a<t||a>i||(n.push(e[s]),o.push(a))}return[n,o]}(e,a,l,s),u=c[0],h=c[1],d=this._labelAndQtyVisibility(u.length),p=d[0],_=d[1],m=p||_,I=this._textHeight(p,_),E=Object(n.ensureNotNull)(this._series.firstValue()),L=i.isInverted(),O={upper:new Map,lower:new Map},A=0;A<u.length;A++){var M=u[A],k=y(M,L),D=h[A],R=t.indexToCoordinate(D),V=T(M,D,this._series),B=i.priceToCoordinate(V,E),N=b(M,L),F=S(O,N,D);B+=k?F:-F,w(O,N,D,x(M,this._orderArrow)+I);var j=i.priceToCoordinate(M.p,E),W=v(M);this._items[W].push({orderPoint:new o.Point(R,B),pricePoint:new o.Point(R,j),label:P(M,p),qty:C(M,_),pos:N,type:g(M)})}this._text.visible=m}}}},e.prototype._labelAndQtyVisibility=function(e){var t=this._model.timeScale();if(t.barSpacing()<10&&this._orderArrow.width*e*2>t.width())return[!1,!1];var i=this._study.properties();return[i.strategy.orders.showLabels.value(),i.strategy.orders.showQty.value()]},e.prototype._textHeight=function(e,t){return e||t?e&&t?2*this._text.fontSize+this._text.vMargin+this._text.lineSpacing:this._text.fontSize+this._text.vMargin:0},e}()},v5F8:function(e,t,i){"use strict";var r=i("5rJj"),n=i("aDyP").LineToolPitchfork,o=window.t("Modified Schiff Pitchfork");function s(e,t){var i=t||s.createProperties();n.call(this,e,i),this._constructor="LineToolSchiffPitchfork"}inherit(s,n),s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Modified Schiff Pitchfork"},s.createProperties=function(e){var t=new r("linetoolschiffpitchfork",e,!1,{range:[0,8]});return s._configureProperties(t),t},s._configureProperties=function(e){n._configureProperties(e)},t.LineToolSchiffPitchfork=s},vADo:function(e,t,i){"use strict";(function(t){function i(e){t.call(this,""),this.subscribe(this,i.prototype.checkSelfColor),this.reloadProperties(e)}inherit(i,t),i.prototype.reloadProperties=function(e){for(;this._childs.length>0;)this.removeProperty(this._childs[0]);this._initValues=[];for(var t=0;t<e.length;++t)this._initValues.push(e[t].defaultValue),this.addChild(t,e[t].property);this.checkSelfColor()},i.prototype.setValue=function(e,i){if(this._value!==e||i){var r=this;this._childs.forEach((function(t){r[t].setValueSilently(e||r._initValues[t])})),t.prototype.setValue.call(this,e,i)}},i.prototype.checkSelfColor=function(){for(var e=!0,i=0;i<this._initValues.length;++i)if(this[i].value()!==this[0].value()){e=!1;break}t.prototype.setValue.call(this,e?this[0].value():"")},e.exports=i}).call(this,i("tc+8"))},vAx0:function(e,t,i){"use strict";(function(e){
var r=i("aO4+").Point,n=i("f6yo").pointInCircle,o=i("VdBB").HitTestResult,s=i("Zy3/").CompositeRenderer,a=i("6xeX").Tooltip,l=i("GH0z").PercentageFormatter,c=i("55Xp").roundToFirstValuable,u=i("LxhU").Interval,h=i("jCNj").utc_to_cal,d=i("jCNj").get_timezone,p=i("ZZnO").dateFormatProperty,f=i("gQ5K").DateFormatter,_=i("ikwP"),m=_.Size,v=_.createDisconnectedCanvas,g=_.getPrescaledContext2D,y=i("cPgM").ScaledPaneRenderer,b=i("z+cS").VerticalLineRenderer,S=i("Ai40"),w=i("+GxX").isFeatureEnabled,P=i("zDbI").CHART_FONT_FAMILY,C=w("hide_esd_on_some_intervals");function T(e,t,i,r){this._lastClickedId=null,this._model=e,this._study=t,this._lollipops={},this._textCache={},this.templatesCache={},this._invalidated=!0,this._hideLollipops=!1,this.defaultStyle=i,this.hoveredStyle=r,this._templatesSize=new m(300,150),this.templatesCache.hovered=void 0!==this.hoveredStyle?this.createTemplate(this.hoveredStyle):null,this.templatesCache.default=void 0!==this.defaultStyle?this.createTemplate(this.defaultStyle):null,this._onPaneBgChangeBound=this.onPaneBgChange.bind(this),e.backgroundColor().subscribe(this._onPaneBgChangeBound),e.mainSeries().onSymbolIntervalChanged().subscribe(this,this._onSymbolOrIntervalChanged)}function x(e){y.call(this),this.data=e,this._hittest=new o(o.CUSTOM,e)}function I(e,t){y.call(this),this._data=e,this._paneView=t,this.textRenderer=new I.TextRenderer(e.style.lollipop.importance)}function E(e,t){var i={strokeStyle:"#eb4d5c",lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:2,importance:"earnings",strokeStyle:"#eb4d5c",fillStyle:e.backgroundColor().value(),fillCircle:!0,text:{label:"E",strokeStyle:"#eb4d5c",font:"normal 12px "+P}}},r=$.extend(!0,{},i,{strokeStyle:"#e8304f",lollipop:{fillCircle:!0,fillStyle:"#eb4d5c",text:{strokeStyle:"white"}}});this._percentageFormatter=new l,T.call(this,e,t,i,r)}function L(e,t){var i={strokeStyle:"#53b987",lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:2,importance:"splits",strokeStyle:"#53b987",fillStyle:e.backgroundColor().value(),fillCircle:!0,text:{label:"S",strokeStyle:"#53b987",font:"normal 12px "+P}}},r=$.extend(!0,{},i,{strokeStyle:"#53b987",lollipop:{fillCircle:!0,fillStyle:"#53b987",text:{strokeStyle:"white"}}});T.call(this,e,t,i,r)}function O(e,t){var i={strokeStyle:"#0496ff",lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:2,importance:"dividends",strokeStyle:"#0496ff",fillStyle:e.backgroundColor().value(),fillCircle:!0,text:{label:"D",strokeStyle:"#0496ff",font:"normal 12px "+P}}},r=$.extend(!0,{},i,{strokeStyle:"#0496ff",lollipop:{fillCircle:!0,fillStyle:"#0496ff",text:{strokeStyle:"white"}}});T.call(this,e,t,i,r)}T.prototype.destroy=function(){this._model.backgroundColor().unsubscribe(this._onPaneBgChangeBound),this._model.mainSeries().onSymbolIntervalChanged().unsubscribeAll(this)},
T.prototype.onPaneBgChange=function(){void 0!==this.defaultStyle&&(this.defaultStyle.lollipop.fillStyle=this._model.backgroundColor().value(),this._stylesCache=null,Object.keys(this.templatesCache).forEach((function(e){0===e.indexOf("default")&&(this.templatesCache[e]=null)}),this))},T.prototype.onClickOutside=function(){this.clearLastClicked()},T.prototype.clearLastClicked=function(){this._lastClickedId=null},T.prototype.closeTooltips=function(){for(var e in this._lollipops)if(this._lollipops.hasOwnProperty(e)){var t=this._lollipops[e];t.visible&&(t.tooltip.isOpened()&&t.tooltip.hide(),t.visible=!1)}},T.prototype.getLastClickedLollipopId=function(){return this._lastClickedId},T.prototype._setStackStudies=function(){if(this._stackStudies=[],!(this._study instanceof S.study_ESD$TV_EARNINGS))for(var e,t=this._model.dataSources(),i=0;i<t.length;++i)((e=t[i])instanceof S.study_ESD$TV_EARNINGS||e instanceof S.study_ESD$TV_SPLITS&&this._study instanceof S.study_ESD$TV_DIVIDENDS)&&this._stackStudies.push(e)},T.prototype._getY=function(){for(var e=0,t=this._model.panes(),i=t.length;i--;){var r=t[i];r.containsMainSeries()&&(e+=r.height())}return e},T.prototype.update=function(){this._invalidated=!0},T.prototype.updateImpl=function(){this._setStackStudies();var e=this,t=this._study.data(),i=this._model.timeScale(),r=i.visibleBarsStrictRange(),n=this._model.mainSeries().bars(),o=this._study.priceScale(),s=this._model.mainSeries().firstBar();if(o&&!o.isEmpty()&&!i.isEmpty()&&s&&t){if(C&&i.barSpacing()/this.defaultStyle.lollipop.circleHeight<2/3&&u.parse(this._model.mainSeries().interval()).inMilliseconds()>=432e6)return this._hideLollipops=!0,this.clearLastClicked(),void this.closeTooltips();this._hideLollipops=!1,this.closeTooltips();var a=this._getY(),l=r.firstBar(),c=r.lastBar();t.range(l,c).each((function(t,r){for(var s=0,u=0;u<e._stackStudies.length;++u)e._stackStudies[u].data().contains(t)&&++s;t>l&&t<c&&e.addLollipop(a,n,i,o,t,r,s)})),this.afterUpdate(a,n,i,o)}},T.prototype.addLollipop=function(e,t,i,n,o,s,l){var c=s[0],u=this._model.mainSeries().symbolInfo();if(u){var h=u.name,d=null,p=this._study.metaInfo().id+"_"+c+"_"+h,f=this._model.lastHittestData(),_=f&&f.id===p;if(_){var m=t.valueAt(o);if(null!==m){var v=m[TradingView.LOW_PLOT],g=this._model.mainSeries().firstValue();d=n.priceToCoordinate(v,g)}}this._lollipops[p]=Object.assign({id:p,visible:!0,basePoint:new r(i.indexToCoordinate(o),e),hovered:_||p===this.getLastClickedLollipopId(),barY:d,stack:l,tooltip:this._lollipops.hasOwnProperty(p)?this._lollipops[p].tooltip:new a({width:240})},this.extraData(s))}},T.prototype.afterUpdate=function(e,t,i){},T.prototype.extraData=function(e){throw new Error("Not Implemented")},T.prototype.createText=function(e,t){throw new Error("Not Implemented")},T.prototype.showBarLine=function(){return!0},T.prototype.getStyle=function(e,t){var i=e;if(t.stack&&(i+="_stack:"+t.stack),"hovered"===i)return this.hoveredStyle;if("default"===i)return this.defaultStyle;if(this._stylesCache||(this._stylesCache={}),!this._stylesCache[i]){
var r=TradingView.clone("hovered"===e?this.hoveredStyle:this.defaultStyle);t.stack&&(r.lollipop.incHeight=24*t.stack),this._stylesCache[i]=r}return this._stylesCache[i]},T.prototype.hasTooltip=function(e){return!0},T.prototype.renderer=function(e,t){if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._hideLollipops)return null;var i=new s;for(var n in this._lollipops)if(this._lollipops.hasOwnProperty(n)){var o=this._lollipops[n],a=this.getStyle(o.hovered?"hovered":"default",o);if(o.visible){var l=Object.assign({tooltipPoint:new r(o.basePoint.x,o.basePoint.y-a.lollipop.circleHeight-15-(a.lollipop.incHeight||0)),style:a,createText:this.createText.bind(this)},o),c=this.getTemplate(o.hovered?"hovered":"default",o),u={circlePoint:new r(o.basePoint.x,o.basePoint.y-a.lollipop.circleHeight-(a.lollipop.incHeight||0)),style:a,template:c,templateSize:this._templatesSize,basePoint:o.basePoint,id:o.id,clickHandler:this._lollipopMouseClickHandler.bind(this,o.id),tapHandler:this._lollipopMouseClickHandler.bind(this,o.id)};if(i.append(new x(u)),o.hovered&&this.hasTooltip(o)&&o.barY&&this.showBarLine()){var h={width:t,height:e,color:a.strokeStyle,linestyle:a.barLine.lineStyle,linewidth:a.lineWidth,x:o.basePoint.x,top:0,bottom:o.basePoint.y-a.lollipop.circleHeight},d=new b;d.setData(h),i.insert(d)}i.append(new I(l,this))}}return i},T.prototype.getTemplate=function(e,t){var i=e;return t.stack&&(i+="_stack:"+t.stack),this.templatesCache[i]||(this.templatesCache[i]=this.createTemplate(this.getStyle(e,t))),this.templatesCache[i]},T.prototype.createTemplate=function(e){var t=v(document,this._templatesSize),i=g(t),n=new r(e.lollipop.width/2,e.lollipop.height-e.lollipop.circleHeight-(e.lollipop.incHeight||0));return this.drawCircle(i,e,n),this.drawLabel(i,e,n),t},T.prototype.drawCircle=function(e,t,i){e.strokeStyle=t.strokeStyle,e.fillStyle=t.lollipop.fillStyle,e.lineWidth=t.lollipop.lineWidth,CanvasEx.setLineStyle(e,CanvasEx.LINESTYLE_SOLID),e.beginPath(),e.arc(i.x,i.y,t.lollipop.radius,0,2*Math.PI,!1),e.closePath(),e.stroke(),t.lollipop.fillCircle&&e.fill()},T.prototype.drawLabel=function(e,t,i){e.textAlign="center",e.textBaseline="middle",e.fillStyle=t.lollipop.text.strokeStyle,e.font=t.lollipop.text.font,e.fillText(t.lollipop.text.label,i.x,i.y)},T.prototype._lollipopMouseClickHandler=function(e){this._lastClickedId=this._lastClickedId===e?null:e},T.prototype._formatDate=function(e){var t=d(this._model.properties().timezone.value()),i=h(t,e);return new f(p.value()).format(i)},T.prototype._onSymbolOrIntervalChanged=function(){this.clearLastClicked(),this.closeTooltips()},inherit(x,y),x.prototype.hitTest=function(e){return n(e,this.data.circlePoint,this.data.style.lollipop.radius)?this._hittest:null},x.prototype._drawImpl=function(e){var t=this.data.template;e.drawImage(t,this.data.basePoint.x-(.5+this.data.style.lollipop.width/2<<0)+.5,this.data.basePoint.y-this.data.style.lollipop.height+.5,this.data.templateSize.w,this.data.templateSize.h)},inherit(I,y),I.prototype._drawImpl=function(e){
this._data.createText(this._data,this.textRenderer),this._paneView.getLastClickedLollipopId()===this._data.id?this._data.tooltip.show({items:[this.textRenderer],x:this._data.basePoint.x,y:this._data.basePoint.y-this._data.style.lollipop.circleHeight-10-2*this._data.style.lollipop.radius*(this._data.stack?this._data.stack:0),wrapElement:e.canvas.parentNode,leftBorderColor:this._data.color}):this._data.tooltip.hide()},I.prototype.hitTest=function(e){return null},I.TextRenderer=function(e){this.lines=[],this.fontHeight=12,this.font=this.fontHeight+"px "+P,this.lineSpacing=8,this.fillStyle="black",e&&(this.importance=e)},I.TextRenderer.prototype.draw=function(e,t){for(var i=t.y,r=0;r<this.lines.length;r++){var n=this.lines[r];e.font=this.font,n.options.fontWeight&&(e.font=n.options.fontWeight+" "+this.font),e.fillStyle=this.fillStyle,n.renderer(e,n.line,{x:t.x,y:i}),i+=this.lineSpacing+this.fontHeight}},I.TextRenderer.prototype.measure=function(){return this.lines.length*(this.fontHeight+this.lineSpacing)-this.lineSpacing},I.TextRenderer.prototype.basicRenderer=function(e,t,i){e.fillText(t,i.x,i.y)},I.TextRenderer.prototype.addMulticolorTextLine=function(e,t){this.addTextLine(e,t,this.multicolorRenderer)},I.TextRenderer.prototype.addTextLine=function(e,t,i){i||(i=this.basicRenderer),t||(t={}),this.lines.push({line:e,renderer:i,options:t})},I.TextRenderer.prototype.multicolorRenderer=function(e,t,i){for(var r=i.x,n=0;n<t.length;++n){var o=t[n];e.fillStyle=o.color,e.fillText(o.text,r,i.y),r+=e.measureText(o.text).width}},inherit(E,T),E.prototype.extraData=function(e){var t=e[1],i=e[2],r=e[3],n=e[4];return{standardized:t,reported:e[5],estimate:i,period:r,date:n}},E.prototype.afterUpdate=function(e,t,i,r){var n=this._study.getEstimate();if(n){var o=n.value.slice();o[4]*=1e3,this.addLollipop(e,t,i,r,n.index,o)}},E.prototype.createText=function(t,i){var r=t.standardized,n=t.reported,o=t.estimate,s=null!=r,a=null!=n,l=null!=o;if(i.addTextLine(window.t("Earnings")),s&&i.addTextLine(window.t("Standardized")+": "+c(r)),a&&i.addTextLine(window.t("As reported")+": "+c(n)),l&&(s?i.addTextLine($.t("Estimate")+": "+c(o)):i.addTextLine($.t("Estimate")+": "+c(o),{fontWeight:"bold"})),s&&l){var u=r-o;if(null!=u){var h=u>0?"#238853":"#DD5538",d=100*Math.abs(u/o),p=c(u);isFinite(d)&&(p+=" ("+this._percentageFormatter.format(d)+")"),i.addMulticolorTextLine([{text:$.t("Surprise")+": ",color:"black"},{text:p,color:h}])}}i.addTextLine($.t("Date")+": "+this._formatDate(t.date)),t.period&&i.addTextLine($.t("Period Ending")+": "+e.unix(t.period).format("MMM YYYY"))},E.prototype.showBarLine=function(){return!this._model.mainSeries().properties().esdShowBreaks.value()},E.prototype.renderer=function(e,t){var i=T.prototype.renderer.call(this,e,t);if(null===i)return null;var r=this._model.mainSeries().properties();if(r.esdShowBreaks.value()){var n=r.esdBreaksStyle.color.value(),o=r.esdBreaksStyle.style.value(),s=r.esdBreaksStyle.width.value();for(var a in this._lollipops)if(this._lollipops.hasOwnProperty(a)){var l=this._lollipops[a];if(l.visible){
var c=this.defaultStyle;l.hovered&&(c=this.hoveredStyle);var u={width:t,height:e,color:n,linestyle:o,linewidth:s,x:l.basePoint.x,top:0,bottom:l.basePoint.y-c.lollipop.circleHeight-c.lollipop.radius},h=new b;h.setData(u),i.insert(h)}}}return i},inherit(L,T),L.prototype.extraData=function(e){var t=e[1];return{numerator:e[2],denominator:t,date:e[3]}},L.prototype.createText=function(e,t){$.isNumeric(e.numerator)&&$.isNumeric(e.denominator)&&t.addTextLine($.t("Split")+": "+e.numerator+"/"+e.denominator,{fontWeight:"bold"}),t.addTextLine($.t("Date")+": "+this._formatDate(e.date))},inherit(O,T),O.prototype.extraData=function(e){return{grossDividends:e[1],netDividends:e[3],date:e[2]}},O.prototype.createText=function(e,t){var i=+e.grossDividends,r=+e.netDividends;t.addTextLine(window.t("Dividends")),isFinite(r)&&0!==r&&t.addTextLine(window.t("Net")+": "+c(r)),isFinite(i)&&t.addTextLine(window.t("Gross")+": "+c(i)),t.addTextLine($.t("Date")+": "+this._formatDate(e.date))},t.ESDPaneView=T,t.EarningsPaneView=E,t.DividendsPaneView=O,t.SplitsPaneView=L}).call(this,i("ldgD"))},vKju:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor" transform="translate(3 4)"><circle cx="10.5" cy="10.5" r="8"/><path d="M7 10.5h3.5V5M7.223 3.24A3 3 0 1 0 3.23 7.218m14.565-.011a3 3 0 1 0-4.019-3.966"/></g></svg>'},vPbs:function(e,t,i){"use strict";i.r(t),i.d(t,"CHART_WIDGET_COLLECTION_SERVICE",(function(){return o})),i.d(t,"chartWidgetCollectionService",(function(){return s})),i.d(t,"CollectionViewMode",(function(){return r}));var r,n=i("eqEH"),o={id:"ChartWidgetCollectionService"};function s(){return Object(n.a)(o)?Object(n.c)(o):null}!function(e){e.Multichart="multichart",e.ForceFullscreen="force-fullscreen"}(r||(r={}))},vTIA:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}));var r,n={showPositions:!1,showOrders:!1,showExecutions:!1,extendLeft:!1,lineLength:0,lineWidth:0,lineStyle:0};!function(e){e[e.Background=0]="Background",e[e.Foreground=1]="Foreground"}(r||(r={}))},vaiT:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return o})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return c}));var r,n,o,s=i("tqok"),a=i("hsV8");function l(e,t){if(e.x>=t.length)return null;var i=t[e.x];return i===s.INVALID_TIME_POINT_INDEX?null:{x:i,y:e.y,yloc:e.yl,text:e.t,style:e.st,size:e.sz,colorIndex:e.ci,textColorIndex:e.tci,textAlign:e.ta||r.Center,tooltip:e.tt||""}}function c(e,t,i){return{id:t,x:Object(a.ensureTimePointIndexIndex)(i.indexOf(e.x)),y:e.y,yl:e.yloc,t:e.text,st:e.style,sz:e.size,ci:e.colorIndex,tci:e.textColorIndex,ta:e.textAlign,tt:e.tooltip}}!function(e){e.Left="left",e.Center="center",e.Right="right"}(r||(r={})),function(e){e.AboveBar="ab",e.BelowBar="bl",e.Price="pr"}(n||(n={})),function(e){e.Xcross="xcr",e.Cross="cr",e.Triangleup="tup",e.Triangledown="tdn",e.Flag="flg",e.Circle="cir",e.Arrowup="aup",e.Arrowdown="adn",
e.LabelUp="lup",e.LabelDown="ldn",e.LabelLeft="llf",e.LabelRight="lrg",e.LabelCenter="lcn",e.LabelLeftUp="luplf",e.LabelLeftDown="llwlf",e.LabelRightUp="luprg",e.LabelRightDown="llwrg",e.Square="sq",e.Diamond="dia",e.None="n"}(o||(o={}))},vdSZ:function(e,t,i){"use strict";i.r(t),i.d(t,"CrosshairDataWindowView",(function(){return a}));var r=i("mrSG"),n=i("ivNn"),o=i("4miz"),s=window.t("n/a"),a=function(e){function t(t){var i=e.call(this)||this;return i._invalidated=!0,i._dateItem=new o.DataWindowItem(window.t("Date"),""),i._timeItem=new o.DataWindowItem(window.t("Time"),""),i._model=t,i._items.push(i._dateItem),i._items.push(i._timeItem),i}return Object(r.__extends)(t,e),t.prototype.update=function(){this._invalidated=!0},t.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},t.prototype._updateImpl=function(){var e=this._model.mainSeries().isDWM();if(this._timeItem.setVisible(!e),this._timeItem.setValue(s),this._dateItem.setValue(s),!this._model.timeScale().isEmpty()){var t=this._model.crossHairSource().appliedIndex();if(!Object(n.isNumber)(t)){var i=this._model.mainSeries().data().last();if(null===i)return;t=i.index}var r=this._model.timeScale().indexToUserTime(t);null!==r&&(this._dateItem.setValue(this._model.dateFormatter().format(r)),e||this._timeItem.setValue(this._model.timeFormatter().format(r)))}},t}(o.DataWindowView)},vhe3:function(e,t,i){"use strict";i.r(t),i.d(t,"enable",(function(){return a})),i.d(t,"referenceToTradingView",(function(){return l}));var r,n=i("JWMC"),o=i("e45J"),s=i("Kxc7");function a(e,t){r=e,t=t||"aggressive",s.enable("referral_program_for_widget_owners"),s.enable("referral_program_policy_"+t),Object(n.trackEvent)("Referral program enabled",t)}function l(){var e="https://www.tradingview.com";return r?e+"?aff_id="+r+"&"+Object(o.buildUtmQueryStringFromUrlParams)(!1):e+Object(o.buildUtmQueryStringFromUrlParams)(!0)}},vopJ:function(e,t,i){"use strict";var r=i("4O8T"),n=i("e3/o"),o=i("IWXC").getQuoteSessionInstance,s=i("txPx").getLogger("Chart.EarningsEstimates");function a(){this.cache={}}function l(e){this.cache=e}a.prototype.now=function(){return(new Date).getTime()},a.prototype.put=function(e,t,i,r){var n=this.cache[e];n&&clearTimeout(n.timeout);var o=i+this.now(),s={value:t,expire:o};if(!isNaN(o)){var a=setTimeout(function(){var t=this.cache[e];this.del(e),"function"==typeof r&&t&&r(e,t.value)}.bind(this),i);s.timeout=a}this.cache[e]=s},a.prototype.del=function(e){delete this.cache[e]},a.prototype.get=function(e){var t=this.cache[e];if(void 0!==t){if(isNaN(t.expire)||t.expire>=this.now())return t.value;this.del(e)}return null},inherit(l,r),l.prototype.maxRetryCount=1,l.prototype.retryDelay=5e3,l.prototype.itemExpired=function(e,t){this.emit("expired",t)},l.prototype.getKey=function(e,t){return e+"_"+t},l.prototype.requestSymbol=function(e,t,i){var r=this.getKey(e,t),a=this.cache.get(r);if(a)a.pending||this.emit("data",a,i);else{this.cache.put(r,{exchange:e,symbol:t,pending:!0},36e5)
;var l="est-"+n.guid(),c=e.toUpperCase()+":"+t.toUpperCase(),u=o("full");s.logNormal("Requesting estimates for "+c),u.subscribe(l,c,function(i,n){var o=i&&i.values;if(o){if(!1===o.fundamental_data)return s.logNormal('Unsubscribe from quotes due symbol "'+c+'" has no fundamental data'),void h();if(void 0!==o.type&&"stock"!==o.type)return s.logNormal('Unsubscribe from quotes due symbol "'+c+'" is not stock'),void h();if(void 0!==o.earnings_release_next_date&&void 0!==o.earnings_per_share_forecast_next_fq){var a={date:1e3*o.earnings_release_next_date,alignedDate:o.earnings_release_next_aligned_date,estimate:o.earnings_per_share_forecast_next_symbol_currency_fq,period:1e3*o.earnings_release_next_calendar_date,symbol:t,exchange:e};s.logNormal('Next earnings release date for "'+c+'" is '+o.earnings_release_next_date),this.cache.put(r,a,36e5,this.itemExpired.bind(this)),this.emit("data",a),h()}}}.bind(this))}function h(){u.unsubscribe(l,c)}};var c=new l(new a);function u(e){this.currentSymbol=null,this.cache=e,this.onDataHandler=this.onData.bind(this),this.onExpiredHandler=this.onExpired.bind(this),this.cache.on("data",this.onDataHandler),this.cache.on("expired",this.onExpiredHandler)}inherit(u,r),u.prototype.onData=function(e,t){t&&t!==this||this.isCurrentSymbol(e)&&this.emit("data",e)},u.prototype.onExpired=function(e){this.isCurrentSymbol(e)&&this.setSymbol(e.exchange,e.symbol)},u.prototype.isCurrentSymbol=function(e){return!(!this.currentSymbol||!e)&&(this.currentSymbol.exchange===e.exchange&&this.currentSymbol.symbol===e.symbol)},u.prototype.resetSymbol=function(){this.currentSymbol=null},u.prototype.setSymbol=function(e,t){e=e.toLowerCase(),t=t.toLowerCase(),this.currentSymbol={exchange:e,symbol:t},this.cache.requestSymbol(this.currentSymbol.exchange,this.currentSymbol.symbol,this)},u.prototype.destroy=function(){this.cache.off("data",this.onDataHandler),this.cache.off("expired",this.onExpiredHandler)},e.exports.createEstimatesProvider=function(){return new u(c)}},vpQ4:function(e,t,i){"use strict";function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){r(e,t,i[t])}))}return e}i.d(t,"a",(function(){return n}))},vq8G:function(e,t,i){"use strict";i.r(t),i.d(t,"SelectionRenderer",(function(){return s}));var r=i("VdBB"),n=i("//lt"),o=i("f6yo");var s=function(){function e(e){this._data=e||null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e,t){if(null!==this._data&&this._data.visible){var i=t.pixelRatio;e.strokeStyle=void 0!==this._data.color?this._data.color:"#1E88E5",e.lineCap="butt";var r=Math.max(1,Math.floor(i));e.lineWidth=r;for(var n,o=this._data.vertOffset||0,s=0;s<this._data.points.length;++s){
var a=this._data.points[s];(n=a,Number.isFinite(n.x)&&Number.isFinite(n.y))&&(e.fillStyle=this._data.bgColors[s],this._drawMarker(e,a,o,r,i))}}},e.prototype.hitTest=function(e){if(!this._data||!this._data.visible)return null;for(var t=0;t<this._data.points.length;t++){var i=this._data.points[t];if(i.subtract(e).length()<=5.5){var o=void 0!==this._data.pointsCursorType?this._data.pointsCursorType[t]:n.PaneCursorType.Default;return new r.HitTestResult(this._data.hittestResult,{pointIndex:i.data,cursorType:o})}}return null},e.prototype.doesIntersectWithBox=function(e){return!!this._data&&this._data.points.some((function(t){return Object(o.pointInBox)(t,e)}))},e.prototype._drawMarker=function(e,t,i,r,n){var o=Math.round(3.5*n*2);o%2!=r%2&&(o+=1);var s=Math.round(o+2*(.5*r+.75*n));s%2!=r%2&&(s+=1);var a=Math.round(t.x*n),l=Math.round((t.y+i)*n),c=r%2/2;e.beginPath(),e.arc(a+c,l+c,s/2,0,2*Math.PI,!0),e.closePath(),e.fill(),e.beginPath(),e.arc(a+c,l+c,o/2,0,2*Math.PI,!0),e.closePath(),e.stroke()},e}()},vuIU:function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}i.d(t,"a",(function(){return n}))},w4Ji:function(e,t,i){"use strict";function r(e){var t=new Map;return e.plots.forEach((function(e,i){t.set(e.id,(function(e){return e[i+1]}))})),t}function n(e,t){return null==e[t]}i.r(t),i.d(t,"studyPlotFunctionMap",(function(){return r})),i.d(t,"studyEmptyPlotValuePredicate",(function(){return n}))},w9cH:function(e,t,i){"use strict";function r(e){if(e instanceof Error)return e.stack||e.message;try{return e.outerHTML.slice(0,1024)}catch(t){}try{if(void 0!==e)return JSON.stringify(e).slice(0,1024)}catch(i){}return String(e)}function n(){window.__tv_js_errors||(window.__tv_js_errors=[]),window.addEventListener("error",(function(e){var t=(new Date).toISOString();window.__tv_js_errors.push(t+" "+(e.message||"JS error")+". "+(e.filename||"<unknown url>")+", line "+e.lineno+", col "+e.colno+".\nError: "+r(e.error))}),!1),window.addEventListener("unhandledrejection",(function(e){var t=(new Date).toISOString();window.__tv_js_errors.push(t+" Unhandled rejection.\nReason: "+r(e.reason))}),!1),document.addEventListener("securitypolicyviolation",(function(e){var t,i,n=(new Date).toISOString(),o="report"===e.disposition?"CSP report-only":"CSP violation";window.__tv_js_errors.push(n+" "+o+": "+(e.violatedDirective||e.effectiveDirective)+". "+(e.sourceFile||"<unknown url>")+", line "+(null!==(t=e.lineno)&&void 0!==t?t:e.lineNumber)+", col "+(null!==(i=e.colno)&&void 0!==i?i:e.columnNumber)+".\nBlocked URI: "+(e.blockedURL||e.blockedURI)+"\nSample: "+e.sample+"\nTarget: "+r(e.target))}),!1)}i.r(t),i.d(t,"install",(function(){return n}))},wFwD:function(e,t,i){"use strict";i.r(t),i.d(t,"trackStudies",(function(){return s}));var r=i("0UyP"),n=i("0YCj"),o=i.n(n);function s(e,t){
var i=e.metaInfo(),n=!e.isPine()||e.isStandardPine()?i.description:i.scriptIdPart,s=i.productId,a=o.a.isScriptStrategy(i),l=window.user&&window.user.pro_plan||"";Object(r.getTracker)().then((function(e){e&&e.trackStudiesAnalytics(n,s,t,a,l)}))}},wGNx:function(e,t,i){"use strict";var r;i.r(t),i.d(t,"RiskRewardPointIndex",(function(){return r})),function(e){e[e.Entry=0]="Entry",e[e.Close=1]="Close",e[e.ActualEntry=2]="ActualEntry",e[e.ActualClose=3]="ActualClose"}(r||(r={}))},wHzE:function(e,t,i){"use strict";var r=i("Eyy1").ensureNotNull,n=i("dJ3D"),o=i("0F0w").ChartSession,s=i("txPx").getLogger("Chart.Snapshot"),a=i("cPgM").ScaledPaneRenderer,l=i("YWnQ").SymbolErrorPermissionDeniedReason,c=i("YWnQ").permissionDenied;function u(){a.call(this),this._data=null,this._colors=null}function h(e,t,i){this._series=e,this._lastBar=t,this._direction=i,this._renderer=new u}inherit(u,a),u.prototype.setData=function(e){this._data=e},u.prototype.setPredictCode=function(e){this._colors=this.getBackgroundColor(e)},u.prototype.hitTest=function(){return null},u.prototype.getBackgroundColor=function(e){return[{background:"rgba(255, 158, 171, 0.3)",line:"#7E202F"},{background:"rgba(244, 255, 158, 0.3)",line:"#EBFF3F"},{background:"rgba(195, 255, 160, 0.3)",line:"#308020"}][e+1]},u.prototype._drawImpl=function(e){if(null!==this._data&&null!==this._colors){e.fillStyle=this._colors.background,e.fillRect(Math.max(0,this._data.x),0,this._data.width,this._data.height),e.strokeStyle=this._colors.line,e.beginPath(),e.lineWidth=1;var t=Math.round(this._data.x);e.moveTo(t,0),e.lineTo(t,this._data.height),e.stroke()}},h.prototype.update=function(){this._x=this._series.m_model.timeScale().indexToCoordinate(this._lastBar)+.5*this._series.m_model.timeScale().barSpacing()+1},h.prototype.renderer=function(){var e={x:this._x,height:this._series.priceScale().height(),width:this._series.m_model.timeScale().width()},t=this._series.data().bars(),i=r(t.last()).value[TradingView.CLOSE_PLOT]>r(t.valueAt(this._lastBar))[TradingView.CLOSE_PLOT]?1:-1,n=0;return 1===this._direction?n=i:2===this._direction&&(n=-1*i),this._renderer.setData(e),this._renderer.setPredictCode(n),this._renderer},t.FutureBarsPaneView=h,t.requestChartSnapshotBars=function(e,t){var i=e.model(),a=i.mainSeries().interval(),u=r(i.mainSeries().bars().last()).value[TradingView.TIME_PLOT];if("function"!=typeof t&&(t=function(){}),null==e._currentRequest){var h=i.timeScale().rightOffset();if(!(h<0||e._haveNoMoreData)){var d=i.mainSeries().getSymbolString(),p=Math.max(Math.ceil(h),100),f=!1,_=new n(new window.WSBackendConnectionCtor(window.WEBSOCKET_HOST,{pingRequired:window.WS_HOST_PING_REQUIRED,proHost:window.WEBSOCKET_PRO_HOST,reconnectHost:window.WEBSOCKET_HOST_FOR_RECONNECT}));_.setLoadNew(!0),e._currentRequest=new o(_),e._currentRequest.isConnected().subscribe(v),e._currentRequest.connect((function(e){if("timescale_update"===e.method){var t=r(i.mainSeries().bars().lastIndex()),n=r(i.timeScale().indexToUserTime(t)).valueOf()/1e3,o=i.timeScale().points(),s=o.valueAt(t)
;if(e.params.changes.length>0){var a=e.params.changes[0]===s;a||(n+=1),i.timeScale().points().remove(t+1),i.timeScale().addTail(e,n,a);var l=o.lastIndex(),c=o.valueAt(l);!function(e,t,i){for(var r=e.allLineTools(),n=r.length,o=e.timeScale(),s=0;s<n;++s){for(var a=r[s],l=0,c=a.points(),u=c.length,h=0;h<u;++h){var d=c[h];d.time>t&&d.time<=i&&(d.index=o.points().indexOf(d.time),++l)}l>0&&a.updateAllViews()}}(i.model(),s,c)}}}))}}else s.logDebug("requestSnapshotBars: unexpected requestSnapshotBars");function m(n){e._currentRequest.requestFirstBarTime(n,a,(function(o){if(o.p[1]>u)return e._currentRequest.isConnected().unsubscribe(v),e._currentRequest.destroy(),delete e._currentRequest,_.disconnect(),e._haveNoMoreData=!0,void t(!0);!function(n){var o=1;e._haveNoMoreData=!0;var s=!1;e._currentRequest.createSeries("series_id","turnaround",n,a,["bar_count",u-1,-p],null,(function(r){switch(r.method){case"data_update":if(!r.params.plots.length)return;var n=r.params.plots[0].value[TradingView.TIME_PLOT],a=r.params.plots;e._haveNoMoreData=a.length<p,s=0===a.length,f=n===u,i.mainSeries().fixLastBar(e._chartDirection),i.mainSeries().bars().addTail(a,f),i.mainSeries().parseJapProjBars(r.params.nonseries).then((function(e){i.mainSeries().m_data.m_nsBars=e.nsBars,i.mainSeries().m_data.lastProjectionPrice=e.lastPrice,i.model().recalculateAllPanes(),i.model().updateSource(i.mainSeries()),i.model().updateLineTools(),i.model().updateTimeScaleBaseIndex(),i.timeScale().scrollToOffsetAnimated(h)}));break;case"series_completed":0===--o&&(e._currentRequest.isConnected().unsubscribe(v),e._currentRequest.destroy(),delete e._currentRequest,_.disconnect(),t())}}));for(var l=i.dataSources(),c={},d=r(i.mainSeries().bars().lastIndex()),m=function(r){var n=r.method;if("study_completed"===n||"study_error"===n)0===--o&&(e._currentRequest.isConnected().unsubscribe(v),e._currentRequest.destroy(),delete e._currentRequest,_.disconnect(),t());else if("data_update"===n&&!s){var a=r.params.customId;c[a].replaceData(d,f,r.params.plots),i.model().recalculateAllPanes(),i.model().updateSource(i.mainSeries())}},g=0;g<l.length;g++){var y=l[g];if(TradingView.isInherited(y.constructor,TradingView.Study)&&-1!==["Volume","Compare","Overlay"].indexOf(y.metaInfo().shortId)){var b="study_"+g,S=y.metaInfo().fullId+"!";c[b]=y,o++;var w=y.inputs();e._currentRequest.createStudy(b,"turnaround","series_id",S,w,m)}}}(n)}))}function v(){var t=i.model().timezone();t||(t=defaults("chartproperties").mainSeriesProperties.timezone),e._currentRequest.switchTimezone(t);var r="symbol_id",n=function(t){switch(t.method){case"symbol_error":if(t.params[1]===c){var o;switch(t.params[2]){case l.ExtendedHours:i.mainSeries().properties().extendedHours.setValue(!1),o=i.mainSeries().getSymbolString();break;case l.Symbol:o=t.params[3];break;default:o=t.params[2]}o&&(r+="_re",e._currentRequest.resolveSymbol(r,o,n))}break;default:m(r)}};e._currentRequest.resolveSymbol(r,d,n)}}},wOSo:function(e,t,i){"use strict";i.r(t),i.d(t,"QuotesProvider",(function(){return a}))
;var r=i("IWXC"),n=i("aIyQ"),o=i.n(n),s=i("e3/o"),a=function(){function e(){this._quotes=null,this._quoteSessionSymbol=null,this._quoteSessionClientId="",this._quotesUpdate=new o.a}return e.prototype.setQuotesSessionSymbol=function(e){this._quoteSessionSymbol!==e&&(this._quoteSessionClientId||(this._quoteSessionClientId="series-"+Object(s.guid)()),this._unsubscribeQuoteSession(),e&&(this._quoteSessionSymbol=e,Object(r.getQuoteSessionInstance)("full").subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))))},e.prototype.quotesUpdate=function(){return this._quotesUpdate},e.prototype.quotes=function(){return this._quotes},e.prototype.destroy=function(){this._unsubscribeQuoteSession()},e.prototype._onUpdate=function(e,t){this._quotes=e&&e.values||null,t&&t.values&&this._quotesUpdate.fire(e,t)},e.prototype._unsubscribeQuoteSession=function(){this._quoteSessionSymbol&&(Object(r.getQuoteSessionInstance)("full").unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes=null)},e}()},wZIs:function(e,t,i){"use strict";var r=i("dfhE"),n=i("rCHB").LineToolPitchforkStyle,o=i("Ye2/").LineToolBarsPatternMode,s=i("23IT").LineStudyPlotStyle,a=i("8OdW"),l=i("oXaB").PriceAxisLastValueMode,c=i("4o++").MagnetMode,u=i("a7Ha").LineEnd,h=i("4vW/").ColorType,d=i("bKFv").StatsPosition,p=i("KUek").sessionsPreferencesDefault,f=i("txPx").getLogger("Chart.Defaults"),_=i("zDbI").CHART_FONT_FAMILY,m=function(e){var t=function(e,t){return{color:e,visible:t}},i=function(e,t,i){return{coeff:e,color:t,visible:i}},f=function(e,t,i,r,n){return{coeff:e,color:t,visible:i,linestyle:void 0===r?CanvasEx.LINESTYLE_SOLID:r,linewidth:void 0===n?1:n}},m=function(e,t,i){return{color:e,width:i,visible:t}},v=function(e,t,i,r,n){return{color:e,visible:t,width:i,x:r,y:n}},b=function(e,t,i,r,n,o){return{coeff1:e,coeff2:t,color:i,visible:r,linestyle:void 0===n?CanvasEx.LINESTYLE_SOLID:n,linewidth:void 0===o?1:o}};if(void 0===TradingView.defaultProperties){var S;switch(window.locale){case"ar_AE":S="Asia/Dubai";break;case"au":S="Australia/Sydney";break;case"br":S="America/Sao_Paulo";break;case"ca":S="America/Toronto";break;case"de_DE":case"it":S="Europe/Berlin";break;case"es":S="Europe/Madrid";break;case"fa_IR":S="Asia/Tehran";break;case"fr":case"sv_SE":S="Europe/Paris";break;case"he_IL":case"tr":S="Europe/Athens";break;case"hu_HU":case"pl":S="Europe/Warsaw";break;case"id":case"th_TH":case"vi_VN":S="Asia/Bangkok";break;case"in":S="Asia/Kolkata";break;case"ja":case"kr":S="Asia/Tokyo";break;case"ms_MY":S="Asia/Singapore";break;case"ru":S="Europe/Moscow";break;case"uk":S="Europe/London";break;case"zh_CN":case"zh_TW":S="Asia/Shanghai";break;default:S="Etc/UTC"}TradingView.defaultProperties={chartproperties:{timezone:S,priceScaleSelectionStrategyName:"auto",dataWindowProperties:{background:"rgba( 255, 254, 206, 0.2)",border:"rgba( 96, 96, 144, 1)",font:"Verdana",fontBold:!1,fontItalic:!1,fontSize:10,transparency:80,visible:!0},paneProperties:{backgroundType:h.Solid,background:"#ffffff",
backgroundGradientStartColor:"#ffffff",backgroundGradientEndColor:"#ffffff",vertGridProperties:{color:"#F0F3FA",style:CanvasEx.LINESTYLE_SOLID},horzGridProperties:{color:"#F0F3FA",style:CanvasEx.LINESTYLE_SOLID},crossHairProperties:{color:"#758696",style:CanvasEx.LINESTYLE_DASHED,transparency:0,width:1},topMargin:10,bottomMargin:8,axisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,indexedTo100:!1,log:!1,logDisabled:!1,alignLabels:!0,isInverted:!1},legendProperties:{showStudyArguments:!0,showStudyTitles:!0,showStudyValues:!0,showSeriesTitle:!0,showSeriesOHLC:!0,showLegend:!0,showBarChange:!0,showBackground:!0,backgroundTransparency:50,wrapText:!1}},scalesProperties:{backgroundColor:"#ffffff",lineColor:"#E0E3EB",textColor:"#131722",fontSize:12,scaleSeriesOnly:!1,showSeriesLastValue:!0,seriesLastValueMode:l.LastValueAccordingToScale,showSeriesPrevCloseValue:!1,showStudyLastValue:!1,showSymbolLabels:!1,showStudyPlotLabels:!1,showBidAskLabels:!1,showPrePostMarketPriceLabel:!0,showFundamentalNameLabel:!1,showFundamentalLastValue:!1,barSpacing:a.DEFAULT_BAR_SPACING,showCurrency:!0},mainSeriesProperties:{style:r.STYLE_CANDLES,esdShowDividends:!0,esdShowSplits:!0,esdShowEarnings:!0,esdShowBreaks:!1,esdBreaksStyle:{color:"rgba( 235, 77, 92, 1)",style:CanvasEx.LINESTYLE_DASHED,width:1},esdFlagSize:2,showCountdown:!0,bidAsk:{visible:!1,lineStyle:CanvasEx.LINESTYLE_DOTTED,lineWidth:1,bidLineColor:"#2196F3",askLineColor:"#EF5350"},prePostMarket:{visible:!0,lineStyle:CanvasEx.LINESTYLE_DOTTED,lineWidth:1,preMarketColor:"#fb8c00",postMarketColor:"#2196f3"},showInDataWindow:!0,visible:!0,showPriceLine:!0,priceLineWidth:1,priceLineColor:"",baseLineColor:"#B2B5BE",showPrevClosePriceLine:!1,prevClosePriceLineWidth:1,prevClosePriceLineColor:"rgba( 85, 85, 85, 1)",minTick:"default",extendedHours:!1,dividendsAdjustment:!1,sessVis:!1,statusViewStyle:{fontSize:16,showExchange:!0,showInterval:!0,symbolTextSource:"description"},candleStyle:{upColor:"#26a69a",downColor:"#ef5350",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350",barColorsOnPrevClose:!1,drawBody:!0},hollowCandleStyle:{upColor:"#26a69a",downColor:"#ef5350",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"#26a69a",wickDownColor:"#ef5350",drawBody:!0},haStyle:{upColor:"#26a69a",downColor:"#ef5350",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"#26a69a",wickDownColor:"#ef5350",showRealLastPrice:!1,barColorsOnPrevClose:!1,inputs:{},inputInfo:{},drawBody:!0},barStyle:{upColor:"#26a69a",downColor:"#ef5350",barColorsOnPrevClose:!1,dontDrawOpen:!1,thinBars:!0},hiloStyle:{color:"#2196f3",showBorders:!0,borderColor:"#2196f3",showLabels:!0,labelColor:"#2196f3",fontSize:7,drawBody:!0},lineStyle:{color:"#2196f3",
linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,priceSource:"close",styleType:r.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba(33, 150, 243, 0.28)",color2:"#2196f3",linecolor:"#2196f3",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,priceSource:"close",transparency:100},priceAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,indexedTo100:!1,log:!1,logDisabled:!1,isInverted:!1,alignLabels:!0},renkoStyle:{upColor:"#26a69a",downColor:"#ef5350",borderUpColor:"#26a69a",borderDownColor:"#ef5350",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",wickUpColor:"#26a69a",wickDownColor:"#ef5350",inputs:{source:"close",sources:"Close",boxSize:3,style:"ATR",atrLength:14,wicks:!0},inputInfo:{source:{name:"source"},sources:{name:"Source"},boxSize:{name:"Box size"},style:{name:"Style"},atrLength:{name:"ATR length"},wicks:{name:"Wicks"}}},pbStyle:{upColor:"#26a69a",downColor:"#ef5350",borderUpColor:"#26a69a",borderDownColor:"#ef5350",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",lb:3},inputInfo:{source:{name:"Source"},lb:{name:"Number of line"}}},kagiStyle:{upColor:"#26a69a",downColor:"#ef5350",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",style:"ATR",atrLength:14,reversalAmount:1},inputInfo:{source:{name:"Source"},style:{name:"Style"},atrLength:{name:"ATR length"},reversalAmount:{name:"Reversal amount"}}},pnfStyle:{upColor:"#26a69a",downColor:"#ef5350",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{sources:"Close",reversalAmount:3,boxSize:1,style:"ATR",atrLength:14,oneStepBackBuilding:!1},inputInfo:{sources:{name:"Source"},boxSize:{name:"Box size"},reversalAmount:{name:"Reversal amount"},style:{name:"Style"},atrLength:{name:"ATR length"},oneStepBackBuilding:{name:"One step back building"}}},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 38, 166, 154, 0.28)",topFillColor2:"rgba( 38, 166, 154, 0.05)",bottomFillColor1:"rgba( 239, 83, 80, 0.05)",bottomFillColor2:"rgba( 239, 83, 80, 0.28)",topLineColor:"rgba( 38, 166, 154, 1)",bottomLineColor:"rgba( 239, 83, 80, 1)",topLineWidth:2,bottomLineWidth:2,priceSource:"close",transparency:50,baseLevelPercentage:50},rangeStyle:{upColor:"#26a69a",downColor:"#ef5350",thinBars:!0,upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{range:10,phantomBars:!1},inputInfo:{range:{name:"Range"},phantomBars:{name:"Phantom bars"}}}},chartEventsSourceProperties:{visible:!0,futureOnly:!0,breaks:{color:"rgba(85, 85, 85, 1)",visible:!1,style:CanvasEx.LINESTYLE_DASHED,width:1}},tradingProperties:{showPositions:!0,showOrders:!0,showExecutions:!0,extendLeft:!0,lineLength:5,
lineWidth:1,lineStyle:CanvasEx.LINESTYLE_DOTTED},editorFontsList:["Verdana","Courier New","Times New Roman","Arial"],volumePaneSize:"large"},sessions:p,drawings:{magnet:!1,magnetMode:c.WeakMagnet,stayInDrawingMode:!1,drawOnAllCharts:!0},linetoolorder:{extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 255, 0, 0, 1)",lineActiveBuyColor:"rgb(64,148,232)",lineInactiveBuyColor:"rgba(64,148,232,.5)",lineActiveSellColor:"rgb(231,86,86)",lineInactiveSellColor:"rgba(231,86,86,.5)",lineStyle:"inherit",lineWidth:"inherit",bodyBorderActiveBuyColor:"rgb(64,148,232)",bodyBorderInactiveBuyColor:"rgba(64,148,232,.5)",bodyBorderActiveSellColor:"rgb(231,86,86)",bodyBorderInactiveSellColor:"rgba(231,86,86,.5)",bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextInactiveLimitColor:"rgba(38,140,2,.5)",bodyTextActiveLimitColor:"rgb(38,140,2)",bodyTextInactiveStopColor:"rgba(231,86,86,.5)",bodyTextActiveStopColor:"rgb(231,86,86)",bodyTextInactiveBuyColor:"rgba(64,148,232,.5)",bodyTextActiveBuyColor:"rgb(64,148,232)",bodyTextInactiveSellColor:"rgba(231,86,86,.5)",bodyTextActiveSellColor:"rgb(231,86,86)",bodyFontFamily:"Verdana",bodyFontSize:9,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderActiveBuyColor:"rgb(64,148,232)",quantityBorderInactiveBuyColor:"rgba(64,148,232,.5)",quantityBorderActiveSellColor:"rgb(231,86,86)",quantityBorderInactiveSellColor:"rgba(231,86,86,.5)",quantityBackgroundInactiveBuyColor:"rgba(64,148,232,.5)",quantityBackgroundActiveBuyColor:"rgb(64,148,232)",quantityBackgroundInactiveSellColor:"rgba(231,86,86,.5)",quantityBackgroundActiveSellColor:"rgb(231,86,86)",quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:9,quantityFontBold:!0,quantityFontItalic:!1,cancelButtonBorderActiveBuyColor:"rgb(64,148,232)",cancelButtonBorderInactiveBuyColor:"rgba(64,148,232,.5)",cancelButtonBorderActiveSellColor:"rgb(231,86,86)",cancelButtonBorderInactiveSellColor:"rgba(231,86,86,.5)",cancelButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",cancelButtonBackgroundTransparency:25,cancelButtonIconActiveBuyColor:"rgb(64,148,232)",cancelButtonIconInactiveBuyColor:"rgba(64,148,232,.5)",cancelButtonIconActiveSellColor:"rgb(231,86,86)",cancelButtonIconInactiveSellColor:"rgba(231,86,86,.5)",tooltip:"",modifyTooltip:"",cancelTooltip:""},linetoolposition:{extendLeft:"inherit",lineLength:"inherit",lineBuyColor:"rgb(64,148,232)",lineSellColor:"rgb(231,86,86)",lineStyle:"inherit",lineWidth:"inherit",bodyBorderBuyColor:"rgb(64,148,232)",bodyBorderSellColor:"rgb(231,86,86)",bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextPositiveColor:"rgb(38,140,2)",bodyTextNeutralColor:"rgb(100,100,100)",bodyTextNegativeColor:"rgb(231,86,86)",bodyFontFamily:"Verdana",bodyFontSize:9,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderBuyColor:"rgb(64,148,232)",quantityBorderSellColor:"rgb(231,86,86)",quantityBackgroundBuyColor:"rgb(64,148,232)",quantityBackgroundSellColor:"rgb(231,86,86)",
quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:9,quantityFontBold:!0,quantityFontItalic:!1,reverseButtonBorderBuyColor:"rgb(64,148,232)",reverseButtonBorderSellColor:"rgb(231,86,86)",reverseButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",reverseButtonBackgroundTransparency:25,reverseButtonIconBuyColor:"rgb(64,148,232)",reverseButtonIconSellColor:"rgb(231,86,86)",closeButtonBorderBuyColor:"rgb(64,148,232)",closeButtonBorderSellColor:"rgb(231,86,86)",closeButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",closeButtonBackgroundTransparency:25,closeButtonIconBuyColor:"rgb(64,148,232)",closeButtonIconSellColor:"rgb(231,86,86)",tooltip:"",protectTooltip:"",closeTooltip:"",reverseTooltip:""},linetoolexecution:{direction:"buy",arrowHeight:8,arrowSpacing:1,arrowBuyColor:"#4094e8",arrowSellColor:"#e75656",text:"",textColor:"rgba( 0, 0, 0, 1)",textTransparency:0,fontFamily:"Verdana",fontSize:10,fontBold:!1,fontItalic:!1,tooltip:""},linetoolicon:{color:"rgba( 61, 133, 198, 1)",size:40,icon:61720,angle:.5*Math.PI,scale:1},linetoolbezierquadro:{linecolor:"#2196f3",linewidth:1,fillBackground:!1,backgroundColor:"rgba(33, 150, 243, 0.2)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:u.Normal,rightEnd:u.Normal},linetoolbeziercubic:{linecolor:"#00bcd4",linewidth:1,fillBackground:!1,backgroundColor:"rgba(0, 188, 212, 0.2)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:u.Normal,rightEnd:u.Normal},linetooltrendline:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:u.Normal,rightEnd:u.Normal,showLabel:!1,horzLabelsAlign:"center",vertLabelsAlign:"bottom",font:"Verdana",textcolor:"#2196f3",fontsize:14,bold:!1,italic:!1,snapTo45Degrees:!0,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:d.Right},linetoolinfoline:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:u.Normal,rightEnd:u.Normal,font:"Verdana",showLabel:!1,horzLabelsAlign:"center",vertLabelsAlign:"bottom",textcolor:"#2196f3",fontsize:14,bold:!1,italic:!1,snapTo45Degrees:!0,alwaysShowStats:!0,showMiddlePoint:!1,showPriceRange:!0,showBarsRange:!0,showDateTimeRange:!0,showDistance:!0,showAngle:!0,statsPosition:d.Center},linetooltimecycles:{linecolor:"rgba(21, 153, 128, 1)",linewidth:1,fillBackground:!0,backgroundColor:"rgba(106, 168, 79, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolsineline:{linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooltrendangle:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,snapTo45Degrees:!0,font:"Verdana",textcolor:"rgba(33, 150, 243, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,extendRight:!1,extendLeft:!1,statsPosition:d.Right
},linetooldisjointangle:{linecolor:"rgba(0, 150, 136, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba(0, 150, 136, 0.2)",transparency:20,extendLeft:!1,extendRight:!1,leftEnd:u.Normal,rightEnd:u.Normal,font:"Verdana",textcolor:"rgba(0, 150, 136, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolflatbottom:{linecolor:"rgba(171, 71, 188, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba(171, 71, 188, 0.2)",transparency:20,extendLeft:!1,extendRight:!1,leftEnd:u.Normal,rightEnd:u.Normal,font:"Verdana",textcolor:"rgba(171, 71, 188, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolfibspiral:{counterclockwise:!1,linecolor:"rgba(0, 150, 136, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooldaterange:{linecolor:"rgba(30,136,229,1)",linewidth:1,font:_,textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba(30,136,229,0.9)",fillBackground:!0,backgroundColor:"rgba(30,136,229,0.2)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba(30,136,229,0.9)",extendTop:!1,extendBottom:!1},linetoolpricerange:{linecolor:"rgba(30,136,229,1)",linewidth:1,font:_,textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba(30,136,229,0.9)",fillBackground:!0,backgroundColor:"rgba(30,136,229,0.2)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba(30,136,229,0.9)",extendLeft:!1,extendRight:!1},linetooldateandpricerange:{linecolor:"rgba(30,136,229,1)",linewidth:1,font:_,textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba(30,136,229,0.9)",fillBackground:!0,backgroundColor:"rgba(30,136,229,0.2)",backgroundTransparency:60,borderWidth:1,drawBorder:!1,borderColor:"rgba(30,136,229,1)"},linetoolriskrewardshort:{linecolor:"rgba(120, 123, 134, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",fillBackground:!0,stopBackground:"rgba(244, 67, 54, 0.2)",profitBackground:"rgba(0, 150, 136, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25,alwaysShowStats:!1,showPriceLabels:!0},linetoolriskrewardlong:{linecolor:"rgba(120, 123, 134, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",fillBackground:!0,stopBackground:"rgba(244, 67, 54, 0.2)",profitBackground:"rgba(0, 150, 136, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25,alwaysShowStats:!1,showPriceLabels:!0},linetoolarrow:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,
extendLeft:!1,extendRight:!1,leftEnd:u.Normal,rightEnd:u.Arrow,font:"Verdana",showLabel:!1,horzLabelsAlign:"center",vertLabelsAlign:"bottom",textcolor:"#2196f3",fontsize:14,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:d.Right},linetoolray:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!0,leftEnd:u.Normal,rightEnd:u.Normal,font:"Verdana",showLabel:!1,horzLabelsAlign:"center",vertLabelsAlign:"bottom",textcolor:"#2196f3",fontsize:14,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:d.Right},linetoolextended:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!0,extendRight:!0,leftEnd:u.Normal,rightEnd:u.Normal,font:"Verdana",showLabel:!1,horzLabelsAlign:"center",vertLabelsAlign:"bottom",textcolor:"#2196f3",fontsize:14,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:d.Right},linetoolhorzline:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,font:"Verdana",textcolor:"rgba(33, 150, 243, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolhorzray:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,font:"Verdana",textcolor:"rgba(33, 150, 243, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolvertline:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLine:!0,showTime:!0,showLabel:!1,horzLabelsAlign:"right",vertLabelsAlign:"top",font:"Verdana",textcolor:"#2196f3",textOrientation:"vertical",fontsize:14,bold:!1,italic:!1},linetoolcrossline:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showTime:!0},linetoolcirclelines:{trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolfibtimezone:{horzLabelsAlign:"right",vertLabelsAlign:"bottom",baselinecolor:"rgba( 128, 128, 128, 1)",linecolor:"rgba( 0, 85, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showLabels:!0,font:_,fillBackground:!1,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:f(0,"rgba(120, 123, 134, 1)",!0),level2:f(1,"rgba(33, 150, 243, 1)",!0),level3:f(2,"rgba(33, 150, 243, 1)",!0),level4:f(3,"rgba(33, 150, 243, 1)",!0),level5:f(5,"rgba(33, 150, 243, 1)",!0),level6:f(8,"rgba(33, 150, 243, 1)",!0),level7:f(13,"rgba(33, 150, 243, 1)",!0),level8:f(21,"rgba(33, 150, 243, 1)",!0),level9:f(34,"rgba(33, 150, 243, 1)",!0),level10:f(55,"rgba(33, 150, 243, 1)",!0),
level11:f(89,"rgba(33, 150, 243, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltext:{color:"#2196f3",font:"Verdana",fontsize:14,fillBackground:!1,backgroundColor:"rgba( 91, 133, 191, 0.3)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,fixedSize:!0,wordWrap:!1,wordWrapWidth:200},linetooltextabsolute:{color:"#2196f3",font:"Verdana",fontsize:14,fillBackground:!1,backgroundColor:"rgba( 155, 190, 213, 0.3)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,fixedSize:!1,wordWrap:!1,wordWrapWidth:200},linetoolballoon:{color:"#ffffff",backgroundColor:"rgba(156, 39, 176, 0.7)",borderColor:"rgba(156, 39, 176, 0.0)",fontsize:16,fontWeight:"normal",font:"Arial",transparency:30},linetoolbrush:{linecolor:"#00bcd4",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,smooth:5,fillBackground:!1,backgroundColor:"rgba(0, 188, 212, 0.5)",transparency:50,leftEnd:u.Normal,rightEnd:u.Normal},linetoolpolyline:{linecolor:"#7e57c2",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba(126, 87, 194, 0.2)",transparency:50,filled:!1},linetoolpath:{lineColor:"#2196f3",lineWidth:2,lineStyle:CanvasEx.LINESTYLE_SOLID,leftEnd:u.Normal,rightEnd:u.Arrow},linetoolarrowmarkleft:{color:"rgba( 120, 120, 120, 1)",arrowColor:"#2196F3",fontsize:20,font:"Verdana"},linetoolarrowmarkup:{color:"rgba( 120, 120, 120, 1)",arrowColor:"#009688",fontsize:20,font:"Verdana"},linetoolarrowmarkright:{color:"rgba( 120, 120, 120, 1)",arrowColor:"#2196F3",fontsize:20,font:"Verdana"},linetoolarrowmarkdown:{color:"rgba( 120, 120, 120, 1)",arrowColor:"#E53935",fontsize:20,font:"Verdana"},linetoolflagmark:{flagColor:"#2196F3"},linetoolnote:{markerColor:"#2196f3",textColor:"#ffffff",backgroundColor:"rgba(33, 150, 243, 0.7)",backgroundTransparency:0,borderColor:"#2196f3",font:"Arial",fontSize:20,bold:!1,italic:!1,fixedSize:!0},linetoolnoteabsolute:{markerColor:"#2196f3",textColor:"#ffffff",backgroundColor:"rgba(33, 150, 243, 0.7)",backgroundTransparency:0,borderColor:"#2196f3",font:"Arial",fontSize:20,bold:!1,italic:!1,fixedSize:!0},linetoolpricelabel:{color:"#ffffff",backgroundColor:"#2196f3",borderColor:"#2196f3",fontWeight:"bold",fontsize:14,font:_,transparency:0},linetoolarrowmarker:{backgroundColor:"#1E88E5",textColor:"#1E88E5",font:_,bold:!0,italic:!1,fontsize:16,showLabel:!0},linetoolrectangle:{color:"#9c27b0",fillBackground:!0,backgroundColor:"rgba(156, 39, 176, 0.2)",linewidth:1,snapTo45Degrees:!0,transparency:50,showLabel:!1,horzLabelsAlign:"left",vertLabelsAlign:"bottom",textColor:"#9c27b0",fontSize:14,bold:!1,italic:!1,extendLeft:!1,extendRight:!1},linetoolrotatedrectangle:{color:"#4caf50",fillBackground:!0,backgroundColor:"rgba(76, 175, 80, 0.2)",transparency:50,linewidth:1,snapTo45Degrees:!0},linetoolellipse:{color:"#e91e63",fillBackground:!0,backgroundColor:"rgba(233, 30, 99, 0.2)",transparency:50,linewidth:1},linetoolarc:{color:"#ab47bc",
fillBackground:!0,backgroundColor:"rgba(171, 71, 188, 0.2)",transparency:50,linewidth:1},linetoolprediction:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,sourceBackColor:"rgba(33, 150, 243, 1)",sourceTextColor:"rgba(255, 255, 255, 1)",sourceStrokeColor:"rgba(33, 150, 243, 1)",targetStrokeColor:"rgba(33, 150, 243, 1)",targetBackColor:"rgba(33, 150, 243, 1)",targetTextColor:"rgba(255, 255, 255, 1)",successBackground:"rgba(76, 175, 80, 1)",successTextColor:"rgba(255, 255, 255, 1)",failureBackground:"rgba(244, 67, 54, 1)",failureTextColor:"rgba(255, 255, 255, 1)",intermediateBackColor:"rgba(234, 210, 137, 1)",intermediateTextColor:"rgba(109, 77, 34, 1)",transparency:10,centersColor:"rgba( 32, 32, 32, 1)"},linetooltriangle:{color:"#f57c00",fillBackground:!0,backgroundColor:"rgba(245, 124, 0, 0.2)",transparency:50,linewidth:1},linetoolcallout:{color:"#ffffff",backgroundColor:"rgba(0, 151, 167, 0.7)",transparency:50,linewidth:1,fontsize:16,font:"Verdana",bordercolor:"rgba(0, 151, 167, 1)",bold:!1,italic:!1,wordWrap:!1,wordWrapWidth:200},linetoolparallelchannel:{linecolor:"rgba(33, 150, 243, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,fillBackground:!0,backgroundColor:"rgba(33, 150, 243, 0.2)",transparency:20,showMidline:!0,midlinecolor:"rgba(33, 150, 243, 1)",midlinewidth:1,midlinestyle:CanvasEx.LINESTYLE_DASHED},linetoolelliottimpulse:{degree:7,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliotttriangle:{degree:7,showWave:!0,color:"rgba( 255, 152, 0, 1)",linewidth:1},linetoolelliotttriplecombo:{degree:7,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolelliottcorrection:{degree:7,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliottdoublecombo:{degree:7,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolbarspattern:{color:"rgba(33, 150, 243, 1)",mode:o.Bars,mirrored:!1,flipped:!1},linetoolghostfeed:{averageHL:20,variance:50,candleStyle:{upColor:"rgba(178, 223, 219, 1)",downColor:"rgba(239, 154, 154, 1)",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"rgba(0, 150, 136, 1)",borderDownColor:"rgba(244, 67, 54, 1)",wickColor:"rgba(120, 123, 134, 1)"},transparency:50},study:{inputs:{},styles:{},palettes:{},bands:{},area:{},graphics:{},showInDataWindow:!0,visible:!0,showStudyArguments:!0,precision:"default"},linetoolpitchfork:{fillBackground:!0,transparency:80,style:n.Original,median:{visible:!0,color:"rgba(244, 67, 54, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},extendLines:!1,level0:f(.25,"rgba(255, 183, 77, 1)",!1),level1:f(.382,"rgba(129, 199, 132, 1)",!1),level2:f(.5,"rgba(76, 175, 80, 1)",!0),level3:f(.618,"rgba(0, 150, 136, 1)",!1),level4:f(.75,"rgba(100, 181, 246, 1)",!1),level5:f(1,"rgba(33, 150, 243, 1)",!0),level6:f(1.5,"rgba(156, 39, 176, 1)",!1),level7:f(1.75,"rgba(233, 30, 99, 1)",!1),level8:f(2,"rgba(229, 115, 115, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolpitchfan:{fillBackground:!0,transparency:80,median:{
visible:!0,color:"rgba(244, 67, 54, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:f(.25,"rgba(255, 183, 77, 1)",!1),level1:f(.382,"rgba(129, 199, 132, 1)",!1),level2:f(.5,"rgba(76, 175, 80, 1)",!0),level3:f(.618,"rgba(0, 150, 136, 1)",!1),level4:f(.75,"rgba(100, 181, 246, 1)",!1),level5:f(1,"rgba(33, 150, 243, 1)",!0),level6:f(1.5,"rgba(156, 39, 176, 1)",!1),level7:f(1.75,"rgba(233, 30, 99, 1)",!1),level8:f(2,"rgba(229, 115, 115, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolgannfan:{showLabels:!0,font:"Verdana",fillBackground:!0,transparency:80,level1:b(1,8,"rgba(255, 183, 77, 1)",!0),level2:b(1,4,"rgba(129, 199, 132, 1)",!0),level3:b(1,3,"rgba(76, 175, 80, 1)",!0),level4:b(1,2,"rgba(0, 150, 136, 1)",!0),level5:b(1,1,"rgba(100, 181, 246, 1)",!0),level6:b(2,1,"rgba(33, 150, 243, 1)",!0),level7:b(3,1,"rgba(156, 39, 176, 1)",!0),level8:b(4,1,"rgba(233, 30, 99, 1)",!0),level9:b(8,1,"rgba(229, 115, 115, 1)",!0),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolganncomplex:{fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,scaleRatio:"",showLabels:!0,labelsStyle:{font:_,fontSize:12,bold:!1,italic:!1},levels:[m("rgba(120, 123, 134, 1)",!0,1),m("rgba(255, 152, 0, 1)",!0,1),m("rgba(129, 199, 132, 1)",!0,1),m("rgba(76, 175, 80, 1)",!0,1),m("rgba(0, 150, 136, 1)",!0,1),m("rgba(120, 123, 134, 1)",!0,1)],fanlines:[v("rgba(179, 157, 219, 1)",!1,1,8,1),v("rgba(244, 67, 54, 1)",!1,1,5,1),v("rgba(120, 123, 134, 1)",!1,1,4,1),v("rgba(255, 152, 0, 1)",!1,1,3,1),v("rgba(129, 199, 132, 1)",!0,1,2,1),v("rgba(76, 175, 80, 1)",!0,1,1,1),v("rgba(0, 150, 136, 1)",!0,1,1,2),v("rgba(0, 150, 136, 1)",!1,1,1,3),v("rgba(33, 150, 243, 1)",!1,1,1,4),v("rgba(149, 117, 205, 1)",!1,1,1,5),v("rgba(179, 157, 219, 1)",!1,1,1,8)],arcs:[v("rgba(255, 152, 0, 1)",!0,1,1,0),v("rgba(255, 152, 0, 1)",!0,1,1,1),v("rgba(255, 152, 0, 1)",!0,1,1.5,0),v("rgba(129, 199, 132, 1)",!0,1,2,0),v("rgba(129, 199, 132, 1)",!0,1,2,1),v("rgba(76, 175, 80, 1)",!0,1,3,0),v("rgba(76, 175, 80, 1)",!0,1,3,1),v("rgba(0, 150, 136, 1)",!0,1,4,0),v("rgba(0, 150, 136, 1)",!0,1,4,1),v("rgba(33, 150, 243, 1)",!0,1,5,0),v("rgba(33, 150, 243, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannfixed:{fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,levels:[m("rgba(120, 123, 134, 1)",!0,1),m("rgba(255, 152, 0, 1)",!0,1),m("rgba(129, 199, 132, 1)",!0,1),m("rgba(76, 175, 80, 1)",!0,1),m("rgba(0, 150, 136, 1)",!0,1),m("rgba(120, 123, 134, 1)",!0,1)],
fanlines:[v("rgba(179, 157, 219, 1)",!1,1,8,1),v("rgba(244, 67, 54, 1)",!1,1,5,1),v("rgba(120, 123, 134, 1)",!1,1,4,1),v("rgba(255, 152, 0, 1)",!1,1,3,1),v("rgba(129, 199, 132, 1)",!0,1,2,1),v("rgba(76, 175, 80, 1)",!0,1,1,1),v("rgba(0, 150, 136, 1)",!0,1,1,2),v("rgba(0, 150, 136, 1)",!1,1,1,3),v("rgba(33, 150, 243, 1)",!1,1,1,4),v("rgba(149, 117, 205, 1)",!1,1,1,5),v("rgba(179, 157, 219, 1)",!1,1,1,8)],arcs:[v("rgba(255, 152, 0, 1)",!0,1,1,0),v("rgba(255, 152, 0, 1)",!0,1,1,1),v("rgba(255, 152, 0, 1)",!0,1,1.5,0),v("rgba(129, 199, 132, 1)",!0,1,2,0),v("rgba(129, 199, 132, 1)",!0,1,2,1),v("rgba(76, 175, 80, 1)",!0,1,3,0),v("rgba(76, 175, 80, 1)",!0,1,3,1),v("rgba(0, 150, 136, 1)",!0,1,4,0),v("rgba(0, 150, 136, 1)",!0,1,4,1),v("rgba(33, 150, 243, 1)",!0,1,5,0),v("rgba(33, 150, 243, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannsquare:{color:"rgba( 21, 56, 153, 0.8)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:_,showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,fillHorzBackground:!0,horzTransparency:80,fillVertBackground:!0,vertTransparency:80,reverse:!1,fans:t("rgba(149, 152, 161, 1)",!1),hlevel1:i(0,"rgba(120, 123, 134, 1)",!0),hlevel2:i(.25,"rgba(245, 124, 0, 1)",!0),hlevel3:i(.382,"rgba(129, 199, 132, 1)",!0),hlevel4:i(.5,"rgba(76, 175, 80, 1)",!0),hlevel5:i(.618,"rgba(0, 150, 136, 1)",!0),hlevel6:i(.75,"rgba(33, 150, 243, 1)",!0),hlevel7:i(1,"rgba(120, 123, 134, 1)",!0),vlevel1:i(0,"rgba(120, 123, 134, 1)",!0),vlevel2:i(.25,"rgba(245, 124, 0, 1)",!0),vlevel3:i(.382,"rgba(129, 199, 132, 1)",!0),vlevel4:i(.5,"rgba(76, 175, 80, 1)",!0),vlevel5:i(.618,"rgba(0, 150, 136, 1)",!0),vlevel6:i(.75,"rgba(33, 150, 243, 1)",!0),vlevel7:i(1,"rgba(120, 123, 134, 1)",!0),__collectibleLines:["fans","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibspeedresistancefan:{fillBackground:!0,transparency:80,grid:{color:"rgba( 21, 56, 153, 0.8)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,visible:!0},linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:_,showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,snapTo45Degrees:!0,reverse:!1,hlevel1:i(0,"rgba(120, 123, 134, 1)",!0),hlevel2:i(.25,"rgba(245, 124, 0, 1)",!0),hlevel3:i(.382,"rgba(129, 199, 132, 1)",!0),hlevel4:i(.5,"rgba(76, 175, 80, 1)",!0),hlevel5:i(.618,"rgba(0, 150, 136, 1)",!0),hlevel6:i(.75,"rgba(33, 150, 243, 1)",!0),hlevel7:i(1,"rgba(120, 123, 134, 1)",!0),vlevel1:i(0,"rgba(120, 123, 134, 1)",!0),vlevel2:i(.25,"rgba(245, 124, 0, 1)",!0),vlevel3:i(.382,"rgba(129, 199, 132, 1)",!0),vlevel4:i(.5,"rgba(76, 175, 80, 1)",!0),vlevel5:i(.618,"rgba(0, 150, 136, 1)",!0),
vlevel6:i(.75,"rgba(33, 150, 243, 1)",!0),vlevel7:i(1,"rgba(120, 123, 134, 1)",!0),__collectibleLines:["trendline","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibretracement:{showCoeffs:!0,showPrices:!0,font:_,fillBackground:!0,transparency:80,extendLines:!1,extendLinesLeft:!1,horzLabelsAlign:"left",vertLabelsAlign:"bottom",reverse:!1,coeffsAsPercents:!1,fibLevelsBasedOnLogScale:!1,trendline:{visible:!0,color:"rgba(120, 123, 134, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:i(0,"rgba(120, 123, 134, 1)",!0),level2:i(.236,"rgba(244, 67, 54, 1)",!0),level3:i(.382,"rgba(129, 199, 132, 1)",!0),level4:i(.5,"rgba(76, 175, 80, 1)",!0),level5:i(.618,"rgba(0, 150, 136, 1)",!0),level6:i(.786,"rgba(100, 181, 246, 1)",!0),level7:i(1,"rgba(120, 123, 134, 1)",!0),level8:i(1.618,"rgba(33, 150, 243, 1)",!0),level9:i(2.618,"rgba(244, 67, 54, 1)",!0),level10:i(3.618,"rgba(156, 39, 176, 1)",!0),level11:i(4.236,"rgba(233, 30, 99, 1)",!0),level12:i(1.272,"rgba(129, 199, 132, 1)",!1),level13:i(1.414,"rgba(244, 67, 54, 1)",!1),level16:i(2,"rgba(0, 150, 136, 1)",!1),level14:i(2.272,"rgba(129, 199, 132, 1)",!1),level15:i(2.414,"rgba(76, 175, 80, 1)",!1),level17:i(3,"rgba(100, 181, 246, 1)",!1),level18:i(3.272,"rgba(120, 123, 134, 1)",!1),level19:i(3.414,"rgba(33, 150, 243, 1)",!1),level20:i(4,"rgba( 204, 40, 40, 1)",!1),level21:i(4.272,"rgba(156, 39, 176, 1)",!1),level22:i(4.414,"rgba(233, 30, 99, 1)",!1),level23:i(4.618,"rgba(129, 199, 132, 1)",!1),level24:i(4.764,"rgba(0, 150, 136, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolfibchannel:{showCoeffs:!0,showPrices:!0,font:_,fillBackground:!0,transparency:80,extendLeft:!1,extendRight:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",coeffsAsPercents:!1,levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:i(0,"rgba(120, 123, 134, 1)",!0),level2:i(.236,"rgba(244, 67, 54, 1)",!0),level3:i(.382,"rgba(129, 199, 132, 1)",!0),level4:i(.5,"rgba(76, 175, 80, 1)",!0),level5:i(.618,"rgba(0, 150, 136, 1)",!0),level6:i(.786,"rgba(100, 181, 246, 1)",!0),level7:i(1,"rgba(120, 123, 134, 1)",!0),level8:i(1.618,"rgba(33, 150, 243, 1)",!0),level9:i(2.618,"rgba(244, 67, 54, 1)",!0),level10:i(3.618,"rgba(156, 39, 176, 1)",!0),level11:i(4.236,"rgba(233, 30, 99, 1)",!0),level12:i(1.272,"rgba(129, 199, 132, 1)",!1),level13:i(1.414,"rgba(244, 67, 54, 1)",!1),level16:i(2,"rgba(0, 150, 136, 1)",!1),level14:i(2.272,"rgba(129, 199, 132, 1)",!1),level15:i(2.414,"rgba(76, 175, 80, 1)",!1),level17:i(3,"rgba(100, 181, 246, 1)",!1),level18:i(3.272,"rgba(120, 123, 134, 1)",!1),level19:i(3.414,"rgba(33, 150, 243, 1)",!1),level20:i(4,"rgba( 204, 40, 40, 1)",!1),
level21:i(4.272,"rgba(156, 39, 176, 1)",!1),level22:i(4.414,"rgba(233, 30, 99, 1)",!1),level23:i(4.618,"rgba(129, 199, 132, 1)",!1),level24:i(4.764,"rgba(0, 150, 136, 1)",!1),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolprojection:{showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,color1:"rgba(33, 150, 243, 0.2)",color2:"rgba(156, 39, 176, 0.2)",linewidth:1,trendline:{visible:!0,color:"rgba(149, 152, 161, 1)",linestyle:CanvasEx.LINESTYLE_SOLID},level1:f(1,"rgba( 128, 128, 128, 1)",!0)},linetool5pointspattern:{color:"rgba( 204, 40, 149, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 204, 40, 149, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolcypherpattern:{color:"#CC2895",textcolor:"#FFFFFF",fillBackground:!0,backgroundColor:"#CC2895",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetooltrianglepattern:{color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolabcd:{color:"rgba( 0, 155, 0, 1)",textcolor:"rgba( 255, 255, 255, 1)",font:"Verdana",fontsize:12,bold:!1,italic:!1,linewidth:1},linetoolthreedrivers:{color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolheadandshoulders:{color:"rgba( 69, 104, 47, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 69, 168, 47, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolfibwedge:{showCoeffs:!0,font:_,fillBackground:!0,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:f(.236,"rgba(244, 67, 54, 1)",!0),level2:f(.382,"rgba(129, 199, 132, 1)",!0),level3:f(.5,"rgba(76, 175, 80, 1)",!0),level4:f(.618,"rgba(0, 150, 136, 1)",!0),level5:f(.786,"rgba(100, 181, 246, 1)",!0),level6:f(1,"rgba(120, 123, 134, 1)",!0),level7:f(1.618,"rgba(33, 150, 243, 1)",!1),level8:f(2.618,"rgba(244, 67, 54, 1)",!1),level9:f(3.618,"rgba(103, 58, 183, 1)",!1),level10:f(4.236,"rgba(233, 30, 99, 1)",!1),level11:f(4.618,"rgba(233, 30, 99, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibcircles:{showCoeffs:!0,font:_,fillBackground:!0,transparency:80,snapTo45Degrees:!0,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba(120, 123, 134, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:f(.236,"rgba(244, 67, 54, 1)",!0),level2:f(.382,"rgba(129, 199, 132, 1)",!0),level3:f(.5,"rgba(76, 175, 80, 1)",!0),
level4:f(.618,"rgba(0, 150, 136, 1)",!0),level5:f(.786,"rgba(100, 181, 246, 1)",!0),level6:f(1,"rgba(120, 123, 134, 1)",!0),level7:f(1.618,"rgba(33, 150, 243, 1)",!0),level8:f(2.618,"rgba(244, 67, 54, 1)",!0),level9:f(3.618,"rgba(103, 58, 183, 1)",!0),level10:f(4.236,"rgba(233, 30, 99, 1)",!0),level11:f(4.618,"rgba(233, 30, 99, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibspeedresistancearcs:{showCoeffs:!0,font:_,fillBackground:!0,transparency:80,fullCircles:!1,trendline:{visible:!0,color:"rgba(120, 123, 134, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:f(.236,"rgba(244, 67, 54, 1)",!0),level2:f(.382,"rgba(129, 199, 132, 1)",!0),level3:f(.5,"rgba(76, 175, 80, 1)",!0),level4:f(.618,"rgba(0, 150, 136, 1)",!0),level5:f(.786,"rgba(100, 181, 246, 1)",!0),level6:f(1,"rgba(120, 123, 134, 1)",!0),level7:f(1.618,"rgba(33, 150, 243, 1)",!0),level8:f(2.618,"rgba(244, 67, 54, 1)",!0),level9:f(3.618,"rgba(103, 58, 183, 1)",!0),level10:f(4.236,"rgba(233, 30, 99, 1)",!0),level11:f(4.618,"rgba(233, 30, 99, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltrendbasedfibextension:{showCoeffs:!0,showPrices:!0,font:_,fillBackground:!0,transparency:80,extendLines:!1,extendLinesLeft:!1,horzLabelsAlign:"left",vertLabelsAlign:"bottom",reverse:!1,coeffsAsPercents:!1,fibLevelsBasedOnLogScale:!1,trendline:{visible:!0,color:"rgba(120, 123, 134, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:i(0,"rgba(120, 123, 134, 1)",!0),level2:i(.236,"rgba(244, 67, 54, 1)",!0),level3:i(.382,"rgba(129, 199, 132, 1)",!0),level4:i(.5,"rgba(76, 175, 80, 1)",!0),level5:i(.618,"rgba(0, 150, 136, 1)",!0),level6:i(.786,"rgba(100, 181, 246, 1)",!0),level7:i(1,"rgba(120, 123, 134, 1)",!0),level8:i(1.618,"rgba(33, 150, 243, 1)",!0),level9:i(2.618,"rgba(244, 67, 54, 1)",!0),level10:i(3.618,"rgba(156, 39, 176, 1)",!0),level11:i(4.236,"rgba(233, 30, 99, 1)",!0),level12:i(1.272,"rgba(129, 199, 132, 1)",!1),level13:i(1.414,"rgba(244, 67, 54, 1)",!1),level16:i(2,"rgba(0, 150, 136, 1)",!1),level14:i(2.272,"rgba(129, 199, 132, 1)",!1),level15:i(2.414,"rgba(76, 175, 80, 1)",!1),level17:i(3,"rgba(100, 181, 246, 1)",!1),level18:i(3.272,"rgba(120, 123, 134, 1)",!1),level19:i(3.414,"rgba(33, 150, 243, 1)",!1),level20:i(4,"rgba( 204, 40, 40, 1)",!1),level21:i(4.272,"rgba(156, 39, 176, 1)",!1),level22:i(4.414,"rgba(233, 30, 99, 1)",!1),level23:i(4.618,"rgba(129, 199, 132, 1)",!1),level24:i(4.764,"rgba(0, 150, 136, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetooltrendbasedfibtime:{showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,
horzLabelsAlign:"right",vertLabelsAlign:"bottom",trendline:{visible:!0,color:"rgba(120, 123, 134, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:f(0,"rgba(120, 123, 134, 1)",!0),level2:f(.382,"rgba(244, 67, 54, 1)",!0),level3:f(.5,"rgba(129, 199, 132, 1)",!1),level4:f(.618,"rgba(76, 175, 80, 1)",!0),level5:f(1,"rgba(0, 150, 136, 1)",!0),level6:f(1.382,"rgba(100, 181, 246, 1)",!0),level7:f(1.618,"rgba(120, 123, 134, 1)",!0),level8:f(2,"rgba(33, 150, 243, 1)",!0),level9:f(2.382,"rgba(244, 67, 54, 1)",!0),level10:f(2.618,"rgba(156, 39, 176, 1)",!0),level11:f(3,"rgba(233, 30, 99, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolschiffpitchfork:{fillBackground:!0,transparency:80,style:n.Schiff,median:{visible:!0,color:"rgba(244, 67, 54, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},extendLines:!1,level0:f(.25,"rgba(255, 183, 77, 1)",!1),level1:f(.382,"rgba(129, 199, 132, 1)",!1),level2:f(.5,"rgba(76, 175, 80, 1)",!0),level3:f(.618,"rgba(0, 150, 136, 1)",!1),level4:f(.75,"rgba(100, 181, 246, 1)",!1),level5:f(1,"rgba(33, 150, 243, 1)",!0),level6:f(1.5,"rgba(156, 39, 176, 1)",!1),level7:f(1.75,"rgba(233, 30, 99, 1)",!1),level8:f(2,"rgba(229, 115, 115, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolschiffpitchfork2:{fillBackground:!0,transparency:80,style:n.Schiff2,median:{visible:!0,color:"rgba(244, 67, 54, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},extendLines:!1,level0:f(.25,"rgba(255, 183, 77, 1)",!1),level1:f(.382,"rgba(129, 199, 132, 1)",!1),level2:f(.5,"rgba(76, 175, 80, 1)",!0),level3:f(.618,"rgba(0, 150, 136, 1)",!1),level4:f(.75,"rgba(100, 181, 246, 1)",!1),level5:f(1,"rgba(33, 150, 243, 1)",!0),level6:f(1.5,"rgba(156, 39, 176, 1)",!1),level7:f(1.75,"rgba(233, 30, 99, 1)",!1),level8:f(2,"rgba(229, 115, 115, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolinsidepitchfork:{fillBackground:!0,transparency:80,style:n.Inside,median:{visible:!0,color:"rgba(244, 67, 54, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},extendLines:!1,level0:f(.25,"rgba(255, 183, 77, 1)",!1),level1:f(.382,"rgba(129, 199, 132, 1)",!1),level2:f(.5,"rgba(76, 175, 80, 1)",!0),level3:f(.618,"rgba(0, 150, 136, 1)",!1),level4:f(.75,"rgba(100, 181, 246, 1)",!1),level5:f(1,"rgba(33, 150, 243, 1)",!0),level6:f(1.5,"rgba(156, 39, 176, 1)",!1),level7:f(1.75,"rgba(233, 30, 99, 1)",!1),level8:f(2,"rgba(229, 115, 115, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolregressiontrend:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,styles:{upLine:{visible:!0,color:"rgba(33, 150, 243, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba(33, 150, 243, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba(244, 67, 54, 0.3)",
linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!1,showPearsons:!0,transparency:70}}},g(TradingView.defaultProperties.chartproperties),y()}if(void 0===TradingView.defaultProperties["study_MA@tv-basicstudies"]&&(TradingView.defaultProperties["study_MA@tv-basicstudies"]={description:"Moving Average",shortDescription:"MA",inputs:{length:9,source:"close"},styles:{MovAvg:{visible:!0,color:"rgba( 4, 150, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:s.Line,histogramBase:0,title:"MA"}}}),void 0===TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]&&(TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]={font:"Arial",fontsize:10,borderColor:"rgba( 83, 143, 31, 1)",backColor:"rgba( 240, 255, 204, 1)",textColor:"rgba( 0, 0, 0, 1)"}),void 0===TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]){var w="rgba( 212, 121, 40, 1)";TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]={_hardCodedDefaultsVersion:1,font:"Arial",fontsize:11,levelsStyle:{showLabels:!0,visibility:{P:!0,"S1/R1":!0,"S2/R2":!0,"S3/R3":!0,"S4/R4":!0,"S5/R5":!0},colors:{P:w,"S1/R1":w,"S2/R2":w,"S3/R3":w,"S4/R4":w,"S5/R5":w},widths:{P:1,"S1/R1":1,"S2/R2":1,"S3/R3":1,"S4/R4":1,"S5/R5":1}}}}if(void 0===TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]&&(TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]={color:"rgba( 86, 135, 29, 1)",linewidth:2}),void 0===TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]&&(TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]={inputs:{},level0:t("rgba( 255, 0, 0, 1)",!1),level1:t("rgba( 0, 128, 0, 1)",!1),level2:t("rgba( 0, 0, 255, 1)",!1),level3:t("rgba( 255, 0, 255, 1)",!1),level4:t("rgba( 0, 128, 255, 1)",!0),level5:t("rgba( 255, 0, 0, 1)",!0),level6:t("rgba( 0, 128, 0, 1)",!0),level7:t("rgba( 0, 0, 255, 1)",!0),level8:t("rgba( 255, 0, 255, 1)",!0)}),void 0===TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]&&(TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]={styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!0,showPearsons:!0,backgroundColor:"rgba( 153, 21, 21, 0.3)",transparency:70}}),void 0===TradingView.defaultProperties["study_Compare@tv-basicstudies"]&&(TradingView.defaultProperties["study_Compare@tv-basicstudies"]={minTick:"default"}),void 0===TradingView.defaultProperties["study_Overlay@tv-basicstudies"]){TradingView.defaultProperties["study_Overlay@tv-basicstudies"]={style:r.STYLE_LINE,showPriceLine:!1,minTick:"default",candleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,drawBody:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",
wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,drawBody:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},barStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1,thinBars:!0},lineStyle:{color:"#FF6D00",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,priceSource:"close",styleType:r.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"#2196f3",color2:"#2196f3",linecolor:"#2196f3",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,priceSource:"close",transparency:95},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 83, 185, 135, 0.05)",topFillColor2:"rgba( 83, 185, 135, 0.05)",bottomFillColor1:"rgba( 235, 77, 92, 0.05)",bottomFillColor2:"rgba( 235, 77, 92, 0.05)",topLineColor:"rgba( 83, 185, 135, 1)",bottomLineColor:"rgba( 235, 77, 92, 1)",topLineWidth:2,bottomLineWidth:2,priceSource:"close",transparency:50,baseLevelPercentage:50},styles:{open:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:s.Line,histogramBase:0},high:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:s.Line,histogramBase:0},low:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:s.Line,histogramBase:0},close:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:s.Line,histogramBase:0}}}}for(var P=e.split("."),C=TradingView.defaultProperties,T=0;T<P.length;T++)C&&(C=C[P[T]]);return null!=C?TradingView.clone(C):{}};function v(e,t,i,r,n){if(r)for(var o in r){var s=o.split("."),a=c(s[0]),l=void 0!==n&&n===s[0];0!==s.length&&l&&(a=c((s=s.slice(1))[0])),0!==s.length&&e.hasOwnProperty(a)?u(e,s,r[o])||h(o):l&&h(o)}function c(e){return t&&t[e]?t[e]:e}function u(e,t,i,r){var n=c(t[0]);return!!e.hasOwnProperty(n)&&(t.length>1?u(e[n],t.slice(1),i):(e[n]&&e[n].setValue?e[n].setValue(i):e[n]=i,!0))}function h(e){i||f.logWarn("Path `"+e+"` does not exist.")}}function g(e,t,i,r){window.__defaultsOverrides&&v(e,t,i,window.__defaultsOverrides,r)}function y(){var e=/^linetool.+/;Object.keys(TradingView.defaultProperties).forEach((function(t){e.test(t)&&g(TradingView.defaultProperties[t],null,!1,t)}))}function b(e,t){return t?function(e,t){var i=m(e);if(!window._UNIT_TESTS){var r=TradingView.clone(TVSettings.getJSON(e,null));if(function(e){var t=new Set(["linetoolregressiontrend"]);return e.startsWith("study_")||t.has(e)}(e)&&r&&function(e){if(!e)return!1;e=e.toString();var t=new RegExp("\\d+").exec(e);return null!==t&&t[0]===e}(r.version)){var n=r.inputs,o=t.updateStudyInputs(r.id,r.version,"last",n,null);r.inputs=o
;var s=t.updateStudyState(r,r);r=s}TradingView.merge(i,r)}return i}(e,t):function(e){var t=m(e);if(!window._UNIT_TESTS){var i=TradingView.clone(TVSettings.getJSON(e,null));i&&TradingView.merge(t,i)}return t}(e)}b.create=function(e,t){if(t){var i=m(e);TradingView.defaultProperties[e]=Object.assign(t,i)}},b.remove=function(e){TradingView.defaultProperties[e]=void 0},TradingView.saveDefaults=function(e,t){TVSettings.setJSON(e,t)},TradingView.factoryDefaults=m,window.applyDefaultOverridesToLinetools=y,window.applyDefaultsOverrides=g,window.applyPropertiesOverrides=v,window.defaults=b,t.applyDefaultOverridesToLinetools=y,t.applyDefaultsOverrides=g,t.applyPropertiesOverrides=v,t.defaults=b,t.factoryDefaults=m,t.saveDefaults=TradingView.saveDefaults},wamh:function(e,t,i){"use strict";i.r(t),i.d(t,"ChangeToolBarsThemeUndoCommand",(function(){return s}));var r=i("mrSG"),n=i("EsvI"),o=i("oiZD"),s=function(e){function t(t,i,r){void 0===r&&(r=!0);var n=e.call(this,"Apply Toolbars Theme")||this;return n._prevThemeName=t,n._themeName=i,n._syncState=r,n}return Object(r.__extends)(t,e),t.prototype.undo=function(){Object(n.isStdThemeName)(this._prevThemeName)&&(Object(o.setTheme)(this._prevThemeName),this._syncState&&Object(n.syncTheme)())},t.prototype.redo=function(){Object(n.isStdThemeName)(this._themeName.toLowerCase())&&(Object(o.setTheme)(this._themeName.toLowerCase()),this._syncState&&Object(n.syncTheme)())},t}(i("RDU5").UndoCommand)},wfKj:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var r,n=i("zM7N"),o=i("YFKU"),s=i("IMMp"),a=i("NWKS"),l=i("HGP3"),c=((r={})[n.StdTheme.Light]={name:n.StdTheme.Light,label:function(){return Object(o.t)("Light",{context:"colorThemeName"})},order:2,getThemedColor:function(e){return Object(l.getHexColorByName)(e)}},r[n.StdTheme.Dark]={name:n.StdTheme.Dark,label:function(){return Object(o.t)("Dark",{context:"colorThemeName"})},order:1,getThemedColor:function(e){var t=s[e]||e;return Object(l.getHexColorByName)(t)}},r);c.sa={isPrivate:!0,noChartTheme:!0,name:"sa",getThemedColor:function(e){var t=a[e]||e;return Object(l.getHexColorByName)(t)}}},wi9r:function(e,t,i){"use strict";(function(e){var t=i("e3/o").randomHash;function r(e){this._chartApi=e,this._sessionid="qs_"+t(),this._sessionstarted=!1}r.prototype.destroy=function(){this._sessionstarted&&(this._chartApi.quoteDeleteSession(this._sessionid),this._sessionid=null,this._sessionstarted=!1)},r.prototype.connected=function(){return this._chartApi.connected()},r.prototype.connect=function(e){this._globalHandler=e,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()},r.prototype.disconnect=function(){this._chartApi.disconnect()},r.prototype.quoteAddSymbols=function(e,t){e=[].concat(e),t&&t.forcePermission&&(e=e.concat({flags:["force_permission"]})),this._chartApi.quoteAddSymbols(this._sessionid,e)},r.prototype.quoteRemoveSymbols=function(e){this._chartApi.quoteRemoveSymbols(this._sessionid,e)},r.prototype.quoteFastSymbols=function(e){this._chartApi.quoteFastSymbols(this._sessionid,e)},
r.prototype.quoteSetFields=function(e){this._chartApi.quoteSetFields(this._sessionid,e)},r.prototype.onMessage=function(e){switch(e.method){case"connected":this._sessionstarted||(this._chartApi.quoteCreateSession(this._sessionid),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1}this._globalHandler(e)},r.prototype.quoteHibernateAll=function(e){this._chartApi.quoteHibernateAll(this._sessionid)},TradingView.QuoteSession=r,e&&e.exports&&(e.exports=r)}).call(this,i("YuTi")(e))},wiuq:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolArrowMarker",(function(){return c}));var r=i("mrSG"),n=i("Ss5c"),o=i("Ocx9"),s=i("tc+8"),a=i.n(s),l=window.t("Arrow Marker"),c=function(e){function t(r,n){var o=e.call(this,r,n||t.createProperties())||this;return o._constructor="LineToolArrowMarker",Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Qa6j").ArrowMarkerPaneView;o._setPaneViews([new t(o,o.model())])}.bind(null,i)).catch(void 0),o}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.prototype.name=function(){return"Trend Line"},t.prototype.translatedType=function(){return l},t.createProperties=function(e){var i=new o.DefaultProperty("linetoolarrowmarker",e);return t._configureProperties(i),i},t.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(i.bind(null,"FxV7")).then((function(e){return e.ArrowMarkerDefinitionsViewModel}))},t._configureProperties=function(e){n.LineDataSource._configureProperties(e),e.hasChild("text")||e.addChild("text",new a.a("")),e.addExclusion("text")},t}(n.LineDataSource)},wjVR:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=null;var s=i("ogJP"),a=i("CW80"),l=i("3ClC"),c=i("H0vP"),u=i("GVHu"),h=i("mMWL"),d=i("KnF9"),p=i("VaSN"),f=i("aIyQ"),_=i.n(f),m=i("hY0g"),v=i.n(m),g=i("Tmoa"),y=i("EsvI"),b=i("8GoI");var S=function(){function e(e,t,i){this._invalidatedLineTools=new Set,this._allLineTools=new Map,this._invalidatedLineToolGroups=new Set,this._layoutId=e,this._chartId=t,this._chartModel=i,this._assignAllLineTools(this._chartModel.panes()),this._chartModel.panesCollectionChanged().subscribe(this,this._processPanesCollectionChanged.bind(this)),this._chartModel.dataSourceCollectionChanged().subscribe(this,this._processDataSourceCollectionChanged.bind(this)),this._chartModel.lineToolsGroupModel().onChanged().subscribe(this,this._processLineToolsGroupModelChanged.bind(this)),this._chartModel.mainSeries().dataEvents().symbolResolved().subscribe(this,this._onSymbolResolved.bind(this)),this._chartModel.sourceProperitesChanged().subscribe(this,this._processPropertiesChanged.bind(this));var r={requestType:"studiesLineTools",seriesSourceId:this._chartModel.mainSeries().id()};this._makeLoadRequestAndMerge(r)}return e.prototype.destroy=function(){this._chartModel.mainSeries().dataEvents().symbolResolved().unsubscribeAll(this),this._chartModel.panesCollectionChanged().unsubscribeAll(this),
this._chartModel.dataSourceCollectionChanged().unsubscribeAll(this),this._chartModel.lineToolsGroupModel().onChanged().unsubscribeAll(this)},e.prototype.prepareDTO=function(){var e=this,t=new Map;this._invalidatedLineTools.forEach((function(i){var r=e._chartModel.dataSourceForId(i);null===r?t.set(i,null):t.set(i,function(e,t){var i=t.lineToolsGroupModel().groupForLineTool(e),r={id:e.id(),symbol:e.symbol(),ownerSource:Object(n.ensureNotNull)(e.ownerSource()).id(),state:e.state(!1)};return null!==i&&(r.groupId=i.id),r}(r,e._chartModel))}));var i=new Map;return this._invalidatedLineToolGroups.forEach((function(t){var r=e._chartModel.lineToolsGroupModel().groupForId(t);null===r?i.set(t,null):i.set(t,function(e,t){return{id:e.id,name:e.name(),symbol:e.symbol()}}(r,e._chartModel))})),{sources:t,groups:i}},e.prototype.resetInvalidated=function(){this._invalidatedLineTools.clear(),this._invalidatedLineToolGroups.clear()},e.prototype._assignAllLineTools=function(e){var t=this;this._allLineTools.clear(),e.forEach((function(e){var i=e.dataSources().filter(a.isLineTool).map((function(e){return e.id()})),r=new Set(i);t._allLineTools.set(e.id(),r)}))},e.prototype._processPropertiesChanged=function(e,t){Object(a.isLineTool)(t)&&this._invalidatedLineTools.add(t.id())},e.prototype._processLineToolsGroupModelChanged=function(e,t){var i=this;this._invalidatedLineToolGroups.add(e),t&&(t.affectedLineTools||[]).forEach((function(e){return i._invalidatedLineTools.add(e)}))},e.prototype._processPanesCollectionChanged=function(e){var t=this,i=e.map((function(e){return e.id()})),r=new Set(i);Array.from(this._allLineTools.keys()).filter((function(e){return!r.has(e)})).forEach((function(e){Array.from(Object(n.ensureDefined)(t._allLineTools.get(e)).values()).forEach((function(e){t._invalidatedLineTools.add(e)}))})),e.filter((function(e){return!t._allLineTools.has(e.id())})).forEach((function(e){e.dataSources().filter(a.isLineTool).forEach((function(e){return t._invalidatedLineTools.add(e.id())}))})),this._assignAllLineTools(e)},e.prototype._processDataSourceCollectionChanged=function(e){var t=this,i=e.dataSources().filter(a.isLineTool),r=i.map((function(e){return e.id()})),o=new Set(r);if(this._allLineTools.has(e.id())){var s=Object(n.ensureDefined)(this._allLineTools.get(e.id()));i.filter((function(e){return!s.has(e.id())})).forEach((function(e){return t._invalidatedLineTools.add(e.id())})),Array.from(s.values()).filter((function(e){return!o.has(e)})).forEach((function(e){return t._invalidatedLineTools.add(e)}))}else i.forEach((function(e){return t._invalidatedLineTools.add(e.id())}));this._allLineTools.set(e.id(),o)},e.prototype._onSymbolResolved=function(e){var t={requestType:"mainSeriesLineTools",seriesSourceId:this._chartModel.mainSeries().id(),symbol:e.pro_name};this._makeLoadRequestAndMerge(t)},e.prototype._makeLoadRequestAndMerge=function(e){var t=this;Object(b.getChartStorage)().loadLineToolsAndGroups(this._layoutId,this._chartId,e).then((function(e){null!==e&&(t._applyLineToolsAndGroupsDTO(e),
e.serverRequestId&&console.log("PROCESSED:"+e.serverRequestId))}))},e.prototype._restoreGroups=function(e,t){var i=this,r=new Map;return(t.groups||new Map).forEach((function(t,o){if(null!==t){var s=i._chartModel.lineToolsGroupModel().groupForId(o);if(s&&t.serverUpdateTime){var a=parseInt(Object(n.ensureDefined)(t.serverUpdateTime));if(null!==e&&e>=a)return;s.setName(t.name)}else r.set(o,t)}})),r},e.prototype._createNewLineTool=function(e){var t=this._chartModel.dataSourceForId(e.ownerSource);if(null===t)return null;var i=Object(n.ensureNotNull)(this._chartModel.paneForSource(t)),r=this._chartModel.panes().indexOf(i);return this._chartModel.restoreSource(!1,r,null,e.state,null)},e.prototype._restoreLineTool=function(e,t){var i=this._chartModel.dataSourceForId(t.id);if(null!==i&&!Object(a.isLineTool)(i))return null;if(i&&t.serverUpdateTime){var r=parseInt(Object(n.ensureDefined)(t.serverUpdateTime));if(null!==e&&e>=r)return null;this._chartModel.restoreLineToolState(i,t.state)}return i||this._createNewLineTool(t)},e.prototype._applyLineToolsAndGroupsDTO=function(e){var t=this,i=this._invalidatedLineTools,r=this._invalidatedLineToolGroups,o=this._chartModel.chartSaveTime(),s=this._restoreGroups(o,e);(e.sources||new Map).forEach((function(e,i){if(null!==e&&!t._invalidatedLineTools.has(i)){var r=t._restoreLineTool(o,e);if(r)if(e.groupId){var a=t._chartModel.lineToolsGroupModel().groupForLineTool(r),l=t._chartModel.lineToolsGroupModel().groupForId(e.groupId);if(null!==a&&l===a)return;if(null!==a&&(a.excludeLineTool(r),0===a.lineTools().length&&t._chartModel.lineToolsGroupModel().removeGroup(a)),l&&!l.containsLineTool(r))l.addLineTools([r]);else if(!l&&s.has(e.groupId)){var c=Object(n.ensureDefined)(s.get(e.groupId));t._chartModel.lineToolsGroupModel().createGroup([r],c.name,c.id)}}else t._chartModel.lineToolsGroupModel().removeLineTools([r])}})),(e.groups||new Map).forEach((function(e,i){t._invalidatedLineToolGroups.delete(i)})),this._invalidatedLineTools=i,this._invalidatedLineToolGroups=r},e}();i.d(t,"ChartWidgetBase",(function(){return C}));var w={addToWatchlistEnabled:!0,sourceSelectionEnabled:!0,propertyPagesEnabled:!0,paneContextMenuEnabled:!0,priceScaleContextMenuEnabled:!0,currencyLabelEnabled:!1,goToDateEnabled:!1,marketStatusWidgetEnabled:!0,chartWarningWidgetEnabled:!0,dataProblemWidgetEnabled:!0,paneControlsEnabled:!0,isSymbolAvailable:function(e){return Promise.resolve(!0)},legendWidgetEnabled:!0,chartEventsEnabled:!0,esdEnabled:!1,croppedTickMarks:!0,handleScale:{mouseWheel:!0,pinch:!0,axisPressedMouseMove:!0},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0}};function P(e,t,i){var r=t.mainSeries().syncModel(),n=e.mainSeries().syncModel(),o=i;null!==r&&null!==n&&(o=e.createSyncPoint(r,n).sourceTimeToTargetTime(i));return e.timeScale().points().roughIndex(o,n&&n.distance.bind(n))}var C=function(){function e(e,t,i){var r=this;this.activePaneWidget=null,this._model=null,this._paneWidgets=[],this._maximizedPaneWidget=null,this._timeAxisWidget=null,this._paneSeparators=[],
this._timeAxisSeparator=null,this._lineToolsSynchronizer=null,this._modelCreated=new _.a,this._isDestroyed=!1,this._customLegendWidgetsFactoryMap=new Map,this._backgroundBasedTheme=new v.a("light"),this._updateThemedColorBound=this._updateThemedColor.bind(this),this._id=t,this._options=Object(s.merge)(Object(s.clone)(w),e),this._options.customLegendWidgetFactories&&(this._customLegendWidgetsFactoryMap=this._options.customLegendWidgetFactories),this._subscribeToDrawingState(),this.withModel(null,(function(){r._lineToolsSynchronizer=new S(i,t,r.model().model())})),this.withModel(this,(function(){var e=r.model().model();e.backgroundTopColor().subscribe(r._updateThemedColorBound),e.backgroundColor().subscribe(r._updateThemedColorBound)}))}return e.prototype.destroy=function(){null!==this._model&&(this._model.model().backgroundTopColor().unsubscribe(this._updateThemedColorBound),this._model.model().backgroundColor().unsubscribe(this._updateThemedColorBound),this._model.destroy()),this._customLegendWidgetsFactoryMap.clear(),this._isDestroyed=!0},e.prototype.id=function(){return this._id},e.prototype.timeAxisHeight=function(){return null!==this._timeAxisWidget?this._timeAxisWidget.size.h:0},e.prototype.withModel=function(e,t){this.model()?t.call(e):this.modelCreated().subscribe(e,t,!0)},e.prototype.images=function(){var e=this;window.TradingView.printing=!0;var t=this.model().selection().sources();this.model().selectionMacro((function(e){return e.clearSelection()}));var i,r=function(t,i){t.paint(i,e.onWidget());var r=t.getScreenshotData();r.containsMainSeries=t.containsMainSeries(),r.studies=[];for(var o=0,s=t.state().dataSources();o<s.length;o++){var a=s[o],l=e.properties().childs().paneProperties.childs().legendProperties.childs(),c=a.statusView();a instanceof u.Study?a.properties().visible.value()&&c&&l.showStudyTitles.value()&&l.showLegend.value()&&r.studies.push(a.statusView().text()):a===e.model().mainSeries()&&c&&l.showLegend.value()&&l.showSeriesTitle.value()&&(r.mainSeriesText=Object(n.ensureNotNull)(a.statusView()).text())}return r},o=[];if(null!==this._maximizedPaneWidget){var s=this._paneWidgets.indexOf(this._maximizedPaneWidget);o.push(r(this._maximizedPaneWidget,c.InvalidationMask.light().invalidateForPane(s)))}else for(var a=0;a<this._paneWidgets.length;++a){var l=this._paneWidgets[a];o.push(r(l,c.InvalidationMask.light().invalidateForPane(a))),a<this._paneWidgets.length-1&&o.push(this._paneSeparators[a].image())}this._timeAxisWidget&&(o.push(Object(n.ensureNotNull)(this._timeAxisSeparator).image()),this._timeAxisWidget.paint(c.InvalidationLevel.Light),i=this._timeAxisWidget.getScreenshotData()),window.TradingView.printing=!1,this.model().selectionMacro((function(e){t.forEach((function(t){e.addSourceToSelection(t)}))})),this.model().model().lightUpdate();var h=this.mainSeriesQuotesAndMetainfo();return{panes:o,timeAxis:i,colors:{text:this.properties().childs().scalesProperties.childs().textColor.value(),bg:this.properties().childs().paneProperties.childs().background.value(),
scales:this.properties().childs().scalesProperties.childs().lineColor.value()},meta:h.meta,ohlc:h.ohlc,quotes:h.quotes}},e.prototype.mainSeriesQuotesAndMetainfo=function(){var e,t,i,r,n=this._model&&this._model.mainSeries();if(n){var o=function(e){return null==e?"":n.formatter().format(e,void 0,void 0,!0,!1)+""};e={resolution:n.interval(),symbol:n.symbol()};var s=n.symbolInfo();s&&(e.symbol=s.full_name,e.description=s.description,e.exchange=s.exchange);var a=n.bars().last();null!==a&&(t=a.value.slice(1,5).map(o));var l=n.quotes();l&&(i={change:o(l.change),changePercent:(r=l.change_percent,null==r?"":r+""),last:o(l.last_price)})}return{meta:e,ohlc:t,quotes:i}},e.prototype.updateCrossHairPositionIfNeeded=function(){if(this._model){var e=h.tool.value();if(this._model.model().setCurrentTool(e),Object(p.lastEventIsTouch)()){var t=this._maximizedPaneWidget||this._paneWidgets[0];if((this._isLineToolModeExceptBrush()||Object(p.lastEventIsTouch)()&&this.selectBarMode().value())&&t.hasState()){var i=t.state(),r=.5*this._model.model().timeScale().width(),n=.5*i.defaultPriceScale().height();this._model.model().setAndSaveCurrentPosition(r,n,i)}}this._model&&Object(p.lastEventIsTouch)()&&this._model.model().crossHairSource().updateAllViews()}},e.prototype.trackingModePaneWidget=function(){if(!Object(p.lastEventIsTouch)())return null;for(var e=0,t=this.paneWidgets();e<t.length;e++){var i=t[e];if(i.trackingModeEnabled())return i}return null},e.prototype.startTrackingMode=function(){if(Object(p.lastEventIsTouch)()){this.exitTrackingMode(),this.updateCrossHairPositionIfNeeded();var e=this._maximizedPaneWidget||this._paneWidgets[0],t=this.model().model().crossHairSource().currentPoint();e.startTrackingMode(t,t)}},e.prototype.exitTrackingMode=function(){Object(p.lastEventIsTouch)()&&this.paneWidgets().some((function(e){return e.trackingModeEnabled()}))&&(this.paneWidgets().forEach((function(e){return e.exitTrackingMode()})),this.model().model().clearCurrentPosition())},e.prototype.onToolChanged=function(){this.selectBarMode().value()&&this.toggleSelectBarMode(),this.exitTrackingMode()},e.prototype.maximizedPaneWidget=function(){return this._maximizedPaneWidget},e.prototype.isMaximizedPane=function(){return null!==this._maximizedPaneWidget},e.prototype.backgroundBasedTheme=function(){return this._backgroundBasedTheme.readonly()},e.prototype.lineToolsAndGroupsDTO=function(){return Object(n.ensureNotNull)(this._lineToolsSynchronizer).prepareDTO()},e.prototype.resetLineToolsInvalidated=function(){Object(n.ensureNotNull)(this._lineToolsSynchronizer).resetInvalidated()},e.prototype.shouldBeSavedEvenIfHidden=function(){return this.model().model().shouldBeSavedEvenIfHidden()},e.prototype.showObjectsTreeDialog=function(){
Promise.all([i.e("vendors_embed"),i.e(1),i.e(2),i.e(4),i.e(6),i.e(8),i.e(12),i.e(20),i.e(21),i.e(22),i.e(23),i.e(29),i.e(35),i.e(40),i.e(45),i.e(51),i.e(53),i.e(94),i.e(129),i.e(153),i.e(164),i.e(233),i.e(275),i.e(0),i.e(7),i.e(9),i.e(16),i.e(28),i.e(43),i.e(44),i.e(41),i.e(48),i.e(68),i.e(134),i.e(141),i.e(184),i.e("object-tree-dialog")]).then(i.bind(null,"xNz2")).then((function(e){var t=new(0,e.ObjectTreeDialogRenderer);null!==o&&o.hide(),t.show(),o=t}))},e.prototype.addCustomWidgetToLegend=function(e,t){this._customLegendWidgetsFactoryMap.set(e,t);for(var i=0,r=this.paneWidgets();i<r.length;i++){r[i].addCustomWidgetToLegend(e,t)}},e.prototype.applyIndicatorsToAllChartsAvailable=function(){if(!this.chartWidgetCollection().applyIndicatorsToAllChartsAvailable())return!1;for(var e=0,t=this.model().model().panes();e<t.length;e++){if(t[e].sourcesByGroup().all().some((function(e){return Object(l.isStudy)(e)&&!Object(l.isESDStudy)(e)})))return!0}return!1},e.prototype._updateThemedColor=function(){var e=this.model().model(),t=e.backgroundColorAtYPercentFromTop(.5),i=e.backgroundTopColor().value(),r=e.backgroundColor().value(),n=Object(g.isColorDark)(t),o=Object(g.isColorDark)(i),s=Object(g.isColorDark)(r);this.widget().toggleClass("chart-widget--themed-dark",n),this.widget().toggleClass("chart-widget--themed-light",!n),this.widget().toggleClass("chart-widget__top--themed-dark",o),this.widget().toggleClass("chart-widget__top--themed-light",!o),this.widget().toggleClass("chart-widget__bottom--themed-dark",s),this.widget().toggleClass("chart-widget__bottom--themed-light",!s),this._backgroundBasedTheme.setValue(n?"dark":"light"),i===r&&Object(y.isStdThemedDefaultValue)("chartProperties.paneProperties.background",i,this._backgroundBasedTheme.value())&&(i=null,r=null);for(var a=0,l=this._paneWidgets;a<l.length;a++){l[a].updateThemedColors(i,r)}},e.prototype._isLineToolModeExceptBrush=function(){var e=h.tool.value();return Object(a.isLineToolName)(e)&&"LineToolBrush"!==e&&!this.selectBarMode().value()},e.prototype._subscribeToDrawingState=function(){var e=this;if(!this._options.readOnly){Object(h.init)();var t=function(t,i){if(null!==e._model){var r=e._model.model();t.model!==r&&i(r,e._model)}},i=function(e,t){return e.dataSources().find((function(e){return Object(a.isLineTool)(e)&&e.getLinkKey()===t}))||null};h.createdLineTool.subscribe(null,(function(i){t(i,(function(t,r){var o,s=Object(n.ensureNotNull)(t.paneForSource(t.mainSeries())),a=null;if(void 0===i.pointPositionPercents){if(null===(a=P(t,i.model,i.point.timeStamp)))return;o=i.point.price}else{var l=i.pointPositionPercents.x*t.timeScale().width(),c=t.mainSeries().priceScale(),u=i.pointPositionPercents.y*c.height(),h=t.mainSeries().firstValue();if(null===h)return;a=t.timeScale().coordinateToIndex(l),o=c.coordinateToPrice(u,h)}var d={index:Object(n.ensureNotNull)(a),price:o},p=r.createLineTool(s,d,i.linetool,i.properties,i.linkKey,t.mainSeries(),!0);null!==p&&!Boolean(e.model().lineBeingCreated())&&i.finalState&&p.restoreExternalPoints(i.finalState)}))})),
h.continuedLineTool.subscribe(null,(function(e){t(e,(function(t,i){var r=P(t,e.model,e.point.timeStamp);if(null!==r){var n={index:r,price:e.point.price},o=t.lineBeingCreated();if(null!==o)i.continueExternalLine(n,null===e.envState?void 0:e.envState,!!e.finalState)&&e.finalState&&o.restoreExternalPoints(e.finalState)}}))})),h.cancelledLineTool.subscribe(null,(function(e){t(e,(function(e,t){e.cancelCreatingLine()}))})),h.beenSetLineToolLastPoint.subscribe(null,(function(e){t(e,(function(t,i){var r=t.lineBeingCreated();if(null!==r&&r.getLinkKey()===e.linkKey){var n=P(t,e.model,e.point.timeStamp);if(null!==n){var o={index:n,price:e.point.price};r.setLastPoint(o),r.updateAllViews(),t.lightUpdate()}}}))})),h.startedMovingLineTool.subscribe(null,(function(e){t(e,(function(t,r){var n=e.linkKeys.map(i.bind(null,t)).filter(s.notNull);if(n.length){var o=P(t,e.model,e.point.timeStamp);if(null===o)return;var a={index:o,price:e.point.price};t.startMovingSources(n,{logical:a},null,e.pointPositionPercents,null===e.envState?void 0:e.envState,!0)}}))})),h.movedLineTool.subscribe(null,(function(e){t(e,(function(t,i){if(t.sourcesBeingMoved().filter((function(t){return function(t){return e.linkKeys.some((function(e){return t.getLinkKey()===e}))}(t)})).length){var r=P(t,e.model,e.point.timeStamp);if(null!==r){var n={index:r,price:e.point.price};t.moveSources({logical:n},e.pointPositionPercents,null===e.envState?void 0:e.envState,!0)}}}))})),h.finishedMovingLineTool.subscribe(null,(function(e){t(e,(function(t,i){var r=t.sourcesBeingMoved();if(0!==r.length){r.forEach((function(i){var r=function(t){for(var i=0;i<e.linkKeys.length;i++)if(e.linkKeys[i]===t.getLinkKey())return e.finalStates[i];return null}(i);t.endMovingSources(null!==r,!0),null!==r&&(i.restoreExternalPoints(r),r.pointPositionPercents&&i.restorePositionPercents(r.pointPositionPercents))}))}}))})),h.startedChangingLineTool.subscribe(null,(function(e){t(e,(function(t,r){var n=i(t,e.linkKey),o=P(t,e.model,e.point.timeStamp);if(null!==o&&null!==n&&n.isActualSymbol()&&n.isActualCurrency()){var s={index:o,price:e.point.price};t.startChangingLinetool(n,s,e.pointIndex,null===e.envState?void 0:e.envState,!0)}}))})),h.changedLineTool.subscribe(null,(function(e){t(e,(function(t,i){var r=t.lineBeingEdited();if(null!==r&&r.getLinkKey()===e.linkKey){var n=P(t,e.model,e.point.timeStamp);if(null!==n&&r.isActualSymbol()&&r.isActualCurrency()){var o={index:n,price:e.point.price};t.changeLinePoint(o,null===e.envState?void 0:e.envState,!0)}}}))})),h.finishedChangingLineTool.subscribe(null,(function(e){t(e,(function(t,r){var n=i(t,e.linkKey);null!==n&&n.isActualSymbol()&&n.isActualCurrency()&&null!==t.lineBeingEdited()&&t.endChangingLinetool(!!e.finalState,!0),null!==n&&e.finalState&&n.restoreExternalPoints(e.finalState)}))})),h.removedLineTool.subscribe(null,(function(e){t(e,(function(t,r){var n=i(t,e.linkKey);null!==n&&r.removeSource(n,!1)}))})),h.finishedLineTool.subscribe(null,(function(e){t(e,(function(t,r){var n=i(t,e.linkKey);null!==n&&"LineToolBrush"===n.toolname&&n.finish()}))})),
h.changedLineStyle.subscribe(null,(function(e){t(e,(function(t,r){var n=i(t,e.linkKey);null!==n&&(n.restoreExternalState(e.state),n.propertiesChanged(!0))}))})),h.restoredLineToolState.subscribe(null,(function(e){t(e,(function(t,n){var o=i(t,e.linkKey);if(null!==o){var s=Object(r.__assign)({},e.state);s.indexes=e.state.points.map((function(i){return{index:P(t,e.model,i.time_t),price:i.price}})),t.restoreLineToolState(o,s)}}))})),h.restoredLineTool.subscribe(null,(function(e){t(e,(function(t,i){t.restoreSource(e.state.restorePane,e.state.paneIndex,e.state.paneState,e.state.sourceState,null)}))})),h.copiedLineTool.subscribe(null,(function(e){t(e,(function(t,i){var r,o=Object(n.ensureNotNull)(t.paneForSource(t.mainSeries()));if(e.pointPositionPercents){if(null===(r=i.createLineTool(o,{index:0,price:0},e.linetool,null,e.linkKey,void 0,!0)))return;r.restorePositionPercents(Object(n.ensureDefined)(e.pointPositionPercents))}else{var s=e.points.map((function(i){return{index:Object(n.ensureNotNull)(P(t,e.model,i.timeStamp)),price:i.price}})),a=s[0];if(null===(r=i.createLineTool(o,a,e.linetool,null,e.linkKey,void 0,!0)))return;if(t.lineBeingCreated())for(var l=1;l<s.length;l++)l!==s.length-1||"LineToolBrush"!==e.linetool&&"LineToolGhostFeed"!==e.linetool||r.finish(),i.coninueCreatingLine(s[l],new d.EnvironmentState(void 0),l<s.length-1,!0)}r.properties().interval.setValue(e.state.interval),r.restoreExternalState(e.state),r.restoreData&&r.restoreData(e),r.propertiesChanged(!0),e.finalState&&(r.calcIsActualSymbol(),r.restoreExternalPoints(e.finalState))}))}))}},e}()},wuAJ:function(e,t,i){"use strict";function r(e){var t=document.createElement("a");return t.href=e,a(t)&&s(t)&&o(t)}function n(e){var t=document.createElement("a");return t.href=e,s(t)&&o(t)}i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return l}));var o=function(e){return!e.username},s=function(e){return"http:"===e.protocol||"https:"===e.protocol},a=function(e){return e.hostname===location.hostname||!/^\d+\.\d+\.\d+\.\d+$/.test(e.hostname)&&l(e.hostname)};function l(e,t){void 0===t&&(t=window.location.hostname);var i="."===t.slice(-1)?3:2,r=t.toLowerCase().split(".").slice(-i),n=e.toLowerCase().split(".").slice(-r.length);return r.join(".")===n.join(".")}},"x+tH":function(e,t,i){"use strict";var r;i.r(t),i.d(t,"WSMode",(function(){return r})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(r||(r={}))},x0JF:function(e,t,i){"use strict";var r=i("aO4+").Point,n=i("vq8G").SelectionRenderer,o=i("VdBB").HitTestResult,s=i("29fS").PaneRendererBars,a=i("gyZD").PaneRendererLine,l=i("Zp8I").PaneRendererStepLine,c=i("u0yd").PaneRendererArea,u=i("/hKg").PaneRendererCandles,h=i("M7/j").PaneRendererBaseline,d=i("Zy3/").CompositeRenderer,p=i("ga+R"),f=i("Tmoa"),_=i("k9/m").PlotRowSearchMode,m=i("Kxc7"),v=i("Zp/P");function g(e,t){this.m_series=e,this.m_model=t,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=m.enabled("source_selection_markers"),this._selectionData=null}function y(e,t){
return void 0!==e[TradingView.OPEN_PLOT]&&void 0!==e[TradingView.HIGH_PLOT]&&void 0!==e[TradingView.LOW_PLOT]&&void 0!==e[TradingView.CLOSE_PLOT]&&(t.open=e[TradingView.OPEN_PLOT],t.high=e[TradingView.HIGH_PLOT],t.low=e[TradingView.LOW_PLOT],t.close=e[TradingView.CLOSE_PLOT],!0)}function b(e,t){g.call(this,e,t)}function S(e,t){g.call(this,e,t)}function w(e,t){g.call(this,e,t)}function P(e,t){g.call(this,e,t)}function C(e,t){this.m_series=e,this.m_model=t,this.m_items=[],this._isMarkersEnabled=m.enabled("source_selection_markers")}function T(e,t){C.call(this,e,t),this._invaidated=!0}function x(e,t){C.call(this,e,t),this._invaidated=!0}function I(e,t){C.call(this,e,t),this._invaidated=!0,this._renderer=new h}g.prototype._series=function(){return this.m_series},g.prototype._model=function(){return this.m_model},g.prototype._bars=function(){return this.m_bars},g.prototype.update=function(){this._invalidated=!0},g.prototype._updateImpl=function(e){var t=this;if((e=e||y,this.m_bars=[],!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty())&&(null!==(a=this.m_model.timeScale().visibleBarsStrictRange())&&0!==this.m_series.bars().size())){for(var i=this.m_series.nearestIndex(a.firstBar(),_.NearestRight),n=this.m_series.nearestIndex(a.lastBar(),_.NearestLeft);i<=n;i++){if(null!==this.m_series.bars().valueAt(i))break}if(!(i>n)){var s,a=this.m_series.bars().range(i,n),l=this.m_series.priceScale(),c=this.m_series.barColorer(),u={};if(a.each((function(i,r){var n,o={};(o.time=Math.round(i),e(r,o))&&(u.value=r,n=r[TradingView.STYLE_PLOT]?r[TradingView.STYLE_PLOT]:c.barStyle(i,!1,u),r[TradingView.STYLE_PLOT]=n,u.previousValue=r,o.color=n.barColor,o.borderColor=n.barBorderColor,o.wickColor=n.barWickColor,o.hollow=n.isBarHollow,t.m_bars.push(o))}),this),0!==this.m_bars.length&&(s=this.m_series.firstValue(),l.barPricesToCoordinates(this.m_bars,s)),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_model.selection().isSelected(this.m_series)){var h=p(i,n);this._selectionData={points:[],bgColors:[],visible:!0};var d=this.m_model.paneForSource(this.m_series).height();this._selectionData.hittestResult=o.REGULAR;for(var f=0;f<h.length;f++){var m=h[f],v=this.m_series.bars().valueAt(m);if(null!==v){var g=.5*(v[TradingView.OPEN_PLOT]+v[TradingView.CLOSE_PLOT]),b=this.m_model.timeScale().indexToCoordinate(m),S=this.m_series.priceScale().priceToCoordinate(g,s);this._selectionData.points.push(new r(b,S)),this._selectionData.bgColors.push(this.m_model.backgroundColorAtYPercentFromTop(S/d))}}}}}},g.prototype.items=function(){return this.m_bars},inherit(b,g),b.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing();var t=this.m_series.properties();e.dontDrawOpen=t.barStyle.dontDrawOpen.value(),e.thinBars=t.style.value()===TradingView.Series.STYLE_RANGE?t.rangeStyle.thinBars.value():t.barStyle.thinBars.value();var i=new d;return i.append(new s(e)),
this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&i.append(new n(this._selectionData)),i},inherit(S,g),S.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.wickVisible=this.m_series.properties().candleStyle.drawWick.value(),e.bodyVisible=this.m_series.properties().candleStyle.drawBody.value(),e.borderVisible=this.m_series.properties().candleStyle.drawBorder.value(),e.borderColor=this.m_series.properties().candleStyle.borderColor.value(),e.wickColor=this.m_series.properties().candleStyle.wickColor.value(),e.barWidth=v.optimalBarWidth(e.barSpacing);var t=new d;return t.append(new u(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&t.append(new n(this._selectionData)),t},inherit(w,g),w.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.wickVisible=this.m_series.properties().haStyle.drawWick.value(),e.bodyVisible=this.m_series.properties().haStyle.drawBody.value(),e.borderVisible=this.m_series.properties().haStyle.drawBorder.value(),e.borderColor=this.m_series.properties().haStyle.borderColor.value(),e.wickColor=this.m_series.properties().haStyle.wickColor.value(),e.barWidth=v.optimalBarWidth(e.barSpacing);var t=new d;return t.append(new u(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&t.append(new n(this._selectionData)),t},inherit(P,g),P.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.wickVisible=this.m_series.properties().hollowCandleStyle.drawWick.value(),e.bodyVisible=this.m_series.properties().hollowCandleStyle.drawBody.value(),e.borderVisible=this.m_series.properties().hollowCandleStyle.drawBorder.value(),e.borderColor=this.m_series.properties().hollowCandleStyle.borderColor.value(),e.wickColor=this.m_series.properties().hollowCandleStyle.wickColor.value(),e.barWidth=v.optimalBarWidth(e.barSpacing);var t=new d;return t.append(new u(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&t.append(new n(this._selectionData)),t},C.prototype.update=function(){if(this.m_items=[],!this.m_model.timeScale().isEmpty()&&this.m_series.priceScale()&&!this.m_series.priceScale().isEmpty()){var e=this.m_model.timeScale().visibleBarsStrictRange();if(null!==e&&0!==this.m_series.bars().size()){var t,i=this.m_series.nearestIndex(e.firstBar(),_.NearestRight),n=this.m_series.nearestIndex(e.lastBar(),_.NearestLeft);e=this.m_series.bars().range(i,n);var s=this.m_series.priceScale(),a={color:this.m_series.properties().lineStyle.color.value()},l=this.m_series.barFunction();if(e.each(function(e,i){var n=l(i);if(null==n)return!1;void 0===t&&(t=n);var o=new r(e,n);return o.style=a,this.m_items.push(o),!1}.bind(this)),s.pointsArrayToCoordinates(this.m_items,t),
this.m_model.timeScale().indexesToCoordinates(this.m_items),this.m_model.selection().isSelected(this.m_series)){var c=p(i,n);this._selectionData={points:[],isDark:this.m_model.isDark(),bgColors:[],visible:!0};var u=this.m_model.paneForSource(this.m_series).height();this._selectionData.hittestResult=o.REGULAR;for(var h=0;h<c.length;h++){var d=c[h],f=this.m_series.data().valueAt(d);if(null!==f){var m=l(f),v=this.m_model.timeScale().indexToCoordinate(d),g=this.m_series.priceScale().priceToCoordinate(m,t);this._selectionData.points.push(new r(v,g)),this._selectionData.bgColors.push(this.m_model.backgroundColorAtYPercentFromTop(g/u))}}}}}},inherit(T,C),T.prototype.update=function(){this._invalidated=!0},T.prototype.renderer=function(){this._invalidated&&(C.prototype.update.call(this),this._invalidated=!1);var e,t,i=this.m_series.properties().lineStyle,r={barSpacing:this.m_model.timeScale().barSpacing(),items:this.m_items,lineColor:i.color.value(),lineStyle:i.linestyle.value(),withMarkers:i.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_MARKERS,lineWidth:i.linewidth.value(),simpleMode:!0};return i.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_STEP?(e=new l).setData(r):e=new a(r),this.m_model.selection().isSelected(this.m_series)?((t=new d).append(e),this._isMarkersEnabled&&t.append(new n(this._selectionData))):t=e,t},inherit(x,C),x.prototype.update=function(){this._invalidated=!0},x.prototype.renderer=function(){this._invalidated&&(C.prototype.update.call(this),this._invalidated=!1);var e={simpleMode:!1};e.barSpacing=this.m_model.timeScale().barSpacing(),e.items=this.m_items,e.lineColor=this.m_series.properties().areaStyle.linecolor.value(),e.lineStyle=this.m_series.properties().areaStyle.linestyle.value(),e.lineWidth=this.m_series.properties().areaStyle.linewidth.value();var t=this.m_series.properties().areaStyle.transparency.value();e.isSeries=!0,e.color1=f.generateColor(this.m_series.properties().areaStyle.color1.value(),t),e.color2=f.generateColor(this.m_series.properties().areaStyle.color2.value(),t),e.bottom=this.m_series.priceScale().height();var i=new d;return i.append(new c(e)),this.m_model.selection().isSelected(this.m_series)&&this._isMarkersEnabled&&i.append(new n(this._selectionData)),i},inherit(I,C),I.prototype.update=function(){this._invalidated=!0},I.prototype._updateImpl=function(){C.prototype.update.call(this);var e=this.m_series.properties().baselineStyle,t=e.transparency.value();this._topFillColor1=f.generateColor(e.topFillColor1.value(),t),this._topFillColor2=f.generateColor(e.topFillColor2.value(),t),this._bottomFillColor1=f.generateColor(e.bottomFillColor1.value(),t),this._bottomFillColor2=f.generateColor(e.bottomFillColor2.value(),t),this._topLineColor=e.topLineColor.value(),this._bottomLineColor=e.bottomLineColor.value(),this._topLineWidth=e.topLineWidth.value(),this._bottomLineWidth=e.bottomLineWidth.value(),this._barSpacing=this.m_model.timeScale().barSpacing(),this._bottom=this.m_series.priceScale().height(),
this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-e.baseLevelPercentage.value())/100))},I.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this.m_items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,lineStyle:CanvasEx.LINESTYLE_SOLID,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});var e=new d;return e.append(this._renderer),this.m_model.selection().isSelected(this.m_series)&&e.append(new n(this._selectionData)),e},t.SeriesBarsPaneView=b,t.SeriesCandlesPaneView=S,t.SeriesHollowCandlesPaneView=P,t.SeriesLinePaneView=T,t.SeriesAreaPaneView=x,t.SeriesHeikenAshiPaneView=w,t.SeriesBaselinePaneView=I,t.SeriesBarCandlesPaneView=g},"x2L+":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));var r=i("m/cY"),n=i("Vdly");function o(){return n.getBool("Chart.ShowMarketOpenStatus",!0)}var s=Object(r.a)(o());function a(){s.setValue(!0),n.remove("Chart.ShowMarketOpenStatus")}n.onSync.subscribe(null,(function(){return s.setValue(o())})),s.subscribe(null,(function(){return n.setValue("Chart.ShowMarketOpenStatus",s.value())}))},"x40+":function(e,t,i){"use strict";var r=i("Eyy1").assert,n=i("VdBB").HitTestResult,o=i("Zp/P").coordinateIsValid,s=i("0YCj"),a=i("Tmoa"),l=i("Hr11").clamp,c=i("k9/m").PlotRowSearchMode,u=i("cPgM").ScaledPaneRenderer;function h(){u.call(this),this._data=null}function d(e){this._source=e,this._points1=[],this._points2=[],this._timePoints=[],this._getBarSpacing=e.model().timeScale().barSpacing.bind(e.model().timeScale()),this._invalidated=!0,this._areaRenderer=new h,this._plIndex1=null,this._plIndex2=null}function p(e){d.call(this,e)}function f(e,t,i){d.call(this,e),this._isHlineFill=t.type===s.FilledArea.TYPE_HLINES,r(this._isHlineFill||t.type===s.FilledArea.TYPE_PLOTS,"Wrong filledArea type: "+t.type),this._isHlineFill&&this._initBandIndexes(t.objAId,t.objBId),this._fillMetaInfo=t,this._fillStyleProps=i;var n=e._metaInfo;if(t.palette)for(var o in n.plots)if(n.plots[o].palette===t.palette){this._colorPlotOffset=parseInt(o),this._colorsMap=n.palettes[t.palette].valToIndex,this._colorValues=e.properties().palettes[t.palette].colors;break}}inherit(h,u),h.prototype.setData=function(e){this._data=e},h.prototype.hitTest=function(e){if(null===this._data)return null;for(var t,i,r=1;r<this._data.points1.length;++r)if(t=this._data.points1[r],i=this._data.points2[r],this._data.timePoints[r]===e.x&&(e.y>=t&&e.y<=i||e.y<=t&&e.y>=i))return new n(n.REGULAR);return null},h.prototype._drawImpl=function(e){if(null!==this._data){var t=this._data.isHlineFill;if(t||0!==this._data.points1.length&&0!==this._data.points2.length){
var i=this._data.timePoints,r=this._data.points1,n=this._data.points2,s=this._data.colors,l=isNumber(this._data.transparency)?this._data.transparency:50;l=Math.min(l,100),l=Math.max(l,0);for(var c,u={},h=[],d=.25*this._data.getBarSpacing(),p=0;p<this._data.timePoints.length;p++){var f={point1:t?this._data.level1:r[p],point2:t?this._data.level2:n[p],timePoint:i[p]},_=o(f.point1)&&o(f.point2);if(_&&(c=s?s[p]:this._data.backcolor,h.push(f)),p===this._data.timePoints.length-1||s&&c!==s[p+1]||!_){if(h.length>0&&null!==c){var m=u[c]||[];m.push(h),u[c]=m}h=_?[f]:[]}}for(var v in u){var g=u[v];e.beginPath();for(var y=0;y<g.length;y++){var b=g[y],S=b[0].timePoint,w=b[0].point1;if(e.moveTo(S,w),1!==b.length){for(var P=1;P<b.length;P++)e.lineTo(b[P].timePoint,b[P].point1);for(P=b.length-1;P>=0;P--)e.lineTo(b[P].timePoint,b[P].point2)}else{var C=b[0].point2;e.lineTo(S+d,w),e.lineTo(S+d,C),e.lineTo(S-d,C),e.lineTo(S-d,w)}}e.closePath(),e.fillStyle=a.generateColor(v,l),e.fill()}}}},d.prototype.update=function(){this._invalidated=!0},d.prototype._plotNames=function(){return this._source.metaInfo().plots.map((function(e){return e.id}))},d.prototype._plotIndex1=function(){return null===this._plIndex1&&(this._plIndex1=this._plotNames().indexOf(this._plotAId())+1),this._plIndex1},d.prototype._plotIndex2=function(){return null===this._plIndex2&&(this._plIndex2=this._plotNames().indexOf(this._plotBId())+1),this._plIndex2},d.prototype._updateImpl=function(){if(this._points1=[],this._points2=[],this._colorsMap&&(this._colors=[]),this._timePoints=[],this._visible()){var e=this._source.priceScale(),t=this._source._model.timeScale();if(e&&!e.isEmpty()&&!this._source._model.timeScale().isEmpty()&&!this._source._series.bars().isEmpty()){if(this._isHlineFill){var i=this._source.firstValue(),r=this._source.properties().bands[this._bandAKey],n=this._source.properties().bands[this._bandBKey];this._level1=e.priceToCoordinate(r.value.value(),i),this._level2=e.priceToCoordinate(n.value.value(),i)}var o=this._source._model.timeScale().visibleBarsStrictRange();if(null!==o){var s=this._source._series.nearestIndex(o.firstBar(),c.NearestRight),a=this._source._series.nearestIndex(o.lastBar(),c.NearestLeft);if(!((s=this._correctStartBarIndex(s))>a)){var l=this._source.data().range(s,a);if(l.size()>0){var u=l.firstIndex(),h=l.lastIndex(),d=this._source.offset(this._plotAId()),p=this._source.offset(this._plotBId()),f=Math.max(d,p),_=Math.min(d,p),m=u+f,v=this._source.data().firstIndex();u>v&&(m=u<f+v?f+v:u);var g=h+_,y=this._source.data().lastIndex();h>y+_&&h<y&&(g=y+_),_<0&&h<=y+_&&(g=h);for(var b=m<u||m>h?u+f:m,S=m;S<=g;++S){if(this._timePoints.push(t.indexToCoordinate(b++)),this._colors){var w=this._source.data().valueAt(S-_);if(null!==w){var P=w[this._colorPlotOffset+1];null==P?this._colors.push(null):this._colors.push(this._colorValues[this._colorsMap[P]].color.value())}}if(!this._isHlineFill){var C=this._source.data().valueAt(S-d),T=this._source.data().valueAt(S-p);if(null!==C&&null!==T){var x=C[this._plotIndex1()],I=T[this._plotIndex2()]
;this._points1.push(x),this._points2.push(I)}}}}i=this._source.firstValue();e.pricesArrayToCoordinates(this._points1,i),e.pricesArrayToCoordinates(this._points2,i)}}}}},d.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.points1=this._points1,e.points2=this._points2,e.timePoints=this._timePoints,e.getBarSpacing=this._getBarSpacing,e.backcolor=this._color(),e.transparency=this._transparency(),e.isHlineFill=this._isHlineFill,e.level1=this._level1,e.level2=this._level2,this._colors&&(e.colors=this._colors),this._areaRenderer.setData(e),this._areaRenderer},d.prototype._plotAId=function(){r(!1,"Pure virtual call!")},d.prototype._plotBId=function(){r(!1,"Pure virtual call!")},d.prototype._color=function(){r(!1,"Pure virtual call!")},d.prototype._transparency=function(){r(!1,"Pure virtual call!")},d.prototype._visible=function(){r(!1,"Pure virtual call!")},d.prototype._correctStartBarIndex=function(e){return e},inherit(p,d),p.prototype._plotAId=function(){return this._source.properties().area[0].name.value()},p.prototype._plotBId=function(){return this._source.properties().area[1].name.value()},p.prototype._color=function(){return this._source.properties().areaBackground.backgroundColor.value()},p.prototype._transparency=function(){var e=this._source.properties().areaBackground.transparency.value();return l(e,0,100)},p.prototype._visible=function(){return this._source.properties().areaBackground.fillBackground.value()},inherit(f,d),f.prototype._initBandIndexes=function(e,t){this._bandAKey=null,this._bandBKey=null;for(var i=0;i<this._source.metaInfo().bands.length;++i){var r=this._source.metaInfo().bands[i];null!==this._bandAKey||r.id!==e?null!==this._bandBKey||r.id!==t||(this._bandBKey=i):this._bandAKey=i}},f.prototype._plotAId=function(){return this._fillMetaInfo.objAId},f.prototype._plotBId=function(){return this._fillMetaInfo.objBId},f.prototype._color=function(){return this._fillStyleProps.color.value()},f.prototype._transparency=function(){return this._fillStyleProps.transparency.value()},f.prototype._visible=function(){return this._fillStyleProps.visible.value()},f.prototype._correctStartBarIndex=function(e){var t=this._source.getMinFirstBarIndexForPlot(this._fillMetaInfo.id);return Math.max(t,e)},t.PlotFillPaneView=f,t.AreaBackgroundPaneView=p},x5Tw:function(e,t,i){"use strict";i.r(t),i.d(t,"setupChartEventHint",(function(){return u}));var r=i("Eyy1"),n=(i("YFKU"),i("Vdly")),o=i("mMWL"),s=i("e92V"),a=i("qFKp"),l=i("/3z9"),c=i("Kxc7");function u(e,t){if(void 0===t&&(t=!1),c.enabled("popup_hints")){var u,h,d,p,f=e.getContainer()[0],_=null,m=null;o.tool.subscribe((function(){if(Boolean(n.getBool("hint.touchPainting")))return;var e=o.tool.value();Object(s.b)(e)&&"LineToolRegressionTrend"!==e&&!a.CheckMobile.any()?v(window.t("Click to set a point"),"hint.touchPainting"):a.CheckMobile.any()&&"LineToolBrush"!==e&&Object(s.a)(e)?v(window.t("Move the point to position the anchor then tap to place"),"hint.touchPainting"):_&&_.hide()})),
o.createdLineTool.subscribe(null,(function(){var e=o.tool.value();"LineToolPath"!==e||Boolean(n.getBool("hint.finishBuildPathByDblClick"))?"LineToolPolyline"!==e||Boolean(n.getBool("hint.finishBuildPolylineByDblClick"))||v(window.t("Double-click to finish Polyline"),"hint.finishBuildPolylineByDblClick"):v(window.t("Double-click to finish Path"),"hint.finishBuildPathByDblClick")})),o.finishedLineTool.subscribe(null,(function(){if(_){var e=o.tool.value();"LineToolPath"===e?g("hint.finishBuildPathByDblClick"):"LineToolPolyline"===e&&g("hint.finishBuildPolylineByDblClick")}})),t||a.CheckMobile.any()||Boolean(n.getBool("hint.startFocusedZoom"))||(h=function(e){if(!Boolean(n.getBool("hint.startFocusedZoom")))if(e)_&&(m=null,g("hint.startFocusedZoom"));else{var t=l.isMacKeyboard?"⌘":"Ctrl";v(window.t("Press and hold {0} while zooming to maintain the chart position").format(t),"hint.startFocusedZoom")}},d=!1,p=function(e){e?(d&&h(e),u.onZoom().unsubscribe(null,p)):d||(h(e),d=!0)},(u=e).onZoom().subscribe(null,p),m=function(){return u.onZoom().unsubscribe(null,p)})}function v(e,t,n){if(_)_.show(e,n?void 0:g.bind(null,t));else{var s=o.tool.value();Promise.all([i.e("vendors_embed"),i.e(4),i.e(337),i.e(0),i.e("chart-event-hint")]).then(i.bind(null,"PN5r")).then((function(i){_=new i.ChartEventHintRenderer(Object(r.ensureNotNull)(f)),s===o.tool.value()&&_.show(e,n?void 0:g.bind(null,t))}))}}function g(e){n.setValue(e,!0,{forceFlush:!0}),Object(r.ensureNotNull)(_).destroy(),null!==m&&m(),_=null}}},x8jL:function(e,t,i){"use strict";i.r(t);var r=i("Eyy1"),n=i("MY2c"),o=i("bOGh"),s=i("mrSG"),a=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n._wv=t,n._newValue=i,n._oldValue=t.value(),n}return Object(s.__extends)(t,e),t.prototype.redo=function(){this._wv.setValue(this._newValue)},t.prototype.undo=function(){this._wv.setValue(this._oldValue)},t}(i("RDU5").UndoCommand),l=i("txPx"),c=i("aIyQ"),u=i.n(c);i.d(t,"createUndoHistory",(function(){return d}));var h=Object(l.getLogger)("Common.UndoHistory");function d(){var e=[],t=new n.UndoStack,i=new n.UndoStack,s=new u.a;function l(r){if(e.length>0)e[e.length-1].addCommand(r);else{i.clear();var n=t.head(),o=n&&n.text();n&&n.canMerge(r)?n.merge(r):t.push(r);var a=r.text();""!==a&&a!==o&&h.logNormal("DO: "+a)}r.executeOnPush()&&r.redo(),e.length||s.fire(c())}function c(){var e=t.head(),r=i.head();return{enableUndo:!t.isEmpty(),undoText:void 0===e?void 0:e.text(),enableRedo:!i.isEmpty(),redoText:void 0===r?void 0:r.text()}}return{beginUndoMacro:function(t){var i=new o.a(t);return e.push(i),i},clearStack:function(){t.clear(),i.clear(),s.fire(c())},createUndoCheckpoint:function(){return{lastActualCommand:t.isEmpty()?null:t.head()}},endUndoMacro:function(){var t=Object(r.ensureDefined)(e.pop());t.isEmpty()||l(t)},pushUndoCommand:l,redo:function(){if(i.isEmpty())return!1;var e=i.pop();return!!e&&(e.redo(),t.push(e),h.logNormal("REDO: "+e.text()),s.fire(c()),!0)},redoStack:function(){return i},setWatchedValue:function(e,t,i){if(e.value()!==t){var r=new a(e,t,i);l(r),r.redo()}},
undo:function(){if(t.isEmpty())return!1;var e=t.pop();return!!e&&(e.undo(),i.push(e),h.logNormal("UNDO: "+e.text()),s.fire(c()),!0)},undoStack:function(){return t},undoToCheckpoint:function(e){for(;!t.isEmpty()&&e.lastActualCommand!==t.head();)t.pop().undo();i.clear(),s.fire(c())},state:c,onChange:function(){return s}}}},xD5v:function(e,t,i){"use strict";var r=i("WqyU");function n(e){var t=JSON.stringify(e);return t=t.replace(/'/g,"\\'")}e.exports={formatCallstudyArg:n,prepareCallStudyArgs:function(e,t){var i={};if(t.isTVScript){var o=t.defaults.inputs.text;i.text=r.patchILTemplate(o,t,e)}else for(var s=Object.keys(e),a=s.length-1;a>=0;a--){var l=s[a],c=e[l]?e[l].id:null;c&&e[c]&&(i[c]=e[c])}return n(i)}}},xDuj:function(e,t,i){"use strict";i.r(t),i.d(t,"translatedIntervalString",(function(){return n}));i("YFKU");var r=i("pPtI");function n(e){var t=Object(r.getTranslatedResolutionModel)(e,!0);return null===t?e:t.multiplier+(t.mayOmitShortKind?"":t.shortKind)}},xUGI:function(e,t,i){"use strict";var r=i("GH0z").PercentageFormatter,n=i("zXvd").NumericFormatter,o=i("zDbI").CHART_FONT_FAMILY,s=i("d1Pk").fibLevelPrice,a=i("ikwP").drawScaled;function l(e,t,i){this._fibLevelsBasedOnLogScaleProperty=e,this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=1,this._actualWidth=1,this._numericFormatter=new n,this._percentageFormatter=new r,this._pixelRatio=i.pixelRatio,this._recreateCanvas(this._actualWidth,l.ROW_HEIGHT*this._actualCapacity),this._levelsCount=t}l.prototype.destroy=function(){this._canvas=null,this._cache=null},l.prototype.topByRow=function(e){return e*l.ROW_HEIGHT},l.prototype.rowHeight=function(e){return l.ROW_HEIGHT},l.prototype.devicePixelRatio=function(){return this._canvas&&this._canvas.pixelRatio||0},l.prototype._recreateCanvas=function(e,t){this._canvas=document.createElement("canvas"),this._canvas.width=Math.ceil(e*this._pixelRatio),this._canvas.height=Math.ceil(t*this._actualCapacity*this._pixelRatio),this._cache=this._canvas.getContext("2d"),this._cache.font="12px "+o},l.prototype.canvas=function(){return this._canvas},l.ROW_HEIGHT=14,l.prototype.points=function(e){return[e.points()[0],e.points()[1]]},l.prototype._selectStartPrice=function(e,t){return t?e.points()[0].price:e.points()[1].price},l.prototype.startPoint=function(e,t){var i=this._selectStartPrice(e,t);if(!this._calculateLogLevels(e))return{price:i};var r=e.ownerSource().firstValue();return{price:i,coordinate:e.priceScale().priceToCoordinate(i,r)}},l.prototype._calculatePriceRange=function(e,t,i){return i?t.price-e.price:e.price-t.price},l.prototype.priceRange=function(e,t){var i=this.points(e),r=i[0],n=i[1],o=this._calculatePriceRange(r,n,t);if(!this._calculateLogLevels(e))return{price:o};var s=e.priceScale(),a=e.ownerSource().firstValue(),l=s.priceToCoordinate(r.price,a),c=s.priceToCoordinate(n.price,a);return{price:o,coordinate:t?c-l:l-c}},l.prototype.sourceIsReady=function(e){return e.points().length>=2},l.prototype._calculateLogLevels=function(e){
return e.fibLevelsBasedOnLogScale&&e.fibLevelsBasedOnLogScale()},l.prototype._calculateWidth=function(e){if(!this.sourceIsReady(e))return null;var t=this._canvas.getContext("2d");t.font="12px "+o;var i=!!e.properties().showPrices&&e.properties().showPrices.value(),r=!!e.properties().coeffsAsPercents&&e.properties().coeffsAsPercents.value(),n=e.properties().showCoeffs.value(),a=this.points(e),l=a[0],c=a[1];if(!l||!c)return null;var u=e.ownerSource().firstValue();if(null===u)return 0;var h=!1,d=e.properties();d.reverse&&d.reverse.value()&&(h=d.reverse.value());for(var p=this.startPoint(e,h),f=this.priceRange(e,h),_=this._calculateLogLevels(e),m=0,v=[],g=1;g<=this._levelsCount;g++){var y=d["level"+g].coeff.value(),b="";if(n&&(b+=r?this._percentageFormatter.format(Math.round(1e4*y)/100):this._numericFormatter.format(y)),i){var S=e.priceScale(),w=s(p,f,y,S,u,_);b+="("+S.formatPrice(w,u)+")"}var P={text:b,left:m,width:t.measureText(b).width+4};v.push(P),m+=P.width}return{totalWidth:m,cells:v}},l.prototype._effectiveState=function(e){var t={},i=e.properties();i.showPrices&&(t.showPrices=i.showPrices.value()),i.coeffsAsPercents&&(t.coeffsAsPercents=i.coeffsAsPercents.value()),t.showCoeffs=i.showCoeffs.value();var r=e.priceScale();r&&(r.formatter().state&&(t.formatter=e.priceScale().formatter().state()),t.logLevels=this._calculateLogLevels(e)),i.reverse&&(t.reverse=i.reverse.value()),t.p1=e.points()[0],t.p2=e.points()[1],3===e.points().length&&(t.p3=e.points()[2]),t.items=[];for(var n=1;n<=this._levelsCount;n++){var o=i["level"+n],s={coeff:o.coeff.value(),color:o.color.value()};t.items.push(s)}return t},l.prototype._findEmptyRow=function(e){for(var t=0;this._rowsToSources[t];)t++;return this._rowsToSources[t]=e,t>=this._actualCapacity&&(this._actualCapacity++,this._recreateCanvas(this._actualWidth,l.ROW_HEIGHT*this._actualCapacity)),t},l.prototype._repaintSource=function(e,t,i){var r=l.ROW_HEIGHT*i.row;a(this._cache,this._pixelRatio,function(){this._cache.clearRect(0,r,this._actualWidth,l.ROW_HEIGHT),this._cache.textBaseline="bottom",this._cache.font="12px "+o,r+=l.ROW_HEIGHT;for(var i=0;i<e.cells.length;i++){var n=e.cells[i];this._cache.fillStyle=t.items[i].color,this._cache.fillText(n.text,n.left,r)}}.bind(this))},l.prototype.removeSource=function(e){if(this._sourcesToRow[e]){var t=this._sourcesToRow[e].row;a(this._cache,this._pixelRatio,(function(){this._cache.clearRect(0,this.topByRow(t),this._actualWidth,l.ROW_HEIGHT)})),delete this._sourcesToRow[e],delete this._rowsToSources[t]}},l.prototype._effectiveStatesEquals=function(e,t){var i,r,n,o,s=function(e,t){return!(!e&&!t)&&(!(!e||t)||(!(e||!t)||(e.index!==t.index||e.price!==t.price)))};if(e&&!t)return!1;if(!e&&t)return!1;if(e.showPrices!==t.showPrices)return!1;if(e.coeffsAsPercents!==t.coeffsAsPercents)return!1;if(e.showCoeffs!==t.showCoeffs)return!1;if(e.reverse!==t.reverse)return!1;if(e.logLevels!==t.logLevels)return!1;if(i=e.formatter,r=t.formatter,
(i||r)&&(i&&!r||!i&&r||i.minMove!==r.minMove||i.minMove2!==r.minMove2||i.fractional!==r.fractional||i.fractionalLength!==r.fractionalLength))return!1;if(s(e.p1,t.p1))return!1;if(s(e.p2,t.p2))return!1;if(s(e.p3,t.p3))return!1;if(e.items.length!==t.items.length)return!1;for(var a=0;a<e.items.length;a++)if(n=e.items[a],o=t.items[a],n.coeff!==o.coeff||n.color!==o.color)return!1;return!0},l.prototype.updateSource=function(e){var t=e.properties().symbol.value();if(this._currentSymbol!==t&&(this._currentSymbol=t,this._sourcesToRow={},this._rowsToSources={}),!this._sourcesToRow[e.id()]){var i=this._findEmptyRow(e.id());this._sourcesToRow[e.id()]={effectiveState:null,row:i}}var r=this._sourcesToRow[e.id()].effectiveState,n=this._effectiveState(e);if(!this._effectiveStatesEquals(r,n)){var o=this._calculateWidth(e);if(o){this._sourcesToRow[e.id()].effectiveState=n,o.totalWidth>this._actualWidth&&(this._recreateCanvas(o.totalWidth,l.ROW_HEIGHT*this._actualCapacity),this._actualWidth=o.totalWidth);i=this._sourcesToRow[e.id()];this._repaintSource(o,n,i),this._sourcesToRow[e.id()].effectiveState=n,this._sourcesToRow[e.id()].preparedCells=o}else this._sourcesToRow[e.id()].effectiveState=null}return this._sourcesToRow[e.id()]},e.exports=l},xWfy:function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"b",(function(){return S})),i.d(t,"c",(function(){return w})),i.d(t,"d",(function(){return P}));var r=i("tqok"),n=i("SqfW"),o=i("+a6K"),s=i("KG+6"),a=i("fFKx"),l=i("VSsv"),c=i("t1rv"),u=i("5vwb"),h=i("6Y0w"),d=i("nInm"),p=i("sqlk"),f=i("vaiT"),_=i("2tp3"),m=i("7Fue"),v=function(){function e(e,t){if(this._indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._dwglabels=new Map,this._dwglines=new Map,"data"===e){var i=t;this._indexes=i.indexes,this._vertlines=g(i.vertlines,this._indexes,n.b),this._horizlines=g(i.horizlines,this._indexes,a.b),this._lines=g(i.lines,this._indexes,c.b),this._hlines=g(i.hlines,this._indexes,l.c),this._textmarks=g(i.textmarks,this._indexes,d.c),this._shapemarks=g(i.shapemarks,this._indexes,h.b),this._backgrounds=g(i.backgrounds,this._indexes,o.b),this._polygons=g(i.polygons,this._indexes,u.b),this._trendchannels=g(i.trendchannels,this._indexes,p.b),this._hhists=g(i.hhists,this._indexes,s.d),this._dwglabels=g(i.dwglabels,this._indexes,f.e),this._dwglines=g(i.dwglines,this._indexes,_.d)}else if("state"===e){var r=t;this._indexes=r.indexes||[],this._vertlines=y(r.vertlines,this._indexes,n.b),this._horizlines=y(r.horizlines,this._indexes,a.b),this._lines=y(r.lines,this._indexes,c.b),this._hlines=y(r.hlines,this._indexes,l.c),this._textmarks=y(r.textmarks,this._indexes,d.c),this._shapemarks=y(r.shapemarks,this._indexes,h.b),this._backgrounds=y(r.backgrounds,this._indexes,o.b),this._polygons=y(r.polygons,this._indexes,u.b),this._trendchannels=y(r.trendchannels,this._indexes,p.b),
this._hhists=y(r.hhists,this._indexes,s.d),this._dwglabels=y(r.dwglabels,this._indexes,f.e),this._dwglines=y(r.dwglines,this._indexes,_.d)}this._hhistsByTimePointIndex=Object(m.b)(this._hhists)}return e.prototype.horizlines=function(){return this._horizlines},e.prototype.vertlines=function(){return this._vertlines},e.prototype.lines=function(){return this._lines},e.prototype.hlines=function(){return this._hlines},e.prototype.textmarks=function(){return this._textmarks},e.prototype.shapemarks=function(){return this._shapemarks},e.prototype.backgrounds=function(){return this._backgrounds},e.prototype.polygons=function(){return this._polygons},e.prototype.trendchannels=function(){return this._trendchannels},e.prototype.hhists=function(){return this._hhists},e.prototype.dwglabels=function(){return this._dwglabels},e.prototype.dwglines=function(){return this._dwglines},e.prototype.hhistsByTimePointIndex=function(){return this._hhistsByTimePointIndex},e}();function g(e,t,i){var r=new Map;return e.forEach((function(e,n){var o=r.get(n)||new Set;e.forEach((function(e){var r=i(e,t);null!==r&&o.add(r)})),r.set(n,o)})),r}function y(e,t,i){var r=new Map;if(void 0===e)return r;for(var n=function(e){var n=e.styleId,o=r.get(n)||new Set;e.data.forEach((function(e){var r=i(e,t);null!==r&&o.add(r)})),r.set(n,o)},o=0,s=e;o<s.length;o++){n(s[o])}return r}function b(e,t,i,r){var n=[];return e.forEach((function(e,o){e.forEach((function(e){!function(e,t,i){for(var r=null,n=0,o=e;n<o.length;n++){var s=o[n];s.styleId===t&&(r=s)}null===r&&(r={styleId:t,data:[]},e.push(r)),r.data.push(i)}(n,o,r(e,++t.currentId,i))}))})),n.length>0?n:void 0}function S(){return new v}function w(e){return new v("state",e)}function P(e){var t=function(e){var t=new Set;e.horizlines().forEach((function(e,i){e.forEach((function(e){t.add(e.startIndex),t.add(e.endIndex)}))})),e.vertlines().forEach((function(e,i){e.forEach((function(e){t.add(e.index)}))})),e.lines().forEach((function(e,i){e.forEach((function(e){t.add(e.startIndex),t.add(e.endIndex)}))})),e.textmarks().forEach((function(e,i){e.forEach((function(e){t.add(e.time)}))})),e.shapemarks().forEach((function(e,i){e.forEach((function(e){t.add(e.time)}))})),e.backgrounds().forEach((function(e,i){e.forEach((function(e){t.add(null!==e.start?e.start:r.INVALID_TIME_POINT_INDEX),t.add(e.stop)}))})),e.polygons().forEach((function(e,i){e.forEach((function(e){e.points.forEach((function(e){t.add(e.index)}))}))})),e.trendchannels().forEach((function(e,i){e.forEach((function(e){t.add(e.startIndex),t.add(e.endIndex)}))})),e.hhists().forEach((function(e,i){e.forEach((function(e){t.add(e.firstBarTime),t.add(e.lastBarTime)}))})),e.dwglabels().forEach((function(e,i){e.forEach((function(e){t.add(e.x)}))})),e.dwglines().forEach((function(e,i){e.forEach((function(e){t.add(e.x1),t.add(e.x2)}))}));var i=Array.from(t);return i.sort((function(e,t){return e-t})),i}(e),i={indexes:t},m={currentId:0};return i.vertlines=b(e.vertlines(),m,t,n.a),i.horizlines=b(e.horizlines(),m,t,a.a),i.lines=b(e.lines(),m,t,c.a),i.hlines=b(e.hlines(),m,t,l.b),
i.textmarks=b(e.textmarks(),m,t,d.b),i.shapemarks=b(e.shapemarks(),m,t,h.a),i.backgrounds=b(e.backgrounds(),m,t,o.a),i.polygons=b(e.polygons(),m,t,u.a),i.trendchannels=b(e.trendchannels(),m,t,p.a),i.hhists=b(e.hhists(),m,t,s.c),i.dwglabels=b(e.dwglabels(),m,t,f.d),i.dwglines=b(e.dwglines(),m,t,_.b),i}},xlAu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._start=0,this._size=0,this._buffer=new Array(e)}return e.prototype.size=function(){return this._size},e.prototype.capacity=function(){return this._buffer.length},e.prototype.enqueue=function(e){this._size<this._buffer.length?this._size++:this._start=(this._start+1)%this._buffer.length;var t=(this._start+this._size-1)%this._buffer.length;this._buffer[t]=e},e.prototype.dequeue=function(){if(0===this._size)throw new Error("Buffer is empty");var e=this._buffer[this._start];return this._buffer[this._start]=void 0,this._start=(this._start+1)%this._buffer.length,this._size--,e},e.prototype.get=function(e){if(e>=this._size)throw new Error("Index is out of range");var t=(this._start+e)%this._buffer.length;return this._buffer[t]},e.prototype.forEach=function(e,t){for(var i=0;i<this._size;i++){var r=(this._start+i)%this._buffer.length;e.call(t,this._buffer[r],r,this)}},e.prototype.clear=function(){for(var e=this._buffer.length,t=0;t<e;t++)this._buffer[t]=void 0;this._start=0,this._size=0},e}();t.CircularBuffer=r},xlKU:function(e,t,i){"use strict";i.r(t),i.d(t,"showSignModal",(function(){return n})),i.d(t,"isSignModalOpen",(function(){return o}));var r=function(){return!1};function n(e){return new Promise((function(t){Promise.all([i.e("vendors_embed"),i.e("dialogs-core"),i.e(5),i.e(11),i.e(14),i.e(76),i.e(231),i.e(251),i.e(17),i.e(148),i.e(191),i.e("signin-dialog")]).then(function(n){var o=i("YTu0");t(o.showSignModal(e)),r=o.isSignModalOpen}.bind(null,i)).catch(void 0)}))}function o(){return r()}},xlbu:function(e,t,i){"use strict";i.r(t),i.d(t,"Telemetry",(function(){return u})),i.d(t,"telemetry",(function(){return h}));i("bSeV");var r=i("aIyQ"),n=i.n(r),o=i("BHQF"),s=i("qFKp"),a=(i("NNtz"),i("txPx")),l=Object(a.getLogger)("Common.Telemetry"),c=["before_websocket_connection_time_frame","websocket_connection_time_frame","first_series_full_time_frame","page_full_load_time_frame","page_load_time_frame"],u=function(){function e(){this.reportSent=new n.a,this.timeCounters={series:{marks:[]},study:{},pine:{}},this._timeout=null,this._commonAdditionalData={cluster:null,userId:"0"},this._reportStash={}}return e.prototype.setSessionInfo=function(e){var t=this._parseCluster(e);null!==t&&(this._commonAdditionalData.cluster=t)},e.prototype.sendReport=function(e,t,i){if(this._isAbleToSendReport(t)){var r=this._getSubserviceType(e),n=this._getHost(e,r);null!==n?(i=void 0===i?{count:1}:i,this._addReportToStash(i,t,n),this._timeout||(this._timeout=setTimeout(this._sendTelemetryToService.bind(this),15e3))):l.logError("Unable to get host for counter: "+t+", metric type: "+e+", serivce type: "+r)}},
e.prototype.sendChartReport=function(e,t,i){void 0===i&&(i=!0),this._updateUserInfo(),t=void 0===t?{count:1}:t,i&&(t=this._appendCommonAdditionalInfo(t,["cluster","userId"])),this.sendReport("charts",e,t)},e.prototype._updateUserInfo=function(){var e="user"in window&&"id"in window.user?window.user.id:"0";this._commonAdditionalData.userId=String(e)},e.prototype._isAbleToSendReport=function(e){var t=window.TELEMETRY_HOSTS,i=c.includes(e),r=Boolean(window.TradingView.onChartPage||Object(s.onWidget)());return t&&(!i||r)},e.prototype._sendTelemetryToService=function(){for(var e in this._reportStash)if(this._reportStash.hasOwnProperty(e)){var t=this._renameAllParams(this._reportStash[e]),i={event:"report_stash",params:this._cleanAllParams(t)};l.logDebug("Report to host: "+e+"; stash: "+JSON.stringify(this._reportStash[e])),this.reportSent.fire(this._reportStash[e]),delete this._reportStash[e],Object(o.fetch)(e+"/report",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(i)})}this._timeout=null},e.prototype._getHost=function(e,t){var i=window.TELEMETRY_HOSTS,r=i[e]&&i[e][t];return Boolean(r)?r:null},e.prototype._getSubserviceType=function(e){var t="free";return Object(s.onWidget)()?t="widget":window.user.is_pro&&(t="pro"),["charts","site"].includes(e)||(t="all"),t},e.prototype._parseCluster=function(e){var t;try{t=JSON.parse(e).session_id}catch(r){return l.logError("Could not parse cluster id (session id)"),null}var i=/(.*@)(.*)/gi.exec(t);return null!==i&&i.length>=3?i[2]:null},e.prototype._appendCommonAdditionalInfo=function(e,t){var i=this;return t.forEach((function(t){t in i._commonAdditionalData&&(e.additional=e.additional||{},e.additional[t]=i._commonAdditionalData[t])})),e},e.prototype._renameAllParams=function(e){var t=this,i={},r=function(r){e.hasOwnProperty(r)&&(i[r]=[],e[r].forEach((function(e){i[r].push(t._renameEntryParams(e))})))};for(var n in e)r(n);return i},e.prototype._renameEntryParams=function(e){var t={count:"c",value:"v",text:"t",additional:"a"};return Object.keys(e).reduce((function(i,r){return i[t[r]]=e[r],i}),{})},e.prototype._cleanAllParams=function(e){var t=this,i={},r=function(r){if(e.hasOwnProperty(r)){i[r]=[];var n={c:0};e[r].forEach((function(e){var o=t._cleanEntryParams(e),s=Object.keys(o).length;1===s&&void 0!==o.c?n.c+=o.c:s>0&&i[r].push(o)})),n.c>0&&i[r].push(n),0===i[r].length&&delete i[r]}};for(var n in e)r(n);return i},e.prototype._cleanEntryParams=function(e){var t=Object.keys(e).reduce((function(t,i){return"c"!==i&&"t"!==i||e[i]?(t[i]=e[i],t):t}),{});return"c"in t||"v"in t||"t"in t?t:{}},e.prototype._addReportToStash=function(e,t,i){i in this._reportStash||(this._reportStash[i]={}),t in this._reportStash[i]||(this._reportStash[i][t]=[]),Object.keys(e).length>0&&this._reportStash[i][t].push(e)},e}(),h=new u},xnA2:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=window.t("Fib Channel");function s(e,t){this._constructor="LineToolFibChannel";var n=t||s.createProperties();r.call(this,e,n),this.version=s.version,
Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("CR3a").FibChannelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.LevelsCount=24,s.version=2,s.prototype.levelsCount=function(){return s.LevelsCount},s.prototype.migrateVersion=function(e,t,i){i.properties.removeProperty("reverse")},s.prototype.pointsCount=function(){return 3},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Fib Channel"},s.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("17v9").FibDrawingsWith24LevelsDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolfibchannel",e,!1,{range:[1,24],names:["coeff","color","visible"]});return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolFibChannel=s},xrEm:function(e,t,i){},xtHi:function(e,t,i){"use strict";i.r(t),i.d(t,"detachToPopup",(function(){return a})),i.d(t,"screenBox",(function(){return l}));var r=i("Eyy1"),n=i("lW/c"),o=i("6et/"),s=i("lxNp");function a(e,t){var i=Object.assign({},t),r=e.bridge().container.value();r&&(i.useStylesFrom=r.ownerDocument||void 0);var n=c(i);return!!n&&(e.pushOwner(n.allocate()),!0)}function l(e){var t=Object(r.ensureNotNull)(e.ownerDocument),i=Object(r.ensureNotNull)(t.defaultView),n=e.getBoundingClientRect(),o={left:n.left+i.pageXOffset,top:n.top+i.pageYOffset,width:e.clientWidth,height:e.clientHeight},s=i.innerWidth/t.documentElement.clientWidth;return isFinite(s)&&(o.left*=s,o.top*=s,o.width*=s,o.height*=s),o.left+=i.screenLeft||i.screenX||0,o.top+=i.screenTop||i.screenY||0,o}var c=function(e){void 0===e&&(e={});for(var t="menubar=no,toolbar=no,location=no,personalbar=no,status=no",r=0,a=["top","left","width","height"];r<a.length;r++){var l=a[r],c=Number(e[l]);isFinite(c)&&c>=0&&(t+=","+l+"="+c)}var u=window.open("",e.name||"_blank",t);if(!u||u.closed)return null;var h=null;try{(h=u.document).close()}catch(f){return null}if(h.open(),h.write('<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=Edge" /></head><body></body></html>'),h.close(),null!=e.title&&(h.title=String(e.title)),e.useStylesFrom){h.head.appendChild(function(e,t){for(var i=e.querySelectorAll('style, link[rel~="stylesheet"]'),r=t.createDocumentFragment(),n=0;n<i.length;n++){for(var o=i[n],s=t.createElement(o.tagName),a=0;a<o.attributes.length;a++){var l=o.attributes[a];s.setAttribute(l.nodeName,l.nodeValue||"")}var c=o.textContent;c&&(s.textContent=c),r.appendChild(s)}return r}(e.useStylesFrom,h));var d=h.createElement("style");d.textContent="html, body {min-width: 0 !important; max-width: none !important}",h.head.appendChild(d)}var p=new n.Root(u);return function(e,t,r){var n=!1;Object(o.listen)(t),Object(s.registerWindow)(t)
;var a=null;Promise.all([Promise.resolve().then(i.bind(null,"oiZD")),Promise.resolve().then(i.bind(null,"bMzf"))]).then((function(e){var i=e[0],r=e[1];n||(a=i.watchedTheme.spawn()).subscribe((function(e){r.applyTheme(e,t)}),{callWithLast:!0})})),Promise.resolve().then(i.bind(null,"lxNp")).then((function(e){n||e.registerWindow(t)}));var l=function(){n=!0,e&&e.removeEventListener("unload",l,!1),t&&(t.removeEventListener("unload",l,!1),t.close()),r&&r.free(),a&&(a.destroy(),a=null)};e.addEventListener("unload",l,!1),t.addEventListener("unload",l,!1)}(window,u,p),p}},"xz+e":function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("7KDR").Action,o=i("Ocx9").DefaultProperty,s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],a=window.t("Elliott Impulse Wave (12345)"),l=window.t("Elliott Triangle Wave (ABCDE)"),c=window.t("Elliott Triple Combo Wave (WXYXZ)"),u=window.t("Elliott Correction Wave (ABC)"),h=window.t("Elliott Double Combo Wave (WXY)"),d=[{value:s[0],title:window.t("Supermillennium")},{value:s[1],title:window.t("Millennium")},{value:s[2],title:window.t("Submillennium")},{value:s[3],title:window.t("Grand Supercycle")},{value:s[4],title:window.t("Supercycle")},{value:s[5],title:window.t("Cycle")},{value:s[6],title:window.t("Primary")},{value:s[7],title:window.t("Intermediate")},{value:s[8],title:window.t("Minor",{context:"wave"})},{value:s[9],title:window.t("Minute",{context:"wave"})},{value:s[10],title:window.t("Minuette")},{value:s[11],title:window.t("Subminuette")},{value:s[12],title:window.t("Micro")},{value:s[13],title:window.t("Submicro")},{value:s[14],title:window.t("Minuscule")}];function p(e,t){var n=t||p.createProperties();r.call(this,e,n),this.version=p.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Ht/7").ElliottLabelsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function f(e,t){p.call(this,e,t)}function _(e,t){this._constructor="LineToolElliottImpulse";var i=t||_.createProperties();f.call(this,e,i)}function m(e,t){this._constructor="LineToolElliottTriangle";var i=t||m.createProperties();f.call(this,e,i)}function v(e,t){this._constructor="LineToolElliottTripleCombo";var i=t||v.createProperties();f.call(this,e,i)}function g(e,t){p.call(this,e,t)}function y(e,t){this._constructor="LineToolElliottCorrection";var i=t||y.createProperties();g.call(this,e,i)}function b(e,t){var i=t||b.createProperties();g.call(this,e,i),this._constructor="LineToolElliottDoubleCombo"}inherit(p,r),p.version=4,p.migrateState=function(e){var t={0:11,1:10,2:9,3:8,4:7,5:6,6:5,7:4,8:3},i={0:11,1:8};"LineToolElliottSubminuette"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottMinor"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottCircle"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottMinorRetr"===e.type&&(e.type="LineToolElliottCorrection",e.state.degree=i[e.state.wavesize]),
"LineToolElliottMajorRetr"===e.type&&(e.type="LineToolElliottCorrection",e.state.degree=i[e.state.wavesize])},p.prototype.migrateVersion=function(e,t,i){if(i.properties.hasChild("background")&&i.properties.removeProperty("background"),i.properties.hasChild("backgroundColor")&&i.properties.removeProperty("backgroundColor"),i.properties.hasChild("showBackground")&&i.properties.removeProperty("showBackground"),1===e){var r=Object.assign({},this._timePoint[0]);this._timePoint.unshift(r),this._points.length>0&&(r=Object.assign({},this._points[0]),this._points.unshift(r))}},p.prototype.applyTemplate=function(e){delete e.background,delete e.backgroundColor,delete e.showBackground,r.prototype.applyTemplate.call(this,e)},p.prototype.translatedType=function(){return"Elliott Labels"},p.prototype.name=function(){return"Elliott Labels"},p.prototype.additionalActions=function(e){var t=this;return[new n({label:window.t("Degree"),subItems:s.map((function(i){var r=d.filter((function(e){return e.value===i}))[0];return new n({label:r.title,checkable:!0,checked:t.properties().degree.value()===i,onExecute:function(){e.setProperty(t.properties().degree,i,"Change Elliott Degree")}})}))})]},p.prototype.label=function(e){var t=s.length-this.properties().degree.value()-1,i=Math.floor(t/3);return{group:i,bold:!!(i%2),decoration:["","brackets","circle"][t%3],label:this.labelsGroup()[i][e]}},p.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("UHSU").ElliottPatternDefinitionsViewModel}.bind(null,i)).catch(i.oe)},p.prototype.availableDegreesValues=function(){return d},p.createProperties=function(e){var t=new o("linetoolelliott",e);return p._configureProperties(t),t},p._configureProperties=function(e){r._configureProperties(e)},inherit(f,p),f.prototype.pointsCount=function(){return 6},f._configureProperties=function(e){p._configureProperties(e)},inherit(_,f),_._labelsGroups=[["0","1","2","3","4","5"],["0","i","ii","iii","iv","v"],["0","1","2","3","4","5"],["0","I","II","III","IV","V"],["0","1","2","3","4","5"]],_.prototype.translatedType=function(){return a},_.prototype.name=function(){return"Elliott Impulse Wave (12345)"},_.prototype.labelsGroup=function(){return _._labelsGroups},_.createProperties=function(e){var t=new o("linetoolelliottimpulse",e);return _._configureProperties(t),t},_._configureProperties=function(e){f._configureProperties(e)},inherit(m,f),m._labelsGroups=[["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"]],m.prototype.translatedType=function(){return l},m.prototype.name=function(){return"Elliott Triangle Wave (ABCDE)"},m.prototype.labelsGroup=function(){return m._labelsGroups},m.createProperties=function(e){var t=new o("linetoolelliotttriangle",e);return m._configureProperties(t),t},m._configureProperties=function(e){f._configureProperties(e)},inherit(v,f),
v._labelsGroups=[["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"]],v.prototype.translatedType=function(){return c},v.prototype.name=function(){return"Elliott Triple Combo Wave (WXYXZ)"},v.prototype.labelsGroup=function(){return v._labelsGroups},v.createProperties=function(e){var t=new o("linetoolelliotttriplecombo",e);return v._configureProperties(t),t},v._configureProperties=function(e){f._configureProperties(e)},inherit(g,p),g.prototype.pointsCount=function(){return 4},g._configureProperties=function(e){p._configureProperties(e)},inherit(y,g),y._labelsGroups=[["0","A","B","C"],["0","a","b","c"],["0","A","B","C"],["0","a","b","c"],["0","A","B","C"]],y.prototype.translatedType=function(){return u},y.prototype.name=function(){return"Elliott Correction Wave (ABC)"},y.prototype.labelsGroup=function(){return y._labelsGroups},y.createProperties=function(e){var t=new o("linetoolelliottcorrection",e);return y._configureProperties(t),t},y._configureProperties=function(e){g._configureProperties(e)},inherit(b,g),b._labelsGroups=[["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"]],b.prototype.translatedType=function(){return h},b.prototype.name=function(){return"Elliott Double Combo Wave (WXY)"},b.prototype.labelsGroup=function(){return b._labelsGroups},b.createProperties=function(e){var t=new o("linetoolelliottdoublecombo",e);return b._configureProperties(t),t},b._configureProperties=function(e){g._configureProperties(e)},t.LineToolElliott=p,t.LineToolElliottImpulse=_,t.LineToolElliottTriangle=m,t.LineToolElliottTripleCombo=v,t.LineToolElliottCorrection=y,t.LineToolElliottDoubleCombo=b},xzdg:function(e,t,i){"use strict";i.r(t);var r=i("Eyy1"),n=i("YFKU"),o=i("7KDR"),s=i("ikwP"),a=i("ogJP"),l=i("jFln"),c=i("1gmO"),u=i("u+0B"),h=i("XlJ7"),d=i("JWMC"),p=i("zDbI"),f=i("Hr11"),_=i("Kxc7").enabled("charting_library_debug_mode"),m=function(){function e(e,t,i,r){this._textWidthCache=new u.TextWidthCache(200),this._fontSize=0,this._color="",this._font="",this._keys=[],this._hash=new Map,this._fontSize=e,this._color=t,this._font=Object(h.makeFont)(e,i,r)}return e.prototype.destroy=function(){delete this._textWidthCache,this._keys=[],this._hash.clear()},e.prototype.paintTo=function(e,t,i,r,n){var o=this._getLabelImage(e,t);if("left"!==n){var a=Object(s.getCanvasDevicePixelRatio)(e.canvas);i-=Math.floor(o.textWidth*a)}r-=Math.ceil(o.height/2),e.drawImage(o.canvas,i,r,o.width,o.height)},e.prototype.getLabelHeight=function(e,t){return this._getLabelImage(e,t).height},e.prototype._getLabelImage=function(e,t){var i,n=this;if(this._hash.has(t))i=Object(r.ensureDefined)(this._hash.get(t));else{if(this._keys.length>=200){var o=Object(r.ensureDefined)(this._keys.shift());this._hash.delete(o)}
var a=Object(s.getCanvasDevicePixelRatio)(e.canvas),l=Math.ceil(this._fontSize/4.5),c=Math.round(this._fontSize/10),u=Math.ceil(this._textWidthCache.measureText(e,t)),h=Object(f.ceiledEven)(Math.round(u+2*l)),d=Object(f.ceiledEven)(this._fontSize+2*l),p=Object(s.createDisconnectedCanvas)(document,new s.Size(h,d),a);i={text:t,textWidth:Math.round(Math.max(1,u)),width:Math.floor(h*a),height:Math.floor(d*a),canvas:p},0!==u?(this._keys.push(i.text),this._hash.set(i.text,i)):_&&console.log('Canvas 2d context measureText return zero width for "'+t+'" text'),e=Object(s.getContext2D)(i.canvas),Object(s.drawScaled)(e,a,(function(){e.font=n._font,e.fillStyle=n._color,e.fillText(t,0,d-l-c)}))}return i},e}(),v=i("CPmC"),g=i("+cnz"),y=i("CxTi"),b=function(){function e(){var e=this;this._width=null,this._currencyInfo=null,this._fontSize=0,this._currencyLabelWrapper=document.createElement("div"),this._currencyLabelWrapper.className=y["price-axis-currency-label-wrapper"],this._currencyLabel=document.createElement("span"),this._currencyLabel.className=y["price-axis-currency-label"],this._currencyLabel.classList.add("apply-common-tooltip"),Object(v.b)(this._currencyLabel,"text",(function(t){return e._tooltipContent()})),this._currencyText=document.createElement("span"),this._currencyText.className=y["price-axis-currency-label-text"],this._currencyLabel.appendChild(this._currencyText),this._arrowDown=document.createElement("span"),this._arrowDown.className=y["price-axis-currency-label-arrow-down"],this._arrowDown.innerHTML=g,this._currencyLabel.appendChild(this._arrowDown),this._currencyLabelWrapper.appendChild(this._currencyLabel)}return e.prototype.element=function(){return this._currencyLabelWrapper},e.prototype.labelElement=function(){return this._currencyLabel},e.prototype.isVisible=function(){return!this._currencyLabel.classList.contains("js-hidden")},e.prototype.width=function(){if(null!==this._width)return this._width;var e=this._currencyLabel.getBoundingClientRect();return this._width=e.right-e.left+1+8,this._width},e.prototype.drawLabel=function(e,t,i,r){var n=this._currencyText.textContent;if(null!==n){var o=Math.round(t/2*i),a=this._currencyLabel.getBoundingClientRect(),c=Object(f.ceiledEven)(a.width*i/2),u=this._currencyLabel.style,d=Math.round(this.labelTop()*i),_=Math.round(a.height*i),m=Math.round(Number(y.css_value_currency_label_radius)*i);Object(l.drawRoundRect)(e,o-c,d,2*c,_,m),e.fillStyle=u.backgroundColor,e.fill();var v=Math.max(1,Math.floor(i));e.lineWidth=v,e.strokeStyle=r?y.css_value_border_color_dark:y.css_value_border_color_light,Object(l.drawRoundRect)(e,o-c+v/2,d+v/2,2*c-v,_-v,m),e.stroke(),e.fillStyle=u.color,e.font=Object(h.makeFont)(this._fontSize,p.CHART_FONT_FAMILY),e.textBaseline="middle",e.textAlign="center",Object(s.drawScaled)(e,i,(function(){return e.fillText(n,o/i,(d+_/2)/i)}))}},e.prototype.show=function(){this._currencyLabel.classList.remove("js-hidden"),this._width=null},e.prototype.hide=function(){this._currencyLabel.classList.add("js-hidden")},e.prototype.setCurrencyInfo=function(e){
if(null!==this._currencyInfo&&this._currencyInfo.selectedCurrency===e.selectedCurrency&&this._currencyInfo.readOnly===e.readOnly&&this._currencyInfo.originalCurrencies.size===e.originalCurrencies.size)return this._currencyInfo=e,!1;this._currencyInfo=e;var t=null===e.selectedCurrency?Object(n.t)("Mixed"):e.selectedCurrency;return this._currencyText.textContent!==t&&(this._currencyText.textContent=t,this._width=null),this._arrowDown.classList.contains("js-hidden")!==e.readOnly&&(this._arrowDown.classList.toggle("js-hidden",e.readOnly),this._currencyLabel.classList.toggle(y.readonly,e.readOnly),this._width=null),!0},e.prototype.updateColors=function(e,t){var i=this._currencyLabel.style;i.background=e,i.color=t},e.prototype.currencyInfo=function(){return this._currencyInfo},e.prototype.setFontSize=function(e){this._fontSize=e,this._currencyLabel.style.fontSize=e+"px",this._width=null},e.prototype.setLineHeight=function(e){this._currencyLabel.style.lineHeight=e+"px"},e.prototype.labelTop=function(){return Number(y.css_value_currency_label_top)},e.prototype._tooltipContent=function(){return null===this._currencyInfo?"":null===this._currencyInfo.selectedCurrency?Array.from(this._currencyInfo.currencies).join(", "):""},e}(),S=i("mrSG");i.d(t,"PriceAxisWidgetBase",(function(){return P}));var w={contextMenuEnabled:!0,currencyLabelEnabled:!1,contextMenu:{general:!0,source:!0},pressedMouseMoveScale:!0,croppedTickMarks:!0},P=function(){function e(e,t,i,r,n){var o=this;this._priceScale=null,this._widthCache=new u.TextWidthCache(50),this._tickmarksCache=new m(12,"#000",p.CHART_FONT_FAMILY,""),this._color=null,this._fontSize=null,this._currencyFontSize=0,this._currencyLabelWidth=null,this._isVisible=!0,this._updateTimeout=null,this._currencyMenu=null,this._prevOptimalWidth=0,this._size=null,this._destroyed=!1,this._pane=e,this._undoModel=t,this._properties=i,this._options=Object(a.merge)(Object(a.clone)(w),r),this._rendererOptionsProvider=n,this._cell=document.createElement("div"),this._cell.className="price-axis",this._cell.style.width="25px",this._cell.style.left="0",this._canvasConfiguredHandler=function(){o._recreateTickMarksCache(o._rendererOptionsProvider.options()),o._undoModel.model().lightUpdate()},this._canvasBinding=Object(s.createBoundCanvas)(this._cell,new s.Size(16,16)),this._canvasBinding.subscribeCanvasConfigured(this._canvasConfiguredHandler);var l=this._canvasBinding.canvas;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this._topCanvasConfiguredHandler=function(){return o._undoModel.model().lightUpdate()},this._topCanvasBinding=Object(s.createBoundCanvas)(this._cell,new s.Size(16,16)),this._topCanvasBinding.subscribeCanvasConfigured(this._topCanvasConfiguredHandler);var c=this._topCanvasBinding.canvas;c.style.position="absolute",c.style.zIndex="2",c.style.left="0",c.style.top="0",this._options.currencyLabelEnabled?(this._currencyLabel=new b,this._cell.appendChild(this._currencyLabel.element()),this._currencyLabel.labelElement().addEventListener("click",(function(e){
return o._showCurrenciesContextMenu(e)}))):this._currencyLabel=null,this._properties.childs().fontSize.subscribe(this,this._onFontSizeChanged)}return e.prototype.getElement=function(){return this._cell},e.prototype.onOptimalWidthNeedToBeRecalculated=function(){var e=this,t=this.optimalWidth();this._prevOptimalWidth<t&&null===this._updateTimeout&&(this._updateTimeout=setTimeout((function(){e._undoModel.model().fullUpdate(),e._updateTimeout=null}),100)),this._prevOptimalWidth=t},e.prototype.optimalWidth=function(){if(!this.isVisible())return 0;var e=32,t=this.rendererOptions();if(this._pane.hasState()){var i=Object(s.getContext2D)(this._canvasBinding.canvas),n=this.priceScale().marks();Object(l.setFont)(i,this.baseFont()),n.length>0&&(e=Math.max(this._widthCache.measureText(i,n[0].label),this._widthCache.measureText(i,n[n.length-1].label)));for(var o=this.backLabels(!0),a=o.length;a--;){var c=this._widthCache.measureText(i,o[a].text());e=Math.max(e,c);var u=o[a].secondLineText();u&&(e=Math.max(e,this._widthCache.measureText(i,u)))}}var h=0;this._isCurrencyLabelVisible()&&(null===this._currencyLabelWidth&&(this._currencyLabelWidth=Object(r.ensureNotNull)(this._currencyLabel).width()),h=this._currencyLabelWidth);var d=Math.max(h,Math.ceil(t.borderSize+t.tickLength+t.paddingInner+t.paddingOuter+e));return d+=d%2},e.prototype.getImage=function(){var e=Object(r.ensureNotNull)(this._size),t=Object(s.createDisconnectedCanvas)(document,e);if(Object(s.getPrescaledContext2D)(t).drawImage(this._canvasBinding.canvas,0,0,e.w,e.h),null!==this._currencyLabel&&this._currencyLabel.isVisible()){var i=this._undoModel.model().isDark();this._currencyLabel.drawLabel(Object(s.getContext2D)(t),e.w,Object(s.getCanvasDevicePixelRatio)(t),i)}return t},e.prototype.priceScale=function(){return Object(r.ensureNotNull)(this._priceScale)},e.prototype.setPriceScale=function(e){this._priceScale!==e&&(null!==this._priceScale&&this._priceScale.onMarksChanged().unsubscribe(this,this.onOptimalWidthNeedToBeRecalculated),this._priceScale=e,null!==e&&e.onMarksChanged().subscribe(this,this.onOptimalWidthNeedToBeRecalculated))},e.prototype.isVisible=function(){return this._isVisible},e.prototype.setVisible=function(e){(e=!!e)!==this._isVisible&&(this._cell.style.display=e?"table-cell":"none",this._isVisible=e)},e.prototype.destroy=function(){null!==this._currencyMenu&&(this._currencyMenu.close(),this._currencyMenu=null),this._topCanvasBinding.unsubscribeCanvasConfigured(this._topCanvasConfiguredHandler),this._topCanvasBinding.destroy(),this._canvasBinding.unsubscribeCanvasConfigured(this._canvasConfiguredHandler),this._canvasBinding.destroy(),null!==this._priceScale&&this._priceScale.onMarksChanged().unsubscribe(this,this.onOptimalWidthNeedToBeRecalculated),this._priceScale=null,this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=null),this._properties.childs().fontSize.unsubscribe(this,this._onFontSizeChanged),this._destroyed=!0},e.prototype.backgroundColor=function(){return this._pane.state().model().backgroundColor().value()},
e.prototype.backgroundTopColor=function(){return this._pane.state().model().backgroundTopColor().value()},e.prototype.lineColor=function(){return this._properties.childs().lineColor.value()},e.prototype.textColor=function(){return this._properties.childs().textColor.value()},e.prototype.fontSize=function(){return this._properties.childs().fontSize.value()},e.prototype.baseFont=function(){return Object(h.makeFont)(this.fontSize(),p.CHART_FONT_FAMILY,"")},e.prototype.rendererOptions=function(){var e=this._rendererOptionsProvider.options();return this._color===e.color&&this._fontSize===e.fontSize||(this._recreateTickMarksCache(e),this._color=e.color),this._fontSize!==e.fontSize&&(this._widthCache.reset(),this._fontSize=e.fontSize,this._currencyLabelWidth=null,this._currencyFontSize=0,this.onOptimalWidthNeedToBeRecalculated()),this._hasAlertLabel()&&(e=Object.assign({},e,{paddingInner:Math.max(e.paddingInner,c.ALERT_LABEL_WIDTH)})),e},e.prototype._isCurrencyLabelVisible=function(){return null!==this._currencyLabel&&this._currencyLabel.isVisible()},e.prototype._updateCurrencyLabel=function(){if(null!==this._currencyLabel){var e=this.priceScale().currency(this._undoModel.model().availableCurrenciesSet());null!==e&&this._properties.childs().showCurrency.value()?(this._currencyLabel.show(),this._currencyLabel.updateColors(this.backgroundTopColor(),this.textColor()),this._currencyLabel.setCurrencyInfo(e)&&(this._currencyLabelWidth=null,this.onOptimalWidthNeedToBeRecalculated())):this._currencyLabel.hide(),this._updateCurrencyLabelFont()}},e.prototype._currencyLabelLineHeight=function(){var e=this.rendererOptions();return Math.floor(this.fontSize()+e.paddingTop+e.paddingBottom)},e.prototype._updateCurrencyLabelFont=function(){if(null!==this._currencyLabel){var e=this.fontSize();e!==this._currencyFontSize&&(this._currencyLabel.setFontSize(e),this._currencyLabel.setLineHeight(this._currencyLabelLineHeight()),this._currencyFontSize=e,this._currencyLabelWidth=null,this.onOptimalWidthNeedToBeRecalculated())}},e.prototype._recreateTickMarksCache=function(e){this._tickmarksCache.destroy(),this._tickmarksCache=new m(e.fontSize,e.color,p.CHART_FONT_FAMILY,"")},e.prototype._hasAlertLabel=function(){return this.priceScale().dataSources().some((function(e){return e instanceof c.AlertLabel}))},e.prototype._currenciesActions=function(){var e=this,t=Object(r.ensureNotNull)(this._currencyLabel).currencyInfo();if(null===t||t.readOnly)return[];var i=[],s=function(e,t,i,r){return new o.Action({label:e,checkable:!0,checked:t,onExecute:i,statName:r})},a=t.selectedCurrency,l=t.originalCurrencies;if(l.size>1){var c=s(Object(n.t)("Mixed"),null===t.selectedCurrency,(function(){return e._undoModel.setPriceScaleCurrency(e.priceScale(),null)}),"Mixed");i.push(c)}if(null!==a){var u=s(a,!0,(function(){return e._undoModel.setPriceScaleCurrency(e.priceScale(),a)}),a);i.push(u)}var h=Array.from(this._pane.state().model().availableCurrenciesSet()),d=h.filter((function(e){return e!==a&&l.has(e)}));d.sort();for(var p=function(r){
i.push(s(r,t.selectedCurrency===r,(function(){return e._undoModel.setPriceScaleCurrency(e.priceScale(),r)}),r))},f=0,_=d;f<_.length;f++){p(_[f])}(null!==a||d.length>0)&&i.push(new o.Separator);var m=h.filter((function(e){return e!==a&&!l.has(e)}));m.sort();for(var v=function(r){i.push(s(r,t.selectedCurrency===r,(function(){return e._undoModel.setPriceScaleCurrency(e.priceScale(),r)}),r))},g=0,y=m;g<y.length;g++){v(y[g])}return i},e.prototype._showCurrenciesContextMenu=function(e){var t=this;if(null!==this._currencyMenu&&this._currencyMenu.isOpened())return this._currencyMenu.close(),void(this._currencyMenu=null);Object(d.trackEvent)("GUI","Currency conversion"),function(e,t,r){return Object(S.__awaiter)(this,void 0,void 0,(function(){return Object(S.__generator)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([i.e("vendors_embed"),i.e(1),i.e(6),i.e(8),i.e(348),i.e(0),i.e(7),i.e("currency-label-menu")]).then(i.bind(null,"FO7Z"))];case 1:return[2,n.sent().showCurrencyLabelMenu(e,t,r)]}}))}))}(this._currenciesActions(),(function(){if(!t._currencyLabel)return{x:0,y:0};var e=t._currencyLabel.labelElement().getBoundingClientRect();return{x:e.left,y:e.bottom,forbidCorrectYCoord:!0}}),Object(r.ensureNotNull)(this._currencyLabel).labelElement()).then((function(e){t._destroyed?e.close():t._currencyMenu=e}))},e.prototype._onFontSizeChanged=function(){this._currencyLabelWidth=null,this._updateCurrencyLabelFont(),this.onOptimalWidthNeedToBeRecalculated()},e}()},y8Ih:function(e,t,i){"use strict";i.r(t);var r={sf_dly:0,sf_rt:0};function n(e){return r.hasOwnProperty(e)}function o(e){return!!e&&(!(void 0===e.symbolname||!n(e.symbolname))||Boolean("permission_denied"===e.status&&e.values&&void 0!==e.values.alternative&&n(e.values.alternative)))}i.d(t,"isSfQuoteData",(function(){return o}))},yUly:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=i("ytGH").LineToolWidthsProperty,s=window.t("Trend-Based Fib Time");function a(e,t){this._constructor="LineToolTrendBasedFibTime";var n=t||a.createProperties();r.call(this,e,n),this.version=a.version,Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("SvjA").TrendBasedFibTimePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe);for(var s=[this._properties.child("trendline").child("linewidth")],l=1;l<=a.LevelsCount;l++)s.push(this._properties.child("level"+l).child("linewidth"));this._widthsProperty=new o(s)}inherit(a,r),a.LevelsCount=11,a.prototype.levelsCount=function(){return a.LevelsCount},a.version=1,a.prototype.pointsCount=function(){return 3},a.prototype.translatedType=function(){return s},a.prototype.name=function(){return"Trend-Based Fib Time"},a.prototype.migrateVersion=function(e,t,i){},a.prototype.processErase=function(e,t){var i="level"+t,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},a.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){
return i("u52p").TrendBasedFibTimeDefinitionsViewModel}.bind(null,i)).catch(i.oe)},a.createProperties=function(e){var t=new n("linetooltrendbasedfibtime",e,!1,{range:[1,11]});return a._configureProperties(t),t},a._configureProperties=function(e){r._configureProperties(e)},t.LineToolTrendBasedFibTime=a},yfAl:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("aO4+"),o=i("Eyy1"),s=i("txPx"),a=i("aIyQ"),l=i.n(a),c=i("e3/o"),u=i("Y7w9"),h=i("GxN8"),d=i("1gmO"),p=i("7ktv"),f=i("MWAT"),_=i("CW80"),m=i("s1Gx"),v=new Map([["trading",function(e){return Object(_.isTrading)(e)}],["drawing",function(e){return Object(_.isLineTool)(e)&&!Object(_.isTrading)(e)}],["restRowSources",function(e){return!Object(_.isLineTool)(e)&&!Object(_.isTrading)(e)}],["leftPriceScale",function(e,t){return"left"===g(e,t)}],["rightPriceScale",function(e,t){return"right"===g(e,t)}],["overlayPriceScale",function(e,t){return"overlay"===g(e,t)}]]);function g(e,t){var i=e.priceScale();return null===i?"overlay":t.priceScalePosition(i)}var y=function(){function e(e){this._groupedSources=new Map,this._sources=null,this._pane=e}return e.prototype.clear=function(){this._groupedSources.clear(),this._sources=null},e.prototype.destroy=function(){this.clear()},e.prototype.all=function(){return this._groupedSources.has("visibleSorted")||this._sortSources(),Object(o.ensureDefined)(this._groupedSources.get("visibleSorted"))},e.prototype.allIncludingHidden=function(){return this._groupedSources.has("allSorted")||this._sortSources(),Object(o.ensureDefined)(this._groupedSources.get("allSorted"))},e.prototype.allExceptSpecialSources=function(){if(!this._groupedSources.has("exceptSpecial")){var e=this.allIncludingHidden().filter((function(e){return e.zorder()<m.specialZOrderBase}));this._groupedSources.set("exceptSpecial",e)}return Object(o.ensureDefined)(this._groupedSources.get("exceptSpecial"))},e.prototype.tradingSources=function(){return this._getSourcesByGroupType("trading")},e.prototype.lineSources=function(){return this._getSourcesByGroupType("drawing")},e.prototype.allExceptLineAndTradingSources=function(){return this._getSourcesByGroupType("restRowSources")},e.prototype.hitTestSources=function(){if(!this._groupedSources.has("hitTest")){var e=this.allExceptLineAndTradingSources().concat(this.lineSources());this._groupedSources.set("hitTest",e)}return Object(o.ensureDefined)(this._groupedSources.get("hitTest"))},e.prototype.generalSources=function(){if(!this._groupedSources.has("general")){var e=this.allExceptLineAndTradingSources().concat(this.lineSources());this._groupedSources.set("general",Object(m.sortSources)(e))}return Object(o.ensureDefined)(this._groupedSources.get("general"))},e.prototype.leftPriceScalesSources=function(){return this._getSourcesByGroupType("leftPriceScale")},e.prototype.rightPriceScalesSources=function(){return this._getSourcesByGroupType("rightPriceScale")},e.prototype.overlayPriceScaleSources=function(){return this._getSourcesByGroupType("overlayPriceScale")},e.prototype._getSourcesByGroupType=function(e){
return this._groupedSources.has("visibleSorted")?this._groupedSources.has(e)||this._groupSources(e):(this._sortSources(),this._groupSources(e)),Object(o.ensureDefined)(this._groupedSources.get(e))},e.prototype._sortSources=function(){null===this._sources&&(this._sources=this._pane.dataSources());var e=Object(m.sortSources)(this._sources),t=e.filter((function(e){return!Object(_.isLineTool)(e)||e.isActualSymbol()&&e.isActualCurrency()}));this._groupedSources.set("allSorted",e),this._groupedSources.set("visibleSorted",t)},e.prototype._groupSources=function(e){var t=this,i=v.get(e);if(void 0!==i){var r=Object(o.ensureDefined)(this._groupedSources.get("visibleSorted")).filter((function(e){return i(e,t._pane)}));this._groupedSources.set(e,r)}},e}();i.d(t,"PaneBase",(function(){return S}));var b=Object(s.getLogger)("Chart.Pane"),S=function(){function e(e,t,i){this._id=Object(c.randomHashN)(6),this.m_dataSources=[],this.m_mainDataSource=null,this._cachedOrderedSources=new y(this),this._sourcesById=new Map,this._dataSourcesCollectionChanged=new l.a,this._sourcePropertiesChanged=new l.a,this._tagsChanged=new l.a,this._stretchFactor=1e3,this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null,this._priceScaleSelectionStrategy=Object(f.createPriceScaleSelectionStrategy)(i.properties().priceScaleSelectionStrategyName.value())}return e.prototype.id=function(){return this._id},e.prototype.sourcesByGroup=function(){return this._cachedOrderedSources},e.prototype.dataSourceForId=function(e){return this._sourcesById.get(e)||null},e.prototype.onSourceTagsChanged=function(){this._tagsChanged.fire()},e.prototype.getZOrderMinMax=function(){var e=this.sourcesByGroup().all();if(0===e.length)return{minZOrder:0,maxZOrder:0};for(var t=1/0,i=-1/0,r=0,n=e;r<n.length;r++){var o=n[r];t=Math.min(t,o.zorder()),i=Math.max(t,o.zorder())}return{minZOrder:t,maxZOrder:i}},e.prototype.insertDataSource=function(e,t,i){t||(t=this.findSuitableScale(e)),this._addSourceToCollections(e);var r=!1;e===this.model().mainSeries()?(this.m_mainDataSource=e,r=!0):null!==this.m_mainDataSource||e instanceof d.AlertLabel||(this.m_mainDataSource=e,r=!0),t.addDataSource(e,this._isInInsertManyDataSourcesState),e.setPriceScale(t),e.onTagsChanged&&e.onTagsChanged().subscribe(this,this.onSourceTagsChanged),e.setZorder(i),r&&this._processMainSourceChange(),this._tagsChanged.fire(),e instanceof p.PriceDataSource&&this.recalculatePriceScale(t),this._invalidateSourcesCache(),this._isInInsertManyDataSourcesState||Object(o.ensureNotNull)(this.model().alertsWatcher()).syncSourceAlertLabels(e)},e.prototype.addDataSource=function(e,t,i){var r;Object(_.isLineTool)(e)&&!i?(r=null!==this._lastLineDataSourceZOrder?this._lastLineDataSourceZOrder:this._newZOrderForLineTool(),this._isInInsertManyDataSourcesState&&(this._lastLineDataSourceZOrder=r)):r=this.getZOrderMinMax().minZOrder-1,this.insertDataSource(e,t,r)},e.prototype.removeDataSource=function(e,t,i){var r=this.m_dataSources.indexOf(e);if(-1!==r){
Object(o.ensureNotNull)(this.model().alertsWatcher()).detachSourceAlertLabels(e),this._removeSourceFromCollections(r,!!i),e!==this.m_mainDataSource||t||(this.m_mainDataSource=null);var n=e.priceScale();if(n&&n.dataSources().indexOf(e)>=0&&n.removeDataSource(e),n&&null===n.mainSource()){var s=n.dataSources().length;0!==s&&b.logError("Invalid priceScale state: empty mainSource but non-empty data sources="+s),this.removePriceScale(n)}e.onTagsChanged&&e.onTagsChanged().unsubscribe(this,this.onSourceTagsChanged),e instanceof p.PriceDataSource&&!t&&this._processMainSourceChange(),this._tagsChanged.fire(),n&&e instanceof p.PriceDataSource&&this.recalculatePriceScale(n),this._invalidateSourcesCache()}else b.logDebug("removeDataSource: invalid data source")},e.prototype.hasDataSource=function(e){return this._sourcesById.has(e.id())},e.prototype.replaceSource=function(e,t,i){var r=e.zorder();this.insertDataSource(t,i,r),this.removeDataSource(e),this._sourcesById.set(t.id(),t)},e.prototype.setZOrder=function(e,t){e.setZorder(t),this._invalidateSourcesCache(),this._dataSourcesCollectionChanged.fire()},e.prototype.setZOrders=function(e){e.forEach((function(e,t){t.setZorder(e)})),this._invalidateSourcesCache(),this._dataSourcesCollectionChanged.fire(),this.model().lightUpdate()},e.prototype.containsMainSeries=function(){return this._sourcesById.has(this.model().mainSeries().id())},e.prototype.sendToBack=function(e){this._batchReorder(e,0,u.moveBefore)},e.prototype.bringToFront=function(e){var t=this.sourcesByGroup().allExceptSpecialSources().length-1;this._batchReorder(e,t,u.moveAfter)},e.prototype.sendBackward=function(e){var t=this.sourcesByGroup().allIncludingHidden(),i=t.indexOf(e[0]);if(0===i)this.bringToFront(e);else{var r=t[i-1];this.insertBefore(e,r)}},e.prototype.bringForward=function(e){var t=this.sourcesByGroup().allExceptSpecialSources(),i=t.indexOf(e[e.length-1]);if(i===t.length-1)this.sendToBack(e);else{var r=t[i+1];this.insertAfter(e,r)}},e.prototype.insertAfter=function(e,t){var i=this.sourcesByGroup().allIncludingHidden().indexOf(t);this._batchReorder(e,i,u.moveAfter)},e.prototype.insertBefore=function(e,t){var i=this.sourcesByGroup().allIncludingHidden().indexOf(t);this._batchReorder(e,i,u.moveBefore)},e.prototype.priceScaleSelectionStrategy=function(){return this._priceScaleSelectionStrategy},e.prototype.findTargetPriceAxisViews=function(e,t,i,r){if(Object(h.a)(e)&&this.model().paneForSource(e)!==this)return[];var n=e.priceScale();if(t===n)return i;if(null===n)return[];if("overlay"===this.priceScalePosition(n))return t===this.defaultPriceScale()?i:[];var o=this.priceScalePosition(t);if(o!==this.priceScalePosition(n))return[];var s="left"===o?this.leftPriceScales():this.rightPriceScales();return s.indexOf(t)<s.indexOf(n)?r:[]},e.prototype.setPaneSize=function(e){var t;switch(e){case"large":t=1;break;case"medium":t=.6;break;case"small":t=.3;break;case"tiny":t=.15;break;default:throw new Error("Unknown size enum value: "+e)}this._stretchFactor=1e3*t},e.prototype.stretchFactor=function(){return this._stretchFactor},
e.prototype.setStretchFactor=function(e){this._stretchFactor=e},e.prototype.onTagsChanged=function(){return this._tagsChanged},e.prototype.dataSourcesCollectionChanged=function(){return this._dataSourcesCollectionChanged},e.prototype.sourcePropertiesChanged=function(){return this._sourcePropertiesChanged},e.prototype.lineToolsForArea=function(e){var t=this,i=this.height(),n=this.width(),o=this.logicalRectToPixels(e);return Object(r.__spreadArrays)(this.m_dataSources,this.model().multiPaneSources(this)).filter(_.isLineTool).filter((function(e){return(e.paneViews(t)||[]).some((function(e){var t=e.renderer(i,n);return t&&t.doesIntersectWithBox&&t.doesIntersectWithBox(o)}))}))},e.prototype.logicalRectToPixels=function(e){var t=this.defaultPriceScale(),i=this.timeScale(),r=Object(o.ensureNotNull)(Object(o.ensureNotNull)(t.mainSource()).firstValue()),s=t.priceToCoordinate(e.p1.price,r),a=i.indexToCoordinate(e.p1.index),l=t.priceToCoordinate(e.p2.price,r),c=i.indexToCoordinate(e.p2.index),u=new n.Point(Math.min(a,c),Math.min(s,l)),h=new n.Point(Math.max(a,c),Math.max(s,l));return Object(n.box)(u,h)},e.prototype.clipboardLineToolOwnerSource=function(e){var t=this.dataSourceForId(e);if(null!==t){var i=t.ownerSource();if(null!==i&&null!==i.firstValue())return i}var r=this.mainDataSource();if(null!==r&&null!==r.firstValue())return r;for(var n=0,o=this.dataSources();n<o.length;n++){var s=o[n];if(s instanceof p.PriceDataSource&&null!==s.firstValue())return s}return null},e.prototype._addSourceToCollections=function(e,t){var i=this;this.m_dataSources.push(e),this._sourcesById.set(e.id(),e),this._invalidateSourcesCache(),t||this._dataSourcesCollectionChanged.fire();var r=function(){i._sourcePropertiesChanged.fire(e)};e.properties().listeners().subscribe(this,r),Object(_.isLineTool)(e)&&e.normalizedPointsChanged().subscribe(this,r),e.isMultiPaneAvailable()&&this.model().addMultiPaneSource(e)},e.prototype._removeSourceFromCollections=function(e,t){var i=this.m_dataSources[e];i.properties().listeners().unsubscribeAll(this),this.m_dataSources.splice(e,1),this._sourcesById.delete(i.id()),this._invalidateSourcesCache(),t||this._dataSourcesCollectionChanged.fire(),i.isMultiPaneAvailable()&&this.model().removeMultiPaneSource(i)},e.prototype._batchReorder=function(e,t,i){i(this.sourcesByGroup().allIncludingHidden(),e,t).forEach((function(e,t){return e.setZorder(t+1)})),this._invalidateSourcesCache(),this._dataSourcesCollectionChanged.fire(),this.model().lightUpdate()},e}()},yi8X:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolInfoLine",(function(){return a}));var r=i("mrSG"),n=i("Ocx9"),o=i("WPQD"),s=window.t("Info Line"),a=function(e){function t(i,r){var n=e.call(this,i,r||t.createProperties())||this;return n._constructor="LineToolInfoLine",n}return Object(r.__extends)(t,e),t.prototype.pointsCount=function(){return 2},t.prototype.translatedType=function(){return s},t.prototype.name=function(){return"Info Line"},t.createProperties=function(e){var i=new n.DefaultProperty("linetoolinfoline",e);return t._configureProperties(i),i},
t._configureProperties=function(e){o.LineToolTrendLine._configureProperties(e)},t}(o.LineToolTrendLine)},yihy:function(e,t,i){"use strict";i.r(t),i.d(t,"isPlatformMobile",(function(){return a})),i.d(t,"canShowNewSymbolSearch",(function(){return l}));var r=i("mNbo"),n=i("Kxc7"),o=i("+GxX"),s=i("qFKp");function a(){var e=window.matchMedia("(min-width: 602px) and (min-height: 445px)").matches;return s.CheckMobile.any()&&!Object(r.isOnMobileAppPage)("any")&&!e}function l(){return!n.enabled("widget")&&Object(o.isFeatureEnabled)("show_new_symbol_search_dialog")&&!Object(r.isOnMobileAppPage)("any")}},ytGH:function(e,t,i){"use strict";i.r(t),i.d(t,"LineToolWidthsPropertyBaseImpl",(function(){return l})),i.d(t,"LineToolWidthsProperty",(function(){return c})),i.d(t,"MultipleLineWidthsProperty",(function(){return u}));var r=i("mrSG"),n=i("txPx"),o=i("aIyQ"),s=i.n(o),a=Object(n.getLogger)("Chart.LineToolWidthsProperty"),l=function(){function e(e){var t=this;this._onChange=new s.a,this._properties=e,e.forEach((function(e){return e.subscribe(t,(function(){t._onChange.fire(t)}))}))}return e.prototype.value=function(){if(0===this._properties.length)return a.logError("Incorrect call, should not request value of 0 properties"),"mixed";var e=this._properties[0].value();return 1===this._properties.length||this._properties.every((function(t){return t.value()===e}))?e:"mixed"},e.prototype.destroy=function(){var e=this;this._properties.forEach((function(t){return t.unsubscribeAll(e)}))},e.prototype.subscribe=function(e,t){this._onChange.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._onChange.unsubscribe(e,t)},e.prototype.unsubscribeAll=function(e){this._onChange.unsubscribeAll(e)},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.setValue=function(e,t){"mixed"!==e&&this._properties.forEach((function(i){return t.applyValue(i,e)}))},t}(l),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.setValue=function(e,t){"mixed"!==e&&this._properties.forEach((function(i){return i.setValue(e,t)}))},t.canCreateForSources=function(e){return e.some((function(e){return null!==e.widthsProperty()}))},t}(l)},"z+Sa":function(e,t,i){"use strict";i.r(t),i.d(t,"SeriesHorizontalBaseLinePaneView",(function(){return n}));var r=i("mrSG"),n=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),t.prototype._updateImpl=function(){this._lineRendererData.visible=!1;var e=this._series.priceScale().mode();if(e.percentage||e.indexedTo100){var t=this._series.firstValue();null!==t&&(this._lineRendererData.visible=!0,this._lineRendererData.y=this._series.priceScale().priceToCoordinate(t,t),this._lineRendererData.color=this._series.properties().baseLineColor.value())}},t}(i("k4w6").a)},"z+cS":function(e,t,i){"use strict";i.r(t),i.d(t,"VerticalLineRenderer",(function(){return s}));var r=i("VdBB"),n=i("jFln"),o=i("gAom"),s=function(){function e(){this._data=null,this._hitTest=null}
return e.prototype.setData=function(e){this._data=e},e.prototype.setHitTest=function(e){this._hitTest=e},e.prototype.hitTest=function(e){if(null===this._data)return null;var t=this._hitTest||new r.HitTestResult(r.HitTestResult.MOVEPOINT),i=Math.abs(e.x-this._data.x)<=3+this._data.linewidth/2,n=void 0===this._data.top||this._data.top-e.y<=3,o=void 0===this._data.bottom||e.y-this._data.bottom<=3;return i&&n&&o?t:null},e.prototype.draw=function(e,t){if(null!==this._data&&!(this._data.linewidth<=0||this._data.x<-this._data.linewidth/2||this._data.x>t.cssWidth+this._data.linewidth/2)){var i=t.pixelRatio;e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=Math.max(1,Math.floor(this._data.linewidth*i)),void 0!==this._data.linestyle&&Object(n.setLineStyle)(e,this._data.linestyle);var r=void 0!==this._data.top?Math.max(this._data.top,0):0,s=void 0!==this._data.bottom?Math.min(this._data.bottom,t.cssHeight):t.cssHeight,a=Math.round(this._data.x*i),l=Math.floor(r*i),c=Math.ceil(s*i);Object(o.drawVerticalLine)(e,a,l,c)}},e}()},z3gQ:function(e,t,i){"use strict";function r(){return new Promise((function(e){i.e("disconnect-messages").then(function(t){e(i("Mho2"))}.bind(null,i)).catch(void 0)}))}function n(e){r().then((function(t){return t.showDisconnectedMessage(e)}))}function o(e){r().then((function(t){return t.showCriticalErrorMessage(e)}))}i.r(t),i.d(t,"showDisconnectedMessage",(function(){return n})),i.d(t,"showCriticalErrorMessage",(function(){return o}))},"z61+":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var r,n=i("mrSG"),o=i("Eyy1"),s=i("0YCj"),a=i.n(s),l=i("23IT"),c=i("ogJP"),u=i("txPx"),h=i("W5mg"),d=i("Ecpn"),p=Object(u.getLogger)("Platform.GUI.PropertyDialog.Indicators.MetaInfo"),f=function(){function e(e){this._metaInfo=e}return e.prototype.hasUserEditableInputs=function(){return this._metaInfo.inputs.some(h.a)},e.prototype.getUserEditableInputs=function(){return this._metaInfo.inputs.filter(h.a)},e.prototype.hasUserEditableProperties=function(){return a.a.isScriptStrategy(this._metaInfo)},e.prototype.hasUserEditableStyles=function(){var e=this._metaInfo;return this.getUserEditablePlots().length>0||void 0!==e.bands||void 0!==e.filledAreas||Object(d.a)(e.shortId)||a.a.isScriptStrategy(this._metaInfo)||Object.values(e.graphics).some((function(e){return void 0!==e}))},e.prototype.getUserEditablePlots=function(){var e=new Set,t=this._metaInfo;return t.plots.filter((function(i){if(Object(l.isColorerPlot)(i)||Object(l.isTextColorerPlot)(i)||Object(l.isDataOffsetPlot)(i)||Object(l.isOhlcColorerPlot)(i)||Object(l.isAlertConditionPlot)(i))return!1;if(Object(l.isOhlcPlot)(i)){var r=i.target;if(e.has(r))return!1;e.add(r);var n=Object(o.ensureDefined)(t.ohlcPlots);return!Object(o.ensureDefined)(n[r]).isHidden}var s=t.styles?t.styles[i.id]:void 0;return void 0===s||!s.isHidden}))},e.prototype.hasUserEditableOptions=function(){return this.hasUserEditableInputs()||this.hasUserEditableProperties()||this.hasUserEditableStyles()},e.prototype.getStrategyProperties=function(){
for(var e,t=this._metaInfo,i=t.inputs.filter(m),r=Object(n.__assign)({},_),s=0,a=i;s<a.length;s++){var l=a[s],u=l.internalID;r[u]=l,_.hasOwnProperty(u)||p.logWarn("Unknown strategy input internal id "+u+" in "+t.fullId)}return Object(c.clone)((e=r,Object.values(e).forEach(o.ensureDefined),e))},e}(),_=((r={}).currency=void 0,r.backtest_fill_limits_assumption=void 0,r.calc_on_every_tick=void 0,r.calc_on_order_fills=void 0,r.commission_value=void 0,r.commission_type=void 0,r.initial_capital=void 0,r.pyramiding=void 0,r.slippage=void 0,r.default_qty_type=void 0,r.default_qty_value=void 0,r);function m(e){return"strategy_props"===e.groupId}},"z8/4":function(e,t,i){"use strict";i.r(t),i.d(t,"OverlayLegendView",(function(){return a}));var r=i("mrSG"),n=i("JjUe"),o=i("n5al"),s=i("oxKA"),a=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._additional=null,r._showBarChange=i.properties().paneProperties.legendProperties.showBarChange,r._showSeriesOHLC=i.properties().paneProperties.legendProperties.showSeriesOHLC,r._seriesStyle=t.properties().childs().style,r._studyOverlay=t,r._showBarChange.subscribe(r,r.update),r._showSeriesOHLC.subscribe(r,r.update),r}return Object(r.__extends)(t,e),t.prototype.isValuesVisible=function(){return this._showSeriesOHLC.value()||this._showBarChange.value()},t.prototype.additional=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional},t.prototype.destroy=function(){this._showBarChange.unsubscribeAll(this),this._showSeriesOHLC.unsubscribeAll(this)},t.prototype._updateImpl=function(){if(e.prototype._updateImpl.call(this),!this._showLastPriceAndChangeOnly()){var t=Object(o.isPriceSourceStyle)(this._seriesStyle.value()),i=this._showSeriesOHLC.value(),r=i&&!t,n=i&&t;this._items[0].setVisible(r),this._items[1].setVisible(r),this._items[2].setVisible(r),this._items[3].setVisible(r),this._items[6].setVisible(this._showBarChange.value()),this._items[4].setVisible(n)}var a=Object(s.getDataVendorString)(this._studyOverlay.symbolInfo());this._additional=a?window.t("Data Provided by")+" "+a:null},t}(n.OverlayDataWindowView)},zDbI:function(e,t,i){"use strict";i.r(t),i.d(t,"CHART_FONT_FAMILY",(function(){return n}));var r=i("mNbo");var n=Object(r.isOnMobileAppPage)("old")?"system-ui, -apple-system":"'Trebuchet MS', Roboto, Ubuntu, sans-serif"},zL3Q:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return p}));var r=i("lxNp"),n=i("hY0g"),o=i.n(n),s=i("4o++"),a=i("mMWL"),l=i("CW80"),c=new o.a(!1),u=new o.a(s.MagnetMode.WeakMagnet);function h(){var e=r.pressedKeys.value(),t=255&e,i=Boolean(e&r.Modifiers.Mod)&&(17===t||91===t),n=a.tool.value(),o=i&&(Object(l.isLineToolName)(n)||a.isToolEditingNow.value()||Object(a.toolIsMeasure)(n)),h=Object(a.properties)().childs().magnet.value();u.setValue(!h&&o?s.MagnetMode.StrongMagnet:Object(a.properties)().childs().magnetMode.value()),c.setValue(o?!h:h)}function d(){return c}function p(){return u}Object(a.runOnDrawingStateReady)((function(){
Object(a.properties)().childs().magnet.subscribe(null,h),Object(a.properties)().childs().magnetMode.subscribe(null,h),r.pressedKeys.subscribe(h),a.tool.subscribe(h),a.isToolEditingNow.subscribe(h),h()}))},zM7N:function(e,t,i){"use strict";i.r(t),i.d(t,"getStdThemeNames",(function(){return c})),i.d(t,"getStdChartTheme",(function(){return u})),i.d(t,"translateThemeName",(function(){return h})),i.d(t,"isStdTheme",(function(){return d})),i.d(t,"getThemeNameIfStdTheme",(function(){return p}));var r=i("YFKU"),n=i("eJTA"),o=i("/McG"),s=i("8pII"),a=i("FZIs");function l(){var e;return(e={})[a.a.Light]=JSON.parse(JSON.stringify(o)),e[a.a.Dark]=JSON.parse(JSON.stringify(s)),e}function c(){return[a.a.Light,a.a.Dark]}function u(e){return l()[e]}function h(e){var t;return((t={})[a.a.Light]=r.t("Light",{context:"colorThemeName"}),t[a.a.Dark]=r.t("Dark",{context:"colorThemeName"}),t)[e]||e}function d(e){var t=l();return c().some((function(i){return f(t[i],e)}))}function p(e){for(var t=l(),i=0,r=c();i<r.length;i++){var n=r[i];if(f(t[n],e))return n}return null}function f(e,t){var i=e.content===t.content;return function(e,t){void 0===e&&(e={});try{!function e(t,i,r){for(var n in t)if(t.hasOwnProperty(n)){var o=i.concat(n);if("object"==typeof t[n])e(t[n],o,r);else if(r(o,t[n]))throw new Error("exit")}}(e,[],t)}catch(i){return}}(e.content,(function(e,r){var o=function(e,t){void 0===t&&(t={});for(var i=t,r=0;r<e.length;r++){if(!i||"object"!=typeof i)return;i=i[e[r]]}if("string"==typeof i||"number"==typeof i)return i;return}(e,t.content);return!(i=function(e,t){if("string"==typeof e&&"string"==typeof t)try{return Object(n.areEqualRgb)(Object(n.parseRgb)(e),Object(n.parseRgb)(t))}catch(i){return e===t}return e===t}(r,o))})),i}i.d(t,"StdTheme",(function(){return a.a}))},zRdu:function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.Separator=0]="Separator",e[e.Action=1]="Action",e[e.ActionAsync=2]="ActionAsync"}(r||(r={}))},zUrt:function(e,t,i){"use strict";i.r(t),i.d(t,"backend",(function(){return r}));var r=i("JWp+")},zXvd:function(e,t,i){"use strict";i.r(t),i.d(t,"NumericFormatter",(function(){return n}));var r=i("kcTO"),n=function(){function e(e){this._precision=e}return e.prototype.format=function(t){return(void 0!==this._precision?t.toFixed(this._precision):e.formatNoE(t)).replace(".",r.formatterOptions.decimalSign)},e.prototype.parse=function(e){var t=e.replace(r.formatterOptions.decimalSign,"."),i=parseFloat(t);return this._precision&&(i=+i.toFixed(this._precision)),i},e.formatNoE=function(e){return e>=1e-15&&e<1?e.toFixed(15).replace(/\.?0+$/,""):String(e)},e}()},zZ2k:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("Eyy1"),o=i("aO4+"),s=i("fgLi"),a=i("hY0g"),l=i.n(a),c=i("KcY8"),u=function(e){function t(t,i,r){var n=e.call(this)||this;return n._source=t,n._priceScale=i,n._priceProvider=r,n}return Object(r.__extends)(t,e),t.prototype.setHitTestData=function(e){this._hitTestData=e},t.prototype._updateRendererData=function(e,t,i){e.visible=!1,t.visible=!1
;var r=this._priceScale.mainSource(),n=null!==r?r.firstValue():null;if(this._isVisible()&&!this._priceScale.isEmpty()&&null!==n){var o=this._priceProvider(this._priceScale);null!==o&&(i.background=this._bgColor(),i.color=this.generateTextColor(i.background),i.coordinate=this._priceScale.priceToCoordinate(o,n),e.text=this._priceScale.formatPrice(o,n),e.visible=!0,t.visible=!0,t.hitTestData=this._hitTestData)}},t}(c.a),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._isVisible=function(){return this._source.visible&&null!==this._source.pane},t.prototype._bgColor=function(){return"#4c525e"},t}(u),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype._isVisible=function(){return null!==this._source.measurePane()},t.prototype._bgColor=function(){return this._source.model().isDark()?"#1E88E5":"#2196F3"},t}(u),p=i("mMWL"),f=(i("YFKU"),i("KtbP")),_=i("N22A"),m=i("JWMC"),v=i("7KDR"),g=i("YFkB"),y=i("2O5g"),b=i("hqNu"),S=i("CW80"),w=i("Y7w9"),P=i("+slJ"),C=i("rzvv"),T=i("5VQP"),x=i("Kxc7"),I=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i,n)||this;return s._currMainDataSourceId=null,s._hasActions=!1,s._tooltipText=null,s._gaOrigin="CH menu",s._crosshairPriceAxisView=t,t.setPaneRendererLabelIcon(0),s._crosshair=i,s._scale=r,s._options=o,Object(_.waitTradingService)().then((function(){s._currMainDataSourceId=null})),s}return Object(r.__extends)(t,e),t.prototype.update=function(){e.prototype.update.call(this);var t=this._crosshair.y,i=this._chartModel.properties().scalesProperties.fontSize.value(),r=this._chartModel.timeScale().width(),n=i+2*Math.floor(i/3.5),o=n,s=t-n/2,a=r-o,l=this._crosshair.pane,c=null!==l?l.mainDataSource():null;null!==c&&c.idForAlert()!==this._currMainDataSourceId&&(this._currMainDataSourceId=c.idForAlert(),this._hasActions=this._hasAvailableActions(c),this._tooltipText=this._getTooltipText(c));var u=null!==l&&0!==l.leftPriceScales().length&&this._hasActions,h=null!==l&&0!==l.rightPriceScales().length&&this._hasActions,d=r-o/2,p=this._tooltipText?{text:this._tooltipText,rect:{x:d,y:s,w:0,h:0}}:void 0;this._data={left:u,right:h,xl:0,xr:a,y:s,containerWidth:o,containerHeight:n,clickHandler:this._handleClick.bind(this),tooltip:p},this._crosshairPriceAxisView.setHitTestData(this._data)},t.prototype._priceScale=function(){return this._scale},t.prototype._hasAvailableActions=function(e){return this._canCreateAlert(e)||this._canTrade(e)},t.prototype._getTooltipText=function(e){return this._canCreateAlert(e)&&!this._canTrade(e)?window.t("Add Alert"):null},t.prototype._canCreateAlert=function(e){return e.hasStateForAlert&&e.hasStateForAlert()||!1},t.prototype._canTrade=function(e){return e===this._chartModel.mainSeries()&&Boolean(Object(_.tradingService)())},t.prototype._handleClick=function(e,t,i){var r=this;x.enabled("widget")&&x.enabled("referral_program_for_widget_owners")?Object(b.showGoToTradingViewReferralDialog)({feature:"plusMenu"
}):(Object(m.trackEvent)(this._gaOrigin,"click"),this._getMenuItems(t).then((function(n){var o=n[0];1!==n.length||o.isDisabled()?n.length>0&&r._showContextMenu(n,e,i,t):o.execute()})))},t.prototype._getMenuItems=function(e){var t=this,i=this._options.disableTradingMenuActions?null:Object(_.tradingService)(),o=Object(n.ensureNotNull)(this._crosshair.pane).mainDataSource()===this._chartModel.mainSeries()&&Boolean(i),s=this._createAlertMenuItems(e),a=o?this._createTradingMenuItems():Promise.resolve([]);return Promise.all([s,a]).then((function(e){var o=e[0],s=e[1];s.length>0&&Object(n.ensureNotNull)(i).trackEvent(t._gaOrigin,"click");var a=o.length>0&&s.length>0;return Object(r.__spreadArrays)(o,[a?new v.Separator:null],s).filter((function(e){return null!==e}))}))},t.prototype._createAlertMenuItems=function(e){var t=this;if(null===this._crosshair.pane)return Promise.resolve([]);var i=this._crosshair.pane.mainDataSource();if(null===i)return Promise.resolve([]);var r=this._crosshair.y;if(this._options.menuForMainSourceOnly){if(i.hasStateForAlert()&&i.isVisible()){var o=this._getActionAddAlert({source:i,y:r,isDisabled:!1});return Promise.resolve(null===o?[]:[o])}return Promise.resolve([])}var s=Object(n.ensureNotNull)(this._crosshair.pane).sourcesByGroup(),a=("left"===e?s.leftPriceScalesSources():s.rightPriceScalesSources()).filter((function(e){return!Object(S.isLineTool)(e)&&void 0!==e.hasStateForAlert&&e.hasStateForAlert()&&e.isVisible()}));return a.reverse(),a=Object(w.moveToHead)(a,this._chartModel.mainSeries()),Object(P.a)(a).then((function(e){for(var i=new Set(e),n=[],o=0,s=a;o<s.length;o++){var l=s[o],c=t._getActionAddAlert({source:l,y:r,isDisabled:!i.has(l)});null!==c&&n.push(c)}return n}))},t.prototype._createTradingMenuItems=function(){var e=this;var t=this._crosshair.y,i=Object(_.tradingService)();if(null===i||null===this._crosshair.pane)return Promise.resolve([]);var r=Object(n.ensureNotNull)(this._crosshair.pane.mainDataSource());return Object(g.a)(r,t).then((function(t){return i.chartContextMenuActions(t,{onlyMainActions:!0,gaOrigin:e._gaOrigin})}))},t.prototype._getActionAddAlert=function(e){var t=this;var i=e.source,r=e.y,n=e.isDisabled,o=this._getValue(i,r);if(null===o)return null;var s=this._formatValue(o,i),a={label:window.t("Add Alert For {title}").format({title:i.title(!0,{},!0)})+" ("+s+")",icon:C};return n?a.disabled=!0:a.onExecute=function(){return t._addAlert(o,i)},new v.Action(a)},t.prototype._getValue=function(e,t){var i=e.priceScale(),r=e.firstValue();return null===i||null===r||i.isPercentage()||i.isIndexedTo100()?null:i.coordinateToPrice(t,r)},t.prototype._formatValue=function(e,t){return t.formatter().format(e)},t.prototype._addAlert=function(e,t){var i=this;window.runOrSignIn((function(){Object(y.invokeAlertEditorWithOnlineSeries)({dataSourceHub:i._chartModel,series:t,value:e,silent:!0,actionSource:"crosshair_menu"}),Object(m.trackEvent)(i._gaOrigin,"alert")}),{source:this._gaOrigin})},t.prototype._showContextMenu=function(e,t,i,r){var o=this,s="left"===r;setTimeout((function(){
T.ContextMenuManager.createMenu(e).then((function(e){e.show((function(e,t){var r=Object(n.ensureDefined)(o._data),a=Object(n.ensureNotNull)(i.view).innerHeight,l=s?r.xl:r.xr,c=i.localX-l,u={left:i.clientX-c,right:i.clientX-c+r.containerWidth,top:i.clientY-r.containerHeight/2,bottom:i.clientY+r.containerHeight/2};return{clientX:s?u.left:u.right-e,clientY:a<u.bottom+t?u.top-t:u.bottom}}))}))}))},t}(f.PanePriceAxisView),E=i("Tmoa"),L=i("8Uy/"),O=i("VaSN"),A=i("jFln"),M=i("VdBB"),k=i("gAom"),D=function(){function e(e){this._data=e}return e.prototype.hitTest=function(e){return void 0===this._data.clickHandler?null:new M.HitTestResult(M.HitTestResult.CUSTOM,{clickHandler:this._data.clickHandler,tapHandler:this._data.clickHandler})},e.prototype.draw=function(e,t){var i=t.pixelRatio,r=this._data.vertLinesVisible,n=this._data.horzLinesVisible;if(r||n){e.save(),e.lineWidth=Math.max(1,Math.floor(this._data.lineWidth*i)),e.strokeStyle=this._data.color,e.fillStyle=this._data.color,e.lineCap="butt",Object(A.setLineStyle)(e,this._data.lineStyle);var o=Math.round(this._data.x*i),s=Math.round(this._data.y*i),a=Math.ceil(this._data.w*i),l=Math.ceil(this._data.h*i);r&&o>=0&&Object(k.drawVerticalLine)(e,o,0,l),n&&s>=0&&Object(k.drawHorizontalLine)(e,s,0,a),this._data.drawCenter&&(e.beginPath(),e.arc(o,s,Math.round(3*i),0,2*Math.PI,!0),e.fillStyle=this._data.color,e.fill()),e.restore()}},e}(),R=function(){function e(e,t,i){this._rendererData={},this._renderer=new D(this._rendererData),this._source=e,this._pane=t,this._horzVisible=i}return e.prototype.update=function(){},e.prototype.renderer=function(e,t){var i=this._source.visible&&this._source.areLinesVisible,r=Object(p.lockTimeAxis)().value(),n=this._rendererData;if(!i||null===this._pane)return null;n.horzLinesVisible=i&&this._horzVisible,n.vertLinesVisible=i||r;var o,s=this._source.model(),a=this._source.properties(),l=this._source.selectBarMode().value()&&this._source.isOnHoveredChartWidget(),c=Object(O.lastEventIsTouch)()&&Object(S.isLineToolName)(s.currentTool())&&!l;o=c?s.isDark()?"#1E88E5":"#2196F3":a.childs().color.value();var u=a.childs().transparency.value();return!c&&u>0&&(o=Object(E.generateColor)(o,u)),n.color=o,n.lineWidth=a.childs().width.value(),n.lineStyle=a.childs().style.value(),n.drawCenter=c&&this._pane===this._source.pane,n.w=this._pane.width(),n.h=this._pane.height(),n.x=void 0!==this._source.lockedX&&isFinite(this._source.lockedX)&&this._source.lockedX||this._source.x,n.y=this._source.y,l&&(n.vertLinesVisible=!0,n.lineStyle=L.LINESTYLE_SOLID,n.lineWidth=2,n.color="#ff0000"),this._renderer},e}(),V=i("IjC5"),B=function(){function e(e){this._renderer=new V.RectangleRenderer,this._rectangle=null,this._crosshair=e}return e.prototype.update=function(){var e=this._crosshair.selection();null!==e&&null!==this._crosshair.pane?this._rectangle=this._crosshair.pane.logicalRectToPixels(e):this._rectangle=null},e.prototype.renderer=function(e,t){if(!this._rectangle)return null;var i=this._crosshair.model().isDark(),r={
backcolor:i?"rgba(21, 101, 192, 0.3)":"rgba(33, 150, 243, 0.3)",color:i?"rgba(21, 101, 192, 0.8)":"rgba(33, 150, 243, 0.8)",fillBackground:!0,linewidth:1,points:[this._rectangle.min,this._rectangle.max],extendLeft:!1,extendRight:!1};return this._renderer.setData(r),this._renderer},e}(),N=i("Ialn"),F=i("GH0z"),j=i("5C6T"),W=i("nda6"),H=i("pJOz"),U=i("qgcf"),z=i("Zy3/"),G=i("a7Ha"),q=i("zDbI"),Y=window.t("{0} bars"),X=new W.TimeSpanFormatter,K=function(){function e(e,t){this._pipFormatter=null,this._lastSymbolInfo=null,this._horzTrenRenderer=new H.TrendLineRenderer,this._vertTrenRenderer=new H.TrendLineRenderer,this._bgRenderer=new V.RectangleRenderer,this._labelRenderer=new U.TextRenderer,this._p1=null,this._p2=null,this._label=null,this._source=e,this._pane=t}return e.prototype.update=function(){var e=this._source.measurePoints(),t=e[0],i=e[1];if(void 0===i)return this._p1=null,void(this._p2=null);var r=Object(n.ensureNotNull)(this._source.measurePane()),s=t.price,a=i.price,l=i.price-s,c=i.index-t.index,u=Object(N.forceLTRStr)(""+c),h=Object(n.ensureNotNull)(r.mainDataSource()),d=Object(n.ensureNotNull)(h.formatter()).format(l);if(Math.abs(s)>1e-8){var p=l/Math.abs(s);d+=" ("+(new F.PercentageFormatter).format(100*p)+")"}var f=Object(N.forceLTRStr)(d);this._label=f+"\n"+Y.format(u);var _=Object(n.ensureNotNull)(h.firstValue()),m=this._source.model().timeScale().indexToCoordinate(t.index),v=this._source.model().timeScale().indexToCoordinate(i.index),g=r.defaultPriceScale().priceToCoordinate(s,_),y=r.defaultPriceScale().priceToCoordinate(a,_);this._p1=new o.Point(m,g),this._p2=new o.Point(v,y);var b=this._source.model().timeScale().indexToUserTime(t.index),S=this._source.model().timeScale().indexToUserTime(i.index),w=null;if(null!==b&&null!==S){var P=this._pane.model().mainSeries().symbolInfo();null!==P&&P!==this._lastSymbolInfo&&(this._pipFormatter=new j.PipFormatter(P.pricescale,P.minmov,P.type,P.minmove2),this._lastSymbolInfo=P),w=(S.valueOf()-b.valueOf())/1e3}var C=this._pipFormatter?this._pipFormatter.format(l):null,T=null!==C?" , "+C:"",x=null!==w?X.format(w):null,I=null!==x?", "+Object(N.startWithLTR)(x):"";this._label=Object(N.forceLTRStr)(f+T)+"\n"+Y.format(u)+I;var E=a<s?"rgba(239,83,80,0.2)":"rgba(30,136,229,0.2)",O=a<s?"#EF5350":"#1E88E5",A=a<s?"#EF5350":"#2196F3",M={points:[this._p1,this._p2],linewidth:0,fillBackground:!0,color:E,backcolor:E,extendLeft:!1,extendRight:!1};this._bgRenderer.setData(M);var k=this._p1.add(this._p2).scaled(.5),D=Math.round(k.y),R={points:[V=new o.Point(this._p1.x,D),B=new o.Point(this._p2.x,D)],color:O,linewidth:1,linestyle:L.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:G.LineEnd.Normal,rightend:Math.abs(V.x-B.x)>=50?G.LineEnd.Arrow:G.LineEnd.Normal};this._horzTrenRenderer.setData(R);var V,B,W=Math.round(k.x);R={points:[V=new o.Point(W,this._p1.y),B=new o.Point(W,this._p2.y)],color:O,linewidth:1,linestyle:L.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:G.LineEnd.Normal,rightend:Math.abs(V.y-B.y)>=50?G.LineEnd.Arrow:G.LineEnd.Normal}
;this._vertTrenRenderer.setData(R);var H,z={x:0,y:10},K=.5*(this._p1.x+this._p2.x),J=this._p2.y,Q=new o.Point(K,J),Z=(H=Object(n.ensureNotNull)(this._label),{points:[Q],text:H,color:"#FFFFFF",horzAlign:"center",vertAlign:"middle",font:q.CHART_FONT_FAMILY,offsetX:z.x,offsetY:z.y,bold:!1,italic:!1,fontsize:12,padding:8,highlightBorder:!1,backgroundColor:A,backgroundTransparency:10,backgroundVertInflate:5,backgroundHorzInflate:5,backgroundRoundRect:4});this._labelRenderer.setData(Z);var $=this._labelRenderer.measure(),ee=Object(U.calculateLabelPosition)($,this._p1,this._p2,z,this._pane.height());this._labelRenderer.setPoints([ee])},e.prototype.renderer=function(){if(null===this._p1||null===this._p2)return null;var e=new z.CompositeRenderer;return e.append(this._bgRenderer),e.append(this._horzTrenRenderer),e.append(this._vertTrenRenderer),e.append(this._labelRenderer),e},e}(),J=function(e){function t(t){var i=e.call(this)||this;return i._data=t,i}return Object(r.__extends)(t,e),t.prototype.hitTest=function(e){return null},t.prototype._drawImpl=function(e){e.translate(this._data.x-this._data.width/2,this._data.y-this._data.height/2),e.strokeStyle="rgba(153,153,153,.3)",e.lineWidth=2,e.beginPath(),this._drawShackle(e),e.stroke(),e.closePath(),e.strokeStyle="rgba(153,153,153,.7)",e.lineWidth=1,e.beginPath(),e.rect(0,this._data.height-this._data.bodyHeight+.5,this._data.width,this._data.bodyHeight),e.closePath(),e.stroke(),e.translate(0,-1),e.strokeStyle="#777",e.beginPath(),this._drawShackle(e),e.stroke(),e.closePath(),e.fillStyle="rgba(255,255,255,.7)",e.beginPath(),e.rect(1,this._data.height-this._data.bodyHeight+1.5,this._data.width-2,this._data.bodyHeight-2),e.fill(),e.beginPath(),e.rect(.5,this._data.height-this._data.bodyHeight+1,this._data.width-1,this._data.bodyHeight-1),e.stroke(),e.closePath(),e.fillStyle="#777",e.fillRect(this._data.width/2-.5,this._data.height-this._data.bodyHeight/2,1,2)},t.prototype._drawShackle=function(e){var t=(this._data.width-3)/2,i=this._data.height-this._data.bodyHeight;e.moveTo(1.5,t),e.arc(this._data.width/2,t,t,Math.PI,2*Math.PI),i>t&&(e.moveTo(1.5,t),e.lineTo(1.5,i),e.moveTo(this._data.width-1.5,t),e.lineTo(this._data.width-1.5,i))},t}(i("cPgM").ScaledPaneRenderer),Q=function(){function e(e,t,i){this._horzVisible=!1,this._source=e,this._pane=t,this._axis=i||"x"}return e.prototype.update=function(){},e.prototype.renderer=function(e,t){var i=this._source.visible&&this._source.areLinesVisible,r=Object(p.lockTimeAxis)().value(),o=i&&this._horzVisible,s=i||r;if("y"===this._axis&&!o||!s)return null;var a="y"===this._axis?this._pane.width()-4.5:Object(n.ensureDefined)(this._source.lockedX)+1,l="y"===this._axis?this._source.y:this._pane.height()-5.5-1;return new J({x:a,y:l,width:9,height:11,bodyHeight:7})},e}(),Z=i("qFKp");i.d(t,"CrosshairBase",(function(){return ee}));var $={menuEnabled:!1,menuForMainSourceOnly:!1,disableTradingMenuActions:!1},ee=function(e){function t(t,i){var r=e.call(this)||this;r._measurePane=null,r._startMeasurePoint=null,r._endMeasurePoint=null,
r._lastValidMeasurePoint=null,r._isOnHoveredChartWidget=!1,r._selectBarMode=new l.a(!1),r._selectionPane=null,r._selectionView=new B(r),r._selectionStartPoint=null,r._measurePaneView=null,r._timeLockPaneView=null,r._priceAxisViews=new Map,r._panePriceAxisViews=new Map,r._startMeasurePriceAxisViews=new Map,r._endMeasurePriceAxisViews=new Map,r._model=t,r._options=Object.assign({},$,i||{}),r._linesShouldBeHidden=r._model.readOnly();var o=function(e){return function(t){return t===Object(n.ensureNotNull)(r._measurePane).defaultPriceScale()?e():null}};return r._currentPosPriceProvider=function(e){var t=Object(n.ensureNotNull)(r.pane);if(e===t.defaultPriceScale())return r.price;var i=Object(n.ensureNotNull)(t.defaultPriceScale().mainSource()).firstValue();if(null===i)return null;var o=t.defaultPriceScale().priceToCoordinate(r.price,i),s=Object(n.ensureNotNull)(e.mainSource()).firstValue();return null===s?null:e.coordinateToPrice(o,s)},r._startMeasurePriceProvider=o((function(){return Object(n.ensureNotNull)(r._startMeasurePoint).price})),r._endMeasurePriceProvider=o((function(){return Object(n.ensureNotNull)(r._lastMeasurePoint()).price})),r}return Object(r.__extends)(t,e),t.prototype.currentPoint=function(){return new o.Point(this.x,this.y)},t.prototype.startMeasurePoint=function(){return this._startMeasurePoint||null},t.prototype.endMeasurePoint=function(){return this._endMeasurePoint||null},t.prototype.measurePane=function(){return this._measurePane||null},t.prototype.startMeasuring=function(e,t){this._startMeasurePoint=e,this._measurePane=t},t.prototype.finishMeasure=function(e){this._endMeasurePoint=e},t.prototype.clearMeasure=function(){delete this._measurePane,delete this._startMeasurePoint,delete this._endMeasurePoint,delete this._lastValidMeasurePoint,this._model.lightUpdate()},t.prototype.measurePoints=function(){this.updateAllViews();var e=[Object(n.ensureNotNull)(this._startMeasurePoint)],t=this._lastMeasurePoint();return null!==t&&e.push(t),e},t.prototype.startSelection=function(e){this._selectionStartPoint=this.currentLogicalPoint(),this._selectionPane=e},t.prototype.clearSelection=function(){this._selectionStartPoint=null,this._selectionPane=null},t.prototype.selection=function(){return this._selectionStartPoint?{p1:this._selectionStartPoint,p2:this.currentLogicalPoint()}:null},t.prototype.currentLogicalPoint=function(){return{index:this.appliedIndex(),price:this.price}},t.prototype.setLinesShouldBeHidden=function(e){this._linesShouldBeHidden=e},t.prototype.linesShouldBeHidden=function(){return this._linesShouldBeHidden},t.prototype.priceAxisViews=function(e,t){var i=[];return this._selectBarMode.value()&&this._isOnHoveredChartWidget||this.pane!==e||i.push(this._createPriceAxisViewOnDemand(this._priceAxisViews,this._panePriceAxisViews,e,t,this._currentPosPriceProvider,h,!0)),this._startMeasurePoint&&i.push(this._createPriceAxisViewOnDemand(this._startMeasurePriceAxisViews,null,e,t,this._startMeasurePriceProvider,d)),
this._lastMeasurePoint()&&i.push(this._createPriceAxisViewOnDemand(this._endMeasurePriceAxisViews,null,e,t,this._endMeasurePriceProvider,d)),i},t.prototype.timeAxisViews=function(){var e=[];return this._linesShouldBeHidden||!this.visible&&!Object(p.lockTimeAxis)().value()||e.push(this._timeAxisView),this._startMeasurePoint&&e.push(this._startMeasureTimeAxisView),this._lastMeasurePoint()&&e.push(this._endMeasureTimeAxisView),e},t.prototype.paneViews=function(e){if(void 0===e)return null;var t=this._selectBarMode.value()&&this._isOnHoveredChartWidget,i=e===this.pane&&!t,r=[new R(this,e,i)];e===this._selectionPane&&r.push(this._selectionView),e===this._measurePane&&(null===this._measurePaneView&&(this._measurePaneView=new K(this,e)),this._measurePaneView.update(),r.push(this._measurePaneView));var n=e===this.pane,o=!Z.CheckMobile.any()||window.screen.width>=320,s=p.tool.value(),a=Object(S.isLineToolName)(s),l=null!==this._model.lineBeingEdited()||null!==this._model.lineBeingCreated()||this._model.sourcesBeingMoved().length>0;if(n&&this._isOnHoveredChartWidget&&!t&&o&&!a&&!l){var c=this._panePriceAxisViews.get(e);void 0!==c&&c.forEach((function(e){return r.push(e)}))}return Object(p.lockTimeAxis)().value()&&(null===this._timeLockPaneView&&(this._timeLockPaneView=new Q(this,e)),r.push(this._timeLockPaneView)),r},t.prototype.updateAllViews=function(){this._priceAxisViews.forEach((function(e){e.forEach((function(e){return e.update()}))})),this._panePriceAxisViews.forEach((function(e){e.forEach((function(e){return e.update()}))})),this._startMeasurePoint&&(this._startMeasurePriceAxisViews.forEach((function(e){e.forEach((function(e){return e.update()}))})),this._startMeasureTimeAxisView.update()),this._lastMeasurePoint()&&(this._endMeasurePriceAxisViews.forEach((function(e){e.forEach((function(e){return e.update()}))})),this._endMeasureTimeAxisView.update()),this._timeAxisView.update(),this._selectionView.update(),this._dataWindowView.update()},t.prototype.setLockedPosition=function(e){delete this.lockedIndex,delete this.lockedX,e!==this._measurePane&&Object(p.lockTimeAxis)().value()&&(this.lockedIndex=this._model.timeScale().points().roughIndex(p.lockTimeAxisTime.value()),null!==this.lockedIndex&&(this.lockedX=this._model.timeScale().indexToCoordinate(this.lockedIndex)))},t.prototype._lastMeasurePoint=function(){return this._endMeasurePoint?this._endMeasurePoint:(null!==this.pane&&this._measurePane===this.pane&&(this._lastValidMeasurePoint={price:this._model.magnet().align(this.price,this.index,this.pane),index:this.index}),this._lastValidMeasurePoint||null)},t.prototype._createPriceAxisViewOnDemand=function(e,t,i,r,n,o,s){var a=this;void 0===s&&(s=!1);var l=e.get(i),c=null!==t?t.get(i):void 0;void 0===l&&(l=new Map,e.set(i,l),this._options.menuEnabled&&null!==t&&(c=new Map,t.set(i,c)),s&&i.onDestroyed().subscribe(this,(function(){return a._onPaneDestroyed(i)})));var u=l.get(r);if(void 0===u){if(u=new o(this,r,n),l.set(r,u),void 0!==c){var h=new I(u,this,r,this._model,{
menuForMainSourceOnly:this._options.menuForMainSourceOnly});c.set(r,h)}s&&r.lastSourceRemoved().subscribe(this,(function(){return a._onPriceScaleCleared(r)}))}return u},t.prototype._onPaneDestroyed=function(e){e.onDestroyed().unsubscribeAll(this),this._priceAxisViews.delete(e),this._panePriceAxisViews.delete(e),this._startMeasurePriceAxisViews.delete(e),this._endMeasurePriceAxisViews.delete(e)},t.prototype._onPriceScaleCleared=function(e){e.lastSourceRemoved().unsubscribeAll(this),this._priceAxisViews.forEach((function(t){return t.delete(e)})),this._panePriceAxisViews.forEach((function(t){return t.delete(e)})),this._startMeasurePriceAxisViews.forEach((function(t){return t.delete(e)})),this._endMeasurePriceAxisViews.forEach((function(t){return t.delete(e)}))},t}(s.DataSource)},zZ5f:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("5rJj"),o=window.t("Fib Speed Resistance Fan");function s(e,t){this._constructor="LineToolFibSpeedResistanceFan";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("xp9B").FibSpeedResistanceFanPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.HLevelsCount=7,s.VLevelsCount=7,s.prototype.hLevelsCount=function(){return s.HLevelsCount},s.prototype.vLevelsCount=function(){return s.VLevelsCount},s.prototype.pointsCount=function(){return 2},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Fib Speed Resistance Fan"},s.prototype.processErase=function(e,t){var i="h"===t.type?"hlevel"+t.index:"vlevel"+t.index,r=this.properties()[i].visible;e.setProperty(r,!1,"Erase level line")},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("2PB4").FibSpeedResistanceFanDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){void 0!==e&&void 0===e.reverse&&(e.reverse=!0);var t=new n("linetoolfibspeedresistancefan",e,!1,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]});return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolFibSpeedResistanceFan=s},ziJ5:function(e,t,i){"use strict";(function(e){var r=i("QIuV").LineToolTrading,n=i("Ss5c").LineDataSource,o=i("RTYN").PositionAveragePriceAxisView,s=i("jkoZ"),a=i("Ocx9").DefaultProperty,l=i("kcTO").PriceFormatter,c=i("s1Gx").sortSourcesPreOrdered.LineToolPosition;function u(e){this._line=e,this._data={bodyText:"position",quantityText:"0"},this._closeEnabled=!0,this._direction="buy",this._profitState="neutral"}function h(e){return null==e?e="":e+="",e}function d(e,t){this._adapter=new u(this),this._constructor="LineToolPosition";var n=t||d.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("GzSs").PositionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)
;var o=e.mainSeries().symbolInfo(),s=null!==o?o.pricescale:100,a=null!==o&&o.fractional?o.minmov:1,c=null!==o&&o.fractional,h=null!==o?o.minmove2:void 0;this._formatter=new l(s,a,c,h)}u.prototype.setDirection=function(e){return this._direction=e,this._line.updateAllViewsAndRedraw(),this},u.prototype.setProfitState=function(e){return this._profitState=e,this._line.updateAllViewsAndRedraw(),this},u.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},u.prototype.setPrice=function(e){if(this._line.points().length>0){var t=this._line.points()[0];t.price=e,this._line._points[0]=t,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},u.prototype.getText=function(){return this._data.bodyText},u.prototype.setText=function(e){return this._data.bodyText=e||"",this._line.updateAllViewsAndRedraw(),this},u.prototype.setTooltip=function(e){return this._line.properties().tooltip.setValue(h(e)),this},u.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},u.prototype.setProtectTooltip=function(e){return this._line.properties().protectTooltip.setValue(h(e)),this},u.prototype.getProtectTooltip=function(){return this._line.properties().protectTooltip.value()},u.prototype.setCloseTooltip=function(e){return this._line.properties().closeTooltip.setValue(h(e)),this},u.prototype.getCloseTooltip=function(){return this._line.properties().closeTooltip.value()},u.prototype.setReverseTooltip=function(e){return this._line.properties().reverseTooltip.setValue(h(e)),this},u.prototype.getReverseTooltip=function(){return this._line.properties().reverseTooltip.value()},u.prototype.getQuantity=function(){return this._data.quantityText},u.prototype.setQuantity=function(e){return this._data.quantityText=e||"",this._line.updateAllViewsAndRedraw(),this},u.prototype.getExtendLeft=function(){var e=this._line.properties().extendLeft.value();return"inherit"===e?this._line._model.properties().tradingProperties.extendLeft.value():e},u.prototype.setExtendLeft=function(e){return this._line.properties().extendLeft.setValue(e),this},u.prototype.getLineLength=function(){var e=this._line.properties().lineLength.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineLength.value():e},u.prototype.setLineLength=function(e){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(e,100))),this},u.prototype.getLineColor=function(){var e=this._line.properties();return("buy"===this._direction?e.lineBuyColor:e.lineSellColor).value()},u.prototype.setLineColor=function(e){return"buy"===this._direction?this.setLineBuyColor(e):this.setLineSellColor(e),this},u.prototype.setLineBuyColor=function(e){return this._line.properties().lineBuyColor.setValue(e),this},u.prototype.setLineSellColor=function(e){return this._line.properties().lineSellColor.setValue(e),this},u.prototype.getLineStyle=function(){
var e=this._line.properties().lineStyle.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineStyle.value():e},u.prototype.setLineStyle=function(e){return this._line.properties().lineStyle.setValue(e),this},u.prototype.getLineWidth=function(){var e=this._line.properties().lineWidth.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineWidth.value():e},u.prototype.setLineWidth=function(e){return this._line.properties().lineWidth.setValue(e),this},u.prototype.getBodyBorderColor=function(){var e=this._line.properties();return("buy"===this._direction?e.bodyBorderBuyColor:e.bodyBorderSellColor).value()},u.prototype.setBodyBorderColor=function(e){return"buy"===this._direction?this.setBodyBorderBuyColor(e):this.setBodyBorderSellColor(e),this},u.prototype.setBodyBorderBuyColor=function(e){return this._line.properties().bodyBorderBuyColor.setValue(e),this},u.prototype.setBodyBorderSellColor=function(e){return this._line.properties().bodyBorderSellColor.setValue(e),this},u.prototype.getBodyBackgroundColor=function(){return s.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},u.prototype.setBodyBackgroundColor=function(e){return s.setColorToProperties(e,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},u.prototype.getBodyTextColor=function(){var e=this._line.properties();return("positive"===this._profitState?e.bodyTextPositiveColor:"negative"===this._profitState?e.bodyTextNegativeColor:e.bodyTextNeutralColor).value()},u.prototype.setBodyTextColor=function(e){return"positive"===this._profitState?this.setBodyTextPositiveColor(e):"negative"===this._profitState?this.setBodyTextNegativeColor(e):this.setBodyTextNeutralColor(e),this},u.prototype.setBodyTextPositiveColor=function(e){return this._line.properties().bodyTextPositiveColor.setValue(e),this},u.prototype.setBodyTextNegativeColor=function(e){return this._line.properties().bodyTextNegativeColor.setValue(e),this},u.prototype.setBodyTextNeutralColor=function(e){return this._line.properties().bodyTextNeutralColor.setValue(e),this},u.prototype.getBodyFont=function(){return s.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},u.prototype.setBodyFont=function(e){return s.setFontToProperties(e,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},u.prototype.getQuantityBorderColor=function(){var e=this._line.properties();return("buy"===this._direction?e.quantityBorderBuyColor:e.quantityBorderSellColor).value()},u.prototype.setQuantityBorderColor=function(e){return"buy"===this._direction?this.setQuantityBorderBuyColor(e):this.setQuantityBorderSellColor(e),this},u.prototype.setQuantityBorderBuyColor=function(e){return this._line.properties().quantityBorderBuyColor.setValue(e),this},
u.prototype.setQuantityBorderSellColor=function(e){return this._line.properties().quantityBorderSellColor.setValue(e),this},u.prototype.getQuantityBackgroundColor=function(){var e=this._line.properties();return("buy"===this._direction?e.quantityBackgroundBuyColor:e.quantityBackgroundSellColor).value()},u.prototype.setQuantityBackgroundColor=function(e){return"buy"===this._direction?this.setQuantityBackgroundBuyColor(e):this.setQuantityBackgroundSellColor(e),this},u.prototype.setQuantityBackgroundBuyColor=function(e){return this._line.properties().quantityBackgroundBuyColor.setValue(e),this},u.prototype.setQuantityBackgroundSellColor=function(e){return this._line.properties().quantityBackgroundSellColor.setValue(e),this},u.prototype.getQuantityTextColor=function(){return s.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},u.prototype.setQuantityTextColor=function(e){return s.setColorToProperties(e,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},u.prototype.getQuantityFont=function(){return s.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},u.prototype.setQuantityFont=function(e){return s.setFontToProperties(e,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},u.prototype.getReverseButtonBorderColor=function(){var e=this._line.properties();return("buy"===this._direction?e.reverseButtonBorderBuyColor:e.reverseButtonBorderSellColor).value()},u.prototype.setReverseButtonBorderColor=function(e){return"buy"===this._direction?this.setReverseButtonBorderBuyColor(e):this.setReverseButtonBorderSellColor(e),this},u.prototype.setReverseButtonBorderBuyColor=function(e){return this._line.properties().reverseButtonBorderBuyColor.setValue(e),this},u.prototype.setReverseButtonBorderSellColor=function(e){return this._line.properties().reverseButtonBorderSellColor.setValue(e),this},u.prototype.getReverseButtonBackgroundColor=function(){return s.getColorFromProperties(this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency)},u.prototype.setReverseButtonBackgroundColor=function(e){return s.setColorToProperties(e,this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency),this},u.prototype.getReverseButtonIconColor=function(){var e=this._line.properties();return("buy"===this._direction?e.reverseButtonIconBuyColor:e.reverseButtonIconSellColor).value()},u.prototype.setReverseButtonIconColor=function(e){return"buy"===this._direction?this.setReverseButtonIconBuyColor(e):this.setReverseButtonIconSellColor(e),this},u.prototype.setReverseButtonIconBuyColor=function(e){return this._line.properties().reverseButtonIconBuyColor.setValue(e),this},
u.prototype.setReverseButtonIconSellColor=function(e){return this._line.properties().reverseButtonIconSellColor.setValue(e),this},u.prototype.getCloseButtonBorderColor=function(){var e=this._line.properties();return("buy"===this._direction?e.closeButtonBorderBuyColor:e.closeButtonBorderSellColor).value()},u.prototype.setCloseButtonBorderColor=function(e){return"buy"===this._direction?this.setCloseButtonBorderBuyColor(e):this.setCloseButtonBorderSellColor(e),this},u.prototype.setCloseButtonBorderBuyColor=function(e){return this._line.properties().closeButtonBorderBuyColor.setValue(e),this},u.prototype.setCloseButtonBorderSellColor=function(e){return this._line.properties().closeButtonBorderSellColor.setValue(e),this},u.prototype.getCloseButtonBackgroundColor=function(){return s.getColorFromProperties(this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency)},u.prototype.setCloseButtonBackgroundColor=function(e){return s.setColorToProperties(e,this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency),this},u.prototype.getCloseButtonIconColor=function(){var e=this._line.properties();return("buy"===this._direction?e.closeButtonIconBuyColor:e.closeButtonIconSellColor).value()},u.prototype.setCloseButtonIconColor=function(e){return"buy"===this._direction?this.setCloseButtonIconBuyColor(e):this.setCloseButtonIconSellColor(e),this},u.prototype.setCloseButtonIconBuyColor=function(e){return this._line.properties().closeButtonIconBuyColor.setValue(e),this},u.prototype.setCloseButtonIconSellColor=function(e){return this._line.properties().closeButtonIconSellColor.setValue(e),this},u.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},u.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},u.prototype.isFunction=function(e){return"function"==typeof e},u.prototype.onReverse=function(e,t){return t?this.isFunction(t)&&(this._onReverseData=e,this._onReverseCallback=t):this.isFunction(e)&&(this._onReverseCallback=e),this},u.prototype.callOnReverse=function(){this.isFunction(this._onReverseCallback)&&this._onReverseCallback.call(this,this._onReverseData)},u.prototype.isOnReverseCallbackPresent=function(){return this.isFunction(this._onReverseCallback)},u.prototype.onClose=function(e,t){return t?this.isFunction(t)&&(this._onCloseData=e,this._onCloseCallback=t):this.isFunction(e)&&(this._onCloseCallback=e),this},u.prototype.setCloseEnabled=function(e){return this._closeEnabled===e||(this._closeEnabled=e,this._onCloseCallback&&this._line.updateAllViewsAndRedraw()),this},u.prototype.isCloseEnabled=function(){return this._closeEnabled},u.prototype.callOnClose=function(){this.isFunction(this._onCloseCallback)&&this._closeEnabled&&this._onCloseCallback.call(this,this._onCloseData)},u.prototype.isOnCloseCallbackPresent=function(){return this._closeEnabled&&this.isFunction(this._onCloseCallback)},u.prototype.onModify=function(e,t){return t?this.isFunction(t)&&(this._onModifyData=e,
this._onModifyCallback=t):this.isFunction(e)&&(this._onModifyCallback=e),this},u.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},u.prototype.onContextMenu=function(e,t){return t?this.isFunction(t)&&(this._onContextMenuData=e,this._onContextMenuCallback=t):this.isFunction(e)&&(this._onContextMenuCallback=e),this},u.prototype.shouldShowContextMenu=function(){return this.isFunction(this._onContextMenuCallback)},u.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},u.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(d,r),d.prototype.zorder=function(){return c},d.prototype.setPoint=function(e,t,i){this._points[e]=t,this.normalizePoints()},d.prototype.addPoint=function(e,t){return this._points.push(e),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},d.prototype.translatedType=function(){return"Position"},d.prototype.name=function(){return"Position"},d.prototype.createPriceAxisView=function(e){return this._priceAxisView=new o(this,{pointIndex:e,backgroundPropertyGetter:this._adapter.getLineColor.bind(this._adapter)}),this._priceAxisView},d.prototype.paneViews=function(){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?n.prototype.paneViews.call(this):null},d.prototype.priceAxisViews=function(t,i){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?n.prototype.priceAxisViews.call(this,t,i):null},d.prototype.hasContextMenu=function(){return this._adapter.shouldShowContextMenu()},d.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},d.prototype.formatter=function(){return this._formatter},d.createProperties=function(e){var t=new a("linetoolposition",e,!1,!1);return d._configureProperties(t),t},d._configureProperties=function(e){r._configureProperties(e)},t.LineToolPosition=d}).call(this,i("Kxc7"))},zqZp:function(e,t,i){"use strict";var r=i("Ss5c").LineDataSource,n=i("Ocx9").DefaultProperty,o=window.t("Price Label");function s(e,t){this._constructor="LineToolPriceLabel";var n=t||s.createProperties();r.call(this,e,n),Promise.all([i.e(213),i.e("lt-pane-views")]).then(function(e){var t=i("Ni7V").PriceLabelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}inherit(s,r),s.prototype.pointsCount=function(){return 1},s.prototype.translatedType=function(){return o},s.prototype.name=function(){return"Price Label"},s.prototype._getPropertyDefinitionsViewModelClass=function(){return Promise.all([i.e(71),i.e(150),i.e(202),i.e("lt-property-pages-with-definitions")]).then(function(e){return i("hQgR").PriceLabelDefinitionsViewModel}.bind(null,i)).catch(i.oe)},s.createProperties=function(e){var t=new n("linetoolpricelabel",e)
;return s._configureProperties(t),t},s._configureProperties=function(e){r._configureProperties(e)},t.LineToolPriceLabel=s}},[["Ob86","runtime","vendors_embed"]]]);