(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"/mDy":function(e,t,n){},TsgZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("mrSG"),r=n("Eyy1"),o=n("IWXC"),s=n("8woN"),a=n("y8Ih"),u=n("fgbt"),l=n("bKsZ"),c=n("NP3r"),f=n("e3/o"),d=new Map,m=function(){function e(e,t){var n=this;this._symbolDataHandlers=new Map,this._fastSymbols=new Set,this._subscribedSymbols=new Set,this._subscriptionSet=new Set,this._cancelSubscriptionSet=new Set,this._quoteSessionDataHandler=function(e){var t=Object(r.ensureDefined)(e.symbolname),i=n._applyDataFilters(e),o=i.filtered;i.keepSubscription||n._unsubscribeSymbols([t]),n._lastSymbolData.set(t,o);var s=n._symbolDataHandlers.get(t);s&&s(o)},this._clientId=e,this._quoteSession=Object(o.getQuoteSessionInstance)("watchlist"),this._lastSymbolData=t||new Map}return e.prototype.destroy=function(){var e=Array.from(this._subscribedSymbols);this._unsubscribeSymbols(e)},e.prototype.addFastSymbol=function(e){!this._fastSymbols.has(e)&&this._subscribedSymbols.has(e)&&(this._fastSymbols.add(e),this._quoteSession.setFastSymbols(this._clientId,Array.from(this._fastSymbols)))},e.prototype.removeFastSymbol=function(e){this._fastSymbols.has(e)&&(this._fastSymbols.delete(e),this._quoteSession.setFastSymbols(this._clientId,Array.from(this._fastSymbols)))},e.prototype.addSymbolDataHandler=function(e,t){this._symbolDataHandlers.set(e,t)},e.prototype.removeSymbolDataHandler=function(e){this._symbolDataHandlers.delete(e)},e.prototype.addToSubscriptionSet=function(e){var t=this;e.forEach((function(e){return t._subscriptionSet.add(e)}))},e.prototype.clearSubscriptionSet=function(){this._subscriptionSet.clear()},e.prototype.addToCancelSubscriptionSet=function(e){var t=this;e.forEach((function(e){return t._cancelSubscriptionSet.add(e)}))},e.prototype.commitSubscriptionChanges=function(){var e=this;Array.from(this._subscriptionSet).forEach((function(t){e._cancelSubscriptionSet.has(t)&&(e._subscriptionSet.delete(t),e._cancelSubscriptionSet.delete(t))})),this._subscribeSymbols(Array.from(this._subscriptionSet)),this._subscriptionSet.clear(),this._unsubscribeSymbols(Array.from(this._cancelSubscriptionSet)),this._cancelSubscriptionSet.clear(),this._quoteSession.setFastSymbols(this._clientId,Array.from(this._fastSymbols))},e.prototype.getLastSymbolData=function(e){return this._lastSymbolData.get(e)},e.prototype.getSymbolSnapshotForAll=function(e,t,n){var i=this;void 0===n&&(n=Object(f.guid)());var r=e.map((function(e){return i.getSymbolSnapshot(e,t,n)}));return Promise.all(r)},e.prototype.getSymbolSnapshot=function(e,t,n){var i=this;void 0===n&&(n=Object(f.guid)());var r=this._lastSymbolData.get(e);return r?("ok"===r.status&&b(r,t)&&Promise.resolve(r),Promise.resolve(r)):new Promise((function(r){var o=i._clientId+"_snapshot_"+n,s=function(n){var a=i._applyDataFilters(n),u=a.filtered,l=a.keepSubscription;u&&"error"!==u.status&&i._lastSymbolData.set(e,u),l&&!b(u,t)&&"error"!==u.status||(i._quoteSession.unsubscribe(o,e,s),r(u))};i._quoteSession.subscribe(o,e,s)}))},
e.prototype.getSymbolFullName=function(e){var t=this;if(d.has(e))return Object(r.ensureDefined)(d.get(e));var n=new Promise((function(n){var i=t._clientId+"_SymbolFullName",r=function(o){var s=function(o){t._quoteSession.unsubscribe(i,e,r),n(o)};o&&"ok"===o.status?o.values&&o.values.pro_name&&s(o.values.pro_name):s(e)};t._quoteSession.subscribe(i,e,r)}));return d.set(e,n),n},e.prototype.getSymbolsFullNames=function(e){var t=this;return Promise.all(e.map((function(e){return t.getSymbolFullName(e)})))},e.prototype.getUniqueSymbolsFullNames=function(e){return this.getSymbolsFullNames(e).then((function(e){return Array.from(new Set(e))}))},e.prototype._subscribeSymbols=function(e){var t=this;this._quoteSession.subscribe(this._clientId,e,this._quoteSessionDataHandler),e.forEach((function(e){return t._subscribedSymbols.add(e)}))},e.prototype._unsubscribeSymbols=function(e){var t=this;this._quoteSession.unsubscribe(this._clientId,e,this._quoteSessionDataHandler),e.forEach((function(e){t._subscribedSymbols.delete(e)}))},e.prototype._applyDataFilters=function(e){var t;return t=e,!Object(a.isSfQuoteData)(t)&&!Object(u.isIDCExchange)(Object(s.getExchange)(Object(r.ensureDefined)(t.symbolname)),!0)||Object(c.enabled)(l.ProductFeatures.IDC_AVAILABLE_DELAY)?{filtered:e,keepSubscription:!0}:{filtered:function(e){return Object(i.__assign)(Object(i.__assign)({},e),{status:"sf_data",values:{}})}(e),keepSubscription:!1}},e}(),h=new(function(){function e(){this._adapters={},this._lastSymbolData=new Map}return e.prototype.destroy=function(){var e=this;Object.keys(this._adapters).forEach((function(t){return Object(r.ensureDefined)(e._adapters[t]).destroy()})),this._lastSymbolData.clear()},e.prototype.get=function(e){return void 0===this._adapters[e]&&(this._adapters[e]=new m(e,this._lastSymbolData)),Object(r.ensureDefined)(this._adapters[e])},e}());function b(e,t){for(var n=0,i=Array.from(t);n<i.length;n++){var r=i[n];if(!e.values.hasOwnProperty(r))return!1}return!0}},UJLt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveRenameDialog=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n("/mDy");var r=n("oNDq");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s="yes",a="close";t.SaveRenameDialog=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fields,i=t.confirm,r=t.manager,s=t.title,a=void 0===s?"":s,u=t.destroyOnClose,l=void 0===u||u,c=t.modal,f=void 0!==c&&c;o(this,e),this._form=document.createElement("div"),this._fields=n,this._appendFieldsToForm(),this._title=a,this._destroyOnClose=l,this._modal=f,this._manager=r,this._isConfirmDialogOpened=!1,i&&(this._needCheckConfirm=!0,this._shouldShowConfirm=i.shouldShowDialog,this._getConfirmMessage=i.getMessage)}return i(e,[{key:"setField",value:function(e,t){
this._fields.find((function(t){return t.name===e})).value=t}},{key:"show",value:function(){var e=this,t=this._createDialog();return new Promise((function(n){t.then((function(t){t.on("action:submit",(function(t){return e._onSubmit(t,n)})),t.open(),t.on("beforeClose",e._unmountFields.bind(e)),e._fields[0].select()}))}))}},{key:"_appendFieldsToForm",value:function(){var e=this;this._fields.forEach((function(t){t.appendTo(e._form)}))}},{key:"_createDialog",value:function(){var e=this;return new Promise((function(t){Promise.all([n.e("vendors_embed"),n.e("dialogs-core"),n.e(5),n.e(11),n.e(14),n.e(26),n.e(17),n.e(24),n.e(203),n.e("create-dialog")]).then(function(i){var r=n("YDhE").createDialog;t(r({type:e._modal?"modal":"popup",title:e._title,content:$(e._form),actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions i-align_right tv-dialog__section--no-border">',width:470,destroyOnClose:e._destroyOnClose,manager:e._manager,isClickOutFn:function(){if(e._isConfirmDialogOpened)return!1},actions:[{name:"submit",type:"primary",text:window.t("Save"),key:13,addClass:"js-submit-button"},{name:"cancel",type:"default",text:window.t("Cancel"),method:"close",addClass:"js-cancel-button"}]}))}.bind(null,n)).catch(n.oe)}))}},{key:"_onSubmit",value:function(e,t){var n=this,i=this._validate();if(i)e.error(i.error),i.focus();else{if(!this._needCheckConfirm)return t(this._collectValues(),e),void e.close();Promise.resolve(this._shouldShowConfirm(this._collectValues())).then((function(i){if(!i)return t(n._collectValues(),e),void e.close();n._showConfirmDialog().then((function(i){i===a&&(e.focus(),n._fields[0].focus()),i===s&&(t(n._collectValues(),e),e.close())}))}))}}},{key:"_showConfirmDialog",value:function(){var e=this;return new Promise((function(t){Promise.resolve(e._getConfirmMessage(e._collectValues())).then((function(n){e._isConfirmDialogOpened=!0,(0,r.createConfirmDialog)({type:"modal",content:document.createTextNode(n),manager:e._manager}).then((function(n){n.on("action:yes",(function(e){t(s),e.close()})),n.on("afterClose",(function(){t(a),e._isConfirmDialogOpened=!1})),n.open()}))}))}))}},{key:"_validate",value:function(){return this._fields.find((function(e){return!e.valid}))}},{key:"_collectValues",value:function(){return this._fields.reduce((function(e,t){return e[t.name]=t.value,e}),{})}},{key:"_unmountFields",value:function(){this._fields.forEach((function(e){e.unmount&&e.unmount()}))}}]),e}()},ehHn:function(e,t,n){"use strict";n.d(t,"k",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"d",(function(){return _})),n.d(t,"m",(function(){return y})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return D})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"n",(function(){return C})),n.d(t,"i",(function(){return k})),n.d(t,"l",(function(){return E})),n.d(t,"h",(function(){return F})),n.d(t,"g",(function(){return P}))
;var i,r=n("mrSG"),o=n("Eyy1"),s=n("YFKU"),a=n("Kxc7"),u=n("UJLt"),l=n("hkLy"),c=n("TsgZ"),f=n("txPx"),d=n("8woN"),m=Object(f.getLogger)("Platform.Model.Watchlist");function h(){return a.enabled("multiple_watchlists")&&window.user&&Boolean(window.user.is_pro)}function b(e){return"string"==typeof e&&!/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/.test(e)&&!/^[\r\n\t,]*$/.test(e)}function _(e){return new u.SaveRenameDialog({title:e,fields:[new l.InputField({name:"title",label:window.t("Symbol list name")+":",maxLength:128,error:window.t("Please enter list name")})]})}function p(e){return e.replace("âˆ’","-")}function y(e,t,n,i){return Object(r.__spreadArrays)(t).sort((function(t,r){var s=c.a.get(e).getLastSymbolData(t),a=c.a.get(e).getLastSymbolData(r),u=v(s),l=v(a),f=s?s.values[n]:void 0,d=a?a.values[n]:void 0;return function(e,t){var n=-1===t?-1/0:1/0;return function(i,r,s,a){if("rchp"!==e){if(void 0===i&&void 0===r)return 0;if(void 0===i)return-t;if(void 0===r)return t}switch(e){case"short_name":return t*(i===r?0:Object(o.ensureDefined)(i)<Object(o.ensureDefined)(r)?-1:1);case"rchp":return s||(i=void 0),a||(r=void 0),S(i,r,t,n);case"last_price":case"change":case"change_percent":return S(i,r,t,n);case"volume":var u=Object(o.ensureDefined)(i)>=1e100?n:Number(i),l=Object(o.ensureDefined)(r)>=1e100?n:Number(r);return t*(u-l);default:return Object(o.ensureDefined)(i)>Object(o.ensureDefined)(r)?-1:1}}}(n,i)(f,d,u,l)}))}function v(e){if(!e)return!1;var t="pre_market"===e.values.current_session,n="post_market"===e.values.current_session;return t||n}function S(e,t,n,i){var r=parseFloat(p(String(e))),o=parseFloat(p(String(t)));return n*((r=isNaN(r)?i:r)-(o=isNaN(o)?i:o))}function g(e,t){return e+"."+t}var w=((i={}).red=Object(s.t)("Red list"),i.green=Object(s.t)("Green list"),i.orange=Object(s.t)("Orange list"),i.purple=Object(s.t)("Purple list"),i.blue=Object(s.t)("Blue list"),i);function D(e){return w[e]}function O(e,t){return{color:e,id:e,title:t||D(e),isHotlist:!1,type:"colored",symbols:[]}}function j(e,t){return e===t||Object(d.shortName)(e)===t}function C(e){return{symbol:e.symbol,side:e.side,qty:e.qty,avgPrice:e.avgPrice}}function k(e,t){return e===t||void 0!==e&&void 0!==t&&(e.side===t.side&&e.qty===t.qty&&e.avgPrice===t.avgPrice&&e.symbol===t.symbol)}function E(e){try{return Object(d.shortName)(e)}catch(t){return e}}function F(e){for(var t=new Map,n=0;n<e.length;n++){var i=e[n].toUpperCase(),r=E(i);if(t.has(r)){var s=Object(o.ensureDefined)(t.get(r));if(s.has(i)||s.has(r)||i===r)return!0;s.add(i),t.set(r,s)}else t.set(r,new Set([i]))}return!1}function P(e,t){if(t.includes(e))return e}},hkLy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.InputField=function(){function e(t){var n=t.label,i=t.name,r=t.maxLength,o=t.error,s=void 0===o?"":o;!function(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=i,this._field=document.createElement("label"),this._field.classList.add("tv-rename-chart-dialog__field");var a=document.createElement("span");a.classList.add("tv-rename-chart-dialog__label"),a.innerHTML=n,this._inputElement=document.createElement("input"),this._inputElement.classList.add("tv-control-input"),this._inputElement.setAttribute("type","text"),this._inputElement.setAttribute("name",i),this._inputElement.setAttribute("maxlength",r),this._field.appendChild(a),this._field.appendChild(this._inputElement),this._error=s}return i(e,[{key:"appendTo",value:function(e){e.appendChild(this._field)}},{key:"focus",value:function(){this._inputElement.focus()}},{key:"select",value:function(){this.focus(),this._inputElement.select()}},{key:"value",set:function(e){this._inputElement.value=e},get:function(){return this._inputElement.value}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!!this._inputElement.value.trim()}},{key:"error",set:function(e){this._error=e},get:function(){return this._error}}]),e}()}}]);